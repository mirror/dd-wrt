/*! For license information please see main-1590-2bfa173d0c1bfb4f903c-plex-4.125.1-c17e55e.js.LICENSE.txt */
(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[1590],{83668:(e,t,r)=>{var n,i,s;s="object"==typeof self&&self.self==self&&self||"object"==typeof r.g&&r.g.global==r.g&&r.g,n=[r(95720),r(37588),t],i=function(e,t,r){s.Backbone=function(e,t,r,n){var i=e.Backbone,s=Array.prototype.slice;t.VERSION="1.2.3",t.$=n,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,n){r.each(t,(function(t,i){r[i]&&(e.prototype[i]=function(e,t,n){switch(e){case 1:return function(){return r[t](this[n])};case 2:return function(e){return r[t](this[n],e)};case 3:return function(e,i){return r[t](this[n],o(e,this),i)};case 4:return function(e,i,s){return r[t](this[n],o(e,this),i,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[n]),r[t].apply(r,e)}}}(t,i,n))}))},o=function(e,t){return r.isFunction(e)?e:r.isObject(e)&&!t._isModel(e)?c(e):r.isString(e)?function(t){return t.get(e)}:e},c=function(e){var t=r.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},d=/\s+/,u=function(e,t,n,i,s){var a,o=0;if(n&&"object"==typeof n){void 0!==i&&"context"in s&&void 0===s.context&&(s.context=i);for(a=r.keys(n);o<a.length;o++)t=u(e,t,a[o],n[a[o]],s)}else if(n&&d.test(n))for(a=n.split(d);o<a.length;o++)t=e(t,a[o],i,s);else t=e(t,n,i,s);return t};l.on=function(e,t,r){return p(this,e,t,r)};var p=function(e,t,r,n,i){return e._events=u(m,e._events||{},t,r,{context:n,ctx:e,listening:i}),i&&((e._listeners||(e._listeners={}))[i.id]=i),e};l.listenTo=function(e,t,n){if(!e)return this;var i=e._listenId||(e._listenId=r.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),a=s[i];if(!a){var o=this._listenId||(this._listenId=r.uniqueId("l"));a=s[i]={obj:e,objId:i,id:o,listeningTo:s,count:0}}return p(e,t,n,this,a),this};var m=function(e,t,r,n){if(r){var i=e[t]||(e[t]=[]),s=n.context,a=n.ctx,o=n.listening;o&&o.count++,i.push({callback:r,context:s,ctx:s||a,listening:o})}return e};l.off=function(e,t,r){return this._events?(this._events=u(h,this._events,e,t,{context:r,listeners:this._listeners}),this):this},l.stopListening=function(e,t,n){var i=this._listeningTo;if(!i)return this;for(var s=e?[e._listenId]:r.keys(i),a=0;a<s.length;a++){var o=i[s[a]];if(!o)break;o.obj.off(t,n,this)}return r.isEmpty(i)&&(this._listeningTo=void 0),this};var h=function(e,t,n,i){if(e){var s,a=0,o=i.context,c=i.listeners;if(t||n||o){for(var l=t?[t]:r.keys(e);a<l.length;a++){var d=e[t=l[a]];if(!d)break;for(var u=[],p=0;p<d.length;p++){var m=d[p];n&&n!==m.callback&&n!==m.callback._callback||o&&o!==m.context?u.push(m):(s=m.listening)&&0==--s.count&&(delete c[s.id],delete s.listeningTo[s.objId])}u.length?e[t]=u:delete e[t]}return r.size(e)?e:void 0}for(var h=r.keys(c);a<h.length;a++)delete c[(s=c[h[a]]).id],delete s.listeningTo[s.objId]}};l.once=function(e,t,n){var i=u(y,{},e,t,r.bind(this.off,this));return this.on(i,void 0,n)},l.listenToOnce=function(e,t,n){var i=u(y,{},t,n,r.bind(this.stopListening,this,e));return this.listenTo(e,i)};var y=function(e,t,n,i){if(n){var s=e[t]=r.once((function(){i(t,s),n.apply(this,arguments)}));s._callback=n}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),r=Array(t),n=0;n<t;n++)r[n]=arguments[n+1];return u(g,this._events,e,void 0,r),this};var g=function(e,t,r,n){if(e){var i=e[t],s=e.all;i&&s&&(s=s.slice()),i&&f(i,n),s&&f(s,[t].concat(n))}return e},f=function(e,t){var r,n=-1,i=e.length,s=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a,o);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}};l.bind=l.on,l.unbind=l.off,r.extend(t,l);var v=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=r.defaults({},n,r.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};r.extend(v.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!r.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var i;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var s=n.unset,a=n.silent,o=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=r.clone(this.attributes),this.changed={});var l=this.attributes,d=this.changed,u=this._previousAttributes;for(var p in i)t=i[p],r.isEqual(l[p],t)||o.push(p),r.isEqual(u[p],t)?delete d[p]:d[p]=t,s?delete l[p]:l[p]=t;if(this.id=this.get(this.idAttribute),!a){o.length&&(this._pending=n);for(var m=0;m<o.length;m++)this.trigger("change:"+o[m],this,l[o[m]],n)}if(c)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!r.isEmpty(this.changed):r.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var i in e){var s=e[i];r.isEqual(t[i],s)||(n[i]=s)}return!!r.size(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(e){e=r.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(r){var i=e.parse?t.parse(r,e):r;if(!t.set(i,e))return!1;n&&n.call(e.context,t,r,e),t.trigger("sync",t,r,e)},U(this,e),this.sync("read",this,e)},save:function(e,t,n){var i;null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t;var s=(n=r.extend({validate:!0,parse:!0},n)).wait;if(i&&!s){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var a=this,o=n.success,c=this.attributes;n.success=function(e){a.attributes=c;var t=n.parse?a.parse(e,n):e;if(s&&(t=r.extend({},i,t)),t&&!a.set(t,n))return!1;o&&o.call(n.context,a,e,n),a.trigger("sync",a,e,n)},U(this,n),i&&s&&(this.attributes=r.extend({},c,i));var l=this.isNew()?"create":n.patch?"patch":"update";"patch"!==l||n.attrs||(n.attrs=i);var d=this.sync(l,this,n);return this.attributes=c,d},destroy:function(e){e=e?r.clone(e):{};var t=this,n=e.success,i=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(r){i&&s(),n&&n.call(e.context,t,r,e),t.isNew()||t.trigger("sync",t,r,e)};var a=!1;return this.isNew()?r.defer(e.success):(U(this,e),a=this.sync("delete",this,e)),i||s(),a},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||j();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},r.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,r.extend(t,{validationError:n})),!1)}}),a(v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var b=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},S={add:!0,remove:!0,merge:!0},P={add:!0,remove:!1},I=function(e,t,r){r=Math.min(Math.max(r,0),e.length);for(var n=Array(e.length-r),i=t.length,s=0;s<n.length;s++)n[s]=e[s+r];for(s=0;s<i;s++)e[s+r]=t[s];for(s=0;s<n.length;s++)e[s+i+r]=n[s]};r.extend(b.prototype,l,{model:v,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.extend({merge:!1},t,P))},remove:function(e,t){t=r.extend({},t);var n=!r.isArray(e);e=n?[e]:r.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),n?i[0]:i},set:function(e,t){if(null!=e){(t=r.defaults({},t,S)).parse&&!this._isModel(e)&&(e=this.parse(e,t));var n=!r.isArray(e);e=n?e?[e]:[]:e.slice();var i=t.at;null!=i&&(i=+i),i<0&&(i+=this.length+1);for(var s,a=[],o=[],c=[],l={},d=t.add,u=t.merge,p=t.remove,m=!1,h=this.comparator&&null==i&&!1!==t.sort,y=r.isString(this.comparator)?this.comparator:null,g=0;g<e.length;g++){s=e[g];var f=this.get(s);if(f){if(u&&s!==f){var v=this._isModel(s)?s.attributes:s;t.parse&&(v=f.parse(v,t)),f.set(v,t),h&&!m&&(m=f.hasChanged(y))}l[f.cid]||(l[f.cid]=!0,a.push(f)),e[g]=f}else d&&(s=e[g]=this._prepareModel(s,t))&&(o.push(s),this._addReference(s,t),l[s.cid]=!0,a.push(s))}if(p){for(g=0;g<this.length;g++)l[(s=this.models[g]).cid]||c.push(s);c.length&&this._removeModels(c,t)}var b=!1,P=!h&&d&&p;if(a.length&&P?(b=this.length!=a.length||r.some(this.models,(function(e,t){return e!==a[t]})),this.models.length=0,I(this.models,a,0),this.length=this.models.length):o.length&&(h&&(m=!0),I(this.models,o,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(g=0;g<o.length;g++)null!=i&&(t.index=i+g),(s=o[g]).trigger("add",s,this,t);(m||b)&&this.trigger("sort",this,t),(o.length||c.length)&&this.trigger("update",this,t)}return n?e[0]:e}},reset:function(e,t){t=t?r.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,r.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,r.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return r.isFunction(t)&&(t=r.bind(t,this)),1===n||r.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return r.invoke(this.models,"get",e)},fetch:function(e){var t=(e=r.extend({parse:!0},e)).success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t.call(e.context,n,r,e),n.trigger("sync",n,r,e)},U(this,e),this.sync("read",this,e)},create:function(e,t){var n=(t=t?r.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;n||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,r){n&&i.add(e,r),s&&s.call(r.context,e,t,r)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?r.clone(t):{}).collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var r=[],n=0;n<e.length;n++){var i=this.get(e[n]);if(i){var s=this.indexOf(i);this.models.splice(s,1),this.length--,t.silent||(t.index=s,i.trigger("remove",i,this,t)),r.push(i),this._removeReference(i,t)}}return!!r.length&&r},_isModel:function(e){return e instanceof v},_addReference:function(e,t){this._byId[e.cid]=e;var r=this.modelId(e.attributes);null!=r&&(this._byId[r]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var r=this.modelId(e.attributes);null!=r&&delete this._byId[r],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){if("add"!==e&&"remove"!==e||r===this){if("destroy"===e&&this.remove(t,n),"change"===e){var i=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);i!==s&&(null!=i&&delete this._byId[i],null!=s&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}}}),a(b,{forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3},"models");var E=t.View=function(e){this.cid=r.uniqueId("view"),r.extend(this,r.pick(e,C)),this._ensureElement(),this.initialize.apply(this,arguments)},w=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];r.extend(E.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=r.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(r.isFunction(n)||(n=this[n]),n){var i=t.match(w);this.delegate(i[1],i[2],r.bind(n,this))}}return this},delegate:function(e,t,r){return this.$el.on(e+".delegateEvents"+this.cid,t,r),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,r){return this.$el.off(e+".delegateEvents"+this.cid,t,r),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,i){var s=O[e];r.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:s,dataType:"json"};if(i.url||(a.url=r.result(n,"url")||j()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",i.emulateJSON&&(a.data._method=s);var o=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",s),o)return o.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var c=i.error;i.error=function(e,t,r){i.textStatus=t,i.errorThrown=r,c&&c.call(i.context,e,t,r)};var l=i.xhr=t.ajax(r.extend(a,i));return n.trigger("request",n,l,i),l};var O={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var M=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,k=/\*\w+/g,x=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(M.prototype,l,{initialize:function(){},route:function(e,n,i){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var s=this;return t.history.route(e,(function(r){var a=s._extractParameters(e,r);!1!==s.execute(i,a,n)&&(s.trigger.apply(s,["route:"+n].concat(a)),s.trigger("route",n,a),t.history.trigger("route",s,n,a))})),this},execute:function(e,t,r){e&&e.apply(this,t)},navigate:function(e,r){return t.history.navigate(e,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var e,t=r.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(x,"\\$&").replace(T,"(?:$1)?").replace(D,(function(e,t){return t?e:"([^/?]+)"})).replace(k,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return r.map(n,(function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null}))}});var A=t.History=function(){this.handlers=[],this.checkUrl=r.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,L=/#.*$/;A.started=!1,r.extend(A.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(R,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");if(A.started=!0,this.options=r.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(N,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,i=n.insertBefore(this.iframe,n.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),r.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!A.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var r=this.root;""!==e&&"?"!==e.charAt(0)||(r=r.slice(0,-1)||"/");var n=r+e;e=e.replace(L,"");var i=this.decodeFragment(e);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;t.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new A;v.extend=b.extend=M.extend=E.extend=A.extend=function(e,t){var n,i=this;n=e&&r.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},r.extend(n,i,t);var s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,e&&r.extend(n.prototype,e),n.__super__=i.prototype,n};var j=function(){throw new Error('A "url" property or function must be specified')},U=function(e,t){var r=t.error;t.error=function(n){r&&r.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t}(s,r,e,t)}.apply(t,n),void 0===i||(e.exports=i)},57368:function(e,t,r){var n,i,s,a;n=r(95720),i=r(83668),e.exports=(s=n,(a=i).ChildViewContainer=function(e,t){var r=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};return t.extend(r.prototype,{add:function(e,t){var r=e.cid;return this._views[r]=e,e.model&&(this._indexByModel[e.model.cid]=r),t&&(this._indexByCustom[t]=r),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var r=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,(function(e,t){if(e===r)return delete this._indexByCustom[t],!0}),this),delete this._views[r],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,r){t.each(this._views,(function(n){t.isFunction(n[e])&&n[e].apply(n,r||[])}))},_updateLength:function(){this.length=t.size(this._views)}}),t.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],(function(e){r.prototype[e]=function(){var r=[t.values(this._views)].concat(t.toArray(arguments));return t[e].apply(t,r)}})),r}(0,s),a.ChildViewContainer)},43752:function(e,t,r){var n,i,s;i=r(95720),s=r(83668),r(61128),r(57368),e.exports=(function(e,t,r){"use strict";var n={};t.Marionette=n,n.$=t.$;var i=Array.prototype.slice;function s(e,t){var r=new Error(e);throw r.name=t||"Error",r}n.extend=t.Model.extend,n.getOption=function(e,t){if(e&&t)return e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]},n.normalizeMethods=function(e){var t,n={};return r.each(e,(function(e,i){t=e,r.isFunction(t)||(t=this[t]),t&&(n[i]=t)}),this),n},n.triggerMethod=function(){var e=/(^|:)(\w)/gi;function t(e,t,r){return r.toUpperCase()}return function(n){var i=this["on"+n.replace(e,t)];if(r.isFunction(this.trigger)&&this.trigger.apply(this,arguments),r.isFunction(i))return i.apply(this,r.tail(arguments))}}(),n.MonitorDOMRefresh=function(e){function t(t){t._isShown&&t._isRendered&&function(t){return e.contains(t.el)}(t)&&r.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}return function(e){e.listenTo(e,"show",(function(){!function(e){e._isShown=!0,t(e)}(e)})),e.listenTo(e,"render",(function(){!function(e){e._isRendered=!0,t(e)}(e)}))}}(document.documentElement),function(e){function t(e,t,n,i){var a=i.split(/\s+/);r.each(a,(function(r){var i=e[r];i||s("Method '"+r+"' was configured as an event handler, but does not exist."),e.listenTo(t,n,i)}))}function n(e,t,r,n){e.listenTo(t,r,n)}function i(e,t,n,i){var s=i.split(/\s+/);r.each(s,(function(r){var i=e[r];e.stopListening(t,n,i)}))}function a(e,t,r,n){e.stopListening(t,r,n)}function o(e,t,n,i,s){t&&n&&(r.isFunction(n)&&(n=n.call(e)),r.each(n,(function(n,a){r.isFunction(n)?i(e,t,a,n):s(e,t,a,n)})))}e.bindEntityEvents=function(e,r,i){o(e,r,i,n,t)},e.unbindEntityEvents=function(e,t,r){o(e,t,r,a,i)}}(n),n.Callbacks=function(){this._deferred=n.$.Deferred(),this._callbacks=[]},r.extend(n.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done((function(r,n){t&&(r=t),e.call(r,n)}))},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=n.$.Deferred(),this._callbacks=[],r.each(e,(function(e){this.add(e.cb,e.ctx)}),this)}}),n.Controller=function(e){this.triggerMethod=n.triggerMethod,this.options=e||{},r.isFunction(this.initialize)&&this.initialize(this.options)},n.Controller.extend=n.extend,r.extend(n.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),n.Region=function(e){if(this.options=e||{},this.el=n.getOption(this,"el"),this.el||s("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},r.extend(n.Region,{buildRegion:function(e,t){var n,i,a=r.isString(e),o=r.isString(e.selector),c=r.isUndefined(e.regionType),l=r.isFunction(e);l||a||o||s("Region must be specified as a Region type, a selector string or an object with selector property"),a&&(n=e),e.selector&&(n=e.selector,delete e.selector),l&&(i=e),!l&&c&&(i=t),e.regionType&&(i=e.regionType,delete e.regionType),(a||l)&&(e={}),e.el=n;var d=new i(e);return e.parentEl&&(d.getEl=function(t){var n=e.parentEl;return r.isFunction(n)&&(n=n()),n.find(t)}),d}}),r.extend(n.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||r.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,n.triggerMethod.call(this,"show",e),n.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return n.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),n.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),n.Region.extend=n.extend,n.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var n={};return r.each(e,(function(e,i){r.isString(e)&&(e={selector:e}),e.selector&&(e=r.defaults({},e,t));var s=this.addRegion(i,e);n[i]=s}),this),n},addRegion:function(t,n){var i,s=r.isObject(n),a=r.isString(n),o=!!n.selector;return i=a||s&&o||r.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,i),this.triggerMethod("region:add",t,i),i},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){r.each(this._regions,(function(e,t){this._remove(t,e)}),this)},closeRegions:function(){r.each(this._regions,(function(e,t){e.close()}),this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=r.size(this._regions)}});return r.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],(function(e){t.prototype[e]=function(){var t=[r.values(this._regions)].concat(r.toArray(arguments));return r[e].apply(r,t)}})),t}(n),n.TemplateCache=function(e){this.templateId=e},r.extend(n.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new n.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i.call(arguments),r=t.length;if(r>0)for(e=0;e<r;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),r.extend(n.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=n.$(e).html();return t&&0!==t.length||s("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return r.template(e)}}),n.Renderer={render:function(e,t){return e||s("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError"),("function"==typeof e?e:n.TemplateCache.get(e))(t)}},n.View=t.View.extend({constructor:function(e){r.bindAll(this,"render"),this.options=r.extend({},r.result(this,"options"),r.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(r.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),n.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:n.triggerMethod,normalizeMethods:n.normalizeMethods,getTemplate:function(){return n.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=n.getOption(this,"templateHelpers");return r.isFunction(t)&&(t=t.call(this)),r.extend(e,t)},normalizeUIKeys:function(e){var t=this;if(void 0!==e)return r.each(r.keys(e),(function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;n.match(i)&&(e[n.replace(i,(function(e){return r.result(t,"ui")[e.slice(4)]}))]=e[n],delete e[n])})),e},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(r.result(this,"triggers"));return r.each(t,(function(t,n){var i=r.isObject(t),s=i?t.event:t;e[n]=function(e){if(e){var r=e.preventDefault,n=e.stopPropagation,a=i?t.preventDefault:r,o=i?t.stopPropagation:n;a&&r&&r.apply(e),o&&n&&n.apply(e)}var c={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,c)}}),this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),n.bindEntityEvents(this,this.model,n.getOption(this,"modelEvents")),n.bindEntityEvents(this,this.collection,n.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,r.isFunction(e)&&(e=e.call(this));var n={},i=this.configureTriggers();r.extend(n,e,i),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),n.unbindEntityEvents(this,this.model,n.getOption(this,"modelEvents")),n.unbindEntityEvents(this,this.collection,n.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=r.result(this,"_uiBindings");this.ui={},r.each(r.keys(e),(function(t){var r=e[t];this.ui[t]=this.$(r)}),this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(r.each(this.ui,(function(e,t){delete this.ui[t]}),this),this.ui=this._uiBindings,delete this._uiBindings)}}),n.ItemView=n.View.extend({constructor:function(){n.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),r=n.Renderer.render(t,e);return this.$el.html(r),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),n.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),n.CollectionView=n.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),n.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(r.each(this._bufferedChildren,(function(e){n.triggerMethod.call(e,"show")})),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e,t,r){this.closeEmptyView();var n=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,n,i)},onShowCalled:function(){this.children.each((function(e){n.triggerMethod.call(e,"show")}))},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each((function(t,r){e=this.getItemView(t),this.addItemView(t,e,r)}),this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var r=new t.Model;this.addItemView(r,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return n.getOption(this,"emptyView")},getItemView:function(e){var t=n.getOption(this,"itemView");return t||s("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var s=n.getOption(this,"itemViewOptions");r.isFunction(s)&&(s=s.call(this,e,i));var a=this.buildItemView(e,t,s);return this.addChildViewEventForwarding(a),this.triggerMethod("before:item:added",a),this.children.add(a),this.renderItemView(a,i),this._isShown&&!this.isBuffering&&n.triggerMethod.call(a,"show"),this.triggerMethod("after:item:added",a),a},addChildViewEventForwarding:function(e){var t=n.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",(function(){var s=i.call(arguments),a=s[0],o=this.normalizeMethods(this.getItemEvents());s[0]=t+":"+a,s.splice(1,0,e),void 0!==o&&r.isFunction(o[a])&&o[a].apply(this,s),n.triggerMethod.apply(this,s)}),this)},getItemEvents:function(){return r.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,n){return new t(r.extend({model:e},n))},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,r){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),n.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each((function(e){this.removeChildView(e)}),this),this.checkEmpty()}}),n.CompositeView=n.CollectionView.extend({constructor:function(){n.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",(function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))}))},getItemView:function(e){var t=n.getOption(this,"itemView")||this.constructor;return t||s("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),n.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return n.Renderer.render(t,e)},appendBuffer:function(e,t){this.getItemViewContainer(e).append(t)},appendHtml:function(e,t,r){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):this.getItemViewContainer(e).append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,i=n.getOption(e,"itemViewContainer");if(i){var a=r.isFunction(i)?i.call(this):i;(t=e.$(a)).length<=0&&s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),n.Layout=n.ItemView.extend({regionType:n.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),n.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),n.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),n.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var r={};return r[e]=t,this._buildRegions(r)[e]},addRegions:function(e){return this.regions=r.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,r={regionType:n.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,r)},_initializeRegions:function(e){var t;this._initRegionManager(),t=r.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each((function(e){e.reset()}))},_initRegionManager:function(){this.regionManager=new n.RegionManager,this.listenTo(this.regionManager,"region:add",(function(e,t){this[e]=t,this.trigger("region:add",e,t)})),this.listenTo(this.regionManager,"region:remove",(function(e,t){delete this[e],this.trigger("region:remove",e,t)}))}}),n.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var r=n.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,r)},appRoute:function(e,t){var r=this._getController();this._addAppRoute(r,e,t)},processAppRoutes:function(e,t){if(t){var n=r.keys(t).reverse();r.each(n,(function(r){this._addAppRoute(e,r,t[r])}),this)}},_getController:function(){return n.getOption(this,"controller")},_addAppRoute:function(e,t,n){var i=e[n];i||s("Method '"+n+"' was not found on the controller"),this.route(t,n,r.bind(i,e))}}),n.Application=function(e){this._initRegionManager(),this._initCallbacks=new n.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},r.extend(this,e),this.triggerMethod=n.triggerMethod},r.extend(n.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var r=n.Module.getClass(t),s=i.call(arguments);return s.unshift(this),r.create.apply(r,s)},_initRegionManager:function(){this._regionManager=new n.RegionManager,this.listenTo(this._regionManager,"region:add",(function(e,t){this[e]=t})),this.listenTo(this._regionManager,"region:remove",(function(e,t){delete this[e]}))}}),n.Application.extend=n.extend,n.Module=function(e,t,i){this.moduleName=e,this.options=r.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=n.triggerMethod,r.isFunction(this.initialize)&&this.initialize(this.options,e,t)},n.Module.extend=n.extend,r.extend(n.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(r.each(this.submodules,(function(t){t.startWithParent&&t.start(e)})),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,n.triggerMethod.call(this,"before:stop"),r.each(this.submodules,(function(e){e.stop()})),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),n.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var s=r.flatten([this,this.app,t,n,n.$,r,i]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new n.Callbacks,this._finalizerCallbacks=new n.Callbacks}}),r.extend(n.Module,{create:function(e,t,n){var s=e,a=i.call(arguments);a.splice(0,3);var o=(t=t.split(".")).length,c=[];return c[o-1]=n,r.each(t,(function(t,r){var i=s;s=this._getModule(i,t,e,n),this._addModuleDefinition(i,s,c[r],a)}),this),s},_getModule:function(e,t,n,i,s){var a=r.extend({},i),o=this.getClass(i),c=e[t];return c||(c=new o(t,n,a),e[t]=c,e.submodules[t]=c),c},getClass:function(e){var t=n.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,s){var a,o;!r.isFunction(i)||i.prototype instanceof n.Module?r.isObject(i)?(a=i.define,o=!!r.isUndefined(i.startWithParent)||i.startWithParent):o=!0:(a=i,o=!0),a&&t.addDefinition(a,s),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer((function(e){t.startWithParent&&t.start(e)})))}})}(0,n=s,i),n.Marionette)},26344:function(e,t,r){e.exports=function(e,t){function r(r){return{underscore:e,"./backbone-1.2.3+19b88d2+57e89d8":t}[r]}var n=function(e){function t(e){var r=t.cache[e];if(!r){var n={};r=t.cache[e]={id:e,exports:n},t.modules[e].call(n,r,n)}return r.exports}return t.cache=[],t.modules=[function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(2),o=t(5),c=t(4),l=t(1),d=t(7);function u(e,t){this._superset=e,this._filtered=new a(e,t),this._sorted=new o(this._filtered,t),this._paginated=new c(this._sorted,t),l(this._paginated,this),d.call(this,this._filtered,m),d.call(this,this._sorted,h),d.call(this,this._paginated,y),this.initialize(t)}var p={superset:function(){return this._superset},getFilteredLength:function(){return this._filtered.length},removeTransforms:function(){return this._filtered.resetFilters(),this._sorted.removeSort(),this._paginated.removePagination(),this},destroy:function(){this.stopListening(),this._filtered.destroy(),this._sorted.destroy(),this._paginated.destroy(),this.length=0,this.trigger("obscura:destroy")}},m=["filtered:add","filtered:remove","filtered:reset"],h=["sorted:add","sorted:remove"],y=["paginated:change:perPage","paginated:change:page","paginated:change:numPages"];i.each(["filterBy","removeFilter","resetFilters","refilter","hasFilter","getFilters"],(function(e){p[e]=function(){var t=a.prototype[e].apply(this._filtered,arguments);return t===this._filtered?this:t}})),i.each(["setPerPage","setPage","getPerPage","getNumPages","getPage","hasNextPage","hasPrevPage","nextPage","prevPage","movePage","removePagination","firstPage","lastPage"],(function(e){p[e]=function(){var t=c.prototype[e].apply(this._paginated,arguments);return t===this._paginated?this:t}})),i.each(["setSort","reverseSort","removeSort"],(function(e){p[e]=function(){var t=o.prototype[e].apply(this._sorted,arguments);return t===this._sorted?this:t}})),i.each(["add","create","remove","set","reset","sort","parse","sync","fetch","push","pop","shift","unshift"],(function(e){p[e]=function(){throw new Error("Backbone.Obscura: Unsupported method: "+e+"called on read-only proxy")}})),i.extend(u.prototype,p,s.Events),(u=s.Collection.extend(u.prototype)).FilteredCollection=a,u.SortedCollection=o,u.PaginatedCollection=c,e.exports=u},function(e,t){var n=r("underscore"),i=r("./backbone-1.2.3+19b88d2+57e89d8"),s=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],a=["add","remove","reset","sort","destroy","sync","request","error"];e.exports=function(e,t){function r(){t.length=e.length}var o={};return n.each(n.functions(i.Collection.prototype),(function(t){n.contains(s,t)||(o[t]=function(){return e[t].apply(e,arguments)})})),n.extend(t,i.Events,o),t.listenTo(e,"all",r),t.listenTo(e,"all",(function(r){var i=n.toArray(arguments),s="change"===r||"change:"===r.slice(0,7);"reset"===r&&(t.models=e.models),n.contains(a,r)?(n.contains(["add","remove","destroy"],r)?i[2]=t:n.contains(["reset","sort"],r)&&(i[1]=t),t.trigger.apply(this,i)):s&&t.contains(i[1])&&t.trigger.apply(this,i)})),t.models=e.models,r(),t}},function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(1),o=t(3);function c(){this._filterResultCache={}}function l(e){for(var t in this._filterResultCache)this._filterResultCache.hasOwnProperty(t)&&delete this._filterResultCache[t][e]}function d(e,t){this._filters[e]&&l.call(this,e),this._filters[e]=t,this.trigger("filtered:add",e)}function u(e){delete this._filters[e],l.call(this,e),this.trigger("filtered:remove",e)}function p(e){this._filterResultCache[e.cid]||(this._filterResultCache[e.cid]={});var t=this._filterResultCache[e.cid];for(var r in this._filters)if(this._filters.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=this._filters[r].fn(e)),!t[r]))return!1;return!0}function m(e){e||(e={});var t=[];this._superset&&(t=this._superset.filter(i.bind(p,this))),e.reset?this._collection.reset(t):this._collection.set(t),this.length=this._collection.length}function h(){m.call(this,{reset:!0})}function y(){var e=!(!this._superset||!this._superset.comparator);m.call(this,{reset:e})}function g(e){if(this._filterResultCache[e.cid]={},p.call(this,e)){if(!this._collection.get(e.cid)){for(var t=null,r=this.superset().indexOf(e)-1;r>=0;r-=1)if(this.contains(this.superset().at(r))){t=this.indexOf(this.superset().at(r))+1;break}t=t||0,this._collection.add(e,{at:t})}}else this._collection.get(e.cid)&&this._collection.remove(e);this.length=this._collection.length}function f(e){this._filterResultCache[e.cid]={},p.call(this,e)||this._collection.get(e.cid)&&this._collection.remove(e)}function v(e,t,r){"change:"===e.slice(0,7)&&f.call(this,arguments[1])}function b(e){this.contains(e)&&this._collection.remove(e),this.length=this._collection.length}function S(e){this._superset=e,this._collection=new s.Collection(e.toArray()),a(this._collection,this),this.resetFilters(),this.listenTo(this._superset,"reset",h),this.listenTo(this._superset,"sort",y),this.listenTo(this._superset,"add change",g),this.listenTo(this._superset,"remove",b),this.listenTo(this._superset,"all",v)}var P={defaultFilterName:"__default",filterBy:function(e,t){return t||(t=e,e=this.defaultFilterName),d.call(this,e,o(t)),m.call(this),this},removeFilter:function(e){return e||(e=this.defaultFilterName),u.call(this,e),m.call(this),this},resetFilters:function(){return this._filters={},c.call(this),this.trigger("filtered:reset"),m.call(this),this},superset:function(){return this._superset},refilter:function(e){return"object"==typeof e&&e.cid?g.call(this,e):(c.call(this),m.call(this)),this},getFilters:function(){return i.keys(this._filters)},hasFilter:function(e){return i.contains(this.getFilters(),e)},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("filtered:destroy")}};i.extend(S.prototype,P,s.Events),e.exports=S},function(e,t){var n=r("underscore");function i(e,t){return n.isArray(t)||(t=null),{fn:e,keys:t}}e.exports=function(e,t){return n.isFunction(e)?i(e,t):n.isObject(e)?function(e){var t=n.keys(e),r=n.map(t,(function(t){var r=e[t];return n.isFunction(r)?function(e,t){return function(r){return t(r.get(e))}}(t,r):function(e,t){return function(r){return r.get(e)===t}}(t,r)}));return i((function(e){for(var t=0;t<r.length;t++)if(!r[t](e))return!1;return!0}),t)}(e):void 0}},function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(1);function o(){var e=this.getPage()*this.getPerPage();return[e,e+this.getPerPage()]}function c(){var e=o.call(this);this._collection.reset(this.superset().slice(e[0],e[1]))}function l(){this._totalPages;var e=this.superset().length,t=this.getPerPage(),r=e%t==0?e/t:Math.floor(e/t)+1,n=this._totalPages!==r;if(this._totalPages=r,n&&this.trigger("paginated:change:numPages",{numPages:r}),this.getPage()>=r)return this.setPage(r-1),!0}function d(){l.call(this)||c.call(this)}function u(e,t){for(var r=i.max([e.length,t.length]),n=0,s=0;n<r;n+=1,s+=1)if(e[n]!==t[s])if(t[n-1]===e[n])s-=1;else{if(t[n+1]!==e[n])return e[n];s+=1}}function p(e,t,r){if(!l.call(this)){var n=o.call(this),i=n[0],s=n[1],a=u(this.superset().slice(i,s),this._collection.toArray()),c=u(this._collection.toArray(),this.superset().slice(i,s));c&&this._collection.remove(c),a&&this._collection.add(a,{at:this.superset().indexOf(a)-i})}}function m(e,t){this._superset=e,this._collection=new s.Collection(e.toArray()),this._page=0,this.setPerPage(t&&t.perPage?t.perPage:null),a(this._collection,this),this.listenTo(this._superset,"add remove",p),this.listenTo(this._superset,"reset sort",d)}var h={removePagination:function(){return this.setPerPage(null),this},setPerPage:function(e){return this._perPage=e,d.call(this),this.setPage(0),this.trigger("paginated:change:perPage",{perPage:e,numPages:this.getNumPages()}),this},setPage:function(e){var t=this.getNumPages()-1;return e=(e=(e=e>0?e:0)<t?e:t)<0?0:e,this._page=e,c.call(this),this.trigger("paginated:change:page",{page:e}),this},getPerPage:function(){return this._perPage||this.superset().length||1},getNumPages:function(){return this._totalPages},getPage:function(){return this._page},hasNextPage:function(){return this.getPage()<this.getNumPages()-1},hasPrevPage:function(){return this.getPage()>0},nextPage:function(){return this.movePage(1),this},prevPage:function(){return this.movePage(-1),this},firstPage:function(){this.setPage(0)},lastPage:function(){this.setPage(this.getNumPages()-1)},movePage:function(e){return this.setPage(this.getPage()+e),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this._page=0,this._totalPages=0,this.length=0,this.trigger("paginated:destroy")}};i.extend(m.prototype,h,s.Events),e.exports=m},function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(1),o=t(6);function c(e){return i.isFunction(e)?e:function(t){return t.get(e)}}function l(e){return this._comparator?this._reverse?o(this._collection.toArray(),e,c(this._comparator)):i.sortedIndex(this._collection.toArray(),e,c(this._comparator)):this._superset.indexOf(e)}function d(e){var t=l.call(this,e);this._collection.add(e,{at:t})}function u(e){this.contains(e)&&this._collection.remove(e)}function p(e){this.contains(e)&&this._collection.indexOf(e)!==l.call(this,e)&&(this._collection.remove(e),d.call(this,e))}function m(){if(this._comparator){var e=this._superset.sortBy(this._comparator);this._collection.reset(this._reverse?e.reverse():e)}else this._collection.reset(this._superset.toArray())}function h(e){this._superset=e,this._reverse=!1,this._comparator=null,this._collection=new s.Collection(e.toArray()),a(this._collection,this),this.listenTo(this._superset,"add",d),this.listenTo(this._superset,"remove",u),this.listenTo(this._superset,"change",p),this.listenTo(this._superset,"reset",m)}var y={setSort:function(e,t){return this._reverse="desc"===t,this._comparator=e,m.call(this),e?this.trigger("sorted:add"):this.trigger("sorted:remove"),this},reverseSort:function(){return this._reverse=!this._reverse,m.call(this),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};i.extend(h.prototype,y,s.Events),e.exports=h},function(e,t){var n=r("underscore");e.exports=function(e,t,r,i){for(var s=(r=null==r?n.identity:function(e){return n.isFunction(e)?e:function(t){return t[e]}}(r)).call(i,t),a=0,o=e.length;a<o;){var c=a+o>>>1;r.call(i,e[c])<s?o=c:a=c+1}return a}},function(e,t){var n=r("underscore");e.exports=function(e,t){n.each(t,(function(t){this.listenTo(e,t,(function(){var e=n.toArray(arguments);e.unshift(t),this.trigger.apply(this,e)}))}),this)}}],t(0)}();return n}(r(95720),r(83668))},61128:function(e,t,r){var n,i;n=r(95720),i=r(83668),e.exports=function(e,t){"use strict";return t.Wreqr=function(e,t,r){var n,i={};return i.Handlers=function(e,t){var r=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return r.extend=e.Model.extend,t.extend(r.prototype,e.Events,{setHandlers:function(e){t.each(e,(function(e,r){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(r,e,n)}),this)},setHandler:function(e,t,r){var n={callback:t,context:r};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,r)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),r}(e,r),i.CommandStorage=(n=function(e){this.options=e,this._commands={},r.isFunction(this.initialize)&&this.initialize(e)},r.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){this.getCommands(e).instances.push(t)},clearCommands:function(e){this.getCommands(e).instances=[]}}),n),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var r=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,r)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var i=this.storage.getCommands(e);r.each(i.instances,(function(e){t.apply(n,e)})),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=r.isFunction(n)?new n:n,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e))return this.getHandler(e).apply(this,t)}})}(i),i.EventAggregator=function(e,t){var r=function(){};return r.extend=e.Model.extend,t.extend(r.prototype,e.Events),r}(e,r),i}(t,t.Marionette,e),t.Wreqr}(n,i)},55192:(e,t,r)=>{!function(e){"use strict";var t=function(r,n){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,n)};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",r=this.$element,n=r.is("input")?"val":"html",i=r.data();e+="Text",i.resetText||r.data("resetText",r[n]()),r[n](i[e]||this.options[e]),setTimeout((function(){"loadingText"==e?r.addClass(t).attr(t,t):r.removeClass(t).removeAttr(t)}),0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]');e.length&&"radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=function(r){return this.each((function(){var n=e(this),i=n.data("bs.button"),s="object"==typeof r&&r;i||n.data("bs.button",i=new t(this,s)),"toggle"==r?i.toggle():r&&i.setState(r)}))},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",(function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),r.button("toggle"),t.preventDefault()}))}(r(37588))},57936:(e,t,r)=>{!function(e){"use strict";var t=function(t,r){this.options=r,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var r=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop((function(){var n=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(document.body),r.$element.show(),n&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});n?r.$element.find(".modal-dialog").one(e.support.transition.end,(function(){r.$element.focus().trigger(i)})).emulateTransitionEnd(300):r.$element.focus().trigger(i)})))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()}),this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")}))},t.prototype.removeBackdrop=function(){delete this.backdropMouseDownTarget,this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$element.on("mousedown.dismiss.modal",e.proxy((function(e){this.backdropMouseDownTarget=e.target}),this)),this.$element.on("mouseup.dismiss.modal",e.proxy((function(e){e.target===this.backdropMouseDownTarget&&(delete this.backdropMouseDownTarget,e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)))}),this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var r=e.fn.modal;e.fn.modal=function(r,n){return this.each((function(){var i=e(this),s=i.data("bs.modal"),a=e.extend({},t.DEFAULTS,i.data(),"object"==typeof r&&r);s||i.data("bs.modal",s=new t(this,a)),"string"==typeof r?s[r](n):a.show&&s.show(n)}))},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var r=e(this),n=r.attr("href"),i=e(r.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},i.data(),r.data());t.preventDefault(),i.modal(s,this).one("hide",(function(){r.is(":visible")&&r.focus()}))})),e(document).on("show.bs.modal",".modal",(function(){e(document.body).addClass("modal-open")})).on("hidden.bs.modal",".modal",(function(){e(document.body).removeClass("modal-open")}))}(r(37588))},7184:(e,t,r)=>{!function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,r,n){this.enabled=!0,this.type=t,this.$element=e(r),this.options=this.getOptions(n);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var a=i[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focus",c="hover"==a?"mouseleave":"blur";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},r=this.getDefaults();return this._options&&e.each(this._options,(function(e,n){r[e]!=n&&(t[e]=n)})),t},t.prototype.enter=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(r.timeout),r.hoverState="in",!r.options.delay||!r.options.delay.show)return r.show();r.timeout=setTimeout((function(){"in"==r.hoverState&&r.show()}),r.options.delay.show)},t.prototype.leave=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(r.timeout),r.hoverState="out",!r.options.delay||!r.options.delay.hide)return r.hide();r.timeout=setTimeout((function(){"out"==r.hoverState&&r.hide()}),r.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var r=this.tip();this.setContent(),this.options.animation&&r.addClass("fade");var n="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(n);s&&(n=n.replace(i,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(n),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var a=this.getPosition(),o=r[0].offsetWidth,c=r[0].offsetHeight;if(s){var l=this.$element.parent(),d=n,u=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:l.outerWidth(),m="body"==this.options.container?window.innerHeight:l.outerHeight(),h="body"==this.options.container?0:l.offset().left;n="bottom"==n&&a.top+a.height+c-u>m?"top":"top"==n&&a.top-u-c<0?"bottom":"right"==n&&a.right+o>p?"left":"left"==n&&a.left-o<h?"right":n,r.removeClass(d).addClass(n)}var y=this.getCalculatedOffset(n,a,o,c);this.applyPlacement(y,n),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var r,n=this.tip(),i=n[0].offsetWidth,s=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(o)&&(o=0),e.top=e.top+a,e.left=e.left+o,n.offset(e).addClass("in");var c=n[0].offsetWidth,l=n[0].offsetHeight;if("top"==t&&l!=s&&(r=!0,e.top=e.top+s-l),/bottom|top/.test(t)){var d=0;e.left<0&&(d=-2*e.left,e.left=0,n.offset(e),c=n[0].offsetWidth,l=n[0].offsetHeight),this.replaceArrow(d-i+c,c,"left")}else this.replaceArrow(l-s,l,"top");r&&n.offset(e)},t.prototype.replaceArrow=function(e,t,r){this.arrow().css(r,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){var t=this,r=this.tip(),n=e.Event("hide.bs."+this.type);function i(){"in"!=t.hoverState&&r.detach()}if(this.$element.trigger(n),!n.isDefaultPrevented())return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),this.$element.trigger("hidden.bs."+this.type),this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,r,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-r/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-r/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-r}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var r=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;r.tip().hasClass("in")?r.leave(r):r.enter(r)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var r=e.fn.tooltip;e.fn.tooltip=function(r){return this.each((function(){var n=e(this),i=n.data("bs.tooltip"),s="object"==typeof r&&r;i||n.data("bs.tooltip",i=new t(this,s)),"string"==typeof r&&i[r]()}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(r(37588))},34712:(e,t,r)=>{!function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var r=!1,n=this;return e(this).one(e.support.transition.end,(function(){r=!0})),setTimeout((function(){r||e(n).trigger(e.support.transition.end)}),t),this},e((function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in t)if(void 0!==e.style[r])return{end:t[r]}}()}))}(r(37588))},67200:()=>{!function(){"use strict";var e="undefined"==typeof window,t=!e&&"scrollBehavior"in document.documentElement.style,r=function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function n(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function i(){return null!=document.scrollingElement?document.scrollingElement:document.documentElement}var s="scroll-behavior",a=new RegExp(s+":\\s*([^;]*)");function o(e,t){var r=s+":"+t,n=e.getAttribute("style");if(null!=n&&""!==n){var i=c(e);if(null!=i){var a=s+":"+i;n=(n=n.replace(a+";","")).replace(a,"")}e.setAttribute("style",n.endsWith(";")?""+n+r:";"+n+r)}else e.setAttribute("style",r)}function c(e){var t=e.getAttribute("style");if(null!=t&&t.includes(s)){var r=t.match(a);if(null!=r){var i=n(r,2)[1];if(null!=i&&""!==i)return i}}}var l="scrollBehavior";function d(e,t){if(null!=t&&"smooth"===t.behavior)return"smooth";var r,n="style"in e?e:i();if("style"in n){var s=n.style[l];null!=s&&""!==s&&(r=s)}if(null==r){var a=n.getAttribute("scroll-behavior");null!=a&&""!==a&&(r=a)}if(null==r&&(r=c(n)),null==r){var o=getComputedStyle(n).getPropertyValue("scrollBehavior");null!=o&&""!==o&&(r=o)}return r}var u=.5;function p(e){return u*(1-Math.cos(Math.PI*e))}var m={reset:function(){}},h="undefined"==typeof WeakMap?void 0:new WeakMap,y=15e3;var g=e?void 0:Element.prototype.scroll,f=e?void 0:window.scroll,v=e?void 0:Element.prototype.scrollBy,b=e?void 0:window.scrollBy,S=e?void 0:Element.prototype.scrollTo,P=e?void 0:window.scrollTo;function I(e,t){this.__adjustingScrollPosition=!0,this.scrollLeft=e,this.scrollTop=t,delete this.__adjustingScrollPosition}function E(e,t){return I.call(this,e,t)}function w(e,t){this.__adjustingScrollPosition=!0,this.scrollLeft+=e,this.scrollTop+=t,delete this.__adjustingScrollPosition}function C(e,t){switch(e){case"scroll":return t instanceof Element?null!=g?g:I:f;case"scrollBy":return t instanceof Element?null!=v?v:w:b;case"scrollTo":return t instanceof Element?null!=S?S:E:P}}function O(e){return null==e?0:"number"==typeof e?e:"string"==typeof e?parseFloat(e):0}function M(e){return null!=e&&"object"==typeof e}function T(e,n,s,a){!function(e,r,n){var s=d(r,e);null==s||"auto"===s?C(n,r).call(r,e.left,e.top):function(e){var r=e.startTime,n=e.startX,s=e.startY,a=e.endX,l=e.endY,d=e.method,u=e.scroller,g=0,f=a-n,v=l-s,b=Math.max(Math.abs(f/1e3*y),Math.abs(v/1e3*y)),S=function(e){if(t||null==h)return m;var r,n,s,a,l,d=i(),u=h.get(e);if(null!=u)r=u.cachedScrollSnapValue,n=u.cachedScrollBehaviorStyleAttributeValue,s=u.secondaryScroller,a=u.secondaryScrollerCachedScrollSnapValue,l=u.secondaryScrollerCachedScrollBehaviorStyleAttributeValue,u.release();else{r=""===e.style.scrollSnapType?null:e.style.scrollSnapType,n=c(e),s=e===d&&d!==document.body?document.body:void 0,a=null==s?void 0:""===s.style.scrollSnapType?null:s.style.scrollSnapType,l=null==s?void 0:c(s);var p=getComputedStyle(e).getPropertyValue("scroll-snap-type"),y=null==s?void 0:getComputedStyle(s).getPropertyValue("scroll-snap-type");if("none"===p&&"none"===y)return m}e.style.scrollSnapType="none",void 0!==s&&(s.style.scrollSnapType="none"),void 0!==n&&o(e,n),void 0!==s&&void 0!==l&&o(s,l);var g=!1,f=e===d?window:e;function v(){f.removeEventListener("scroll",b),null!=h&&h.delete(e),g=!0}function b(){e.style.scrollSnapType=r,null!=s&&void 0!==a&&(s.style.scrollSnapType=a),void 0!==n&&o(e,n),void 0!==s&&void 0!==l&&o(s,l),v()}return h.set(e,{release:v,cachedScrollSnapValue:r,cachedScrollBehaviorStyleAttributeValue:n,secondaryScroller:s,secondaryScrollerCachedScrollSnapValue:a,secondaryScrollerCachedScrollBehaviorStyleAttributeValue:l}),{reset:function(){setTimeout((function(){g||f.addEventListener("scroll",b)}))}}}(u);requestAnimationFrame((function e(t){g+=t-r;var i=Math.max(0,Math.min(1,0===b?0:g/b)),o=Math.floor(n+f*p(i)),c=Math.floor(s+v*p(i));d(o,c),o!==a||c!==l?requestAnimationFrame(e):null!=S&&(S.reset(),S=void 0)}))}(function(e,t,r,n){var s="performance"in window?performance.now():Date.now();if(e instanceof Element)return{startTime:s,startX:a=e.scrollLeft,startY:o=e.scrollTop,endX:Math.floor("scrollBy"===n?a+t:t),endY:Math.floor("scrollBy"===n?o+r:r),method:C("scrollTo",e).bind(e),scroller:e};var a,o,c=window.scrollX,l=window.pageXOffset,d=window.scrollY,u=window.pageYOffset;return{startTime:s,startX:a=null==c||0===c?l:c,startY:o=null==d||0===d?u:d,endX:Math.floor("scrollBy"===n?a+t:t),endY:Math.floor("scrollBy"===n?o+r:r),method:C("scrollTo",window).bind(window),scroller:i()}}(r,e.left,e.top,n))}(function(e,t){if(void 0===t&&!M(e))throw new TypeError("Failed to execute 'scroll' on 'Element': parameter 1 ('options') is not an object.");return M(e)?r(r({},D(e.left,e.top)),{behavior:null==e.behavior?"auto":e.behavior}):r(r({},D(e,t)),{behavior:"auto"})}(s,a),e,n)}function D(e,t){return{left:O(e),top:O(t)}}function k(e){return"nodeType"in e&&1===e.nodeType?e.parentNode:"ShadowRoot"in window&&e instanceof window.ShadowRoot?e.host:e===document?window:e instanceof Node?e.parentNode:null}function x(e){return"visible"!==e&&"clip"!==e}function A(e){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return x(t.overflowY)||x(t.overflowX)}return!1}function R(e){for(var t=e,r=i();null!=t;){var n=d(t);if(null!=n&&(t===r||A(t)))return[t,n];t=k(t)}for(t=e;null!=t;){if(t===r||A(t))return[t,"auto"];t=k(t)}return[r,"auto"]}function N(e){if(void 0===e&&(e=location),"origin"in e&&null!=e.origin)return e.origin;var t=null!=e.port&&e.port.length>0?":"+e.port:"";return("http:"===e.protocol&&":80"===t||"https:"===e.protocol&&":443"===t)&&(t=""),e.protocol+"//"+e.hostname+t}var L=/^#\d/;var j=e?void 0:Element.prototype.scrollIntoView;function U(e,t,r,n,i,s,a,o){return s<e&&a>t||s>e&&a<t?0:s<=e&&o<=r||a>=t&&o>=r?s-e-n:a>t&&o<r||s<e&&o>r?a-t+i:0}function F(e,t,r){var n=r.block,s=r.inline,a=i(),o=null!=window.visualViewport?visualViewport.width:innerWidth,c=null!=window.visualViewport?visualViewport.height:innerHeight,l=null!=window.scrollX?window.scrollX:window.pageXOffset,d=null!=window.scrollY?window.scrollY:window.pageYOffset,u=e.getBoundingClientRect(),p=u.height,m=u.width,h=u.top,y=u.right,g=u.bottom,f=u.left,v="start"===n||"nearest"===n?h:"end"===n?g:h+p/2,b="center"===s?f+m/2:"end"===s?y:f,S=t.getBoundingClientRect(),P=S.height,I=S.width,E=S.top,w=S.right,C=S.bottom,O=S.left,M=getComputedStyle(t),T=parseInt(M.borderLeftWidth,10),D=parseInt(M.borderTopWidth,10),k=parseInt(M.borderRightWidth,10),x=parseInt(M.borderBottomWidth,10),A=0,R=0,N="offsetWidth"in t?t.offsetWidth-t.clientWidth-T-k:0,L="offsetHeight"in t?t.offsetHeight-t.clientHeight-D-x:0;if(a===t)A="start"===n?v:"end"===n?v-c:"nearest"===n?U(d,d+c,c,D,x,d+v,d+v+p,p):v-c/2,R="start"===s?b:"center"===s?b-o/2:"end"===s?b-o:U(l,l+o,o,T,k,l+b,l+b+m,m),A=Math.max(0,A+d),R=Math.max(0,R+l);else{A="start"===n?v-E-D:"end"===n?v-C+x+L:"nearest"===n?U(E,C,P,D,x+L,v,v+p,p):v-(E+P/2)+L/2,R="start"===s?b-O-T:"center"===s?b-(O+I/2)+N/2:"end"===s?b-w+k+N:U(O,w,I,T,k+N,b,b+m,m);var j=t.scrollLeft,F=t.scrollTop;A=Math.max(0,Math.min(F+A,t.scrollHeight-P+L)),R=Math.max(0,Math.min(j+R,t.scrollWidth-I+N))}return{top:A,left:R}}var V=e?void 0:Object.getOwnPropertyDescriptor(Element.prototype,"scrollTop").set,_=e?void 0:Object.getOwnPropertyDescriptor(Element.prototype,"scrollLeft").set,W=!e&&"scroll"in Element.prototype&&"scrollTo"in Element.prototype&&"scrollBy"in Element.prototype&&"scrollIntoView"in Element.prototype;e||t&&W||(Element.prototype.scroll=function(e,t){T(this,"scroll",e,t)},Element.prototype.scrollBy=function(e,t){T(this,"scrollBy",e,t)},Element.prototype.scrollTo=function(e,t){T(this,"scrollTo",e,t)},Element.prototype.scrollIntoView=function(e){var t=null==e||!0===e?{block:"start",inline:"nearest"}:!1===e?{block:"end",inline:"nearest"}:e,i=n(R(this),2),s=i[0],a=i[1],o=null!=t.behavior?t.behavior:a;if("smooth"===o)s.scrollTo(r({behavior:o},F(this,s,t)));else if(null!=j)j.call(this,t);else{var c=F(this,s,t),l=c.top,d=c.left;C("scrollTo",this).call(this,d,l)}},null!=HTMLElement.prototype.scrollIntoView&&HTMLElement.prototype.scrollIntoView!==Element.prototype.scrollIntoView&&(HTMLElement.prototype.scrollIntoView=Element.prototype.scrollIntoView),Object.defineProperty(Element.prototype,"scrollLeft",{set:function(e){return this.__adjustingScrollPosition?_.call(this,e):(T(this,"scrollTo",e,this.scrollTop),e)}}),Object.defineProperty(Element.prototype,"scrollTop",{set:function(e){return this.__adjustingScrollPosition?V.call(this,e):(T(this,"scrollTo",this.scrollLeft,e),e)}}),window.scroll=function(e,t){T(this,"scroll",e,t)},window.scrollBy=function(e,t){T(this,"scrollBy",e,t)},window.scrollTo=function(e,t){T(this,"scrollTo",e,t)},window.addEventListener("click",(function(e){if(e.isTrusted&&e.target instanceof HTMLAnchorElement){var t=e.target,r=t.pathname,i=t.search,s=t.hash;if(N(e.target)===N(location)&&r===location.pathname&&i===location.search&&null!=s&&!(s.length<1)){var a=function(e){for(var t=e;null!=t;){if("ShadowRoot"in window&&t instanceof window.ShadowRoot)return t;var r=k(t);if(r===t)return document;t=r}return document}(e.target),o=null;try{o=null!=s.match(L)?a.getElementById(s.slice(1)):a.querySelector(s)}catch(e){}if(null!=o){var c=n(R(o),2)[1];"smooth"===c&&(e.preventDefault(),o.scrollIntoView({behavior:c}))}}}})))}()},70124:function(e,t,r){var n,i,s,a,o,c,l,d,u,p=r(37588);i=function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=n(String(e||"").toLowerCase()))||!e.length)return[];var t,r,s,o,c=[],l=e.split(/ +/);for(t=0,r=l.length;t<r;t++){if(s=i(l[t]),this.settings.diacritics)for(o in a)a.hasOwnProperty(o)&&(s=s.replace(new RegExp(o,"g"),a[o]));c.push({string:l[t],regex:new RegExp(s,"i")})}return c},e.prototype.iterator=function(e,t){var r;r=s(e)?Array.prototype.forEach||function(e){for(var t=0,r=this.length;t<r;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},r.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var r,n,i;e=this.prepareSearch(e,t),n=e.tokens,r=e.options.fields,i=n.length;var s,a=function(e,t){var r,n;return e?-1===(n=(e=String(e||"")).search(t.regex))?0:(r=t.string.length/e.length,0===n&&(r+=.5),r):0},o=(s=r.length)?1===s?function(e,t){return a(t[r[0]],e)}:function(e,t){for(var n=0,i=0;n<s;n++)i+=a(t[r[n]],e);return i/s}:function(){return 0};return i?1===i?function(e){return o(n[0],e)}:"and"===e.options.conjunction?function(e){for(var t,r=0,s=0;r<i;r++){if((t=o(n[r],e))<=0)return 0;s+=t}return s/i}:function(e){for(var t=0,r=0;t<i;t++)r+=o(n[t],e);return r/i}:function(){return 0}},e.prototype.getSortFunction=function(e,r){var n,i,s,a,o,c,l,d,u,p,m;if(m=!(e=(s=this).prepareSearch(e,r)).query&&r.sort_empty||r.sort,u=function(e,t){return"$score"===e?t.score:s.items[t.id][e]},o=[],m)for(n=0,i=m.length;n<i;n++)(e.query||"$score"!==m[n].field)&&o.push(m[n]);if(e.query){for(p=!0,n=0,i=o.length;n<i;n++)if("$score"===o[n].field){p=!1;break}p&&o.unshift({field:"$score",direction:"desc"})}else for(n=0,i=o.length;n<i;n++)if("$score"===o[n].field){o.splice(n,1);break}for(d=[],n=0,i=o.length;n<i;n++)d.push("desc"===o[n].direction?-1:1);return(c=o.length)?1===c?(a=o[0].field,l=d[0],function(e,r){return l*t(u(a,e),u(a,r))}):function(e,r){var n,i,s;for(n=0;n<c;n++)if(s=o[n].field,i=d[n]*t(u(s,e),u(s,r)))return i;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var n=(t=r({},t)).fields,i=t.sort,a=t.sort_empty;return n&&!s(n)&&(t.fields=[n]),i&&!s(i)&&(t.sort=[i]),a&&!s(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var r,n,i,s,a=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,s=t.score||a.getScoreFunction(n),e.length?a.iterator(a.items,(function(e,i){r=s(e),(!1===t.filter||r>0)&&n.items.push({score:r,id:i})})):a.iterator(a.items,(function(e,t){n.items.push({score:1,id:t})})),(i=a.getSortFunction(n,t))&&n.items.sort(i),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=o(String(e||"")))>(t=o(String(t||"")))?1:t>e?-1:0},r=function(e,t){var r,n,i,s;for(r=1,n=arguments.length;r<n;r++)if(s=arguments[r])for(i in s)s.hasOwnProperty(i)&&(e[i]=s[i]);return e},n=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},i=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||p&&p.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[a]",c:"[c]",d:"[d]",e:"[e]",i:"[i]",l:"[l]",n:"[n]",o:"[o]",r:"[r]",s:"[s]",t:"[t]",u:"[u]",y:"[y]",z:"[z]"},o=function(){var e,t,r,n,i="",s={};for(r in a)if(a.hasOwnProperty(r))for(i+=n=a[r].substring(2,a[r].length-1),e=0,t=n.length;e<t;e++)s[n.charAt(e)]=r;var o=new RegExp("["+i+"]","g");return function(e){return e.replace(o,(function(e){return s[e]})).toLowerCase()}}();return e},n=i.call((s={id:"sifter",exports:{},loaded:!1}).exports,r,s.exports,s),s.loaded=!0,void 0===n&&(n=s.exports),"function"==typeof(o=function(){var e={mixin:function(e){e.plugins={},e.prototype.initializePlugins=function(e){var r,n,i,s=this,a=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(r=0,n=e.length;r<n;r++)"string"==typeof e[r]?a.push(e[r]):(s.plugins.settings[e[r].name]=e[r].options,a.push(e[r].name));else if(e)for(i in e)e.hasOwnProperty(i)&&(s.plugins.settings[i]=e[i],a.push(i));for(;a.length;)s.require(a.shift())},e.prototype.loadPlugin=function(t){var r=this,n=r.plugins,i=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=i.fn.apply(r,[r.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,r=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(r.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return r.loaded[e]},e.define=function(t,r){e.plugins[t]={name:t,fn:r}}}},t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e})?(a=o.call((c={id:"microplugin",exports:{},loaded:!1}).exports,r,c.exports,c),c.loaded=!0,void 0===a&&(a=c.exports)):a=o,d=[r(37588),n,a],l=function(e,t,r){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var r="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var i=e.data.search(r);if(i>=0&&e.data.length>0){var s=e.data.match(r),a=document.createElement("span");a.className="highlight";var o=e.splitText(i),c=(o.splitText(s[0].length),o.cloneNode(!0));a.appendChild(c),o.parentNode.replaceChild(a,o),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=n(e.childNodes[l]);return t};return e.each((function(){n(this)}))}},i=function(){};i.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var r=arguments.length;return 0===r?delete this._events:1===r?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(e){for(var t=["on","off","trigger"],r=0;r<t.length;r++)e.prototype[t[r]]=i.prototype[t[r]]};var s=/Mac/.test(navigator.userAgent),a=s?91:17,o=s?18:17,c=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,l=function(e){return void 0!==e},d=function(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""},u=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p=function(e){return(e+"").replace(/\$/g,"$$$$")},m=function(e,t,r){var n,i=e.trigger,s={};for(n in e.trigger=function(){var r=arguments[0];if(-1===t.indexOf(r))return i.apply(e,arguments);s[r]=arguments},r.apply(e,[]),e.trigger=i,s)s.hasOwnProperty(n)&&i.apply(e,s[n])},h=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var r=document.selection.createRange(),n=document.selection.createRange().text.length;r.moveStart("character",-e.value.length),t.start=r.text.length-n,t.length=n}return t},y=function(t){var r=null,n=function(n,i){var s,a,o,c,l,d,u,p;i=i||{},(n=n||window.event||{}).metaKey||n.altKey||(i.force||!1!==t.data("grow"))&&(s=t.val(),n.type&&"keydown"===n.type.toLowerCase()&&(o=(a=n.keyCode)>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||32===a,46===a||8===a?(p=h(t[0])).length?s=s.substring(0,p.start)+s.substring(p.start+p.length):8===a&&p.start?s=s.substring(0,p.start-1)+s.substring(p.start+1):46===a&&void 0!==p.start&&(s=s.substring(0,p.start)+s.substring(p.start+1)):o&&(d=n.shiftKey,u=String.fromCharCode(n.keyCode),s+=u=d?u.toUpperCase():u.toLowerCase())),c=t.attr("placeholder"),!s&&c&&(s=c),(l=function(t,r){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");!function(e,t,r){var n,i,s={};if(r)for(n=0,i=r.length;n<i;n++)s[r[n]]=e.css(r[n]);else s=e.css();t.css(s)}(r,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var i=n.width();return n.remove(),i}(s,t)+4)!==r&&(r=l,t.width(l),t.triggerHandler("resize")))};t.on("keydown keyup update blur",n),n()},g=function(r,n){var i,s,a,o,c=this;(o=r[0]).selectize=c;var l,d,u,p=window.getComputedStyle&&window.getComputedStyle(o,null);if(a=(a=p?p.getPropertyValue("direction"):o.currentStyle&&o.currentStyle.direction)||r.parents("[dir]:first").attr("dir")||"",e.extend(c,{order:0,settings:n,$input:r,tabIndex:r.attr("tabindex")||"",tagType:"select"===o.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(a),eventNS:".selectize"+ ++g.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:r.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?c.onSearchChange:(l=c.onSearchChange,d=n.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(u),u=window.setTimeout((function(){l.apply(e,t)}),d)})}),c.sifter=new t(this.options,{diacritics:n.diacritics}),c.settings.options){for(i=0,s=c.settings.options.length;i<s;i++)c.registerOption(c.settings.options[i]);delete c.settings.options}if(c.settings.optgroups){for(i=0,s=c.settings.optgroups.length;i<s;i++)c.registerOptionGroup(c.settings.optgroups[i]);delete c.settings.optgroups}c.settings.mode=c.settings.mode||(1===c.settings.maxItems?"single":"multi"),"boolean"!=typeof c.settings.hideSelected&&(c.settings.hideSelected="multi"===c.settings.mode),c.initializePlugins(c.settings.plugins),c.setupCallbacks(),c.setupTemplates(),c.setup()};return i.mixin(g),r.mixin(g),e.extend(g.prototype,{setup:function(){var t,r,n,i,l,d,u,p,m,h,g,f,v,b=this,S=b.settings,P=b.eventNS,I=e(window),E=e(document),w=b.$input;if(u=b.settings.mode,p=w.attr("class")||"",t=e("<div>").addClass(S.wrapperClass).addClass(p).addClass(u),r=e("<div>").addClass(S.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(r).attr("tabindex",w.is(":disabled")?"-1":b.tabIndex),d=e(S.dropdownParent||t),i=e("<div>").addClass(S.dropdownClass).addClass(u).hide().appendTo(d),l=e("<div>").addClass(S.dropdownContentClass).appendTo(i),b.settings.copyClassesToDropdown&&i.addClass(p),t.css({width:w[0].style.width}),b.plugins.names.length&&(m="plugin-"+b.plugins.names.join(" plugin-"),t.addClass(m),i.addClass(m)),(null===S.maxItems||S.maxItems>1)&&1===b.tagType&&w.attr("multiple","multiple"),b.settings.placeholder&&n.attr("placeholder",S.placeholder),!b.settings.splitOn&&b.settings.delimiter){var C=b.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");b.settings.splitOn=new RegExp("\\s*"+C+"+\\s*")}w.attr("autocorrect")&&n.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&n.attr("autocapitalize",w.attr("autocapitalize")),b.$wrapper=t,b.$control=r,b.$control_input=n,b.$dropdown=i,b.$dropdown_content=l,i.on("mouseenter","[data-selectable]",(function(){return b.onOptionHover.apply(b,arguments)})),i.on("mousedown click","[data-selectable]",(function(){return b.onOptionSelect.apply(b,arguments)})),g="mousedown",f="*:not(input)",v=function(){return b.onItemSelect.apply(b,arguments)},(h=r).on(g,f,(function(e){for(var t=e.target;t&&t.parentNode!==h[0];)t=t.parentNode;return e.currentTarget=t,v.apply(this,[e])})),b.settings.manualInputWidth||y(n),r.on({mousedown:function(){return b.onMouseDown.apply(b,arguments)},click:function(){return b.onClick.apply(b,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return b.onKeyDown.apply(b,arguments)},keyup:function(){return b.onKeyUp.apply(b,arguments)},keypress:function(){return b.onKeyPress.apply(b,arguments)},resize:function(){b.positionDropdown.apply(b,[])},blur:function(){return b.onBlur.apply(b,arguments)},focus:function(){return b.ignoreBlur=!1,b.onFocus.apply(b,arguments)},paste:function(){return b.onPaste.apply(b,arguments)}}),w.parents().last().find('label[for="'+w.attr("id")+'"]').on("click",(function(){b.onClick.apply(b,arguments)})),E.on("keydown"+P,(function(e){b.isCmdDown=e[s?"metaKey":"ctrlKey"],b.isCtrlDown=e[s?"altKey":"ctrlKey"],b.isShiftDown=e.shiftKey})),E.on("keyup"+P,(function(e){e.keyCode===o&&(b.isCtrlDown=!1),16===e.keyCode&&(b.isShiftDown=!1),e.keyCode===a&&(b.isCmdDown=!1)})),E.on("mousedown"+P,(function(e){if(b.isFocused){if(e.target===b.$dropdown[0]||e.target.parentNode===b.$dropdown[0])return!1;b.$control.has(e.target).length||e.target===b.$control[0]||b.blur(e.target)}})),I.on(["scroll"+P,"resize"+P].join(" "),(function(){b.isOpen&&b.positionDropdown.apply(b,arguments)})),I.on("mousemove"+P,(function(){b.ignoreHover=!1})),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(b.$wrapper),e.isArray(S.items)&&(b.setValue(S.items),delete S.items),c&&w.on("invalid"+P,(function(e){e.preventDefault(),b.isInvalid=!0,b.refreshState()})),b.updateOriginalInput(),b.refreshItems(),b.refreshState(),b.updatePlaceholder(),b.isSetup=!0,w.is(":disabled")&&b.disable(),b.on("change",this.onChange),w.data("selectize",b),w.addClass("selectized"),b.trigger("initialize"),!0===S.preload&&b.onSearchChange("")},setupTemplates:function(){var t=this,r=t.settings.labelField,n=t.settings.optgroupLabelField,i={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[r])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[r])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},i,t.settings.render)},setupCallbacks:function(){var e,t,r={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in r)r.hasOwnProperty(e)&&(t=this.settings[r[e]])&&this.on(e,t)},onClick:function(e){this.isFocused||(this.focus(),e.preventDefault())},onMouseDown:function(t){var r=this,n=t.isDefaultPrevented();if(e(t.target),r.isFocused){if(t.target!==r.$control_input[0])return"single"===r.settings.mode&&t.target!==r.$control[0]?r.isOpen?r.close():r.open():n||r.setActiveItem(null),!1}else n||window.setTimeout((function(){r.focus()}),0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var r=this;r.isFull()||r.isInputHidden||r.isLocked?t.preventDefault():r.settings.splitOn&&setTimeout((function(){for(var t=e.trim(r.$control_input.val()||"").split(r.settings.splitOn),n=0,i=t.length;n<i;n++)r.createItem(t[n])}),0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){e.target,this.$control_input[0];var t=this;if(t.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var r=t.getAdjacentOption(t.$activeOption,1);r.length&&t.setActiveOption(r,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return void(t.settings.selectOnTab&&t.isOpen&&t.$activeOption?(t.onOptionSelect({currentTarget:t.$activeOption}),t.settings.allowCreateEmpty&&1===t.settings.maxItems||t.isFull()||e.preventDefault()):t.settings.create&&t.createItem()&&e.preventDefault());case 8:return void t.deleteSelection(e,!0);case 46:return void t.deleteSelection(e)}!t.isFull()&&!t.isInputHidden||(s?e.metaKey:e.ctrlKey)||e.preventDefault()}},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var r=t.$control_input.val()||"";t.lastValue!==r&&(t.lastValue=r,t.onSearchChange(r),t.refreshOptions(),t.trigger("type",r))},onSearchChange:function(e){var t=this,r=t.settings.load;r&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load((function(n){r.apply(t,[e,n])}))))},onFocus:function(e){var t=this,r=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),r||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var r=this;if(r.isFocused&&(r.isFocused=!1,!r.ignoreFocus))return r.ignoreBlur||document.activeElement!==r.$dropdown_content[0]?void setTimeout((function(){var e=function(){r.close(),r.setTextboxValue(""),r.setActiveItem(null),r.setActiveOption(null),r.setCaret(r.items.length),r.refreshState(),(t||document.body).focus(),r.ignoreFocus=!1,r.trigger("blur")};r.ignoreFocus=!0,r.settings.selectOnBlur&&r.$activeOption&&1===r.$activeOption.not(".create").length?(r.addItem(r.$activeOption.not(".create").data("value")),e()):r.settings.create&&r.settings.createOnBlur?r.createItem(null,!1,e):e()})):(r.ignoreBlur=!0,void r.onFocus(e))},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var r,n,i=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(n=e(t.currentTarget)).hasClass("create")?i.createItem(null,(function(){i.settings.closeAfterSelect&&i.close()})):void 0!==(r=n.attr("data-value"))&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(r),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&i.setActiveOption(i.getOption(r)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,r=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||r.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){m(this,t?[]:["change"],(function(){this.clear(t),this.addItems(e,t)}))},setActiveItem:function(t,r){var n,i,s,a,o,c,l,d,u=this;if("single"!==u.settings.mode){if(!(t=e(t)).length)return e(u.$activeItems).removeClass("active"),u.$activeItems=[],void(u.isFocused&&u.showInput());if("mousedown"===(n=r&&r.type.toLowerCase())&&u.isShiftDown&&u.$activeItems.length){for(d=u.$control.children(".active:last"),(a=Array.prototype.indexOf.apply(u.$control[0].childNodes,[d[0]]))>(o=Array.prototype.indexOf.apply(u.$control[0].childNodes,[t[0]]))&&(l=a,a=o,o=l),i=a;i<=o;i++)c=u.$control[0].childNodes[i],-1===u.$activeItems.indexOf(c)&&(e(c).addClass("active"),u.$activeItems.push(c));r.preventDefault()}else"mousedown"===n&&u.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(s=u.$activeItems.indexOf(t[0]),u.$activeItems.splice(s,1),t.removeClass("active")):u.$activeItems.push(t.addClass("active")[0]):(e(u.$activeItems).removeClass("active"),u.$activeItems=[t.addClass("active")[0]]);u.hideInput(),this.isFocused||u.focus()}},setActiveOption:function(t,r,n){var i,s,a,o,c,d=this;d.$activeOption&&d.$activeOption.removeClass("active"),d.$activeOption=null,(t=e(t)).length&&(d.$activeOption=t.addClass("active"),!r&&l(r)||(i=d.$dropdown_content.height(),s=d.$activeOption.outerHeight(!0),r=d.$dropdown_content.scrollTop()||0,o=a=d.$activeOption.offset().top-d.$dropdown_content.offset().top+r,c=a-i+s,a+s>i+r?d.$dropdown_content.stop().animate({scrollTop:c},n?d.settings.scrollDuration:0):a<r&&d.$dropdown_content.stop().animate({scrollTop:o},n?d.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0}),this.settings.manualInputWidth||this.$control_input.css({position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1}),this.settings.manualInputWidth||this.$control_input.css({position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout((function(){e.ignoreFocus=!1,e.onFocus()}),0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var r,n,i,s=this,a=s.settings,o=this.getSearchOptions();if(a.score&&"function"!=typeof(i=s.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==s.lastQuery?(s.lastQuery=t,n=s.sifter.search(t,e.extend(o,{score:i})),s.currentResults=n):n=e.extend(!0,{},s.currentResults),a.hideSelected)for(r=n.items.length-1;r>=0;r--)-1!==s.items.indexOf(d(n.items[r].id))&&n.items.splice(r,1);return n},refreshOptions:function(t){var r,i,s,a,o,c,l,u,p,m,h,y,g,f,v,b;void 0===t&&(t=!0);var S=this,P=e.trim(S.$control_input.val()),I=S.search(P),E=S.$dropdown_content,w=S.$activeOption&&d(S.$activeOption.attr("data-value"));for(a=I.items.length,"number"==typeof S.settings.maxOptions&&(a=Math.min(a,S.settings.maxOptions)),o={},c=[],r=0;r<a;r++)for(l=S.options[I.items[r].id],u=S.render("option",l),p=l[S.settings.optgroupField]||"",i=0,s=(m=e.isArray(p)?p:[p])&&m.length;i<s;i++)p=m[i],S.optgroups.hasOwnProperty(p)||(p=""),o.hasOwnProperty(p)||(o[p]=[],c.push(p)),o[p].push(u);for(this.settings.lockOptgroupOrder&&c.sort((function(e,t){return(S.optgroups[e].$order||0)-(S.optgroups[t].$order||0)})),h=[],r=0,a=c.length;r<a;r++)p=c[r],S.optgroups.hasOwnProperty(p)&&o[p].length?(y=S.render("optgroup_header",S.optgroups[p])||"",y+=o[p].join(""),h.push(S.render("optgroup",e.extend({},S.optgroups[p],{html:y})))):h.push(o[p].join(""));if(E.html(h.join("")),S.settings.highlight&&I.query.length&&I.tokens.length)for(r=0,a=I.tokens.length;r<a;r++)n(E,I.tokens[r].regex);if(!S.settings.hideSelected)for(r=0,a=S.items.length;r<a;r++)S.getOption(S.items[r]).addClass("selected");(g=S.canCreate(P))&&(E.prepend(S.render("option_create",{input:P})),b=e(E[0].childNodes[0])),S.hasOptions=I.items.length>0||g,S.hasOptions?(I.items.length>0?((v=w&&S.getOption(w))&&v.length?f=v:"single"===S.settings.mode&&S.items.length&&(f=S.getOption(S.items[0])),f&&f.length||(f=b&&!S.settings.addPrecedence?S.getAdjacentOption(b,1):E.find("[data-selectable]:first"))):f=b,S.setActiveOption(f),t&&!S.isOpen&&S.open()):(S.setActiveOption(null),t&&S.isOpen&&S.close())},addOption:function(t){var r,n,i,s=this;if(e.isArray(t))for(r=0,n=t.length;r<n;r++)s.addOption(t[r]);else(i=s.registerOption(t))&&(s.userOptions[i]=!0,s.lastQuery=null,s.trigger("option_add",i,t))},registerOption:function(e){var t=d(e[this.settings.valueField]);return!(!t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=d(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,r){var n,i,s,a,o,c,l,u=this;if(t=d(t),s=d(r[u.settings.valueField]),null!==t&&u.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");l=u.options[t].$order,s!==t&&(delete u.options[t],-1!==(a=u.items.indexOf(t))&&u.items.splice(a,1,s)),r.$order=r.$order||l,u.options[s]=r,o=u.renderCache.item,c=u.renderCache.option,o&&(delete o[t],delete o[s]),c&&(delete c[t],delete c[s]),-1!==u.items.indexOf(s)&&(n=u.getItem(t),i=e(u.render("item",r)),n.hasClass("active")&&i.addClass("active"),n.replaceWith(i)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(e,t){var r=this;e=d(e);var n=r.renderCache.item,i=r.renderCache.option;n&&delete n[e],i&&delete i[e],delete r.userOptions[e],delete r.options[e],r.lastQuery=null,r.trigger("option_remove",e),r.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,r){var n=this.$dropdown.find("[data-selectable]"),i=n.index(t)+r;return i>=0&&i<n.length?n.eq(i):e()},getElementWithValue:function(t,r){if(null!=(t=d(t)))for(var n=0,i=r.length;n<i;n++)if(r[n].getAttribute("data-value")===t)return e(r[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,r){for(var n=e.isArray(t)?t:[t],i=0,s=n.length;i<s;i++)this.isPending=i<s-1,this.addItem(n[i],r)},addItem:function(t,r){m(this,r?[]:["change"],(function(){var n,i,s,a,o,c=this,l=c.settings.mode;t=d(t),-1===c.items.indexOf(t)?c.options.hasOwnProperty(t)&&("single"===l&&c.clear(r),"multi"===l&&c.isFull()||(n=e(c.render("item",c.options[t])),o=c.isFull(),c.items.splice(c.caretPos,0,t),c.insertAtCaret(n),(!c.isPending||!o&&c.isFull())&&c.refreshState(),c.isSetup&&(s=c.$dropdown_content.find("[data-selectable]"),c.isPending||(i=c.getOption(t),a=c.getAdjacentOption(i,1).attr("data-value"),c.refreshOptions(c.isFocused&&"single"!==l),a&&c.setActiveOption(c.getOption(a))),!s.length||c.isFull()?c.close():c.positionDropdown(),c.updatePlaceholder(),c.trigger("item_add",t,n),c.updateOriginalInput({silent:r})))):"single"===l&&c.close()}))},removeItem:function(e,t){var r,n,i,s=this;r="object"==typeof e?e:s.getItem(e),e=d(r.attr("data-value")),-1!==(n=s.items.indexOf(e))&&(r.remove(),r.hasClass("active")&&(i=s.$activeItems.indexOf(r[0]),s.$activeItems.splice(i,1)),s.items.splice(n,1),s.lastQuery=null,!s.settings.persist&&s.userOptions.hasOwnProperty(e)&&s.removeOption(e,t),n<s.caretPos&&s.setCaret(s.caretPos-1),s.refreshState(),s.updatePlaceholder(),s.updateOriginalInput({silent:t}),s.positionDropdown(),s.trigger("item_remove",e,r))},createItem:function(t,r){var n=this,i=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var s=arguments[arguments.length-1];if("function"!=typeof s&&(s=function(){}),"boolean"!=typeof r&&(r=!0),!n.canCreate(t))return s(),!1;n.lock();var a,o,c="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},l=(a=function(e){if(n.unlock(),!e||"object"!=typeof e)return s();var t=d(e[n.settings.valueField]);if("string"!=typeof t)return s();n.setTextboxValue(""),n.addOption(e),n.setCaret(i),n.addItem(t),n.refreshOptions(r&&"single"!==n.settings.mode),s(e)},o=!1,function(){o||(o=!0,a.apply(this,arguments))}),u=c.apply(this,[t,l]);return void 0!==u&&l(u),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",undefined)),e.refreshClasses()},refreshClasses:function(){var t=this,r=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",r).toggleClass("not-full",!r).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!r&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,r,n,i,s=this;if(e=e||{},1===s.tagType){for(n=[],t=0,r=s.items.length;t<r;t++)i=s.options[s.items[t]][s.settings.labelField]||"",n.push('<option value="'+u(s.items[t])+'" selected="selected">'+u(i)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),s.$input.html(n.join(""))}else s.$input.val(s.getValue()),s.$input.attr("value",s.$input.val());s.isSetup&&(e.silent||s.trigger("change",s.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||e.settings.hideDropdown||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var r=Math.min(this.caretPos,this.items.length);0===r?this.$control.prepend(t):e(this.$control[0].childNodes[r]).before(t),this.setCaret(r+1)},deleteSelection:function(t,r){var n,i,s,a,o,c,l,d,u,p=this;if(s=r||void 0===r&&t&&8===t.keyCode?-1:1,a=h(p.$control_input[0]),p.$activeOption&&!p.settings.hideSelected&&(l=p.getAdjacentOption(p.$activeOption,-1).attr("data-value")),o=[],p.$activeItems.length){for(u=p.$control.children(".active:"+(s>0?"last":"first")),c=p.$control.children(":not(input)").index(u),s>0&&c++,n=0,i=p.$activeItems.length;n<i;n++)o.push(e(p.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(p.isFocused||"single"===p.settings.mode)&&p.items.length&&(s<0&&0===a.start&&0===a.length?o.push(p.items[p.caretPos-1]):s>0&&a.start===p.$control_input.val().length&&o.push(p.items[p.caretPos]));if(!o.length||"function"==typeof p.settings.onDelete&&!1===p.settings.onDelete.apply(p,[o]))return!1;for(void 0!==c&&p.setCaret(c);o.length;)p.removeItem(o.pop());return p.showInput(),p.positionDropdown(),p.refreshOptions(!0),l&&(d=p.getOption(l)).length&&p.setActiveOption(d),!0},advanceSelection:function(e,t){var r,n,i,s,a,o=this;0!==e&&(o.rtl&&(e*=-1),r=e>0?"last":"first",n=h(o.$control_input[0]),o.isFocused&&!o.isInputHidden?(s=o.$control_input.val().length,(e<0?0===n.start&&0===n.length:n.start===s)&&!s&&o.advanceCaret(e,t)):(a=o.$control.children(".active:"+r)).length&&(i=o.$control.children(":not(input)").index(a),o.setActiveItem(null),o.setCaret(e>0?i+1:i)))},advanceCaret:function(e,t){var r,n,i=this;0!==e&&(r=e>0?"next":"prev",i.isShiftDown?(n=i.$control_input[r]()).length&&(i.hideInput(),i.setActiveItem(n),t&&t.preventDefault()):i.setCaret(i.caretPos+e))},setCaret:function(t){var r,n,i,s,a=this;if(t="single"===a.settings.mode?a.items.length:Math.max(0,Math.min(a.items.length,t)),!a.isPending)for(r=0,n=(i=a.$control.children(":not(input)")).length;r<n;r++)s=e(i[r]).detach(),r<t?a.$control_input.before(s):a.$control.append(s);a.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,r=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(r),e(document).off(r),e(document.body).off(r),delete t.$input[0].selectize},render:function(e,t){var r,n,i="",s=!1,a=this,o=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return"option"!==e&&"item"!==e||(s=!!(r=d(t[a.settings.valueField]))),s&&(l(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(r))?a.renderCache[e][r]:(i=a.settings.render[e].apply(this,[t,u]),"option"!==e&&"option_create"!==e||(i=i.replace(o,"<$1 data-selectable")),"optgroup"===e&&(n=t[a.settings.optgroupValueField]||"",i=i.replace(o,'<$1 data-group="'+p(u(n))+'"')),"option"!==e&&"item"!==e||(i=i.replace(o,'<$1 data-value="'+p(u(r||""))+'"')),s&&(a.renderCache[e][r]=i),i)},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var r=t.settings.createFilter;return(e.length||t.settings.allowCreateEmpty)&&("function"!=typeof r||r.apply(t,[e]))&&("string"!=typeof r||new RegExp(r).test(e))&&(!(r instanceof RegExp)||r.test(e))}}),g.count=0,g.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,selectOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,allowCreateEmpty:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",manualInputWidth:!1,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var r=e.fn.selectize.defaults,n=e.extend({},r,t),i=n.dataAttr,s=n.labelField,a=n.valueField,o=n.optgroupField,c=n.optgroupLabelField,l=n.optgroupValueField;return this.each((function(){if(!this.selectize){var u=e(this),p=this.tagName.toLowerCase(),m=u.attr("placeholder")||u.attr("data-placeholder");m||n.allowEmptyOption||(m=u.children('option[value=""]').text());var h={placeholder:m,options:[],optgroups:[],items:[]};"select"===p?function(t,r){var u,p,m,h,y=r.options,g={},f=function(e){var t=i&&e.attr(i);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,i){t=e(t);var c=d(t.attr("value"));if(c||n.allowEmptyOption)if(g.hasOwnProperty(c)){if(i){var l=g[c][o];l?e.isArray(l)?l.push(i):g[c][o]=[l,i]:g[c][o]=i}}else{var u=f(t)||{};u[s]=u[s]||t.text(),u[a]=u[a]||c,u[o]=u[o]||i,g[c]=u,y.push(u),t.is(":selected")&&r.items.push(c)}},b=function(t){var n,i,s,a,o;for((s=(t=e(t)).attr("label"))&&((a=f(t)||{})[c]=s,a[l]=s,r.optgroups.push(a)),n=0,i=(o=e("option",t)).length;n<i;n++)v(o[n],s)};for(r.maxItems=t.attr("multiple")?null:1,u=0,p=(h=t.children()).length;u<p;u++)"optgroup"===(m=h[u].tagName.toLowerCase())?b(h[u]):"option"===m&&v(h[u])}(u,h):function(t,r){var o,c,l,d,u=t.attr(i);if(u)for(r.options=JSON.parse(u),o=0,c=r.options.length;o<c;o++)r.items.push(r.options[o][a]);else{var p=e.trim(t.val()||"");if(!n.allowEmptyOption&&!p.length)return;for(o=0,c=(l=p.split(n.delimiter)).length;o<c;o++)(d={})[s]=l[o],d[a]=l[o],r.options.push(d);r.items=l}}(u,h),new g(u,e.extend(!0,{},r,h,t))}}))},e.fn.selectize.defaults=g.defaults,e.fn.selectize.support={validity:c},g.define("remove_button",(function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var r,n=this,i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+u(t.title)+'">'+t.label+"</a>";this.setup=(r=n.setup,function(){if(t.append){var s=n.settings.render.item;n.settings.render.item=function(e){return t=s.apply(this,arguments),r=i,n=t.search(/(<\/[^>]+>\s*)$/),t.substring(0,n)+r+t.substring(n);var t,r,n}}r.apply(this,arguments),this.$control.on("click","."+t.className,(function(t){if(t.preventDefault(),!n.isLocked){var r=e(t.currentTarget).parent();n.setActiveItem(r),n.deleteSelection()&&n.setCaret(n.items.length)}}))})}})),g.define("restore_on_backspace",(function(e){var t;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(t=this.onKeyDown,function(r){var n,i;return 8===r.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(i=this.options[this.items[n]],this.deleteSelection(r,!0)&&(this.setTextboxValue(e.text.apply(this,[i])),this.refreshOptions(!0)),void r.preventDefault()):t.apply(this,arguments)})})),g.define("restore_on_focus",(function(e){e.text=e.text||function(e){return e[this.settings.labelField]};var t=this.onFocus;this.onFocus=function(r){var n=this.caretPos-1;if(n>=0&&n<this.items.length){var i=this.options[this.items[n]],s=e.text.call(this,i);this.removeItem(i[this.settings.valueField]),this.setTextboxValue(s),this.refreshOptions(!0)}return t.apply(this,arguments)}})),g},void 0===(u=l.apply(t,d))||(e.exports=u)},23247:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(91600),c=r(43352);const l=o.c.extend({mixins:c.c,initialize(e={}){e.interface&&(this.interface=e.interface),e.props&&(this.props=e.props),a().each(this.interface,(e=>{this[e]=a().bind(this._proxy,this,e)}))},_proxy(e,...t){return this.getInstance()[e](...t)},register(e,t={}){this.hasInstance()&&!t.ignorePrevious&&(this._previousInstance=this.getInstance()),this._instance=e,t.silent||this.trigger("change:instance",e)},registerOnce(e){if(!this.hasInstance()){const t=e();this.register(t.instance||t,t.options||void 0)}},restorePrevious(){this._previousInstance&&this.register(this._previousInstance)},registered(){const e=i().Deferred();return this.hasInstance()?e.resolve(this.getInstance()):this.listenToOnce(this,"change:instance",e.resolve),e.promise()},getInstance(){if(this.hasInstance())return this._instance;throw new Error("Nothing has been registered to this adapter.")},hasInstance(){return null!=this._instance},prop(e){if(a().contains(this.props,e))return this.getInstance()[e];throw new Error("The "+e+" property has not been defined for this adapter")}})},52180:(e,t,r)=>{"use strict";r.d(t,{AN:()=>d,G0:()=>c,WI:()=>u,Y2:()=>l});var n=r(37588),i=r.n(n);r(95720),r(79268);const s={},a={};function o(e,t,r){s[e]=function(e,t){if(!t)return e;const r={};return t.forEach((t=>{r[t]=(...r)=>e[t](...r)})),r}(t,r);const n=a[e];n&&(delete a[e],n.resolve(s[e]))}function c(e){for(const t in e){const r=e[t];let n,i;Array.isArray(r)?(n=r[0],i=r[1]):n=r,o(t,n,i)}}function l(e){return d(e)?i().Deferred().resolve(s[e]).promise():(a[e]||(a[e]=i().Deferred()),a[e].promise())}function d(e){return s.hasOwnProperty(e)}function u(e){return s[e]}},76220:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=new(r(23247).c)({props:["X-Plex-Client-Identifier","X-Plex-Device","X-Plex-Device-Name","X-Plex-Device-Screen-Resolution","X-Plex-Device-Vendor","X-Plex-Model","X-Plex-Platform","X-Plex-Platform-Version","X-Plex-Product","X-Plex-Version"]})},37952:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=new(r(23247).c)({interface:["getLanguages","load","t","tEscape"]})},64964:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=new(r(23247).c)({props:["capabilities","video","music","photo"]})},46235:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=new(r(23247).c)({interface:["get","set","remove","clear"]})},43876:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(79268),a=r(38828);const o={_map:{},register(e,t){(0,s.c)(i().isFunction(t),`The "${e}" command must be a function`),this._map[e]=t},registerAll(e){i().each(e,((e,t)=>{"__esModule"!==t&&this.register(t,e)}))},hasRegistered(e){return this._map.hasOwnProperty(e)},reset(){this._map={}},execute(e,...t){const r=this._map[e];if((0,s.c)(r,`The "${e}" command has not been registered`),r)return(0,a.c)("[Commands] Executing",e),r(...t)}}},22316:(e,t,r)=>{"use strict";r.d(t,{oJ:()=>g,cp:()=>b});var n=r(95720),i=r.n(n),s=r(83668),a=r.n(s);const o={bindToModel:function(){this.bindings&&i().each(i().keys(this.bindings),(function(e){const t=this.bindings[e];let r;if(r=t.model?this[t.model]:this[this.bindingsModel]||this.model,!r)return;const n=t.modelListeners||[t.modelAttribute];i().each(n,(function(n){const s={obj:r,name:"change:"+n,callback:i().bind(this.renderBinding,this,e,t,r)};this._bindingListeners||(this._bindingListeners=[]),this._bindingListeners.push(s),this.listenTo(s.obj,s.name,s.callback)}),this),this.renderBinding(e,t,r)}),this)},unbindFromModel:function(){this.bindings&&(i().each(this._bindingListeners,(function(e){this.stopListening(e.obj,e.name,e.callback)}),this),this._bindingListeners=null)},renderBinding:function(e,t,r){const n=this.$(e),s=t.formatter,a=!!t.isHtml,o=t.autohide,c=t.hiddenClass||"hidden";let l=r.get(t.modelAttribute);if(s&&(l=s.call(this,l,n)),o){const e=i().isFunction(o)?o.call(this,l):l;n.toggleClass(c,!e)}t.manual||(!a&&i().isString(l)&&(l=i().escape(l)),n.html(l))}};var c=r(91600),l=(r(56976),r(96504)),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){const t={},r=i().result(e,"responseType");return r&&r.accept&&(t.Accept=r.accept),t}const g=3e4,f=a().noConflict(),v=f.sync;f.sync=function(e,t,r){var n=r,{url:s,data:a,headers:o}=n,c=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(n,["url","data","headers"]);const d=function(e,t){return t.server?t.server:e.getXHROptions?e:e.provider?e.provider:e.server?e.server:e}(t,c),f=s||i().result(t,"syncUrl")||i().result(t,"url"),b=i().isObject(a)?l.c.stringifyParams(a):a,S=!!b&&b.indexOf("checkFiles=1")>-1;let P=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({data:b,dataType:"text",processData:!1,headers:i().extend(y(t),o),timeout:S?6e4:g},c);return i().isFunction(d.getXHROptions)?P=d.getXHROptions(f,P):P.url=f,v(e,t,P)},f.wrapError=function(e,t){const r=t.error;t.error=function(n){r&&r(e,n,t),e.trigger("error",e,n,t)}},i().extend(f.View.prototype,o),[f.Model,f.Collection,f.Router,f.View,f.History].forEach((e=>{e.extend=c.c.extend}));const b=f},44060:(e,t,r)=>{"use strict";r.d(t,{c:()=>E});var n=r(95720),i=r.n(n),s=r(22316),a=r(43752),o=r.n(a),c=r(37588),l=r.n(c);l().fn.isDisabled=function(){return this.hasClass("disabled")||this.hasClass("active")||this.hasClass("hidden")},l().fn.selectText=function(){const e=this[0];let t;if(document.body.createTextRange)t=document.body.createTextRange(),t.moveToElementText(e),t.select();else if(window.getSelection){const r=window.getSelection();t=document.createRange(),t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t)}},l().fn.triggerReflow=function(){const e=this[0];return e&&e.offsetHeight,this};var d=r(79268),u=r(38828);o().isNodeAttached=function(e){return s.cp.$.contains(document.documentElement,e)};const p=i().clone(o().View.prototype),m=i().clone(o().CollectionView.prototype),h=i().clone(o().Region.prototype),y=i().clone(o().Region),g=i().clone(o().Layout.prototype),f={constructor:function(){this.wrapAfterRender(),p.constructor.apply(this,arguments),this.listenViewEvents()},listenViewEvents:function(){this.stopListeningViewEvents();const e=i().result(this,"viewEvents");e&&(this._viewEventsListeners=i().mapObject(e,(e=>i().isString(e)?this[e]:e)),this.listenTo(this,this._viewEventsListeners))},stopListeningViewEvents:function(){this._viewEventsListeners&&(this.stopListening(this,this._viewEventsListeners),delete this._viewEventsListeners)},_setElement:function(){p._setElement.apply(this,arguments),this.el&&(this.el._viewInstance?this.el._viewInstance!==this&&u.c.warn('Multiple views registered for a single element with class="%s"',this.el.className):this.el._viewInstance=this)},_removeElement:function(){this.el&&delete this.el._viewInstance,p._removeElement.apply(this,arguments)},bindAllWhenRendered:function(){(0,d.c)(arguments.length>0,"`bindAllWhenRendered` requires at least one function");const e=Array.isArray(arguments[0])?arguments[0]:arguments;i().each(e,(function(e){try{this[e]=this.whenRendered(this[e])}catch(t){(0,d.c)(!1,"`bindAllWhenRendered` is unable to wrap "+JSON.stringify(e))}}),this)},whenRendered:function(e){return(0,d.c)(i().isFunction(e),"`whenRendered` must be called with a single function"),i().bind((function(){if(this.isClosed)return;const t=i().toArray(arguments),r=i().bind((function(){this.isRendered&&!this.isClosed&&e.apply(this,t)}),this);this.isRendered?i().defer(r):this.listenToOnce(this,"render",(function(){i().defer(r)}))}),this)},wrapAfterRender:function(){void 0!==this.onlyAfterRender&&((0,d.c)(Array.isArray(this.onlyAfterRender),"`onlyAfterRender` must be an array"),this.bindAllWhenRendered.apply(this,this.onlyAfterRender))},bindUIElements:function(){p.bindUIElements.apply(this,arguments),this.bindToModel(),this.isRendered=!0},unbindUIElements:function(){p.unbindUIElements.apply(this,arguments),this.unbindFromModel()},_getImmediateChildren:function(){return[]},_getNestedViews:function(){const e=this._getImmediateChildren();return e.length?i().reduce(e,(function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e}),e):e}},v={constructor:function(){m.constructor.apply(this,arguments)},triggerRendered:function(){return this.isRendered=!0,m.triggerRendered.apply(this,arguments)},rebase:function(e){return this.stopListening(this.collection),this.collection=e,this._initialEvents(),i().isFunction(this._renderChildren)?this._renderChildren():this.render(),this},buildItemView:function(){const e=m.buildItemView.apply(this,arguments);return e._parentView=this,e},_getImmediateChildren:function(){return i().values(this.children._views)}},b={constructor:function(){m.constructor.apply(this,arguments)}},S={append:function(e,t,r){const n=e.isClosed||i().isUndefined(e.$el),s=e!==this.currentView;return s&&this.close(),e.render(),(s||n)&&(t||(t=this.getEl(this.el)),r?t.prepend(e.el):t.append(e.el)),this.attachView(e),o().triggerMethod.call(this,"show",e),o().triggerMethod.call(e,"show"),this._updateParentView(e),this._triggerAttached(e,t),this},prepend:function(e,t){return this.append(e,t,!0)},show:function(e){h.show.apply(this,arguments),this._updateParentView(e),this._triggerAttached(e,this.$el)},_triggerAttached:function(e,t){if(!o().isNodeAttached(t.get(0)))return;const r=i().union([e],i().result(e,"_getNestedViews")||[]);i().each(r,(function(e){e.triggerMethod&&e.triggerMethod("attached",this)}),this)},_updateParentView:function(e){e&&(e._parentView=this._parentView)}},P={buildRegion:function(e,t){const r=y.buildRegion.apply(this,arguments);return r._parentView=e._parentView,r}},I={_buildRegions:function(e){const t=i().mapObject(e,(e=>i().isString(e)?{_parentView:this,selector:e}:i().defaults(e,{_parentView:this})));return g._buildRegions.call(this,t)},_getImmediateChildren:function(){return i().chain(this.regionManager._regions).values().pluck("currentView").compact().value()}};i().extend(o().View.prototype,f),i().extend(o().ItemView.prototype,f),i().extend(o().CollectionView.prototype,f,v),i().extend(o().CompositeView.prototype,f,b),i().extend(o().Region.prototype,S),i().extend(o().Region,P),i().extend(o().Layout.prototype,I),o().extend=s.cp.Model.extend,o().Controller.extend=o().extend,o().Region.extend=o().extend,o().Application.extend=o().extend,o().Module.extend=o().extend,o().View.extend=o().extend,o().ItemView.extend=o().extend,o().CollectionView.extend=o().extend,o().CompositeView.extend=o().extend,o().Layout.extend=o().extend;const E=o()},78295:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(37588),i=r.n(n),s=r(22316),a=r(5620);const o={isPopulating(){return!!this.populatePromise&&"pending"===this.populatePromise.state()},isPopulated(){return!!this.populatePromise&&"resolved"===this.populatePromise.state()},populate(){return this.populatePromise?this.populatePromise:this.fetch.apply(this,arguments)},fetch(){const e=i().Deferred();let t;if(this.isPopulating())return this.populatePromise;t=this._fetch?this._fetch.apply(this,arguments):this instanceof s.cp.Collection?s.cp.Collection.prototype.fetch.apply(this,arguments):s.cp.Model.prototype.fetch.apply(this,arguments);const r=e.promise();return r.rid=t.rid,this.populatePromise=r,this.failedPopulatePromise=null,t.done((r=>{this.populatePromise=i().Deferred().resolveWith(this,[this]).promise(),e.resolveWith(this,[this,r,t])})),t.fail((t=>{this.populatePromise=null,this.failedPopulatePromise=r,e.rejectWith(this,[this,t])})),r},abortPendingPopulate(){return this.isPopulating()&&a.c.abort(this.populatePromise.rid),this.populatePromise},resetPopulatePromise(e){return this.isPopulating()||(this.populatePromise=e,this.failedPopulatePromise=null),this.populatePromise}}},71684:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(22316),c=r(78295),l=r(99112),d=r(76400),u=(r(79268),r(24952),r(89448)),p=r(96504);const m=o.cp.Collection.extend({mixins:[c.c],responseType:d.sH,instanceOptions:["url","path","pageStart","pageSize","persistInCache","skipCache"],_context:["parent"],cache:null,cacheKey:function(){return a().result(this,"url")},constructor:function(e,t){t||(t={}),a().each(this.getContext(),(function(e){const r=t[e];void 0!==r&&this.setContext(e,r)}),this);const r=a().result(this,"instanceOptions");if(a().each(r,(function(e){a().has(t,e)&&(this[e]=t[e])}),this),null==this.pageStart&&null==this.pageSize||(this.pageStart||(this.pageStart=0),this.pageSize||(this.pageSize=0)),t.populated&&this.resetPopulatePromise(i().Deferred().resolve().promise()),!this.cache||this.skipCache)return o.cp.Collection.prototype.constructor.apply(this,arguments),void this._initState();this.initialize.apply(this,arguments);const n=this.cache.getItemCacheKey(this),s=this.cache.get(n);return this.uninitialize(),s||(t.onlyIfCached?{}:(o.cp.Collection.prototype.constructor.apply(this,arguments),this._initState(),void this.cache.store(this,n)))},uninitialize:function(){this.stopListening()},_initState:function(){l.c.shouldCreateStateTree&&(this.state=this.toState(),this.updateState=this.updateState.bind(this),this.on("reset update sort",this.onCollectionChange,this),this.on("statechange",this.onStateChange,this))},hasContext:function(e){return this.getContext().includes(e)},getContext:function(){if(!this.context)return this._context;const e=a().result(this,"context");return this._context.concat(e)},setContext:function(e,t){-1!==this.getContext().indexOf(e)&&this[e]!==t&&(this[e]=t,this.each((function(r){r.setContext(e,t)})))},getState:function(){return this.state},updateState:function(){const e=this.state,t=this.getState();this.state=this.toState();const r=this.getState();return this.trigger("statechange",this,r,t),{name:this.name,previousState:e,nextState:r}},toState:function(){return this.name,this.reduce(this.reduceState,[])},reduceState:function(e,t){const r=t.getState();return r&&e.push(r),e},shouldUpdateModelState:function(e,t,r){return t!==r},sync:function(){return this.cache&&this.cache.store(this),o.cp.sync.apply(this,arguments)},syncUrl:function(){let e="";if(this.url&&(e=a().result(this,"url")),this.path&&(e=p.c.join([e,a().result(this,"path")])),null!=this.pageStart||null!=this.pageSize){const t={"X-Plex-Container-Start":this.pageStart||0,"X-Plex-Container-Size":this.pageSize||0};e=p.c.join(e,t)}return e},parse:function(e,t){return this.name,this.convert(e)},convert:function(e){let t=e;const r=a().result(this,"responseType");if(a().isString(t)&&(a().isFunction(this.augmentResponseText)&&(t=this.augmentResponseText(t,r)),t=r.parse(t),r===d.qS&&t.MediaContainer&&(t=t.MediaContainer)),a().isFunction(this.augmentResponse)&&(t=this.augmentResponse(t,r)),Array.isArray(t))return t;const n=this.model.prototype.rootPropertyName;if(!n)return t;let i=t[n];return i?(Array.isArray(i)||(i=[i]),i):[]},clone:function(e){e||(e=this.models);const t=a().result(this,"instanceOptions"),r=a().extend(a().pick(this,t),a().pick(this,this.getContext()),{skipCache:!0,persistInCache:!1});return new this.constructor(e,r)||null},cloneDeep:function(e){e||(e=this.models);const t=a().map(e,(function(e){return e.clone()}));return this.clone(t)},clear:function(e){e=a().extend({silent:!0},e),this.abortPendingPopulate(),this.resetPopulatePromise(null),this.reset([],e)},getSaveParams:function(){return this.map((function(e){return e.getSaveParams()}))},onCollectionChange:function(){u.yO(this.updateState,this)},onStateChange:function(e,t,r){e!==this&&this.shouldUpdateModelState(e,t,r)&&u.yO(this.updateState,this)}})},11364:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(22316),l=r(78295),d=r(16872),u=r(99112),p=r(76400),m=r(21248);const h=function(e,t){return e?a().reduce(t,((t,r,n)=>(a().isEqual(e[n],r)||(t[n]=r),t)),{}):t};var y=r(79268),g=r(38828),f=(r(24952),r(33040)),v=r(89448),b=r(96504);const S=/^change:([\w]+)$/,P=e=>Array.isArray(e)?e[0]:e,I=c.cp.Model.extend({mixins:[l.c],name:"AbstractModel",responseType:p.sH,hasInitialRelations:!1,_context:["parent","skipCache"],cache:null,cacheKey:function(e){return e[this.idAttribute]},constructor:function(e,t){let r;if(e||(e={}),t||(t={}),this.initialize!==c.cp.Model.prototype.initialize&&(r=this.initialize,this.initialize=function(){}),this.getContextNames().forEach((e=>{const r=this.findOption(t,e);void 0!==r&&(this[e]=r)})),!this.cache||this.findOption(t,"skipCache"))return c.cp.Model.prototype.constructor.apply(this,arguments),this._initModel(t),void(r&&(r.apply(this,arguments),this.initialize=r));const n=this.findOption(t,"onlyIfCached"),i=this.cache.getItemCacheKey(this,e);let s=this.cache.get(i);if(!s&&this.entityID&&(0,o.AN)("appModel")){const t=(0,o.WI)("appModel");if(t.has("entities")){const r=t.get("entities").get(this.entityType),n=this.entityID(e),i=r.get(n);i&&(s=i.get("model"))}}return s?(this.uninitialize(),n||(this.mergeStrategy&&(s.isMergingAttributes=!0),t.parse?e=s.parse(e):a().extend(e,s._getRelations(this.syncedRelations,e)),s.set(e),s.isMergingAttributes=!1),this.getContextNames().forEach((e=>{s.setContext(e,this[e]||s[e])})),t.collection&&(s.collection=t.collection),s.updateEntity(),s):n?{}:(c.cp.Model.prototype.constructor.apply(this,arguments),this._initModel(t),r&&(r.apply(this,arguments),this.initialize=r),void this.cache.store(this,i))},uninitialize:function(){this.stopListening()},_initModel:function(e){u.c.shouldCreateStateTree&&this.entityID&&(this.state=this.toState()),this._initRelations(e),this._initDerived(e),this._initState()},_initRelations:function(e){this._relationListeners={};const t=a().extend({},this.sessionRelations,this.syncedRelations);a().each(t,(function(e,t){this._initRelation(e,t);const r=a().bind(this._initRelation,this,e,t);this.on("change:"+t,r)}),this),this.hasInitialRelations=!0,this.set(this._getRelations(this.sessionRelations,this.attributes)),e.parse||this.set(this._getRelations(this.syncedRelations,this.attributes))},_initRelation:function(e,t){const r=this._resolveRelationDefinition(e).relationClass,n=this.get(t),i=this.previous(t),s=n&&n instanceof r;i&&i instanceof r&&a().has(this._relationListeners,t)&&(i.off("all",this._relationListeners[t]),this._relationListeners[t]=null),s&&this._forwardRelationEvents(n,t)},_initDerived:function(){a().each(this.derivedAttrs,this._setDerived,this)},_initState:function(){u.c.shouldCreateStateTree&&(this.state=this.toState(),this.updateState=this.updateState.bind(this),this.updateEntity(),this.on("all",this.onEvent,this))},findOption:function(e,t){return e[t]||e.collection&&e.collection[t]},getContextNames:function(){return this.getContext().map(P)},getContext:function(){if(!this.context)return this._context;const e=a().result(this,"context");return this._context.concat(e)},setContext:function(e,t){if(!this.hasContext(e)||this[e]===t)return;const r=this.getContext().find((t=>P(t)===e)),n=Array.isArray(r)&&r[1]&&r[1].boundDerivedAttrs,i=n?[e,...n]:[e];let s;if(this[e]=t,i.forEach((e=>{this.hasDerived(e)&&(s=s||{},s[e]=this.derivedAttrs[e].call(this))})),s&&this.set(s),"parent"===e)return;const o=a().extend({},this.sessionRelations,this.syncedRelations);a().each(o,(function(r,n){const i=this.get(n);i&&i.setContext(e,t)}),this)},getScopedKey:function(e){return null!=e&&a().isFunction(this.cacheKey)?this.cacheKey(this.attributes)+"!"+e:e},getState:function(){return this._computedEntityID||this.state},updateState:function(){const e=this.state,t=this.getState();this.state=this.toState();const r=this.getState();return r!==t&&this.updateEntity(),this.trigger("statechange",this,r,t),{name:this.name,previousState:e,nextState:r}},updateEntity:function(){this._computedEntityID&&!this.skipCache&&((0,y.c)(this.entityType,this.name+" requires an `entityType`"),m.c.trigger("change:entity",{type:this.entityType,id:this._computedEntityID,model:this}))},toState:function(){this.name;const e=Object.keys(this.attributes),t=a().reduce(e,this.reduceState,{possibleEntityContainers:[]},this);return Object.defineProperty(t,"possibleEntityContainers",{enumerable:!1}),this.entityID&&(this._computedEntityID=this.entityID(t)),t},reduceState:function(e,t){const r=this.attributes[t];return r&&r.getState?(e.possibleEntityContainers.push(t),e[t]=r.getState(),e):(r&&r.initialize||(e[t]=r),e)},shouldUpdateRelationState:function(e,t,r){return t!==r},toJSON:function(e={}){this.name;const t=this.syncedAttrs,r=this.sessionRelations,n=this.syncedRelations,s=this.attributes,o={};for(const i in s){const c=e.excluded&&e.excluded.includes(i),l=r&&a().has(r,i),d=n&&a().has(n,i),u=e.syncedOnly&&(!t||!a().has(t,i));c||l||d||u||(o[i]=s[i])}let l=i().extend(!0,{},o);function d(t,r){const n=this.get(r),i=e.excluded&&e.excluded.includes(r);if(n&&!i){let t;t=e.excludeDefaults?n instanceof c.cp.Collection?n.map((function(t){return h(a().result(t,"defaults"),t.toJSON(e))})):h(a().result(n,"defaults"),n.toJSON(e)):n.toJSON(e),l[r]=t}}return e.excludeDefaults&&(l=h(a().result(this,"defaults"),l)),e.syncedOnly||a().each(r,d,this),a().each(n,d,this),l},clone:function(){const e=a().extend(a().pick(this,this.getContextNames()),{skipCache:!0});return new this.constructor(this.toJSON(),e)||null},copy:function(e){(0,y.c)(e instanceof this.constructor,"Only a model of the same type may be copied");const t=e.toJSON();return a().extend(t,this._getRelations(this.sessionRelations,t,{parse:!0}),this._getRelations(this.syncedRelations,t,{parse:!0})),this.set(t)},restoreDefaults:function(e){const t={};return a().each(this.attributes,(function(e,r){this.derivedAttrs&&a().has(this.derivedAttrs,r)||(t[r]=void 0)}),this),a().extend(t,this._getRelations(this.sessionRelations,{},{reset:!0}),this._getRelations(this.syncedRelations,{},{reset:!0}),a().result(this,"defaults"),e),this.set(t)},set:function(e,t,r){let n,i;return a().isObject(e)?(n=e,r=t):(n={})[e]=t,r||(r={}),!this.isMergingAttributes&&r.merge&&this.mergeStrategy&&(i=!0,this.isMergingAttributes=!0),this.isMergingAttributes&&(n=this._mergeAttributes(n)),c.cp.Model.prototype.set.call(this,n,r),i&&(this.isMergingAttributes=!1),this},hasAttr:function(e){const t=this.sessionAttrs&&a().has(this.sessionAttrs,e),r=this.syncedAttrs&&a().has(this.syncedAttrs,e);return!(!t&&!r)},hasRelation:function(e){const t=this.sessionRelations&&a().has(this.sessionRelations,e),r=this.syncedRelations&&a().has(this.syncedRelations,e);return!(!t&&!r)},hasDerived:function(e){return!(!this.derivedAttrs||!a().has(this.derivedAttrs,e))},hasContext:function(e){return this.getContextNames().includes(e)},validate:function(e,t){const r=a().extend({},this.sessionAttrs,this.syncedAttrs,this.sessionRelations,this.syncedRelations),n=this._validateTypes(e,r);return n&&(0,y.c)(!1,n),n},parse:function(e,t){return t&&t.save&&!this.hasResponseOnSave?this.attributes:(this.name,this.convert(e,t))},parseResponse(e){let t=e;const r=a().result(this,"responseType");let n;return a().isString(t)&&(n=!0,a().isFunction(this.augmentResponseText)&&(t=this.augmentResponseText(t,r)),t=r.parse(t)),t=null!=t?t:{},r===p.qS&&t.MediaContainer&&(t=t.MediaContainer),a().isFunction(this.augmentResponse)&&(t=this.augmentResponse(t,r)),n&&this.rootPropertyName&&a().has(t,this.rootPropertyName)&&(t=t[this.rootPropertyName]),Array.isArray(t)&&(t=t[0]),t},convert:function(e,t){const r=this.parseResponse(e),n={};let i;a().each(this.sessionAttrs,(function(e,t){a().has(r,t)&&(n[t]=r[t])})),a().each(this.syncedAttrs,(function(e,t){if(a().has(r,t)){let i,s=e;s.typeName||(s=e.type,i=a().omit(e,"type")),n[t]=null==r[t]?r[t]:s.parse(r[t],i)}else this.has(t)&&(i||(i=a().result(this,"defaults")),n[t]=i&&a().has(i,t)?i[t]:void 0)}),this);const s=a().extend({},t,{parse:!0});return a().extend(n,this._getRelations(this.syncedRelations,r,s)),n},save:function(e,t,r){let n;null==e||"object"==typeof e?(n=e,r=t):(n={})[e]=t;const s=a().extend({save:!0},r),o=a().extend(this.getSaveParams(n),s.data);if(a().isEmpty(o))return s.success&&s.success(this),i().Deferred().resolve(this);s.data=o;const l=s.success;return s.success=function(e,t,r){e.cache&&e.cache.store(e),l&&l(e,t,r)},c.cp.Model.prototype.save.call(this,n,s)},sync:function(e,t,r){const n=r?a().clone(r):{};if("create"===e||"update"===e){const e=n.data,t=n.url||a().result(this,"saveUrl")||a().result(this,"syncUrl")||a().result(this,"url");n.url=b.c.join(t,e),n.data=""}return c.cp.Model.prototype.sync.call(this,e,t,n)},getSaveParams:function(e){const t=this._getSaveAttrs(e);return a().reduce(t,(function(e,t,r){const n=t.definition;let i=t.value,s=r;if(!n)return e[s]=i,e;const o=n.relationClass;if(o){const e=o.prototype.model;let t;n.rootPropertyName?t=n.rootPropertyName:i&&i.rootPropertyName?t=i.rootPropertyName:e&&e.prototype&&(t=e.prototype.rootPropertyName),i&&(i=i.getSaveParams()),t&&(s=t)}else{let e,t;a().has(n,"type")?(e=n.type,t=a().omit(n,"type")):e=n,i=e.stringify(i,t)}return e[s]=i,e}),{},this)},startCapturingChangeEvents:function(){if(this.releaseCapturedChangeEvents)return void(0,y.c)(!1,this.name+" is already capturing events");const e=this.set,t=[],r=a().clone(this.attributes);this.set=function(r,n,i){const s=a().extend({},i,{silent:!0});let o;return"object"==typeof r?(o=r,i=n):(o={})[r]=n,a().each(o,(function(r,n){this.get(n)!==r&&(t.push({key:n,value:r}),e.call(this,n,r,s))}),this),a().each(this._derivedListeners,(function(r){const n=r.key,i=this.derivedAttrs[n].call(this);this.get(n)!==i&&(t.push({key:n,value:i}),e.call(this,n,i,s))}),this),this},this.releaseCapturedChangeEvents=function(){this.set=e,this.releaseCapturedChangeEvents=null,this.discardCapturedChangeEvents=null,this._previousAttributes=r,this._changing=!0,a().each(t,(function(e){this.trigger("change:"+e.key,this,e.value)}),this),this._changing=!1,a().isEmpty(t)||this.trigger("change",this,{})},this.discardCapturedChangeEvents=function(){this.set=e,this.releaseCapturedChangeEvents=null,this.discardCapturedChangeEvents=null,t.length=0}},spyOnGet:function(e){const t=[],r=this.get;return this.get=function(e){return t.push("change:"+e),this.hasRelation(e)&&t.push("change:"+e+".change"),r.apply(this,arguments)},e.call(this),this.get=r,t},dispatch:function(e){},_mergeAttributes:function(e){const t=this.mergeStrategy;return t?a().reduce(e,(function(e,r,n,i){return e[n]=t(n,this.get(n),r),e}),{},this):e},_resolveRelationDefinition:function(e){return a().isFunction(e)?e.call(this):e},_getRelations:function(e,t,r){t||(t={}),r||(r={});const n={};return a().each(e,(function(e,i){const s=this._resolveRelationDefinition(e),o=s.relationClass;(0,y.c)(o,this.name+" requires a `relationClass` for the "+i+" relation");let l=i;r.parse&&!a().has(t,i)&&a().has(s,"rootPropertyName")&&(l=s.rootPropertyName);let d=t[l];if(d instanceof o)return void(n[i]=d);if(!d&&s.deferred)return void(n[i]=void 0);let u=r.reset?null:this.get(i),p=u instanceof o;const m=o.prototype instanceof c.cp.Collection;if(m?d=f.c.parseArray(d):d||(d={}),p&&!m&&(r.parse&&(d=u.parse(d)),p=u.id===d[u.idAttribute||"id"]),p){u.isMergingAttributes=this.isMergingAttributes;let e=s.setOptions;a().isFunction(e)&&(e=e.call(this,r)),m?u.set(d,a().extend({parse:r.parse,remove:!this.isMergingAttributes},e)):u.set(d,a().extend({merge:!0},e)),u.isMergingAttributes=!1}else{const e={parse:r.parse};if(this.getContextNames().forEach((t=>{e[t]=this[t]})),!m){let e=s.attrs;a().isFunction(e)&&(e=e.call(this,t)),d=a().extend({},d,e)}let n=s.options;a().isFunction(n)&&(n=n.call(this,t)),a().extend(e,{parent:this},n),u=new o(d,e)}n[i]=u}),this),n},_forwardRelationEvents:function(e,t){const r=["sync","request","invalid","error","add","remove"];function n(){const n=arguments[0];if("change"===n)return;if("statechange"===n)return void(this.shouldUpdateRelationState.apply(this,a().rest(arguments,1))&&v.yO(this.updateState,this));const i=a().toArray(arguments);i[0]="change:"+t+"."+n,this.trigger.apply(this,i),a().contains(r,n)||(this.trigger("change:"+t+".change",this,e),this.trigger("change",this))}e.on("all",n,this),this._relationListeners[t]=n},_setDerived:function(e,t){let r;const n=this.spyOnGet((function(){const n=this.set;this.set=function(){(0,y.c)(!1,this.name+" blocked `set` in the "+t+" attribute. Derived attributes are read-only.")},r=e.call(this),this.set=n}));this.set(t,r),a().each(n,(function(r){this._addDerivedListener(t,r,e)}),this)},_addDerivedListener:function(e,t,r){this._derivedListeners||(this._derivedListeners=[]);const n={key:e,name:t,callback:a().bind(this._setDerived,this,r,e)};a().findWhere(this._derivedListeners,{key:e,name:n.name})||(this._derivedListeners.push(n),this.on(n.name,n.callback))},_getSaveAttrs:function(e){let t;if(e)t=a().reduce(e,(function(e,t,r){return e[r]={definition:this.syncedAttrs[r],value:t},e}),{},this);else{const e=a().extend({},this.syncedAttrs,this.syncedRelations);t=a().reduce(e,(function(e,t,r){const n=this._resolveRelationDefinition(t);let i=n.save;return a().isFunction(i)&&(i=i.call(this)),i&&(e[r]={definition:n,value:this.get(r)}),e}),{},this)}return t},_validateTypes:function(e,t){const r=Object.keys(e),n=a().reduce(r,(function(r,n){if(this.hasDerived(n))return r;if(!a().has(t,n))return r.push(this.name+" received an unknown attribute: "+n+". All attributes must be defined in `sessionAttrs`, `syncedAttrs`, `sessionRelations`, or `syncedRelations`."),r;const i=e[n],s=this._resolveRelationDefinition(t[n]),o=s.relationClass;let l;l=o?this.hasInitialRelations?d.c.instanceOf(o):o.prototype instanceof c.cp.Collection?d.c.oneOfType(d.c.array,d.c.object):d.c.object:s.type?s.type:s;const u=l.validate;return u?u(i)||r.push(n+" of type "+l.typeName+" has an invalid value: "+JSON.stringify(i)):r.push(n+" has an unknown type. Specify the type in the attribute definition or use attrTypes.any as a wildcard type."),r}),[],this);if(n.length>0)return n.join("\n")},onEvent:function(e,t,r){if(!t)return void g.c.warn("Unable to handle",e);const n=e.match(S);if(!n)return;const i=n[1];t.get(i)!==this.state[i]&&(r&&r.updateEntity&&r.updateEntity(),v.yO(this.updateState,this))}})},74844:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(22316),c=r(78295),l=r(13836),d=r(87228),u=r(96504);const p=o.cp.Collection.extend({mixins:[c.c],cache:new l.c,constructor:function(e,t){if(t||(t={}),this.server=t.server,this.section=t.section,this.channel=t.channel,this.device=t.device,this.parent=t.parent,this.allowInCache=t.allowInCache,this.persistInCache=t.persistInCache,this.skipCache=t.skipCache,t.url&&(this.url=t.url),t.path&&(this.path=t.path),null==t.pageStart&&null==t.pageSize||(this.pageStart=t.pageStart||0,this.pageSize=t.pageSize||0),t.populated&&this.resetPopulatePromise(i().Deferred().resolve().promise()),!t.allowInCache&&!t.persistInCache)return void o.cp.Collection.prototype.constructor.apply(this,arguments);this.initialize.apply(this,arguments);const r=this.cache.getItemCacheKey(this);let n=this.cache.get(r);if(this.uninitialize(),t.onlyIfCached&&(n||(n={})),n)return n;o.cp.Collection.prototype.constructor.apply(this,arguments),this.cache.store(this,r)},uninitialize:function(){this.stopListening()},sync:function(){return(this.allowInCache||this.persistInCache)&&this.cache.store(this),o.cp.sync.apply(this,arguments)},syncUrl:function(){let e="";if(this.url&&(e=a().result(this,"url")),this.path&&(e=u.c.join([e,a().result(this,"path")])),null!=this.pageStart||null!=this.pageSize){const t=this.pageStart||0,r=this.pageSize||0,n={};n["X-Plex-Container-Start"]=t,n["X-Plex-Container-Size"]=r,e=u.c.join(e,n)}return e},convert:function(e,t){const r=a().isObject(e)?e:d.c.parseXML(e);if(!t)return r;let n=r[t];return n?(Array.isArray(n)||(n=[n]),n):[]},clone:function(e){const t={server:this.server,section:this.section,parent:this.parent,url:this.url};return e||(e=this.models),new this.constructor(e,t)},cloneDeep:function(e){return e||(e=this.map((function(e){return e.clone()}))),this.clone(e)},clear:function(e){e=a().extend({silent:!0},e),this.abortPendingPopulate(),this.resetPopulatePromise(null),this.reset([],e)}});p.extend=function(){const e=o.cp.Collection.extend.apply(this,arguments);return e.prototype.cache=new l.c,e};const m=p},71832:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(22316),c=r(78295),l=r(19508),d=r(79268),u=r(87228),p=r(96504);const m=o.cp.Model.extend({mixins:[c.c],cache:new l.c,constructor:function(e,t){if(e||(e={}),t||(t={}),this.server=this.findOption(t,"server"),this.section=this.findOption(t,"section"),this.channel=this.findOption(t,"channel"),this.device=this.findOption(t,"device"),this.parent=this.findOption(t,"parent"),this.findOption(t,"skipCache"))return void o.cp.Model.prototype.constructor.apply(this,arguments);const r=this.cache.getItemCacheKey(this,e),n=this.cache.get(r);return n?(t.parse&&(e=n.parse(e)),this.preserveCachedAttributes&&this.preserveCachedAttributes(t.url)?a().each(e,(function(e,t){a().isUndefined(n.get(t))&&!a().isUndefined(e)&&n.set(t,e)})):n.set(e),n.server=this.server||n.server,n.section=this.section||n.section,n.channel=this.channel||n.channel,n.device=this.device||n.device,n.parent=this.parent||n.parent,t.collection&&(n.collection=t.collection),n):this.findOption(t,"onlyIfCached")?{}:(o.cp.Model.prototype.constructor.apply(this,arguments),void this.cache.store(this,r))},findOption:function(e,t){return e[t]||e.collection&&e.collection[t]},clone:function(){const e={server:this.server,section:this.section,channel:this.channel,parent:this.parent,skipCache:!0};return new this.constructor(this.attributes,e)||null},convert:function(e){return a().isObject(e)?e:u.c.parseXML(e)},parse:function(e,t){let r=this.convert(e);return this.whitelistedAttrs&&(r=a().pick(r,this.whitelistedAttrs)),r},save:function(e,t,r){let n,s;const c=this.attributes;null==e||"object"==typeof e?(n=e,r=t):(n={})[e]=t,r=a().extend({validate:!0},r);const l=this.getSaveParams(n,r);if(a().extend(l,r.data),n&&!r.wait){if(!this.set(n,r))return!1}else if(!this._validate(n,r))return!1;if(n&&r.wait&&(this.attributes=a().extend({},c,n)),a().isEmpty(l)&&!r.force)return r.success&&r.success(this),i().Deferred().resolve(this);void 0===r.parse&&(r.parse=!0);const d=this,u=r.success;r.success=function(e){if(d.attributes=c,e){let t=d.parse(e,r);if(r.wait&&(t=a().extend(n||{},t)),a().isObject(t)&&!d.set(t,r))return!1;d.cache.store(d)}u&&u(d,e,r),d.trigger("sync",d,e,r)},o.cp.wrapError(this,r),s=this.isNew()?"create":r.patch?"patch":"update","patch"===s&&(r.attrs=n);const m=a().result(this,"saveUrl")||a().result(this,"url");a().isEmpty(l)||(r.url=p.c.join(m,l)),r.data="";const h=this.sync(s,this,r);return n&&r.wait&&(this.attributes=c),h},getSaveParams:function(e,t){return this.isNew()?e||this.toJSON():this.changedAttributes(e)||{}},getScopedKey:function(e){return null!=e&&a().isFunction(this.cacheKey)?this.cacheKey(this.attributes)+"!"+e:e},restoreDefaults:function(e){const t=a().result(this,"defaults");if(!t)return this.clear(e);const r=this.attributes;let n;for(n in r)n in t||this.unset(n,e);return this.set(t,e),this},startCapturingChangeEvents:function(){if(this.releaseCapturedChangeEvents)return void(0,d.c)(!1,"This model is already capturing events");const e=this.set;let t={};this.set=function(r,n,i){let s;"object"==typeof r?(s=r,i=n):(s={})[r]=n;const o=a().extend({},i,{silent:!0}),c=e.call(this,s,o);return a().extend(t,this.changed),c},this.releaseCapturedChangeEvents=function(){a().each(t,(function(e,t){this.trigger("change:"+t,this,e)}),this),a().isEmpty(t)||this.trigger("change",this,{}),t={},this.set=e,this.releaseCapturedChangeEvents=null}}});m.extend=function(){const e=o.cp.Model.extend.apply(this,arguments);return e.prototype.cache=new l.c,e};const h=m},78332:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(99112),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e},p=(e,t)=>s(e,a(t));function m(e,t){return n.c.shouldCreateFlexModels&&(e.prototype.sessionRelations=p(u({},e.prototype.sessionRelations),{desktop:t})),e}},95600:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=[]},16872:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(95720),i=r.n(n),s=r(33040),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=["boolean","integer","float","string","object","array"];function h(e){return!0}function y(e){return i().isObject(e)&&!Array.isArray(e)}function g(e,t){t||(t={});const r=i().defaults(t,{typeName:e,parse:i().bind(s.c.parseType,s.c,e),stringify:i().bind(s.c.stringifyType,s.c,e)});var n,a,m;return r.validate=t.validate?(n=t.validate,function(e){return null==e||n(e)}):h,r.isRequired=(a=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},r),m={validate:e=>null!=e&&r.validate(e),typeName:`${r.typeName}<required>`},o(a,c(m))),r}const f={any:g("any"),boolean:g("boolean",{validate:i().isBoolean}),integer:g("integer",{validate:Number.isInteger}),float:g("float",{validate:i().isNumber}),string:g("string",{validate:i().isString}),object:g("object",{validate:y}),array:g("array",{validate:Array.isArray}),list:g("list",{validate:Array.isArray}),encodedString:g("encodedString",{validate:i().isString}),queryString:g("queryString",{validate:y}),instanceOf:function(){const e=i().toArray(arguments);return g("instanceOf",{validate:function(t){return i().some(e,(function(e){return t instanceof e}))}})},oneOf:function(){const e=i().toArray(arguments);return g("oneOf",{validate:function(t){return i().contains(e,t)}})},oneOfType:function(){const e=i().toArray(arguments);return g("oneOfType",{validate:function(t){return i().some(e,(function(e){return e.validate(t)}))}})},custom:function(e){return g("custom",{validate:e})},getAttrTypeFor:function(e){if(null==e)return f.any;for(let t=0,r=m.length;t<r;t++){const r=f[m[t]];if(r.validate(e))return r}return f.any}},v=f},99112:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(72152),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e};const d=r(75840).c,u=l(l({allowFlash:!1,testPrivateConnectionsWhenPublicAddressDoesNotMatch:!0,allowHttpsMediaServerConnections:!1,allowMediaServerRelayConnections:!1,allowLoopbackDiscovery:!1,allowIPv6ServerConnections:!1,allowSSO:!1,allowMixedContent:!1,allowBaseImagePreloading:!0,allowBaseImageBlobs:!0,heartbeatInterval:1e4,allowManualServers:!1,allowMobileServers:!1,allowMultiTrackAudio:!1,maximumConcurrentConnectionTests:5,shouldCreateFlexModels:!1,shouldCreateStateTree:!1,requiresSignIn:!0,requiresPlexPass:!1,myPlexAccessToken:null,primaryServer:null,shouldCreateNewSessionWhenSeekingLiveTV:!1,shouldPreferInsecureLocalConnections:!1,shouldRequestHTMLFromCloudProvider:!1,allowLiveTVPlayback:!0,seekDebounceMilliseconds:null,allowSyncSettings:!1,allowAdsOverMedia:!0,drmType:n.NONE},d),window.PLEXWEB),p=Object.freeze(u)},816:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(71684),i=r(16820);const s=n.c.extend({name:"PlayQueueItemCollection",context:["server","provider","identifier","mediaTagPrefix","mediaTagVersion"],model:i.c})},16820:(e,t,r)=>{"use strict";r.d(t,{c:()=>O});var n=r(95720),i=r.n(n),s=r(11364),a=r(16872),o=r(17900),c=r(14224);const l={exclusiveBoolAttr(e){this.listenTo(this,"change:"+e,((t,r)=>{r&&this.each((n=>{n.set(e,n===t&&r)}))}))}};var d=r(71684),u=r(25116),p=r(76400),m=r(96504);const h=s.c.extend({name:"LyricsSpanModel",context:["server","section"],sessionAttrs:{active:a.c.boolean},syncedAttrs:{startOffset:a.c.integer,endOffset:a.c.integer,text:a.c.string},defaults:{startOffset:-1,endOffset:-1},isPositionWithin(e){const t=this.get("startOffset"),r=this.get("endOffset");return-1!==t&&(e>=t&&(e<=r||-1===r))}}),y=d.c.extend({name:"LyricsSpanCollection",context:["server","section"],model:h}),g=s.c.extend({name:"LyricsLineModel",context:["server","section"],syncedAttrs:{startOffset:a.c.integer,endOffset:a.c.integer},syncedRelations:{spans:{relationClass:y,rootPropertyName:"Span"}},defaults:{startOffset:-1,endOffset:-1}}),f=d.c.extend({name:"LyricsLineCollection",context:["server","section"],model:g,eachSpan(e){this.each((t=>{t.get("spans").each(e)}))}}),v=s.c.extend({name:"LyricsStreamModel",context:["server","provider","section"],responseType(){var e;return(null==(e=this.server)?void 0:e.get("isCloud"))?p.qS:p.sH},rootPropertyName:"Lyrics",mergeStrategy:u.c,url(){var e;return(null==(e=this.server)?void 0:e.get("isCloud"))?this.get("key"):m.c.join(this.get("key"),{format:"xml"})},sessionAttrs:{follow:a.c.boolean,lyricsError:a.c.object},syncedAttrs:{id:a.c.string,key:a.c.string,streamType:a.c.integer,index:a.c.integer,title:a.c.string,selected:a.c.boolean,codec:a.c.string,provider:a.c.string,format:a.c.string,minLines:a.c.integer,timed:a.c.boolean},syncedRelations:{lines:{relationClass:f,rootPropertyName:"Line"}},defaults:{follow:!0,selected:!1,lyricsError:null}}),b=d.c.extend({mixins:[l],name:"LyricsStreamCollection",context:["server","provider","section"],model:v,initialize(){this.exclusiveBoolAttr("selected")}});var S=r(19508),P=r(33040),I=r(18168),E=r(6084),w=r(76636);const C=s.c.extend({name:"PlayQueueItemModel",context:["server","provider"],syncedAttrs:{internal:a.c.boolean,url:a.c.string}}),O=s.c.extend({name:"PlayQueueItemModel",context:["server","provider","identifier","mediaTagPrefix","mediaTagVersion"],entityType:E.o1,entityID(e=this.state){return(0,I.c)(this.entityType,e.playQueueItemID,this.server.entityID())},idAttribute:"playQueueItemID",cache:new S.c,cacheKey(e){return this.server&&this.server.getScopedKey(e.playQueueItemID)},sessionAttrs:{isPlayQueueItem:a.c.boolean,isLocal:a.c.boolean},syncedAttrs:{playQueueItemID:a.c.string,queueIndex:a.c.integer,key:a.c.string,ratingKey:a.c.string,type:a.c.string,subtype:a.c.string,advertisement:a.c.boolean,allowSkipAfter:a.c.integer,librarySectionID:a.c.string,hasPremiumLyrics:a.c.boolean,displayPostplay:a.c.boolean,syncItemId:a.c.integer,generatorID:a.c.integer,generatorType:a.c.integer,clientIdentifier:a.c.string,target:a.c.string},syncedRelations:{metadataItem:{relationClass:c.c,deferred:!0},lyricsStreams:{relationClass:b,deferred:!0},vast:{relationClass:C,deferred:!0}},sessionRelations:{postPlay:{relationClass:o.c,options(){return{url:`hubs/metadata/${this.get("metadataItem").id}/postplay`}}}},defaults:{isPlayQueueItem:!0,isLocal:!1},augmentResponse(e){const t=i().pick(e,Object.keys(this.syncedAttrs));e.Ad&&(Array.isArray(e.Ad)&&(e.Ad=e.Ad[0]),t.vast=e.Ad),t.metadataItem=e;const r=i().first(P.c.parseArray(e.Media));if(r){const e=i().first(P.c.parseArray(r.Part));if(e){const r=P.c.parseArray(e.Stream);if(r){const e=w.c.get("lyrics");t.lyricsStreams=i().filter(r,(t=>P.c.parseInteger(t.streamType)===e.id))}}}return t}})},13396:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11364),i=r(16872),s=r(816),a=r(76400),o=r(70776),c=r(17312);const l=n.c.extend({name:"PlayQueueModel",context:["server","provider","identifier","mediaTagPrefix","mediaTagVersion"],responseContext:["identifier","mediaTagPrefix","mediaTagVersion"],responseType(){return(0,o.c)(this.server)},idAttribute:"playQueueID",hasResponseOnSave:!0,urlRoot(){return this.get("key")},sessionAttrs:{key:i.c.string,type:i.c.string,repeat:i.c.boolean,own:i.c.boolean,isUpdatePending:i.c.boolean,isUniversal:i.c.boolean},syncedAttrs:{allowShuffle:i.c.boolean,playQueueID:i.c.string,playQueueSelectedItemOffset:i.c.integer,playQueueSelectedItemID:i.c.string,playQueueSelectedMetadataItemID:i.c.string,playQueueLastAddedItemID:i.c.string,playQueueShuffled:i.c.boolean,playQueueSourceURI:i.c.string,playQueueTotalCount:i.c.integer,playQueueVersion:i.c.integer},syncedRelations:{playQueueItems:{relationClass:s.c,rootPropertyName:"Metadata"}},derivedAttrs:{canShuffle(){const e=-1!==(this.get("playQueueSourceURI")||"").indexOf("library://x/station");return!this.get("playQueueLastAddedItemID")&&this.get("allowShuffle")&&!e},currentIndex(){const e=this.get("playQueueItems"),t=this.get("playQueueSelectedItemID"),r=e.get(t);return e.indexOf(r)},length(){const e=this.get("playQueueTotalCount")||0,t=this.get("playQueueItems")||[];return Math.max(e,t.length)}},defaults:{repeat:!1,own:!0,isUpdatePending:!1,isUniversal:!1,allowShuffle:!0},augmentResponseText:(e,t)=>t===a.sH?(0,c.c)(e):e,augmentResponse(e,t){return this.responseContext.forEach((t=>{const r=e[t];void 0!==r&&this.setContext(t,r)})),e}})},76100:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(95720),i=r.n(n),s=r(71684),a=r(96504),o=r(75276);const c=s.c.extend({name:"FilterCollection",context:["server","section","includeAdvanced"],model:o.c,comparator:"filterType",includeAdvanced:!0,url(){const e=i().result(this.section,"url"),t=this.section.get("currentType"),r={includeAdvanced:this.includeAdvanced?1:0};return t&&(r.type=t.id),a.c.join([e,"/filters"],r)},findUnwatchedFilter(){return this.get("unwatched")||this.get("unwatchedLeaves")}})},75276:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11364),i=r(16872),s=r(93304);const a=n.c.extend({name:"FilterModel",context:["server","section","type","standalone"],idAttribute:"filter",rootPropertyName:"Directory",defaults:{advanced:!1},syncedAttrs:{filter:i.c.string,filterType:i.c.string,type:i.c.string,key:i.c.string,title:i.c.string,advanced:i.c.boolean},syncedRelations:{options:{relationClass:s.c}}})},93304:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(95720),i=r.n(n),s=r(71684),a=r(96504),o=r(11364),c=r(16872);const l=o.c.extend({name:"FilterOptionModel",context:["server","section","type","standalone"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:c.c.encodedString,type:c.c.string,field:c.c.string,value:c.c.string,title:c.c.string},augmentResponse:e=>(e.fastKey?(e.value=e.key,e.key=e.fastKey,e.field=e.type,delete e.type,delete e.fastKey):e.fastKey||e.value||(e.value=e.key),e)}),d=s.c.extend({name:"FilterOptionCollection",context:["server","provider","section","type","standalone","includeExternalMedia"],model:l,url(){let e;this.type?e={type:this.type}:this.standalone||(e=this.getUrlParams());const t=i().result(this.section,"url");return a.c.join([t,this.parent.id],e)},getUrlParams(){const e={},t=[],r=this.section.get("currentType"),n=this.section.get("currentFilters");return r&&(e.type=r.id),i().each(n,(t=>{t.key!==this.parent.id&&t.values.length&&(e[t.key]=t.values.join(","))})),i().each(e,((e,r)=>{"unviewedLeafCount"===r?t.push(`${r}>=${e}`):t.push(`${r}=${e}`)})),t.join("&")},augmentResponse:e=>(e.Directory&&!Array.isArray(e.Directory)&&(e.Directory=[e.Directory]),e.Directory=i().filter(e.Directory,(e=>e.title)),e),search(e){const t=this.filter((t=>t.get("title").toLowerCase().indexOf(e.toLowerCase())>-1));return this.clone(t)}})},38238:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11364),i=r(16872),s=r(70776),a=r(59396),o=r(96504),c=r(71684);const l=n.c.extend({name:"LibraryDirectoryModel",context:["server"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:i.c.string,title:i.c.string}}),d=c.c.extend({name:"LibraryDirectoryCollection",context:["server"],model:l});var u=r(34160),p=r(17532);const m=n.c.extend({name:"LibraryDetailsModel",context:["server","provider","includeAdvanced"],responseType(){return(0,s.c)(this.server)},url(){const e={includeDetails:1};return this.includeAdvanced&&(e.includeAdvanced=1),o.c.join(this.get("key"),e)},sessionAttrs:{key:i.c.string.isRequired},syncedAttrs:{librarySectionID:i.c.string},syncedRelations:{directories:{relationClass:d,rootPropertyName:"Directory"},types:{relationClass:p.c,rootPropertyName:"Type"},fieldTypes:{relationClass:u.c,rootPropertyName:"FieldType"}},augmentResponse(e){if(e.Directory&&e.Directory.length&&e.Directory.some((({key:e})=>"folder"===e))&&e.Type&&e.Type.length&&e.Type.every((({type:e})=>"folder"!==e))){const t=e.librarySectionID;e.Type.push({key:`/library/sections/${t}/folder`,type:"folder",title:(0,a.c)("Folders")})}return e}})},34160:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"OperatorModel",context:["server"],idAttribute:"key",rootPropertyName:"Operator",syncedAttrs:{key:s.c.string,title:s.c.string}}),o=n.c.extend({name:"OperatorCollection",context:["server"],model:a}),c=i.c.extend({name:"MetadataFieldTypeModel",context:["server"],idAttribute:"type",rootPropertyName:"FieldType",syncedAttrs:{type:s.c.string.isRequired},syncedRelations:{operators:{relationClass:o,rootPropertyName:"Operator"}}}),l=n.c.extend({name:"MetadataTypeCollection",context:["server"],model:c})},17532:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"FieldModel",context:["server"],idAttribute:"key",rootPropertyName:"Field",syncedAttrs:{key:s.c.string,title:s.c.string,type:s.c.string,subType:s.c.string}}),o=n.c.extend({name:"FieldCollection",context:["server"],model:a});var c=r(76100),l=r(31824);const d=i.c.extend({name:"MetadataTypeModel",context:["server"],idAttribute:"key",rootPropertyName:"Type",syncedAttrs:{type:s.c.string,subtype:s.c.string,key:s.c.string,title:s.c.string,context:s.c.string},syncedRelations:{filters:{relationClass:c.c,rootPropertyName:"Filter"},sorts:{relationClass:l.c,rootPropertyName:"Sort"},fields:{relationClass:o,rootPropertyName:"Field"}}}),u=n.c.extend({name:"MetadataTypeCollection",context:["server"],model:d})},94944:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(71684),i=r(70776),s=r(65668);const a=n.c.extend({name:"SectionCollection",context:["server"],model:s.c,url:"/library/sections",responseType(){return(0,i.c)(this.server)}})},65668:(e,t,r)=>{"use strict";r.d(t,{c:()=>j});var n=r(95720),i=r.n(n),s=r(11364),a=r(16872),o=r(59508),c=r(12612),l=r(96504),d=r(15568);const u={unviewedLeafCount:">="},p=d.c.extend({name:"SectionMetadataListModel",context:["server","section","identifier","mediaTagPrefix","mediaTagVersion","allowSync"],url(){let e,t,r=[];const n=this.section.get("currentFolderKey");if(n)r.push(n);else if(r.push(i().result(this.section,"url")),e=this.section.get("currentSubset").id,this.section.get("allowAdvancedFilters"))"recentlyAdded"!==e&&"newest"!==e||(e="all"),r.push(e),t=this.getParams();else{const t=this.section.get("currentFilters");t.length?r=[t[0].values[0]]:r.push(e)}let s=l.c.join(r,t);return s=this.replaceSpecialFilterOperators(s),this.set("containerKey",s),this.server.get("isFullServer")?this.getPaginatedUrl(s):s},getParams(){const e=this.getFilterParams(),t=this.getMetadataTypeID(),r=this.getSort();return t&&t!==(0,c.GG)("photo").id&&(e.type=t),r&&(e.sort=r),this.section.get("refreshing")&&this.server.supports("timelineState")&&(e.timelineState=1),e},getFilterParams(){const e=this.section.get("currentFilters"),t={};return i().each(e,(e=>{e.values.length&&(t[e.key]=e.values.map(decodeURIComponent).join(","))})),t},getMetadataTypeID(){const e=this.section.get("currentSubset").id;let t=this.section.get("currentType").id||(0,c.GG)(this.section.get("type")).id;return/^(onDeck|recentlyAdded|recentlyViewed|newest)$/.test(e)?t===(0,c.GG)("show").id||t===(0,c.GG)("season").id?t=(0,c.GG)("episode").id:t!==(0,c.GG)("artist").id&&t!==(0,c.GG)("track").id||(t=(0,c.GG)("album").id):/^recentlyViewedShows$/.test(e)&&(t=(0,c.GG)("show").id),t},getSort(){const e=this.section.get("currentSort"),t=this.section.get("currentSubset").id;return"recentlyAdded"===t?"addedAt:desc":"newest"===t?"originallyAvailableAt:desc":e?(e.get("direction")||e.get("defaultDirection"))===o.default.directions.DESCENDING?e.get("descKey"):e.get("key"):void 0},replaceSpecialFilterOperators:e=>(i().each(u,((t,r)=>{e=e.replace(r+"=",r+t)})),e)});var m=r(97036),h=r(19508),y=r(18168),g=r(6084),f=r(47148),v=r(59396);const b=(0,r(79787).c)(["key"],[{key:"all",title:()=>(0,v.c)("All")},{key:"unwatched",title:()=>(0,v.c)("Unplayed")},{key:"newest",title:()=>(0,v.c)("Recently Released")},{key:"recentlyAdded",title:()=>(0,v.c)("Recently Added")},{key:"recentlyViewed",title:()=>(0,v.c)("Recently Viewed")},{key:"recentlyViewedShows",title:()=>(0,v.c)("Recently Viewed Shows")},{key:"onDeck",title:()=>(0,v.c)("On Deck")},{key:"folder",title:()=>(0,v.c)("By Folder")}]);var S=r(76100),P=r(71684),I=r(70776);const E=s.c.extend({name:"FirstCharacterModel",context:["server","provider","section"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:a.c.string,title:a.c.string,size:a.c.integer},urlRoot(){return`/library/sections/${this.section.id}/firstCharacter`}}),w=P.c.extend({name:"FirstCharacterCollection",context:["server","provider","section"],model:E,responseType(){return(0,I.c)(this.server)},url(){const e=i().result(this.section,"url")+"/firstCharacter",t=this.getUrlParams();return t?e+"?"+t:e},getUrlParams(){const e={},t=[],r=this.section.get("currentType");r&&(e.type=r.id);const n=this.section.get("currentFilters");return i().each(n,(t=>{t.values.length&&(e[t.key]=t.values.join(","))})),i().each(e,((r,n)=>{"unviewedLeafCount"===n?t.push(`${n}>=${e[n]}`):t.push(`${n}=${e[n]}`)})),t.join("&")}});var C=r(93304);const O=s.c.extend({name:"LinearFilterModel",context:["server","section"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{secondary:a.c.boolean,key:a.c.string,title:a.c.string},syncedRelations:{options:{relationClass:C.c}},defaults:{secondary:!1}}),M=P.c.extend({name:"LinearFilterCollection",context:["server","section"],model:O,url(){return i().result(this.section,"url")},filterBySecondary(){const e=this.filter((e=>e.get("secondary")));return this.clone(e)}}),T=s.c.extend({name:"LocationModel",context:["server","section"],rootPropertyName:"Location",syncedAttrs:{id:a.c.integer,path:{type:a.c.string,save:!0}}}),D=P.c.extend({name:"LocationCollection",context:["server","section"],model:T}),k=s.c.extend({name:"MediaTypeModel",context:["server","section"],sessionAttrs:{id:a.c.integer,typeString:a.c.string,title:a.c.string,plural:a.c.string,mediaType:a.c.string,child:a.c.string,parent:a.c.string,selected:a.c.boolean},defaults:{selected:!1}}),x=P.c.extend({name:"MediaTypeCollection",context:["server","section"],model:k}),A=["all","recentlyAdded","recentlyViewed","recentlyViewedShows","onDeck","newest","folder"],R=s.c.extend({name:"SectionSubsetModel",context:["server","section"],idAttribute:"key",rootPropertyName:"Directory",sessionAttrs:{selected:a.c.boolean},syncedAttrs:{key:a.c.string,title:a.c.string,secondary:a.c.boolean},derivedAttrs:{primary(){return!this.get("secondary")&&i().contains(A,this.get("key"))}},defaults:{selected:!1},augmentResponse:e=>("all"===e.key&&(e.title=(0,v.c)("All")),e)},{whitelistedPrimaryKeySubsets:A}),N=P.c.extend({name:"SectionSubsetCollection",context:["server","section"],model:R,url(){return i().result(this.section,"url")},filterPrimaries(){const e=this.filter((e=>e.get("primary")));return this.clone(e)}});var L=r(31824);const j=s.c.extend({name:"SectionModel",context:["server"],entityType:g.Qh,entityID(e=this.state){return(0,y.c)(this.entityType,e.key,this.server.entityID())},idAttribute:"key",rootPropertyName:"Directory",cache:new h.c,persistInCache:!0,cacheKey(e){return this.server&&this.server.getScopedKey(e.key)},url(){return this.isNew()?i().result(this,"urlRoot")||i().result(this.collection,"url"):i().isNaN(parseInt(this.id,10))?this.id:"/library/sections/"+this.id},sessionAttrs:{isSection:a.c.boolean,isCollectionsPopulated:a.c.boolean,currentFilters:a.c.array,currentFolderKey:a.c.string,settings:a.c.instanceOf(m.c)},syncedAttrs:{key:a.c.oneOfType(a.c.string,a.c.integer),uuid:a.c.string,thumb:a.c.string,art:a.c.string,createdAt:a.c.integer,updatedAt:a.c.integer,allowAdvancedFilters:a.c.boolean,allowSync:a.c.boolean,refreshing:a.c.boolean,name:{type:a.c.string,save:!0},title:{type:a.c.string,save:!0},type:{type:a.c.string,save:!0},agent:{type:a.c.string,save:!0},scanner:{type:a.c.string,save:!0},language:{type:a.c.string,save:!0},importFromiTunes:{type:a.c.boolean,save:!0},enableAutoPhotoTags:{type:a.c.boolean,save:!0}},derivedAttrs:{serverEntityID(){return this.state?this.server.entityID():""}},syncedRelations:{locations(){return{relationClass:D,rootPropertyName:"Location",options:{section:this},save:!0}}},sessionRelations:{items(){return{relationClass:p,options:{section:this}}},currentSubset(){return{relationClass:R,options:{section:this}}},currentFirstCharacter:()=>({relationClass:E,deferred:!0}),currentType:()=>({relationClass:k,deferred:!0}),currentSort:()=>({relationClass:o.default,deferred:!0}),types(){return{relationClass:x,options:{section:this}}},subsets(){return{relationClass:N,options:{section:this}}},filters(){return{relationClass:this.get("allowAdvancedFilters")?S.c:M,options:{section:this}}},sorts(){return{relationClass:L.c,options:{section:this}}},firstCharacters(){return{relationClass:w,options:{section:this}}}},defaults(){return{isSection:!0,isCollectionsPopulated:!1,currentType:null,currentFilters:[],currentSort:null,currentFirstCharacter:null,currentFolderKey:null,currentSubset:b.get("all"),settings:new m.c([],{server:this.server,url:()=>l.c.join(["/library/sections/",this.get("key"),"/prefs"])})}},initialize(e){this.updateMediaTypes(this,e.type),this.set({currentType:this.get("types").findWhere({typeString:e.type})}),this.on("change:type",this.updateMediaTypes,this)},uninitialize(){this.off("change:type",this.updateMediaTypes,this),this.stopListening()},augmentResponse:e=>(e.allowAdvancedFilters=!!e.filters,delete e.filters,e),getSectionType(){const e=this.get("type");return f.cp.get(e)},getSaveParams(e){const t=s.c.prototype.getSaveParams.apply(this,arguments);if("type"in t){const e=f.cp.get(t.type);e&&(t.type=e.typeString)}return"title"in t&&(t.name=t.title,delete t.title),i().isObject(t.type)&&(t.type=t.type.typeString),"Location"in t&&(t.location=i().pluck(t.Location,"path"),delete t.Location),t},getSyncTitle(e){const t=this.get("title"),r=[],n=this.get("currentSubset"),s=this.get("currentFilters");return e?(i().each(e,(e=>{r.push(e.get("title"))})),t+": "+r.join(", ")):"all"!==n.id?t+": "+n.get("title"):s.length?(i().each(s,(function(e){r.push(e.titles.join(", "))})),t+": "+r.join(",")):t},setAgentAndScanner(e,t,r){const n=e.defaultAgents.find((e=>t.find((t=>t.get("identifier")===e)))),i=e.defaultScanners.find((e=>r.find((t=>t.get("name")===e))));this.set({agent:n,scanner:i})},updateMediaTypes(e,t){const r=(0,c.Gm)(t);this.get("types").reset(r)}})},31824:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(95720),i=r.n(n),s=r(71684),a=r(96504),o=r(59508);const c=s.c.extend({name:"SortCollection",context:["server","section","typeID"],model:o.default,url(){const e=i().result(this.section,"url"),t=this.typeID||this.section.get("currentType").id,r=t?{type:t}:{};return a.c.join([e,"/sorts"],r)}})},59508:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(11364),i=r(16872);const s={ASCENDING:"asc",DESCENDING:"desc"},a=n.c.extend({name:"SortModel",context:["server","section"],idAttribute:"key",rootPropertyName:"Directory",sessionAttrs:{selected:i.c.boolean,direction:i.c.string},syncedAttrs:{key:i.c.string,descKey:i.c.string,title:i.c.string,isDefault:i.c.boolean,active:i.c.boolean,defaultDirection:i.c.string,activeDirection:i.c.string,firstCharacterKey:i.c.string},defaults:{selected:!1},augmentResponse:e=>(e.defaultDirection||(e.defaultDirection=e.default||s.ASCENDING),e.isDefault=!!e.default,e.direction||(e.direction=e.defaultDirection),e),reverseSortDirection(){let e=this.get("direction")||this.get("defaultDirection");e=e&&e!==s.ASCENDING?s.ASCENDING:s.DESCENDING,this.set("direction",e)}},{directions:s})},17900:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(95720),i=r.n(n),s=r(71684),a=r(76400),o=r(21248),c=r(70776),l=r(17312),d=r(46784),u=r(97412),p=r(96504),m=r(22876);const h=s.c.extend({name:"HubCollection",context:["server","provider","section","identifier","hubKey","hubCount","count","includeEmpty","libraryHubsOnly","includeFeaturedTags","includeLibraryPlaylists","includeMeta","includeStations","includeExternalMedia","includeExternalMetadata","includeRecentChannels","asyncAugmentMetadata","excludes","excludeFields","excludeElements","allowSync","maxLength","wait"],responseContext:["identifier","allowSync"],model:m.c,responseType(){return(0,c.c)(this.server)},url(){let e="/hubs";this.hubKey?e=this.hubKey:this.section&&(e="/hubs/sections/"+encodeURIComponent(this.section.id));const t={};return""!==this.excludeFields&&(t.excludeFields=this.excludeFields||"summary"),this.excludeElements&&(t.excludeElements=this.excludeElements),this.count&&(t.count=this.count+1),this.hubCount&&(t.hubCount=this.hubCount),this.includeEmpty&&(t.includeEmpty=1),this.libraryHubsOnly&&(t.libraryHubsOnly=1),this.includeFeaturedTags&&(t.includeFeaturedTags=1),this.includeLibraryPlaylists&&(t.includeLibraryPlaylists=1),this.includeMeta&&(t.includeMeta=1),this.includeStations&&(t.includeStations=1),this.includeExternalMedia&&(t.includeExternalMedia=1),this.includeExternalMetadata&&(t.includeExternalMetadata=1),this.includeRecentChannels&&(t.includeRecentChannels=1),this.asyncAugmentMetadata&&(t.asyncAugmentMetadata=1),this.wait&&(t.wait=1),this.excludes&&this.excludes.length&&this.excludes.forEach((e=>{t["exclude"+(0,d.c)(e)]=1})),p.c.join(e,t)},initialize:function(){this.section&&this.listenTo(o.c,"clear:sections:hubs",this.clear)},fetch(e={}){const t=i().clone(e);return e.onlyTransient&&this.populatePromise&&(t.remove=!1,t.url=p.c.join(i().result(this,"url"),{onlyTransient:1})),s.c.prototype.fetch.call(this,t)},augmentResponseText:(e,t)=>t===a.sH?(0,l.c)(e):e,augmentResponse(e){const t=this.model.prototype.rootPropertyName;if(e&&t){Array.isArray(e)?e={[t]:e}:e[t]&&!Array.isArray(e[t])&&(e={[t]:[e[t]]});const r=e[t];e.Meta&&r.forEach((t=>{t.Meta||(t.Meta=e.Meta)}));let n=r&&r.length;if(n){if(!this.includeEmpty)for(;n&&n--;){const e=r[n];u.wp.includes(e.style)&&e.size<=0&&r.splice(n,1)}this.maxLength&&r.splice(this.maxLength),e.size>r.length&&(e.size=String(r.length)),this.count&&r.forEach((e=>{e.more&&e.size>this.count&&(e.Metadata.splice(this.count,e.size-this.count),e.size=this.count)}))}}return this.responseContext.forEach((t=>{const r=e[t];void 0!==r&&this.setContext(t,r)})),e}})},22876:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11364),i=r(16872),s=r(76400),a=r(70776),o=r(17312),c=r(33040),l=r(18168),d=r(6084),u=r(15568);const p=n.c.extend({name:"HubModel",context:["server","provider","section","identifier","allowSync","includeExternalMedia"],entityType:d.oB,entityID(e=this.state){return(0,l.c)(this.entityType,e.key||e.hubKey||e.hubIdentifier,this.provider.entityID())},idAttribute:"hubIdentifier",rootPropertyName:"Hub",responseType(){return(0,a.c)(this.server)},url(){return this.get("key")||this.get("hubKey")},syncedAttrs:{key:i.c.string,hubKey:i.c.string,hubIdentifier:i.c.string,source:i.c.string,title:i.c.string,summary:i.c.string,icon:i.c.string,thumb:i.c.string,attribution:i.c.string,type:i.c.string,subtype:i.c.string,style:i.c.string,size:i.c.integer,totalSize:i.c.integer,more:i.c.boolean,random:i.c.boolean,browse:i.c.boolean,upNext:i.c.boolean,context:i.c.string,promoted:i.c.boolean,autoAdvanceDelayMs:i.c.integer,Meta:i.c.object},syncedRelations:{metadataList:{relationClass:u.c,deferred:!0}},initialize(){this.listenTo(this.get("metadataList"),"change:populatedRange",this.onPopulatedRangeChange)},augmentResponseText:(e,t)=>t===s.sH?(0,o.c)(e):e,augmentResponse(e){const t=null==e.totalSize?void 0:c.c.parseInteger(e.totalSize),r=c.c.parseInteger(e.size)||0,n=e.key||e.hubKey;return e.metadataList={containerKey:n,Metadata:e.Metadata,size:r,totalSize:t},e},onPopulatedRangeChange(e,t){const r=t.size,n=e.get("totalSize"),i={size:r};null!=n&&(i.more=n>r),this.set(i)}})},22784:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(71684),i=r(76400),s=r(70776),a=r(17312),o=r(14224);const c=n.c.extend({name:"MetadataCollection",context:["server","provider","section","playlist","identifier","mediaTagPrefix","mediaTagVersion","allowSync","containerKey","includeExternalMedia"],model:o.c,responseType(){return(0,s.c)(this.server)},url(){return this.containerKey},augmentResponseText:(e,t)=>t===i.sH?(0,a.c)(e):e,splitByType:function(){const e={};return this.each((t=>{const r=t.get("type");e.hasOwnProperty(r)?e[r].push(t):e[r]=[t]})),e}})},15568:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(95720),i=r.n(n),s=r(11364),a=r(16872),o=r(96420),c=r(76400),l=r(70776),d=r(17312),u=r(33040),p=r(18168),m=r(6084),h=r(96504),y=r(34160),g=r(17532);const f=s.c.extend({name:"MetaModel",context:["server","provider"],syncedAttrs:{DisplayFields:a.c.array},syncedRelations:{types:{relationClass:g.c,rootPropertyName:"Type"},fieldTypes:{relationClass:y.c,rootPropertyName:"FieldType"}}});var v=r(22784);const b=s.c.extend({mixins:[o.c],name:"MetadataListModel",context:["server","provider","section","metadataItem","identifier","mediaTagPrefix","mediaTagVersion","allowSync","excludeFields","excludeElements","excludeAllLeaves","includeRelated","includeCollections","includeExternalMedia","includeAdvanced","includeMeta"],responseContext:["identifier","mediaTagPrefix","mediaTagVersion","allowSync"],entityType:m._M,entityID(e=this.state){return(0,p.c)(this.entityType,e.entityKey||e.containerKey||e.key||this.cid,(this.provider||this.server).entityID())},idAttribute:"containerKey",collectionName:"metadataItems",responseType(){return(0,l.c)(this.server)},url(){const e=this.getPaginatedUrl(this.get("containerKey")||this.get("key")),t={excludeElements:this.excludeElements?this.excludeElements:void 0,excludeFields:this.excludeFields?this.excludeFields:void 0,excludeAllLeaves:this.excludeAllLeaves?1:void 0,includeRelated:this.includeRelated?1:void 0,includeCollections:this.includeCollections?1:void 0,includeExternalMedia:this.includeExternalMedia?1:void 0,includeAdvanced:this.includeAdvanced?1:void 0,includeMeta:this.includeMeta?1:void 0};return e?h.c.join(e,t):e},sessionAttrs:{isMetadataList:a.c.boolean,entityKey:a.c.string,containerKey:a.c.string,containerTitle:a.c.string,currentPageStart:a.c.integer,currentPageSize:a.c.integer,populatedRange:a.c.object,isPending:a.c.boolean,isPopulated:a.c.boolean,error:a.c.object},syncedAttrs:{isDirectoryList:a.c.boolean,isMetaPopulated:a.c.boolean,key:a.c.string,librarySectionID:a.c.string,totalSize:a.c.integer,viewGroup:a.c.string,title:a.c.string,thumb:a.c.string,art:a.c.string,theme:a.c.string,allowSync:a.c.boolean},syncedRelations:{metadataItems:{relationClass:v.c,rootPropertyName:"Metadata",options:e=>({containerKey:e.containerKey||e.key}),setOptions:e=>({remove:e.remove,at:e.at})},meta:{relationClass:f,rootPropertyName:"Meta",deferred:!0}},derivedAttrs:{firstItemType(){const e=this.getCollection().first();return e?e.get("type"):this.attributes.firstItemType},firstItemSubtype(){const e=this.getCollection().first();return e?e.get("subtype"):this.attributes.firstItemSubtype},isFirstItemLibraryItem(){const e=this.getCollection().first();return e?e.get("isLibraryItem"):this.attributes.isFirstItemLibraryItem},isChannelsList(){const e=this.getCollection().first();return e?e.get("dvrChannel"):this.attributes.isChannelsList}},defaults:()=>({isMetadataList:!0,isDirectoryList:!1,populatedRange:{start:0,end:0,size:0},isPending:!0,isPopulated:!1,isMetaPopulated:!1,error:null}),initialize(e){this._totalSizeAdjustment=0,this.startPopulatedRangeMonitor(),this.on("change:key change:containerKey",this.onContainerKeyChange,this)},uninitialize(){this.off("change:key change:containerKey",this.onContainerKeyChange,this),this.stopListening()},augmentResponseText(e,t){const r=this.get("containerKey")||this.get("key"),n=/\/folder(\?|$)/.test(r);return t===c.sH?(0,d.c)(e,{includeDirectories:n}):e},augmentResponse(e,t){this.responseContext.forEach((t=>{const r=e[t];void 0!==r&&this.setContext(t,r)}));const r=u.c.parseArray(e.Metadata),n=u.c.parseArray(e.Directory),s=u.c.parseInteger(e.totalSize);return this.allowAllLeaves||(e.Metadata=i().reject(r,(function(e){const t=/\/allLeaves$/.test(e.key);return t&&(this._totalSizeAdjustment-=1),t}),this)),!r.length&&e.Directory&&(e.Metadata=n,e.isDirectoryList=!0),this.includeMeta&&(e.isMetaPopulated=!0),s&&this._totalSizeAdjustment&&(e.totalSize=s-this._totalSizeAdjustment),!e.title&&e.title1&&(e.title=e.title1),e},onContainerKeyChange(e,t){const r=this.get("metadataItems"),n=this.syncedRelations.metadataItems.options(this.attributes);i().each(n,((e,t)=>{r.setContext(t,e)}))}})},14224:(e,t,r)=>{"use strict";r.d(t,{y:()=>J,c:()=>ee});var n=r(95720),i=r.n(n),s=r(11364),a=r(16872),o=r(76400);const c=s.c.extend({name:"TranscodeSessionModel",context:["server"],url(){return"/transcode/sessions/"+this.id},syncedAttrs:{key:a.c.string,progress:a.c.float,throttled:a.c.boolean,speed:a.c.float,duration:a.c.integer,videoDecision:a.c.string,audioDecision:a.c.string,protocol:a.c.string,container:a.c.string,videoCodec:a.c.string,audioCodec:a.c.string,audioChannels:a.c.integer,width:a.c.string,height:a.c.string,transcodeHwDecoding:a.c.string,transcodeHwEncoding:a.c.string,timeStamp:a.c.integer,minOffsetAvailable:a.c.integer,maxOffsetAvailable:a.c.integer}});var l=r(64764),d=r(19508),u=r(6996),p=r(4828),m=r(70776),h=r(86264),y=r(85976),g=r(69956),f=r(35860),v=r(87228),b=r(17312),S=r(33040),P=r(18168),I=r(6084),E=r(59396),w=r(12612),C=r(1868),O=r(76636),M=r(96504),T=r(71684);const D=s.c.extend({name:"ChapterModel",context:["server","section"],syncedAttrs:{id:a.c.integer,tag:a.c.string,index:a.c.integer,startTimeOffset:a.c.integer,endTimeOffset:a.c.integer,thumb:a.c.string}}),k=T.c.extend({name:"ChapterCollection",context:["server","section"],model:D,modelId:e=>`${e.id}_${e.index}`}),x=s.c.extend({name:"ConcertModel",context:["server","section"],syncedAttrs:{id:a.c.integer,at:a.c.integer,tag:a.c.string,venue:a.c.string,city:a.c.string,country:a.c.string,url:a.c.string}}),A=T.c.extend({name:"ConcertCollection",context:["server","section"],model:x});var R=r(25116),N=r(78364),L=r(21784),j=r(30564),U=Object.defineProperty,F=Object.defineProperties,V=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&H(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&H(e,r,t[r]);return e},G=(e,t)=>F(e,V(t));const q={guid:!0,librarySectionID:!0,librarySectionTitle:!0,librarySectionUUID:!0,librarySectionKey:!0,source:!0,Context:!0,file:!0,summary:!0,tagline:!0,action:!0,attributionLogo:!0,backgroundColor:!0};function K(e){let t=0;if(!e)return t;for(let r=0,n=e.length;r<n;r++){const n=e[r].Part;if(n)for(let e=0,r=n.length;e<r;e++){const r=n[e].Stream;r&&(t+=r.length)}}return t}function Q(e=[]){return(0,N.c)(e,j.c,(e=>e))}function $(e){return(e.hasOwnProperty("ratingKey")||e.hasOwnProperty("id"))&&e.hasOwnProperty("tag")}function Y(e,t){t.forEach((t=>{null!=(null==e?void 0:e[t])&&"string"!=typeof e[t]&&(e[t]=e[t].toString())}))}const X=I.Qv;function J({key:e,source:t,machineIdentifier:r}){const n=(0,P.c)(I.qe,r);let i;if(t){const e=(0,g.c)(t);e.serverIdentifier!==r&&(i=(0,P.c)(I.qe,e.serverIdentifier))}return(0,P.c)(X,e,i,n)}const Z=s.c.extend({name:"MetadataModel",context:[["server",{boundDerivedAttrs:["serverEntityID"]}],["provider",{boundDerivedAttrs:["providerEntityID"]}],"section","playlist","identifier","mediaTagPrefix","mediaTagVersion","allowSync","containerKey","relatedOptions","includeExternalMedia"],responseContext:["identifier","mediaTagPrefix","mediaTagVersion","allowSync"],entityType:X,entityID(e=this.state){return J({key:e.key||this.cid,source:e.source,machineIdentifier:this.server.get("machineIdentifier")})},idAttribute:"ratingKey",rootPropertyName:"Metadata",cache:new d.c,mergeStrategy:function(e,t,r){return"Media"===e?function(e,t,r){if(r&&!t)return r;var n;const i=(n=r||t)&&n.some((e=>e.protocol===L.W))||function(e){return e&&e.some((e=>"livetv"===e.origin))}(r||t)?function(e,t){var r,n,i,s,a,o,c,l;if(!t)return null;const d=Q(e),u=Q(t),p=z(z({},d),u);for(const e in d){const t=d[e],m=u[e];t&&m&&t.Overlay.length&&!m.Overlay.length&&(p[e]=G(z({},p[e]),{Overlay:t.Overlay}));const h=null!=(s=null==(i=null==(n=null==(r=null==t?void 0:t.Part)?void 0:r[0])?void 0:n.Stream)?void 0:i.length)?s:0,y=null!=(l=null==(c=null==(o=null==(a=null==m?void 0:m.Part)?void 0:a[0])?void 0:o.Stream)?void 0:c.length)?l:0;t&&m&&h>y&&(p[e]=G(z({},p[e]),{Part:t.Part}))}return Object.keys(p).map((e=>p[e]))}(t,r):function(e,t){const r=K(t),n=K(e);return r||!n?t:e}(t,r);return i||(0,R.c)(e,t,r)}(e,t,r):function(e){const t=ee.prototype.syncedAttrs[e];return!(!t||t!==a.c.array)}(e)?function(e,t,r){if(!r)return t;if(!t)return r;if(r.length>t.length)return r;if(!r.length||r.length<t.length)return t;const n=t&&t[0],i=r&&r[0];if(!n&&i)return r;if(!i&&n)return t;const s=$(n),a=$(i);return s&&!a?t:r}(0,t,r):function(e){return!!ee.prototype.syncedRelations[e]}(e)||q[e]?(0,R.c)(e,t,r):r},responseType(){const e=this.get("key");return e&&e.indexOf("/system/services/url/lookup")>-1?o.sH:(0,m.c)(this.server)},url(){const e={};return this.includeExternalMedia&&(e.includeExternalMedia=1),M.c.join(this.get("key"),e)},urlRoot(){return this.get("key")},saveUrl(){return this.get("isPlaylist")&&!this.server.supports("truePlaylistsPath")?`/library/metadata/${this.get("ratingKey")}`:i().result(this,"url")},cacheKey(e){const t=this.extractChildrenKey(e.key);return e.source&&(t.key=e.source+t.key),this.server&&this.server.getScopedKey(t.key)},sessionAttrs:{addToWatchlistGuid:a.c.string,isInUniversalWatchlist:a.c.boolean.isRequired,isInUniversalWatchlistFetched:a.c.boolean.isRequired,isPreFetched:a.c.boolean,isStreamChangeInProgress:a.c.boolean,isStreamDeleteInProgress:a.c.boolean,metadataState:a.c.string,mediaState:a.c.string,isSettingsUpdating:a.c.boolean,settingsUpdateError:a.c.object,dvrChannel:a.c.object,viewCountIncrementedByPlayQueueItemID:a.c.string,downloadSubscriptionID:a.c.string,isDownloaded:a.c.boolean},syncedAttrs:{elementName:a.c.string,ratingKey:a.c.string,parentRatingKey:a.c.string,grandparentRatingKey:a.c.string,key:a.c.string,childrenKey:a.c.string,Context:a.c.object,parentKey:a.c.string,grandparentKey:a.c.string,primaryExtraKey:a.c.string,augmentationKey:a.c.string,guid:a.c.string,primaryGuid:a.c.string,streamingMediaId:a.c.string,source:a.c.string,sourceURI:a.c.string,attribution:a.c.string,attributionLogo:a.c.string,action:a.c.string,backgroundColor:a.c.string,remoteMedia:a.c.boolean,librarySectionID:a.c.string,librarySectionTitle:a.c.string,librarySectionUUID:a.c.string,librarySectionKey:a.c.string,type:a.c.string,subtype:a.c.string,title:a.c.string,titleSort:a.c.string,originalTitle:a.c.string,parentTitle:a.c.string,grandparentTitle:a.c.string,year:a.c.string,minYear:a.c.string,maxYear:a.c.string,tagline:a.c.string,summary:a.c.string,studio:a.c.string,contentRating:a.c.string,originallyAvailableAt:a.c.string,thumb:a.c.string,parentThumb:a.c.string,grandparentThumb:a.c.string,art:a.c.string,parentArt:a.c.string,grandparentArt:a.c.string,hero:a.c.string,theme:a.c.string,parentTheme:a.c.string,grandparentTheme:a.c.string,chapterSource:a.c.string,ratingImage:a.c.string,audienceRating:a.c.float,audienceRatingImage:a.c.string,directory:a.c.boolean,rating:a.c.float,userRating:a.c.float,playbackSpeed:a.c.float,index:a.c.integer,parentIndex:a.c.integer,absoluteIndex:a.c.integer,duration:a.c.integer,editionTitle:a.c.string,preview:a.c.boolean,viewOffset:a.c.integer,viewCount:a.c.integer,childCount:a.c.integer,leafCount:a.c.integer,viewedLeafCount:a.c.integer,ratingCount:a.c.integer,mediaCount:a.c.integer,mediaCountOptimized:a.c.integer,extraType:a.c.integer,lastViewedAt:a.c.integer,lastRatedAt:a.c.integer,addedAt:a.c.integer,updatedAt:a.c.integer,deletedAt:a.c.integer,Geolocation:a.c.object,rentalPrice:a.c.string,playlistID:a.c.integer,playlistType:a.c.string,specialPlaylistType:a.c.string,radio:a.c.boolean,smart:a.c.boolean,readOnly:a.c.boolean,icon:a.c.string,composite:a.c.string,content:a.c.string,durationInSeconds:a.c.integer,skipChildren:a.c.boolean,skipParent:a.c.boolean,skipDetails:a.c.boolean,subscriptionID:a.c.string,saved:a.c.boolean,picked:a.c.boolean,grandparentSubscriptionID:a.c.string,subscriptionType:a.c.string,grandparentSubscriptionType:a.c.string,Channel:a.c.array,onAir:a.c.boolean,watchlistedAt:a.c.integer,publicPagesURL:a.c.string,Media:a.c.array,Collection:a.c.array,Director:a.c.array,Producer:a.c.array,Writer:a.c.array,Studio:a.c.array,Genre:a.c.array,Mood:a.c.array,Country:a.c.array,Label:a.c.array,Role:a.c.array,Location:a.c.array,Tag:a.c.array,Autotag:a.c.array,Marker:a.c.array,indirect:a.c.boolean,Origin:a.c.object,requiresConsent:a.c.boolean},syncedRelations:{chapters:{relationClass:k,rootPropertyName:"Chapter",deferred:!0},preferences:{relationClass:l.c,rootPropertyName:"Preferences",deferred:!0},onDeck:()=>({relationClass:Z,rootPropertyName:"OnDeck",deferred:!0}),related(){const e={skipCache:!0};return this.relatedOptions&&i().extend(e,this.relatedOptions),{relationClass:r(17900).c,rootPropertyName:"RelatedHubs",deferred:!0,options:e}},popularLeaves:()=>({relationClass:r(15568).c,rootPropertyName:"PopularLeaves",deferred:!0}),extras:()=>({relationClass:r(15568).c,rootPropertyName:"Extras",deferred:!0,attrs:e=>({containerKey:M.c.join([e.key,"extras"])})}),concerts:{relationClass:A,rootPropertyName:"Concert",deferred:!0},stations:()=>({relationClass:r(22784).c,rootPropertyName:"Stations",deferred:!0}),transcodeSession:{relationClass:c,rootPropertyName:"TranscodeSession",deferred:!0}},derivedAttrs:{identifier(){return this.identifier},serverEntityID(){if(!this.state)return null;const e=this.get("source");if(e){const{serverIdentifier:t}=(0,g.c)(e);return(0,P.c)(I.qe,t)}return this.server?this.server.entityID():null},providerEntityID(){if(!this.state)return null;const e=this.get("source");if(e){const{providerIdentifier:t}=(0,g.c)(e);return(0,P.c)(I.SF,t,this.get("serverEntityID"))}return this.provider?this.provider.entityID():null},mediaTagPrefix(){return this.mediaTagPrefix},mediaTagVersion(){return this.mediaTagVersion},allowSync(){return this.allowSync},containerKey(){return this.containerKey},isLibraryItem(){return this.isLibraryItem(this.get("identifier"),this.get("key"))},isPlaylist(){return this.get("type")===w.yy&&!this.get("radio")},isFolder(){return/\/folder\?parent=/.test(this.get("key"))},isExtra(){return!!this.get("extraType")},isPremium(){const e=this.get("Media")||[];return i().any(e,(e=>e.premium))},hasRadioStation(){const e=this.get("stations");return!!e&&!!e.findWhere({playlistType:C.KI})},hasArtistTVStation(){const e=this.get("stations");return!!e&&!!e.findWhere({playlistType:C.im})},unviewedLeafCount(){const e=this.get("leafCount"),t=this.get("viewedLeafCount");if(e)return e-t},downloadUrl(){const e=this.get("Media");if(e&&1===e.length){const t=i().first(i().first(e).Part),r=t&&t.key;if(r)return()=>{const e=M.c.join(r,{download:1});return this.server.resolveUrl(e,{appendToken:!0})}}}},defaults:{isInUniversalWatchlist:!1,isInUniversalWatchlistFetched:!1,isStreamChangeInProgress:!1,isStreamDeleteInProgress:!1,isSettingsUpdating:!1,isDownloaded:!1,settingsUpdateError:null,rating:0,onAir:!1,skipDetails:!1,Media:[],Collection:[],Director:[],Producer:[],Writer:[],Studio:[],Genre:[],Mood:[],Country:[],Label:[],Channel:[],Role:[],Location:[],Autotag:[],Tag:[],requiresConsent:!1},fetch(e={}){return e.data&&(this._populatedParams=i().extend({},this._populatedParams,e.data)),e.usePopulatedParams&&(e.data=this._populatedParams),s.c.prototype.fetch.call(this,e)},augmentResponseText:(e,t)=>t===o.sH?(0,b.c)(e):e,augmentResponse(e,t){var r;let n=e[this.rootPropertyName];n&&(Array.isArray(n)&&(n=n[0]),["attribution","augmentationKey","librarySectionID","librarySectionTitle","librarySectionUUID"].forEach((t=>{n[t]||(n[t]=e[t])})),e.type===w.WC&&(n.dvrChannel={identifier:e.identifier||e.id,thumb:e.thumb,title:e.title,callSign:e.callSign})),this.responseContext.forEach((t=>{const r=e[t]||n&&n[t];void 0!==r&&this.setContext(t,r)}));const s=n||e,a=s.Related,o=s.OnDeck,c=s.Stations,l=s.Preferences,d=this.extractChildrenKey(s.key);if(d.childrenKey&&(s.childrenKey=d.childrenKey,s.key=d.key),s.Media=this.convertMediaItems(s.Media),s.Role=this.convertRole(s.Role),s.Marker=this.convertMarkers(s.Marker),!s.source&&this.server){const e=(0,y.c)({providerIdentifier:null==(r=this.provider)?void 0:r.get("identifier"),serverIdentifier:this.server.get("machineIdentifier")});s.source=e,s.sourceURI=`${e}${s.key}`}return a&&(s.RelatedHubs=i().compact([].concat(a.Hub,a.Directory))),o&&(s.OnDeck=o.Metadata),c&&(s.Stations=c.Metadata),l&&(s.Preferences=l.Setting),s.type===w.Ww&&s.childrenKey&&(s.type=w.Co),s.primaryGuid&&(s.addToWatchlistGuid=s.primaryGuid),s},extractChildrenKey(e){const t=/(.*)\/(children|items)$/.exec(e);let r;return t&&(r=e,e=t[1]),{childrenKey:r,key:e}},convertMediaItems(e){const t=S.c.parseArray(e);return i().each(t,(e=>{Y(e,["id"]),v.c.parseBoolean(e,["indirect","optimizedForStreaming","onAir","premium","premiere","selected"]),v.c.parseInteger(e,["duration","width","height","bitrate","audioChannels","proxyType","beginsAt","endsAt","beginOffset","startOffsetSeconds","endOffsetSeconds"]),null==e.id&&null==e.uuid&&(e.uuid=`${e.container}-${e.protocol}-${e.audioCodec}`),v.c.parseArray(e,"Overlay"),v.c.parseArray(e,"Part"),i().each(e.Overlay,(e=>{null!=e.duration&&(e.duration=parseInt(e.duration,10)),e.startTimeOffset=parseInt(e.startTimeOffset,10)})),i().each(e.Part,(e=>{Y(e,["id"]),null!=e.exists&&(e.exists=S.c.parseBoolean(e.exists)),null!=e.accessible&&(e.accessible=S.c.parseBoolean(e.accessible)),v.c.parseInteger(e,["duration","size"]),v.c.parseBoolean(e,"optimizedForStreaming"),v.c.parseEncodedString(e,"file"),v.c.parseArray(e,"Stream"),i().each(e.Stream,(e=>{Y(e,["id"]),v.c.parseBoolean(e,["anamorphic","selected","default","forced","timed","cabac","hasScalingMatrix","headerStripping"]),v.c.parseInteger(e,["index","streamType","duration","width","height","bitrate","bitDepth","level","refFrames","samplingRate","channels","minLines","offset"]),v.c.parseFloat(e,"frameRate")}))}))})),this.addNoneSubtitlesStreams(t)},convertRole(e){const t=S.c.parseArray(e);return i().each(t,(e=>{v.c.parseBoolean(e,["directory"])})),t},convertMarkers(e){const t=S.c.parseArray(e);return i().each(t,(e=>{v.c.parseInteger(e,["endTimeOffset","startTimeOffset"])})),t},addNoneSubtitlesStreams(e){const t=O.c.get("subtitles");return e.forEach((e=>{const r=e.Part,n="livetv"===e.origin;r&&r.forEach((r=>{if(!r.Stream)return;if(!n&&!(0,h.c)(e))return;const i=r.Stream.filter((e=>e.streamType===t.id));if(i.find((e=>e.id===p.K)))return;const s=i.find((e=>e.selected)),a={id:p.K,streamType:t.id,language:(0,E.c)("None")};s||(a.selected=!0),r.Stream.unshift(a)}))})),e},getDownloadUrl(e=0){const t=this.get("Media")[e];if(t){const e=i().first(t.Part),r=e&&e.key;if(r){const e=M.c.join(r,{download:1});return this.server.resolveUrl(e,{appendToken:!0})}}},getFilepath(e=0){const t=this.get("Media")[e];if(t){const e=i().first(t.Part);if(e)return e.file}},getLocation(){const e=this.get("Location");return e.length?i().first(e).path:this.getFilepath()},getMediaKey(){const e=i().first(this.get("Media"));if(e){const t=i().first(e.Part);if(t)return t.key}return this.get("key")},isLibraryItem(e,t){return!(this.provider&&!this.provider.get("isLibraryProvider"))&&(n=t,(r=e)?f._u(r,f.Qh):/^(\/sync\/[\w\d-/]*)?\/library\//.test(n));var r,n},isPlexMusicItem(){const e=this.section;return e&&e.get("agent")===u.mc}}),ee=Z},85916:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11364),i=r(16872),s=r(96420),a=r(76400),o=r(17312),c=r(96504),l=r(71684),d=r(14224),u=r(18168),p=r(6084);const m=n.c.extend({name:"PlaylistItemModel",context:["server","provider","playlist"],entityType:p.cD,entityID(e=this.state){return(0,u.c)(this.entityType,e.playlistItemID||e.key,this.server.entityID())},idAttribute:"playlistItemID",syncedAttrs:{playlistItemID:i.c.string,key:i.c.string,type:i.c.string},syncedRelations:{metadataItem:{relationClass:d.c,deferred:!0}},augmentResponse:e=>({playlistItemID:e.playlistItemID,key:e.key,type:e.type,metadataItem:e})}),h=l.c.extend({name:"PlaylistItemCollection",context:["server","provider","playlist"],model:m}),y=n.c.extend({mixins:[s.c],name:"PlaylistItemListModel",context:["server","provider","playlist","includeExternalMedia"],idAttribute:"key",collectionName:"metadataItems",url(){let e=this.getPaginatedUrl(this.get("containerKey"));return this.includeExternalMedia&&(e=c.c.join(e,{includeExternalMedia:1})),e},sessionAttrs:{containerKey:i.c.string,currentPageStart:i.c.integer,currentPageSize:i.c.integer,populatedRange:i.c.object},syncedAttrs:{totalSize:i.c.integer},syncedRelations:{metadataItems:{relationClass:h,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()},augmentResponseText:(e,t)=>t===a.sH?(0,o.c)(e):e})},60784:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(71684),i=(r(79268),r(96504)),s=r(11364),a=r(16872);const o=s.c.extend({name:"SubtitleModel",rootPropertyName:"Stream",syncedAttrs:{id:a.c.integer,key:a.c.string,streamType:a.c.integer,codec:a.c.string,index:a.c.integer,language:a.c.string,languageCode:a.c.string,score:a.c.float,providerTitle:a.c.string,title:a.c.string,displayTitle:a.c.string,reason:a.c.string,hearingImpaired:a.c.boolean,perfectMatch:a.c.boolean,downloaded:a.c.boolean}}),c=n.c.extend({name:"SubtitlesCollection",context:["server","key","language","title","mediaItemID","minimumScore","hearingImpaired","forced"],model:o,url(){const e={language:this.language};return this.title&&(e.title=this.title),this.mediaItemID&&(e.mediaItemID=this.mediaItemID),this.minimumScore&&(e.minimumScore=this.minimumScore),null!=this.hearingImpaired&&(e.hearingImpaired=this.hearingImpaired),null!=this.forced&&(e.forced=this.forced),i.c.join([this.key,"/subtitles"],e)}})},20844:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(37588),i=r.n(n),s=r(79268);const a={fetch(){return(0,s.c)(!1,"A model or collection with a controlled populate promise cannot be fetched directly"),this.populatePromise},isPopulating(){return!!this.populatePromise&&"pending"===this.populatePromise.state()},_resetPopulate(){return this.isPopulating()||(this._populateDeferred=i().Deferred(),this.populatePromise=this._populateDeferred.promise()),this.populatePromise},_resolvePopulate(){return"resolved"===this.populatePromise.state()||("rejected"===this.populatePromise.state()&&this._resetPopulate(),this._populateDeferred.resolveWith(this,[this])),this.populatePromise},_rejectPopulate(){return"rejected"===this.populatePromise.state()||("resolved"===this.populatePromise.state()&&this._resetPopulate(),this._populateDeferred.rejectWith(this,[this])),this.populatePromise}}},96420:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52972),c=r(96504);const l={getCollectionName(){return this.collectionName||"items"},getCollection(){return this.get(this.getCollectionName())},getTotalSize(){return this.get("totalSize")||this.get("populatedRange").size},getPaginatedUrl(e){const t=this.get("currentPageStart"),r=this.get("currentPageSize");if(null!=t||null!=r){const n={"X-Plex-Container-Start":t||0,"X-Plex-Container-Size":r||0};return c.c.join(e,n)}return e},getCollectionChangeEvents(){const e=this.getCollectionName();return[`change:${e}.update`,`change:${e}.reset`].join(" ")},startPopulatedRangeMonitor(){const e=this.getCollectionName();this.updatePopulatedRange(),this.on(this.getCollectionChangeEvents(),this.updatePopulatedRange,this),this.on(`change:${e}.destroy`,this.decrementTotalSize,this)},stopPopulatedRangeMonitor(){const e=this.getCollectionName();this.off(this.getCollectionChangeEvents(),this.updatePopulatedRange,this),this.off(`change:${e}.destroy`,this.decrementTotalSize,this)},fetchRange(e){const t=a().extend({},e,{remove:!1});return e.prepend&&(t.at=0),this.set({currentPageStart:e.start,currentPageSize:e.size}),this.fetch(t).promise()},populateRange(e){const t=this.getCollection(),r=this.get("populatedRange");let n=o.c.difference(e,r)[0];if(!n)return i().Deferred().resolve().promise();if(n=o.c.degap(n,r),this.isPopulating()){const e=this.get("currentPageStart")!==n.start,t=this.get("currentPageSize")!==n.size;if(!e&&!t)return this.populatePromise;this.abortPendingPopulate()}if(e.reloadThreshold&&n.size>e.reloadThreshold)return t.reset(),this.populateRange(a().omit(e,"reloadThreshold"));const s=a().extend({},e,n,{prepend:n.start<r.start});return this.fetchRange(s)},repopulateRange(e=0){const t=this.get("populatedRange").end;return this.set({currentPageStart:0,currentPageSize:Math.max(t,e)}),this.abortPendingPopulate(),this.fetch()},updatePopulatedRange(){const e=this.get("currentPageStart"),t=this.get("populatedRange").start,r=this.get("populatedRange").size,n=this.getCollection().length;let i;i=n?r?Math.min(t,null==e?1/0:e):e||t:0,this.set("populatedRange",{start:i,end:i+n,size:n})},decrementTotalSize(){const e=this.get("totalSize");e>0&&this.set("totalSize",e-1)}}},46748:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11364),i=r(16872),s=r(22784),a=r(14224),o=r(76400),c=r(80500),l=r(17312),d=r(18168),u=r(6084);const p=n.c.extend({name:"LiveTVSessionModel",context:["server","provider"],entityType:u.iy,entityID(e=this.state){return(0,d.c)(this.entityType,e.key||this.cid,this.server.entityID())},idAttribute:"key",rootPropertyName:"MediaSubscription",url(){return`/media/subscriptions/${this.get("key")}`},sessionAttrs:{dvrID:i.c.integer,channelIdentifier:i.c.string,channelCallSign:i.c.string,channelTitle:i.c.string,activityUUID:i.c.string,currentPosition:i.c.integer,nextPosition:i.c.integer,lastSeekPosition:i.c.integer,startedAt:i.c.integer,captureBuffer:i.c.object},syncedAttrs:{key:i.c.string,type:i.c.integer,title:i.c.string},syncedRelations:{grabOperation:{relationClass:c.c,rootPropertyName:"MediaGrabOperation",deferred:!0},timeline:{relationClass:s.c,rootPropertyName:"Timeline",deferred:!0}},sessionRelations:{airingMetadataItem:{relationClass:a.c,deferred:!0},upNextMetadataItem:{relationClass:a.c,deferred:!0}},defaults:{nextPosition:null,lastSeekPosition:null},augmentResponseText:(e,t)=>t===o.sH?(0,l.c)(e):e,augmentResponse(e){const t=e[this.rootPropertyName]||e,r=t.Timeline;return r&&(t.Timeline=r.Metadata),e}})},25116:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);function s(e,t,r){return void 0===r||i().isObject(t)?t:r}},16608:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(37588),i=r.n(n),s=r(71684),a=r(70776),o=r(17736),c=r(99028);const l=s.c.extend({name:"ProviderCollection",context:["server"],model:c.c,url:"/media/providers",responseType(){return(0,a.c)(this.server)},fetch(){const e=this.server;let t;return t=e.get("mediaProviders")||e.get("isCloud")?s.c.prototype.fetch.apply(this,arguments):i().Deferred().resolve(this,"").promise(),t.then((t=>{(0,o.c)(t,e)})),t}})},53272:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(71684),i=r(99396),s=r(90044),a=r(42728),o=r(11364),c=r(16872);const l=o.c.extend({name:"ProviderActionModel",context:["server","provider"],syncedAttrs:{id:c.c.string,key:c.c.string,reverseKey:c.c.string,requires:c.c.string}}),d=n.c.extend({name:"ProviderActionCollection",context:["server","provider"],model:l}),u=o.c.extend({name:"ProviderGridChannelFilterModel",context:["server","provider"],idAttribute:"key",syncedAttrs:{key:c.c.string,genreRatingKey:c.c.string,title:c.c.string}}),p=n.c.extend({name:"ProviderGridChannelFilterCollection",context:["server","provider"],model:u});var m=r(90784),h=r(15364);const y=o.c.extend({name:"PivotModel",idAttribute:"key",syncedAttrs:{key:c.c.string.isRequired,type:c.c.oneOf(h.oB,h._K,h.Mr).isRequired,id:c.c.string,title:c.c.string.isRequired,context:c.c.string.isRequired,requires:c.c.string,libraryKey:c.c.string}}),g=n.c.extend({name:"PivotCollection",model:y}),f=o.c.extend({name:"ProviderDirectoryModel",context:["server","provider"],syncedAttrs:{id:c.c.string,key:c.c.string,hubKey:c.c.string,title:c.c.string,icon:c.c.string,type:c.c.string,subtype:c.c.string,agent:c.c.string,refreshing:c.c.boolean,updatedAt:c.c.integer,scannedAt:c.c.integer,context:c.c.string},syncedRelations:{pivots:{relationClass:g,rootPropertyName:"Pivot",deferred:!0}}}),v=n.c.extend({name:"ProviderDirectoryCollection",context:["server","provider"],model:f,modelId:e=>e.key||e.hubKey}),b=o.c.extend({name:"ProviderFeatureModel",context:["server","provider"],sessionAttrs:{isSettingsPending:c.c.boolean,isSettingsPopulated:c.c.boolean,settingsError:c.c.object},syncedAttrs:{id:c.c.string,key:c.c.string,reverseKey:c.c.string,scrobbleKey:c.c.string,unscrobbleKey:c.c.string,type:c.c.string,flavor:c.c.string,requires:c.c.string,automaticLibraryFolders:c.c.boolean,public:c.c.boolean,storageTotal:c.c.integer},syncedRelations:{directories:{relationClass:v,rootPropertyName:"Directory",deferred:!0},settings:{relationClass:m.c,rootPropertyName:"Setting",deferred:!0},actions:{relationClass:d,rootPropertyName:"Action",deferred:!0,setOptions:{remove:!1}},gridChannelFilters:{relationClass:p,rootPropertyName:"GridChannelFilter",deferred:!0},promotedGridChannelFilters:{relationClass:p,rootPropertyName:"PromotedGridChannelFilter",deferred:!0}},defaults:{isSettingsPending:!0,isSettingsPopulated:!1}}),S=n.c.extend({name:"ProviderFeatureCollection",context:["server","provider"],model:b,modelId:e=>e.type===s.c.ACTION?e.id:e.type,augmentResponse(e){let t=e.find((e=>e.type===s.c.ACTIONS));return null==t||Array.isArray(t.Action)||(t.Action=t.Action?[t.Action]:[]),null==t&&(t={Action:[],type:s.c.ACTIONS},e.push(t)),e.forEach((e=>{if(e.type===s.c.TIMELINE&&(null!=e.scrobbleKey||null!=e.unscrobbleKey)){const{scrobbleKey:r,unscrobbleKey:n}=e;t.Action.push({id:i.cR,key:r,reverseKey:n}),delete e.scrobbleKey,delete e.unscrobbleKey}if(e.type===s.c.RATE){const{key:r}=e;t.Action.push({id:i.c7,key:r}),delete e.key}if(e.type===s.c.ACTION&&(null!=e.key||null!=e.reverseKey)){const{key:r,reverseKey:n}=e;t.Action.push({id:e.id,key:r,reverseKey:n}),delete e.key,delete e.reverseKey}e.type===s.c.ACTIONS&&e.Action.forEach((e=>{e.id!==i.iy&&e.id!==i.Up||(e.requires=a.S0)})),e.type===s.c.SETTINGS&&(e.requires=a.S0)})),e}})},99028:(e,t,r)=>{"use strict";r.d(t,{y:()=>Z,c:()=>ee});var n=r(37588),i=r.n(n),s=r(52180),a=r(11364),o=r(16872),c=r(25116),l=r(76400),d=r(60148),u=r(37660),p=r(90044),m=r(35860),h=r(54073),y=r(42728),g=r(52563),f=r(84508),v=r(15364),b=r(21784),S=r(19948),P=r(59396),I=r(12612),E=r(1868),w=r(96504),C=r(33372);function O(e){return{key:e.hubKey,type:v.oB,title:(0,P.c)("Recommended"),context:f.DISCOVER_PIVOT}}function M(e,t){return{key:(0,S.c)(e.id,t),libraryKey:e.key,type:v._K,title:(0,P.c)("Library"),context:f.LIBRARY_PIVOT,isContent:!0}}function T(e){const t=I.GG(I.sl);return{key:w.c.join([e.key,"all"],{type:t.id}),type:v._K,title:(0,P.c)("Collections"),context:f.COLLECTIONS_PIVOT}}function D(e,t){const r=e.key.match(/\/library\/sections\/(\w+)/)[1],n=I.GG(I.yy);return w.c.join("/playlists/all",{type:n.id,playlistType:t,sectionID:r})}function k(e,t){return{key:D(e,t),type:v._K,title:(0,P.c)("Playlists"),context:f.PLAYLISTS_PIVOT}}function x(e){return e&&-1!==e.split(",").indexOf(b.W)}function A(e,t){return e&&e.some((e=>e.type===t))}function R(e,t,r){return r.type===e&&(null==t&&null==r.subtype||null!=t&&r.subtype===t)}function N(e,t){return/\/library\/sections\/(\w+)/.test(t.key)&&R(e,null,t)}var L=r(30496),j=r(18168),U=r(6084),F=r(22308),V=r(44768),_=r(90012),W=r(53272),B=Object.defineProperty,H=Object.defineProperties,z=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))q.call(t,r)&&Q(e,r,t[r]);if(G)for(var r of G(t))K.call(t,r)&&Q(e,r,t[r]);return e},Y=(e,t)=>H(e,z(t));function X(e){const t=(0,s.WI)("appModel").get("drmType"),r=Y($({},(0,g.c)(t)),{"X-Plex-Text-Format":(0,d.c)(e),"X-Plex-Provider-Version":"5.1"}),n=(i=y.Af,null==(a=(0,s.WI)("appModel").get("user").get("features"))?void 0:a.findWhere({uuid:i}));var i,a;return m._u(e,m.Im)&&(r["X-Plex-Provider-Version"]=n?"6.6":"6.3"),r}const J=U.SF;function Z({identifier:e,serverEntityID:t}){return(0,j.c)(J,e,t)}const ee=a.c.extend({name:"ProviderModel",context:["server"],entityType:J,entityID(e=this.state){return Z({identifier:e.identifier,serverEntityID:this.server.entityID()})},idAttribute:"identifier",rootPropertyName:"MediaProvider",responseType:l.qS,url(){return this.get("baseURL")},mergeStrategy:(e,t,r)=>"protocols"===e&&r&&r.length>0?r:(0,c.c)(e,t,r),syncedAttrs:{id:o.c.integer,parentID:o.c.integer,identifier:o.c.string,providerIdentifier:o.c.string,baseURL:o.c.string,title:o.c.string,sourceTitle:o.c.string,types:o.c.list,protocols:o.c.list,subscriptions:o.c.boolean,icon:o.c.string,epgSource:o.c.string,source:o.c.string},sessionAttrs:{isPending:o.c.boolean,isPopulated:o.c.boolean,error:o.c.object},syncedRelations:{features:{relationClass:W.c,rootPropertyName:"Feature",options(){return{provider:this}},setOptions:{remove:!1}}},derivedAttrs:{isLibraryProvider(){return m._u((0,L.c)(this.get("identifier"),this.get("providerIdentifier")),m.Qh)},metricsIdentifier(){const e=this.get("providerIdentifier")||this.get("identifier");return m._u(e,m._0)?e.split(":")[0]:e}},populate(){return this.get("isPopulated")?i().Deferred().resolve(this).promise():a.c.prototype.populate.apply(this,arguments)},resolveUrl(e,t){const r=$({},t);return this.url()&&(r.baseUrl=this.url()),this.server.resolveUrl(e,r)},getXHROptions(e,t={}){const r=(0,V.c)(e)?e:w.c.join([this.get("baseURL"),e]),n=this.get("providerIdentifier")||this.get("identifier"),i=this.server.getXHROptions(r,Y($({},t),{headers:$($({},X(n)),t.headers)}));return this.server.get("isCloud")&&(delete i.headers["X-Plex-Username"],delete i.headers["X-Plex-Device-Name"]),i},defaults:()=>({protocols:[],isPending:!0,isPopulated:!1,error:null}),augmentResponse(e){if(e.MediaProvider&&(e=e.MediaProvider),!e.Feature)return e;const t=m._u(e.identifier,m.Qh),r=(0,s.WI)("appModel").get("user");return e.Feature.forEach((n=>{if(n.type===p.c.SETTINGS&&(n.Setting=[]),!n.Directory||n.type!==p.c.CONTENT)return;if(r.get("isOptOutsPopulated")&&n.type===p.c.CONTENT&&m._u(e.identifier,m.Im)){const e=r.get("optOuts"),t=!r.get("isFullUser"),i=e.findWhere({key:_.s.IncludeDiscoverSource});(t?(null==i?void 0:i.get("value"))!==_.M.OptIn:(null==i?void 0:i.get("value"))===_.M.OptOut)&&(n.Directory=n.Directory.filter((e=>e.id!==u.qU)))}let i;if(!n.key&&t&&(n.key="/library/sections"),n.Directory.forEach(((t,r)=>{const n=t.key||t.hubKey;!t.id&&n&&(t.id=(0,F.c)(n)),t.type===I.yy&&(i=r),t.Pivot||(t.Pivot=function(e,t,r){return e.hubKey||"/playlists"===e.key?N(I.iI,e)?[O(e),M(e,I.iI),k(e,E.KI)]:N(I.MOVIE,e)?[O(e),M(e,I.MOVIE),T(e),k(e,E.im)]:N(I.M7,e)?[O(e),M(e,I.M7),T(e),k(e,E.im)]:N(I.Ww,e)?[O(e),{key:C.eo.TIMELINE,type:v.Mr,title:(0,P.c)("Timeline"),context:f.TIMELINE_PIVOT},M(e,I.Ww),k(e,E.Ww)]:x(t)&&A(r,p.c.SUBSCRIBE)?[{key:e.hubKey,type:v.oB,title:(0,P.c)("Recommended"),context:f.DVR_DISCOVER_PIVOT},{key:C.eo.GUIDE,type:v.Mr,title:(0,P.c)("Guide"),context:f.DVR_GUIDE_PIVOT},{key:C.eo.RECORDING_SCHEDULE,type:v.Mr,title:(0,P.c)("DVR Schedule"),context:f.DVR_SCHEDULE_PIVOT}]:x(t)||A(r,p.c.GRID)?[{key:e.hubKey,type:v.oB,title:(0,P.c)("Recommended"),context:f.DVR_DISCOVER_PIVOT},{key:C.eo.GUIDE,type:v.Mr,title:(0,P.c)("Guide"),context:f.DVR_GUIDE_PIVOT}]:R(I.yy,null,e)?[{key:w.c.join(e.key,{playlistType:E.KI}),type:v._K,title:(0,P.c)("Music"),context:f.PLAYLISTS_PIVOT},{key:w.c.join(e.key,{playlistType:E.im}),type:v._K,title:(0,P.c)("Video"),context:f.PLAYLISTS_PIVOT},{key:w.c.join(e.key,{playlistType:E.Ww}),type:v._K,title:(0,P.c)("Photo"),context:f.PLAYLISTS_PIVOT}]:[]:[]}(t,e.protocols,e.Feature)),Array.isArray(t.Pivot)||(t.Pivot=[t.Pivot]),t.Pivot=t.Pivot.filter((e=>"view://discover/friends"!==e.key)),t.Pivot.forEach((e=>{e.id&&e.id.match(/\.(saved|watchlist|playlists)$/)&&(e.requires=y.S0)}))})),i&&i<n.Directory.length-1){const e=n.Directory[i];n.Directory.splice(i,1),n.Directory.push(e)}})),t&&!e.Feature.find((e=>e.type===p.c.CONTINUE_WATCHING))&&e.Feature.push({type:p.c.CONTINUE_WATCHING,key:h.i}),e}})},90784:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(71684),i=r(70776),s=r(11364),a=r(16872);const o=s.c.extend({name:"ProviderCountryModel",context:["server","provider"],idAttribute:"code",rootPropertyName:"Country",syncedAttrs:{code:a.c.string,title:a.c.string,postalCodeFormat:a.c.string,flavor:a.c.string}});var c=r(90044);const l=n.c.extend({name:"ProviderCountryCollection",context:["server","provider"],url(){return`${this.provider.get("features").findWhere({type:c.c.LOCATION}).get("key")}/countries`},model:o}),d=s.c.extend({name:"ProviderSettingOptionsModel",context:["server","provider"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:a.c.string,title:a.c.string,type:a.c.string,selected:a.c.boolean}}),u=n.c.extend({name:"ProviderSettingOptionsCollection",context:["server","provider"],model:d});var p=r(33040);const m={int:p.c.parseInteger,bool:p.c.parseBoolean,double:p.c.parseFloat},h=s.c.extend({name:"ProviderSettingModel",context:["server","provider"],rootPropertyName:"Setting",url(){return this.get("key")},sessionAttrs:{isOptionsPending:a.c.boolean,isOptionsPopulated:a.c.boolean,optionsError:a.c.object,isLocationsPending:a.c.boolean,isLocationsPopulated:a.c.boolean,locationsError:a.c.object,isLineupPending:a.c.boolean,isLineupPopulated:a.c.boolean,lineupError:a.c.object},syncedAttrs:{country:a.c.string,countryLabel:a.c.string,hidden:a.c.boolean,id:a.c.string,key:a.c.string,label:a.c.string,multiselect:a.c.boolean,postalCode:a.c.string,required:a.c.boolean,selectedCount:a.c.integer,summary:a.c.string,type:a.c.string,value:a.c.oneOfType(a.c.string,a.c.boolean,a.c.float),min:a.c.float,max:a.c.float,step:a.c.float,enumValues:a.c.string,default:a.c.string},sessionRelations:{locations:{relationClass:l}},syncedRelations:{settings:()=>({relationClass:r(90784).c,rootPropertyName:"Setting",deferred:!0}),options:{relationClass:u,options:e=>({url:e.key})}},defaults:{isOptionsPending:!0,isOptionsPopulated:!1,optionsError:null,isLocationsPending:!0,isLocationsPopulated:!1,locationsError:null,isLineupPending:!0,isLineupPopulated:!1,lineupError:null},augmentResponse(e){const t=m[e.type];return t&&(e.value=t(e.value)),e}}),y=n.c.extend({name:"ProviderSettingCollection",context:["server","provider"],url:"/settings",responseType(){return(0,i.c)(this.server)},model:h})},76400:(e,t,r)=>{"use strict";r.d(t,{q2:()=>l,qS:()=>c,sH:()=>o});var n=r(95720),i=r.n(n),s=r(33040);function a(e,t){return t||(t={}),i().defaults(t,{typeName:e,parse:i().bind(s.c.parseType,s.c,e)})}const o=a("xml",{accept:"application/xml"}),c=a("json",{accept:"application/json"}),l=a("text")},37920:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(52180),i=r(43876),s=r(78332),a=r(16872),o=r(59501),c=r(9852),l=r(38828),d=r(37588),u=r.n(d),p=r(95720),m=r.n(p);var h=r(1072),y=r(55672),g=r(71684),f=r(99112),v=r(76400),b=r(96504),S=r(16580);const P=g.c.extend({name:"ResourceCollection",model:S.c,context:["server"],responseType:v.qS,url(){const e={};return f.c.allowHttpsMediaServerConnections&&(e.includeHttps=1),f.c.allowMediaServerRelayConnections&&(e.includeRelay=1),f.c.allowIPv6ServerConnections&&(e.includeIPv6=1),b.c.join("/api/v2/resources",e)}}),{connectionTestResults:I,promiseStates:E}=o.default,w=o.default.extend({name:"CloudServerModel",connectionTestUrl:(0,c.wn)("/monitoring/health"),sessionAttrs:{connectionTestResult:a.c.oneOf(I.PENDING,I.CONNECTED,I.UNAVAILABLE,I.UNAUTHORIZED).isRequired,promiseState:a.c.oneOf(E.PENDING,E.RESOLVED,E.REJECTED).isRequired,isShared:a.c.boolean.isRequired,isBundled:a.c.boolean.isRequired,isCloud:a.c.boolean.isRequired,isMerged:a.c.boolean.isRequired,isDownForMaintenance:a.c.boolean.isRequired,isResourcesPending:a.c.boolean.isRequired,isResourcesPopulated:a.c.boolean.isRequired,hasFailedResources:a.c.boolean.isRequired,accessToken:a.c.string,baseUrl:a.c.string.isRequired,hasEventConnection:a.c.boolean},sessionRelations:{activeConnection:{relationClass:y.c,deferred:!0},connections:{relationClass:h.c,options(){return{server:this}}},resources:{relationClass:P,options(){return{server:this}}}},defaults(){const e=(0,c.wn)();return{connectionTestResult:I.PENDING,promiseState:E.PENDING,isShared:!1,isBundled:!1,isCloud:!0,isMerged:!1,isDownForMaintenance:!1,isResourcesPending:!1,isResourcesPopulated:!1,hasFailedResources:!1,friendlyName:"plex.tv",baseUrl:e,hasEventConnection:!1}},testAllConnections(){const e=this.get("connections");(0,l.c)("[Connections] Testing all %s connection(s) for %s",e.length,this.get("debugName"));return function(e){if(!e.length)return u().Deferred().reject().promise();const t=u().Deferred();let r=e.length;return m().each(e,(function(e){e.done((function(){r--,t.resolveWith(this,arguments)})).fail((function(){r--,0===r&&t.reject()}))})),t.promise()}(e.map((e=>this.testConnection(e))))},testConnection(e){const t={server:this,connection:e,url:this.connectionTestUrl};return i.c.execute("testServerConnection",t).done(this.onConnectionTestSuccess.bind(this)).fail(this.onConnectionTestError.bind(this))},abortConnectionTest(e){const t={server:this,connection:e,url:this.connectionTestUrl};i.c.execute("abortServerConnectionTest",t)},deauthenticate(){this.get("resources").clear(),this._reject({connectionTestResult:this.get("connectionTestResult"),accessToken:null})},onConnectionTestSuccess(e){const t=this.get("connections").getBestConnection();l.c.info("[Connections] Active connection to %s is %s",this.get("debugName"),t.id),this.startCapturingChangeEvents(),this.set({isDownForMaintenance:!1,connectionTestResult:I.CONNECTED,activeConnection:t}),this.releaseCapturedChangeEvents()},onConnectionTestError(e,t){e.get("isAborted")||this.get("connections").hasOnlyFailedConnections()&&this._reject({isDownForMaintenance:503===t.status})}});(0,s.c)(w,(function(){return{relationClass:(0,n.WI)("CloudServerFlexModel"),options:{server:this}}}));const C=w},1072:(e,t,r)=>{"use strict";r.d(t,{U:()=>l,c:()=>d});var n=r(95720),i=r.n(n),s=r(57496),a=r(71684),o=r(99112),c=r(55672);const l=(e,t)=>!e.get("relay")&&t.get("relay")?e:!t.get("relay")&&e.get("relay")||!e.get("isLoopback")&&t.get("isLoopback")?t:!t.get("isLoopback")&&e.get("isLoopback")?e:!e.get("isPrivate")&&t.get("isPrivate")?t:!t.get("isPrivate")&&e.get("isPrivate")?e:!e.get("isHttps")&&t.get("isHttps")?t:(!t.get("isHttps")&&e.get("isHttps"),e),d=a.c.extend({name:"ConnectionCollection",context:["server"],model:c.c,getBestConnection(){const e=o.c.allowHttpsMediaServerConnections,t=!this.server||this.server.get("isCloud")||e,r=this.filter((e=>e.get("isConnected")&&(t||!e.get("isHttps"))));if(r.length)return i().reduce(r,l)},hasBetterConnectionCandidates(){const e=this.server&&this.server.get("activeConnection");return this.some((t=>{const r=t.get("isUntested")||t.get("isPending"),n=!e||t!==e&&l(t,e)===t;return r&&n}))},hasOnlyFailedConnections(){return this.every((e=>e.get("isFailed")))},hasFailedEveryDirectConnection(){return this.where({relay:!1}).every((e=>e.get("isFailed")))},hasMultiplePrivateV4Subnets(){let e;return this.some((t=>{const r=t.get("address");if(t.get("isPrivate")&&(0,s.Gm)(r)){const t=(0,s.Ud)(r);return e||(e=t),e!==t}}))}})},55672:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(95720),i=r.n(n),s=r(57496),a=r(11364),o=r(16872),c=r(23156),l=r(79268),d=r(96504),u=r(71684);const p=a.c.extend({name:"ConnectionSourceModel",context:["server"],sessionAttrs:{id:o.c.string}}),m=u.c.extend({name:"ConnectionSourceCollection",context:["server"],model:p}),h=o.c.boolean.isRequired,y=a.c.extend({name:"ConnectionModel",context:["server"],idAttribute:"uri",sessionAttrs:{currentTest:o.c.custom((e=>Array.isArray(e)&&e.every((e=>i().isFunction(e.abort))))),testState:o.c.oneOf(c._g,c.Si,c.iU,c.Q9,c.YV,c.wp).isRequired,isBundled:h,isFallback:h},sessionRelations:{sources:{relationClass:m}},syncedAttrs:{uri:o.c.string,scheme:o.c.string,address:o.c.string,port:o.c.string,relay:o.c.boolean},derivedAttrs:{isUntested(){return this.get("testState")===c._g},isPending(){return this.get("testState")===c.Si},isConnected(){return this.get("testState")===c.iU},isUnauthorized(){return this.get("testState")===c.Q9},isUnavailable(){return this.get("testState")===c.YV},isFailed(){return this.get("isUnauthorized")||this.get("isUnavailable")},isAborted(){return this.get("testState")===c.wp},isLoopback(){const e=this.get("address");return"localhost"===e||(0,s.gd)(e)},isPrivate(){return this.get("isLoopback")||(0,s.Az)(this.get("address"))},isHttps(){return"https"===this.get("scheme")},isSecure(){return this.get("isLoopback")||this.get("isHttps")},isPlexDirect(){return/\.plex\.direct:/.test(this.get("uri"))}},defaults:{testState:c._g,isBundled:!1,isFallback:!1,relay:!1},url(){return this.get("uri")},constructor:function(e,t){const r=i().clone(e);i().isObject(e)&&!e.uri&&((0,l.c)(e.scheme&&e.address,`A server connection requires either a uri or a scheme and address. ${e.scheme}://${e.address}`),r.uri=`${e.scheme}://${e.address}`,e.port&&(r.uri+=":"+e.port)),a.c.prototype.constructor.call(this,r,t)},initialize(){this.listenTo(this.get("sources"),"remove reset",this.onSourcesChange)},augmentResponse(e){const t=e.protocol;return t?i().extend({},e,{scheme:t}):e},getAddressFromUri(){return d.c.parseUrl(this.get("uri")).hostname},getIpAddressFromPlexDirectAddress(){return function(e){if(/\.plex\.direct$/.test(e)){const t=e.indexOf(".");t>0&&(e=(e=e.substring(0,t)).replace(/-/g,"."))}return e}(this.get("address"))},getLoopbackAttributes(){return{scheme:"http",address:"127.0.0.1",port:this.get("port")}},hasSource(e){return this.get("sources").some((t=>e&&t.get("id")===e))},onSourcesChange(){this.get("sources").length||this.trigger("destroy",this,this.collection)}})},16580:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(30004),i=r(11364),s=r(16872),a=r(1072);const o=i.c.extend({name:"ResourceModel",context:["server"],idAttribute:"clientIdentifier",urlRoot:"/api/v2/resources",syncedAttrs:{clientIdentifier:s.c.string,name:s.c.string,sourceTitle:s.c.string,accessToken:s.c.string,product:s.c.string,productVersion:s.c.string,platform:s.c.string,platformVersion:s.c.string,device:s.c.string,provides:s.c.list,owned:s.c.boolean,home:s.c.boolean,synced:s.c.boolean,presence:s.c.boolean,publicAddressMatches:s.c.boolean,httpsRequired:s.c.boolean,createdAt:s.c.integer,lastSeenAt:s.c.integer,ownerId:s.c.integer},syncedRelations:{connections:{relationClass:a.c}},augmentResponse(e){"string"==typeof e.createdAt&&(e.createdAt=(0,n.c)(e.createdAt)),"string"==typeof e.lastSeenAt&&(e.lastSeenAt=(0,n.c)(e.lastSeenAt));const t=e.Device;return t?(t.connections=t.Connection,delete t.Connection,t):e}})},64892:(e,t,r)=>{"use strict";r.d(t,{Ge:()=>c,OO:()=>y,QR:()=>l,Qp:()=>h,Yr:()=>d,_I:()=>p,cp:()=>g,kv:()=>m,sP:()=>u});var n=r(11364),i=r(16872),s=r(76400),a=r(38828);const o="ok",c="unknown",l="waiting",d="mapped",u="ok",p="connecting",m="disconnecting",h="unreachable",y="",g=n.c.extend({context:["server"],url:"/myplex/account",responseType:s.qS,sessionAttrs:{remoteAccessState:i.c.oneOf(p,m,h,u,y)},syncedAttrs:{username:i.c.string,mappingState:i.c.oneOf(c,l,"failed",d),mappingError:i.c.oneOf("badauth","unreachable","myplexgone","publisherror","doublenat","jumboframes",""),signInState:i.c.oneOf("none","unknown","invalid",o),publicAddress:i.c.string,publicPort:i.c.integer,privateAddress:i.c.string,privatePort:i.c.integer,subscriptionActive:i.c.boolean,subscriptionState:i.c.string},derivedAttrs:{signedIn(){return this.get("signInState")===o},isWaiting(){const e=this.get("remoteAccessState");return e===p||e===m}},defaults:{signedIn:!1,mappingState:null,mappingError:null,signInState:null,publicAddress:null,publicPort:null,privateAddress:null,privatePort:null},isNew(){return!this.get("signedIn")},augmentResponse(e){let t=e.MyPlex;t||(a.c.warn(`[Account] Failed to get reachable information for account - received ${JSON.stringify(e)}`),t={});const r=t.signInState===o;r||(t.username=null);const n=!r||t.mappingError,i=!n&&t.mappingState===d;return n?t.remoteAccessState=h:i&&(t.remoteAccessState=u),t}})},59501:(e,t,r)=>{"use strict";r.d(t,{Yj:()=>ee,C1:()=>Z,ot:()=>$,S8:()=>re,default:()=>ie});var n=r(95720),i=r.n(n),s=r(52180),a=r(76220),o=r(43876),c=r(22316),l=r(11364),d=r(78332),u=r(16872),p=r(99112),m=r(71832),h=r(31824),y=r(96420),g=r(70776),f=r(96504),v=r(71684),b=r(37588),S=r.n(b),P=r(56792),I=r(85916);const E=l.c.extend({name:"PlaylistModel",context:["server","containerKey"],idAttribute:"ratingKey",rootPropertyName:"Playlist",urlRoot:"/playlists",saveUrl(){return this.server.supports("truePlaylistsPath")?i().result(this,"url"):`/library/metadata/${this.id}`},sessionAttrs:{isPlaylist:u.c.boolean,isLibraryItem:u.c.boolean},syncedAttrs:{ratingKey:u.c.string,key:u.c.string,guid:u.c.string,type:u.c.string,playlistType:u.c.string,title:u.c.string,titleSort:u.c.string,composite:u.c.string,summary:u.c.string,smart:u.c.boolean,allowSync:u.c.boolean,duration:u.c.integer,durationInSeconds:u.c.integer,leafCount:u.c.integer,addedAt:u.c.integer,updatedAt:u.c.integer},sessionRelations:{children:{relationClass:I.c,attrs(e){const t={};return"audio"===e.playlistType&&(t.includeRelated=1),{containerKey:f.c.join(["/playlists",e.ratingKey,"items"],t)}},options(){return{playlist:this}}}},defaults:{isPlaylist:!0,isLibraryItem:!0},findItem(e){return this.get("children").getCollection().findWhere({playlistItemID:e})},moveItem(e,t){if(void 0===e)return;const r=t?{after:t}:{},n=f.c.join([i().result(this,"url"),"/items/",e,"/move"],r),s=i().extend(this.server.getXHROptions(n),{type:"PUT"}),a=S().ajax(s),o=this.get("children").getCollection(),c=this.findItem(e);o.remove(c);const l=this.findItem(t),d=l?o.indexOf(l)+1:0;return o.add(c,{at:d}),a},removeItem(e){if(void 0===e)return;const t=f.c.join([i().result(this,"url"),"/items/",e]),r=i().extend(this.server.getXHROptions(t),{type:"DELETE"}),n=S().ajax(r);n.then((e=>{this.set(this.parse(e))}));const s=this.get("children").getCollection(),a=this.findItem(e);return s.remove(a),s.trigger("destroy",a,s),n},addContent(e,t){const r=this.isNew()?"POST":"PUT",n=[i().result(this,"url")],s={};this.isNew()?(s.type=this.get("playlistType"),s.title=this.get("title"),s.smart=this.get("smart")?1:0):n.push("/items"),e.get("playQueueID")?s.playQueueID=e.get("playQueueID"):s.uri=P.c.uri(e,t);const a=f.c.join(n,s),o=i().extend(e.server.getXHROptions(a),{type:r}),c=S().ajax(o);return c.then((e=>{this.set(this.parse(e))})),c.promise()},isLibraryItem:(e,t)=>!0,isPlexMusicItem:()=>!1}),w=v.c.extend({name:"PlaylistCollection",context:["server","containerKey"],model:E,url(){return this.containerKey}}),C=l.c.extend({mixins:[y.c],name:"PlaylistListModel",context:["server","section"],idAttribute:"key",collectionName:"playlists",responseType(){return(0,g.c)(this.server)},url(){return this.getPaginatedUrl(i().result(this,"containerKey"))},containerKey(){const e=this.section.get("currentType"),t=this.section.get("currentSort"),r={type:15};return r.sort=t?t.id+":"+(t.get("direction")||"asc"):"titleSort:asc",e&&(r.playlistType=e),this.section.get("onlyDumb")&&(r.smart=0),f.c.join("/playlists/all",r)},sessionAttrs:{isPlaylistList:u.c.boolean,currentPageStart:u.c.integer,currentPageSize:u.c.integer,populatedRange:u.c.object},syncedAttrs:{totalSize:u.c.integer},syncedRelations:{playlists:{relationClass:w,rootPropertyName:"Playlist",options(e){return{containerKey:i().result(this,"containerKey")}},setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({isPlaylistList:!0,populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()},augmentResponse:e=>(e.Metadata&&(e.Playlist=e.Metadata,delete e.Metadata),e)}),O=m.c.extend({name:"PlaylistsSectionModel",defaults(){return{pseudo:!0,currentType:0,sorts:new h.c([],{section:this,server:this.server}),items:new C({},{section:this,server:this.server})}},url:()=>"/playlists"});var M=r(94944),T=r(20844),D=r(25116),k=r(16608),x=r(54268),A=r(19508),R=r(65723),N=r(79268),L=r(38828),j=r(18168),U=r(6084),F=r(84080),V=r(44768),_=r(1072),W=r(55672),B=r(95420),H=Object.defineProperty,z=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))G.call(t,r)&&K(e,r,t[r]);if(z)for(var r of z(t))q.call(t,r)&&K(e,r,t[r]);return e};const $={PENDING:"pending",CONNECTED:"connected",UNAVAILABLE:"unavailable",UNAUTHORIZED:"unauthorized"},Y={PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},X={SECONDARY:"secondary"},J=["camera_upload","content_filter","home","lyrics","music_videos","pass","premium_music_metadata","sync","trailers"],Z="ok",ee="none",te=U.qe;function re({machineIdentifier:e}){return(0,j.c)(te,e)}const ne=l.c.extend({mixins:[T.c],name:"ServerModel",entityType:te,entityID(e=this.state){return re({machineIdentifier:e.machineIdentifier||this.cid})},idAttribute:"machineIdentifier",connectionTestTimeout:1e4,uiTimeout:3e3,responseType(){return(0,g.c)(this)},mergeStrategy:D.c,cache:new A.c,persistInCache:!0,sessionAttrs:{connectionTestResult:u.c.oneOf($.PENDING,$.CONNECTED,$.UNAVAILABLE,$.UNAUTHORIZED).isRequired,promiseState:u.c.oneOf(Y.PENDING,Y.RESOLVED,Y.REJECTED).isRequired,sections:u.c.instanceOf(M.c).isRequired,playlists:u.c.instanceOf(O).isRequired,isShared:u.c.boolean.isRequired,isBundled:u.c.boolean.isRequired,isCloud:u.c.boolean.isRequired,isMerged:u.c.boolean.isRequired,isEmbedded:u.c.boolean.isRequired,isInstallingServerUpdate:u.c.boolean.isRequired,isBlockingUI:u.c.boolean,superToken:u.c.string,accessToken:u.c.string,sourceTitle:u.c.string,publicAddressMatches:u.c.boolean,httpsRequired:u.c.boolean,presence:u.c.boolean,home:u.c.boolean,createdAt:u.c.integer,lastSeenAt:u.c.integer,ownerId:u.c.integer,hasEventConnection:u.c.boolean,serverClass:u.c.oneOf(X.SECONDARY),onlyXML:u.c.boolean,isProvidersPending:u.c.boolean.isRequired,isProvidersPopulated:u.c.boolean.isRequired,providersError:u.c.object},sessionRelations:{activeConnection:{relationClass:W.c,deferred:!0},connections:{relationClass:_.c,options(){return{server:this}}}},syncedRelations:{providers:{relationClass:k.c,rootPropertyName:"MediaProvider",options(){return{server:this}}}},syncedAttrs:{machineIdentifier:u.c.string,friendlyName:u.c.string,startState:u.c.string,version:u.c.string,platform:u.c.string,platformVersion:u.c.string,sync:u.c.boolean,backgroundProcessing:u.c.boolean,multiuser:u.c.boolean,transcoderLyrics:u.c.boolean,myPlex:u.c.boolean,myPlexMappingState:u.c.string,myPlexSigninState:u.c.oneOf(Z,ee,"invalid"),myPlexSubscription:u.c.boolean,myPlexUsername:u.c.string,transcoderPhoto:u.c.boolean,transcoderAudio:u.c.boolean,transcoderVideo:u.c.boolean,transcoderVideoRemuxOnly:u.c.boolean,transcoderSubtitles:u.c.boolean,transcoderActiveVideoSessions:u.c.integer,allowMediaDeletion:u.c.boolean,allowChannelAccess:u.c.boolean,allowSync:u.c.boolean,diagnostics:u.c.list,updater:u.c.boolean,isDesktop:u.c.boolean,photoAutoTag:u.c.boolean,itemClusters:u.c.boolean,updatedAt:u.c.integer,countryCode:u.c.string,ownerFeatures:u.c.list,mediaProviders:u.c.integer,maxUploadBitrate:u.c.integer,maxUploadBitrateReason:u.c.string,maxUploadBitrateReasonMessage:u.c.string,streamingBrainABRVersion:u.c.integer,livetv:u.c.integer,audiobook:u.c.boolean},derivedAttrs:{debugName(){const e=this.get("machineIdentifier"),t=this.get("connections"),r=1===t.length&&t.at(0).get("isLoopback");let n=this.get("friendlyName");return!n&&this.get("isBundled")?n="[Bundled]":!n&&r&&(n="[Loopback]"),n||(e?`[${e}]`:"[Anonymous]")},shortVersion(){return(0,F.c)(this.get("version"))},isConnected(){return this.get("connectionTestResult")===$.CONNECTED},isUnavailable(){return this.get("connectionTestResult")===$.UNAVAILABLE},isUnauthorized(){return this.get("connectionTestResult")===$.UNAUTHORIZED},isPending(){return this.get("promiseState")===Y.PENDING},isPrivateConnection(){const e=this.get("activeConnection");return!(!e||!e.get("isPrivate"))},isResolved(){return this.get("promiseState")===Y.RESOLVED},isRejected(){return this.get("promiseState")===Y.REJECTED},isRelayed(){const e=this.get("activeConnection");return!(!e||!e.get("relay"))},isSecure(){const e=this.get("activeConnection");return!(!e||!e.get("isSecure"))},hasHttpsConnections(){return!!this.get("connections").findWhere({isHttps:!0})},hasFallbackConnections(){return!!this.get("connections").findWhere({isFallback:!0})},isMobileServer(){return this.get("serverClass")===X.SECONDARY},isFullServer(){return!this.get("isCloud")&&!this.get("isMobileServer")&&!this.get("isEmbedded")},isFullOwnedServer(){return this.get("isFullServer")&&!this.get("isShared")},isPrimaryEligible(){return!(!p.c.allowMobileServers&&this.get("isMobileServer")||!this.get("machineIdentifier")||this.get("isUnauthorized")||this.get("isCloud")||this.get("isEmbedded"))},isOutOfDate(){return!this.get("isMobileServer")&&!this.isVersionOrNewer("1.18.3")},isClaimed:function(){return this.get("isConnected")?this.get("myPlexSigninState")===Z:void 0},hasManualConnection(){return this.get("connections").some((e=>e.get("sources").some((e=>/^manual/.test(e.id)))))},hasAdaptiveBitrate(){return this.get("streamingBrainABRVersion")>=3},shared(){return this.get("isShared")},bundled(){return this.get("isBundled")},cloud(){return this.get("isCloud")},merged(){return this.get("isMerged")},connected(){return this.get("connectionTestResult")===$.PENDING?null:this.get("isConnected")},available(){return this.get("connectionTestResult")===$.PENDING?null:!this.get("isUnavailable")},authorized(){return this.get("connectionTestResult")===$.PENDING?null:this.get("isResolved")},relayed(){return this.get("isRelayed")}},defaults(){return{connectionTestResult:$.PENDING,promiseState:Y.PENDING,sections:new M.c([],{server:this}),playlists:new O({},{server:this}),isShared:!1,isBundled:!1,isCloud:!1,isMerged:!1,isEmbedded:!1,isInstallingServerUpdate:!1,isBlockingUI:!1,hasEventConnection:!1,sync:!1,backgroundProcessing:!1,allowChannelAccess:!1,updater:!0,ownerFeatures:[],audiobook:!1,isProvidersPending:!0,isProvidersPopulated:!1,providersError:null}},url(e=this.get("activeConnection")){(0,N.c)(e,"An active or manual connection is required for a server url");let t=i().result(e,"url");return/\/$/.test(t)||(t+="/"),t},initialize(){this._reset(),this.on("change:machineIdentifier",this.onMachineIdentifierChange,this),this.listenTo(this.get("connections"),{remove:this.onConnectionRemove,reset:this.onConnectionsReset})},uninitialize(){this.off("change:machineIdentifier",this.onMachineIdentifierChange,this),this.stopListening()},updateEntity(){if(!this.get("isMerged"))return l.c.prototype.updateEntity.apply(this,arguments)},fetch(){return c.cp.Model.prototype.fetch.apply(this,arguments)},resolveUrl(e,t={}){if((0,V.c)(e))return e;let r;r=t.useRelativeUrl?this.get("isMobileServer")?`http://127.0.0.1:${this.getLoopbackPort()}/`:"":t.baseUrl||this.url(t.connection);const n=this.get("accessToken"),s=i().extend({},t.params);return t.appendHeaders&&i().defaults(s,this.getHeaders()),t.appendToken&&n&&(s["X-Plex-Token"]=n),f.c.join([r,e],s)},getXHROptions(e,t={}){var r=t,{headers:n,baseUrl:s}=r,a=((e,t)=>{var r={};for(var n in e)G.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&z)for(var n of z(e))t.indexOf(n)<0&&q.call(e,n)&&(r[n]=e[n]);return r})(r,["headers","baseUrl"]);return Q({url:this.resolveUrl(e,{baseUrl:s}),dataType:"text",headers:i().extend(this.getHeaders(),n),allowHeadersInUrl:!0,allowBlacklistedMethodHeaders:this.supports("allowBlacklistedMethodHeaders")},a)},getHeaders(){const e=a.c.getInstance(),t=i().clone(e),r=this.get("accessToken");r&&(t["X-Plex-Token"]=r);const n=(0,s.WI)("settingFinder").find("language");n&&(t["X-Plex-Language"]=n,t["Accept-Language"]=n);const o=(0,s.WI)("sessionStats").get("sessionId");return o&&(t["X-Plex-Session-Id"]=o),t},addConnection(e){e.sources||(e.sources=[{id:"internal"}]);const t=this.get("connections"),r=new W.c(e),n=t.get(r.id);return n?(n.get("sources").set(e.sources,{remove:!1}),n):t.add(e)},hasSource(e){return this.get("connections").some((t=>t.hasSource(e)))},removeSource(e){const t=this.get("connections");let r=t.length-1;for(;r>=0;)t.at(r).get("sources").remove(e),r--},testAllConnections(){const e=this.get("connections");return(0,L.c)("[Connections] Testing all %s connection(s) for %s",e.length,this.get("debugName")),this._reset(),e.each((e=>{const t=!e.get("relay"),r=!e.get("isUntested");(t||r)&&this.testConnection(e)})),this.populatePromise},testOnlyUntestedConnections(){return this.get("connections").each((e=>{const t=!e.get("relay"),r=e.get("isUntested"),n=e.get("isAborted");t&&(r||n)&&this.testConnection(e)})),this.populatePromise},testOnlyUntestedRelayConnections(){return this.get("connections").each((e=>{const t=e.get("relay"),r=e.get("isUntested");t&&r&&this.testConnection(e)})),this.populatePromise},testConnection(e,t={}){return t.server=this,t.connection=e,this.get("promiseState")===Y.REJECTED&&this._reset(),o.c.execute("testServerConnection",t).done(this.onConnectionTestSuccess.bind(this)).fail(this.onConnectionTestError.bind(this))},abortAllConnectionTests(){const e=this.get("connections");(0,L.c)("[Connections] Aborting all pending connection tests for",this.get("debugName")),e.each((e=>{this.abortConnectionTest(e)}))},abortConnectionTest(e){const t={server:this,connection:e};o.c.execute("abortServerConnectionTest",t)},populateIdentity(e){if(this._identityPromise)return this._identityPromise;const t=o.c.execute("populateServerIdentity",{server:this,connection:e});return t.done((e=>{this.set("machineIdentifier",e)})),this._identityPromise=t,t},updateCacheKey(){const e=this.get("debugName"),t=this.cacheKey(this.attributes),r=this.cache.get(t);if(r){const n=r.get("debugName");L.c.warn("[Identity] %s and %s (cached) collide",e,n),r.get("isConnected")||!this.get("isConnected")?((0,L.c)("[Identity] Merging %s into %s (cached)",e,n),r.merge(this)):((0,L.c)("[Identity] Merging %s (cached) into %s",n,e),this.merge(r),this.cache.store(this,t))}else this.cache.store(this,t)},merge(e){e.set("isMerged",!0),e.get("isBundled")&&this.set("isBundled",!0),e.get("connections").each((e=>{this.addConnection(e.toJSON())})),this.collection&&(this.collection.remove(e.cid,{silent:!0}),this.collection._byId[this.id]=this,this.collection.trigger("remove",e,this.collection),this.collection.trigger("update",this.collection)),this.cache.remove(e),p.c.shouldCreateStateTree&&this.updateEntity()},hasOwnerFeature(e){if(this.supports("ownerFeatures")){const t=this.get("ownerFeatures");return!!(t&&t.indexOf(e)>-1)}return!!this.get("myPlexSubscription")&&J.indexOf(e)>-1},supports(e){const t=this.get(e);if(i().isBoolean(t))return t;const r=B.default[e];return null!=r&&this.isVersionOrNewer(r)},isVersionOrNewer(e){const t=this.get("shortVersion");return!e||!t||(0,R.c)(t,e)},hasRegression(e){if(!e)return!1;const t=this.isVersionOrNewer(e.introduced),r=e.resolved&&this.isVersionOrNewer(e.resolved);return t&&!r},hasOtherLoopbackServer(){return!!this.collection&&this.collection.hasLoopbackServer()},getLoopbackPort(){const e=this.get("connections").findWhere({isPrivate:!0});return e?e.get("port"):"32400"},authenticate(e){this._resolve({accessToken:e})},deauthenticate(){this._reject({accessToken:null})},_reset(){this.startCapturingChangeEvents(),this.set("promiseState",Y.PENDING),this._resetPopulate(),this.releaseCapturedChangeEvents()},_resolve(e){const t=i().extend({connectionTestResult:$.CONNECTED,promiseState:Y.RESOLVED},e);this.startCapturingChangeEvents(),this.set(t),p.c.shouldCreateStateTree&&this.updateState(),this._resolvePopulate(),this.releaseCapturedChangeEvents()},_reject(e){const t=this.get("connections");t.hasOnlyFailedConnections()&&L.c.warn("[Connections] All connections to %s failed",this.get("debugName"));const r=t.findWhere({isUnauthorized:!0})?$.UNAUTHORIZED:$.UNAVAILABLE,n=i().extend({connectionTestResult:r,promiseState:Y.REJECTED},e);this.startCapturingChangeEvents(),this.set(n),this._rejectPopulate(),this.releaseCapturedChangeEvents()},_checkActiveConnection(){const e=this.get("activeConnection"),t=this.get("connections");if(e&&!t.contains(e)){const e=t.getBestConnection();e?this.set({activeConnection:e}):this.testAllConnections()}},onMachineIdentifierChange(e,t){this.collection?this.listenToOnce(this.collection,"change:machineIdentifier",(function(){this.updateCacheKey()})):this.updateCacheKey()},onConnectionRemove(e,t){t.length?this._checkActiveConnection():(this.trigger("change:connections.remove",e,t),this.trigger("change:connections.change",this,t),this.trigger("destroy",this,this.collection))},onConnectionsReset(e,t){e.length?this._checkActiveConnection():(this.trigger("change:connections.reset",e,t),this.trigger("change:connections.change",this,e),this.trigger("destroy",this,this.collection))},onConnectionTestSuccess(e,t){const r=this.get("connections").getBestConnection();if(r!==this.get("activeConnection")&&L.c.info("[Connections] Active connection to %s is %s",this.get("debugName"),r.id),this._resolve(Q({activeConnection:r},t)),p.c.allowLoopbackDiscovery){const e=this.get("connections"),t=this.get("activeConnection"),r=t.get("isPrivate"),n=!!e.findWhere({isLoopback:!0});!r||n||this.hasOtherLoopbackServer()||((0,L.c)("[Connections] Adding possible loopback connection for",this.get("debugName")),this.addConnection(t.getLoopbackAttributes()))}},onConnectionTestError(e,t){if(e.get("isAborted"))return;const r=this.get("connections");!e.get("isHttps")||e.get("isUnauthorized")||e.get("relay")||(0,s.WI)("appStore").dispatch((0,x.oL)({serverEntityID:this.entityID(),address:e.get("address"),port:e.get("port")})),!this.id&&e.get("isUnauthorized")&&this.populateIdentity(e),r.hasOnlyFailedConnections()?this.id||!this._identityPromise?this._reject():this._identityPromise.always((()=>{r.hasOnlyFailedConnections()&&this._reject()})):r.hasFailedEveryDirectConnection()&&this.testOnlyUntestedRelayConnections()}},{connectionTestResults:$,promiseStates:Y,serverClasses:X});(0,d.c)(ne,(function(){return{relationClass:(0,s.WI)("ServerFlexModel"),options:{server:this}}}));const ie=ne},52482:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"SectionOverviewModel",context:["server"],rootPropertyName:"Section",syncedAttrs:{id:s.c.integer,key:s.c.string,type:s.c.string,title:s.c.string}}),o=n.c.extend({name:"SectionOverviewCollection",context:["server"],model:a}),c=i.c.extend({name:"ServerOverviewModel",context:["server"],idAttribute:"machineIdentifier",rootPropertyName:"Server",urlRoot:"/api/servers",syncedAttrs:{machineIdentifier:s.c.string,name:s.c.string,address:s.c.string,port:s.c.string,version:s.c.string,createdAt:s.c.integer,updatedAt:s.c.integer},syncedRelations:{sections:{relationClass:o,rootPropertyName:"Section"}}}),l=n.c.extend({name:"ServerOverviewCollection",context:["server"],model:c})},97036:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(71684),i=r(11364),s=r(16872),a=r(33040);const o="bool",c="enum";function l(e,t){switch(e){case"int":case c:return a.c.parseInteger(t);case o:return a.c.parseBoolean(t);default:return t}}const d=i.c.extend({idAttribute:"id",url:"/:/prefs",context:["server"],sessionAttrs:{isSaving:s.c.boolean},syncedAttrs:{id:s.c.string,label:s.c.string,default:s.c.oneOfType(s.c.integer,s.c.string,s.c.boolean,s.c.array),summary:s.c.string,value:{type:s.c.oneOfType(s.c.integer,s.c.string,s.c.boolean,s.c.array),save:!0},type:s.c.oneOf("int","text",o,c,"double"),group:s.c.string,advanced:s.c.boolean,option:s.c.string,hidden:s.c.boolean,enumValues:s.c.array,values:s.c.string},defaults:{isSaving:!1,type:"string",summary:"",label:"",group:""},augmentResponse(e){if(e.value=l(e.type,e.value),e.advanced=l(o,e.advanced),e.hidden=l(o,e.hidden),e.enumValues&&!Array.isArray(e.enumValues)&&(e.enumValues=e.enumValues.split("|").map((t=>{const[r,n=r]=t.split(":");return{label:n,value:l(e.type,r)}}))),e.type===c&&e.values&&!Array.isArray(e.values)){let t=0;e.enumValues=e.values.split("|").map((e=>({label:e,value:t++})))}return e},getSaveParams(e){const t=i.c.prototype.getSaveParams.apply(this,arguments);return e&&!e.hasOwnProperty("value")?(Object.keys(t).forEach((t=>delete e[t])),t):{[this.get("id")]:t.value}}}),u=n.c.extend({name:"ServerSettingCollection",context:["server"],url:"/:/prefs",model:d,augmentResponse:e=>e.Setting?(Array.isArray(e.Setting)?e.Setting:[e.Setting]).filter((e=>e.id)):[]})},95420:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n={customChannels:"1.32.1",multipleEditions:"1.28.1",playlistArtEditing:"1.24.5",gridPagination:"1.24.4",playlistPosterEditing:"1.23.5",v4DVRSetup:"1.22.2",gracenoteAttribution:"1.21.1",firstCharacterKeySortDirection:"1.20.4",pivotIDs:"1.20.4",freeLiveTVDVRSettings:"1.20.2",augmentedHubsInRelatedHubs:"1.19.5",simpleRelatedKey:"1.19.2",transientTokenProxy:"1.15.4",mediaProvidersServerRoot:"1.13.10",streamDisplayTitles:"1.13.8",bundledWebAppNewSettingsRoutes:"1.13.8",softSubtitlesWithDirectPlay:"1.13.4",truePlaylistsPath:"1.9.3",optimizeDatabaseActivity:"1.4.2",asyncCheckFiles:"1.4.0",json:"1.8.0",allowBlacklistedMethodHeaders:"1.2.1",decisionEndpoint:"1.0.3",defaultSections:"0.9.17.3",ownerFeatures:"0.9.17.0",replaceTranscodeTarget:"0.9.17.0",relay:"0.9.15.0",claimServer:"0.9.14.2",searchSpecificType:"0.9.14.2",linkedYearMetadata:"0.9.14.0",streamReady:"0.9.14.0",syncOriginalQuality:"0.9.14.0",allPartsStreamSelection:"0.9.12.5",sharedChannels:"0.9.12.5",shortenTranscodeURL:"0.9.12.5",editSimilarArtists:"0.9.12.2",neuterRedirect:"0.9.12.0",audioAsVideo:"0.9.12.0",compositeDelete:"0.9.12.0",batchEdit:"0.9.12.0",premiumMusic:"0.9.12.0",transientToken:"0.9.12.0",softSubtitles:"0.9.12.0",sharedSyncStatus:"0.9.11.14",reachability:"0.9.11.14",photoPlayQueues:"0.9.11.12",publicNowPlaying:"0.9.11.3",labels:"0.9.11.2",updater:"0.9.11.1",playItemsBatchAdd:"0.9.9.16",playlists:"0.9.9.13",imageFilters:"0.9.9.13",hubFilterSigns:"0.9.9.12",cancelAllUpdates:"0.9.9.10",playQueues:"0.9.9.6",sectionSettings:"0.9.9.6",hubFilters:"0.9.9.2",streamingMKV:"0.9.9.16",chunkedHTTP:"0.9.9.3",sharedSync:"0.9.9.3",dash:"0.9.8.6",specificMediaDeletion:"0.9.7.23",sharedSettings:"0.9.7.23",syncNotifications:"0.9.7.23",universalMusicTranscoder:"0.9.8.3",universalTranscoder:"0.9.7.17",sync:"0.9.7.10",artworkUpload:"0.9.7.9",firstRunPref:"0.9.7.3",timelineState:"0.9.7.2",cleanBundles:"0.9.7.0",advancedFilters:"0.9.7.0",search:"0.9.7.0",merge:"0.9.7.0",splitApart:"0.9.7.0",viewStateSync:"1.27.2.0"}},41932:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(95720),i=r.n(n),s=r(46235),a=r(11364),o=r(76400),c=r(79268);const l=a.c.extend({name:"AbstractStorageModel",responseType:o.qS,save(e,t,r={}){const n=this.attributes;let s;if(null==e||i().isObject(e)?(s=e,r=t):(s={})[e]=t,r=i().extend({validate:!0},r),s&&!r.wait){if(!this.set(s,r))return!1}else if(!this._validate(s,r))return!1;s&&r.wait&&(this.attributes=i().extend({},n,s));const a=this._getStorageAdapter().getInstance().excludeDefaults,o=this.toJSON({syncedOnly:!0,excludeDefaults:!1!==a}),c=this._serialize(o),l=this._getStorageAdapter().set(this._getStorageKey(),c);return l.done((()=>{this.attributes=n,this.trigger("sync",this,n,r)})),l.fail((e=>{this.trigger("error",this,e,r)})),s&&r.wait&&(this.attributes=n),l},destroy(e={}){e.wait||this.trigger("destroy",this,this.collection,e);const t=this._getStorageAdapter().remove(this._getStorageKey());return t.done((t=>{e.wait&&this.trigger("destroy",this,this.collection,e),this.trigger("sync",this,t,e)})),t.fail((t=>{this.trigger("error",this,t,e)})),t},sync(){this._logError("does not support syncing to a server")},_getStorageAdapter:()=>s.c,_getStorageKey(){const e=i().result(this,"storageKey");if(!e)throw new Error(`${this.name} requires a \`storageKey\` property`);return e},_fetch(e={}){const t=this._getStorageAdapter().get(this._getStorageKey());return t.done((t=>{t&&this.set(this.parse(t)),this.trigger("sync",this,t,e)})),t.fail((t=>{this.trigger("error",this,t,e)})),t},_serialize(e){let t="";try{t=JSON.stringify(e)}catch(e){this._logError("serialization error: "+e.message)}return t},_warnUnsupportedOptions(e){e.parse&&this._logError("does not support the `parse` option. The response from storage is always parsed."),e.success&&this._logError("does not support a `success` callback. Use the returned promise."),e.error&&this._logError("does not support an `error` callback. Use the returned promise.")},_logError(e){let t;try{t=this._getStorageKey()}catch(e){t="no storageKey"}(0,c.c)(!1,`${this.name} (${t}) ${e}`)}})},87168:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(94484),i=r(54318),s=r(51928),a=r(96388),o=r(30004),c=r(63612),l=r(31228),d=r(95720),u=r.n(d),p=r(11364),m=r(16872),h=r(76400),y=r(76372),g=r(17312);const f=p.c.extend({name:"CalendarModel",context:["server"],url:"/media/subscriptions/scheduled",sessionAttrs:{visibleDays:m.c.integer,time:m.c.integer},syncedRelations:{scheduled:{relationClass:y.c,rootPropertyName:"MediaGrabOperation"}},derivedAttrs:{startTime(){const e=this.get("visibleDays"),t=(0,a.c)(this.get("time"));let r=(0,c.c)(t);return e>1&&(r=(0,l.c)(r,1)),(0,o.c)(r)},endTime(){const e=this.get("visibleDays"),t=(0,a.c)(this.get("time"));let r=(0,s.c)(t);return e>1&&(r=(0,n.c)(r,e-2)),(0,o.c)(r)},daysOfWeek(){const e=(0,a.c)(this.get("startTime")),t=(0,a.c)(this.get("endTime")),r=(0,i.c)(t,e);return u().times(Math.min(r+1,7),(t=>(0,o.c)((0,n.c)(e,t))))},days(){const e=(0,a.c)(this.get("startTime")),t=(0,a.c)(this.get("endTime")),r=(0,i.c)(t,e);return u().times(r+1,(t=>(0,o.c)((0,n.c)(e,t))))},firstEvent(){return this.get("scheduled").first()},lastEvent(){return this.get("scheduled").last()},hasPastEvents(){const e=this.get("firstEvent");return!!e&&e.get("beginsAt")<this.get("startTime")},hasFutureEvents(){const e=this.get("lastEvent");return!!e&&e.get("beginsAt")>this.get("endTime")}},defaults:()=>({visibleDays:7,time:(0,o.c)(Date.now())}),augmentResponseText:(e,t)=>t===h.sH?(0,g.c)(e):e})},76372:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(71684),i=r(80500);const s=n.c.extend({name:"MediaGrabOperationCollection",context:["server","provider"],model:i.c,comparator(e){const t=e.get("mediaItem");if(t)return t.beginsAt-(t.startOffsetSeconds||0)}})},80500:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(52180),i=r(11364),s=r(16872),a=r(99112),o=r(14224),c=r(30564),l=r(33040),d=r(18168),u=r(6084),p=r(10340);const m=i.c.extend({name:"MediaGrabOperationModel",context:["server","provider"],idAttribute:"key",rootPropertyName:"MediaGrabOperation",url(){return this.get("key")},syncedAttrs:{mediaSubscriptionID:s.c.string,provider:s.c.string,identifier:s.c.string,mediaIndex:s.c.integer,channelTitle:s.c.string,status:s.c.string,error:s.c.string,linkedKey:s.c.string,key:s.c.string,rolling:s.c.boolean},sessionAttrs:{isLibraryMetadataItemPending:s.c.boolean,isLibraryMetadataItemPopulated:s.c.boolean,libraryMetadataItemError:s.c.object},syncedRelations:{metadataItem:{relationClass:o.c,rootPropertyName:"Metadata"},conflicts:()=>({relationClass:r(76372).c,deferred:!0})},sessionRelations:{libraryMetadataItem:{relationClass:o.c,deferred:!0}},derivedAttrs:{mediaItem(){const e=this.get("mediaIndex");return(this.get("metadataItem").get("Media")||[])[e]},beginsAt(){const e=this.get("mediaItem");return e&&e.beginsAt},endsAt(){const e=this.get("mediaItem");return e&&e.endsAt}},defaults:{rolling:!1,isLibraryMetadataItemPending:!0,isLibraryMetadataItemPopulated:!1,libraryMetadataItemError:null},augmentResponse(e){let t=e;if(t[this.rootPropertyName]&&(t=t[this.rootPropertyName]),t.Conflicts&&(t.conflicts=t.Conflicts.MediaGrabOperation,delete t.Conflicts),!a.c.shouldCreateStateTree)return t;const r=t.Metadata,i=l.c.parseArray(r.Media),s=l.c.parseInteger(t.mediaIndex),o=(0,d.c)(u.Qv,r.key,this.server.entityID()),m=(0,n.WI)("appModel"),h=(0,p.a)(m,u.Qv,o);if(h){const e=h.get("Media").map(c.c),r=i.map(c.c)[s],n=e.findIndex((e=>r===e));t.mediaIndex=-1!==n?n:s+e.length}return t}})},64764:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(71684),i=r(89400);const s=n.c.extend({name:"MediaSettingCollection",context:["server","provider"],model:i.c,getSaveParams(){return this.reduce(((e,t)=>(e[t.id]=t.get("value"),e)),{})}})},89400:(e,t,r)=>{"use strict";r.d(t,{c:()=>c,o:()=>a});var n=r(11364),i=r(16872),s=r(33040);const a={INT:"int",TEXT:"text",BOOL:"bool",DOUBLE:"double"};function o(e,t){switch(e){case a.INT:case a.ENUM:return s.c.parseInteger(t);case a.BOOL:return s.c.parseBoolean(t);case a.DOUBLE:return s.c.parseFloat(t);default:return t}}const c=n.c.extend({name:"MediaSettingModel",context:["server","provider"],idAttribute:"id",rootPropertyName:"Setting",syncedAttrs:{id:i.c.string,advanced:i.c.boolean,default:i.c.oneOfType(i.c.integer,i.c.string,i.c.boolean),hidden:i.c.boolean,group:i.c.string,label:i.c.string,summary:i.c.string,type:i.c.oneOf(a.INT,a.TEXT,a.BOOL,a.ENUM,a.DOUBLE),value:i.c.oneOfType(i.c.integer,i.c.float,i.c.string,i.c.boolean),min:i.c.float,max:i.c.float,step:i.c.float,enumValues:i.c.array},augmentResponse:e=>(e.default=o(e.type,e.default),e.value=o(e.type,e.value),e.enumValues&&(e.enumValues=e.enumValues.split("|").map((t=>{const[r,n=r]=t.split(":");return{label:decodeURIComponent(n),value:o(e.type,r)}}))),e),parseAndSetValue(e){this.set("value",o(this.get("type"),e))}})},90358:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(71684),i=r(76400),s=r(29377),a=r(17312),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e,t,r){if(Array.isArray(e))return e.map((e=>h(e,t,r)));if((0,s.c)(e))for(const n in e){const i=e[n];let s;t[n]?(s=r,delete e[n]):s=n,e[s]=h(i,t,r)}return e}const y=function(e,t){let r=t&&t.includeDirectories?["Directory",...a.o]:a.o;return r=r.reduce(((e,t)=>{return r=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},e),c(r,l({[t]:t}));var r}),{}),h(e,r,"Metadata")};var g=r(96504),f=r(64504);const v=n.c.extend({name:"MediaSubscriptionCollection",context:["server"],instanceOptions:[...n.c.prototype.instanceOptions,"includeDirectories","includeGrabs","includePreferences","includeStorage","includeTarget"],model:f.c,url(){const e={};return this.includeGrabs&&(e.includeGrabs=1),this.includePreferences&&(e.includePreferences=1),this.includeStorage&&(e.includeStorage=1),this.includeTarget&&(e.includeTarget=1),g.c.join("/media/subscriptions",e)},augmentResponseText(e,t){return t===i.sH?(0,a.c)(e,{includeDirectories:!!this.includeDirectories}):e},augmentResponse(e,t){return t===i.qS?y(e,{includeDirectories:!!this.includeDirectories}):e}})},64504:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(11364),i=r(16872),s=r(22784),a=r(25116),o=r(76400),c=r(17312),l=r(18168),d=r(6084),u=r(76372),p=r(64764);const m=n.c.extend({name:"MediaSubscriptionHintModel",context:["server","provider"],syncedAttrs:{guid:i.c.string,grandparentGuid:i.c.string,title:i.c.string,type:i.c.string,subtype:i.c.string,grandparentTitle:i.c.string,index:i.c.integer,parentIndex:i.c.integer,year:i.c.string,grandparentYear:i.c.integer,originallyAvailableAt:i.c.string,thumb:i.c.string,parentThumb:i.c.string,grandparentThumb:i.c.string,ratingKey:i.c.string,source:i.c.string,parentTitle:i.c.string,parentYear:i.c.string}});var h=r(14224);const y=n.c.extend({name:"MediaSubscriptionTargetModel",context:["server","provider"],syncedRelations:{metadata:{relationClass:h.c,rootPropertyName:"Metadata",deferred:!0}}});var g=Object.defineProperty,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const P=n.c.extend({name:"MediaSubscriptionModel",context:["server","provider"],entityType:d.y$,entityID(e=this.state){return(0,l.c)(this.entityType,e.key||this.cid,this.server.entityID())},idAttribute:"key",rootPropertyName:"MediaSubscription",urlRoot:"/media/subscriptions",mergeStrategy:a.c,syncedAttrs:{key:i.c.string,type:i.c.integer,provider:i.c.string,targetLibrarySectionID:{type:i.c.string,save:!0},targetSectionLocationID:{type:i.c.string,save:!0},title:i.c.string,selected:i.c.boolean,parameters:i.c.string,createdAt:i.c.integer,storageTotal:i.c.integer},syncedRelations:{hint:{relationClass:m,rootPropertyName:"Metadata",deferred:!0},target:{relationClass:y,rootPropertyName:"Target",deferred:!0},grabOperations:{relationClass:u.c,rootPropertyName:"MediaGrabOperation",deferred:!0},prefs:{relationClass:p.c,rootPropertyName:"Setting",deferred:!0,save:!0},timeline:{relationClass:s.c,rootPropertyName:"Timeline",deferred:!0}},augmentResponseText:(e,t)=>t===o.sH?(0,c.c)(e):e,augmentResponse(e){const t=e[this.rootPropertyName]||e,r=t.Timeline;return r&&(t.Timeline=r.Metadata),e},getSaveParams(){const e=n.c.prototype.getSaveParams.apply(this,arguments),{Setting:t}=e;return((e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e})({prefs:t},((e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(e,["Setting"]))}})},44412:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(71684),i=r(76400),s=r(17312),a=r(64504);const o=n.c.extend({name:"MediaSubscriptionTemplateCollection",context:["server","provider"],url:"/media/subscriptions/template",model:a.c,augmentResponseText:(e,t)=>t===i.sH?(0,s.c)(e):e,augmentResponse:e=>e.SubscriptionTemplate})},25100:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(71684),i=r(76400),s=r(11364),a=r(16872);const o=s.c.extend({name:"AdvertisingVendorModel",rootPropertyName:"vendors",sessionAttrs:{id:a.c.integer,name:a.c.string,policyUrl:a.c.string,shortName:a.c.string}}),c=n.c.extend({name:"AdvertisingVendorCollection",context:["server"],model:o,url:"/api/v2/ads/vendors",responseType:i.qS})},58744:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(71684),i=r(76400),s=r(9852),a=r(11364),o=r(16872);const c=a.c.extend({name:"UserFeatureModel",idAttribute:"uuid",syncedAttrs:{uuid:o.c.string.isRequired,id:o.c.string}}),l=n.c.extend({name:"UserFeatureCollection",context:["server"],model:c,url:(0,s.wn)("/api/v2/features"),responseType:i.qS})},89118:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11364),i=r(16872),s=r(14224),a=r(71684);const o=n.c.extend({name:"SyncplaySessionUserModel",idAttribute:"deviceIdentifier",sessionAttrs:{adDisplayIndex:i.c.integer,adDisplayTotal:i.c.integer,deviceIdentifier:i.c.string.isRequired,deviceName:i.c.string.isRequired,id:i.c.integer.isRequired,isAdPlaying:i.c.boolean,isPresent:i.c.boolean,isReady:i.c.boolean,isWatching:i.c.boolean,positionSeconds:i.c.oneOfType(i.c.integer,i.c.float),thumb:i.c.string,title:i.c.string},defaults:{deviceIdentifier:null,deviceName:null,id:null,isAdPlaying:!1,isReady:!1,isWatching:!1,positionSeconds:0}}),c=a.c.extend({name:"SyncplaySessionUserCollection",model:o}),l=n.c.extend({name:"SyncplaySessionModel",idAttribute:"roomID",sessionAttrs:{notifications:i.c.array,roomID:i.c.string},sessionRelations:{metadataItem:{relationClass:s.c,deferred:!0},users:{relationClass:c}},defaults:{notifications:[]}})},13778:(e,t,r)=>{"use strict";r.d(t,{ae:()=>T,Sw:()=>M,a2:()=>V,OC:()=>k,q4:()=>x,s5:()=>A,SG:()=>R,ek:()=>N,kF:()=>j,cL:()=>L,c1:()=>D,wJ:()=>O,WS:()=>U,Ah:()=>F,ms:()=>_,sH:()=>C,i2:()=>Z,c5:()=>z,WG:()=>H,Aj:()=>J,Ml:()=>q,IB:()=>K,eo:()=>Q,wL:()=>$,S2:()=>G,Il:()=>B,wB:()=>Y,gl:()=>X,mo:()=>W});var n=r(55340),i=r(72528),s=r(38828),a=r(29377);let o,c,l=0,d=0;function u(e,t){return(0,a.c)(e)?function(e,t){const r=e.possibleEntityContainers,n=r?r.length:0;for(let i=0;i<n;i++)if(u(e[r[i]],t))return!0;return!1}(e,t):Array.isArray(e)?function(e,t){for(let r=0,n=e.length;r<n;r++)if(u(e[r],t))return!0;return!1}(e,t):e===t}function p(e,t){return e+1>=t?0:e+1}var m=r(58036),h=r(89448),y=r(97612),g=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(b)for(var r of b(t))P.call(t,r)&&I(e,r,t[r]);return e},w=(e,t)=>f(e,v(t));const C="app/setPrimaryServer",O="app/resetPrimaryServer",M="app/changePrimaryServer",T="app/changeCompanionServer",D="app/removeCompanionServer",k="app/garbageCollectEntities",x="app/navigate",A="app/navigateBack",R="app/navigateForward",N="app/navigateHome",L="app/navigateSearch",j="app/navigatePrePlay",U="app/saveDeviceSettings",F="app/saveLastSourcePivot",V="app/clearLastSourcePivots",_="app/savePivotParams",W=(0,n.c)(C),B=(0,n.c)(O),H=(0,n.c)(M),z=(0,n.c)(T),G=(0,n.c)(D),q=(0,n.c)(k),K=(0,n.c)(x),Q=(0,n.c)(A),$=((0,n.c)(R),(0,n.c)(N),(0,n.c)(L),(0,n.c)(j)),Y=(0,n.c)(U),X=(0,n.c)(F),J=(0,n.c)(V),Z=((0,n.c)(_),{[k](e,t){(0,h.SS)();const r=function(e,t={}){const r=null!=t.budget?t.budget:16.666666666666668,n=window.performance.now(),i=e.entities,s=Object.keys(i),a=s.length,m={};r===1/0&&(l=0,d=0);const h=i[s[l]];for(o=l,c=Math.max(Math.min(d,Object.keys(h).length-1),0);l<a;){const t=s[l],h=i[t],y=Object.keys(h),g=y.length,f=p(l,a);for(;d<g;){const i=y[d],s=p(d,g);if(u(e,i)||(m[t]||(m[t]=[]),m[t].push(i)),f===o&&s===c)return l=f,d=s,m;if(window.performance.now()-n>=r)return l=f,d=s,m;d++}if(l=f,d=0,l===o&&d===c)return m}return m}(e.getState(),t),n=e.get("entities");for(const e in r){const t=r[e];n.get(e).remove(t)}t&&t.budget===1/0&&Object.keys(r).length&&(0,h.SS)()},[F](e,t,r){const n=(0,m.Ww)(e,t),s=(0,m.IB)(e,t),a=e.get("user").get("experienceSettings"),o=a.get("lastSourcePivots");if(!a.get("shouldSaveLastSourcePivots"))return;const c=(0,y.c)(n.get("machineIdentifier"),s.get("identifier"),t.directoryID);r((0,i.SI)({lastSourcePivots:w(E({},o),{[c]:t.pivotKey})}))},[V](e,t,r){r((0,i.SI)({lastSourcePivots:{}}))},[_](e,t,r){const n=(0,m.Ww)(e,t),s=(0,m.IB)(e,t),a=e.get("user").get("experienceSettings").get("savedPivotParams"),o=(0,y.c)(n.get("machineIdentifier"),s.get("identifier"),t.directoryID,t.pivotKey);r((0,i.SI)({savedPivotParams:w(E({},a),{[o]:t.params})}))},[M](e,t){},[O](e,t){},[C](e,t){},[T](e,t){const r=(0,m.AZ)(e,t);r?e.set("companionServer",r):s.c.warn("[Companion] Could not find %s to use as companion server",t.serverEntityID)},[D](e){e.unset("companionServer")},[x](){},[A](){},[R](){},[N](){},[L](){},[j](){},[U](){}})},55340:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t){return function(...r){const n="function"==typeof t?t(...r):r[0];return{type:e,payload:n}}}},76800:(e,t,r)=>{"use strict";r.d(t,{c:()=>n}),r(79268),r(29377);const n=function(e){return e}},79032:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(37588),i=r.n(n),s=r(38828);const a=2500;function o(e){const{eventSource:t,events:r,predicate:n=(()=>!0),waitDuration:o=a}=e,c=i().Deferred(),l=()=>{n(t)&&(u=window.clearTimeout(u),t.off(d),c.resolve(t))},d=r.reduce(((e,t)=>(e[t]=l,e)),{});let u=window.setTimeout((()=>{s.c.warn('Model "%s" events %o did not pass the predicate within %dms',t.name,r,o),t.off("add",d),c.reject(t)}),o);return t.on(d),c.promise()}},84833:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(37588),i=r.n(n),s=r(79032);function a(e){return e.get("isPopulated")?i().Deferred().resolve(e).promise():(0,s.c)({eventSource:e,events:["change:error","change:isPopulated"]})}},60352:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(37588),i=r.n(n),s=(r(79268),r(46784)),a=r(84676),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>c(e,l(t));function g(e){const{key:t,getModel:r}=e;return function(e){const{key:t,getModel:r,onResolved:n,onRejected:i}=e,o=(0,s.c)(t),c=`is${o}Pending`,l=`is${o}Populated`,d=t?`${t}Error`:"error";return(t,s={},o)=>{const u=r(t,s),p=(u.sessionAttrs,u.get(c));u.set(c,!0),e.fetch(t,s,o).then((()=>{u.set({[c]:!1,[l]:!0,[d]:null}),n&&n(u,t,s,o)}),(e=>{const r=e.aborting?{[c]:p}:{[c]:!1,[d]:(0,a.c)(e)};u.set(r),i&&i(u,t,s,o)}))}}(y(h({},e),{fetch(e,n){const s=r(e,n),a=t?s.get(t):s;return a?a.fetch(n.options).then(null,((e,t)=>i().Deferred().reject(t).promise())):i().Deferred().reject({status:0}).promise()}}))}},52108:(e,t,r)=>{"use strict";r.d(t,{c:()=>i}),r(79268);var n=r(46784);function i(e){const{key:t,fetchActionCreator:r,getModel:i}=e,s=`is${(0,n.c)(t)}Populated`;return(e,t,n)=>{i(e,t).get(s)||n(r(t))}}},29296:(e,t,r)=>{"use strict";r.d(t,{c:()=>s}),r(79268);var n=r(46784),i=r(84676);function s(e){const{key:t,getModel:r}=e,s=(0,n.c)(t),a=`is${s}Pending`,o=`is${s}Populated`,c=t?`${t}Error`:"error";return(e,n)=>{const{startIndex:s,endIndex:l,pages:d=3,reloadThreshold:u=6,disableReloadThreshold:p}=n,m=l-s+1,h=r(e,n),y=t?h.get(t):h;h.sessionAttrs;const g=y.get("populatedRange");let f=s,v=l;if(s<g.start?f=Math.max(0,s-m*d):v=s+m*d,f>=g.start&&v<=g.end)return;const b=h.get(a);h.set(a,!0),y.populateRange({start:f,end:v,reloadThreshold:p?null:m*u}).done((()=>{h.set({[a]:!1,[o]:!0,[c]:null})})).fail(((e,t)=>{t.aborting?h.set(a,b):h.set({[a]:!1,[c]:(0,i.c)(t)})}))}}},12380:(e,t,r)=>{"use strict";r.d(t,{c:()=>s}),r(79268);var n=r(46784),i=r(84676);function s(e){const{key:t,getModel:r}=e,s=(0,n.c)(t),a=`is${s}Pending`,o=`is${s}Populated`,c=t?`${t}Error`:"error";return(e,n={})=>{const{count:s}=n,l=r(e,n),d=t?l.get(t):l;l.sessionAttrs;const u=l.get(a);l.set(a,!0),d.repopulateRange(s).done((()=>{l.set({[a]:!1,[o]:!0,[c]:null})})).fail(((e,t)=>{t.aborting?l.set(a,u):l.set({[a]:!1,[c]:(0,i.c)(t)})}))}}},22168:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(52180),i=r(52482),s=r(65284),a=r(58036);function o(e){const t=(0,n.WI)("appModel"),r=t.get("user"),o=new i.c(e.map((e=>({machineIdentifier:(0,a.Ww)(t,{serverEntityID:e}).get("machineIdentifier")}))),{server:r.server});return(0,s.c)(o.map((e=>e.fetch()))).then((()=>{const e=o.filter((e=>!e.isPopulated()));return o.remove(e),o}))}},8295:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(37588),i=r.n(n),s=r(52180);const a="analyzing";var o=r(66780),c=r(12612),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>d(e,u(t));function v(e,t={}){const{allowMetrics:r,metricsProperties:n={}}=t,l=e.server,d=`/library/metadata/${e.get("ratingKey")}/analyze`,u=l.getXHROptions(d,{type:"PUT"}),p=e.get("mediaState"),m=a,h=(0,c.ue)(e.get("type"));h||e.set("mediaState",m);const y=i().ajax(u).fail((t=>{h||e.get("mediaState")!==m||e.set("mediaState",p)}));return r&&(0,s.WI)("metrics").trackClick(f(g({},n),{action:o.cJ,type:e.get("type")})),y.promise()}},60148:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(99112),i=r(84860);const s=function(e){return n.c.shouldRequestHTMLFromCloudProvider,i.WW}},55480:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(37588),i=r.n(n),s=r(52180),a=r(66780),o=r(99396),c=r(90044),l=r(96504),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>u(e,p(t));function b(e,t,r){const{rating:n,allowMetrics:d,metricsProperties:u={}}=r,p=e.get("features").get(c.c.ACTIONS).get("actions").get(o.c7);if(!p)return i().Deferred().reject().promise();const m={key:t.get("ratingKey"),identifier:t.get("identifier"),rating:n},h=l.c.join(p.get("key"),m),y=e.getXHROptions(h,{type:"PUT"}),g=t.get("userRating"),b=-1===n?void 0:n;t.set("userRating",b);const S=i().ajax(y).fail((e=>{t.get("userRating")===b&&t.set("userRating",g)}));return d&&(0,s.WI)("metrics").trackClick(v(f({},u),{action:a.c7,type:t.get("type"),rating:n})),S.promise()}},45732:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(37588),i=r.n(n),s=r(52180),a=r(55188),o=r(66780),c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t));function f(e,t={}){const{allowMetrics:r,metricsProperties:n={}}=t,c=e.server,l=`/library/metadata/${e.get("ratingKey")}/refresh`,d=c.getXHROptions(l,{type:"PUT"}),u=e.get("metadataState"),p=a.OW;e.set("metadataState",p);const m=i().ajax(d).fail((t=>{e.get("metadataState")===p&&e.set("metadataState",u)}));return r&&(0,s.WI)("metrics").trackClick(g(y({},n),{action:o.i8,type:e.get("type")})),m.promise()}},64220:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(37588),i=r.n(n),s=r(99396),a=r(90044),o=r(35860),c=(r(79268),r(18168)),l=r(6084),d=r(58036),u=r(12612),p=r(96504),m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e},P=(e,t)=>h(e,y(t));function I(e,t={}){const{played:r,providerEntityID:n,serverEntityID:c,metadataItemEntityID:l}=t,u=(0,d.IB)(e,t);if(null==u){const e="Could not find providerModel with provided `providerEntityID`";return i().Deferred().reject({errorMessage:e}).promise()}if(null==(0,d.Ww)(e,t)){const e="Could not find serverModel with provided `serverEntityID`";return i().Deferred().reject({errorMessage:e}).promise()}const m=(0,d.wb)(e,{metadataItemEntityID:l});if(null==m){const e="Could not find metadataModel with provided `metadataItemEntityID`";return i().Deferred().reject({errorMessage:e}).promise()}const h=u.get("features").get(a.c.ACTIONS).get("actions").get(s.cR),y=r?h.get("key"):h.get("reverseKey"),g={identifier:m.get("identifier")||o.Qh,key:m.get("ratingKey")},f=p.c.join(y,g),v=i().ajax(u.getXHROptions(f));return v.then((()=>{const t={providerEntityID:n,serverEntityID:c,metadataItemEntityID:m.entityID()};w(e,t,r),E(e,t,r)})),v}function E(e,t,r){const n=(0,d.wb)(e,t);if(n)if((0,u.ue)(n.get("type"))){n.set({viewedLeafCount:r?n.get("leafCount"):0});const i=(0,c.c)(l._M,n.get("childrenKey"),t.providerEntityID||t.serverEntityID),s=(0,d.Gs)(e,{metadataListEntityID:i});s&&s.get("metadataItems").forEach((n=>{const i=P(S({},t),{metadataItemEntityID:n.entityID()});E(e,i,r)}))}else n.set({viewOffset:0,viewCount:r?1:0})}function w(e,t,r,n){const i=(0,d.wb)(e,t);if(!i)return;const s=(0,u.GG)(i.get("type")),a=(0,c.c)(l.Qv,i.get("parentKey"),t.serverEntityID),o=(0,d.wb)(e,{metadataItemEntityID:a});let p;if(o&&(p=(0,u.GG)(o.get("type"))),p&&p.typeString===s.parent){let s;const c=(0,u.ue)(i.get("type"));r?s=c?i.get("unviewedLeafCount"):1:(s=c?i.get("viewedLeafCount"):1,s*=-1);const l=null!=n?n:s;o.set({viewedLeafCount:o.get("viewedLeafCount")+l}),w(e,P(S({},t),{metadataItemEntityID:a}),r,l)}}},82088:(e,t,r)=>{"use strict";r.d(t,{c:()=>F});var n=r(37588),i=r.n(n),s=r(15568),a=r(14224),o=r(56792),c=r(79268),l=r(97664),d=r(12612),u=r(96504),p=r(22784),m=r(16820),h=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let P=0;const I=function(e){P+=1;const t=P.toString(),r=(n=((e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e})({},e.attributes),y(n,g({playQueueItemID:t})));var n;const i=new m.c(r,{server:e.server,provider:e.provider,parent:e.parent,parse:!0});return i.set("isLocal",!0),i};var E=Object.defineProperty,w=Object.defineProperties,C=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&D(e,r,t[r]);if(O)for(var r of O(t))T.call(t,r)&&D(e,r,t[r]);return e},x=(e,t)=>w(e,C(t));function A(e,t,r={}){const n=t.get("type"),s=d.GG(n),a=d.wH(n);if(!s)return i().Deferred().reject().promise();if(s.id===a.id){const s=e.get("playQueueItems"),a=t.get("containerKey");if(a&&!s.length&&!r.skipSiblings&&(n===d.UJ||n===d.EPISODE||n===d.Ww)){const e=new p.c([],{server:t.server,provider:t.provider});return e.fetch({url:a}).then((()=>{const t=e.models.map(I);return i().Deferred().resolve(t).promise()}))}return i().Deferred().resolve([I(t)]).promise()}if(d.M5(n).id===a.id){const e=u.c.join([t.get("key"),"children"]),r=new p.c([],{server:t.server,provider:t.provider});return r.fetch({url:e}).then((()=>{const e=r.models.map(I);return i().Deferred().resolve(e).promise()}))}return i().Deferred().reject().promise()}function R(e,t,r){const n=t.map((t=>A(e,t,r)));return i().when(...n).then(((...t)=>{const n=[].concat(...t);return e.get("playQueueItems").add(n,r),N(e)}))}function N(e,t){const r=e.get("playQueueItems");if(e.get("playQueueSelectedItemID")||!r.length)return i().Deferred().resolve(e).promise();if(t){const n=r.findWhere({metadataItem:t}),i=n?n.id:r.at(0).id;e.set("playQueueSelectedItemID",i)}else{const t=e.get("playQueueSelectedItemOffset"),n=r.at(t);e.set("playQueueSelectedItemID",n.id)}return i().Deferred().resolve(e).promise()}var L=r(61360);function j(e,t,r){const{path:n,model:i,attr:s="key"}=r;if((0,c.c)(n||i,"A path or a model is required to build a source URI"),t.get("isUniversal")){const t=i&&i.get("source")||(0,l.c)(e.server.get("machineIdentifier"),e.get("identifier")),r=n||i.get(s);return u.c.join([t,r])}return n||o.c.uri(i)}function U(e){return{type:e.playQueueModel.get("type"),shuffle:e.shuffle?1:void 0,next:e.next?1:void 0,extrasPrefixCount:e.extrasPrefixCount}}function F(e){const{playQueueModel:t}=e;if(t.get("isLocal"))return function(e){const{next:t,playQueueModel:r,metadataItemModel:n,metadataItemModels:s,metadataListModel:a,skipSiblings:o=!1}=e,c={at:t?r.get("playQueueSelectedItemOffset")+1:void 0};if(n)return A(r,n,{skipSiblings:o}).then((e=>(r.get("playQueueItems").add(e,c),N(r,n))));if(s&&s.length)return R(r,s,c);if(a){const e=a.get("metadataItems").models;return R(r,e,x(k({},c),{skipSiblings:!0}))}return i().Deferred().reject().promise()}(e).then((()=>(0,L.cp)(t)));const r=t.isNew()?"POST":"PUT";return function(e){return e.metadataItemModel?function(e){const{playQueueModel:t,providerModel:r,playlistModel:n,metadataItemModel:o,containerKey:c,shuffle:l,playAll:p}=e,m=t.get("isUniversal"),h=o.get("type"),y=h===d.M7,g=h===d.SEASON,f=h===d.EPISODE,v=h===d.Ww,b=h===d.YH,S=h===d.UJ,P=!!n||o.get("isPlaylist"),I=o.get("isExtra"),E=!!o.get("radio"),w=U(e);if((y||g||f)&&(w.continuous=1),(y||g)&&!p&&!l){const e=!o.get("parentKey"),n=y||e?o:new a.c({key:o.get("parentKey")},{server:o.server,provider:o.provider});return n.fetch({merge:!0,data:{includeOnDeck:"1"}}).then((()=>{const e=n.get("onDeck"),i=e&&y,a=e&&g&&e.get("parentRatingKey")===o.get("ratingKey");if(i||a)return w.uri=j(r,t,{model:e}),w;if(g){const e=new s.c({containerKey:o.get("childrenKey")},{server:o.server,provider:o.provider,skipCache:!0});return e.fetch().then((()=>{const n=e.get("metadataItems"),i=n.findWhere((e=>!e.get("viewCount")));return w.uri=j(r,t,{model:i||n.first()}),w}))}return w.uri=j(r,t,{model:o}),w}))}return P?n?(m&&(w.uri=j(r,t,{model:n})),w.playlistID=n.get("ratingKey"),w.key=o.get("key")):(m&&(w.uri=j(r,t,{model:o})),w.playlistID=o.get("ratingKey")):(S||v||b&&!I)&&c&&!w.continuous?(w.uri=j(r,t,{path:m?c:`library:///directory/${encodeURIComponent(c)}`}),w.key=o.get("key")):w.uri=j(r,t,E&&m?{path:u.c.join(o.get("key"),{includeSharedContent:1})}:{model:o}),i().Deferred().resolve(w).promise()}(e):e.metadataItemKey?function(e){const{providerModel:t,playQueueModel:r,metadataItemKey:n}=e,s=r.get("isUniversal"),a=U(e);return a.uri=j(t,r,{path:s?n:`library:///item/${encodeURIComponent(n)}`}),i().Deferred().resolve(a).promise()}(e):e.metadataItemModels&&e.metadataItemModels.length?function(e){const t=U(e);return t.uri=o.c.uri(null,{items:e.metadataItemModels}),i().Deferred().resolve(t).promise()}(e):e.metadataListModel?function(e){const{providerModel:t,playQueueModel:r,metadataListModel:n}=e,s=U(e);return s.uri=j(t,r,{model:n,attr:"containerKey"}),i().Deferred().resolve(s).promise()}(e):i().Deferred().reject().promise()}(e).then((e=>(0,L.cp)(t,{params:e,type:r}).then(null,(()=>i().Deferred().reject().promise()))))}},12384:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(37588),i=r.n(n),s=r(11364),a=r(16872),o=r(816);const c=s.c.extend({name:"LocalPlayQueueModel",context:["server","provider"],url(){const e=this.get("playQueueItems"),t=this.get("playQueueSelectedItemID"),r=e.get(t);if(r)return r.get("metadataItem").get("key")},sessionAttrs:{key:a.c.string,playQueueID:a.c.string,isLocal:a.c.boolean,type:a.c.string,repeat:a.c.boolean,own:a.c.boolean,isUpdatePending:a.c.boolean,playQueueShuffled:a.c.boolean,playQueueSelectedItemID:a.c.string},sessionRelations:{playQueueItems:{relationClass:o.c}},derivedAttrs:{playQueueTotalCount(){return this.get("playQueueItems").length},length(){return this.get("playQueueItems").length},playQueueSelectedItemOffset(){const e=this.get("playQueueItems"),t=this.get("playQueueSelectedItemID");if(!t)return 0;const r=e.get(t);return e.indexOf(r)},currentIndex(){return this.get("playQueueSelectedItemOffset")},canShuffle:()=>!1},defaults:{isLocal:!0,repeat:!1,own:!0,isUpdatePending:!1,playQueueShuffled:!1,playQueueSelectedItemOffset:0},fetch:function(){return i().Deferred().resolve(this).promise()}});var l=r(13396),d=(r(64824),r(90044)),u=r(74964);function p(e){const{providerModel:t,playQueueID:r,playQueueType:n,playQueueRepeat:i,playQueueOwn:s=!0}=e,a=t&&t.get("features"),o=a&&a.get(d.c.PLAY_QUEUE),p=!!o&&o.get("flavor")===u.GG;return o?new l.c({playQueueID:r,key:o.get("key"),type:n,repeat:i,own:s,isUniversal:p},{server:t.server,provider:t}):new c({playQueueID:r,type:n},{server:t.server,provider:t})}r(79268)},14424:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(37588),i=r.n(n),s=r(52180),a=r(70776),o=r(38828),c=r(12612),l=r(14224),d=r(85976),u=r(69956);const p=function(e,t){const r=function(e){return e.get("Origin")||{key:e.get("key"),source:(0,d.c)({serverIdentifier:e.server.get("machineIdentifier"),providerIdentifier:e.provider.get("identifier")})}}(t),n=i().Deferred(),{source:s,key:o}=r,{providerIdentifier:c,serverIdentifier:p}=(0,u.c)(s),m=e.get("servers").get(p),h=m&&m.get("isCloud")?e.get("user"):m,y=h&&h.get("providers").get(c);let g;if(m?m.get("isConnected")?y?y.get("isPopulated")||(g="Provider is not populated"):g="Unknown provider":g="Server is not connected":g="Unknown server",g)n.reject(new Error(g));else{const e=new l.c({key:o},{server:m,provider:y,channel:t.channel,includeExternalMedia:t.includeExternalMedia,skipCache:!0}),r=(0,a.c)(y.server),c=y.resolveUrl(e.url(),{appendHeaders:!0}),d=y.getXHROptions(c,{dataType:r.typeName,data:{resolveIndirect:1}});e.fetch(d).then((t=>{const r=e.get("Media"),a=r?r.map((e=>i().extend(!0,{source:s},e))):[];n.resolve(a)}),(()=>{n.reject(new Error("Unable to fetch Origin metadata"))}))}return n.promise()};function m(e,t={}){let r=t.forceFetch||!e.get("isPreFetched")?function(e,t={}){const{itemProvider:r}=t,n={includeConcerts:1,includeExtras:1,includeOnDeck:1,includePopularLeaves:1,includePreferences:1,includeChapters:1,includeStations:1,includeMarkers:1,includeExternalMedia:1,asyncAugmentMetadata:1};e.get("type")===c.UJ&&(n.includeRelated=1),!t.forceSyncCheckFiles&&e.server.supports("asyncCheckFiles")?(n.asyncCheckFiles=1,n.asyncRefreshAnalysis=1,n.asyncRefreshLocalMediaAgent=1):n.checkFiles=1;const i=r||e.provider,s=(0,a.c)(i.server),o=i.resolveUrl(e.url(),{appendHeaders:!0}),l=i.getXHROptions(o,{dataType:s.typeName,data:n,merge:!0});return e.fetch(l).done((()=>{e.set("isPreFetched",!0)}))}(e,t):i().Deferred().resolve().promise();return r=r.then((()=>{const t=e.get("Media");if(e.get("indirect")&&(!t||!t.length)){const t=p((0,s.WI)("appModel"),e).then((t=>{e.set({Media:t})}));return t.then(null,(e=>{o.c.error("[Metadata] %s",e.message)})),t}})),r}},54356:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(87644);function i(e){const t=e.get("playQueue");if(!t)return;const r=t.get("currentIndex");return(0,n.UH)(e,r)}},96488:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(40604),i=r(12612),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e},m=(e,t)=>a(e,o(t));function h({metadataItemModel:e,listType:t}){const r=e.get("playlistType");if(r)return r;const s=e.get("subtype"),a=e.get("type");return a===i.ge||a===i.OS||a===i.UV?n.KI:a===i.sl?y(null,s):t===i.sl?y(null,a):y(t,a)}function y(e,t){let r;return e&&(r=i.wH(e)),r||(r=i.wH(t)),r&&r.mediaType}function g(e){const{type:t,metadataType:r,metadataItemModel:n,metadataItemModels:s,metadataListModel:a}=e;return t||(r?y(r):n?h(e):s&&s.length?h(m(p({},e),{metadataItemModel:s[0]})):a?function({metadataListModel:e,listType:t}){return e.get("firstItemType")===i.sl?y(t,e.get("firstItemSubtype")):y(t,e.get("firstItemType"))}(e):void 0)}},88880:(e,t,r)=>{"use strict";r.d(t,{c:()=>ne});var n={};r.r(n),r.d(n,{changeAutoPlay:()=>C,changePlaybackSpeed:()=>O,changeQualityIndex:()=>b,changeStream:()=>S,changeSubtitleColor:()=>P,changeSubtitleOffset:()=>w,changeSubtitlePosition:()=>I,changeSubtitleSize:()=>E,changeVolume:()=>v,endPlayback:()=>u,mirrorDetails:()=>k,pause:()=>g,play:()=>y,playItem:()=>h,playNextItem:()=>p,playPreviousItem:()=>m,refreshRemotePlayQueue:()=>T,refreshRemoteStreams:()=>D,seek:()=>f,setRepeat:()=>M,startPlayback:()=>d});var i={};r.r(i),r.d(i,{changeAutoPlay:()=>Y,changePlaybackSpeed:()=>X,changeQualityIndex:()=>z,changeStream:()=>G,changeSubtitleColor:()=>q,changeSubtitleOffset:()=>$,changeSubtitlePosition:()=>K,changeSubtitleSize:()=>Q,changeVolume:()=>H,endPlayback:()=>j,mirrorDetails:()=>te,pause:()=>W,play:()=>_,playItem:()=>V,playNextItem:()=>U,playPreviousItem:()=>F,refreshRemotePlayQueue:()=>Z,refreshRemoteStreams:()=>ee,seek:()=>B,setRepeat:()=>J,startPlayback:()=>L});var s=r(84384),a=r(52180),o=r(51337),c=r(10532),l=r(39835);function d(e){s.startPlayback(e);const t=(0,a.WI)("remoteCastPlayerManager");e.get("playQueue").set("own",!1),t.startPlayback(e),e.set({startMetadataItemEntityID:null,startOffsetMilliseconds:null,startMediaIndex:null})}function u(e){s.endPlayback(e),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.uo})}function p(e){(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.o1})}function m(e){(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.aq})}function h(e,t){s.playItem(e,t);const r=(0,a.WI)("remoteCastPlayerManager"),n=e.get("playQueue"),i=n.get("playQueueItems"),c=n.get("playQueueSelectedItemID"),l=i.get(c).get("metadataItem");r.sendMessage({type:o.e2,playQueueItemID:c,key:l.get("key")})}function y(e){s.play(e),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.OI})}function g(e){s.pause(e),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.qc})}function f(e,t){s.seek(e,t),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.GU,currentTime:t})}function v(e,t,r){(0,a.WI)("remoteCastPlayerManager").setVolume(t)}function b(e,t){s.changeQualityIndex(e,t);const r=l.c.getQualityByIndex(t);(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.vo,bitrate:r.bitrate})}function S(e,t,r){(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.Wk,stream:{type:t,id:r}})}function P(e,t,r){s.changeSubtitleColor(e,t,r),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.iC,subtitleColor:t})}function I(e,t,r){s.changeSubtitlePosition(e,t,r),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.ct,subtitlePosition:t})}function E(e,t,r){s.changeSubtitleSize(e,t,r),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.KU,subtitleSize:t})}function w(e,t,r){(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.e6,subtitleOffset:t})}function C(e,t,r){s.changeAutoPlay(e,t,r),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.Wi,autoPlay:t})}function O(e,t){}function M(e,t){e.set({repeatAll:t.repeatAll,repeatOne:t.repeatOne}),(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.cv,repeat:(0,c.c)(t)})}function T(e){(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.Qp})}function D(e){(0,a.WI)("remoteCastPlayerManager").sendMessage({type:o.CS})}function k(e){(0,a.WI)("remoteCastPlayerManager").mirrorDetails(e)}var x=r(95760),A=r(760),R=r(76636);function N(e){const t=e.get("playQueue");return(0,x.C8)(t.get("type"))}function L(e){s.startPlayback(e);const t=(0,a.WI)("remotePlexPlayerManager");e.get("playQueue").set("own",!1),t.startPlayback(e)}function j(e){const t=(0,a.WI)("remotePlexPlayerManager"),r={};e.get("playQueue")&&(r.type=N(e)),s.endPlayback(e),t.sendCommand("/player/playback/stop",r)}function U(e){const t=(0,a.WI)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/skipNext",{type:r})}function F(e){const t=(0,a.WI)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/skipPrevious",{type:r})}function V(e,t){s.playItem(e,t);const r=(0,a.WI)("remotePlexPlayerManager"),n=N(e),i=e.get("playQueue"),o=i.get("playQueueItems"),c=i.get("playQueueSelectedItemID"),l=o.get(c).get("metadataItem");r.sendCommand("/player/playback/skipTo",{type:n,key:l.get("key")})}function _(e){s.play(e);const t=(0,a.WI)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/play",{type:r})}function W(e){s.pause(e);const t=(0,a.WI)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/pause",{type:r})}function B(e,t){s.seek(e,t);const r=(0,a.WI)("remotePlexPlayerManager"),n=N(e);r.seek({type:n,offset:1e3*t})}function H(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e);n.changeVolume({type:i,volume:t})}function z(e,t){}function G(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e),s=R.c.get(t).key;n.sendCommand("/player/playback/setStreams",{type:i,[s]:r})}function q(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitleColor:t}),s.changeSubtitleColor(e,t,r)}function K(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitlePosition:t}),s.changeSubtitlePosition(e,t,r)}function Q(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitleSize:t}),s.changeSubtitleSize(e,t,r)}function $(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitleOffset:t})}function Y(e,t,r){const n=(0,a.WI)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,autoPlay:t?1:0}),s.changeAutoPlay(e,t,r)}function X(e,t){}function J(e,t){s.setRepeat(e,t);const r=(0,a.WI)("remotePlexPlayerManager"),n=N(e),i=e.get("repeatAll"),o=e.get("repeatOne");let c=A.KE;i&&(c=o?A.x:A.y2),r.sendCommand("/player/playback/setParameters",{type:n,repeat:c})}function Z(e){const t=(0,a.WI)("remotePlexPlayerManager"),r=N(e),n=e.get("playQueue").get("playQueueID");t.sendCommand("/player/playback/refreshPlayQueue",{type:r,playQueueID:n})}function ee(e){const t=(0,a.WI)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/refreshStreams",{type:r})}function te(e){(0,a.WI)("remotePlexPlayerManager").mirrorDetails(e)}var re=r(66109);function ne(e){const t=e.get("remotePlayer");return t?t.get("protocol")===re.y?n:i:s}},16044:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(96488),i=r(90044),s=r(74964),a=r(35860),o=r(12612),c=r(99204),l=r(42728),d=r(58036),u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e};function f(e,t){const r=t.options?g({},t.options):{},u=d.IB(e,t),p=d.Ww(e,t),m=t.itemProviderEntityID&&d.kj(e,{providerEntityID:t.itemProviderEntityID})||u,h=t.itemServerEntityID&&d.AZ(e,{serverEntityID:t.itemServerEntityID})||p,y=function({providerModel:e,serverModel:t,itemServerModel:r,itemProviderModel:n,options:c={}}){const{containerKey:l,listType:d}=c;if(e.get("identifier")===n.get("identifier")&&t.get("machineIdentifier")===r.get("machineIdentifier"))return!0;if(d===o.UJ&&l)return!1;const u=e.get("features").get(i.c.PLAY_QUEUE),p=!!u&&u.get("flavor")===s.GG&&!t.get("isCloud"),m=r.get("isShared")||a._u(e.get("identifier"),a.Im);return!p||m}({providerModel:u,serverModel:p,itemServerModel:h,itemProviderModel:m,options:t.options});return r.serverModel=y?h:p,r.providerModel=y?m:u,(0,c.c)(e,l.sv)&&(r.includeExternalMedia=1),t.metadataItemEntityID&&(r.metadataItemModel=d.oH(e,t)),t.playlistMetadataItemEntityID&&(r.playlistModel=d.oH(e,{metadataItemEntityID:t.playlistMetadataItemEntityID})),t.metadataItemEntityIDs&&(r.metadataItemModels=t.metadataItemEntityIDs.map((t=>d.oH(e,{metadataItemEntityID:t})))),t.metadataListEntityID&&(r.metadataListModel=d.cF(e,t)),t.listType&&(r.type=(0,n.c)({metadataType:t.listType})),r}},87296:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(74964),i=r(56792),s=r(38828),a=r(69956),o=r(97664),c=r(96504);var l=r(96488),d=r(90044),u=r(12612);function p(e){const{providerModel:t,itemProviderModel:r,metadataItemModel:p,metadataListModel:m,multiSelectModel:h,playQueueModel:y,smart:g,readOnly:f,recent:v}=e,b=h&&h.get("activeSelectionItems").pluck("model"),S=y?y.get("type"):(0,l.c)({metadataItemModel:p,metadataListModel:m,metadataItemModels:b}),P=t&&t.get("features"),I=P&&P.get(d.c.PLAYLIST),E=I&&I.get("key"),w={type:(0,u.GG)(u.yy).id,playlistType:S,smart:g?1:0,readOnly:f?1:0};v&&(w.sort="updatedAt:desc");const C={playlistType:S,containerKey:E&&c.c.join(E,w)};return y||(C.uri=function(e){const{providerFeatureType:t,providerModel:r,itemProviderModel:l,metadataItemModel:d,metadataListModel:u,metadataItemModels:p}=e,m=r.get("features"),h=m&&m.get(t);if(h&&h.get("flavor")===n.GG){const e=(null==d?void 0:d.get("source"))?(0,a.c)(d.get("source")).providerIdentifier:void 0,t=e&&e!==l.get("identifier")?d.get("source"):(0,o.c)(l.server.get("machineIdentifier"),l.get("identifier")),r=d&&d.get("key")||u&&u.get("containerKey")||function(e){if(!e)return;const[t]=e;return e.some((e=>e.get("source")!==t.get("source")))?void s.c.warn("[Playlists] universal playlists can not contain items from multiple sources"):"/library/metadata/"+e.map((e=>e.get("ratingKey"))).join(",")}(p);return c.c.join([t,r])}return i.c.uri(d||u||p,{items:p})}({providerFeatureType:d.c.PLAYLIST,providerModel:t,itemProviderModel:r,metadataItemModel:p,metadataListModel:m,metadataItemModels:b})),C}},54756:(e,t,r)=>{"use strict";function n(e,t){return null==e.get("startMetadataItemEntityID")&&null!=e.get("startOffsetMilliseconds")||e.get("startMetadataItemEntityID")===t.entityID()?e.get("startOffsetMilliseconds"):t.get("viewOffset")||0}r.d(t,{c:()=>n})},42444:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(55272);function i(e){return!e.get("isOpen")||e.get("hasError")?n.SG:e.get("isPaused")?n.YT:e.get("isBuffering")?n.qM:n.U$}},84228:(e,t,r)=>{"use strict";r.d(t,{I3:()=>P,Ib:()=>S,KK:()=>I,Ud:()=>v,gl:()=>y,kn:()=>b,q:()=>g,qq:()=>f});var n=r(99112),i=r(88880),s=r(29572),a=r(62796),o=r(87644),c=r(89448);function l(e){return e.get("currentPosition")}function d(e){const t=e.get("liveTVSession");return e.get("liveTVSession")?l(t):0}function u(e){const t=e.get("liveTVSession"),r=t.get("captureBuffer");if(r){const{startedAt:e,seekStartSeconds:t,seekEndSeconds:n}=r;return{seekStartSeconds:e+t,seekEndSeconds:e+n}}const n=t.get("startedAt");return{seekStartSeconds:n+e.get("seekStartSeconds"),seekEndSeconds:n+e.get("seekEndSeconds")}}function p(e){const t=l(e);if(!t)return;const r=e.get("timeline");for(let e=0;e<r.length;e++){const n=[...r.at(e).get("Media")].sort(((e,t)=>e.endsAt-t.endsAt));for(let e=0;e<n.length;e++){const r=n[e],{beginsAt:i,endsAt:s}=r;if(i<=t&&s>t)return r}}}function m(e,t){const r=d(e),n=u(e).seekEndSeconds;return r?Math.min(n,r+t):void 0}function h(e,t){const r=d(e),n=u(e).seekStartSeconds;return r?Math.max(n,r-t):void 0}function y(e){return h(e,a.L$)}function g(e){return m(e,a.OM)}function f(e){return h(e,a.K_)}function v(e){return m(e,a.Qf)}function b(e){const t=e.get("liveTVSession");if(!e.get("liveTVSession"))return;const r=u(e).seekEndSeconds,n=p(t);return n?Math.min(r,n.endsAt):void 0}function S(e){const t=e.get("liveTVSession");if(!e.get("liveTVSession"))return;const r=u(e).seekStartSeconds,n=l(t),i=p(t);if(!i)return;if(n-i.beginsAt>a.WM)return Math.max(r,i.beginsAt);const s=function(e){const t=l(e);if(!t)return;const r=e.get("timeline");for(let e=r.length-1;e>=0;e--){const n=[...r.at(e).get("Media")].sort(((e,t)=>e.endsAt-t.endsAt));for(let e=n.length-1;e>=0;e--){const r=n[e];if(r.endsAt<=t)return r}}}(t);return s?Math.max(r,s.beginsAt):void 0}function P(e,t){1===arguments.length&&(t=e.get("currentPosition"));const r=function(e){const t=e.get("captureBuffer");return t&&t.startedAt}(e)||e.get("startedAt");return t-r}function I(e,t,r,a){if(null==r)return;const l=(0,i.c)(e),d=(0,o.OG)(e,t),u=d.get("liveTVSession"),p=u.get("startedAt");(0,c.SS)((()=>{if(u.set({currentPosition:r,lastSeekPosition:r}),function(e,t){const r=e.get("currentDecision");if(!r||r.isDirectPlay)return!1;const i=e.get("liveTVSession"),s=i.get("startedAt");if(!i.get("captureBuffer"))return!1;if(n.c.shouldCreateNewSessionWhenSeekingLiveTV)return!0;const a=s+e.get("seekStartSeconds"),o=s+e.get("seekEndSeconds");return!(t>=a&&t<=o)}(d,r))u.set({startedAt:r}),a((0,s.Y1)({playerType:t,decisionOptions:{offset:1e3*P(u)}}));else{const e=Math.max(r-p,0);l.seek(d,e)}}))}},84384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{changeAutoPlay:()=>x,changePlaybackSpeed:()=>A,changeQualityIndex:()=>C,changeStream:()=>O,changeSubtitleColor:()=>M,changeSubtitleOffset:()=>k,changeSubtitlePosition:()=>T,changeSubtitleSize:()=>D,changeVolume:()=>w,endPlayback:()=>f,mirrorDetails:()=>j,pause:()=>I,play:()=>P,playItem:()=>S,playNextItem:()=>v,playPreviousItem:()=>b,refreshRemotePlayQueue:()=>N,refreshRemoteStreams:()=>L,seek:()=>E,setRepeat:()=>R,startPlayback:()=>g});var n=r(52180),i=r(13778),s=r(47456),a=r(72528),o=r(64824),c=r(15036),l=r(87644),d=r(2684),u=r(54756);let p=null;function m(e,t,r={}){const i=e.get("playQueue"),a=i.get("currentIndex"),p=i.get("playQueueSelectedItemOffset"),{isApplicationInitiated:m=!1,isRestoringPlayQueue:h=!1}=r,y=(0,l.UH)(e,t);if(!y)return;const g=y.get("metadataItem"),f={isMediaLoading:!0,isBuffering:!1,isLyricsVisible:!1,positionSeconds:Math.floor((0,u.c)(e,g)/1e3),durationSeconds:Math.floor((g.get("duration")||0)/1e3),lastSeekPositionSeconds:null,metricsAutoPlay:m,hasError:!1,errorMessage:null,errorCode:null,errorCategory:null,qualityIndex:null,adState:null,adPositionSeconds:null,adDurationSeconds:null,adDisplayIndex:null,adDisplayTotal:null,adTimeOffsetSeconds:null,bufferedRanges:[],canPlayThrough:!1,mediaWidth:null,mediaHeight:null,confirmPlayerUpsellPayload:null};h||e.get("isWatchTogether")||i.get("type")===o.Ww||(f.isPaused=!1),e.set(f),i.set({playQueueSelectedItemID:y.id,playQueueSelectedItemOffset:p+(t-a)}),g&&g.get("extraType")===d.cp.get(d._x).id&&(0,n.WI)("appStore").dispatch((0,s.IL)({providerEntityID:e.get("providerEntityID"),metadataItemEntityID:g.entityID()})),(0,c.c)()}function h(e,t){const r=e.get("playQueue"),n=r.get("length"),i=r.get("currentIndex")+t;return r.get("repeat")?(i+n)%n:Math.min(Math.max(0,i),n-1)}function y(e,t){p&&(p=window.clearTimeout(p)),e.set({lastSeekPositionSeconds:t,nextPositionSeconds:null})}function g(e,t,r){const n=e.get("playQueue");m(e,n.get("currentIndex"),{isRestoringPlayQueue:t,isApplicationInitiated:r})}function f(e){e.restoreDefaults({metricsContextTuple:e.get("metricsContextTuple")})}function v(e,t){m(e,h(e,1),{isApplicationInitiated:t})}function b(e){m(e,h(e,-1))}function S(e,t){m(e,t)}function P(e,t=!1){e.set({isPaused:!1}),(0,c.c)()}function I(e,t=!1){e.set({isPaused:!0}),(0,c.c)()}function E(e,t,r){r?function(e,t,r){e.set({nextPositionSeconds:t}),p&&window.clearTimeout(p),p=window.setTimeout((()=>{e.get("isOpen")&&(y(e,t),p=null)}),r)}(e,t,r):y(e,t),(0,c.c)()}function w(e,t,r){r((0,i.wB)({volume:t}))}function C(e,t){e.set("qualityIndex",t)}function O(e,t,r){}function M(e,t,r){r((0,a.af)({subtitleColor:t}))}function T(e,t,r){r((0,a.EV)({subtitlePosition:t}))}function D(e,t,r){r((0,a.a2)({subtitleSize:t}))}function k(e,t,r){}function x(e,t,r){r((0,a._O)({autoPlay:t}))}function A(e,t){e.set("playbackSpeed",t)}function R(e,t){const r=e.get("playQueue");e.set({repeatAll:t.repeatAll,repeatOne:t.repeatOne}),r.set("repeat",t.repeatAll)}function N(e){}function L(e){}function j(e){}},61360:(e,t,r)=>{"use strict";r.d(t,{cp:()=>P});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(77015),c=r(17312),l=r(96504),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>u(e,p(t));const b="ERROR_PLAY_QUEUE_COULD_NOT_POPULATE",S="ERROR_PLAY_QUEUE_INDEX_INVALID";function P(e,t={}){return e.get("isLocal")?function(e){return i().Deferred().resolve(e).promise()}(e):function(e,t={}){const{urlPath:r="",params:n={},type:s="GET"}=t,d=l.c.join([a().result(e,"url"),r]),u=l.c.join(d,v(f({},n),{repeat:e.get("repeat")?1:0,own:e.get("own")?1:0,includeChapters:1,includeMarkers:1,includeGeolocation:1,includeExternalMedia:1})),p=e.provider,m=a().result(e,"responseType"),h=p.getXHROptions(u,{type:s,headers:{Accept:m.accept}}),y=e.get("playQueueSelectedItemID");return e.set("isUpdatePending",!0),i().ajax(h).promise().then(((t,n,s)=>{var a;const l=null!=(a=s.getResponseHeader("content-type"))?a:"";t=/json/.test(l)?JSON.parse(t):(0,o.c)((0,c.c)(t,null)),e.get("own")&&"shuffle"!==r&&"unshuffle"!==r&&y&&(y!==e.get("playQueueSelectedItemID")||y!==e.convert(t).playQueueSelectedItemID)||e.set(e.parse(t));const d=e.get("playQueueItems"),u=e.get("currentIndex");return u>=0&&u<d.length?i().Deferred().resolve(e).promise():i().Deferred().reject(S).promise()}),(()=>i().Deferred().reject(b).promise())).always((()=>{e.set("isUpdatePending",!1)}))}(e,t)}},57204:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(37588),i=r.n(n),s=r(90044),a=r(96504);function o(e){const{providerModel:t,type:r,title:n,smart:o=0,playlistID:c,playQueueID:l,uri:d,includeExternalMedia:u}=e,p={uri:d,playQueueID:l};u&&(p.includeExternalMedia=1),c||(p.title=n,p.smart=o?1:0,p.type=r);const m=t.get("features"),h=m&&m.get(s.c.PLAYLIST),y=h&&h.get("key"),g=a.c.join([y,c&&`${c}/items`],p),f=c?"PUT":"POST",v=t.getXHROptions(g,{type:f});return i().ajax(v)}},87792:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(65724),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e};function d(e,t,r){const i=e.get("previousOpenState");let s=e.get("openState");return i&&!t?s=i:i&&t&&(s=void 0),l({previousOpenState:s,openState:i&&t?i:n.m},r)}},67688:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(54356),i=r(35860);function s(e){const t=(0,n.c)(e).get("metadataItem");return i._u(t.provider.get("identifier"),i.$9)}},94188:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(38828);function i(e,t){const r=e.get("playQueue");return(...i)=>{if(e.get("isOpen")&&r&&r===e.get("playQueue"))return t(...i);n.c.warn("[Player] Player was closed or a new playback session was started; ignoring callback")}}},27800:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(96504);function c(e,t){const r=e.server,n=a().result(e,"url"),s=r.getXHROptions(o.c.join([n,"move"],{after:t}),{type:"PUT"});return i().ajax(s).promise()}},52047:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(37588),i=r.n(n),s=r(65284);function a(e,t){const r=e.get("serverShares");return r?(0,s.c)(r.map((e=>e.fetch({merge:!0,scope:t})))):i().Deferred().resolve().promise()}},64139:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(8137);function i(e){const t=e.get("user").get("features");return t?(0,n.c)(t.getState()):[]}},36772:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(33040);const i=function(e){const t=e&&e.responseJSON,r=!t&&e&&e.responseText&&n.c.parseXML(e.responseText),i=t&&t.errors||r&&r.error;return i?Array.isArray(i)?i:[i]:[]}},31881:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(45944),a=r(59396);function o(e,t){const r=e&&e[0];return r?i().isObject(r)?(0,s.M)(r,t):r:(0,a.c)("There was a problem signing in to Plex.")}},99204:(e,t,r)=>{"use strict";function n(e,t){return!!e.get("user").get("features").findWhere({uuid:t})}r.d(t,{c:()=>n})},25160:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37588),i=r.n(n);function s(e){const{user:t,friend:r,serverShare:n,librarySectionIDs:s,isNewFriend:a,isCreatingManagedUser:o,isNewServerShare:c}=e,l={machineIdentifier:n.get("machineIdentifier"),librarySectionIds:s};a&&(l.settings=r.getSaveParams()),c&&(a&&!o?l.invitedEmail=r.get("username"):l.invitedId=r.id);const d=n.url(),u=t.server.getXHROptions(d,{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(l)});return i().ajax(u).promise()}},47456:(e,t,r)=>{"use strict";r.d(t,{Og:()=>B,ID:()=>H,k9:()=>G,QL:()=>F,Ab:()=>U,qH:()=>j,Cy:()=>K,Yz:()=>q,ey:()=>z,$v:()=>_,OW:()=>V,_c:()=>W,mc:()=>ee,fw:()=>te,IL:()=>re,It:()=>se,IH:()=>Y,qG:()=>$,Sg:()=>Q,uK:()=>ie,EJ:()=>ne,Ap:()=>J,GS:()=>X,gt:()=>Z});var n=r(37588),i=r.n(n),s=r(55340),a=r(52180),o=r(46260),c=r(66780),l=(r(79268),r(76636)),d=r(96504),u=r(5620),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e},S=(e,t)=>m(e,h(t));function P(e,t){const{mediaIndex:r,streamTypeString:n,streamID:s,allParts:p,allowMetrics:m,metricsProperties:h={},updateLocalOnly:y=!1}=t,g=l.c.get(n),f=e.provider,v=e.get("Media");let P,I;for(let e=0,t=v.length;e<t;e++){if(r>=0&&r!==e)continue;const t=v[e],n=t.Part;for(let e=0,r=n.length;e<r;e++){const r=n[e],i=r.Stream;for(let e=0,n=i.length;e<n;e++){const n=i[e];if(n.streamType===g.id&&n.id===s){P=t,I=r;break}}if(I)break}if(I)break}if(!I)return i().Deferred().reject().promise();const E={[g.key]:s};p&&(E.allParts=1);const w=function(e,t,r,n,i){const s=b({},r);s.Stream=r.Stream.map((e=>e.streamType!==n.id?e:e.id!==i||e.selected?e.id!==i&&e.selected?S(b({},e),{selected:!1}):e:S(b({},e),{selected:!0})));const a=S(b({},t),{Part:(0,o.c)(t.Part,r,s)});return(0,o.c)(e,t,a)}(v,P,I,g,s);if(e.set({Media:w,isStreamChangeInProgress:!y}),y)return i().Deferred().resolve().promise();const C=I.key.match(new RegExp(`^(.*/parts/${I.id})/`)),O=d.c.join(C?C[1]:["/library/parts",I.id],E),M=f.getXHROptions(O,{type:"PUT",scope:`selectMetadataItemStream--${I.id}`});u.c.abortAll(M.scope);const T=i().ajax(M).done((()=>{e.set("isStreamChangeInProgress",!1),e.fetch({usePopulatedParams:!0})})).fail((t=>{if(t.aborting)return;const r={isStreamChangeInProgress:!1};e.get("Media")===w&&(r.Media=v),e.set(r)}));return m&&(0,a.WI)("metrics").trackClick(S(b({},h),{action:c.ot,type:e.get("type"),context:n})),T.promise()}var I=r(59740),E=r(84508),w=r(56960),C=r(90044),O=r(35860),M=r(37492),T=r(77015),D=r(18168),k=r(6084),x=r(58036),A=r(89448),R=r(59396),N=r(12612),L=r(47148);const j="metadata/selectMetadataItemStream",U="metadata/repopulateMetadataItem",F="metadata/removeMetadataItem",V="metadata/toggleMetadataItemSave",_="metadata/toggleMetadataItemPlexPick",W="metadata/toggleMetadataItemWatchlist",B="metadata/addMetadataItemToLibrary",H="metadata/deleteMetadataItemStream",z="metadata/setMetadataItemStreamOffset",G="metadata/fetchMetadataItemIsInWatchlist",q="metadata/setMetadataItemIsInWatchlist",K="metadata/setMetadataItemAddToWatchlistGuid",Q=(0,s.c)(j),$=(0,s.c)(U),Y=(0,s.c)(F),X=(0,s.c)(V),J=(0,s.c)(_),Z=(0,s.c)(W),ee=(0,s.c)(B),te=(0,s.c)(H),re=((0,s.c)(z),(0,s.c)(G)),ne=(0,s.c)(q),ie=(0,s.c)(K),se={[U](e,t){const r=(0,x.wb)(e,t);r&&r.fetch({data:{skipRefresh:1},usePopulatedParams:!0})},[F](e,t){const r=(0,x.wb)(e,t);r&&r.trigger("destroy",r,r.collection)},[j](e,t,r){const{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,metricsPage:o,updateLocalOnly:c}=t;P((0,x.oH)(e,t),{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,allowMetrics:!!o,metricsProperties:{page:o},updateLocalOnly:c}).fail((e=>{e&&e.aborting||r((0,I._K)((0,R.c)("There was a problem selecting this stream.")))}))},[V](e,t,r){const n=(0,x.oH)(e,t),s=(0,x.IB)(e,{providerEntityID:n.get("providerEntityID")}),a=s.get("identifier"),o=O._u(a,O.y6);let c=n.get("ratingKey");const l=n.get("grandparentRatingKey");let u;if(l&&!o){c=l;const r=n.get("grandparentKey");if(r){const n=(0,D.c)(k.Qv,r,t.serverEntityID);u=(0,x.wb)(e,{metadataItemEntityID:n})}}const p=n.get("saved"),m=!p;n.set("saved",m),u&&u.set("saved",m);const h=s.get("features").get(C.c.ACTIONS).get("actions").get("save"),y=m?h.get("key"):h.get("reverseKey"),g=d.c.join(y,{ratingKey:c}),f=s.getXHROptions(g,{type:"PUT"});i().ajax(f).then((()=>{r((0,I.SK)({serverEntityID:t.serverEntityID}))}),(()=>{n.set("saved",p),u&&u.set("saved",p)}))},[_](e,t,r){const n=(0,x.oH)(e,t),s=(0,x.IB)(e,{providerEntityID:n.get("providerEntityID")}),a=n.get("ratingKey"),o=n.get("picked"),c=!o;n.set("picked",c);const l=s.get("features").get(C.c.ACTIONS).get("actions").get("pick"),u=c?l.get("key"):l.get("reverseKey"),p=d.c.join(u,{ratingKey:a}),m=s.getXHROptions(p,{type:"PUT"});i().ajax(m).then((()=>{r($({metadataItemEntityID:t.metadataItemEntityID}))}),(e=>{const t=(0,T.c)(e.responseText);r((0,I._K)(t.message)),n.set("picked",o)}))},[W](e,t,r){const n=(0,x.oH)(e,t),s=(0,x.IB)(e,{providerEntityID:n.get("providerEntityID")}),a=n.get("ratingKey"),o=n.get("watchlistedAt"),c=o?void 0:Date.now();n.set("watchlistedAt",c);const l=s.get("features").get(C.c.ACTIONS).get("actions").get("addToWatchlist"),u=c?l.get("key"):l.get("reverseKey"),p=d.c.join(u,{ratingKey:a}),m=s.getXHROptions(p,{type:"PUT"});i().ajax(m).then((()=>{t.metricsPage===w.wh&&t.metricsProperties.context.includes(E.LIBRARY)?r((0,I.SK)({serverEntityID:t.serverEntityID})):r($({metadataItemEntityID:t.metadataItemEntityID}))}),(e=>{const t=(0,T.c)(e.responseText);r((0,I._K)(t.message)),n.set("watchlistedAt",o)}))},[B](e,t,r){const n=(0,x.oH)(e,t),s=(0,x.Ww)(e,t),a=(0,x.IB)(e,{providerEntityID:n.get("providerEntityID")}),o=t.sectionKey.match(/\/library\/sections\/(\w+)/)[1],c={providers:`provider://${a.get("identifier")}`,prefs:{oneShot:1,remoteMedia:1},params:{libraryType:L.cp.get(L.y6).typeID},targetLibrarySectionID:o,hints:{guid:n.get("guid"),ratingKey:n.get("ratingKey"),title:n.get("title"),parentTitle:n.get("parentTitle")},type:(0,N.GG)(n.get("type")).id},l=s.getXHROptions(d.c.join("/media/subscriptions",c),{type:"POST"});i().ajax(l)},[H](e,t,r){const{streamKey:n,metadataItemEntityID:s}=t,a=(0,x.oH)(e,t);(0,A.SS)((()=>{a.set("isStreamDeleteInProgress",!0)}));const o=a.server.getXHROptions(n,{type:"DELETE"});i().ajax(o).then((()=>{a.set("isStreamDeleteInProgress",!1),r($({metadataItemEntityID:s}))}),(e=>{a.set("isStreamDeleteInProgress",!1),r((0,I._K)((0,R.c)("There was a problem deleting this stream.")))}))},[z](e,t,r){const{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,metricsPage:o,updateLocalOnly:c}=t;P((0,x.oH)(e,t),{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,allowMetrics:!!o,metricsProperties:{page:o},updateLocalOnly:c}).fail((e=>{e&&e.aborting||r((0,I._K)((0,R.c)("There was a problem selecting this stream.")))}))},[G](e,t){const r=(0,x.oH)(e,t),n=(0,x.IB)(e,t),s=n&&O._u(n.get("identifier"),O.Im)?n:(0,x.y0)(e),a=(0,M.c)(r.get("addToWatchlistGuid"));if(a){const e=`/library/metadata/${a}/userState`,t=s.getXHROptions(e,{type:"GET",dataType:"json"});r.set({isInUniversalWatchlistFetched:!1}),i().ajax(t).promise().done((e=>{(0,A.SS)((()=>{var t,n;r.set({isInUniversalWatchlist:!!(null==(n=null==(t=null==e?void 0:e.MediaContainer)?void 0:t.UserState)?void 0:n[0].watchlistedAt),isInUniversalWatchlistFetched:!0})}))}))}},[q](e,t){(0,x.oH)(e,t).set("isInUniversalWatchlist",!0)},[K](e,t){(0,x.oH)(e,t).set("addToWatchlistGuid",t.guid)}}},45771:(e,t,r)=>{"use strict";r.d(t,{IH:()=>b,O4:()=>g,Uv:()=>P,WO:()=>I,_A:()=>v,_c:()=>f,qW:()=>w,qm:()=>E,u4:()=>S});var n=r(55340),i=r(60352),s=r(52108),a=r(58036),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>c(e,l(t));const g="provider/fetchCloudProviders",f="provider/populateCloudProviders",v="providers/fetchProvider",b="providers/populateProvider",S=(0,n.c)(g),P=(0,n.c)(f),I=(0,n.c)(v,(e=>{const{options:t={}}=e;return y(h({},e),{options:y(h({},t),{allowHeadersInUrl:!1})})})),E=(0,n.c)(b),w={[g]:(0,i.c)({key:"providers",getModel:a.s7}),[f]:(0,s.c)({key:"providers",fetchActionCreator:S,getModel:a.s7}),[v]:(0,i.c)({getModel:a.IB}),[b]:(0,s.c)({getModel:a.IB,fetchActionCreator:I})}},96636:(e,t,r)=>{"use strict";r.d(t,{U9:()=>x,mY:()=>O,ob:()=>D,q0:()=>w,uu:()=>L,yK:()=>k});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(55340),c=r(60352),l=r(52108),d=r(90044),u=r(88371),p=r(58036),m=r(89448),h=r(96504),y=r(84676);const g="provider/providerSettings/fetchProviderSettings",f="provider/providerSettings/fetchProviderSettingSelectOptions",v="provider/provderSettings/clearProviderSettingFetchError",b="provider/providerSettings/fetchProviderSettingLocationOptions",S="provider/providerSettings/populateProviderSettingLocationOptions",P="provider/providerSettings/updateProviderSetting",I="provider/providerSettings/clearProviderSettingUpdateError",E="provider/providerSettings/populateProviderSettingOptions",w=(0,o.c)(g),C=(0,o.c)(f),O=(0,o.c)(v),M=(0,o.c)(b),T=(0,o.c)(S),D=(0,o.c)(P),k=(0,o.c)(I),x=(0,o.c)(E);function A(e,t){return(0,p.IB)(e,t).get("features").get(d.c.SETTINGS)}function R(e,t){return A(e,t).get("settings").get(t.settingID)}function N(e,t,r){const n=a().mapObject(t,((e,t)=>!0===e?"1":!1===e?"0":e)),s=h.c.join(a().result(e,"url"),{prefs:n}),o=r.getXHROptions(s,{type:"PUT"});return i().ajax(o).then((()=>{!function(e,t){switch(e.get("type")){case u.y4:{const r=e.get("locations").get(t.country);e.set({country:t.country,countryLabel:r.get("title"),postalCode:t.postalCode});break}case u.uW:a().each(t,((t,r)=>{e.get("options").get(r).set({selected:t})})),e.set("selectedCount",a().values(t).filter((e=>e)).length);break;default:e.set("value",t[e.id])}}(e,t)}))}const L={[g]:(0,c.c)({key:"settings",getModel:A}),[f]:(0,c.c)({key:"options",getModel:R}),[b]:(0,c.c)({key:"locations",getModel:R}),[S]:(0,l.c)({key:"locations",fetchActionCreator:M,getModel:R}),[P](e,t){const{settingID:r,values:n}=t,s=(0,p.IB)(e,t),a=s.get("features").get(d.c.SETTINGS),o=e.get("ui").get("providerSettingsPage"),c=a.get("settings").get(r);o.set({isUpdatePending:!0,updateError:null});const l=[];c.get("type")===u.q2?c.get("settings").forEach((e=>{const t={[e.id]:n[e.id]};l.push(N(e,t,s))})):c.get("type")===u.im?(Object.keys(n).forEach((e=>{n[e]=parseInt(n[e],10)})),l.push(N(c,n,s))):l.push(N(c,n,s)),i().when(...l).then((()=>{o.set({isUpdatePending:!1,updateError:null})}),(e=>{o.set({isUpdatePending:!1,updateError:(0,y.c)(e)})}))},[I](e,t){e.get("ui").get("providerSettingsPage").set("updateError",null)},[v](e,t){R(e,t).set({optionsError:null,locationsError:null})},[E](e,t,r){const n=R(e,t).get("type");n===u.uW?(0,m.SS)((()=>{r(C(t))})):n===u.y4&&r(T(t))}}},54268:(e,t,r)=>{"use strict";r.d(t,{AR:()=>w,Av:()=>k,Ax:()=>S,EH:()=>U,I3:()=>N,KN:()=>O,M3:()=>b,Mp:()=>I,O_:()=>y,Oc:()=>P,Q$:()=>v,SO:()=>A,Wg:()=>L,Wv:()=>M,_Q:()=>x,a4:()=>u,ak:()=>p,am:()=>F,cQ:()=>g,e6:()=>m,gl:()=>h,k3:()=>R,mI:()=>C,oL:()=>T,qO:()=>D,uI:()=>f,vH:()=>j,wn:()=>E});var n=r(95720),i=r.n(n),s=r(55340),a=r(60352),o=r(52108),c=r(21248),l=r(58036),d=r(89448);const u="server/testServer",p="server/testServers",m="server/confirmRelayConnection",h="server/addHttpFallbackConnection",y="server/startActivity",g="server/updateActivity",f="server/finishActivity",v="server/startSyntheticActivity",b="server/finishSyntheticActivity",S="server/eventConnectionOpen",P="server/eventConnectionClose",I="server/fetchProviders",E="server/populateProviders",w="server/fetchLibraries",C="server/populateLibraries",O=(0,s.c)(u),M=((0,s.c)(p),(0,s.c)(m)),T=(0,s.c)(h),D=(0,s.c)(y),k=(0,s.c)(g),x=(0,s.c)(f),A=(0,s.c)(v),R=(0,s.c)(b),N=(0,s.c)(S),L=(0,s.c)(P),j=(0,s.c)(I),U=((0,s.c)(E),(0,s.c)(w)),F=((0,s.c)(C),{[m](e,t){},[h](e,t){},[y](e,t,r){const n=(0,l.CA)(e,t);if(!n)return;const i=t.activity;n.get("activities").add([i],{parse:!0}),i.synthetic||r(R({serverEntityID:t.serverEntityID,activityType:i.type}))},[g](e,t){const r=(0,l.CA)(e,t);r&&r.get("activities").add([t.activity],{parse:!0,merge:!0})},[f](e,t){const r=(0,l.CA)(e,t);r&&r.get("activities").remove(t.activity.uuid)},[v](e,t,r){(0,d.SS)((()=>{const e={type:t.activityType,synthetic:!0,uuid:`${t.activityType}-${Date.now()}`};t.title&&(e.title=t.title),t.Context&&(e.Context=t.Context),r(D({serverEntityID:t.serverEntityID,activity:e}))}))},[b](e,t){const r=(0,l.CA)(e,t);if(!r)return;const n=r.get("activities"),{activityType:s,Context:a,title:o}=t,c=n.findWhere((e=>e.get("type")===s&&!0===e.get("synthetic")&&(!o||e.get("title")===o)&&(!a||i().isEqual(e.get("Context"),a))));c&&n.remove(c)},[S](e,t){const r=(0,l.Ww)(e,t),n=(0,l.CA)(e,t);if(!r||!n)return;const i=n.get("activities");r.set("hasEventConnection",!0),i.fetch()},[P](e,t){const r=(0,l.Ww)(e,t);r&&r.set("hasEventConnection",!1)},[I]:(0,a.c)({key:"providers",getModel:l.Ww}),[E]:(0,o.c)({key:"providers",fetchActionCreator:j,getModel:l.Ww}),[w]:(0,a.c)({key:"libraries",getModel:l.CA}),[C]:(0,o.c)({key:"libraries",fetchActionCreator:U,getModel:l.CA}),[u](e,t){const r=(0,l.Ww)(e,t);c.c.trigger("test:server",r)},[p](){c.c.trigger("test:servers")}})},42540:(e,t,r)=>{"use strict";r.d(t,{Cg:()=>h,Mp:()=>v,WA:()=>y,uA:()=>g});var n=r(15568),i=r(55340),s=r(76800),a=r(87296),o=r(57204),c=r(99204),l=r(42728),d=r(58036);const u="ui/initAddToPlaylistMenu",p="ui/clearAddToPlaylistMenu",m="ui/addToExistingPlaylist",h=(0,i.c)(u),y=(0,i.c)(p),g=(0,i.c)(m);function f(e){return e.get("ui").get("addToPlaylistMenu")}const v=(0,s.c)({[u](e,t){const r=f(e),i=(0,d.wb)(e,t),s=(0,d.Gs)(e,t),o=e.get("ui").get("multiSelect"),c=(0,d.Ww)(e,t),l=(0,d.IB)(e,t),u=i?(0,d.IB)(e,{providerEntityID:i.get("providerEntityID")}):l,{containerKey:p,uri:m}=(0,a.c)({providerModel:l,itemProviderModel:u,metadataItemModel:i,metadataListModel:s,multiSelectModel:o,recent:!0}),h=new n.c({containerKey:p},{server:c,provider:l});r.set({recentPlaylists:h,uri:m})},[p](e){f(e).restoreDefaults()},[m](e,t){const r=f(e),n=(0,d.IB)(e,t),i=r.get("uri"),{playlistID:s}=t,a={playlistID:s,providerModel:n,uri:i};(0,c.c)(e,l.sv)&&(a.includeExternalMedia=!0),(0,o.c)(a)}})},11852:(e,t,r)=>{"use strict";r.d(t,{Ed:()=>S,Kl:()=>g,Wy:()=>b,cD:()=>f,k3:()=>v});var n=r(37588),i=r.n(n),s=r(52180),a=r(25100),o=r(55340),c=r(56960),l=r(58036),d=r(89448),u=r(84676);const p="ui/advertisingNoticeModal/fetchVendors",m="ui/advertisingNoticeModal/setAdConsent",h="ui/advertisingNoticeModal/resetAdConsent",y="ui/advertisingNoticeModal/trackAdConsentAction",g=(0,o.c)(p),f=(0,o.c)(m),v=(0,o.c)(h),b=(0,o.c)(y),S={[p](e){const t=e.get("user"),r=e.get("ui").get("advertisingNoticeModal");r.get("vendors")||r.set("vendors",new a.c([],{server:t.server})),r.set({isVendorsPending:!0,isVendorsPopulated:!1,vendorsError:null}),r.get("vendors").fetch().then((()=>{r.set({isVendorsPending:!1,isVendorsPopulated:!0})}),(e=>{r.set({isVendorsPending:!1,isVendorsPopulated:!1,vendorsError:(0,u.c)(e)})}))},[m](e,t){const r=e.get("user"),n=e.get("ui").get("advertisingNoticeModal");(0,d.SS)((()=>{n.set({isSaving:!0})}));const s=n.get("vendors");i().ajax(r.server.getXHROptions("/api/v2/user/consent",{type:"PUT",dataType:"json",data:JSON.stringify({language:t.language,vendors:s.map((e=>({id:e.get("id"),consent:t.consent})))}),headers:{"Content-Type":"application/json",Accept:"application/json"}})).then((()=>r.get("consent").fetch()),(()=>{const e=Math.round(Date.now()/1e3);r.get("consent").set({remindAt:e+86400,updatedAt:e})})).always((()=>{n.set({isSaving:!1,isSaved:!0})}))},[h](e){e.get("ui").get("advertisingNoticeModal").restoreDefaults()},[y](e,{advertisingNoticePayload:t,action:r}){const n=t?l.IB(e,t):void 0,i={page:c.G_,action:r,identifier:null==n?void 0:n.get("identifier")};if(null==t?void 0:t.metadataItemEntityID){const r=l.oH(e,t);i.type=r.get("type")}(0,s.WI)("metrics").trackClick(i)}}},80324:(e,t,r)=>{"use strict";r.d(t,{G8:()=>D,Y1:()=>k,_M:()=>T,_Q:()=>R,_k:()=>M,me:()=>O});var n=r(15568),i=r(55340),s=r(76800),a=r(87296),o=r(57204),c=r(99204),l=r(42728),d=r(56792),u=r(58036),p=r(87644),m=r(89448),h=r(84676),y=Object.defineProperty,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e};const P="ui/modal/initAddToPlaylistModal",I="ui/modal/clearAddToPlaylistModal",E="ui/modal/selectDestination",w="ui/modal/createPlaylist",C="ui/modal/addToPlaylist",O=(0,i.c)(P),M=(0,i.c)(I),T=(0,i.c)(E),D=(0,i.c)(w),k=(0,i.c)(C);function x(e){return e.get("ui").get("addToPlaylistModal")}function A(e,t){(0,m.SS)((()=>{e.set({isUpdating:!0,error:null})})),(0,o.c)(t).then((()=>{e.set({isUpdating:!1})}),(t=>{e.set({isUpdating:!1,error:(0,h.c)(t)})}))}const R=(0,s.c)({[P](e,t,r){const n=x(e);let i,s,a,o,c="";if(t.metadataItemEntityID)i=(0,u.oH)(e,t),c=d.c.title(i);else if(t.metadataListEntityID)s=(0,u.cF)(e,t),c=d.c.title(s);else if(t.playQueueID)o=(0,p.EJ)(e,t.playQueueID);else{a=e.get("ui").get("multiSelect");const t=a.get("activeSelectionItems").pluck("model");c=d.c.title(t,{items:t})}n.set({title:c,smart:t.smart,metadataItem:i,metadataList:s,multiSelect:a,playQueue:o}),r(T(t))},[I](e){x(e).restoreDefaults()},[E](e,t){const r=x(e),i=(0,u.Ww)(e,t),s=(0,u.IB)(e,t),o=r.get("metadataItem"),c=r.get("metadataList"),l=r.get("multiSelect"),d=r.get("playQueue"),p=r.get("smart"),m=o?(0,u.IB)(e,{providerEntityID:o.get("providerEntityID")}):s,{containerKey:h,playlistType:y,uri:g}=(0,a.c)({providerModel:s,itemProviderModel:m,metadataItemModel:o,metadataListModel:c,multiSelectModel:l,playQueueModel:d}),f=new n.c({containerKey:h},{server:i,provider:s});r.set({server:i,provider:s,type:y,smart:p,containerKey:h,uri:g,playlists:f})},[w](e,t){const r=x(e),n=r.get("provider"),i=r.get("playQueue"),{formData:s}=t;let a=r.pick("type","title","uri","smart");a=S(S({},a),s),a.providerModel=n,i&&(a.playQueueID=i.get("playQueueID")),(0,c.c)(e,l.sv)&&(a.includeExternalMedia=!0),A(r,a)},[C](e,{playlistID:t}){const r=x(e),n=r.get("provider"),i=r.get("playQueue"),s={playlistID:t,providerModel:n,uri:r.get("uri")};i&&(s.playQueueID=i.get("playQueueID")),(0,c.c)(e,l.sv)&&(s.includeExternalMedia=!0),A(r,s)}})},96944:(e,t,r)=>{"use strict";r.d(t,{js:()=>R,kR:()=>k,o$:()=>j,Ki:()=>L,Ko:()=>D,xw:()=>F,eM:()=>N,yy:()=>A});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(64504),c=r(44412),l=r(55340),d=r(76800),u=r(60352),p=r(58036),m=r(27800),h=r(51100),y=r(59396);function g(e,t){let r;return r=401===e.status?(0,y.c)("You do not have permission to perform this action."):(0,h.c)(e,t),r}var f=r(89448),v=r(12612),b=r(96504);const S="ui/modal/initMediaSubscriptionModal",P="ui/modal/clearMediaSubscriptionModal",I="ui/modal/fetchMediaSubscription",E="ui/modal/saveMediaSubscription",w="ui/modal/changeMediaSubscriptionTemplateMode",C="ui/modal/clearMediaSubscriptionModalError",O="ui/modal/moveMediaSubscriptionModal",M="ui/modal/deleteMediaSubscriptionModal",T="ui/modal/deleteMediaGrabOperationsModal",D=(0,l.c)(S),k=(0,l.c)(P),x=(0,l.c)(I),A=(0,l.c)(E),R=(0,l.c)(w),N=((0,l.c)(C),(0,l.c)(O)),L=(0,l.c)(M),j=(0,l.c)(T);function U(e){return e.get("ui").get("mediaSubscriptionModal")}const F=(0,d.c)({[S](e,t,r){const n=U(e);n.set("isMediaSubscriptionPending",!0);const s={};if(t.showConflicts&&(s.options={data:{includeGrabs:1}}),t.mediaSubscriptionEntityID)return n.set({mediaSubscription:(0,p.U5)(e,t)}),void r(x(s));const a=(0,p.Ww)(e,t),l=(0,p.oH)(e,t),d=l.get("grandparentSubscriptionID")||l.get("subscriptionID");if(d)return n.set({mediaSubscription:new o.c({key:d},{server:a})}),void r(x(s));const u=b.c.join("/media/subscriptions/template",{guid:l.get("guid")}),m=a.getXHROptions(u);i().ajax(m).then((e=>{const t={parse:!0,server:a},r=new c.c(e,t),i=r.findWhere({selected:!0});n.set({isMediaSubscriptionPending:!1,isMediaSubscriptionPopulated:!0,mediaSubscriptionError:null,templates:r,mediaSubscription:i})}),(e=>{const t=g(e,(0,y.c)("There was an unexpected error"));n.set({isMediaSubscriptionPending:!1,mediaSubscriptionError:t})}))},[P](e){U(e).restoreDefaults()},[I]:(0,u.c)({key:"mediaSubscription",getModel:U}),[E](e,t){const r=U(e),n=(0,p.Ww)(e,t),s=r.get("mediaSubscription"),{targetLibrarySectionID:o,targetSectionLocationID:c=null,prefs:l}=t;(0,f.SS)((()=>{r.set({isMediaSubscriptionSaving:!0,mediaSubscriptionSaveError:null})}));const d=s.get("key"),u=s.getSaveParams(),m=i().extend(!0,{},u,{includeGrabs:1,targetLibrarySectionID:o,targetSectionLocationID:c,prefs:l});let h=b.c.join(a().result(s,"url"),m);if(!d){const e=(0,v.GG)(s.get("hint").get("type"));h=h+"&"+s.get("parameters")+"&type="+e.id}const S=n.getXHROptions(h,{type:d?"PUT":"POST"});i().ajax(S).then((n=>{if(s.set(s.parse(n)),r.set({isMediaSubscriptionSaving:!1}),t.metadataItemEntityID){const r=(0,p.oH)(e,t);if(r){const e=s.get("hint").get("type"),t=(0,v.Av)(e),n=t?"grandparentSubscriptionID":"subscriptionID",i=t?"grandparentSubscriptionType":"subscriptionType";r.set({[n]:s.id,[i]:e})}}}),(e=>{const t=g(e,(0,y.c)("There was a problem saving your changes. Please try again."));r.set({isMediaSubscriptionSaving:!1,mediaSubscriptionSaveError:t})}))},[w](e,t){const r=U(e),n=r.get("templates"),{modeIndex:i}=t;r.set("mediaSubscription",n.at(i))},[C](e,t){U(e).set({mediaSubscriptionSaveError:null,mediaSubscriptionError:null,mediaSubscriptionMoveError:null,mediaSubscriptionDeleteError:null})},[O](e,t){const r=U(e),n=r.get("mediaSubscription");(0,f.SS)((()=>{r.set({isMediaSubscriptionMoving:!0,mediaSubscriptionMoveError:null})})),(0,m.c)(n).then((()=>{r.set({isMediaSubscriptionMoving:!1})}),(e=>{const t=g(e,(0,y.c)("There was a problem saving your changes. Please try again."));r.set({isMediaSubscriptionMoving:!1,mediaSubscriptionMoveError:t})}))},[M](e,t,r){const n=U(e),i=n.get("mediaSubscription"),{metadataItemEntityID:s}=t;(0,f.SS)((()=>{n.set({isMediaSubscriptionDeleting:!0,mediaSubscriptionDeleteError:null})})),function(e,{appModel:t,metadataItemEntityID:r}={}){const n=e.get("key");let i=e.destroy({wait:!0});return r&&(i=i.then((()=>{if(r){const e=(0,p.oH)(t,{metadataItemEntityID:r});e.get("subscriptionID")===n?(e.unset("subscriptionID"),e.unset("subscriptionType")):e.get("grandparentSubscriptionID")===n&&(e.unset("grandparentSubscriptionID"),e.unset("grandparentSubscriptionType"))}}))),i}(i,{appModel:e,metadataItemEntityID:s}).then((()=>{n.set({isMediaSubscriptionDeleting:!1})}),(e=>{const t=g(e,(0,y.c)("There was a problem with canceling this subscription. Please try again."));n.set({isMediaSubscriptionDeleting:!1,mediaSubscriptionDeleteError:t})}))},[T](e,t){const r=U(e),n=r.get("mediaSubscription");var s;(0,f.SS)((()=>{r.set({isMediaSubscriptionDeleting:!0,mediaSubscriptionDeleteError:null})})),(s=n.get("grabOperations"),i().when(...s.map((e=>e.destroy({wait:!0})))).then((()=>{}))).then((()=>{r.set({isMediaSubscriptionDeleting:!1})}),(e=>{const t=g(e,(0,y.c)("There was a problem with modifying this subscription. Please try again."));r.set({isMediaSubscriptionDeleting:!1,mediaSubscriptionDeleteError:t})}))}})},84360:(e,t,r)=>{"use strict";r.d(t,{gz:()=>te,G0:()=>le,vh:()=>ce,ae:()=>ee,Ko:()=>Z,KI:()=>he,Ax:()=>ne,oH:()=>ie,KK:()=>oe,iu:()=>se,EP:()=>ae,Ky:()=>J,sf:()=>re,a2:()=>de});var n=r(37588),i=r.n(n),s=r(52180),a=r(46748),o=r(55340),c=r(96488),l=r(16044),d=r(84228),u=r(22316),p=r(51100),m=r(59396);function h(e,t,r,n){const s=e.server.get("isCloud"),a=encodeURIComponent(r),o=s?`/channels/${a}/tune`:`/livetv/dvrs/${t}/channels/${a}/tune`,c={method:"POST",headers:{"X-Plex-Session-Identifier":n.playbackSessionID},timeout:u.oJ};return i().ajax(s?e.provider.getXHROptions(o,c):e.server.getXHROptions(o,c)).then(((n,a,o)=>{e.set(e.parse(n));const c=e.get("grabOperation");if(!c){const e=(0,p.c)(o,(0,m.c)("Could not tune channel"));return i().Deferred().reject({errorMessage:e}).promise()}const l=c.get("metadataItem"),d=l.get("Media")[c.get("mediaIndex")],u=c.get("conflicts"),h=o.getResponseHeader("X-Plex-Activity"),y=c.get("beginsAt"),g=l.get("transcodeSession"),f={dvrID:t,channelIdentifier:r,channelCallSign:d.channelCallSign,channelTitle:d.channelTitle,activityUUID:h,currentPosition:y,startedAt:y};let v=!1;if(g){const t=g.get("timeStamp"),r=g.get("minOffsetAvailable"),n=g.get("maxOffsetAvailable");if(t&&null!=r&&null!=n){f.captureBuffer={startedAt:t,seekStartSeconds:r,seekEndSeconds:n};const i=t+r,s=e.get("timeline").toJSON().reduce(((e,t)=>e||t.Media.find((e=>e.onAir))),null).beginsAt,a=Math.max(i,s);Date.now()/1e3-a>60&&(v=!0)}}if(e.set(f),s)return i().Deferred().resolve(e).promise();if(u&&u.length)return i().Deferred().reject({hasConflicts:!0,liveTVSession:e}).promise();if(!h)return i().Deferred().reject({errorMessage:(0,m.c)("Could not tune channel (No activity)")}).promise();const b=d&&d.Part;return b&&b.length?(l.set("isPreFetched",!0),v?i().Deferred().reject({confirmPlayback:v,liveTVSession:e}).promise():i().Deferred().resolve(e).promise()):i().Deferred().reject({errorMessage:(0,m.c)("Could not tune channel (No parts)")}).promise()}),((e,t)=>"abort"===t?i().Deferred().reject({errorMessage:(0,m.c)("Could not tune channel (Timed out)")}).promise():i().Deferred().reject({errorMessage:(0,m.c)("Could not tune channel")}).promise()))}var y=r(64139),g=r(54268),f=r(17472),v=r(95188),b=r(65724),S=r(4008),P=r(72500),I=r(41192),E=r(30496),w=r(80096),C=r(58036),O=r(87644),M=r(89448),T=r(84676),D=r(35688),k=Object.defineProperty,x=Object.defineProperties,A=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const U="ui/player/liveTVPlayer/startLiveTVPlayback",F="ui/player/liveTVPlayer/endLiveTVPlayback",V="ui/player/liveTVPlayer/confirmLiveTVPlayback",_="ui/player/liveTVPlayer/cancelConfirmLiveTVPlayback",W="ui/player/liveTVPlayer/updatePlayerLiveTVMetadata",B="ui/player/liveTVPlayer/playNextItem",H="ui/player/liveTVPlayer/playPreviousItem",z="ui/player/liveTVPlayer/skipBack",G="ui/player/liveTVPlayer/skipForward",q="ui/player/liveTVPlayer/stepBack",K="ui/player/liveTVPlayer/stepForward",Q="ui/player/liveTVPlayer/seek",$="ui/player/liveTVPlayer/clearPlayerConflicts",Y="ui/player/liveTVPlayer/cancelMediaGrabber",X="ui/player/liveTVPlayer/updateSessionMetadataItems",J=(0,o.c)(U),Z=(0,o.c)(F),ee=(0,o.c)(V),te=(0,o.c)(_),re=(0,o.c)(W),ne=(0,o.c)(B),ie=(0,o.c)(H),se=(0,o.c)(z),ae=(0,o.c)(G),oe=((0,o.c)(q),(0,o.c)(K),(0,o.c)(Q)),ce=(0,o.c)($),le=(0,o.c)(Y),de=(0,o.c)(X);function ue(e,t){const r=Math.floor(Date.now()/1e3);return e.get("Media").find((e=>{const n=e.beginsAt<=r&&r<=e.endsAt,i=!t||e.channelIdentifier===t;return n&&i}))}function pe(e){const t=ue(e);return t?t.channelIdentifier:void 0}function me(e,t){const r=(0,O.OG)(e,t).get("liveTVSession");r&&r.set("lastSeekPosition",r.get("currentPosition"))}const he={[U](e,t,r){const n=Date.now(),i=(0,l.c)(e,t),o=i.serverModel.entityID(),d=i.providerModel.entityID(),u=(0,c.c)(i),p=S.Qb(u),g=(0,O.OG)(e,p),f=i.providerModel.get("parentID"),C=i.metadataItemModel,T=(0,E.c)(i.providerModel.get("identifier"),i.providerModel.get("providerIdentifier"));let k=null;if(C?k=ue(C,i.identifier):i.identifier&&(k={channelIdentifier:i.identifier,beginsAt:Math.floor(Date.now()/1e3)}),!k)return void(0,M.SS)((()=>{g.restoreDefaults({hasError:!0,errorMessage:(0,m.c)("Unable to tune channel (Not on air)")})}));const U=e.get("remotePlayer");if(U&&!(0,w.c)({protocol:U.get("protocol"),protocolCapabilities:U.get("protocolCapabilities"),providerIdentifier:T,userFeaturesByUUID:(0,y.c)(e)}))return void(0,M.SS)((()=>{g.set({hasError:!0,errorMessage:(0,m.c)("Live TV is not currently supported when connected to a remote player.")})}));(0,M.SS)((()=>{g.restoreDefaults({serverEntityID:o,providerEntityID:d,isOpen:!0,openState:b.m,isPlayQueueLoading:!0,isMediaLoading:!0,playbackStartTime:n})}));const F=new a.c({},{server:i.serverModel,provider:i.providerModel}),V=k.channelIdentifier;h(F,f,V,{playbackSessionID:g.get("playbackSessionID")}).done((()=>{g.set("liveTVSession",F);const e=F.get("grabOperation").get("metadataItem");var i,s;r((0,D.wb)((i=((e,t)=>{for(var r in t||(t={}))N.call(t,r)&&j(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&j(e,r,t[r]);return e})({},t),s={liveTVSessionEntityID:F.entityID(),metadataItemEntityID:e.entityID(),playbackStartTime:n,options:{offset:void 0}},x(i,A(s))))),r(de({liveTVSessionEntityID:F.entityID()}))})).fail((e=>{const{confirmPlayback:t,hasConflicts:r,errorMessage:n}=e;if(t)g.restoreDefaults({serverEntityID:o,providerEntityID:d,liveTVSession:F,confirmLiveTVPlayback:t});else if(r)g.restoreDefaults({serverEntityID:o,providerEntityID:d,liveTVSession:F,hasConflicts:r});else{const e=i.serverModel.getState();(0,s.WI)("metrics").trackEvent({event:v.aY,interaction:!0,properties:{serverType:(0,I.c)(e),connectionType:(0,P.c)(e.activeConnection),error:"tuneFailed",identifier:V}}),g.restoreDefaults({hasError:!0,errorMessage:n})}}))},[F](e,t,r){const{playerType:n,showError:i}=t,s=(0,O.OG)(e,n);i?s.restoreDefaults({hasError:!0,errorMessage:(0,m.c)("This live TV session has ended due to a recording conflict")}):r((0,D.WS)({playerType:n}))},[V](e,t,r){const{playerType:n,serverEntityID:i,providerEntityID:s,offset:a}=t,o=(0,O.OG)(e,n).get("liveTVSession"),c=o.get("captureBuffer"),l=o.get("grabOperation").get("metadataItem");if(null!=a){const e=c.startedAt+Math.floor(a/1e3);o.set({currentPosition:e,lastSeekPosition:e})}r((0,D.wb)({serverEntityID:i,providerEntityID:s,liveTVSessionEntityID:o.entityID(),metadataItemEntityID:l.entityID(),startOffsetMilliseconds:a}))},[_](e,{playerType:t}){const r=(0,O.OG)(e,t);(0,M.SS)((()=>{r.restoreDefaults()}))},[W](e,t){const{serverEntityID:r,playerType:n}=t,i=(0,O.OG)(e,n),s=i.get("liveTVSession"),a=i.get("hasConflicts");if(!s||i.get("serverEntityID")!==r||a)return;const o=s.get("dvrID"),c=s.get("channelIdentifier");h(s,o,c,{playbackSessionID:i.get("playbackSessionID")})},[B](e,{playerType:t},r){const n=(0,O.OG)(e,t),i=d.kn(n);d.KK(e,t,i,r)},[H](e,{playerType:t},r){const n=(0,O.OG)(e,t),i=d.Ib(n);d.KK(e,t,i,r)},[z](e,{playerType:t},r){const n=(0,O.OG)(e,t),i=d.gl(n);d.KK(e,t,i,r)},[G](e,{playerType:t},r){const n=(0,O.OG)(e,t),i=d.q(n);d.KK(e,t,i,r)},[q](e,{playerType:t},r){const n=(0,O.OG)(e,t),i=d.qq(n);d.KK(e,t,i,r)},[K](e,{playerType:t},r){const n=(0,O.OG)(e,t),i=d.Ud(n);d.KK(e,t,i,r)},[Q](e,t,r){const{playerType:n,seekPosition:i}=t;d.KK(e,n,i,r)},[$](e,{playerType:t}){const r=(0,O.OG)(e,t);(0,M.SS)((()=>{r.set({hasConflicts:!1})}))},[Y](e,t,r){const{playerType:n,grabOperationKey:s}=t,a=(0,O.OG)(e,n),o=a.get("serverEntityID"),c=C.Ww(e,{serverEntityID:o}),l=a.get("liveTVSession").get("grabOperation").get("metadataItem"),d=!a.get("isOpen");if(d&&!pe(l))return void a.restoreDefaults({hasError:!0,errorMessage:(0,m.c)("Unable to cancel conflict, please try again.")});(0,M.SS)((()=>{a.set({isConflictCancelling:!0})}));const u=c.getXHROptions(s,{type:"DELETE"});i().ajax(u).done((e=>{if(a.set({hasConflicts:!1,isConflictCancelling:!1,cancelConflictError:null}),d){const e=a.get("providerEntityID");if(!pe(l))return void a.restoreDefaults({hasError:!0,errorMessage:(0,m.c)("Unable to tune channel after canceling a conflict, please try again.")});r(J({serverEntityID:o,providerEntityID:e,metadataItemEntityID:l.entityID(),playerType:n}))}})).fail((e=>{a.set({isConflictCancelling:!1,cancelConflictError:(0,T.c)(e)})}))},[g.cQ](e,t){const{serverEntityID:r,activity:n}=t,i=(0,O.OG)(e,S.k9),s=i.get("liveTVSession");if(s&&i.get("serverEntityID")===r&&s.get("activityUUID")===n.uuid&&n.Context){const e=!!n.Context.conflicts,t=i.get("hasConflicts");if(e&&!t){const e=s.get("dvrID"),t=s.get("channelIdentifier");h(s,e,t,{playbackSessionID:i.get("playbackSessionID")}).fail((({hasConflicts:e})=>{e&&i.set({hasConflicts:!0})}))}else!e&&t&&i.set({hasConflicts:!1})}},[g.uI](e,t,r){const{serverEntityID:n,activity:i}=t,s=(0,O.OG)(e,S.k9),a=s.get("liveTVSession");if(a&&s.get("serverEntityID")===n&&a.get("activityUUID")===i.uuid){let e=(0,m.c)("This live TV session has ended");i.Response&&i.Response.errorText?e=i.Response.errorText:s.get("hasConflicts")&&(e=(0,m.c)("This live TV session has ended due to a recording conflict")),s.restoreDefaults({hasError:!0,errorMessage:e})}},[f.sD](e,{playerType:t}){me(e,t)},[f.W0](e,{playerType:t}){me(e,t)},[f.Ul](e,{playerType:t,positionSeconds:r}){const n=(0,O.OG)(e,t),i=n.get("liveTVSession");if(!i)return;const s=n.get("serverEntityID");if(C.Ww(e,{serverEntityID:s}).get("isCloud"))(0,M.SS)((()=>{const e=n.get("playbackStartTime"),t=n.get("sessionPlaybackTime");i.set({currentPosition:Math.floor((e+t)/1e3)})}));else{const e=i.get("startedAt"),t=i.get("lastSeekPosition"),n=e+r;n>t&&(0,M.SS)((()=>{i.set({currentPosition:n,lastSeekPosition:null})}))}},[X](e,t){const{liveTVSessionEntityID:r,newAiringMetadataItem:n,newUpNextMetadataItem:i}=t,s=C.gz(e,{liveTVSessionEntityID:r}),a=s.get("channelIdentifier"),o=s.get("currentPosition"),c=s.get("airingMetadataItem");if(c&&ue(c))return;let l,d;if(n||i)l=n,d=i;else{const t=function(e){return e.get("ui").get("channelGridPage")}(e),r=t.get("metadataList"),n=null==r?void 0:r.get("metadataItems");if(!(null==n?void 0:n.length))return;for(let e=0;e<n.length;e++){const t=n.at(e),r=t.get("Media");for(let e=0;e<r.length;e++){const n=r[e];n.channelIdentifier===a&&n.beginsAt<=o&&n.endsAt>o&&(l=t),!d&&n.channelIdentifier===a&&n.beginsAt>o&&(d=t)}}}s.set({airingMetadataItem:l,upNextMetadataItem:d})}}},95140:(e,t,r)=>{"use strict";r.d(t,{UF:()=>l,cT:()=>d});var n=r(17900),i=r(55340),s=r(76800),a=r(87644),o=r(96504);const c="ui/player/photoPlayer/fetchRelatedPhotos",l=(0,i.c)(c),d=(0,s.c)({[c](e){const t=(0,a.OG)(e,"photo"),r=t.get("playQueue").get("currentIndex"),i=(0,a.UH)(t,r).get("metadataItem"),s=i.get("key"),c=o.c.join([s.replace("/library/","/hubs/"),"related"]),l=new n.c([],{server:i.server,provider:i.provider,metadataItem:i,hubKey:c,hubCount:8});t.set({relatedHubs:l}),i.get("isLibraryItem")&&l.fetch()}})},66816:(e,t,r)=>{"use strict";r.d(t,{Ax:()=>j,Er:()=>w,G6:()=>V,GO:()=>H,If:()=>Y,MJ:()=>N,ML:()=>X,OE:()=>b,Qv:()=>f,So:()=>B,Wi:()=>C,Wm:()=>P,X:()=>M,YT:()=>Z,Yv:()=>R,_S:()=>T,_W:()=>z,aQ:()=>k,a_:()=>A,cZ:()=>v,cg:()=>K,cv:()=>E,gN:()=>Q,gf:()=>D,oH:()=>U,oN:()=>F,ov:()=>I,qi:()=>x,sH:()=>J,ui:()=>G,w1:()=>W,wD:()=>q,wN:()=>L,wV:()=>$,yG:()=>S,yw:()=>O});var n=r(55340),i=r(88880),s=r(61360),a=r(87792),o=r(67688),c=r(94188),l=r(62796),d=r(35860),u=r(38828),p=r(58036),m=r(87644),h=r(89448),y=r(96504),g=r(35688);const f="ui/player/playQueue/playNextItem",v="ui/player/playQueue/playPreviousItem",b="ui/player/playQueue/playItemByIndex",S="ui/player/playQueue/playItemByKey",P="ui/player/playQueue/playItemByID",I="ui/player/playQueue/toggleShuffle",E="ui/player/playQueue/setRepeat",w="ui/player/playQueue/toggleRepeat",C="ui/player/playQueue/setAutoPlay",O="ui/player/playQueue/showPostPlay",M="ui/player/playQueue/togglePlayerPlayQueueState",T="ui/player/playQueue/togglePlayerLyricsState",D="ui/player/playQueue/fetchPlayQueueItemLyrics",k="ui/player/playQueue/movePlayQueueItem",x="ui/player/playQueue/removePlayQueueItem",A="ui/player/playQueue/fetchPlayQueue",R="ui/player/playQueue/savePlayQueueState",N="ui/player/playQueue/removePlayQueueState",L="ui/player/playQueue/restorePlayQueue",j=(0,n.c)(f),U=(0,n.c)(v),F=(0,n.c)(b),V=((0,n.c)(S),(0,n.c)(P),(0,n.c)(I)),_=(0,n.c)(E),W=(0,n.c)(w),B=(0,n.c)(C),H=(0,n.c)(O),z=(0,n.c)(M),G=(0,n.c)(T),q=(0,n.c)(D),K=(0,n.c)(k),Q=(0,n.c)(x),$=(0,n.c)(A),Y=(0,n.c)(R),X=(0,n.c)(N),J=(0,n.c)(L),Z={[f](e,{playerType:t,isApplicationInitiated:r}){const n=(0,m.OG)(e,t),s=(0,i.c)(e);(0,o.c)(n)||(0,h.SS)((()=>{n.get("isPostPlayVisible")&&n.set({isPostPlayVisible:!1}),s.playNextItem(n,r)}))},[v](e,{playerType:t}){const r=(0,m.OG)(e,t),n=(0,i.c)(e);(0,o.c)(r)||(0,h.SS)((()=>{r.set({isPostPlayVisible:!1}),r.get("positionSeconds")>l.WM?(n.seek(r,0),n.play(r)):n.playPreviousItem(r)}))},[b](e,{playerType:t,index:r}){const n=(0,m.OG)(e,t),s=(0,i.c)(e);(0,h.SS)((()=>{s.playItem(n,r)}))},[S](e,{playerType:t,key:r},n){const i=(0,m.OG)(e,t).get("playQueue").get("playQueueItems"),s=i.find((e=>r===e.get("metadataItem").get("key")));if(s){const e=i.indexOf(s);n(F({playerType:t,index:e}))}else u.c.warn(`[Player] Unable to play unknown key "${r}"`)},[P](e,{playerType:t,playQueueItemID:r},n){const i=(0,m.OG)(e,t).get("playQueue").get("playQueueItems"),s=i.get(r);if(s){const e=i.indexOf(s);n(F({playerType:t,index:e}))}else u.c.warn(`[Player] Unable to play unknown PlayQueueItemID "${r}"`)},[I](e,t,r){const{playerType:n}=t,a=(0,m.OG)(e,n),o=a.get("playQueue");(0,h.SS)((()=>{const t=!o.get("playQueueShuffled");o.set("playQueueShuffled",t);const l=t?"shuffle":"unshuffle";(0,s.cp)(o,{urlPath:l,type:"PUT"}).done((0,c.c)(a,(()=>{const t=(0,i.c)(e);r(Y({playerType:n})),t.refreshRemotePlayQueue(a)}))).fail((0,c.c)(a,(()=>{o.set("playQueueShuffled",!t)})))}))},[E](e,{playerType:t,repeatAll:r,repeatOne:n},a){const o=(0,m.OG)(e,t),l=o.get("playQueue"),d=(0,i.c)(e);(0,h.SS)((()=>{d.setRepeat(o,{repeatAll:r||n,repeatOne:n}),(0,s.cp)(l).done((0,c.c)(o,(()=>{a(Y({playerType:t}))}))).fail((0,c.c)(o,(()=>{l.set({repeatAll:!1,repeatOne:!1}),l.set("repeat",!1)})))}))},[w](e,{playerType:t},r){const n=(0,m.OG)(e,t),i=n.get("repeatAll"),s=n.get("repeatOne");r(_({playerType:t,repeatAll:!i||!s,repeatOne:i&&!s}))},[C](e,{playerType:t,autoPlay:r},n){const s=(0,m.OG)(e,t);(0,i.c)(e).changeAutoPlay(s,r,n)},[O](e,{playerType:t},r){const n=(0,m.OG)(e,t),s=(0,i.c)(e),a=n.get("playQueue"),o=(0,m.UH)(n,a.get("currentIndex")),l=o.get("postPlay"),u=a.provider.id,p=()=>{n.set({isSettingsVisible:!1,isChaptersVisible:!1,isPostPlayLoading:!1,isPostPlayVisible:!0}),s.pause(n,!0)};n.set({isPostPlayLoading:!0}),d._u(u,d.Qh)||o.get("displayPostplay")?l.fetch().then((0,c.c)(n,(()=>{const e=l.findWhere({upNext:!0});e&&l.remove(e),p()})),(0,c.c)(n,p)):window.setTimeout((0,c.c)(n,p),0)},[M](e,{playerType:t}){const r=(0,m.OG)(e,t),n=r.get("isPlayQueueVisible");(0,h.SS)((()=>{r.set((0,a.c)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!n,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!1}))}))},[T](e,{playerType:t}){const r=(0,m.OG)(e,t),n=r.get("isLyricsVisible");(0,h.SS)((()=>{r.set((0,a.c)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!n,isSubtitlesOffsetSettingsVisible:!1}))}))},[D](e,t,r){const{streamID:n}=t,i=(0,p.Y3)(e,t),s=i.get("metadataItem"),a=(0,p.kj)(e,{providerEntityID:s.get("providerEntityID")});if(!a)return;const o=i.get("lyricsStreams").get(n);o.set("lyricsError",null),o.fetch({merge:!0,server:a}).fail((e=>{o.set("lyricsError",e)}))},[k](e,t,r){const{playerType:n,playQueueItemEntityID:a,moveIndex:o}=t,l=(0,m.OG)(e,n),d=l.get("playQueue"),u=(0,p.Y3)(e,{playQueueItemEntityID:a}),g=d.get("playQueueItems"),f=g.indexOf(u);if(f===o||f===o-1)return;const v=o>f?o-1:o,b=o>0?g.at(o-1).id:void 0,S=y.c.join(["items",u.id,"move"]),P={after:b};(0,h.SS)((()=>{g.remove(u),g.add(u,{at:v}),(0,s.cp)(d,{urlPath:S,params:P,type:"PUT"}).done((0,c.c)(l,(()=>{const t=(0,i.c)(e);r(Y({playerType:n})),t.refreshRemotePlayQueue(l)}))).fail((0,c.c)(l,(()=>{g.indexOf(u)===v&&(g.remove(u),g.add(u,{at:f}))})))}))},[x](e,{playerType:t,playQueueItemEntityID:r},n){const a=(0,m.OG)(e,t),o=a.get("playQueue"),l=o.get("playQueueItems"),d=(0,p.Y3)(e,{playQueueItemEntityID:r}),u=l.indexOf(d),g=y.c.join(["items",d.id]);(0,h.SS)((()=>{l.remove(d),(0,s.cp)(o,{urlPath:g,type:"DELETE"}).done((0,c.c)(a,(()=>{const r=(0,i.c)(e);n(Y({playerType:t})),r.refreshRemotePlayQueue(a)}))).fail((0,c.c)(a,(()=>{l.add(d,{at:u})})))}))},[A](e,{playerType:t}){const r=(0,m.OG)(e,t).get("playQueue");(0,s.cp)(r)},[R](e,{playerType:t}){},[N](e){},[L](e,t,r){const{serverEntityID:n,providerEntityID:i,playQueueType:s,playQueueOffset:a,playQueueRepeat:o,playQueueID:c,next:l}=t,d={serverEntityID:n,providerEntityID:i,startOffsetMilliseconds:1e3*a,options:{type:s,playQueueRepeat:o,playQueueID:c,next:l}};r((0,g.gV)(d))}}},93592:(e,t,r)=>{"use strict";r.d(t,{Ml:()=>b,QP:()=>v,ws:()=>f});var n=r(55340),i=r(65724),s=r(87644),a=r(89448),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>c(e,l(t));const g="ui/player/playerControls/togglePlayerOpenState",f=((0,n.c)(g),(0,n.c)(g,(e=>y(h({},e),{openState:i.m})))),v=(0,n.c)(g,(e=>y(h({},e),{openState:i.C}))),b={[g](e,{playerType:t,openState:r}){const n=(0,s.OG)(e,t);(0,a.SS)((()=>{n.set({previousOpenState:void 0,openState:r,isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1})}))}}},29572:(e,t,r)=>{"use strict";r.d(t,{gN:()=>Me,Oi:()=>Te,gB:()=>Ae,E8:()=>De,Y1:()=>ke});var n=r(37588),i=r.n(n),s=r(52180),a=r(55340),o=r(14424),c=r(99112),l=r(69956),d=r(99028),u=r(59501);function p(e){let t;if(e.get("indirect")){const r=e.get("Origin");t=r&&r.source}else if(e.get("remoteMedia")){const r=e.get("Media");t=r[0]&&r[0].source}else e.get("source")&&(t=e.get("source"));return t||null}function m(e){const t=p(e);let r,n;if(t){const{serverIdentifier:e,providerIdentifier:i}=(0,l.c)(t);n=(0,u.S8)({machineIdentifier:e}),r=(0,d.y)({identifier:i,serverEntityID:n})}else n=e.get("serverEntityID"),r=e.get("providerEntityID");return{serverEntityID:n,providerEntityID:r}}var h=r(16580);function y(e,t){if(!e.supports("transientTokenProxy"))return i().Deferred().reject().promise();const r=e.resolveUrl("/security/resources");let n=i().ajax(e.getXHROptions(r,{data:{source:t}})).promise();return n=n.then((t=>new h.c(t,{parse:!0,server:e}))),n}var g=r(37920),f=r(89064),v=r(38668);var b=r(26960),S=r(58036);function P(e){return e.get("isConnected")||e.testOnlyUntestedConnections()}function I(e,t){return(0,l.c)(t).isServer?function(e,t){return y(e,t).then((e=>(0,b.c)(e,!0).testAllConnections()))}(e,t):function(e,t){return y(e,t).then((e=>{const t=function(e){const t=new g.c({accessToken:e.get("accessToken"),machineIdentifier:f.A});t.addConnection((0,v.c)());const r=e.get("connections").first();return new d.c({identifier:e.get("clientIdentifier"),title:e.get("name"),baseURL:r.get("uri")},{server:t})}(e);return t.server.testAllConnections().then((()=>t.populate({merge:!0})))}))}(e,t)}var E=r(54356),w=r(84508),C=r(80896),O=r(42728),M=r(17268),T=r(1676),D=r(87644),k=r(54844);const x=[(e,t,r)=>{const n=e.get("user").get("experienceSettings").get("reminders").get((0,k.c)(C.c.Upsell,M.TONE_MAPPING));if(n&&!(0,T.c)(n.get("remindAfter")))return null;const i=(0,D.OG)(e,t).get("playQueue").get("playQueueItems").get(r.playQueueItemID).get("metadataItem"),s=m(i),a=(0,S.Ww)(e,s),o=i.get("Media")[r.mediaIndex],c=null==o?void 0:o.Part[r.partIndex];if(!a||!c)return null;const l=a.hasOwnerFeature(O.kX),d=a.hasOwnerFeature(O.Uf),u=a.get("isFullOwnedServer")&&l&&!d&&function(e){return Array.isArray(e.Stream)&&e.Stream.some((e=>"smpte2084"===e.colorTrc))}(c)&&!r.canDisplayHDR&&!r.isDirectPlay&&!r.canDirectStreamVideo;return u?{type:M.TONE_MAPPING,metricsContext:w.HDR_CONVERSION}:null}];var A=r(54756),R=r(95720),N=r.n(R),L=r(39835),j=r(54064);var U=r(94188);function F(e){return e>=2e3}function V(e){return F(e.transcodeDecisionCode)?e.transcodeDecisionText:F(e.generalDecisionCode)?e.generalDecisionText:F(e.mdeDecisionCode)?e.mdeDecisionText:e.errorMessage}r(79268);var _=r(95420),W=r(35860),B=r(40716),H=r(30680),z=r(79816),G=r(52563),q=r(38828),K=r(1060),Q=r(1508),$=r(45020);var Y=r(34932),X=r(33040),J=r(39036),Z=r(59396),ee=r(40604),te=r(96504),re=Object.defineProperty,ne=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,le=(e,t)=>{for(var r in t||(t={}))ae.call(t,r)&&ce(e,r,t[r]);if(se)for(var r of se(t))oe.call(t,r)&&ce(e,r,t[r]);return e};function de(e){return"dash"===e||"hls"===e}function ue(e,t){return t.itemProvider||e.provider||t.itemServer||e.server}const pe={getPlayerDecision:function(e){return this.resolvePlayerDecision(e).then(null,(t=>{return t.canDirectPlay&&1001===t.generalDecisionCode?(q.c.warn("[PDE] Forcing transcode;",t.mdeDecisionText),this.resolvePlayerDecision((r=le({},e),ne(r,ie({allowDirectPlay:!1}))))):t;var r}))},resolvePlayerDecision:function(e){N().defaults(e,{offset:0,minVersionForDASH:_.default.dash,minVersionForStreamingMKV:_.default.streamingMKV,transcoderOptions:{}});const t={playbackSessionID:e.playbackSessionID||(0,J.c)(),transcodeSessionID:e.transcodeSessionID||(0,J.c)(),offset:e.offset};let r=this.populateMedia(t,e);return r=r.then(N().bind((function(){return this.resolveMedia(t,e)}),this)),r=r.then((function(){return i().when(t.url)})),r=r.then((function(e){return t.url=e,t})),r},populateMedia:function(e,t){const r=i().Deferred(),n=N().bind(r.resolve,r,e);return t.requireAnalysis&&function(e){const t=e?N().first(e.get("Media")):null;return!(!t||t.container)}(t.item)?t.item.fetch({scope:"player"}).always(n):N().defer(n),r.promise()},resolveMedia:function(e,t){const r=N().extend({transcodeServer:this.resolveTranscodeServer(t)},t),n=Y.c.getMediaDecision(r);if(r.originalQualityDecisionOptions){const e=Y.c.getMediaDecision(le(le({},r),r.originalQualityDecisionOptions));n.canPlayOriginalQuality=e.canDirectPlay||e.canDirectStreamVideo}else n.canPlayOriginalQuality=n.canDirectPlay||n.canDirectStreamVideo;const s=n.media,a=i().Deferred();return N().extend(e,n),s?e.canPlay?"webkit"===s.protocol?(q.c.warn("[PDE] Webkit videos are not supported"),e.redirect=!0,a.reject(e).promise()):"embed"===s.protocol?(q.c.warn("[PDE] An embed is required"),e.embed=!0,e.part=N().first(s.Part),a.reject(e).promise()):this.resolvePart(e,t):(q.c.warn("[PDE] Unable to play item;",e.errorMessage),a.reject(e).promise()):this.resolveUrls(e,t)},resolveTranscodeServer:function(e){const t=e.itemServer||e.item.server,r=e.fallbackServer,n=e.itemProvider||e.item.provider;if(t===r||!r||!r.get("isConnected"))return t;let i;e.type===j.c.types.VIDEO?i="transcoderVideo":e.type===j.c.types.MUSIC&&(i="transcoderAudio");const s=!n||W._u(n.get("identifier"),W.Qh);return i&&!t.get(i)&&r.get(i)&&s?r:t},resolvePart:function(e,t){return t.part?e.part=t.part:t.offset?1===e.media.Part.length?e.part=e.media.Part[0]:(e.part=(0,K.c)(e.media,t.offset),e.offset=(0,Q.c)(e.media,e.part,t.offset)):e.part=N().first(e.media.Part),e.part.drm&&(e.drm=e.part.drm,e.certificate=e.part.certificate,(0,q.c)("[PDE] DRM content decryption module:",e.drm),(0,q.c)("[PDE] DRM certificate:",e.certificate)),this.resolveUrls(e,t)},resolveUrls:function(e,t){const r=i().Deferred();return this.validateDrmType(e,t)&&this.validatePlayerType(e,t)?(this.validateSidecarSrtSubtitles(e,t)?e.subtitlesUrl=this.resolveSubtitlesUrl(e,t):e.useSidecarSrtSubtitles=!1,this.validateSoftSubtitles(e,t)?e.subtitlesUrl=this.resolveSubtitlesUrl(e,t):e.useSoftSubtitles&&(e.useSoftSubtitles=!1),(0,q.c)("[PDE] Player decision:",{playerType:e.playerType,protocol:e.protocol,canDirectPlay:e.canDirectPlay}),e.canDirectPlay?e.url=this.resolveDirectPlayUrl(e,t):e.url=this.resolveTranscoderUrl(e,t),e.drm&&(e.license=this.resolveLicenseUrl(e,t)),this.resolveDecision(e,t)):r.reject(e).promise()},validateDrmType:function(e,t){const r=s.WI("appModel").get("drmType"),n={music:ee.KI,video:ee.im},i=!!e.drm,a=r===(0,H.c)(e.drm)||r===(0,H.c)(e.drm,n[t.type]);return i&&!a&&(e.errorCode=(0,z.cp)(),e.errorMessage=(0,Z.c)("Streaming this media is unsupported.")),!i||a},validatePlayerType:function(e,t){return e.media&&t.type&&t.type!==j.c.types.PHOTO?e.canDirectPlay?("hls"===e.media.protocol?(e.protocol="hls",e.playerType=t.hasNativeHLS?"html":"flash"):"dash"===e.media.protocol?(e.protocol="dash",e.playerType="html"):(e.protocol="http",e.playerType="flv"===e.media.container?"flash":"html"),!0):this.validatePlayerTranscodeProtocol(e,t):(e.protocol="http",e.playerType="html",!0)},validatePlayerTranscodeProtocol:function(e,t){const r=e.transcodeServer,n=t.transcodeProtocol;let i,s=!0,a=!0,o=!0;if(n&&(s="dash"===n,a="http"===n,o="hls"===n),o&&t.hasNativeHLS)return e.protocol="hls",e.playerType="html",!0;if(a&&t.hasStreamingMKV){if(r.isVersionOrNewer(t.minVersionForStreamingMKV))return e.protocol="http",e.playerType="html",!0;i=t.minVersionForStreamingMKV}if(s&&t.hasDASH){if(r.isVersionOrNewer(t.minVersionForDASH))return e.protocol="dash",e.playerType="html",!0;i=t.minVersionForDASH}return t.type===j.c.types.MUSIC?(e.protocol="http",e.playerType="html",!0):o&&t.hasFlash?(e.protocol="hls",e.playerType="flash",!0):(e.errorMessage=i?(0,Z.c)("Please update Plex Media Server. This feature requires {1} or later.",i):(0,Z.c)("Streaming this media is unsupported."),!1)},validateSidecarSrtSubtitles:function(e,t){return e.useSidecarSrtSubtitles&&!e.canDirectPlay?(q.c.warn("[PDE] Sidecar SRT is only supported when media is direct play."),!1):e.useSidecarSrtSubtitles},validateSoftSubtitles:function(e,t){return e.useSoftSubtitles&&"html"!==e.playerType?(q.c.warn("[PDE] Only the HTML player supports soft subtitles"),!1):!e.useSoftSubtitles||e.canDirectPlay||t.allowDirectStreamVideoWithSoftSubtitles?e.useSoftSubtitles:(q.c.warn("[PDE] Unable to use soft subtitles without direct play"),!1)},resolveDirectPlayUrl:function(e,t){const r=t.item,n=e.part,i={"X-Plex-Session-Identifier":e.playbackSessionID};e.drm&&Object.assign(i,(0,G.c)(e.drm));const s=n?n.key:r.get("key"),a={appendHeaders:!0,params:i};return ue(r,t).resolveUrl(s,a)},resolveTranscoderUrl:function(e,t,r){const n=t.item,i=e.media,s=e.part;let a=t.transcoderOptions;N().isFunction(a)&&(a=a(e)),a=N().extend({},e.transcoderQualityOptions,a,{"X-Plex-Session-Identifier":e.playbackSessionID,session:e.transcodeSessionID,protocol:e.protocol,directPlay:e.canDirectPlay?1:0,directStream:e.canDirectStreamVideo?1:0,directStreamAudio:e.canDirectStreamAudio?1:0,offlineTranscode:t.offlineTranscode,context:t.context,offset:e.offset?e.offset/1e3:e.offset});const o=t.subtitlesBurnLevel;t.type!==j.c.types.VIDEO||e.transcodeServer.get("isCloud")||(o===B.c.NEVER?a.subtitles=e.canDirectPlay?"none":"auto":e.useSoftSubtitles?(a.subtitles=e.canDirectPlay?"sidecar":"auto",o===B.c.AVOID&&(a.advancedSubtitles="text")):a.subtitles="burn");let c=t.profileExtra;N().isFunction(c)&&(c=c(e)),a["X-Plex-Client-Profile-Extra"]=c;const l=n.get("Media")[0],d=!!l&&"livetv"===l.origin;("hls"===a.protocol&&!t.useOffsetHLS&&!d||"dash"===a.protocol&&!d)&&((0,q.c)("[PDE] DASH and HLS should seek forward by default, offset=0"),delete a.offset),"hls"===a.protocol&&t.useOffsetHLS&&(e.useOffsetHLS=!0,a.offset&&((0,q.c)("[PDE] HLS started with an offset, copyts=0"),a.copyts=0)),de(a.protocol)&&d&&(a.copyts=0),"http"===a.protocol&&(a.copyts=d?0:1),"http"!==a.protocol||e.canDirectPlay||(a["X-Plex-Chunked"]=1),t.allowIncompleteSegments&&(a["X-Plex-Incomplete-Segments"]=1),N().each(N().keys(a),(function(e){null==a[e]&&delete a[e]}));const u=t.type,p=t.transcoder,m=e.transcodeServer;if(u===j.c.types.VIDEO)return p.video(m,n,i,s,a,r);if(u===j.c.types.MUSIC)return p.music(m,n,a,r);if(u===j.c.types.PHOTO){a.fallbackServer=t.fallbackServer;const e="photo"===n.get("type")?n.getMediaKey():n.get("thumb");return p.image(m,e,a)}},resolveSubtitlesUrl:function(e,t){if(e.useSidecarSrtSubtitles){const r=t.itemProvider||t.item.provider,n=(0,$.c)(e.media);return r.resolveUrl(n.key,{appendHeaders:!0,appendToken:!0,params:{format:"srt"}})}const r=this.resolveTranscoderUrl(e,t),n=te.c.parseUrl(r).params,i=e.canDirectPlay?"/subtitles/:/transcode/universal/start":"/video/:/transcode/universal/subtitles";return e.transcodeServer.resolveUrl(i,{params:n})},resolveLicenseUrl:function(e,t){const r=t.item,n={appendHeaders:!0,params:(0,G.c)(e.drm)},i=ue(r,t);return(0,q.c)("[PDE] Resolving DRM license",e.part.license),i.resolveUrl(e.part.license,n)},resolveDecision:function(e,t){const r=e.transcodeServer,n=i().Deferred(),s=r.get("isCloud")||!r.supports("decisionEndpoint"),a=t.type===j.c.types.PHOTO;if(s||a)return(0,q.c)("[PDE] Unnecessary for server to resolve decision"),n.resolve(e).promise();const o=N().clone(e);this.validatePlayerTranscodeProtocol(o,t);const c=this.resolveTranscoderUrl(o,t,"decision"),l=i().ajax(r.getXHROptions(c,{timeout:t.offlineTranscode?2e4:2e3}));return null!=e.offset&&!e.canDirectPlay&&de(e.protocol)&&e.media&&"livetv"===e.media.origin&&(e.offset=0),l.done((function(t){const r=X.c.parseXML(t);r.generalDecisionCode&&(e.generalDecisionCode=X.c.parseInteger(r.generalDecisionCode),e.generalDecisionText=r.generalDecisionText),r.mdeDecisionCode&&(e.mdeDecisionCode=X.c.parseInteger(r.mdeDecisionCode),e.mdeDecisionText=r.mdeDecisionText),r.transcodeDecisionCode&&(e.transcodeDecisionCode=X.c.parseInteger(r.transcodeDecisionCode),e.transcodeDecisionText=r.transcodeDecisionText),e.abr=X.c.parseBoolean(r.abr),e.decisionXML=t,V(e)?n.reject(e):n.resolve(e)})),l.fail((function(){q.c.warn("[PDE] Player decision failed; the transcode server may be a slow or outdated"),n.resolve(e)})),n.promise()}};var me=r(89448),he=Object.defineProperty,ye=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Se=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pe=(e,t)=>{for(var r in t||(t={}))ve.call(t,r)&&Se(e,r,t[r]);if(fe)for(var r of fe(t))be.call(t,r)&&Se(e,r,t[r]);return e},Ie=(e,t)=>ye(e,ge(t));const Ee="ui/player/playerDecision/makeDecision",we="ui/player/playerDecision/makeNextDecision",Ce="ui/player/playerDecision/removeDecision",Oe="ui/player/playerDecision/retryDecision",Me=(0,a.c)(Ee),Te=(0,a.c)(we),De=(0,a.c)(Ce),ke=(0,a.c)(Oe);function xe(e,t,r){const n=(0,D.OG)(e,t),i=(0,E.c)(n),s=i.get("metadataItem");if(i.get("playQueueItemID")!==r.playQueueItemID)return;const a={currentDecision:r,availableQualities:r.availableQualities,qualityIndex:r.qualityIndex,mediaIndex:r.mediaIndex,partIndex:r.partIndex,positionSeconds:r.positionSeconds,durationSeconds:r.durationSeconds};null!=n.get("startMetadataItemEntityID")&&n.get("startMetadataItemEntityID")!==s.entityID()||(a.startMetadataItemEntityID=null,a.startOffsetMilliseconds=null,a.startMediaIndex=null);const o=function(e,t,r){if(e.get("user").get("experienceSettings").get("reminders"))for(const n of x){const i=n(e,t,r);if(i)return i}return null}(e,t,r);a.confirmPlayerUpsellPayload=o,a.isPaused=!!o||n.get("isPaused"),n.set(a)}const Ae={[Ee](e,t){const{playerType:r,playQueueItemEntityID:n,mediaIndex:a,partIndex:d,qualityIndex:u,transcodeSessionID:h,options:y={}}=t,g=(0,D.OG)(e,r),f=S.Y3(e,{playQueueItemEntityID:n});if(f.get("type")===ee.Ww)return;const v=g.get("decisions")[n];if(v)return void xe(e,r,v);let b,E;const w=f.get("metadataItem");let C,O=function(e,t,r){const n=r.get("metadataItem"),s=S.Ww(e,{serverEntityID:t.get("serverEntityID")}),a=m(n),o={serverEntityID:n.get("serverEntityID"),providerEntityID:n.get("providerEntityID")},d=n.get("source"),u=p(n),h=S.Ww(e,o),y=u&&S.Ww(e,a),g=c.c.allowTransientProxy&&s.get("isFullOwnedServer")&&s.supports("transientTokenProxy");if(!g&&(d&&!h||u&&!y))return i().Deferred().reject().promise();const f=[];return h?f.push(P(h)):g&&d&&f.push(I(s,d)),d!==u&&(y?f.push(P(y)):g&&u&&f.push(I(s,u))),i().when(...f).then((()=>function(e,t){const r=e.get("user"),n=t&&(0,l.c)(t);return r.get("providers")&&n&&!n.isServer?r.get("providers").populate().then((e=>{const t=e.findWhere({identifier:n.providerIdentifier});return t&&t.populate()})):i().Deferred().resolve().promise()}(e,u))).then((()=>({serverModel:S.Ww(e,o),providerModel:S.IB(e,o),mediaServerModel:S.Ww(e,a),mediaProviderModel:S.IB(e,a)})))}(e,g,f).then((e=>g.get("liveTVSession")?i().Deferred().resolve().promise():(b=e.mediaServerModel,E=e.mediaProviderModel,(0,o.c)(w,{forceSyncCheckFiles:!0,itemProvider:e.providerModel}))));O=O.then((()=>{const t=null==a?function(e,t){return null==e.get("startMetadataItemEntityID")&&null!=e.get("startMediaIndex")||e.get("startMetadataItemEntityID")===t.entityID()?e.get("startMediaIndex"):null}(g,w):a,r=w.get("Media")[t],n=r&&r.Part[d],i=(0,s.WI)("getDecisionOptions")(w,u,r);return C=Pe(Pe({transcodeSessionID:h,playbackSessionID:g.get("playbackSessionID"),item:w,offset:(0,A.c)(g,w),fallbackServer:e.get("primaryServer"),media:r,part:n,itemProvider:E,itemServer:b},i),y),y.offset,pe.getPlayerDecision(C)})),O.done((0,U.c)(g,(t=>{const i=function(e,t){const{type:r,item:n,availableQualities:i,qualityIndex:s}=e,{transcodeServer:a,media:o,part:c}=t,l=n.get("Media"),d=o.Part,u=function(e,t){return N().findIndex(e,(e=>null!=e.id?e.id===t.id:null==e.uuid||e.uuid===t.uuid))}(l,o),p=function(e,t){return N().findIndex(e,(e=>null!=e.id?e.id===t.id:null==e.key||e.key===t.key))}(d,c);let m=[],h=L.c.ORIGINAL;r===j.c.types.VIDEO&&(m=i,h=s),t.abr&&(h=L.c.CONVERT_AUTOMATICALLY);const y={availableQualities:m,qualityIndex:h,mediaIndex:u,partIndex:p,partCount:d.length,url:t.url,subtitlesUrl:t.subtitlesUrl,protocol:t.protocol,isDirectPlay:t.canDirectPlay,useSoftSubtitles:t.useSoftSubtitles,useSidecarSrtSubtitles:t.useSidecarSrtSubtitles,canDirectStreamVideo:t.canDirectStreamVideo,canDirectStreamAudio:t.canDirectStreamAudio,canPlayOriginalQuality:t.canPlayOriginalQuality,positionSeconds:Math.floor(t.offset/1e3),durationSeconds:Math.floor((c.duration||0)/1e3),playbackSessionID:t.playbackSessionID,canDisplayHDR:t.canDisplayHDR,canDisplayDolbyVision:t.canDisplayDolbyVision};return t.canDirectPlay||(y.transcodeSessionID=t.transcodeSessionID),t.drm&&(y.drm=t.drm,y.license=t.license,y.certificate=t.certificate),y.transcodeServerEntityID=a&&a.entityID(),y}(C,t),s=Ie(Pe({},i),{playQueueItemID:f.get("playQueueItemID")}),a=g.get("decisions");g.set("decisions",Ie(Pe({},a),{[n]:s})),xe(e,r,s)}))).fail((0,U.c)(g,(e=>{let t;b&&E?w.get("isPreFetched")?(w.set({isPreFetched:!1}),t=V(e)):t=(0,Z.c)("Content is unavailable"):t=(0,Z.c)("Source is unavailable"),function(e,t,r,n){const i=e.get("playQueue"),s=i.get("playQueueItems").at(i.get("currentIndex"));t.id===s.id&&e.set({isMediaLoading:!1,hasError:!0,errorCode:n,errorMessage:r})}(g,f,t,e.errorCode)})))},[we](e,{playerType:t},r){const n=(0,D.OG)(e,t),i=n.get("playQueue"),s=i.get("playQueueItems"),a=i.get("currentIndex");let o=n.get("repeatOne")?a:a+1;if(n.get("repeatAll")&&o>s.length-1&&(o=0),o!==a&&o<s.length){const e=s.at(o).entityID();r(Me({playerType:t,playQueueItemEntityID:e}))}},[Ce](e,{playerType:t,playQueueItemEntityID:r}){const n=(0,D.OG)(e,t);(0,me.SS)((()=>{const e=n.get("decisions"),t=n.get("currentDecision"),i={decisions:Ie(Pe({},e),{[r]:null})};e[r]===t&&(i.currentDecision=null),n.set(i)}))},[Oe](e,t,r){const{playerType:n,decisionOptions:i}=t,s=(0,D.OG)(e,n),a=s.get("playQueue"),o=a.get("playQueueItems"),c=s.get("currentDecision"),l=a.get("currentIndex"),d=o.at(l).entityID();c&&r(De({playerType:n,playQueueItemEntityID:d})),r(Me(c?{playerType:n,playQueueItemEntityID:d,mediaIndex:c.mediaIndex,partIndex:c.partIndex,qualityIndex:s.get("qualityIndex"),options:Pe({offset:1e3*s.get("positionSeconds")},i)}:{playerType:n,playQueueItemEntityID:d,qualityIndex:s.get("qualityIndex")}))}}},35688:(e,t,r)=>{"use strict";r.d(t,{q2:()=>z,OM:()=>$,YX:()=>Q,gh:()=>H,Ul:()=>B,cI:()=>G,AU:()=>q,KE:()=>W,mM:()=>U,ob:()=>F,M1:()=>V,kl:()=>_,K:()=>K,OU:()=>re,k5:()=>le,WS:()=>ae,sP:()=>me,gV:()=>te,GO:()=>ee,_U:()=>ne,i:()=>ie,gD:()=>oe,wb:()=>Y,M7:()=>X,Gm:()=>J,Mv:()=>Z,WI:()=>ce,G:()=>se});var n=r(37588),i=r.n(n),s=r(52180),a=r(55340),o=r(82088),c=r(12384),l=r(96488),d=r(88880),u=r(16044),p=r(84384),m=r(61360),h=r(94188),y=r(66780),g=r(65724),f=r(4008),v=r(35860),b=r(38828),S=r(12612);var P=r(58036),I=r(87644),E=r(89448),w=r(59396),C=r(96504),O=r(66816),M=Object.defineProperty,T=Object.defineProperties,D=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&R(e,r,t[r]);if(k)for(var r of k(t))A.call(t,r)&&R(e,r,t[r]);return e},L=(e,t)=>T(e,D(t)),j=(e,t)=>{var r={};for(var n in e)x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&k)for(var n of k(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r};const U="ui/player/playerLifecycle/startPlayback",F="ui/player/playerLifecycle/startPrimaryExtraPlayback",V="ui/player/playerLifecycle/startRadioPlayback",_="ui/player/playerLifecycle/startRelatedMixPlayback",W="ui/player/playerLifecycle/startExistingPlayQueuePlayback",B="ui/player/playerLifecycle/queueRelatedMixPlayback",H="ui/player/playerLifecycle/queuePlayback",z="ui/player/playerControls/clearPlayerConfirmPlaybackPayload",G="ui/player/playerControls/resetAndClosePlayer",q="ui/player/playerControls/setMetricsPlayer",K="ui/player/playerLifecycle/updateCurrentAd",Q="ui/player/playerLifecycle/endPlayback",$="ui/player/playerLifecycle/dismissPlayerUpsell",Y=(0,a.c)(U),X=(0,a.c)(F),J=(0,a.c)(V),Z=(0,a.c)(_),ee=((0,a.c)(W),(0,a.c)(B)),te=(0,a.c)(H),re=(0,a.c)(z),ne=(0,a.c)(G),ie=(0,a.c)(q),se=(0,a.c)(K),ae=(0,a.c)(Q),oe=(0,a.c)(U,((e={})=>{var t=e,{options:r={}}=t,n=j(t,["options"]);return L(N({},n),{metricsAction:y.So,options:L(N({},r),{playAll:!0})})})),ce=(0,a.c)(U,((e={})=>{var t=e,{options:r={}}=t,n=j(t,["options"]);return L(N({},n),{metricsAction:y.mg,options:L(N({},r),{shuffle:!0})})})),le=(0,a.c)($);let de;function ue(e){return e.get("related").findWhere({browse:!1}).get("metadataList")}function pe(e,t,r){return(...n)=>{if(t.get("isOpen")&&e===de)return r(...n);b.c.warn("[Player] Player was closed or a new playback session was started; ignoring playback request")}}const me={[U](e,t,r){const{metadataItemEntityID:n,liveTVSessionEntityID:i,syncplaySessionRoomID:a,confirmPlayback:p,confirmOffset:m,confirmAdvertisingNotice:h,startOffsetMilliseconds:b=null,startMediaIndex:C=null,openState:O=g.m,isPaused:M=!1,isWatchTogetherLobbyVisible:T=!1,extrasPrefixCount:D,playbackStartTime:k=Date.now(),metricsPage:x,metricsProperties:A={}}=t,R=(0,u.c)(e,t),j=(0,l.c)(R),U=f.Qb(j),F=(0,I.OG)(e,U),V=F.get("playQueue"),_=R.metadataItemModel,W=(0,s.WI)("appModel").get("user"),B=R.serverModel?R.serverModel.entityID():t.serverEntityID,H=R.providerModel?R.providerModel.entityID():t.providerEntityID;if(V&&_&&V.get("playQueueSelectedMetadataItemID")===_.get("ratingKey"))return;if(!p&&V&&V.get("playQueueVersion")>1)return void F.set("confirmPlaybackPayload",t);const z={serverEntityID:B,providerEntityID:H,syncplaySessionRoomID:a,isOpen:!0,openState:O,isPlayQueueLoading:!0,isMediaLoading:!0,isPaused:M,isWatchTogetherLobbyVisible:T,startOffsetMilliseconds:b,startMediaIndex:C,playbackStartTime:k,metricsPage:x,metricsSetting:A.setting,metricsContextTuple:A.contextTuple};if(i&&(z.liveTVSession=P.gz(e,{liveTVSessionEntityID:i})),_&&function(e){const t=e.get("type"),r="channelDirectory"===t||(0,S.ue)(t)||e.get("isFolder");return void 0===e.length&&!r}(_)&&(z.startMetadataItemEntityID=n),!h&&_&&_.get("requiresConsent")&&W.get("isFullUser")&&(!W.get("consent").get("updatedAt")||W.get("consent").get("remindAt")<Date.now()/1e3)?z.advertisingNoticePayload=t:!m&&_&&_.get("viewOffset")&&(z.confirmOffsetPayload=t),(0,E.SS)((()=>{F.restoreDefaults(z)})),z.advertisingNoticePayload||z.confirmOffsetPayload)return;const G=!(b||!_||_.get("type")!==S.MOVIE),q=v._u(R.providerModel.get("identifier"),v.$9),K=(0,o.c)(L(N({},R),{skipSiblings:q,extrasPrefixCount:G?D:void 0,playQueueModel:(0,c.c)(L(N({},R),{playQueueType:j}))}));de=K,K.done(pe(K,F,(t=>{F.set({isPlayQueueLoading:!1,playQueue:t}),(0,d.c)(e).startPlayback(F)}))).fail(pe(K,F,(()=>{F.restoreDefaults({hasError:!0,errorMessage:(0,w.c)("An error occurred loading items to play.")})}))),t.skipClickMetrics||(0,s.WI)("metrics").trackClick(N({page:t.metricsPage,action:t.metricsAction||y.OI,type:j},A))},[F](e,t,r){const n=t.options||{},i=P.oH(e,t);r(Y(L(N({},t),{metadataItemEntityID:null,metricsAction:y.Sg,options:L(N({},n),{metadataItemKey:i.get("primaryExtraKey"),type:"video"})})))},[_](e,t,r){const n=t.options||{},i=P.oH(e,t),s=ue(i);r(Y({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsAction:y.IL,skipClickMetrics:t.skipClickMetrics,options:L(N({},n),{type:(0,l.c)({metadataItemModel:i}),containerKey:s.get("containerKey")})}))},[V](e,t,r){const{playlistType:n}=t,i=P.oH(e,t).get("stations");if(!i.length)return;const s=i.findWhere({playlistType:n});r(Y({metricsAction:y.IL,serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:s.entityID(),skipClickMetrics:t.skipClickMetrics,options:{type:(0,l.c)({metadataItemModel:s})}}))},[W](e,t){const{serverEntityID:r,providerEntityID:n,playQueueType:i,playQueueID:s,startOffsetMilliseconds:a=null,startMediaIndex:o=null,playbackStartTime:l=Date.now()}=t,d=f.Qb(i),u=P.IB(e,t),h=(0,I.OG)(e,d),y=(0,c.c)({providerModel:u,playQueueID:s,playQueueType:i}),v={serverEntityID:r,providerEntityID:n,isOpen:!0,openState:g.m,isPlayQueueLoading:!0,isMediaLoading:!0,startOffsetMilliseconds:a,startMediaIndex:o,playbackStartTime:l};return h.set(v),(0,m.cp)(y).done((()=>{h.set({playQueue:y,isPlayQueueLoading:!1}),p.startPlayback(h)})).fail((()=>{h.restoreDefaults({hasError:!0,errorMessage:(0,w.c)("An error occurred loading items to play.")})}))},[B](e,t,r){const n=P.oH(e,t),i=ue(n);r(te({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsPage:t.metricsPage,metricsAction:y.or,listType:(0,l.c)({metadataItemModel:n}),options:{next:!0,containerKey:C.c.join(i.get("containerKey"),{excludeSeedItem:1})}}))},[H](e,t,r){const{startOffsetMilliseconds:n=null,openState:i=g.m}=t,a=(0,u.c)(e,t),p=(0,l.c)(a),v=f.Qb(p),b=(0,I.OG)(e,v),S=!!a.playQueueID,C=a.serverModel?a.serverModel.entityID():t.serverEntityID,M=a.providerModel?a.providerModel.entityID():t.providerEntityID;let T=b.get("playQueue"),D=!1;if(T&&b.get("providerEntityID")){const t=P.IB(e,{providerEntityID:b.get("providerEntityID")}),r=b.get("providerEntityID")===M,n=T.get("isUniversal"),i=t.server.get("isFullOwnedServer");D=r||n&&i}if(D)(0,o.c)(L(N({},a),{playQueueModel:T})).done((0,h.c)(b,(()=>{(0,d.c)(e).refreshRemotePlayQueue(b)}))).fail((0,h.c)(b,(()=>{b.set({hasError:!0,errorMessage:(0,w.c)("An error occurred loading items into the play queue.")})})));else{(0,E.SS)((()=>{b.restoreDefaults({serverEntityID:C,providerEntityID:M,isOpen:!0,openState:i,isPlayQueueLoading:!0,isMediaLoading:!0,isPaused:!a.next,repeatAll:!!a.playQueueRepeat,startOffsetMilliseconds:n,playbackStartTime:a.playbackStartTime?a.playbackStartTime:Date.now()})})),T=(0,c.c)(L(N({},a),{playQueueType:p}));const t=S?(0,m.cp)(T):(0,o.c)(L(N({},a),{next:!1,playQueueModel:T}));de=t,t.done(pe(t,b,(t=>{b.set({isPlayQueueLoading:!1,playQueue:t}),(0,d.c)(e).startPlayback(b,S)}))).fail(pe(t,b,(()=>{r((0,O.ML)()),S?b.restoreDefaults():b.restoreDefaults({hasError:!0,errorMessage:(0,w.c)("An error occurred loading items to play.")})})))}const k=a.next?y.GE:y.ER,x=t.metricsProperties||{};t.skipClickMetrics||(0,s.WI)("metrics").trackClick(N({page:t.metricsPage,action:t.metricsAction||k,type:p},x))},[z](e,{playerType:t,openState:r}){const n=(0,I.OG)(e,t);(0,E.SS)((()=>{n.set("confirmPlaybackPayload",null)}))},[G](e,{playerType:t,openState:r}){const n=(0,I.OG)(e,t);(0,E.SS)((()=>{n.restoreDefaults()}))},[q](e,{playerType:t,metricsPlayer:r}){const n=(0,I.OG)(e,t);(0,E.SS)((()=>{n.set({metricsPlayer:r})}))},[K](e,{adDisplayIndex:t,adDisplayTotal:r,adDurationSeconds:n,adPositionSeconds:i,adState:s,adTimeOffsetSeconds:a,playerType:o}){(0,I.OG)(e,o).set({adDisplayIndex:t,adDisplayTotal:r,adDurationSeconds:n,adPositionSeconds:i,adState:s,adTimeOffsetSeconds:a})},[Q](e,{playerType:t,isForced:r},n){const s=(0,I.OG)(e,t),a=s.get("liveTVSession"),o=s.get("serverEntityID"),c=P.Ww(e,{serverEntityID:o}),l=(0,d.c)(e);if((0,E.SS)((()=>{r||n((0,O.ML)()),l.endPlayback(s)})),a&&!c.get("isCloud")){const e=C.c.join(["/media/subscriptions",a.id]);i().ajax(a.server.getXHROptions(e,{method:"DELETE"}))}},[$](e,{playerType:t}){(0,I.OG)(e,t).set({confirmPlayerUpsellPayload:null})}}},17472:(e,t,r)=>{"use strict";r.d(t,{sD:()=>Ae,W0:()=>Le,GU:()=>Ee,u4:()=>Ce,Iz:()=>Oe,oF:()=>Me,UZ:()=>Te,G:()=>Ie,Ul:()=>ye,SM:()=>vt,E5:()=>pt,Os:()=>mt,WG:()=>ht,sb:()=>ft,mN:()=>yt,mk:()=>gt,eU:()=>ot,gG:()=>Ze,U$:()=>It,Eb:()=>Pt,sz:()=>Mt,KK:()=>rt,Ki:()=>Ke,aC:()=>bt,kj:()=>St,iu:()=>nt,EP:()=>it,QP:()=>st,s7:()=>at,Yb:()=>et,Cu:()=>tt,oJ:()=>lt,sR:()=>ct,Yh:()=>dt,W4:()=>ut,So:()=>Et,Mt:()=>Ct,Ud:()=>wt,EB:()=>Xe,Ir:()=>Qe,_6:()=>Je,W9:()=>$e,I$:()=>Ye});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(99112),c=r(55340),l=r(46260),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>u(e,p(t)),b=r(54356);function S(e){const t=(0,b.c)(e),r=e.get("currentDecision");if(t&&r)return r.playQueueItemID===t.get("playQueueItemID")?r:void 0}var P=r(88880),I=r(62796),E=r(42444),w=r(96504);const C=function(e,t){const r=w.c.parseUrl(e),{origin:n,pathname:i,params:s}=r;return s.offset=t,w.c.join([n,i],s)};var O=r(79268),M=r(38828),T=r(61360),D=r(52180),k=r(76400),x=r(55272),A=r(90044),R=r(35860),N=r(30336),L=r(1800),j=r(33964),U=r(77015),F=r(29208),V=Object.defineProperty,_=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function z(e){return{startedAt:(0,j.c)(e.timeStamp),seekStartSeconds:(0,j.c)(e.minOffsetAvailable),seekEndSeconds:(0,j.c)(e.maxOffsetAvailable)}}var G=r(87792),q=r(67688),K=r(94188),Q=r(47456),$=r(59740),Y=r(99567);var X=r(58036),J=r(87644),Z=r(89448),ee=r(59396),te=r(76636),re=r(5620),ne=r(66816),ie=Object.defineProperty,se=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&de(e,r,t[r]);if(oe)for(var r of oe(t))le.call(t,r)&&de(e,r,t[r]);return e},pe=(e,t)=>se(e,ae(t));const me="ui/player/playerMedia/sendTimeline",he="ui/player/playerMedia/updatePlayerDuration",ye="ui/player/playerMedia/updatePlayerPosition",ge="ui/player/playerMedia/updatePlayerSeekRange",fe="ui/player/playerMedia/updatePlayerBuffering",ve="ui/player/playerMedia/updatePlayerLoading",be="ui/player/playerMedia/updatePlayerError",Se="ui/player/playerMedia/clearPlayerError",Pe="ui/player/playerMedia/tickPlayer",Ie="ui/player/playerMedia/togglePlayPause",Ee="ui/player/playerMedia/seek",we="ui/player/playerMedia/transcodeSeek",Ce="ui/player/playerMedia/skipBack",Oe="ui/player/playerMedia/skipForward",Me="ui/player/playerMedia/stepBack",Te="ui/player/playerMedia/stepForward",De="ui/player/playerMedia/changeVolume",ke="ui/player/playerSettings/togglePlayerSettingsState",xe="ui/player/playerSettings/togglePlayerChaptersState",Ae="ui/player/playerSettings/changeQualityIndex",Re="ui/player/playerSettings/togglePlayerSubtitlesOffsetState",Ne="ui/player/playerSettings/togglePlayerWatchTogetherParticipantsState",Le="ui/player/playerSettings/changeStream",je="ui/player/playerSettings/changeSubtitleColor",Ue="ui/player/playerSettings/changeSubtitlePosition",Fe="ui/player/playerSettings/changeSubtitleSize",Ve="ui/player/playerSettings/changeSubtitleOffset",_e="ui/player/playerMedia/changePlaybackSpeed",We="ui/player/playerMedia/setItemPlaybackTime",Be="ui/player/playerMedia/setSessionPlaybackTime",He="ui/player/playerMedia/refreshStreams",ze="ui/player/playerMedia/updateBufferedRanges",Ge="ui/player/playerMedia/updateMediaDimensions",qe="ui/player/playerMedia/updateCanPlayThrough",Ke=(0,c.c)(me),Qe=(0,c.c)(he),$e=(0,c.c)(ye),Ye=(0,c.c)(ge),Xe=(0,c.c)(fe),Je=((0,c.c)(ve),(0,c.c)(be)),Ze=(0,c.c)(Se),et=(0,c.c)(Pe),tt=(0,c.c)(Ie),rt=(0,c.c)(Ee),nt=((0,c.c)(we),(0,c.c)(Ce)),it=(0,c.c)(Oe),st=(0,c.c)(Me),at=(0,c.c)(Te),ot=(0,c.c)(De),ct=(0,c.c)(ke),lt=(0,c.c)(xe),dt=(0,c.c)(Re),ut=(0,c.c)(Ne),pt=(0,c.c)(Ae),mt=(0,c.c)(Le),ht=(0,c.c)(je),yt=(0,c.c)(Ue),gt=(0,c.c)(Fe),ft=(0,c.c)(Ve),vt=(0,c.c)(_e),bt=(0,c.c)(We),St=(0,c.c)(Be),Pt=((0,c.c)(He),(0,c.c)(Ie,(e=>pe(ue({},e),{shouldPlay:!0})))),It=(0,c.c)(Ie,(e=>pe(ue({},e),{shouldPause:!0}))),Et=((0,c.c)(De,(e=>pe(ue({},e),{delta:5}))),(0,c.c)(De,(e=>pe(ue({},e),{delta:-5}))),(0,c.c)(ze)),wt=(0,c.c)(Ge),Ct=(0,c.c)(qe);function Ot(e,t,r){return Math.max(0,Math.min(t-I.ID,e+r))}const Mt={[me](e,t,r){var n;const{playerType:s,serverEntityID:o,providerEntityID:c,mediaItemID:l,shouldRefreshPlayQueue:d,options:u={}}=t,p=(0,J.OG)(e,s),m=X.Ww(e,{serverEntityID:o}),h=X.IB(e,{providerEntityID:c}),y=X.Y3(e,t),g=X.oH(e,t),f=null==(n=X.im(e,t))?void 0:n.get("grabOperation").get("metadataItem");if(!g&&!f&&R._u(h.get("identifier"),[R._0,R.$9]))return;const v=y.get("isLocal")?void 0:y.get("playQueueItemID");(function(e,t,r){const{playQueueItemID:n,mediaItemID:s,mediaIndex:o,partIndex:c,partCount:l,state:d,continuing:u,playbackTime:p,positionSeconds:m,durationSeconds:h,metricsContextTuple:y,ratingKey:g,key:f,addCampaignParams:v}=r,b=e.get("features").get(A.c.TIMELINE);if(!b)return i().Deferred().reject().promise();const S=((e,t)=>{for(var r in t||(t={}))W.call(t,r)&&H(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&H(e,r,t[r]);return e})({ratingKey:g||t.get("ratingKey"),key:f||t.get("key"),streamingMediaId:t.get("streamingMediaId"),playbackTime:p,playQueueItemID:n,state:d,hasMDE:1},y?(0,F._i)(y):void 0);if(d===x.SG&&u&&(S.continuing=1),R._u(e.get("identifier"),[R._0,R.$9])&&s&&(S.airingID=s),null!=h){const e=1e3*m,r=1e3*h;if(l>1){const r=t.get("Media")[o],n=r.Part[c];S.time=(0,N.c)(r,n,e),S.duration=r.duration}else S.time=e,S.duration=r;S.duration=Math.max(S.time,S.duration)}if(v){const e=(0,D.WI)("metrics").toJSON().context.campaign;e&&Object.keys(e).forEach((t=>{S[`utm_${t}`]=e[t]}))}document.referrer&&(S.utm_referer=document.referrer),(0,M.c)("[Player] Timeline, %s",S);const P=w.c.join(b.get("key"),S),I=t.provider.getXHROptions(P,{headers:{accept:`${k.qS.accept},${k.sH.accept}`,"X-Plex-Session-Identifier":r.playbackSessionID}});return i().ajax(I).promise().then(((e,r,n)=>{var i;const s=null!=(i=n.getResponseHeader("content-type"))?i:"";let o=/json/.test(s)?JSON.parse(e):(0,U.c)(e);o.MediaContainer&&(o=o.MediaContainer),o.terminationCode&&(o.terminationCode=(0,j.c)(o.terminationCode)),o.generalDecisionCode&&(o.generalDecisionCode=(0,j.c)(o.generalDecisionCode)),o.mdeDecisionCode&&(o.mdeDecisionCode=(0,j.c)(o.mdeDecisionCode)),o.transcodeDecisionCode&&(o.transcodeDecisionCode=(0,j.c)(o.transcodeDecisionCode));const c=Array.isArray(o.TranscodeSession)?o.TranscodeSession[0]:o.TranscodeSession,l=Array.isArray(o.Bandwidths)?o.Bandwidths[0]:o.Bandwidths,d=Array.isArray(o.CaptureBuffer)?o.CaptureBuffer[0]:o.CaptureBuffer;if(l&&c&&(o.bandwidthTimeline={bandwidths:(0,L.c)(l.Bandwidth),transcodeSessionID:a().last(c.key.split("/"))}),d){const e=Array.isArray(d.TranscodeSession)?d.TranscodeSession[0]:d.TranscodeSession;o.captureBuffer=z(e)}return c&&(o.transcodeSession=z(c)),S.time>6e4&&("progress"===o.playbackState?t.set("viewOffset",S.time):"complete"===o.playbackState&&t.set({viewOffset:0,viewCount:1})),o}))})(h,g||f,ue({state:(0,E.c)(p),playbackSessionID:p.get("playbackSessionID"),playQueueItemID:v,mediaItemID:l,metricsContextTuple:p.get("metricsContextTuple"),key:null==f?void 0:f.get("key"),ratingKey:null==f?void 0:f.get("ratingKey"),addCampaignParams:null==m?void 0:m.get("isCloud")},u)).done((0,K.c)(p,(e=>{r((0,ne.If)({playerType:s}));const{bandwidthTimeline:t,captureBuffer:n,transcodeSession:i}=e;p.set("bandwidthTimeline",t);const a=p.get("liveTVSession");i?(r(Ye({playerType:s,seekStartSeconds:i.seekStartSeconds,seekEndSeconds:i.seekEndSeconds})),a&&i.startedAt&&a.set({startedAt:i.startedAt,captureBuffer:n})):n&&(r(Ye({playerType:s,seekStartSeconds:n.seekStartSeconds,seekEndSeconds:n.seekEndSeconds})),a&&n.startedAt&&a.set({startedAt:n.startedAt}));const o=p.get("playQueue");d&&o.get("playQueueSelectedItemID")===y.get("playQueueItemID")&&(0,T.cp)(o).done((0,K.c)(p,(()=>{r((0,ne.If)({playerType:s}))}))),e.terminationCode&&(r((0,ne.ML)()),p.restoreDefaults({hasError:!0,errorMessage:e.terminationText}))})))},[he](e,{playerType:t,durationMilliseconds:r}){const n=(0,J.OG)(e,t),i=(0,b.c)(n).get("metadataItem"),s=S(n);if(!s)return;const a=i.get("Media")[s.mediaIndex],o=(0,Y.c)(a),c=!!o&&"vbr"===o.bitrateMode,l=r>0&&!c?r:a.duration;n.set({isMediaLoading:!1,durationSeconds:Math.floor((l||0)/1e3)})},[ye](e,{playerType:t,positionSeconds:r}){const n=(0,J.OG)(e,t);(0,Z.SS)((()=>{const e={positionSeconds:r},t=n.get("lastSeekPositionSeconds");null!==t&&r>t&&(e.lastSeekPositionSeconds=null),n.set(e)}))},[ge](e,{playerType:t,seekStartSeconds:r,seekEndSeconds:n}){(0,J.OG)(e,t).set({seekStartSeconds:r,seekEndSeconds:n})},[fe](e,{playerType:t,isBuffering:r}){(0,J.OG)(e,t).set({isBuffering:r})},[ve](e,{playerType:t,isMediaLoading:r}){(0,J.OG)(e,t).set({isMediaLoading:r})},[be](e,t){(0,J.OG)(e,t.playerType).set({isMediaLoading:!1,hasError:!0,errorMessage:t.errorMessage,errorCode:t.errorCode,errorCategory:t.errorCategory})},[Se](e,{playerType:t}){const r=(0,J.OG)(e,t);(0,Z.SS)((()=>{r.set({hasError:!1,errorMessage:null,errorCode:null,errorCategory:null})}))},[Pe](e,t,r){const{metadataItemEntityID:n,liveTVSessionEntityID:s,mediaItemID:a,playerType:o,secondsElapsed:c}=t,l=(0,J.OG)(e,o),d=l.get("playQueue"),u=S(l);if(!u)return;const p=l.get("isPaused"),m=c%30==0;if(c%10==0){const e=d.get("playQueueSelectedItemID"),t=d.get("playQueueItems").get(e);r(Ke({playerType:o,providerEntityID:l.get("providerEntityID"),playQueueItemEntityID:t.entityID(),metadataItemEntityID:n,liveTVSessionEntityID:s,mediaItemID:a,options:{playbackTime:l.get("itemPlaybackTime"),positionSeconds:l.get("positionSeconds"),durationSeconds:l.get("durationSeconds"),mediaIndex:u.mediaIndex,partIndex:u.partIndex,partCount:u.partCount}}))}if(m&&p&&u.transcodeSessionID){const t=u.transcodeServerEntityID;(function(e,t){(0,O.c)(t,"A transcoder ping requires a session identifier"),(0,M.c)("[Player] Transcoder Ping, %s",t);const r=`/video/:/transcode/universal/ping?session=${t}`;return i().ajax(e.getXHROptions(r)).promise()})(X.Ww(e,{serverEntityID:t}),u.transcodeSessionID).fail((t=>{404===t.status&&(l.set({startOffsetMilliseconds:1e3*l.get("positionSeconds")}),(0,P.c)(e).startPlayback(l,!0))}))}},[Ie](e,{playerType:t,shouldPlay:r,shouldPause:n,isApplicationInitiated:i},s){const a=(0,J.OG)(e,t),o=a.get("isPaused"),c=(0,P.c)(e),l="play",d="pause";let u;i||o||!(0,q.c)(a)?a.get("isPostPlayVisible")?(0,Z.SS)((()=>{a.set({isPostPlayVisible:!1}),c.playNextItem(a,!0)})):(u=r?l:n?d:o?l:d,o&&u===d||!o&&u===l||(0,Z.SS)((()=>{c[u](a,i)}))):s((0,$._K)((0,ee.c)("Pausing is not enabled on this channel")))},[Ee](e,{playerType:t,positionSeconds:r}){const n=(0,J.OG)(e,t),i=(0,P.c)(e);(0,q.c)(n)||(0,Z.SS)((()=>{i.seek(n,r)}))},[we](e,{playerType:t,positionSeconds:r}){const n=(0,J.OG)(e,t),i=S(n);if(!i)return;const s=(0,b.c)(n).entityID(),a=n.get("liveTVSession");let o=r;if(a){const e=a.get("captureBuffer"),t=a.get("startedAt");o+=t-e.startedAt,a.set({startedAt:t+r})}const c=pe(ue({},i),{url:C(i.url,o)});n.set({currentDecision:c,decisions:pe(ue({},n.get("decisions")),{[s]:c})})},[Ce](e,{playerType:t,allowDebounce:r=!0}){const n=(0,J.OG)(e,t);if((0,q.c)(n))return;const i=(0,P.c)(e),s=r?o.c.seekDebounceMilliseconds:null,a=Ot(n.get("nextPositionSeconds")||n.get("positionSeconds"),n.get("durationSeconds"),-I.L$);(0,Z.SS)((()=>{i.seek(n,a,s)}))},[Oe](e,{playerType:t,allowDebounce:r=!0}){const n=(0,J.OG)(e,t);if((0,q.c)(n))return;const i=(0,P.c)(e),s=n.get("positionSeconds"),a=n.get("nextPositionSeconds"),c=n.get("durationSeconds"),l=r?o.c.seekDebounceMilliseconds:null;if(c-s>I.ID){const e=Ot(a||s,c,I.OM);(0,Z.SS)((()=>{i.seek(n,e,l)}))}},[Me](e,{playerType:t}){const r=(0,J.OG)(e,t),n=(0,b.c)(r).get("metadataItem");if((0,q.c)(r))return;const i=(0,P.c)(e),s=n.get("chapters"),a=r.get("positionSeconds"),o=r.get("nextPositionSeconds"),c=r.get("durationSeconds");let l;l=s&&s.length?function(e,t){if(e&&e.length){for(let r=e.length-1;r>=0;r--){const n=e.at(r),i=Math.ceil(n.get("startTimeOffset")/1e3);if(i<t-I.WM)return i}return 0}}(s,o||a):Ot(o||a,c,-I.K_),(0,Z.SS)((()=>{i.seek(r,l)}))},[Te](e,{playerType:t}){const r=(0,J.OG)(e,t),n=(0,b.c)(r).get("metadataItem");if((0,q.c)(r))return;const i=(0,P.c)(e),s=n.get("chapters"),a=r.get("positionSeconds"),o=r.get("nextPositionSeconds"),c=r.get("durationSeconds");let l;s&&s.length?l=function(e,t){if(e&&e.length)for(let r=0;r<e.length;r++){const n=e.at(r),i=Math.ceil(n.get("startTimeOffset")/1e3);if(i>t)return i}}(s,a):c-(o||a)>I.ID&&(l=Ot(o||a,c,I.Qf)),null!=l&&(0,Z.SS)((()=>{i.seek(r,l)}))},[De](e,{playerType:t,volume:r,delta:n},i){const s=function(e){const t=e.get("remotePlayer");return t?t.get("volume"):(0,D.WI)("settingFinder").find("volume")}(e);let a=n?s+n:r;if(a=Math.max(0,Math.min(100,a)),a===s)return;const o=(0,J.OG)(e,t),c=(0,P.c)(e);(0,Z.SS)((()=>{c.changeVolume(o,a,i)}))},[ke](e,{playerType:t}){const r=(0,J.OG)(e,t),n=r.get("isSettingsVisible");(0,Z.SS)((()=>{r.set((0,G.c)(r,n,{isSettingsVisible:!n,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!1,isWatchTogetherParticipantsVisible:!1}))}))},[xe](e,{playerType:t}){const r=(0,J.OG)(e,t),n=r.get("isChaptersVisible");(0,Z.SS)((()=>{r.set((0,G.c)(r,n,{isSettingsVisible:!1,isChaptersVisible:!n,isPlayQueueVisible:!1,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!1,isWatchTogetherParticipantsVisible:!1}))}))},[Re](e,{playerType:t}){const r=(0,J.OG)(e,t),n=r.get("isSubtitlesOffsetSettingsVisible");(0,Z.SS)((()=>{r.set((0,G.c)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!n,isWatchTogetherParticipantsVisible:!1}))}))},[Ne](e,{playerType:t}){const r=(0,J.OG)(e,t),n=r.get("isWatchTogetherParticipantsVisible");(0,Z.SS)((()=>{r.set((0,G.c)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isWatchTogetherParticipantsVisible:!n}))}))},[Ae](e,{playerType:t,qualityIndex:r}){const n=(0,J.OG)(e,t);(0,P.c)(e).changeQualityIndex(n,r)},[Le](e,t,r){const{playerType:n,streamTypeString:i,streamID:s}=t,a=e.get("remotePlayer"),o=(0,J.OG)(e,n),c=(0,b.c)(o).get("metadataItem"),l=(0,P.c)(e);r((0,Q.Sg)({metadataItemEntityID:c.entityID(),mediaIndex:o.get("mediaIndex"),streamTypeString:i,streamID:s,updateLocalOnly:!!a,allParts:o.get("partIndex")>0})),l.changeStream(o,i,s)},[je](e,{playerType:t,subtitleColor:r},n){const i=(0,J.OG)(e,t);(0,P.c)(e).changeSubtitleColor(i,r,n)},[Ue](e,{playerType:t,subtitlePosition:r},n){const i=(0,J.OG)(e,t);(0,P.c)(e).changeSubtitlePosition(i,r,n)},[Fe](e,{playerType:t,subtitleSize:r},n){const i=(0,J.OG)(e,t);(0,P.c)(e).changeSubtitleSize(i,r,n)},[Ve](e,t,r){const{playerType:n,subtitleOffset:s,localUpdateOnly:a}=t,o=(0,P.c)(e),c=(0,J.OG)(e,n),d=c.get("mediaIndex")||0,u=c.get("partIndex")||0,p=(0,b.c)(c).get("metadataItem"),m=p.get("Media"),h=m[d],y=h.Part[u],g=te.c.get("subtitles").id,S=y.Stream.find((e=>e.streamType===g&&e.selected)),I=function(e,t,r,n,i){const s=v(f({},n),{offset:i}),a=(0,l.c)(r.Stream,n,s),o=v(f({},r),{Stream:a}),c=v(f({},t),{Part:(0,l.c)(t.Part,r,o)});return(0,l.c)(e,t,c)}(m,h,y,S,s);if(p.set({Media:I}),a)return;const E={offset:s};let C=S.key;R._u(p.provider.get("identifier"),R.Sg)&&(C=`/library/parts/${y.id}`,E.subtitleStreamID=S.id);const O=w.c.join(C,E),M=p.provider.getXHROptions(O,{type:"PUT",scope:"setMetadataItemStreamOffset--"+S.id});re.c.abortAll(M.scope),i().ajax(M).fail((e=>{e.aborting||p.get("Media")===I&&p.set({Media:m})})),o.changeSubtitleOffset(c,s,r)},[_e](e,{playerType:t,playbackSpeed:r}){const n=(0,J.OG)(e,t),i=(0,P.c)(e),s=Math.round(10*r)/10;i.changePlaybackSpeed(n,s)},[We](e,{playerType:t,playbackTime:r},n){(0,J.OG)(e,t).set("itemPlaybackTime",r)},[Be](e,{playerType:t,playbackTime:r},n){(0,J.OG)(e,t).set("sessionPlaybackTime",r)},[He](e,{playerType:t}){const r=(0,J.OG)(e,t);(0,b.c)(r).get("metadataItem").fetch({data:{skipRefresh:1},usePopulatedParams:!0})},[ze](e,{playerType:t,bufferedRanges:r}){const n=(0,J.OG)(e,t),i=r.map((e=>({startSeconds:Math.ceil(e.startSeconds),endSeconds:Math.floor(e.endSeconds)}))).sort(((e,t)=>e.startSeconds-t.startSeconds)).reduce(((e,t)=>{var r,n;const i=e.length-1;return t.startSeconds<(null==(r=e[i])?void 0:r.startSeconds)||t.startSeconds<(null==(n=e[i])?void 0:n.endSeconds)?(e[i].startSeconds=Math.min(e[i].startSeconds,t.startSeconds),e[i].endSeconds=Math.max(e[i].endSeconds,t.endSeconds)):e.push(t),e}),[]);a().isEqual(n.get("bufferedRanges"),i)||n.set({bufferedRanges:i})},[Ge](e,{playerType:t,width:r,height:n}){(0,J.OG)(e,t).set({mediaWidth:r,mediaHeight:n})},[qe](e,{playerType:t,canPlayThrough:r}){const n=(0,J.OG)(e,t);n.get("canPlayThrough")!==r&&n.set({canPlayThrough:r})}}},19960:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CLEAR_MOVE_ERROR:()=>x,CLEAR_RECORDING_SCHEDULE_PAGE:()=>I,FETCH_CALENDAR:()=>D,FETCH_MEDIA_SUBSCRIPTIONS:()=>E,GO_TO_NEXT_RANGE:()=>T,GO_TO_PREVIOUS_RANGE:()=>M,GO_TO_TODAY:()=>O,INIT_RECORDING_SCHEDULE_PAGE:()=>P,MOVE_MEDIA_SUBSCRIPTION:()=>w,PLAY_RECORDING:()=>k,SET_VISIBLE_DAYS:()=>C,clearMoveError:()=>B,clearRecordingSchedulePage:()=>R,fetchCalendar:()=>_,fetchMediaSubscriptions:()=>N,goToNextRange:()=>V,goToPreviousRange:()=>F,goToToday:()=>U,initRecordingSchedulePage:()=>A,moveMediaSubscription:()=>L,playRecording:()=>W,recordingSchedulePageActionHandlers:()=>q,setVisibleDays:()=>j});var n=r(94484),i=r(96388),s=r(30004),a=r(31228),o=r(14224),c=r(87168),l=r(90358),d=r(55340),u=r(76800),p=r(60352),m=r(27800),h=r(54268),y=r(35688),g=r(56960),f=r(66308),v=r(58036),b=r(89448),S=r(59396);const P="ui/recordingSchedulePage/initRecordingSchedulePage",I="ui/recordingSchedulePage/clearRecordingSchedulePage",E="ui/recordingSchedulePage/fetchMediaSubscriptions",w="ui/recordingSchedulePage/moveMediaSubscription",C="ui/recordingSchedulePage/setVisibleDays",O="ui/recordingSchedulePage/goToToday",M="ui/recordingSchedulePage/goToPreviousRange",T="ui/recordingSchedulePage/goToNextRange",D="ui/recordingSchedulePage/fetchCalendar",k="ui/recordingSchedulePage/playRecording",x="ui/recordingSchedulePage/clearMoveError",A=(0,d.c)(P),R=(0,d.c)(I),N=(0,d.c)(E),L=(0,d.c)(w),j=(0,d.c)(C),U=(0,d.c)(O),F=(0,d.c)(M),V=(0,d.c)(T),_=(0,d.c)(D),W=(0,d.c)(k),B=(0,d.c)(x);function H(e){return e.get("ui").get("recordingSchedulePage")}function z(e){return H(e).get("calendar")}function G(e,t,r){const n=H(e),i=(0,v.Ww)(e,t);if(n.get("isPagePopulated")){const e=n.get("calendar"),t=n.get("mediaSubscriptions");e&&e.server===i&&r(_()),t&&t.server===i&&r(N())}}const q=(0,u.c)({[P](e,t){const r=H(e),n=r.get("mediaSubscriptions"),i=r.get("calendar"),s=(0,v.Ww)(e,t),a={isPagePopulated:!0,isCalendarPending:!1,isCalendarPopulated:!1,calendarError:null};n&&n.server===s||(a.mediaSubscriptions=new l.c([],{server:s})),i&&i.server===s?i.restoreDefaults():a.calendar=new c.c({},{server:s}),r.set(a)},[I](e){H(e).set("isPagePopulated",!1)},[E]:(0,p.c)({key:"mediaSubscriptions",getModel:H}),[w](e,t){const r=H(e),n=r.get("mediaSubscriptions"),i=(0,v.U5)(e,t),s=i&&n.indexOf(i),{moveIndex:a}=t;if((0,b.SS)((()=>{r.set({mediaSubscriptionMoveError:null})})),s===a||s===a-1)return;const o=a>s?a-1:a;n.remove(i),n.add(i,{at:o});const c=o>0?n.at(o-1).id:void 0;(0,m.c)(i,c).fail((e=>{n.remove(i),n.add(i,{at:s});const t=401===e.status?(0,S.c)("You do not have permission to perform this action."):(0,S.c)("There was a problem saving your changes. Please try again.");r.set({mediaSubscriptionMoveError:t})}))},[x](e,t){H(e).set({mediaSubscriptionMoveError:null})},[C](e,t,r){z(e).set("visibleDays",t.visibleDays)},[O](e,t,r){z(e).set("time",(0,s.c)(new Date))},[M](e,t,r){const n=z(e),o=n.get("visibleDays"),c=(0,i.c)(n.get("time"));n.set("time",(0,s.c)((0,a.c)(c,o)))},[T](e,t,r){const a=z(e),o=a.get("visibleDays"),c=(0,i.c)(a.get("time"));a.set("time",(0,s.c)((0,n.c)(c,o)))},[D]:(0,p.c)({key:"calendar",getModel:H}),[k](e,t,r){const{serverEntityID:n,providerEntityID:i,linkedKey:s,metricsContext:a}=t,c=(0,v.Ww)(e,t),l=new o.c({key:s},{server:c});l.populate().done((()=>{r((0,y.wb)({serverEntityID:n,providerEntityID:i,metadataItemEntityID:l.entityID(),metricsPage:g.yM,metricsContext:a}))}))},[h.uI](e,t,r){const n=t.activity;n.type===f.h4&&G(e,t,r),n.type===f.y8&&"error"===n.Response.status&&G(e,t,r)}})},68940:(e,t,r)=>{"use strict";r.d(t,{WY:()=>P,_M:()=>S,aq:()=>M,eK:()=>I});var n=r(37588),i=r.n(n),s=r(60784),a=r(55340),o=r(76800),c=r(88880),l=r(47456),d=r(54268),u=r(51100),p=r(66308),m=r(58036),h=r(59396),y=r(96504);const g="ui/subtitlesModal/resetMetadataItemSubtitles",f="ui/subtitlesModal/fetchMetadataItemSubtitles",v="ui/subtitlesModal/downloadMetadataItemSubtitle",b="ui/subtitlesModal/clearSubtitlesDownloadError",S=(0,a.c)(g),P=(0,a.c)(f),I=(0,a.c)(v);(0,a.c)(b);let E=null;function w(e){return e.get("ui").get("subtitlesModal")}function C(e,t){E&&(E=window.clearTimeout(E));const r=t.get("metadataItemEntityID"),n=(0,m.oH)(e,{metadataItemEntityID:r}),i=n.server,s=t.get("subtitlesDownloadStartTime"),a=t.get("isSubtitlesDownloaded"),o=t.get("subtitlesDownloadError"),c=t.get("subtitlesDownloadKey");a||o||(s&&Date.now()-s>3e4?t.set({subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null,isSubtitlesDownloaded:!1,subtitlesDownloadError:(0,h.c)("Failed to download subtitles in time")}):E=window.setTimeout((()=>{n.fetch({data:{skipRefresh:1},usePopulatedParams:!0}).then((()=>{if(n.get("Media").some((e=>e.Part.some((e=>e.Stream.some((e=>e.key===c)))))))return t.set({subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null,isSubtitlesDownloaded:!0,subtitlesDownloadError:null}),void O(e);i.get("hasEventConnection")||C(e,t)}),(()=>{C(e,t)}))}),2e3))}function O(e){const t=e.get("ui").get("audioVideoPlayer");t.get("isOpen")&&(0,c.c)(e).refreshRemoteStreams(t)}const M=(0,o.c)({[g](e){const t=w(e),r=t.get("subtitles");E&&(E=window.clearTimeout(E)),r.abortPendingPopulate(),r.resetPopulatePromise(null),t.restoreDefaults()},[f](e,t,r){const n=w(e),i=function(e){return e.get("user").get("profile")}(e),a=(0,m.oH)(e,t),o=a.server.entityID(),c=n.get("subtitles");c&&(c.abortPendingPopulate(),c.resetPopulatePromise(null));const l=new s.c([],{key:a.get("key"),server:a.server,provider:a.provider,language:t.language,title:t.title,mediaItemID:t.mediaItemID,minimumScore:t.minimumScore,hearingImpaired:i.get("defaultSubtitleAccessibility"),forced:i.get("defaultSubtitleForced")});n.set({subtitles:l,serverEntityID:o,metadataItemEntityID:t.metadataItemEntityID,isSubtitlesPending:!0,isSubtitlesPopulated:!1,subtitlesError:null}),l.fetch().then((e=>{n.set({isSubtitlesPending:!1,isSubtitlesPopulated:!0})}),((e,t)=>{t.aborting?n.set("isSubtitlesPending",!1):n.set({isSubtitlesPending:!1,subtitlesError:(0,u.c)(t,(0,h.c)("Unable to load subtitles"))})}))},[v](e,t,r){const n=w(e),s=(0,m.oH)(e,t),a=s.server,o={key:t.key,codec:t.codec,language:t.language,hearingImpaired:t.hearingImpaired?1:0,forced:t.forced?1:0,providerTitle:t.providerTitle,mediaItemID:t.mediaItemID,transient:t.transient},c=y.c.join([s.get("key"),"/subtitles"],o),l=a.getXHROptions(c,{type:"PUT"});n.set({subtitlesDownloadKey:t.key,subtitlesDownloadStartTime:Date.now(),isSubtitlesDownloaded:!1,subtitlesDownloadError:null}),i().ajax(l).then(((t,r,i)=>{const s=i.getResponseHeader("X-Plex-Activity");n.set("subtitlesDownloadActivityID",s),a.get("hasEventConnection")||C(e,n)}),(e=>{n.set({subtitlesDownloadKey:null,subtitlesDownloadError:(0,u.c)(e,(0,h.c)("Unable to download subtitles"))})}))},[b](e){w(e).set("subtitlesDownloadError",null)},[d.Oc](e,t){const{serverEntityID:r}=t,n=w(e);r===n.get("serverEntityID")&&C(e,n)},[d.uI](e,t,r){const{activity:n}=t;if(n.type!==p.M$)return;const i=w(e);if(n.uuid!==i.get("subtitlesDownloadActivityID"))return;const s=i.get("serverEntityID"),a=i.get("metadataItemEntityID"),o={subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null},c=null!=n.Response.error;c?(o.isSubtitlesDownloaded=!1,o.subtitlesDownloadError=n.Response.status):o.isSubtitlesDownloaded=!0,i.set(o),c||(O(e),r((0,l.qG)({serverEntityID:s,metadataItemEntityID:a})))}})},59740:(e,t,r)=>{"use strict";r.d(t,{SK:()=>o,_7:()=>a,_K:()=>c,aS:()=>l,oZ:()=>s});var n=r(55340),i=r(43908);const s="ui/repopulatePage",a="ui/showAlert",o=(0,n.c)(s),c=(0,n.c)(a,(e=>"string"==typeof e?{type:i._,message:e}:e)),l={[a](e,t){}}},72528:(e,t,r)=>{"use strict";r.d(t,{EV:()=>I,El:()=>m,Pr:()=>b,Qn:()=>C,SI:()=>S,Su:()=>d,U$:()=>u,W0:()=>h,WS:()=>f,_O:()=>w,a2:()=>E,af:()=>P,cP:()=>g,iu:()=>y,uA:()=>p,wN:()=>l});var n=r(44212),i=r(55340),s=r(60352),a=r(52108),o=r(38828),c=r(58036);const l="user/lockUser",d="user/fetchUserFeatures",u="user/populateUserFeatures",p="user/saveExperienceSettings",m="user/saveSubtitleColor",h="user/saveSubtitlePosition",y="user/saveSubtitleSize",g="user/saveAutoPlay",f=(0,i.c)(l),v=(0,i.c)(d),b=(0,i.c)(u),S=(0,n.Uh)(p),P=(0,i.c)(m),I=(0,i.c)(h),E=(0,i.c)(y),w=(0,i.c)(g),C={[l](e,t){o.c.error("LOCK_USER must be handled by each project")},[d]:(0,s.c)({key:"features",getModel:c.s7}),[u]:(0,a.c)({key:"features",fetchActionCreator:v,getModel:c.s7}),[p](e,t){o.c.error("SAVE_EXPERIENCE_SETTINGS must be handled by each project")},[m](e,t,r){r(S(t))},[h](e,t,r){r(S(t))},[y](e,t,r){r(S(t))},[g](e,t,r){r(S(t))}}},15072:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(12488);function i(e,t){return(0,n.c)(e,(e=>t.reduce(((t,r)=>(e&&r in e&&(t[r]=e[r]),t)),{})))}},12488:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(95720),s=r.n(i);const a=(0,n.qu)(n.Aj,s().isEqual)},18580:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(57864),i=r(95720),s=r.n(i),a=r(46028),o=r(46800),c=r(47884),l=r(90044),d=r(44768),u=r(96504);const p={},m={};function h(e,t){const{serverEntityID:r,providerEntityID:i}=t,u=`${r}:${i}`;return m[u]||(m[u]=(0,a.c)((0,n.M3)((0,c.c)(),(0,o.c)(),((e,t)=>{const r=e&&e.activeConnection&&e.activeConnection.uri;if(!r)return p;let n,i="/photo/:/transcode",a=!1,o=!1;if(t){const e=s().findWhere(t.features,{type:l.c.IMAGE_TRANSCODER});e&&(i=e.key,a=(0,d.c)(i),o=e.public)}return n=a?t&&t.baseURL?t.baseURL:r:"",{accessToken:e.accessToken,baseUrl:n,isAbsoluteTranscodeKey:a,isPublicTranscoder:o,transcodeKey:i,uri:r}})),(e=>e))),m[u](e,t)}function y(e){const t=e&&e.urlParams;return(0,n.M3)(((e,{url:t})=>t),h,((e,r)=>{if(!e||r===p)return;const{accessToken:n,baseUrl:i,isAbsoluteTranscodeKey:s,isPublicTranscoder:a,transcodeKey:o,uri:c}=r;let l;if((0,d.c)(e))l=e;else{const r={"X-Plex-Token":n};t&&Object.assign(r,t),l=u.c.join([i,e],r)}const m=s?o:[c,o];return u.c.join(m,{url:l,"X-Plex-Token":a?void 0:n})}))}},46028:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(23276);const s=(0,n.qu)(n.Aj,i.c)},99472:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(47884),s=r(65631);function a(){return(0,n.M3)(s.c,(0,n.M3)((0,i.c)(),(e=>e?e.desktop.libraries:void 0)),((e,t)=>t?t.map((t=>e[t])):[]))}},65631:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.libraries))},70168:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(57864),i=r(95720),s=r.n(i),a=r(4659),o=r(73788),c=r(66308);const l=function(){return(0,n.M3)((0,o.c)(),(0,a.c)(),((e,t)=>s().find(e,(e=>e.type===c.y8&&e.Context.itemKey&&e.Context.itemKey===t.key))))}},96516:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(53256),s=r(46112);function a(){return(0,n.M3)((0,i.c)(),(0,s.c)(),((e,t)=>{if(e&&(null==t?void 0:t.currentPosition))return e.Media.find((e=>e.beginsAt<=t.currentPosition&&e.endsAt>t.currentPosition))}))}},53256:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(46112),s=r(94952);function a(){return(0,n.M3)((0,i.c)(),s.c,((e,t)=>{if(e)return t[e.airingMetadataItem]}))}},46112:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(96072),s=r(34032);function a(){return(0,n.M3)(s.c,(0,i.c)("liveTVSession"),((e,t)=>e[t]))}},50148:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(57864),i=r(95720),s=r.n(i),a=r(46800),o=r(73788),c=r(66308);const l=function(){return(0,n.M3)((0,a.c)(),(0,o.c)(),((e,t)=>e?s().find(t,(t=>t.type===c.K&&t.Context.identifier===e.identifier)):null))}},34032:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.liveTVSessions))},4659:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(94952);function s(){return(0,n.M3)(((e,{metadataItemEntityID:t})=>t),i.c,((e,t)=>t[e]))}},36324:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(52224);function s(){return(0,n.M3)(((e,{metadataListEntityID:t})=>t),i.c,((e,t)=>t[e]))}},2764:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(4659),s=r(61500),a=r(85328),o=r(85976);function c(){return(0,n.M3)((0,i.c)(),s.c,a.c,((e,t,r)=>e&&e.source||(0,o.c)({providerIdentifier:t.identifier,serverIdentifier:r.machineIdentifier})))}},76648:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(57864),i=r(95720),s=r.n(i),a=r(6396),o=r(70184),c=r(33040),l=r(4659);const d={s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",y:"years"};function u(e){if("now"===e)return{};const t=e.match(/([-+]?\d+)([smhdwMy])/);if(t){const[,e,r]=t;if(e&&r)return{[d[r]]:parseInt(e,10)}}else{const t=parseInt(e,10);if(s().isNumber(t))return t}return{}}function p(e,t){return!(!s().isObject(t)||!(0,a.c)(e,t))||e>=t}function m(e,t){return!(!s().isObject(t)||!(0,o.c)(e,t))||e<=t}function h(){return(0,n.M3)(((e,{containerKey:t})=>t),(0,l.c)(),((e,t)=>{if(!t||!t.Media)return;const r=function(e){if(!e)return;const[,t]=e.split("?");return t?c.c.parseQueryString(t):void 0}(e),n=s().sortBy(t.Media,"endsAt"),i=Date.now()/1e3;for(let e=0,t=n.length;e<t;e++){const t=n[e];if(r){const e=r["beginsAt>"],n=r["beginsAt<"],i=r["endsAt>"],s=r["endsAt<"];if(e){const r=u(e);if(m(t.beginsAt,r))continue}if(n){const e=u(n);if(p(t.beginsAt,e))continue}if(i){const e=u(i);if(m(t.endsAt,e))continue}if(s){const e=u(s);if(p(t.endsAt,e))continue}}if(t.endsAt>i)return t}return s().first(n)}))}},94952:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.metadataItems))},52224:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.metadataLists))},1764:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(94952),s=r(57674);const a=function(e=0){return(0,n.M3)((0,s.c)(e),i.c,((e,t)=>{if(e&&e.metadataItem)return t[e.metadataItem]}))}},57674:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(72596),s=r(85180);const a=function(e=0){return(0,n.M3)((0,i.c)(),s.c,((t,r)=>{const n=t?t.playQueueItems:[];if(n.length){const i=t.currentIndex;let s=i+e;t.repeat&&(s=function(e,t,r){return(e+t%r+r)%r}(i,e,t.length));const a=n[s];return a&&r[a]}}))}},72596:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(96072);const i=function(){return(0,n.c)("playQueue")}},96072:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(81792);function s(e){return(0,n.M3)((0,i.c)(),(t=>t?t[e]:void 0))}},15508:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(95720),s=r.n(i),a=r(46028);const o=function(e,t){return(0,a.c)((0,n.M3)((e=>e.ui),((e,{playerType:t})=>t),((r,n=t)=>{const i=n+"Player";return r[i]?s().pick(r[i],e):{}})),(e=>e))}},81792:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(57864);function i(){return(0,n.M3)((e=>e.ui),((e,{playerType:t})=>t),((e,t)=>e[t+"Player"]))}},85180:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.playQueueItems))},79196:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(80260);const s=(0,n.M3)(i.c,(e=>!!e))},80260:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e.remotePlayer}},5648:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(46800),s=r(93268);function a(){return(0,n.M3)((0,i.c)(),(e=>{const t=(0,s.c)(e);return t?t.directories:[]}))}},46800:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(92076);function s(){return(0,n.M3)(((e,{providerEntityID:t})=>t),i.c,((e,t)=>t[e]))}},92076:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.providers))},1744:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(92076),s=r(29632),a=r(35860);const o=(0,n.M3)((0,s.c)("providers"),i.c,((e,t)=>!!e&&e.some((e=>a._u(t[e].identifier,a.$9)&&a.QJ(t[e].identifier)))))},83095:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(61500);function i(e,{metadataItemEntityID:t}){const r=e.entities.metadataItems[t],i=r&&r.providerEntityID;if(i)return(0,n.c)(e,{providerEntityID:i})}},11876:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(92076),s=r(13148),a=r(29632);const o=(0,n.M3)(s.c,i.c,(0,a.c)("providers"),((e,t,r)=>e.reduce(((e,n)=>{const i=(n.isCloud?r:n.providers).map((e=>({server:n,provider:t[e]}))),s=i.length?i:[{server:n}];return e.push(...s),e}),[])))},61500:(e,t,r)=>{"use strict";r.d(t,{c:()=>c,s:()=>a});var n=r(57864),i=r(12488),s=r(90044);function a(e){return e?{entityID:e.entityID,id:e.id,parentID:e.parentID,identifier:e.identifier,metricsIdentifier:e.metricsIdentifier,isLibraryProvider:e.isLibraryProvider,isPopulated:!!e.isPopulated,epgSource:e.epgSource,title:e.title,sourceTitle:e.sourceTitle,protocols:e.protocols.reduce(((e,t)=>(e[t]=!0,e)),{}),features:e.features.reduce(((e,t)=>{let r=t;if(t.type===s.c.ACTIONS){let e={type:s.c.ACTIONS};e=t.actions.reduce(((e,t)=>(e[t.id]=t,e)),e),r=e}return e[t.type]=r,e}),{})}:null}const o={};function c(e,{providerEntityID:t}){let r=o[t];return r||(r=(0,i.c)((0,n.M3)(((e,t)=>e.entities.providers[t]),a),(e=>e)),o[t]=r),r(e,t)}},26240:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(92076),s=r(29632);const a=(0,n.M3)((0,s.c)("providers"),i.c,((e,t)=>e?e.map((e=>t[e])):[]))},40236:(e,t,r)=>{"use strict";function n(e){return e.entities}r.d(t,{c:()=>n})},73788:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(47884);const s=function(){return(0,n.M3)((0,i.c)(),(e=>{if(e)return e.desktop.activities}))}},18480:(e,t,r)=>{"use strict";r.d(t,{Cw:()=>d,M3:()=>u,cp:()=>c,qc:()=>l});var n=r(57864),i=r(95720),s=r.n(i),a=r(66308),o=r(73788);function c(e){return(0,n.M3)((0,o.c)(),(t=>s().find(t,{type:e})))}function l(){return c(a.kV)}function d(){return c(a.kX)}function u(){return c(a.Ep)}},29e3:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(47884);function s(){return(0,n.M3)((0,i.c)(),(e=>e&&e.desktop))}},47884:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(33808);function s(){return(0,n.M3)(((e,{serverEntityID:t})=>t),i.c,((e,t)=>t[e]))}},33808:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.servers))},14252:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(33808);const s=(0,n.M3)(i.c,(e=>e.cloudServer),((e,t)=>e[t]))},43180:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(12488),s=r(13148);const a=(0,i.c)(s.c,(e=>e.filter((e=>e.isPrimaryEligible)))),o=(0,n.M3)(a,(e=>e.reduce(((e,t)=>(t.isShared||t.isOutOfDate||e.push(t.entityID),e)),[])))},47611:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(83095),s=r(65348);const a=(0,n.M3)(s.c,i.c,((e,t)=>({itemServerEntityID:e&&e.entityID,itemProviderEntityID:t&&t.entityID})))},65348:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(85328);function i(e,{metadataItemEntityID:t}){const r=e.entities.metadataItems[t],i=r&&r.serverEntityID;if(i)return(0,n.c)(e,{serverEntityID:i})}},45764:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(91176);const s=(0,n.M3)(i.c,(e=>e.map((e=>e.entityID))))},91176:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(46028),s=r(13148);const a=(0,i.c)((0,n.M3)(s.c,(e=>e.filter((e=>e.isFullOwnedServer&&e.isConnected)))),(e=>e))},45436:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(46028),s=r(13148);const a=(0,i.c)((0,n.M3)(s.c,(e=>e.filter((e=>(e.isFullOwnedServer||e.isShared)&&e.isConnected)))),(e=>e))},51328:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(13148);const s=(0,n.M3)(i.c,(e=>e.filter((e=>e.isFullServer&&!!e.friendlyName))))},13148:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(33808);const s=(0,n.M3)(i.c,(e=>e.servers),(e=>e.embeddedServer),((e,t,r)=>{const n=t?t.map((t=>e[t])):[];return r&&e[r]&&n.push(e[r]),n}))},85328:(e,t,r)=>{"use strict";r.d(t,{W:()=>s,c:()=>o});var n=r(57864),i=r(46028);function s(e){return e?{entityID:e.entityID,machineIdentifier:e.machineIdentifier,version:e.version,friendlyName:e.friendlyName,sourceTitle:e.sourceTitle,allowSync:e.allowSync,allowMediaDeletion:e.allowMediaDeletion,backgroundProcessing:e.backgroundProcessing,transcoderVideo:e.transcoderVideo,isConnected:e.isConnected,isUnavailable:e.isUnavailable,isFullServer:e.isFullServer,isFullOwnedServer:e.isFullOwnedServer,isOutOfDate:e.isOutOfDate,isCloud:e.isCloud,isShared:e.isShared,livetv:e.livetv,ownerId:e.ownerId,ownerFeatures:e.ownerFeatures}:null}const a={};function o(e,{serverEntityID:t}){let r=a[t];return r||(r=(0,i.c)((0,n.M3)(((e,t)=>e.entities.servers[t]),s),(e=>e)),a[t]=r),r(e,t)}},13671:(e,t,r)=>{"use strict";function n(e){return e.deviceSettings}r.d(t,{c:()=>n})},99252:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(52180);function i(e){const t=e.remotePlayer;return t?t.volume:(0,n.WI)("selectLocalVolume")(e)}},16200:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.mediaSubscriptions))},95348:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(26240),s=r(14252),a=r(29632);const o=(0,n.M3)(s.c,(0,a.c)("isProvidersPopulated"),(0,a.c)("providersError"),i.c,((e,t,r,n)=>{if(e.isRejected)return!0;const i=(t||!!r)&&n.every((e=>e.isPopulated||!!e.error));return e.isResourcesPopulated&&i}))},29632:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(70068);const s={};function a(e){if(s[e])return s[e];const t=(0,n.M3)(i.c,(t=>t[e]));return s[e]=t,t}},64744:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(36856);const s={},a=function(e){const t=s[e]||(0,n.M3)(i.c,(t=>!!t[e]));return s[e]=t,t}},30332:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.friends))},50660:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.homeUsers))},92608:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(32516);const s=(0,n.M3)(i.c,(e=>e.savedPivotParams))},10348:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e.ui.authCodeExchange}},42460:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(70068);const s=(0,n.M3)(i.c,(e=>e.allFriends))},70508:(e,t,r)=>{"use strict";function n(e){return!!e.user.anonymous}r.d(t,{c:()=>n})},70404:(e,t,r)=>{"use strict";function n(e){return!e.user.isFullUser}r.d(t,{c:()=>n})},19264:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(29632),s=r(70068),a=r(78364);const o=(0,n.M3)(s.c,(0,i.c)("features"),(0,i.c)("services"),(function({anonymous:e,isFullUser:t},r=[],n=[]){return{anonymous:e,isFullUser:t,features:(0,a.c)(r,(e=>e.uuid),(()=>!0)),services:(0,a.c)(n,(e=>e.id),(e=>e))}}))},70068:(e,t,r)=>{"use strict";function n(e){return e.user}r.d(t,{c:()=>n})},32516:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(70068);const s=(0,n.M3)(i.c,(e=>e.experienceSettings))},36856:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(8137),s=r(29632);const a=(0,n.M3)((0,s.c)("features"),(e=>(0,i.c)(e||[])))},90156:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(70068);const s=(0,n.M3)(i.c,(e=>e.desktop))},60004:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(32516);const s=(0,n.M3)(i.c,(({language:e})=>e))},97024:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(32516);const s=(0,n.M3)(i.c,(e=>e.sidebarSettings)),a=(0,n.M3)(s,(e=>e.pinnedSources))},31460:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(40236);const s=(0,n.M3)(i.c,(e=>e.watchTogetherRooms||{}))},91600:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(95720),i=r.n(n);function s(){i().isFunction(this.initialize)&&this.initialize.apply(this,arguments)}s.extend=function(e,t){const r=this;let n;n=e&&i().has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)||null},i().extend(n,r,t);const s=function(){this.constructor=n};if(s.prototype=r.prototype,n.prototype=new s,e&&e.hasOwnProperty("mixins")){let t=e.mixins;delete e.mixins,Array.isArray(t)||(t=[t]),i().each(t,(function(e){i().extend(n.prototype,e)}))}return e&&i().extend(n.prototype,e),n.__super__=r.prototype,n};const a=s},78364:(e,t,r)=>{"use strict";function n(e,t,r){return e.reduce(((n,i,s)=>(n[t(i,s,e)]=r(i,s,e),n)),{})}r.d(t,{c:()=>n})},46260:(e,t,r)=>{"use strict";function n(e,t,r){const n=e.indexOf(t);if(n<0)return e;const i=e.slice(0);return i[n]=r,i}r.d(t,{c:()=>n})},44652:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(95720),i=r.n(n),s=r(91600),a=r(21248),o=r(38828),c=r(43352);const l=s.c.extend({mixins:c.c,maxCycles:3,maxSize:50,isListening:!1,initialize:function(){this._cache={},this.size=0,this.cycles=[],this.cycle()},startListening:function(){this.isListening||(this.isListening=!0,this.listenTo(a.c,{"cycle:cache":this.cycle,"clearWhere:cache":this.clearWhere,"clearAll:cache":this.clearAll,"clearCycles:cache":this.clearCycles}))},get:function(e){const t=this._cache[e];return t&&t._cacheCycle&&this.setItemCycle(t,e,i().first(this.cycles)),t},store:function(e,t){t||(t=this.getItemCacheKey(e)),this.remove(e),t&&(this.startListening(),e._cacheKey=t,this._cache[t]=e,this.size++,e.persistInCache||this.setItemCycle(e,t,i().first(this.cycles)))},getItemCacheKey:function(e){return i().result(e,"cacheKey")},setItemCycle:function(e,t,r){const n=e._cacheCycle;n&&n.hasOwnProperty(t)&&delete n[t],e._cacheCycle=r,r[t]=e},cycle:function(){this.size>this.maxSize&&(o.c.warn("Cache overflow, size: "+this.size),i().each(this.cycles.slice(1),this.removeCycle,this)),this.cycles.unshift({}),this.cycles.length>Math.max(this.maxCycles,1)&&this.removeCycle(i().last(this.cycles))},remove:function(e){if(!e||!e._cacheKey)return;const t=e._cacheKey;this._cache.hasOwnProperty(t)&&(delete this._cache[t],this.size--),e._cacheCycle&&(e._cacheCycle.hasOwnProperty(t)&&delete e._cacheCycle[t],delete e._cacheCycle),delete e._cacheKey},removeCycle:function(e){i().each(i().values(e),this.remove,this);const t=i().indexOf(this.cycles,e);this.cycles.splice(t,1)},clearWhere:function(e){const t=i().where(i().values(this._cache),e);i().each(t,this.remove,this)},clearAll:function(){i().each(i().values(this._cache),this.remove,this),this.cycles.length=0,this.cycle(),this.stopListening(),this.isListening=!1},clearCycles:function(){const e=this.cycles;for(;e.length;)this.removeCycle(e[e.length-1]);this.cycle()}})},13836:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(95720),i=r.n(n),s=r(44652);const a=s.c.extend({maxCycles:3,maxSize:20,get:function(e){const t=s.c.prototype.get.apply(this,arguments);return t&&t.every((function(e){return!(!e.cache||!e.cache.isListening||(e.cache.store(e),0))})),t},getItemCacheKey:function(e){let t=i().result(e,"url");return e.server&&(t=e.server.getScopedKey(t)),e.provider&&(t=e.provider.getScopedKey(t)),t}})},3736:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(32364),a=r(44652);const o=a.c.extend({maxCycles:3,maxSize:50,imageParamsRegex:/&?(size|scale|width|height)=([^&]+)/g,initialize:function(){a.c.prototype.initialize.apply(this,arguments),this._infoMemo={}},store:function(e,t){if(t||(t=this.getItemCacheKey(e)),!t)return;const r=e.url,n=this.getImageInfo(r),s={url:r,blobUrl:e.blobUrl,size:n.size};let a=this.get(t);if(a){if(!a.images.hasOwnProperty(r)){const e=a.sizes;a.images[r]=s;const t=i().sortedIndex(e,s,"size");e.splice(t,0,s)}}else a={images:{},sizes:[s]},a.images[r]=s,this.startListening(),a._cacheKey=t,this._cache[t]=a,this.size++,e.persistInCache||this.setItemCycle(a,t,i().first(this.cycles))},getItemCacheKey:function(e){return this.getImageInfo(e.url).key},getImageInfo:function(e){if(this._infoMemo.hasOwnProperty(e))return this._infoMemo[e];const t={width:"0",scale:"1"},r=e.replace(this.imageParamsRegex,(function(e,r,n){return t[r]=n,""})),n=t.size&&t.size.split("-"),i={key:r,size:(n&&2===n.length?n[1]:parseInt(t.width,10))*parseInt(t.scale,10)};return this._infoMemo[e]=i,i},removeImageInfo:function(e){this._infoMemo.hasOwnProperty(e)&&delete this._infoMemo[e]},getBlobUrl:function(e){const t=this.getImageInfo(e),r=this.get(t.key);if(r){const t=r.images[e];if(t)return t.blobUrl}},getPlaceholder:function(e){const t=this.getImageInfo(e),r=this.get(t.key);if(r){if(r.images[e])return;return i().last(r.sizes).blobUrl}},remove:function(e,t){a.c.prototype.remove.apply(this,arguments),i().each(e.sizes,(function(e){this.removeImageInfo(e.url),s.c.hasObjectUrl&&window.URL.revokeObjectURL(e.blobUrl)}),this)}})},19508:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=r(44652).c.extend({maxCycles:5,maxSize:100,getItemCacheKey:function(e,t){if(i().isFunction(e.cacheKey))return t||(t=e.toJSON()),e.cacheKey(t)}})},6996:(e,t,r)=>{"use strict";r.d(t,{C0:()=>u,CA:()=>i,KE:()=>a,WG:()=>s,YP:()=>m,an:()=>p,e4:()=>l,go:()=>n,mc:()=>o,mm:()=>d,uC:()=>c});const n="com.plexapp.agents.imdb",i="com.plexapp.agents.lastfm",s="com.plexapp.agents.lyricfind",a="com.plexapp.agents.none",o="com.plexapp.agents.plexmusic",c="tv.plex.agents.music",l="tv.plex.agents.movie",d="tv.plex.agents.none",u="tv.plex.agents.series",p="com.plexapp.agents.themoviedb",m="com.plexapp.agents.thetvdb"},43908:(e,t,r)=>{"use strict";r.d(t,{I:()=>i,_:()=>n});const n="error",i="success"},2344:(e,t,r)=>{"use strict";r.d(t,{WQ:()=>n,s5:()=>i});const n="com.tidal",i="com.watchtogether"},22032:(e,t,r)=>{"use strict";r.d(t,{Iv:()=>n,WE:()=>i,ie:()=>s});const n=100,i=100,s=700},16852:(e,t,r)=>{"use strict";r.d(t,{Ap:()=>d,D9:()=>c,EB:()=>h,Eh:()=>P,GS:()=>p,M3:()=>f,MR:()=>s,Qb:()=>a,SE:()=>i,Y:()=>b,_8:()=>o,eO:()=>S,ii:()=>l,k3:()=>y,m4:()=>n,sj:()=>v,ui:()=>g,yC:()=>m});const n="https://app.plex.tv",i="https://forums.plex.tv",s="https://www.plex.tv/media-server-downloads",a="ms-windows-store://pdp/?productid=XPFM11Z0W10R7G&cid=fromDesktop",o=`${s}/#plex-app`,c="https://status.plex.tv",l="https://www.plex.tv/tidal",d="https://account.plex.tv/checkout",u="?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps",p="https://support.plex.tv"+u,m="https://support.plex.tv/articles/225877427-supported-dvr-tuners-and-antennas/"+u,h="https://support.plex.tv/articles/community-supported-tuners/"+u,y="https://support.plex.tv/articles/206225077-how-to-use-secure-server-connections/"+u,g="https://support.plex.tv/articles/204985278-account-audio-subtitle-language-settings/"+u,f="https://support.plex.tv/hc/en-us/articles/115002267687-Webhooks/"+u,v="https://support.plex.tv/articles/204232573-restricting-the-shares/",b="https://support.plex.tv/articles/200241558-agents/",S="https://support.plex.tv/articles/204281528-why-am-i-locked-out-of-server-settings-and-how-do-i-get-in/",P="/users/other-services"},9248:(e,t,r)=>{"use strict";r.d(t,{G:()=>n,c:()=>i});var n=(e=>(e.Development="https://community-dev.plex.tv/api",e.Staging="https://community-staging.plex.tv/api",e.Production="https://community.plex.tv/api",e))(n||{});const i=[{title:"Development",value:"https://community-dev.plex.tv/api"},{title:"Staging",value:"https://community-staging.plex.tv/api"},{title:"Production",value:"https://community.plex.tv/api"}]},29680:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={NONE:0,VAST:1};n.settings=[{value:n.NONE,title:"None"},{value:n.VAST,title:"Add ?debug=1 to ad requests"}];const i=n},33428:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={DISABLED:0,ENABLED:1,VERBOSE:2};n.settings=[{value:n.DISABLED,title:"Disabled"},{value:n.ENABLED,title:"Enabled"},{value:n.VERBOSE,title:"Verbose"}];const i=n},67884:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(72152),i=r(89212);const s={[n.FAIRPLAY]:i.FAIRPLAY,[n.FAIRPLAY_AUDIO]:i.FAIRPLAY,[n.FAIRPLAY_VIDEO]:i.FAIRPLAY,[n.PLAYREADY]:i.PLAYREADY,[n.PLAYREADY_AUDIO]:i.PLAYREADY,[n.PLAYREADY_VIDEO]:i.PLAYREADY,[n.WIDEVINE]:i.WIDEVINE,[n.WIDEVINE_AUDIO]:i.WIDEVINE,[n.WIDEVINE_VIDEO]:i.WIDEVINE}},72152:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FAIRPLAY:()=>s,FAIRPLAY_AUDIO:()=>a,FAIRPLAY_VIDEO:()=>o,NONE:()=>h,PLAYREADY:()=>c,PLAYREADY_AUDIO:()=>l,PLAYREADY_VIDEO:()=>d,WIDEVINE:()=>u,WIDEVINE_AUDIO:()=>p,WIDEVINE_VIDEO:()=>m});var n=r(30680),i=r(40604);const s=(0,n.c)("fairplay"),a=(0,n.c)("fairplay",i.KI),o=(0,n.c)("fairplay",i.im),c=(0,n.c)("playready"),l=(0,n.c)("playready",i.KI),d=(0,n.c)("playready",i.im),u=(0,n.c)("widevine"),p=(0,n.c)("widevine",i.KI),m=(0,n.c)("widevine",i.im),h=(0,n.c)("none")},89212:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FAIRPLAY:()=>n,PLAYREADY:()=>i,WIDEVINE:()=>s});const n="com.apple.fps.1_0",i="com.microsoft.playready",s="com.widevine.alpha"},38924:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>i,MF:()=>n,eS:()=>s,wT:()=>a});const n="contentRating",i="contentRating!",s="label",a="label!"},77224:(e,t,r)=>{"use strict";function n(){return Math.min(window.devicePixelRatio||1,3)}r.d(t,{c:()=>n})},82660:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={NEVER:"never",SAME_NETWORK:"samenetwork",ALWAYS:"always"};n.settings=[{value:n.NEVER,title:"Never"},{value:n.SAME_NETWORK,title:"On same network as server"},{value:n.ALWAYS,title:"Always"}];const i=n},98476:(e,t,r)=>{"use strict";r.d(t,{CM:()=>d,Oi:()=>l,WC:()=>a,_A:()=>i,es:()=>n,io:()=>o,kb:()=>c,sZ:()=>s});const n="small-60",i="small-120",s="medium-240",a="medium-360",o="large-480",c="large-720",l="large-1280",d="large-1920"},6968:(e,t,r)=>{"use strict";r.d(t,{OO:()=>u,Oq:()=>d,UX:()=>c,Yb:()=>p,_u:()=>a,k0:()=>i,qI:()=>l,s9:()=>o,wJ:()=>s,y_:()=>n,yc:()=>m});const n=8,i=9,s=13,a=16,o=17,c=27,l=38,d=40,u=91,p=93,m=224},72496:(e,t,r)=>{"use strict";r.d(t,{_b:()=>i,eq:()=>n,iQ:()=>s});const n="complete",i="error",s="postprocessing"},55724:(e,t,r)=>{"use strict";r.d(t,{QD:()=>s,gJ:()=>n,qu:()=>i,s5:()=>a});const n="playlist://image.favorite",i="playlist://image.radio",s="folder",a="watchtogether"},55188:(e,t,r)=>{"use strict";r.d(t,{AZ:()=>i,Il:()=>s,OW:()=>n,bW:()=>a});const n="queued",i="matching",s="processing",a="loading"},66780:(e,t,r)=>{"use strict";r.d(t,{A3:()=>ce,AZ:()=>tt,Ad:()=>Me,At:()=>Pt,Ax:()=>at,CW:()=>ie,CX:()=>me,Cc:()=>de,Ce:()=>N,Ci:()=>ge,EN:()=>ze,ER:()=>S,EV:()=>z,Eh:()=>Ye,G0:()=>F,G6:()=>Ve,GE:()=>b,Ge:()=>L,Gq:()=>Pe,I9:()=>Ge,IL:()=>g,In:()=>le,Iz:()=>st,K6:()=>h,KK:()=>R,KU:()=>$e,Ke:()=>i,Mp:()=>M,O:()=>Re,OG:()=>it,OI:()=>u,Po:()=>wt,Qf:()=>oe,Qh:()=>x,Qt:()=>G,Qv:()=>j,SC:()=>Ue,SE:()=>rt,SG:()=>et,SU:()=>C,Sg:()=>y,So:()=>m,Tx:()=>fe,Uf:()=>n,Uh:()=>Be,Ux:()=>he,WG:()=>l,WS:()=>ue,Ww:()=>Oe,Y1:()=>te,YD:()=>mt,Yd:()=>pe,Yj:()=>T,_:()=>ft,_A:()=>se,_c:()=>bt,_k:()=>pt,aC:()=>Le,aK:()=>Ze,aQ:()=>we,aq:()=>f,c7:()=>_,cD:()=>E,cJ:()=>k,cP:()=>re,cZ:()=>X,cx:()=>s,cz:()=>Se,e2:()=>Q,e4:()=>Je,eK:()=>Ae,ef:()=>St,eq:()=>d,fE:()=>K,gB:()=>U,gH:()=>je,gL:()=>lt,gV:()=>w,gb:()=>ye,gg:()=>It,gp:()=>Ee,i0:()=>c,i2:()=>ke,i8:()=>D,iS:()=>gt,ii:()=>be,io:()=>P,iu:()=>Ct,iw:()=>dt,iy:()=>q,kB:()=>We,kL:()=>I,kV:()=>J,kX:()=>Z,kf:()=>ee,kt:()=>ae,mG:()=>qe,mY:()=>Qe,mg:()=>p,my:()=>ct,o5:()=>Ce,oD:()=>xe,oL:()=>ut,oN:()=>Fe,oh:()=>ot,op:()=>ht,or:()=>v,ot:()=>B,q0:()=>ve,qO:()=>Et,qc:()=>W,s5:()=>O,sH:()=>Xe,sT:()=>Te,sr:()=>vt,sv:()=>H,u:()=>yt,uO:()=>ne,uW:()=>o,wL:()=>Y,wR:()=>Ie,wT:()=>$,wp:()=>A,wx:()=>He,x6:()=>nt,y:()=>_e,y4:()=>De,yO:()=>V,ye:()=>Ne,yz:()=>Ke,zA:()=>a});const n="claim",i="dismiss",s="skip",a="confirm",o="select",c="cancel",l="learn",d="complete",u="play",p="shuffle",m="playAll",h="playVersion",y="playPrimaryExtra",g="playRelatedMix",f="playArtistTV",v="queueRelatedMix",b="playNext",S="addToQueue",P="addToPlaylist",I="addToCollection",E="removeFromPlaylist",w="removeFromCollection",C="edit",O="editFilters",M="markAsWatched",T="markAsUnwatched",D="refresh",k="analyze",x="fixMatch",A="unmatch",R="merge",N="splitApart",L="optimize",j="downloadFile",U="share",F="delete",V="getInfo",_="rate",W="clearRating",B="selectStream",H="addToLibrary",z="addToSaved",G="removeFromSaved",q="addToWatchlist",K="removeFromWatchlist",Q="removeFromContinueWatching",$="favoriteChannel",Y="unfavoriteChannel",X="rent",J="optimizeDatabase",Z="cleanBundles",ee="emptyTrash",te="deleteServer",re="addLibrary",ne="updateLibrary",ie="cancelLibraryUpdate",se="forceRefreshLibrary",ae="editLibrary",oe="analyzeLibrary",ce="deleteLibrary",le="pinToNav",de="unpinFromNav",ue="reorderNav",pe="selectSource",me="selectTab",he="optOutMetrics",ye="remoteAccess",ge="selectPreferredServer",fe="subscribe",ve="upsellTidal",be="upsellStreamingServices",Se="agree",Pe="disagree",Ie="switchUser",Ee="username",we="displayName",Ce="setAvatar",Oe="removeAvatar",Me="joinDate",Te="plexPassBadge",De="location",ke="bio",xe="link",Ae="requests",Re="setVisibility",Ne="accepted",Le="declined",je="learnMore",Ue="setViewStateSyncOptIn",Fe="report",Ve="sendShare",_e="copyLink",We="callToAction",Be="post",He="shareCommunity",ze="profile",Ge="preplay",qe="details",Ke="socialProof",Qe="hideActivity",$e="applyHide",Ye="cancelHide",Xe="editWatchedDate",Je="applyEditWatchedDate",Ze="cancelEditWatchedDate",et="mute",tt="unmute",rt="block",nt="unblock",it="manageMutedBlocked",st="inviteWithLink",at="searchClicked",ot="searchCancelled",ct="searchQueryCleared",lt="viewAll",dt="userClick",ut="cancelRequest",pt="acceptRequest",mt="declineRequest",ht="userInvited",yt="removeFriend",gt="searchInput",ft="sourceSelected",vt="skipToPrivacySettings",bt="deleteComment",St="createComment",Pt="clearComment",It="cancelDeleteComment",Et="deleteWatchHistoryData",wt="deleteRatingsData",Ct="deleteViewStateSyncData"},84508:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AGENDA:()=>m,BLOCK:()=>_,CALENDAR:()=>h,COLLECTIONS_PIVOT:()=>I,COMPANION:()=>g,CONTEXT_MENU:()=>V,DISCOVER:()=>N,DISCOVER_PIVOT:()=>b,DVR_DISCOVER_PIVOT:()=>w,DVR_GUIDE_PIVOT:()=>C,DVR_SCHEDULE_PIVOT:()=>O,DVR_SETUP:()=>f,FALLBACK:()=>i,FRIEND:()=>k,HDR_CONVERSION:()=>T,INITIAL:()=>U,LIBRARY:()=>o,LIBRARY_PIVOT:()=>S,LIST:()=>c,MUTE:()=>B,NAV_BAR:()=>y,NON_FRIEND:()=>x,PICKER:()=>n,PLAYLISTS_PIVOT:()=>P,PRE_PLAY:()=>L,REPORT:()=>R,SEARCH_RESULTS:()=>z,SELECTION:()=>l,SELF:()=>D,SERVER:()=>a,SERVER_DOWNLOAD:()=>p,SETTINGS:()=>d,SETUP_WIZARD:()=>u,SHARE:()=>A,STARTUP:()=>s,TIMELINE_PIVOT:()=>E,TRAILER:()=>F,UNBLOCK:()=>W,UNMUTE:()=>H,UPDATE:()=>j,USERS_AND_SHARING:()=>v,WATCHLIST:()=>M});const n="picker",i="fallback",s="startup",a="server",o="library",c="list",l="selection",d="settings",u="setupWizard",p="serverDownload",m="agenda",h="calendar",y="navBar",g="companion",f="dvrSetup",v="usersAndSharing",b="content.discover",S="content.library",P="content.playlists",I="content.collections",E="content.timeline",w="content.dvr.discover",C="content.dvr.guide",O="content.dvr.schedule",M="content.watchlist",T="hdr-conversion",D="self",k="friend",x="nonFriend",A="share",R="report",N="discover",L="preplay",j="update",U="initial",F="trailer",V="contextMenu",_="block",W="unblock",B="mute",H="unmute",z="searchResults"},95188:(e,t,r)=>{"use strict";r.d(t,{A5:()=>S,Ip:()=>w,OG:()=>E,SA:()=>b,SW:()=>p,Ud:()=>l,Uz:()=>I,WQ:()=>i,Wi:()=>s,Yl:()=>m,_e:()=>P,aY:()=>v,cZ:()=>a,gX:()=>c,gl:()=>h,iA:()=>f,kg:()=>u,m4:()=>o,qM:()=>d,uu:()=>y,wB:()=>g,yy:()=>n});const n="client:claimServer",i="client:claimServerFailure",s="client:click",a="client:deeplink",o="client:mmp:start",c="client:relayTested",l="client:search",d="client:searchResultSelect",u="client:shutdown",p="client:signout",m="client:start",h="client:switchuser",y="client:view",g="client:upsell",f="client:usersearch",v="playback:failure",b="playback:itemend",S="playback:itemrestart",P="playback:itemstart",I="playback:sessionend",E="watchtogether:created",w="watchtogether:joined"},44500:(e,t,r)=>{"use strict";r.d(t,{AP:()=>y,At:()=>p,Cc:()=>C,EN:()=>o,Ih:()=>l,K2:()=>m,KO:()=>s,Mz:()=>c,OG:()=>w,Oi:()=>g,QH:()=>P,WX:()=>T,Wc:()=>n,_k:()=>O,cl:()=>S,eK:()=>f,gZ:()=>u,gf:()=>h,i:()=>v,kP:()=>i,kR:()=>I,mq:()=>a,ox:()=>E,qq:()=>b,yG:()=>M,yW:()=>d});const n="tabChange",i="sync",s="moreSidebar",a="settings",o="userProfile",c="activityFeed",l="watched",d="rated",u="playbackEnded",p="tabClick",m="zeroStateClick",h="userSearch",y="friendsHub",g="suggestionsHub",f="requests",v="requestsSentHub",b="requestsReceivedHub",S="comment",P="header",I="friends",E="peopleTab",w="manageMutedBlocked",C="activity",O="activitySharedWith",M="reportedIssues",T="reportedIssue"},56960:(e,t,r)=>{"use strict";r.d(t,{AX:()=>R,Ab:()=>Ye,C2:()=>X,Ck:()=>We,Cs:()=>Te,E6:()=>be,EB:()=>c,EN:()=>m,Eq:()=>x,G_:()=>we,Gx:()=>f,I5:()=>he,I9:()=>o,IL:()=>Me,IT:()=>W,Ib:()=>T,Im:()=>s,Iv:()=>Fe,K6:()=>ke,KW:()=>p,Kc:()=>me,Kg:()=>j,Ml:()=>Pe,Mz:()=>_e,OG:()=>Be,Po:()=>et,QL:()=>ce,QV:()=>V,Qh:()=>a,Qj:()=>ye,SC:()=>De,S_:()=>ge,Sk:()=>se,Uj:()=>Re,Uv:()=>xe,V4:()=>z,W:()=>le,W4:()=>L,W8:()=>Ne,Ww:()=>_,Y:()=>Ae,Y3:()=>Ue,YX:()=>w,Yl:()=>P,_2:()=>ae,_M:()=>u,_Q:()=>ne,_U:()=>Ie,_k:()=>Xe,_m:()=>h,_w:()=>F,aO:()=>Ce,aW:()=>Ee,ac:()=>Q,bL:()=>S,bv:()=>l,c5:()=>ue,cJ:()=>oe,cW:()=>fe,cd:()=>Se,cv:()=>Le,e0:()=>ie,eE:()=>Qe,eI:()=>Ve,em:()=>B,gB:()=>H,gR:()=>O,gh:()=>M,gr:()=>te,i0:()=>y,ii:()=>k,io:()=>A,is:()=>g,iu:()=>tt,k1:()=>ve,kR:()=>U,kX:()=>He,kc:()=>b,kl:()=>v,mG:()=>qe,mU:()=>D,mq:()=>je,mu:()=>de,oB:()=>J,oF:()=>ee,oL:()=>Je,oZ:()=>q,op:()=>$,ox:()=>Ke,qO:()=>Ze,qU:()=>n,qi:()=>d,sz:()=>re,uC:()=>Y,uO:()=>C,uQ:()=>K,uS:()=>pe,wB:()=>Ge,wL:()=>ze,wR:()=>N,wh:()=>i,wt:()=>E,y4:()=>Oe,yG:()=>$e,yM:()=>Z,yU:()=>G,yc:()=>I});const n="home",i="source",s="discover.recommended",a="library",o="preplay",c="playlists",l="search",d="searchResult",u="metadataList",p="player",m="account",h="plexpass",y="signIn",g="signOut",f="setupWizard",v="unclaimedServer",b="metadataSettings",S="status",P="devices",I="subtitles",E="subtitlesUpload",w="stopServerSession",C="stopServerSessionError",O="playHistory",M="sidebar",T="whatsNew",D="releaseNotes",k="photoTimeline",x="unknown",A="addToPlaylist",R="watchTogetherInvite",N="watchTogetherItemError",L="userProfile",j="editProfile",U="friends",F="discover.watchlist.recommended",V="discover.watchlist",_="usersSharing",W="homeUsers",B="shareUsers",H="share",z="settings",G="sharing",q="settingsSidebar",K="privacy",Q="preferredServer",$="preferredSources",Y="dvrSettings",X="dvrSetup",J="dvrGuide",Z="dvrSchedule",ee="dvrPriority",te="dvrDeviceSettings",re="dvrAiringDetails",ne="manageSubscription",ie="confirmMarkAsWatched",se="confirmMarkAsUnwatched",ae="confirmDelete",oe="confirmOptimizeDatabase",ce="confirmCleanBundles",le="confirmEmptyTrash",de="confirmDeleteServer",ue="confirmUpgradeLibrary",pe="confirmAnalyzeLibrary",me="confirmForceRefreshLibrary",he="confirmEmptyTrashLibrary",ye="confirmDeleteLibrary",ge="confirmRemoveWebhook",fe="confirmUnlinkOauthProvider",ve="confirmRemoveDVR",be="confirmClosePlayer",Se="confirmDeleteSubtitleStream",Pe="confirmCancelDownload",Ie="confirmRemoveDownload",Ee="confirmAddToHome",we="adConsent",Ce="confirmUpsell",Oe="confirmationModal",Me="confirmPlayback",Te="confirmRemoteToLocalPlayback",De="confirmLocalToRemotePlayback",ke="playVersion",xe="resumePlayback",Ae="playerError",Re="liveTVPlayerConflict",Ne="liveTVJoinSession",Le="castApiMissing",je="adConsent",Ue="settings",Fe="viewStateSyncPrompt",Ve="shareSheet",_e="activityFeed",We="activityDetail",Be="manageMutedBlocked",He="ratingsDetails",ze="watchlistDetails",Ge="watchHistory",qe="communityOnboarding",Ke="peopleTab",Qe="friendRequests",$e="reportedIssues",Ye="reportDetail",Xe="activitySharedWith",Je="deleteData",Ze="deleteWatchHistoryData",et="deleteRatingsData",tt="deleteViewStateSyncData"},24348:(e,t,r)=>{"use strict";r.d(t,{AP:()=>f,CC:()=>s,G_:()=>a,Ih:()=>u,Il:()=>l,Kg:()=>m,Mt:()=>w,Oi:()=>S,S8:()=>o,SO:()=>v,Uh:()=>O,_Y:()=>T,_w:()=>c,aA:()=>p,aC:()=>I,cl:()=>M,e6:()=>n,gH:()=>i,i:()=>P,k:()=>y,kR:()=>h,qW:()=>C,qq:()=>b,uI:()=>E,uS:()=>g,ug:()=>D,yW:()=>d});const n="main",i="learnMore",s="message",a="report",o="ratings",c="watchlist",l="watchHistory",d="rated",u="watched",p="watchlisted",m="editProfile",h="friends",y="userProfile",g="search",f="friendsHub",v="requestsSentHub",b="requestsReceivedHub",S="suggestionsHub",P="newUser",I="newBetaUser",E="existingBetaUser",w="friendsList",C="searchSourceModal",O="post",M="comment",T="binge",D="combo"},61412:(e,t,r)=>{"use strict";r.d(t,{ai:()=>n,y2:()=>i});const n="html",i=[n,"mpv","samsung_avplay","webmaf_video_player"]},40832:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});const n="autoplay"},85052:(e,t,r)=>{"use strict";r.d(t,{MZ:()=>a,O4:()=>i,YD:()=>l,cT:()=>n,gz:()=>s,ik:()=>c,sV:()=>o});const n="shared.items",i="vod.channels",s="discover.activity",a="discover.recommended",o="discover.watchlist",c="discover.people",l="discover.profile"},15364:(e,t,r)=>{"use strict";r.d(t,{Mr:()=>s,_K:()=>i,oB:()=>n});const n="hub",i="list",s="view"},81688:(e,t,r)=>{"use strict";r.d(t,{Eq:()=>a,qE:()=>o,qj:()=>u,sR:()=>c,y6:()=>l});var n=r(3268),i=r.n(n),s=r(16872);const a=1,o=2,c=3,l=4,d=[a,o,c,l],u=(i().oneOf(d),s.c.oneOf(...d))},51337:(e,t,r)=>{"use strict";r.d(t,{CS:()=>p,CU:()=>d,GU:()=>s,KU:()=>v,OI:()=>n,Qp:()=>u,Wi:()=>S,Wk:()=>h,aq:()=>o,ct:()=>f,cv:()=>m,e2:()=>l,e6:()=>b,iC:()=>g,o1:()=>c,qc:()=>i,uo:()=>a,vo:()=>y});const n="PLAY",i="PAUSE",s="SEEK",a="STOP",o="PREVIOUS",c="NEXT",l="SKIPTO",d="SHOWDETAILS",u="REFRESHPLAYQUEUE",p="REFRESHSTREAMS",m="SETREPEAT",h="SETSTREAM",y="SETQUALITY",g="SETSUBTITLECOLOR",f="SETSUBTITLEPOSITION",v="SETSUBTITLESIZE",b="SETSUBTITLEOFFSET",S="SETAUTOPLAY"},23408:(e,t,r)=>{"use strict";r.d(t,{_g:()=>a,oP:()=>s,qI:()=>n,yE:()=>i});const n="linked",i="able",s="unable",a="untested"},95760:(e,t,r)=>{"use strict";r.d(t,{C8:()=>s,MX:()=>a});var n=r(64824);const i={[n.im]:"video",[n.KI]:"music",[n.Ww]:"photo"};function s(e){return i[e]}function a(e){for(const t in i)if(e===i[t])return t}},66109:(e,t,r)=>{"use strict";r.d(t,{o:()=>i,y:()=>n});const n="cast",i="plex"},760:(e,t,r)=>{"use strict";r.d(t,{KE:()=>i,x:()=>s,y2:()=>a});var n=r(3268);const i=0,s=1,a=2;r.n(n)().oneOf([i,s,a])},78292:(e,t,r)=>{"use strict";r.d(t,{Gc:()=>n,SB:()=>i,qK:()=>s});const n=1,i=2,s=3},89988:(e,t,r)=>{"use strict";r.d(t,{KE:()=>a,_w:()=>s,oJ:()=>i});var n=r(3268);const i="bottom-left",s="top-left",a="none";r.n(n)().oneOf([i,s,a])},64824:(e,t,r)=>{"use strict";r.d(t,{KI:()=>n,Ww:()=>s,im:()=>i});const n="audio",i="video",s="photo"},62796:(e,t,r)=>{"use strict";r.d(t,{ID:()=>a,K_:()=>o,L$:()=>i,OM:()=>s,Qf:()=>c,WM:()=>n});const n=5,i=10,s=30,a=5,o=600,c=600},65724:(e,t,r)=>{"use strict";r.d(t,{C:()=>i,m:()=>n});const n="full",i="mini"},4008:(e,t,r)=>{"use strict";r.d(t,{Qb:()=>o,Ww:()=>s,k9:()=>i});var n=r(64824);const i="audioVideo",s="photo",a={[n.KI]:i,[n.im]:i,[n.Ww]:s};function o(e){return a[e]}},4828:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});const n="0"},55272:(e,t,r)=>{"use strict";r.d(t,{SG:()=>n,U$:()=>i,YT:()=>s,qM:()=>a});const n="stopped",i="playing",s="paused",a="buffering"},99396:(e,t,r)=>{"use strict";r.d(t,{Up:()=>i,c7:()=>a,cR:()=>n,iy:()=>s});const n="scrobble",i="save",s="addToWatchlist",a="rate"},37660:(e,t,r)=>{"use strict";r.d(t,{GG:()=>i,_w:()=>s,qU:()=>n});const n="home",i="movies",s="watchlist"},90044:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=(e=>(e.ACTION="action",e.ACTIONS="actions",e.CONTENT="content",e.CONTINUE_WATCHING="continuewatching",e.GRID="grid",e.IMAGE_TRANSCODER="imagetranscoder",e.INTEGRATIONS="integrations",e.LINEUPS="lineups",e.LOCATION="location",e.MANAGE="manage",e.MATCH="match",e.METADATA="metadata",e.PLAY_QUEUE="playqueue",e.PLAYLIST="playlist",e.PROMOTED="promoted",e.RATE="rate",e.SEARCH="search",e.SETTINGS="settings",e.SUBSCRIBE="subscribe",e.TIMELINE="timeline",e.UNIVERSAL="universal",e))(n||{});const i=n},74964:(e,t,r)=>{"use strict";r.d(t,{GG:()=>s,Qv:()=>n,_m:()=>i});const n="download",i="record",s="universal"},35860:(e,t,r)=>{"use strict";r.d(t,{$9:()=>n,Im:()=>s,Ow:()=>i,QJ:()=>y,Qh:()=>o,SI:()=>h,Sg:()=>l,_0:()=>a,_u:()=>m,gN:()=>d,tE:()=>p,y2:()=>u,y6:()=>c});const n="tv.plex.provider.epg",i="tv.plex.providers.epg.custom",s="tv.plex.provider.discover",a="tv.plex.providers.epg",o="com.plexapp.plugins.library",c="tv.plex.provider.music",l="tv.plex.provider.vod",d="tv.plex.providers.epg.xmltv",u=[n,i,s,a,"com.plexapp.plugins.library.sync",o,c,l,d];var p=(e=>(e.Development="dev",e.Staging="staging",e.Production="prod",e))(p||{});function m(e,t,r){return!!e&&(Array.isArray(t)||(t=[t]),t.some((t=>{const n=-1!==e.indexOf(t);return r?n&&h(e)===r:n})))}function h(e){return(null==e?void 0:e.endsWith("dev"))?"dev":(null==e?void 0:e.endsWith("staging"))?"staging":"prod"}function y(e){return"prod"===h(e)}},21784:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});const n="livetv"},39920:(e,t,r)=>{"use strict";r.d(t,{_:()=>i,s:()=>n});const n="playbackSpeed",i="numRecentChannelsInGrid"},88371:(e,t,r)=>{"use strict";r.d(t,{Ud:()=>n,a:()=>i,im:()=>a,q2:()=>s,uW:()=>c,y4:()=>o});const n="bool",i="double",s="group",a="int",o="location",c="select"},60976:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={NORMAL:0,LOCAL:42,CLOUD:43}},50708:(e,t,r)=>{"use strict";r.d(t,{At:()=>l,CU:()=>s,Ub:()=>c,gv:()=>a});var n=r(59396),i=r(79787);const s="little_kid",a="unrestricted",o=(0,i.c)(["identifier"],[{identifier:s,title:()=>(0,n.c)("Younger Kid"),defaultUsername:()=>(0,n.c)("Kids")},{identifier:"older_kid",title:()=>(0,n.c)("Older Kid"),defaultUsername:()=>(0,n.c)("Kids")},{identifier:"teen",title:()=>(0,n.c)("Teen"),defaultUsername:()=>(0,n.c)("Kids")},{identifier:a,title:()=>(0,n.c)("None"),defaultUsername:()=>""}]),c=o.get,l=o.getAll},61432:(e,t,r)=>{"use strict";r.d(t,{AC:()=>i,EZ:()=>n,KH:()=>d,KY:()=>l,_e:()=>o,gh:()=>a,kz:()=>p,m_:()=>u,o1:()=>s,sb:()=>c});const n="Plex Audiobook",i="Plex Movie Scanner",s="Plex Music",a="Plex Movie",o="Plex TV Series",c="Plex Music Scanner",l="Plex Photo Scanner",d="Plex Premium Music Scanner",u="Plex Series Scanner",p="Plex Video Files Scanner"},54073:(e,t,r)=>{"use strict";r.d(t,{i:()=>i,u:()=>n});const n="/hubs",i="/hubs?identifier=home.continue,home.ondeck"},23156:(e,t,r)=>{"use strict";r.d(t,{Q9:()=>a,Si:()=>i,YV:()=>o,_g:()=>n,iU:()=>s,wp:()=>c});const n="untested",i="pending",s="connected",a="unauthorized",o="unavailable",c="aborted"},89064:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n="myPlex"},57639:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AVAILABLE:()=>n,DONE:()=>i,DOWNLOADED:()=>s,DOWNLOADING:()=>a,ERROR:()=>o,INSTALLING:()=>c,NONE:()=>l,NOTIFY:()=>d});const n="available",i="done",s="downloaded",a="downloading",o="error",c="installing",l="none",d="notify"},4448:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={WHITE:"#ffffff",YELLOW:"#ffee00",BLACK:"#000000",CYAN:"#00ffff",BLUE:"#0000ff",GREEN:"#00ff00",MAGENTA:"#ee00ee",RED:"#ff0000",GREY:"#808080"};n.settings=[{value:n.WHITE,title:"White"},{value:n.YELLOW,title:"Yellow"},{value:n.BLACK,title:"Black"},{value:n.CYAN,title:"Cyan"},{value:n.BLUE,title:"Blue"},{value:n.GREEN,title:"Green"},{value:n.MAGENTA,title:"Magenta"},{value:n.RED,title:"Red"},{value:n.GREY,title:"Grey"}],n.ALL=[n.WHITE,n.YELLOW,n.BLACK,n.CYAN,n.BLUE,n.GREEN,n.MAGENTA,n.RED,n.GREY];const i=n},72484:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"};n.settings=[{value:n.TOP,title:"Top"},{value:n.MIDDLE,title:"Middle"},{value:n.BOTTOM,title:"Bottom"}],n.ALL=[n.TOP,n.MIDDLE,n.BOTTOM];const i=n},35320:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={TINY:50,SMALL:75,NORMAL:100,LARGE:125,HUGE:200};n.settings=[{value:n.TINY,title:"Tiny"},{value:n.SMALL,title:"Small"},{value:n.NORMAL,title:"Normal"},{value:n.LARGE,title:"Large"},{value:n.HUGE,title:"Huge"}],n.ALL=[n.TINY,n.SMALL,n.NORMAL,n.LARGE,n.HUGE];const i=n},40716:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={AUTO:"auto",AVOID:"avoid",ALWAYS:"always",NEVER:"never"};n.settings=[{value:n.AUTO,title:"Automatic"},{value:n.AVOID,title:"Only image formats"},{value:n.ALWAYS,title:"Always"}];const i=n},87800:(e,t,r)=>{"use strict";r.d(t,{GU:()=>o,Ir:()=>i,Qb:()=>n,gT:()=>a,qc:()=>s});const n="join",i="leave",s="pause",a="resume",o="seek"},84860:(e,t,r)=>{"use strict";r.d(t,{WW:()=>i,ai:()=>n});const n="html",i="plain"},80896:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=(e=>(e.Relay="relay",e.Upsell="upsell",e.LibraryUpgrade="libraryUpgrade",e))(n||{});const i=n},2692:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396);const i={NONE:0,TV_ONLY:1,TV_AND_DVR:2};i.options={[i.NONE]:()=>(0,n.c)("No Live TV and DVR access"),[i.TV_ONLY]:()=>(0,n.c)("Allow Live TV only"),[i.TV_AND_DVR]:()=>(0,n.c)("Allow Live TV and DVR access")},i.values=Object.keys(i.options).map((e=>({[e]:i.options[e]})));const s=i},42728:(e,t,r)=>{"use strict";r.d(t,{AC:()=>m,Af:()=>S,Aj:()=>L,C:()=>G,Co:()=>z,EL:()=>w,El:()=>q,G:()=>T,Go:()=>I,Gs:()=>n,IJ:()=>K,Ij:()=>B,In:()=>f,KY:()=>ee,Ks:()=>_,ML:()=>Q,MX:()=>k,Mz:()=>re,NI:()=>X,O6:()=>$,Q7:()=>H,QT:()=>a,Qx:()=>J,S0:()=>N,Uf:()=>F,WC:()=>i,Ww:()=>M,Y7:()=>l,_6:()=>Y,__:()=>Z,_i:()=>te,_w:()=>o,aQ:()=>R,ae:()=>s,c3:()=>U,cD:()=>D,cd:()=>O,eK:()=>y,fP:()=>b,gP:()=>P,jQ:()=>h,kF:()=>C,kX:()=>V,mC:()=>g,mQ:()=>p,o5:()=>E,op:()=>W,s5:()=>j,sP:()=>v,sv:()=>u,uW:()=>A,w5:()=>d,wt:()=>c,xm:()=>x});const n="32cc8bf5-b425-4582-a52d-71b4f1cf436b",i="de789b83-9c5e-4472-bccf-791c69e67500",s="64ed42f8-259d-4957-8530-0fff2d846cd0",a="6f82ca43-6117-4e55-ae0e-5ea3b3e99a96",o="bb50c92f-b412-44fe-8d8a-b1684f212a44",c="b612f571-83c3-431a-88eb-3f05ce08da4a",l="222020fb-1504-492d-af33-a0b80a49558a",d="4bdcac7b-f25b-43b3-93d8-2bbcb9605fd7",u="644c4466-05fa-45e0-a478-c594cf81778f",p="75e95ee5-b482-4b02-aeff-a9faf13ead64",m="f3235e61-c0eb-4718-ac0a-7d6eb3d8ff75",h="4742780c-af9d-4b44-bf5b-7b27e3369aa8",y="e4f02866-841f-4ceb-a30c-0a0e68fb874d",g="d715fd2e-b295-492b-bdd7-a048e014608b",f="f0f40559-a43a-4b8f-85ef-bdb1de1a912a",v="297d9a27-18d4-4350-ad9a-dbab6231380f",b="4b4161e3-ee8a-4b96-bce4-be2b948848a1",S="11d31827-a604-4ef9-ab4f-4c0f5eb74892",P="61ace69e-8397-432e-9d46-352a00263a7a",I="e9cc7ec1-be5a-4727-af7b-0f107af1a07c",E="236de47b-a757-4ed7-9003-507b296057b5",w="5c1951bf-ccf1-4821-8ee7-e50f51218ae7",C="3bfd3ccf-8c63-4dbb-8f87-9b21b402c82b",O="43725019-9122-4a6d-bc50-bca06a411b7a",M="d8810b38-ec9b-494c-8555-3df6e365dfbd",T="43938a71-1295-46e9-918f-b6c4b0302011",D="65685ff8-4375-4e4c-a806-ec1f0b4a8b7f",k="6ab6677b-ad9b-444f-9ca1-b8027d05b3e1",x="b83c8dc9-5a01-4b7a-a7c9-5870c8a6e21b",A="926bc176-58ca-47da-b8e3-080ed14ea6ba",R="02da2909-ddfd-46be-9e42-65008a79fc05",N="nonAnonymousAccount",L="6aaaf4fc-c55f-4042-92c8-b35f7886d249",j="65faa2d0-f57e-4c63-a6b6-f1baa48951b1",U="20824f5c-6dd9-4655-9970-e7701a73c02a",F="fd6683b9-1426-4b00-840f-cd5fb0904a6a",V="9a67bff2-cb80-4bf9-81c6-9ad2f4c78afd",_="13056a62-9bd2-47cf-aba9-bab00095fd08",W="3c376154-d47e-4bbf-9428-2ea2592fd20a",B="f3a99481-9671-4274-a0d3-4c06a72ef746",H="ec64b6f6-e804-4ef3-b114-9d5c63e1a941",z="cec2152f-321a-4c24-8c6d-c2b35a624389",G="85410409-ebe4-47f8-9814-034ff05c47d7",q="3ae06d3a-a76b-435e-8cef-2d2008610ba2",K="a0a78867-6b26-446f-9c3f-df4edf831259",Q="dbdc0575-9fc7-4706-9e2d-fca98d10ad71",$="9b5a4bea-3bbe-45d2-b226-00a6ef4d8e65",Y="362c5ba7-41e8-400d-8354-18d53868e2d3",X="5d80b92d-4ecf-4b0b-935f-5efc907bb2c1",J="57539fe6-a8c7-43b9-99a7-a1b0c3a47afd",Z="a0220fbb-3a79-4041-8642-add6abf70eb5",ee="10d475c2-25f0-47f1-9ee8-293340012ffe",te="8f47a689-aa84-408f-bf6b-00015e9413e1",re="36fdfb7c-f0c7-4da8-a167-4775e23cab7e"},64620:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});const n="tidal"},50292:(e,t,r)=>{"use strict";r.d(t,{C6:()=>i,YX:()=>n,cp:()=>s});const n="active",i="pending_cancellation",s=[n,"inactive","canceled",i,"lapsed","ended"]},69972:(e,t,r)=>{"use strict";r.d(t,{_m:()=>n,cp:()=>i});const n="plexpass",i=["arcade",n,"tidal"]},17268:(e,t,r)=>{"use strict";r.r(t),r.d(t,{STREAMING_SERVICES:()=>i,TONE_MAPPING:()=>n});const n="toneMapping",i="streamingServices"},56792:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(95720),i=r.n(n),s=r(22316),a=r(22876),o=r(83052),c=r(49048),l=r(35940),d=r(12612),u=r(96504),p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;const y={uri:function(e,t){const r=t&&t.items;if(r&&r.length){if(r.length>1)return this.getBatchLibraryMetadataURI(r,t);e||(e=i().first(r))}if(e instanceof s.cp.Model){if(e.get("isSection"))return this.getSectionURI(e,t);if(e.get("isMetadataList"))return this.getMetadataListURI(e,t);if(e.get("isPlaylist"))return this.getPlaylistURI(e,t)}return this.getLibraryMetadataURI(e,t)},parseLibraryUri:function(e){const t=u.c.getLastSegment(e),r=decodeURIComponent(t).match(/(\/library\/sections\/\w+)\/all(?:\?(.*))?/),[,n,i=""]=r,s={};for(const e of i.split("&")){const[t,r]=e.split("=");t.startsWith("include")||(s[t]=r)}const a=s,{type:o,sourceType:c,sort:l,limit:d}=a,y=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(a,["type","sourceType","sort","limit"]);return{sectionKey:n,type:o,sourceType:c,sort:l,limit:d,filterString:Object.entries(y).map((([e,t])=>`${e}=${t}`)).join("&")}},getSectionURI:function(e,t){const r=i().result(e,"url"),n=e.get("currentSubset"),s=e.get("currentFolderKey"),a=e.get("currentType");let o;if("folder"===n.id)o=s||u.c.join([r,"all"]);else{const t=e.get("items"),i=t.getParams();i.type&&delete i.type,i.timelineState&&delete i.timelineState,i.unwatchedLeaves&&(i[(0,d.wH)(e.get("type")).typeString+".unwatched"]=1,delete i.unwatchedLeaves),a&&(i.sourceType=a.id),o=u.c.join([r,n.id],i),o=t.replaceSpecialFilterOperators(o)}return this._resolveURI({prefix:"library",parts:[e.get("uuid"),"directory",o]})},getBatchLibraryMetadataURI:function(e,t){const r=this._getSectionInfo(i().first(e)),n="/library/metadata/"+i().map(e,(function(e){return e.get("ratingKey")})).join(",");return this._resolveURI({prefix:"library",parts:[r.sectionUUID,"directory",n]})},getLibraryMetadataURI:function(e,t){t||(t={});const r=this._getSectionInfo(e);let n,s=i().result(e,"url");return t.excludeSeedItem&&(s=u.c.join(s,{excludeSeedItem:1})),n=e.models||e.collectionName||e instanceof a.c?"directory":e.get("radio")?"station":"item",this._resolveURI({prefix:"library",parts:[r.sectionUUID,n,s]})},getMetadataListURI:function(e,t){t||(t={});const r=this._getSectionInfo(e);return this._resolveURI({prefix:"library",parts:[r.sectionUUID,"directory",u.c.join(e.get("containerKey"),{sourceType:t.sourceType})]})},getPlaylistURI:function(e,t){return this._resolveURI({prefix:"playlist",parts:["",e.get("guid")]})},title:function(e,t){const r=t&&t.items;if(r&&r.length){if(r.length>1)return this.getBatchLibraryMetadataTitle(r,t);e=i().first(r)}return e.get("isSection")?this.getSectionTitle(e,t):e.get("isMetadataList")?this.getMetadataListTitle(e,t):this.getLibraryMetadataTitle(e,t)},getSectionTitle:function(e){const t=e.get("title"),r=e.get("currentSubset"),n=e.get("currentFilters");return"all"!==r.id?t+": "+r.get("title"):n.length?t+": "+i().flatten(i().map(n,(function(e){return e.titles}))).join(", "):t},getMetadataListTitle:function(e){return e.get("containerTitle")||e.get("title")},getBatchLibraryMetadataTitle:function(e){const t=i().map(e,(function(e){return e.get("title")}));return(0,l.c)(t)},getLibraryMetadataTitle:function(e){const t=e.get("grandparentTitle")||e.get("parentTitle");let r=e.get("title");return t&&(r=t+" - "+r),"episode"===e.get("type")&&(r+=" ("+(0,o.c)({seasonIndex:e.get("parentIndex"),episodeIndex:e.get("index"),date:e.get("originallyAvailableAt"),noLeadingZero:!0,separator:" "})+")"),r},_resolveURI:function(e){const t=e.parts,r=i().map(t,(function(e){return e?encodeURIComponent(e):""}));return e.prefix+"://"+r.join("/")},_getSectionInfo:function(e){let t=e.get("librarySectionUUID"),r=e.get("librarySectionID");if(!t||!r){const n=(0,c.c)(e);i().isEmpty(n)||(t=n.get("uuid"),r=n.id)}return{sectionUUID:t,sectionID:r}}}},6344:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(94484),i=r(46792),s=r(57804),a=r(412),o=r(65836),c=r(63128),l=r(55344),d=r(96388),u=r(30004);const p={days:n.c,hours:i.c,minutes:s.c,months:a.c,seconds:o.c,weeks:c.c,years:l.c};function m(e,t={}){let r=(0,d.c)(e);for(const e in t)r=p[e](r,t[e]);return(0,u.c)(r)}},27836:(e,t,r)=>{"use strict";r.d(t,{IH:()=>i,Mt:()=>n,cp:()=>l});const n=30,i=365,s=36e5,a=24*s,o=["years","months","days","hours","minutes","seconds","milliseconds"],c={years:a*i,months:a*n,days:a,hours:s,minutes:6e4,seconds:1e3,milliseconds:1};function l(e){const t=e<0?-1:1,r={};let n=e*t,i=-1;for(;++i<o.length;){const e=o[i],s=c[e],a=Math.floor(n/s);r[e]=a&&a*t,n%=s}return r}},34516:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(96388),i=r(88184),s=r(59396),a=r(41632),o=r(6252),c=r(84780),l=r(21212),d=r(81744),u=r(97992),p=r(38128),m=r(20520);function h(e,t,{timeFormat:r="h:mma"}={}){if(null==e)return"";const h=(0,c.c)(e,r);let y;return y=(0,m.c)(e)?(0,s.c)("Yesterday"):(0,d.c)(e)?(0,p.c)(e)?(0,s.c)("Tonight"):(0,s.c)("Today"):(0,u.c)(e)?(0,s.c)("Tomorrow"):(0,l.c)(e)?(0,a.c)(e):(0,s.c)("{dayOfWeekAbbreviated}, {monthAbbreviated} {dayNumber}",{dayOfWeekAbbreviated:(0,a.c)(e,{abbreviate:!0}),monthAbbreviated:(0,o.c)(e,{abbreviate:!0}),dayNumber:(0,i.c)((0,n.c)(e))}),t?(0,s.c)("{1} at {2} on {3}",y,h,t):(0,s.c)("{1} at {2}",y,h)}},72052:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(96388),i=r(88184),s=r(52460),a=r(59396),o=r(41632),c=r(6252),l=r(84780),d=r(21212),u=r(81744),p=r(97992),m=r(38128),h=r(20520);function y(e,t,{timeFormat:r="h:mma"}={}){if(null==e)return"";const y=(0,n.c)(e);if((0,h.c)(e))return(0,a.c)("Yesterday");0===(0,s.c)(y)&&(r=r.replace("h:mm","h"));const g=(0,l.c)(e,r);let f;return f=(0,u.c)(e)?(0,m.c)(e)?(0,a.c)("Tonight"):(0,a.c)("Today"):(0,p.c)(e)?(0,a.c)("Tomorrow"):(0,d.c)(e)?(0,o.c)(e):(0,a.c)("{monthAbbreviated} {dayNumber}",{monthAbbreviated:(0,c.c)(e,{abbreviate:!0}),dayNumber:(0,i.c)((0,n.c)(e))}),t?(0,a.c)("{1} at {2} on {3}",f,g,t):(0,a.c)("{1} at {2}",f,g)}},672:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(54832);const i=function(e,t="MMMM d, yyyy"){return e?(0,n.c)(e,t):""}},41632:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(96388),i=r(78968),s=(r(79268),r(59396));const a=function(e,{abbreviate:t=!1}={}){if(null==e)return"";const r=(0,i.c)((0,n.c)(e));return t?function(e){return[(0,s.c)("Sun"),(0,s.c)("Mon"),(0,s.c)("Tue"),(0,s.c)("Wed"),(0,s.c)("Thu"),(0,s.c)("Fri"),(0,s.c)("Sat")][e]}(r):function(e){return[(0,s.c)("Sunday"),(0,s.c)("Monday"),(0,s.c)("Tuesday"),(0,s.c)("Wednesday"),(0,s.c)("Thursday"),(0,s.c)("Friday"),(0,s.c)("Saturday")][e]}(r)}},69604:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(95720),i=r.n(n),s=r(27836),a=r(59396);const o=[[54e5,function(e){if(null==e)return"";const t=(0,s.cp)(e),r=24*t.days*60,n=60*t.hours,i=t.minutes+n+r,o=t.seconds;return i?(0,a.c)("{1}min",i):o>0?(0,a.c)("{1}sec",o):""}],[864e5,r(62884).c],[6048e5,function(e){if(null==e)return"";const t=(0,s.cp)(e),r=t.days,n=t.hours,i=1!==r;return r&&n?i?(0,a.c)("{1} days, {2}hr",r,n):(0,a.c)("{1} day, {2}hr",r,n):r?i?(0,a.c)("{1} days",r):(0,a.c)("{1} day",r):(0,a.c)("{1}hr",n)}],[1/0,function(e){if(null==e)return"";const t=(0,s.cp)(e),r=t.years*s.IH+t.months*s.Mt+t.days;return 1!==r?(0,a.c)("{1} days",r):(0,a.c)("{1} day",r)}]],c=function(e){if(!e)return"";const t=i().find(o,(([t])=>e<=t));return t&&t[1](e)}},46308:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(69604);const s=function(e){if(null==e)return"";const t=(0,i.c)(1e3*e);return t?(0,n.c)("{1} left",t):""}},56276:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(96388),i=r(6396),s=r(59396);function a(e){if(!(0,i.c)(e))return(0,s.c)("Expired");const t=new Date,r=(0,n.c)(e).getTime()-t.getTime(),a=Math.floor(Math.abs(r)/36e5);if(a>48){const e=Math.ceil(a/24);return(0,s.c)("Expires in {daysLeft} days",{daysLeft:e})}return a>1?(0,s.c)("Expires in {hoursLeft} hours",{hoursLeft:a}):(0,s.c)("Expires in next hour")}},62884:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(27836),i=r(59396);const s=function(e){if(null==e)return"";const t=(0,n.cp)(e),r=t.hours+24*t.days,s=t.minutes,a=t.seconds;return r&&s?(0,i.c)("{1}hr {2}min",r,s):r?(0,i.c)("{1}hr",r):s?(0,i.c)("{1}min",s):a>0?(0,i.c)("{1}sec",a):""}},6252:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(96388),i=r(72232),s=(r(79268),r(59396));const a=function(e,{abbreviate:t=!1}={}){if(!e)return"";const r=(0,i.c)((0,n.c)(e));return t?function(e){return[(0,s.c)("Jan"),(0,s.c)("Feb"),(0,s.c)("Mar"),(0,s.c)("Apr"),(0,s.c)("May"),(0,s.c)("Jun"),(0,s.c)("Jul"),(0,s.c)("Aug"),(0,s.c)("Sep"),(0,s.c)("Oct"),(0,s.c)("Nov"),(0,s.c)("Dec")][e]}(r):function(e){return[(0,s.c)("January"),(0,s.c)("February"),(0,s.c)("March"),(0,s.c)("April"),(0,s.c)("May"),(0,s.c)("June"),(0,s.c)("July"),(0,s.c)("August"),(0,s.c)("September"),(0,s.c)("October"),(0,s.c)("November"),(0,s.c)("December")][e]}(r)}},20188:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(95720),i=r.n(n),s=r(27836);const a=function(e){if(e<=0||!i().isNumber(e))return"0:00";const t=(0,s.cp)(e),r=t.seconds,n=t.minutes,a=t.hours+24*t.days;let o="";return o=r<10?":0"+r:":"+r,o=n<10&&a>0?"0"+n+o:n+o,a>0&&(o=a+":"+o),o}},60080:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(54832);const i=function(e,t="HH:mm:ss"){return e?(0,n.c)(e,t):""}},50684:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(64792);const i=function(e,t){return(0,n.c)(e,{limit:"past",shorthand:t})}},64792:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(65836),i=r(96388),s=r(30004),a=r(84780),o=r(59396);function c(e,t={includeAgoSuffix:!0,shorthand:!1}){if(!e)return"";const r=new Date;e=Math.round(e),"past"===t.limit?e=Math.min(e,(0,s.c)(r)):"future"===t.limit&&(e=Math.max(e,(0,s.c)((0,n.c)(r,1))));const c=(0,i.c)(e).getTime()-r.getTime();let l;return l="future"===t.limit||"past"!==t.limit&&c>0,function({milliseconds:e,timestamp:t,shorthand:r,isFuture:n,includeAgoSuffix:i=!0,roundDays:s="round",isRelativeTime:c}){let l=Math.abs(e)/1e3;l&&(l=l<1?1:Math.round(l));const d=Math.round(l/60),u=Math.round(d/60),p=Math[s](u/24),m=Math.round(p/30),h=Math.round(p/365),y={seconds:l,minutes:d,hours:u,days:p,months:m,years:h};if(c&&!c(p))return(0,a.c)(t,"LLLL dd, yyyy");const g={unitOfTime:l<=44&&(r?(0,o.c)("{seconds}s",y):(0,o.c)("a few seconds",y))||l<45&&(r?(0,o.c)("{seconds}s",y):(0,o.c)("{seconds} seconds",y))||d<=1&&(r?(0,o.c)("{minutes}m",y):(0,o.c)("a minute",y))||d<45&&(r?(0,o.c)("{minutes}m",y):(0,o.c)("{minutes} minutes",y))||u<=1&&(r?(0,o.c)("{hours}h",y):(0,o.c)("an hour",y))||u<24&&(r?(0,o.c)("{hours}h",y):(0,o.c)("{hours} hours",y))||p<=1&&(r?(0,o.c)("{days}d",y):(0,o.c)("a day",y))||p<26&&(r?(0,o.c)("{days}d",y):(0,o.c)("{days} days",y))||m<=1&&(r?(0,o.c)("{months}mo",y):(0,o.c)("a month",y))||m<11&&(r?(0,o.c)("{months}mo",y):(0,o.c)("{months} months",y))||h<=1&&(r?(0,o.c)("{years}y",y):(0,o.c)("a year",y))||(r?(0,o.c)("{years}y",y):(0,o.c)("{years} years",y))};return n?(0,o.c)("in {unitOfTime}",g):i?(0,o.c)("{unitOfTime} ago",g):g.unitOfTime}({includeAgoSuffix:t.includeAgoSuffix,isRelativeTime:t.isRelativeTime,roundDays:t.roundDays,shorthand:t.shorthand,milliseconds:c,isFuture:l,timestamp:e})}},88640:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(54832),i=r(96388),s=r(52460);const a=function(e,t,r={}){const{includeMinuteZero:a=!0,timeFormat:o="h:mma",separator:c="-"}=r,l=(0,i.c)(e),d=(0,i.c)(t),u=(0,n.c)(l,"a")===(0,n.c)(d,"a"),p=(0,s.c)(l),m=(0,s.c)(d);let h=o,y=o;return a||0!==p||(h=h.replace("h:mm","h")),u&&(h=h.replace("a","")),a||0!==m||(y=y.replace("h:mm","h")),`${(0,n.c)(l,h)}${c}${(0,n.c)(d,y)}`}},84780:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(54832),i=r(96388);const s=function(e,t="MMMM d, yyyy"){return e?(0,n.c)((0,i.c)(e),t):""}},39700:(e,t,r)=>{"use strict";function n(e=new Date){return new Date(e.getTime()+60*e.getTimezoneOffset()*1e3)}r.d(t,{c:()=>n})},6396:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(30004),i=r(6344);function s(e,t={}){return null!=e&&(0,i.c)((0,n.c)(new Date),t)<=e}},1676:(e,t,r)=>{"use strict";function n(e){return!!e&&"string"==typeof e&&Date.now()>=new Date(e).getTime()}r.d(t,{c:()=>n})},70184:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(30004),i=r(6344);function s(e,t={}){return null!=e&&(0,i.c)((0,n.c)(new Date),t)>=e}},82220:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(30004);function i(e,t){if(null==e||null==t)return!1;const r=(0,n.c)(new Date);return r>=e&&r<=t}},21212:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(96388),i=r(16536);function s(e){if(null==e)return!1;const t=(0,n.c)(e);return(0,i.c)(Date.now(),t)}},81744:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(96388),i=r(40928);function s(e){if(null==e)return!1;const t=(0,n.c)(e);return(0,i.c)(new Date,t)}},97992:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(94484),i=r(96388),s=r(40928);function a(e){if(null==e)return!1;const t=(0,i.c)(e);return(0,s.c)(t,(0,n.c)(new Date,1))}},38128:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(96388),i=r(98180),s=r(81744);function a(e){return!(null==e||!(0,s.c)(e))&&(0,i.c)((0,n.c)(e))>16}},20520:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(96388),i=r(40928),s=r(31228);function a(e){if(null==e)return!1;const t=(0,n.c)(e);return(0,i.c)((0,s.c)(new Date,1),t)}},8844:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(21492);const i=/version\/(\d+(\.\d+)?)/i,s=/\/([^\s]+)\s+\(Vizio/,a=/(?:applewebkit|safari)\/(\d+(\.\d+)?)/i,o=function(e){const t=/\(.* ([^)]+)\)$/.exec(e);return t&&t[1]||void 0};function c(e){let t="",r="";e?(t=e.userAgent,r=e.platform):n.c&&null!=window.navigator&&(t=window.navigator.userAgent,r=window.navigator.platform),this.platformVersion="0",this.detect({userAgent:t,platform:r})}c.prototype={constructor:c,browsers:[{id:"konvergo",name:"Plex Media Player",webkit:!0,regex:/plexmediaplayer/i,versionRegex:/plexmediaplayer (\d+\.\d+\.\d+)/i},{id:"wiiu",name:"Wii U",regex:/wiiu/i,versionRegex:a,webkit:!0},{id:"ps3",name:"Unknown Browser",webkit:!0,regex:/\(PLAYSTATION 3 \d\./},{id:"ps4",name:"Unknown Browser",webkit:!0,regex:/\(PlayStation 4 \d\./},{id:"ps3",name:"PlayStation 3",webkit:!0,regex:/\(PlayStation 3\)/,versionRegex:a},{id:"ps4",name:"PlayStation 4",webkit:!0,regex:/\(PlayStation 4\)/,versionRegex:a},{id:"edge",name:"Microsoft Edge",regex:/edge?|(windows phone.+chrome)/i,versionRegex:/edge?\/(\d+(\.\d+)?)/i},{id:"ie",name:"Internet Explorer",msie:!0,regex:/(msie|trident|iemobile)/i,versionRegex:/(msie |rv:)(\d+(\.\d+)?)/i,versionMatchIndex:2},{id:"opera",name:"Opera",presto:!0,regex:/opera/i,versionRegex:i},{id:"opera",name:"Opera",webkit:!0,regex:/OPR\//,versionRegex:/OPR\/\s?(\d+(\.\d+)?)/},{id:"vivaldi",name:"Vivaldi",webkit:!0,regex:/vivaldi/i,versionRegex:/Vivaldi\/\s?(\d+(\.\d+)?)/},{id:"chrome",name:"Chrome",webkit:!0,regex:/(chrome|crios|gfiber|netbox)/i,versionRegex:/(?:chrome|crios|gfibertv)[/-](\d+(\.\d+)?)/i},{id:"firefox",name:"Firefox",gecko:!0,regex:/firefox/i,versionRegex:/firefox[ /](\d+(\.\d+)?)/i},{id:"safari",name:"Safari",webkit:!0,regex:/macintosh.+safari/i,versionRegex:i},{id:"safari",name:"Safari",webkit:!0,regex:/applewebkit/i,versionRegex:a}],platforms:[{id:"metrological",name:"Metrological",tv:!0,regex:/WPE([-\w]+)?$/,version:function(e=""){const t=/WPE(?:-(\w*))?$/.exec(e);if(t&&t[1])return t[1]}},{id:"netgem",name:"Netgem",tv:!0,regex:/^Netbox/,version:function(e=""){return e.split("/")[1]||e}},{id:"netcast",name:"NetCast",tv:!0,predicate:function(e){return/netcast/i.test(e)&&!/web[o0]s/i.test(e)}},{id:"webos",name:"webOS",tv:!0,predicate:function(e){return/web[o0]s/i.test(e)&&/smarttv/i.test(e)}},{id:"blackberry",name:"Blackberry",mobile:!0,regex:/BlackBerry|RIM|BB10/,version:function(e){const t=(/PlayBook/.test(e)?/Tablet OS (\d+\.\d+)/:i).exec(e);return t&&t[1]}},{id:"ps3",name:"PlayStation 3",tv:!0,regex:/P(lay)?S(tation )?3/i,version:function(e){return window.WM_devSettings?window.WM_devSettings.version:void 0}},{id:"ps4",name:"PlayStation 4",tv:!0,regex:/P(lay)?S(tation )?4/i,version:function(e){return window.WM_devSettings?window.WM_devSettings.version:void 0}},{id:"wiiu",name:"Wii U",tv:!0,regex:/Nintendo WiiU/},{id:"tizen",name:"Tizen",tv:!0,predicate:function(e){return!!this.version(e)},version:function(e){const t=/Tizen (\d+(\.\d+)*)/i.exec(e);return t&&t[1]||void 0}},{id:"winvergo",name:"Windows",tv:!0,predicate:function(e){return n.c&&!!window.Windows},version:function(e){try{const e=window.Windows.System.Profile.AnalyticsInfo.versionInfo.deviceFamilyVersion,t=("0000000000000000"+parseInt(e,10).toString(16)).slice(-16),r=[];let n=0;for(;n<t.length;){const e=t.substring(n,n+4),i=parseInt(e,16);r.push(i),n+=4}return r.join(".")}catch(e){}}},{id:"viera",name:"Viera",tv:!0,predicate:function(e){return!!this.version(e)},version:function(e){const t=/Viera\/(\d+(\.\d+)*)/i.exec(e);return t&&t[1]||void 0}},{id:"sta",name:"Smart TV Alliance",tv:!0,version:function(e){let t,r;if(/SmartTvA/.test(e))r=/SmartTvA\/(\d+\.\d+)/.exec(e),t=r&&r[1]||t;else{const r=[/nettv\/4/i],n=[/nettv/i],i=function(t){return t.test(e)};[/Linux i686.+Chromium\/18/,/nettv\/4.2/i,/toshiba-dtv/i,/viera/i].some(i)?t="2.0":r.some(i)?t="1.0":n.some(i)&&(t="0")}return t},predicate:function(e){return void 0!==this.version(e)}},{id:"tivo",name:"TiVo",tv:!0,regex:/TiVo/,version:function(e){const t=/TCD[^,]+/.exec(e);return t&&t[0]||void 0}},{id:"viziosmartcast",name:"Vizio SmartCast",tv:!0,predicate:function(e){return n.c&&window.VIZIO&&window.VIZIO.isSmartCastDevice},version:function(e){}},{id:"viziomtk",name:"Vizio MTK",tv:!0,predicate:function(e){return/opera/i.test(e)&&"undefined"!=typeof iMTK_JSP}},{id:"viziosigma",name:"Vizio Sigma",tv:!0,predicate:function(e){return/opera/i.test(e)&&/vizio/i.test(e)},version:function(e){const t=s.exec(e);return t&&t[1]||void 0}},{id:"viziomtk",name:"Vizio MTK",tv:!0,predicate:function(e){return s.test(e)&&"undefined"!=typeof iMTK_JSP},version:function(e){const t=s.exec(e);return t&&t[1]||void 0}},{id:"viziosigma",name:"Vizio Sigma",tv:!0,regex:s,version:function(e){const t=s.exec(e);return t&&t[1]||void 0}},{id:"operatvstore",name:"Opera TV Store",tv:!0,predicate:function(e){const t=/Opera TV Store/.test(e),r=/TV Store/.test(e)&&/OMI\//.test(e);return t||r}},{id:"operatv",name:"Opera TV",tv:!0,regex:/opera\/\d+\.\d+ \(linux (mips|arm)/i},{id:"ios",name:"iOS",mobile:!0,regex:/(iphone|ipad|ipod)/i,version:function(e){const t=/OS (\d+_\d+)/.exec(e);return t&&t[1]?t[1].replace("_","."):void 0}},{id:"windowsphone",name:"Windows Phone",mobile:!0,regex:/windows phone/i,version:function(e){const t=/windows phone[ os]*(\d+\.\d+);/i.exec(e);return t&&t[1]}},{id:"android",name:"Android",mobile:!0,regex:/android/i,version:function(e){const t=/Android (\d+\.\d+)/.exec(e);return t&&t[1]}},{id:"webos",name:"webOS",mobile:!0,predicate:function(e){return/hpwOS/.test(e)||/web[o0]s/i.test(e)&&!/smarttv/i.test(e)},version:function(e){const t=/(?:hpw|web)OS\/(\d+\.\d+)/.exec(e);return t&&t[1]}},{id:"openelec-rpi2",name:"Embedded (Raspberry Pi)",tv:!0,regex:/plexmediaplayer.*openelec-rpi2/i,version:o},{id:"openelec",name:"Embedded",tv:!0,regex:/plexmediaplayer.*openelec/i,version:o},{id:"linuxkonvergo",name:"Linux",tv:!0,regex:/plexmediaplayer.*linux/i,version:o},{id:"osxkonvergo",name:"OSX",tv:!0,regex:/plexmediaplayer.*mac/i,version:o},{id:"windowskonvergo",name:"Windows",tv:!0,regex:/plexmediaplayer.*win/i,version:o},{id:"linux",name:"Linux",regex:/linux/i},{id:"osx",name:"OSX",regex:/Macintosh/,version:function(e){const t=/OS X (\d+)[_.]?(\d+)?/.exec(e);if(t)return t[2]?t[1]+"."+t[2]:t[1]}},{id:"windows",name:"Windows",regex:/Windows/,version:function(e){const t=/Windows [^\d;)]*(\d+\.\d+)/.exec(e);if(t)return{"6.0":"Vista / Server 2008",6.1:"7 / Server 2008 R2",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"}[t[1]]}},{id:"chromeos",name:"Chrome OS",regex:/CrOS/,version:function(e){const t=/CrOS [\S]* (\d+)[_.]?(\d+)?/.exec(e);if(t)return t[2]?t[1]+"."+t[2]:t[1]}}],detect:function(e){const t=this.runTests(this.browsers,e),r=this.runTests(this.platforms,e);let n;t?(this.id=t.id,this.name=t.name,this.version=this.getVersion(e.userAgent,t.versionRegex,t.versionMatchIndex||1),this.webkit=!!t.webkit,this.gecko=!!t.gecko,this.msie=!!t.msie,this.presto=!!t.presto):(this.id="unknown",this.name="Unknown Browser",this.version="0",this.webkit=!1,this.gecko=!1,this.msie=!1,this.presto=!1),r?(n="function"==typeof r.version?r.version(e.userAgent):r.version,this.platform=r.name,this.platformID=r.id,this.platformVersion=n||this.platformVersion,this.mobile=!!r.mobile,this.tv=!!r.tv):(this.platformID="unknown",this.platform="Unknown Platform",this.mobile=!1,this.tv=!1),this.tv||(this.platformModifierKey="osx"===this.platformID||"ios"===this.platformID?"command":"ctrl")},runTests:function(e,t){let r,n,i,s=0;for(;!0!==n&&(i=e[s++]);)r=t[i.context||"userAgent"],i.regex?n=i.regex.test(r):i.predicate&&(n=i.predicate(r));return i},getVersion:function(e,t,r){const n=e.match(t);return n&&n.length>r&&n[r]||"0"},toJSON:function(){const e={};for(const t in this)this[t]&&"browsers"!==t&&"platforms"!==t&&(e[t]=this[t]);return e}};const l=new c},21492:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)},32364:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(8844),i=r(21492);const s=function(){if(!i.c)return!1;const e=document.createElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))}(),a={isHostedHttps:i.c&&"https:"===window.location.protocol,hasConsole:!!(window.console&&window.console.log&&window.console.log.call),hasWebSocket:i.c&&!!window.WebSocket,hasEventSource:i.c&&!!window.EventSource,hasReplaceState:i.c&&!(!window.history||!window.history.replaceState),hasFileUpload:i.c&&!!(window.File&&window.FileList&&window.FileReader),hasMediaSource:i.c&&!(!window.MediaSource&&!window.WebKitMediaSource),hasObjectUrl:!n.c.presto&&i.c&&!(!window.URL||"function"!=typeof window.URL.createObjectURL||"function"!=typeof window.URL.revokeObjectURL),hasBlob:function(){try{return!!new window.Blob}catch(e){return!1}}(),hasFullscreen:function(){if(!i.c)return!1;const e=document.createElement("div");return!!(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen)}(),hasCanvas:s,hasWebGL:function(){if(!s)return!1;const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return!!t&&t instanceof window.WebGLRenderingContext}(),hasTouchScreen:i.c&&!!("ontouchstart"in window),hasPageVisibility:i.c&&(!0===document.hidden||!1===document.hidden),hasWebKitPageVisibility:i.c&&(!0===document.webkitHidden||!1===document.webkitHidden),hasPassiveEventListeners:function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),hasWebSpeech:i.c&&!!window.speechSynthesis,hasMediaSession:i.c&&"mediaSession"in window.navigator,hasLocalStorage:(()=>{if(!i.c)return!1;let e=!1;try{window.localStorage.setItem("testKey","test"),window.localStorage.removeItem("testKey"),e=!0}catch(e){}return e})()}},21248:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(91600),i=r(43352);const s=new(n.c.extend({mixins:i.c}))},30680:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t){return t?`${e}:${t}`:e}},79816:(e,t,r)=>{"use strict";r.d(t,{Cg:()=>s,Ih:()=>a,cp:()=>c});var n=r(57496),i=r(32364);const s="D100",a="D200",o="D300";function c(){return i.c.isHostedHttps||(0,n.gd)(window.location.hostname)?a:i.c.isHostedHttps?o:s}},52563:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(72152);r(79268);const i=function(e){return{"X-Plex-Drm":e||n.NONE}}},99344:(e,t,r)=>{"use strict";r.d(t,{cp:()=>i,gX:()=>n});const n="=",i=[n,"!=","==","!==",">=","<=",">>=","<<=",">>=-","<<=-"]},13687:(e,t,r)=>{"use strict";r.d(t,{OR:()=>i,Q:()=>n});const n="&",i=","},61240:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(95720),i=r.n(n),s=(r(79268),r(99344)),a=r(13687);let o,c;function l(e,t){if(i().isEmpty(e))return;if(e===o)return c;const r=e.map((({key:e,value:r,operator:n=s.gX})=>{let i;i=t?Array.isArray(r)?r.join(a.OR):r:Array.isArray(r)?r.map(encodeURIComponent).join(a.OR):encodeURIComponent(r);const o=n.lastIndexOf(s.gX),c=n.substr(0,o),l=n.substr(o+1,n.lastIndexOf(s.gX));return encodeURIComponent(e)+encodeURIComponent(c)+s.gX+encodeURIComponent(l)+i}),[]);return o=e,c=r.join(a.Q),c}},51100:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(33040);function i(e,t,r="message"){if(!e)return t;const i=n.c.parseXML(e.responseText);return i&&i[r]?i[r]:t}},9852:(e,t,r)=>{"use strict";r.d(t,{AL:()=>c,ci:()=>o,wn:()=>a});var n=r(44768),i=r(96504);function s(e){const t=new URLSearchParams(window.location.search).get(e);return t?function(e){return/^https:\/\/(?:(\w|-)+\.)*plex\.tv(?:\/|$)/i.test(e)?e:void 0}(t):void 0}function a(e){const t=s("myPlexUrl")||"https://clients.plex.tv";return e?i.c.join([t,e]):t}function o(e){const t=s("wwwPlexUrl")||"https://www.plex.tv";return e?i.c.join([t,e]):t}function c(e){const t=s("authAppUrl")||"https://app.plex.tv/auth",r={myPlexUrl:s("myPlexUrl"),wwwPlexUrl:s("wwwPlexUrl")};let a=i.c.join(t,r,{trailingSlash:!0});return e&&!(0,n.c)(a)&&(a=i.c.join([window.location.origin,a])),a}},45944:(e,t,r)=>{"use strict";r.d(t,{M:()=>a,c:()=>i});var n=r(59396),i=(e=>(e.Subscription="subscription",e.SendRecoveryCode="sendRecoveryCode",e.EditAccount="editAccount",e))(i||{});function s(e,t){switch(t){case"subscription":if("1003"===e)return(0,n.c)("Subscriptions have been temporarily disabled: too many failed attempts. Please try again later.");break;case"sendRecoveryCode":switch(e){case"1001":return(0,n.c)("User could not be authenticated.");case"1003":return(0,n.c)("A temporary recovery code has already been sent recently. Please try again later.");case"1028":return(0,n.c)("Invalid recovery code")}break;case"editAccount":if("1003"===e)return(0,n.c)("Too many updates. Please try again later.")}switch(e){case"1001":return(0,n.c)("The username or password is incorrect");case"1003":return(0,n.c)("Sign in has been temporarily disabled: too many failed attempts. Please try again later.");case"1004":return(0,n.c)("Authentication failed. Please try again later.");case"1010-login":return(0,n.c)("Login is required");case"1010-password":return(0,n.c)("Password is required");case"1010-email":return(0,n.c)("Email is required");case"1011-username":return(0,n.c)("Username has already been taken");case"1011-email":return(0,n.c)("Email has already been taken");case"1028":return(0,n.c)("Invalid verification code");case"1029":return(0,n.c)("Please enter the verification code");case"1030":return(0,n.c)("This account only allows signing in with an email address");case"1031":return(0,n.c)("The username or password is incorrect. Repeated attempts may temporarily disable sign in.");case"1032-password":return(0,n.c)("Password must be at least 8 characters");case"1033-password":return(0,n.c)("Password is too weak");case"1034-password":return(0,n.c)("Password must be different from username or email address");case"1035-email":return(0,n.c)("Email is not a valid email address");case"1036-username":return(0,n.c)("Username must not be an email address");case"1037-username":return(0,n.c)("Username contains invalid characters");case"1038-pin":return(0,n.c)("Pin must be 4 digits");case"1039-passwordConfirmation":return(0,n.c)("Confirm Password must match Password");case"1040":case"1044":return(0,n.c)("Invalid Password")}}function a(e,t){if(!e)return;const r=String(e.code);return s(`${e.code}-${e.field}`,t)||s(r,t)||e.message||(0,n.c)("An unknown error occurred")}},98248:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(37660),i=r(35860),s=r(89064),a=r(62288),o=r(1904),c=r(91224),l=r(90012);function d(e){const{sourceServer:t,sourceProvider:r,directories:d,optOuts:u,isManagedUser:p,hasHybridGuide:m=!1}=e;if(!d)return[];const h=null==u?void 0:u.find((e=>e.key===l.s.IncludeDiscoverSource)),y=h&&(p?h.value!==l.M.OptIn:h.value===l.M.OptOut);return d.reduce(((e,l)=>{const d=(0,o.c)(r,l);return y&&i._u(r.identifier,i.Im)&&l.id===n.qU?e:d&&(l.hubKey&&!m||t.machineIdentifier===s.A&&i.QJ(r.identifier)||d.key!==c.uO)?t.machineIdentifier!==s.A&&d.key===c.uO&&i._u(r.identifier,[i.Ow])?e:t.machineIdentifier===s.A||d.key!==c.uO||l.hubKey?e.concat((0,a.c)({sourceType:d.key,sourceServer:t,sourceProvider:r,sourceDirectory:l})):e:e}),[])}},70776:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(76400);function i(e){return function(e){return!!e&&(!!e.get("isCloud")||e.supports("json")&&!e.get("onlyXML")&&!e.get("isMobileServer"))}(e)?n.qS:n.sH}},45508:e=>{e.exports=function(e,t,r){return e===t?r.fn(this):r.inverse(this)}},22251:e=>{e.exports=function(e,t,r){return e!==t?r.fn(this):r.inverse(this)}},18664:(e,t,r)=>{const n=r(71264).c,i=r(20104);e.exports=i(n)},2396:(e,t,r)=>{const n=r(96736).c,i=r(20104);e.exports=i(n)},74540:(e,t,r)=>{const n=r(25024).c,i=r(20104);e.exports=i(n)},8276:(e,t,r)=>{const n=r(95720),i=r(13624);e.exports=function(e,t){const r=i.partials[e],s=n.extend({},t.hash.context||this,t.hash);return new i.SafeString(r(s))}},30700:(e,t,r)=>{const n=r(67224).c,i=r(20104);e.exports=i(n)},28764:(e,t,r)=>{const n=r(2108).c,i=r(20104);e.exports=i(n)},20104:(e,t,r)=>{const n=r(95720);e.exports=function(e){return function(){return e.apply(this,n.initial(arguments))}}},27412:(e,t,r)=>{const n=r(95720),i=r(59396).s,s=r(13624);e.exports=function(){const e=n.initial(arguments),t=n.last(arguments).hash;return n.isObject(t)&&!n.isEmpty(t)&&e.splice(1,0,t),new s.SafeString(i.apply(i,e))}},26844:(e,t,r)=>{const n=r(96504).c.getLastSegment,i=r(20104);e.exports=i(n)},24372:(e,t,r)=>{"use strict";function n(e){if(!e)return null;const[t,r]=e.split(","),n=t.substr(5),i=window.atob(r),s=[];for(let e=0;e<i.length;e++)s.push(i.charCodeAt(e));const a=new Uint8Array(s);return new window.Blob([a],{type:n})}r.d(t,{c:()=>n})},65723:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(79268);function i(e,t){(0,n.c)(null!=e,"No `version` supplied to `isVersionOrNewer`."),(0,n.c)(null!=t,"No `minVersion` supplied to `isVersionOrNewer`. Have you misspelled a constant?");const r=t.split("."),i=e.split(".");for(let e=0,t=r.length;e<t;e++)if(e<i.length){const t=parseInt(r[e],10),n=parseInt(i[e],10);if(t<n)return!0;if(t>n)return!1}return!0}},24696:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(52987);const i=/(^[^-]+)-/;function s(e){for(let t=0,r=(e=e||[]).length;t<r;t++){const r=e[t];if("xx"===r||"xn"===r)continue;if(n.cp[r])return r;const a=r.match(i),o=a&&s([a[1]]);if(o)return o}}},6560:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(52987);function i(e){return n.cp[e]||""}},52987:(e,t,r)=>{"use strict";r.d(t,{Iw:()=>i,S4:()=>a,TB:()=>s,cp:()=>o});const n={aa:"Afaraf",af:"Afrikaans",ab:"Abkhazian",ak:"Akan",sq:"Shqip",am:"Amharic",ar:"",an:"Aragons",hy:"",as:"Assamese",av:" ",ae:"Avesta",ay:"Aymar aru",az:"Azrbaycan dili",ba:" ",bm:"Bamanankan",eu:"Euskara",be:"",bn:"Bengali",bh:"",bi:"Bislama",bs:"Bosanski jezik",br:"Brezhoneg",bg:" ",my:"Burmese",ca:"Catal",ch:"Chamoru",ce:" ",cu:" ",cv:" ",kw:"Kernewek",co:"Corsu",cr:"",dv:"Divehi",dz:"",en:"English","en-GB":"English (UK)",eo:"Esperanto",et:"Eesti",ee:"Eegbe",fo:"Froyskt",fj:"Vosa Vakaviti",fy:"Frysk",ff:"Fulfulde",ka:"",gd:"Gidhlig",ga:"Gaeilge",gl:"Galego",gv:"Gaelg",gn:"Avae",gu:"",ht:"Kreyl ayisyen",ha:"",hz:"Otjiherero",hi:"",ho:"Hiri Motu",hr:"Hrvatski",ig:"Ass Igbo",is:"slenska",io:"Ido",ii:" Nuosuhxop",iu:"",ie:"Interlingue",ia:"Interlingua",id:"Bahasa Indonesia",ik:"Iupiaq",jv:"Basa Jawa",kl:"Kalaallisut",kn:"",ks:"",kr:"Kanuri",kk:" ",km:"Khmer",ki:"Gky",rw:"Ikinyarwanda",ky:" ",kv:" ",kg:"KiKongo",kj:"Kuanyama",ku:"Kurd",lo:"Lao",la:"Latine",lv:"Latvieu valoda",li:"Limburgs",ln:"Lingla",lt:"Lietuvi kalba",lb:"Ltzebuergesch",lu:"Luba-Katanga",lg:"Luganda",mk:" ",mh:"Kajin Maje",ml:"Malayalam",mi:"Te reo Mori",mr:"",ms:"Bahasa Melayu",mg:"Malagasy fiteny",mt:"Malti",mo:"Moldavian",mn:"",na:"Ekakair Naoero",nv:"Din bizaad",nr:"IsiNdebele (North)",nd:"IsiNdebele (South)",ng:"Owambo",ne:"",nn:"Norsk nynorsk",nb:"Norsk bokml",ny:"ChiChea",oc:"Occitan",oj:"Ojibwe",or:"Oriya",om:"Afaan Oromoo",os:" ",pa:"",pi:"",ps:"",qu:"Runa Simi",rm:"Rumantsch grischun",ro:"Romn",rn:"KiRundi",sg:"Yng t sng",sa:"",sr:" ",si:"Sinhala",sk:"Slovenina",sl:"Slovenina",se:"Davvismegiella",sm:"Gagana faa Samoa",sn:"ChiShona",sd:"",so:"Soomaaliga",st:"Sesotho",sc:"Sardu",ss:"SiSwati",su:"Basa Sunda",sw:"Kiswahili",ty:"Reo Tahiti",ta:"",tt:"",te:"Telugu",tg:"",tl:"Wikang Tagalog",th:"",bo:"",ti:"Tigrinya",to:"Faka Tonga",tn:"Setswana",ts:"Xitsonga",tk:"Trkmen",tw:"Twi",ug:"Uyurq",uk:"",ur:"",uz:"Ozbek",ve:"Tshivena",vi:"Ting Vit",vo:"Volapk",cy:"Cymraeg",wa:"Walon",wo:"Wollof",xh:"IsiXhosa",yi:"",yo:"Yorb",za:"Sa cue",zu:"IsiZulu",pb:"Portugus (Brasil)",fr:"Franais","fr-CA":"Franais Canadien",de:"Deutsch",sv:"Svenska",no:"Norsk",da:"Dansk",fi:"Suomeksi",nl:"Nederlands",it:"Italiano",es:"Espaol","es-419":"Espaol (Latinoamrica)",pl:"Polski",hu:"Magyar",el:"",tr:"Trke",zh:"","zh-TW":"",ru:" ",he:"",ja:"",pt:"Portugus","pt-BR":"Portugus Brasileiro",ko:"",cs:"etina",fa:"",xx:"Unknown",xn:"None"};function i(e,t){return n[e].localeCompare(n[t])}const s=["xx","xn"],a=function(){const e=Object.keys(n).filter((e=>-1===s.indexOf(e)));return e.sort(i),e.concat(s)}(),o=n},30564:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return`${e.beginsAt}-${e.channelIdentifier}-${e.endsAt}`}},79268:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(38828);const i=function(e,t="`assert` requires an error message argument",r=!1){if(e)return!0;if(n.c.error(t),r)throw new Error(t);return!1}},38828:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(21248);const i="log:message",s="log:groupEnd",a={accessToken:1,address:1,auth_token:1,authToken:1,Authorization:1,clientIdentifier:1,email:1,host:1,myPlexAccessToken:1,password:1,uri:1,"X-Plex-Token":1},o=new RegExp("("+Object.keys(a).join("|")+")(\\s?=\\s?)(['\"]?)[^'\"\n]+(['\"]?)","g"),c=/%[sdifo]/g,l=/(error|exception)\]$/i,d={"%s":e=>e,"%d":e=>Number.parseInt(e,10),"%f":e=>Number.parseFloat(e),"%o":e=>e},u=(e,t,r)=>function(){const i=arguments.length;let s;if(t=void 0===t?p.LEVEL_LOG:t,!(p.level<t)){if(0===i&&r)s=r;else if(1===i)s=p.serialize(arguments[0]);else if(i>1){const e=Array(i);let t=-1;for(;++t<i;)e[t]=p.serialize(arguments[t]);e[0]=e[0].replace(c,((t,r)=>{let n=t;return e.length>1&&(n=d[t](e[1]),e.splice(1,1)),n})),s=e.join(" ")}return s&&n.c.trigger(e,{type:e,level:t,message:s}),s}},p=u(i);p.LEVEL_NONE=-1,p.LEVEL_ERROR=0,p.LEVEL_WARN=1,p.LEVEL_INFO=2,p.LEVEL_DEBUG=3,p.LEVEL_LOG=4,p.LEVEL_GROUP=p.LEVEL_INFO,p.LEVEL_GROUP_END=p.LEVEL_INFO,p.level=p.LEVEL_LOG,p.redacts=!0,p.setLevel=e=>{p.level=Math.max(p.LEVEL_NONE,Math.min(e,p.LEVEL_LOG))},p.debug=u(i,p.LEVEL_DEBUG),p.info=u(i,p.LEVEL_INFO),p.warn=u(i,p.LEVEL_WARN),p.error=u(i,p.LEVEL_ERROR),p.group=u("log:group",p.LEVEL_GROUP,"Group"),p.groupCollapsed=u("log:groupCollapsed",p.LEVEL_GROUP,"Group"),p.groupEnd=()=>{p.level<p.LEVEL_GROUP_END||n.c.trigger(s,{type:s,level:p.LEVEL_GROUP_END})},p.serialize=e=>{let t;switch(t=void 0===e?"[object Undefined]":null===e?"[object Null]":Object.prototype.toString.call(e),t){case"[object String]":return p.redacts?e.replace(o,"$1$2$3REDACTED$4"):e;case"[object Object]":case"[object Array]":try{const t=p.redacts?p._jsonReplacer:null;return JSON.stringify(e,t,2)}catch(e){return"Unable to serialize value"}case"[object Boolean]":case"[object Number]":case"[object Function]":case"[object RegExp]":return e.toString();case"[object Date]":return e.toUTCString();case"[object Undefined]":return"undefined";case"[object Null]":return"null";default:if(l.test(t)){const r=p._getMaxStackLength();let n=e.stacktrace||e.stack;return n&&n.length>r&&(n=n.substr(0,r-3)+"..."),p.serialize({type:t,stack:n,name:e.name,message:e.message})}return e.toString()}},p._jsonReplacer=(e,t)=>a[e]?"REDACTED":"[object String]"===Object.prototype.toString.call(t)?p.serialize(t):t,p._getMaxStackLength=()=>1e3;const m=p},1124:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t,r){return Math.max(Math.min(e,r),t)}},30336:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t,r){let n=r;if(e.Part.length>1)for(let r=0,i=e.Part.length;r<i;r++){const i=e.Part[r];if(!i.duration)break;if(t.key===i.key)break;n+=i.duration}return n}},87416:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(54832),i=r(88184),s=r(72232),a=r(41548),o=r(88576),c=r(59396);const l=function(e){let t=e.episodeIndex;if(t>0||0===t)return e.noLeadingZero||(t=(0,o.c)(t)),e.useLongName?(0,c.c)("Episode {episodeNumber}",{episodeNumber:t}):(0,c.c)("E{episodeNumber}",{episodeNumber:t});if(e.date&&e.dateFormat)return(0,n.c)((0,a.c)(e.date),e.dateFormat);if(e.date){const t=(0,a.c)(e.date);return(0,c.c)("{monthNumber}/{dayNumber}/{shortYear}",{monthNumber:(0,s.c)(t)+1,dayNumber:(0,i.c)(t),shortYear:(0,n.c)(t,"yy")})}return""}},1060:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=function(e,t){let r;if(e.Part.length>1){let n=0;for(let i=0,s=e.Part.length;i<s&&(r=e.Part[i],r.duration)&&(n+=r.duration,!(n>t));i++);}else r=i().first(e.Part);return r}},63900:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t){return e>t?50:e<=0||t<=0?0:parseFloat((e/t*100).toFixed(2))}},1508:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t,r){let n=r;if(e.Part.length>1)for(let r=0,i=e.Part.length;r<i;r++){const i=e.Part[r];if(!i.duration)break;if(t.key===i.key)break;n-=i.duration}return n}},75004:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=function(e,t){if(!e.indexes)return;const r=e.indexes.split(",");return r.length?i().indexOf(r,t)>-1?t:r[0]:void 0}},83052:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(54832),i=r(88184),s=r(72232),a=r(41548),o=r(88576),c=r(59396);const l=function(e){let t=e.seasonIndex,r=e.episodeIndex,l="",d="";if((r>0||0===r)&&t<1e3){e.noLeadingZero||(t=(0,o.c)(t),r=(0,o.c)(r));const n=e.separator;return e.useLongName?(l=(0,c.c)("Season {seasonNumber}",{seasonNumber:t}),d=(0,c.c)("Episode {episodeNumber}",{episodeNumber:r})):(l=(0,c.c)("S{seasonNumber}",{seasonNumber:t}),d=(0,c.c)("E{episodeNumber}",{episodeNumber:r})),e.includeSpecials&&0===t&&(l=(0,c.c)("Specials")),`${l}${n||(e.useLongName?" ":"")}${d}`}if(e.date){const t=(0,a.c)(e.date);return(0,c.c)("{monthNumber}/{dayNumber}/{shortYear}",{monthNumber:(0,s.c)(t)+1,dayNumber:(0,i.c)(t),shortYear:(0,n.c)(t,"yy")})}return""}},37156:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(88576),i=r(59396);const s=function(e){let t=e.seasonIndex;if(null==t)return"";if(t>1e3)return t;e.noLeadingZero||(t=(0,n.c)(t));let r="";return r=0===t?(0,i.c)("Specials"):e.useLongName?(0,i.c)("Season {seasonNumber}",{seasonNumber:t}):(0,i.c)("S{seasonNumber}",{seasonNumber:t}),r}},49048:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(95720),i=r.n(n),s=r(65668);function a(e,t={}){const{onlyIfCached:r=!0}=t;if(!e)return;if(e.section)return e.section;if(e.get("isSection"))return e;const n=e.get("librarySectionID");if(n){const t=new s.c({key:n},{server:e.server,onlyIfCached:r});return i().isEmpty(t)?void 0:t}return e.parent?a(e.parent,t):void 0}},99567:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(76636),a=r(27904);const o=function(e){const t=s.c.get("audio").id,r=(0,a.c)(e,{streamType:t,selected:!0});return i().first(r)}},45020:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(4828),i=r(76636),s=r(27904);const a=function(e){return(0,s.c)(e,{streamType:i.c.get("subtitles").id}).filter((e=>e.selected&&e.id!==n.K))[0]}},86264:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(76636),a=r(27904);const o=function(e){const t=s.c.get("video").id,r=(0,a.c)(e,{streamType:t});return i().first(r)}},27904:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=function(e,t){const r=[];if(e){const n=i().first(e.Part);n&&n.Stream&&r.push.apply(r,i().where(n.Stream,t))}return r}},80472:(e,t,r)=>{"use strict";function n(e){return/^(idx|pgs|vobsub)$/i.test(e)}r.d(t,{c:()=>n})},34932:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(60976),c=r(40716),l=(r(79268),r(38828));var d=r(99567),u=r(45020),p=r(86264),m=r(27904),h=r(80472),y=r(39835),g=r(54064),f=r(59396),v=r(76636);const b={getMediaDecision:function(e){const t=this.augmentProfile(e);if(l.c.info("[MDE] Augmented profile:",t),e.media)return this.analyzeMedia(e.media,t,e);const r=e.item.get("Media");if(!r.length)return{transcodeServer:e.transcodeServer,canPlay:!0,canDirectPlay:!0};if(1===r.length)return this.analyzeMedia(a().first(r),t,e);const n=a().map(r,(function(r){return this.analyzeMedia(r,t,e)}),this);return this.getBestDecision(n)},augmentProfile:function(e){const t=e.profile;if(!t)throw new Error("MDE: No player profile provided for "+e.type);const r=e.type===g.c.types.VIDEO,n=i().extend(!0,{},t.directPlay),s=i().extend(!0,{},t.directStream),o=n.generic;o&&delete n.generic;let c=e.allowedAC3Containers;const l="*"===c;!l&&c&&(c=Array.isArray(c)?c:[c]);let d=e.allowedEAC3Containers;const u="*"===d;!u&&d&&(d=Array.isArray(d)?d:[d]);let p=e.allowedDCAContainers;const m="*"===p;!m&&p&&(p=Array.isArray(p)?p:[p]);let h=e.allowedTrueHDContainers;const y="*"===h;return!y&&h&&(h=Array.isArray(h)?h:[h]),a().each(n,(function(t,n){this.mergeGenericOptions(t,o),this.mergeMaxQualityOptions(t,e),(l||c&&a().contains(c,n))&&this.addAudioCodec("ac3",t,e),(u||d&&a().contains(d,n))&&this.addAudioCodec("eac3",t,e),(m||p&&a().contains(p,n))&&this.addAudioCodec("dca",t,e),(y||h&&a().contains(h,n))&&this.addAudioCodec("truehd",t,e);const i=t[g.c.getStreamByType(e.type)];if(i){const t=i.codecs;a().each(t,(function(t,r){this.mergeMaxQualityOptions(t,e,!0),e.videoCodecOptions&&e.videoCodecOptions[r]&&this.mergeCodecOptions(t,e.videoCodecOptions[r])}),this)}const s=r&&t.audio;if(s&&e.audioCodecOptions){const t=s.codecs;a().each(t,(function(t,r){e.audioCodecOptions[r]&&this.mergeCodecOptions(t,e.audioCodecOptions[r])}),this)}}),this),this.mergeMaxQualityOptions(s,e),r&&(e.videoCodecOptions&&s.video&&a().each(s.video.codecs,(function(t,r){e.videoCodecOptions[r]&&this.mergeCodecOptions(t,e.videoCodecOptions[r])}),this),e.audioCodecOptions&&s.audio&&a().each(s.audio.codecs,(function(t,r){e.audioCodecOptions[r]&&this.mergeCodecOptions(t,e.audioCodecOptions[r])}),this)),{directPlay:n,directStream:s}},mergeGenericOptions:function(e,t){t&&(a().defaults(e,a().omit(t,"video","audio")),a().each(["audio","video"],(function(r){const n=t[r];let i=e[r];n&&(i||(i={},e[r]=i),a().defaults(i,a().omit(n,"codecs")),n.codecs&&a().each(n.codecs,(function(e,t){a().defaults(this.ensureCodecs(t,i),e)}),this))}),this))},mergeCodecOptions:function(e,t){a().each(t,(function(t,r){e[r]=t}),this)},ensureCodecs:function(e,t){return t.codecs||(t.codecs={}),t.codecs[e]||(t.codecs[e]={}),t.codecs[e]},mergeMaxQualityOptions:function(e,t,r){a().each([{option:"bitrate",setting:"maxBitrate"},{option:"videoResolution",setting:"maxVideoResolution"}],(function(n){if("videoResolution"===n.option&&t.type!==g.c.types.VIDEO)return;const i=this.getMaxQualityOption(e,n.option,t);if(null==i)return;const s=n.setting,a=g.c.getStreamByType(t.type);e.hasOwnProperty(s)?e[s]=i:e.hasOwnProperty(a)?e[a][s]=i:r||(e[a]={},e[a][s]=i)}),this)},getMaxQualityOption:function(e,t,r){const n=r.quality||{},i="max"+t.charAt(0).toUpperCase()+t.slice(1);let s=n[t];const a=this.getPrimaryStreamProperty(e,i,r);if("videoResolution"===t&&s&&(s=y.c.getResolutionFromSize(s)),"bitrate"===t){const e=r.item.server.get("maxUploadBitrate");e&&(!s||e<s)&&(s=e)}if(s||a){let e;return e=s&&a?Math.min(s,a):s||a,e}},addAudioCodec:function(e,t,r){t.audio||(t.audio={}),this.ensureCodecs(e,t.audio)},analyzeMedia:function(e,t,r){l.c.info("[MDE] Starting analysis of",this.getMediaTitle(e)),(0,l.c)("[MDE] Analyzing direct play");const n=this.canDirectPlay(e,t.directPlay,r);n.result||(0,l.c)("[MDE] Cannot direct play:",n.failedCheck);const i={finalProfile:t,transcodeServer:r.transcodeServer,preferredDirectPlayProtocol:r.preferredDirectPlayProtocol,item:r.item,media:e,canDirectPlay:n.result,canDirectPlayFailedCheck:n.failedCheck,canDisplayHDR:!!r.canDisplayHDR,canDisplayDolbyVision:!!r.canDisplayDolbyVision};let s=r.transcoderOptions||{};if(a().isFunction(s)&&(s=s(i)),r.type===g.c.types.VIDEO){(0,l.c)("[MDE] Analyzing video direct stream");const n=(0,p.c)(e);if(n){const e=this.canDirectStreamVideo(n,t.directStream.video,r,s);i.canDirectStreamVideo=e.result,i.canDirectStreamVideoFailedCheck=e.failedCheck}}if(r.type!==g.c.types.PHOTO){(0,l.c)("[MDE] Analyzing audio direct stream");const n=(0,d.c)(e);if(n){const e=this.canDirectStreamAudio(n,t.directStream.audio,r,s);i.canDirectStreamAudio=e.result,i.canDirectStreamAudioFailedCheck=e.failedCheck}}const o=(0,u.c)(i.media);return o&&((0,l.c)("[MDE] Analyzing subtitles"),a().extend(i,this.analyzeSubtitles(o,r))),(0,l.c)("[MDE] Analyzing playability"),a().extend(i,this.canPlay(i,r)),a().extend(i,this.getEffectiveQuality(e,t.directStream,r)),(0,l.c)("[MDE] Finished analysis of:",this.getMediaTitle(e),this.getDecisionLogs(i)),i},canDirectPlay:function(e,t,r){if(r.forceDirectPlay)return(0,l.c)("[MDE] Direct play forced"),{result:!0};if(!1===r.allowDirectPlay&&!r.transcodeServer.get("isCloud"))return l.c.warn("[MDE] Direct play failed; option is disabled"),{result:!1,failedCheck:"allowDirectPlay"};if(r.type===g.c.types.VIDEO&&!this.canDirectPlayVideo(e,r))return{result:!1,failedCheck:"canDirectPlayVideo"};const n=t[e.container];if(!n)return l.c.warn("[MDE] Direct play failed; unsupported container:",e.container),{result:!1,failedCheck:"containerProfile"};const i=a().keys(n);if(i&&i.length){for(let t=0,s=i.length;t<s;t++){const s=i[t],o=n[s];if("mimeType"===s){if(!r.skipCanPlayTypeTest&&!this.canPlayType(g.c.getElementByType(r.type),o))return l.c.warn("[MDE] Direct play failed; canPlayType test, %s: %s",s,o),{result:!1,failedCheck:"canPlayType"}}else if("video"===s||"audio"===s){const t=v.c.get(s),n=(0,m.c)(e,{streamType:t.id}),i="video"===s?(0,p.c)(e):(0,d.c)(e);if(!i){l.c.warn("[MDE] No stream selected; will not be able to analyze stream codecs");continue}if("audio"===s&&i!==n[0]&&!r.allowMultiTrackAudio)return l.c.warn("[MDE] Direct play failed; multi-track audio is required"),{result:!1,failedCheck:"allowMultiTrackAudio"};const a=this.analyzeStream(i,o,r);if(!a.result)return{result:!1,failedCheck:a.failedCheck}}else if("photo"===s){const t=this.analyzeStream(a().first(e.Part),o,r);if(!t.result)return{result:!1,failedCheck:t.failedCheck}}else if(!this.validateProfileProperty(s,o,e))return{result:!1,failedCheck:`validateProfileProperty:${s}`}}return{result:!0}}return{result:!0}},canDirectPlayVideo:function(e,t){return t.allowDirectPlay||t.transcodeServer.get("isCloud")?"hls"!==e.protocol||t.hasNativeHLS?"flv"!==e.container||t.hasFlash?!("dash"===e.protocol&&!t.hasDASH&&(l.c.warn("[MDE] Direct play failed; cannot play DASH"),1)):(l.c.warn("[MDE] Direct play failed; cannot play FLV"),!1):(l.c.warn("[MDE] Direct play failed; cannot play HLS"),!1):(l.c.warn("[MDE] Direct play failed; option is disabled"),!1)},canPlayType:function(e,t){if(e===g.c.elements.PHOTO)return!0;const r=document.createElement(e);return!(!r.canPlayType||!r.canPlayType(t).replace(/^no$/,""))},canDirectStreamVideo:function(e,t,r,n){return n.directStream||r.transcodeServer.get("isCloud")?this.analyzeStream(e,t,r):(l.c.warn("[MDE] Direct stream video failed; option is disabled"),{result:!1,failedCheck:"options:directStream"})},canDirectStreamAudio:function(e,t,r,n){return n.directStreamAudio||r.transcodeServer.get("isCloud")?this.analyzeStream(e,t,r):(l.c.warn("[MDE] Direct stream audio failed; option is disabled"),{result:!1,failedCheck:"options:directStreamAudio"})},analyzeStream:function(e,t,r){const n=t&&t.codecs&&t.codecs[e.codec];for(const i in t){const s=t[i];if("codecs"===i){const t=s[e.codec];if(!t)return{result:!1,failedCheck:`noCodecInProfile:${e.codec}`};const n=this.analyzeStream(e,t,r);if(!n.result)return{result:!1,failedCheck:n.failedCheck}}else if(!(n&&i in n||this.validateProfileProperty(i,s,e)))return{result:!1,failedCheck:`validateProfileProperty:${i}`}}return{result:!0}},validateProfileProperty:function(e,t,r){const n=e.match(/^(min|max)(\w)(\w*)/);let i;if(n){const s="min"===n[1],a="max"===n[1];if(i=r[e=n[2].toLowerCase()+n[3]],null==i&&l.c.warn("[MDE] Unable to validate %s; re-analyze the media if possible",e),null!=i&&"videoResolution"===e&&(i=y.c.getHeightFromResolution(i),t=y.c.getHeightFromResolution(t)),null!=i){if(s&&i<t)return l.c.warn("[MDE] Invalid profile property; %s: %s < %s",e,i,t),!1;if(a&&i>t)return l.c.warn("[MDE] Invalid profile property; %s: %s > %s",e,i,t),!1}}else if(i=r[e],null==i&&l.c.warn("[MDE] Unable to validate %s; re-analyze the media if possible",e),i!==t&&!a().contains(t,i))return l.c.warn("[MDE] Invalid profile property; %s: %s !== %s",e,i,t),!1;return!0},analyzeSubtitles:function(e,t){const r=t.subtitlesBurnLevel||c.c.ALWAYS,n=e.codec,i=!!e.key&&void 0===n&&t.transcodeServer.get("isCloud"),s=t.transcodeServer.get("isCloud")&&("vtt"===n||"eia_608"===n);return(0,l.c)("[MDE] Subtitle codec:",n),(0,l.c)("[MDE] Burn level:",r),i?((0,l.c)("[MDE] Using sidecar subtitles %s",e.key),{useSidecarSrtSubtitles:!0}):s?{canDirectPlay:!0}:r===c.c.NEVER?{useSoftSubtitles:!1}:r===c.c.ALWAYS?(l.c.warn("[MDE] Direct play failed; asked to always burn subtitles"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles:burnLevelAlways",canDirectStreamVideo:!1}):t.transcodeServer.supports("softSubtitles")?(0,h.c)(n)?(l.c.warn("[MDE] Soft subtitles failed; bitmap subtitles"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):/^(ass|ssa)$/i.test(n)&&r===c.c.AUTO?(l.c.warn("[MDE] Soft subtitles failed; ASS subtitles"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):/^eia_608$/i.test(n)?(l.c.warn("[MDE] Soft subtitles failed; Closed captioning"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):t.transcodeServer.supports("softSubtitlesWithDirectPlay")?t.allowDirectStreamVideoWithSoftSubtitles?{useSoftSubtitles:!0}:{useSoftSubtitles:!0,canDirectStreamVideo:!1}:(l.c.warn("[MDE] Direct play failed; %s subtitles",n),t.allowDirectStreamVideoWithSoftSubtitles?{useSoftSubtitles:!0,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles"}:{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):(l.c.warn("[MDE] Direct play failed; server support requires burn subtitles"),l.c.warn("[MDE] Soft subtitles failed; server version"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles:softSubtitlesUnsupported",canDirectStreamVideo:!1})},canPlay:function(e,t){const r=this.validateParts(e,t)||this.validateTranscoder(e,t);return r?{canPlay:!1,errorMessage:r}:{canPlay:!0}},validateParts:function(e,t){const r=function(e){const t=[];return Array.isArray(e)||(e=[e]),a().each(e,(e=>{const r=e.Part;r&&a().each(r,(e=>{!1!==e.exists&&!1!==e.accessible||t.push(e)}))})),t}(e.media);if(!r.length)return;l.c.warn("[MDE] Unable to play; missing parts");const n=a().first(r);return 1===Number(n.exists)?(0,f.c)("Please check the permissions for this file."):(0,f.c)("Please check that the file exists and the necessary drive is mounted.")},validateTranscoder:function(e,t){if(e.canDirectPlay)return;const r=t.type,n=r===g.c.types.MUSIC,i=r===g.c.types.VIDEO,s=t.transcodeServer,o=s.get("transcoderAudio"),c=s.get("transcoderVideo");let d;if(n||"track"===t.item.get("type")){if(d=(0,f.c)("This server is not powerful enough to convert audio."),i&&!c)return l.c.warn("[MDE] Unable to play; server unable to transcode music using video transcoder"),d;if(n&&!o)return l.c.warn("[MDE] Unable to play; server unable to transcode music using audio transcoder"),d}else if(i){const r=(0,f.c)("This server is not powerful enough to convert video. You may be able to enable playback by increasing your quality setting."),n=(0,f.c)("This server is not powerful enough to convert video. Playback qualities are limited because an indirect connection is being used."),i=e.canDirectStreamVideo||!s.get("transcoderVideoRemuxOnly");if(d=(0,f.c)("This server is not powerful enough to convert video."),!c||!i){if(l.c.warn("[MDE] Unable to play; server unable to transcode video"),t.quality){if(t.quality.index===y.c.ORIGINAL)return d;const e=a().clone(t);return e.quality=a().extend({index:y.c.ORIGINAL},a().pick(t.quality,"attribute")),this.getMediaDecision(e).canDirectPlay?r:"relay"===s.get("maxUploadBitrateReason")?n:d}return r}}},getEffectiveQuality:function(e,t,r){const n=r.quality,i={},s={};if(e.bitrate||l.c.warn("[MDE] Unable to determine effective quality; re-analyze the media if possible"),r.type===g.c.types.VIDEO){i.bitrate=e.bitrate,i.videoResolution=y.c.getHeightFromResolution(e.videoResolution);const a=this.getPrimaryStreamProperty(t,"maxBitrate",r);if(a){const t=(0,p.c)(e),r=t?t.bitrate:e.bitrate;i.bitrate=Math.min(r,a),s.maxVideoBitrate=a}if(n&&n.videoResolution){const e=y.c.getResolutionFromSize(n.videoResolution),t=y.c.getHeightFromResolution(e);i.videoResolution=Math.min(i.videoResolution,t)}}else if(r.type===g.c.types.MUSIC){i.bitrate=e.bitrate;const n=this.getPrimaryStreamProperty(t,"maxBitrate",r);n&&(i.bitrate=Math.min(e.bitrate,n),s.musicBitrate=n)}return i.transcoderQualityOptions=s,i},getPrimaryStreamProperty:function(e,t,r){const n=e[g.c.getStreamByType(r.type)];let i=e[t];return null==i&&n&&(i=n[t]),i},getMediaTitle:function(e){let t=e.title||e.videoResolution||e.bitrate||e.container;const r=a().compact([e.container,e.videoCodec,e.audioCodec]),n=(0,p.c)(e);return n&&r.push(n.level,n.profile),r.length&&(t+=" ("+r.join(", ")+")"),t},getDecisionLogs:function(e){const t={canPlay:e.canPlay,canDirectPlay:e.canDirectPlay},r=e.canDirectStreamVideo;null!=r&&(t.canDirectStreamVideo=r);const n=e.canDirectStreamAudio;null!=n&&(t.canDirectStreamAudio=n);const i=e.useSoftSubtitles;null!=i&&(t.useSoftSubtitles=i);const s=e.bitrate;null==s||a().isNaN(s)||(t.bitrate=s);const o=e.videoResolution;return null==o||a().isNaN(o)||(t.videoResolution=o),t},getBestDecision:function(e){const t=a().last(this.sortDecisions(e));return(0,l.c)("[MDE] Selected %s to play:",this.getMediaTitle(t.media),this.getDecisionLogs(t)),t},sortDecisions:function(e){return a().chain(e).reverse().sortBy(this.preferHigherBitrate,this).sortBy(this.preferMoreAudioChannels,this).sortBy(this.preferDirectStreamAudio,this).sortBy(this.preferHigherResolution,this).sortBy(this.preferDirectStreamVideo,this).sortBy(this.preferDirectPlayMatchingPreferredProtocol,this).sortBy(this.preferDirectPlay,this).sortBy(this.preferHigherResolutionIfCapable,this).sortBy(this.preferCloudIfRemote,this).sortBy(this.preferDirectPlayOrDirectStreamIfUHD,this).sortBy(this.preferPlayable,this).value()},preferPlayable:function(e){return void 0===e.canPlay?null:e.canPlay},preferDirectPlayOrDirectStreamIfUHD:function(e){const t=e.media.height;if(void 0===t)return null;const r=y.c.getResolutionFromHeight(t);return!/^\d+k$/i.test(r)||e.canDirectPlay||e.canDirectStreamVideo},preferCloudIfRemote:function(e){const t=e.media.proxyType===o.c.CLOUD;return e.transcodeServer.get("isPrivateConnection")?!t:t},preferHigherResolutionIfCapable:function(e){const t=e.transcodeServer,r=t.get("transcoderVideo"),n=t.get("transcoderVideoRemuxOnly");return r&&!n&&(e.canDirectPlay||e.canDirectStreamVideo)?this.preferHigherResolution(e):null},preferDirectPlay:function(e){return void 0===e.canDirectPlay?null:e.canDirectPlay},preferDirectPlayMatchingPreferredProtocol:function(e){return e.canDirectPlay&&e.media.protocol&&e.preferredDirectPlayProtocol?e.media.protocol===e.preferredDirectPlayProtocol:null},preferDirectStreamVideo:function(e){return void 0===e.canDirectStreamVideo?null:e.canDirectStreamVideo},preferHigherResolution:function(e){return void 0===e.videoResolution?null:e.videoResolution},preferDirectStreamAudio:function(e){return void 0===e.canDirectStreamAudio?null:e.canDirectStreamAudio},preferMoreAudioChannels:function(e){const t=e.media.audioChannels;return void 0===t?null:t},preferHigherBitrate:function(e){return void 0===e.bitrate?null:e.bitrate}}},86796:(e,t,r)=>{"use strict";r.d(t,{Ah:()=>o,i_:()=>a}),r(79268);var n=r(38828);const i={};let s=!1;function a(e,t){const r=t&&!s,a=i[e];return r&&a&&a.length?((0,n.c)("[MediaElement] Found existing media element to use. type: %s",e),a.shift()):((0,n.c)("[MediaElement] Creating new media element. type: %s",e),document.createElement(e))}function o(e){const t=e.nodeName.toLowerCase();(0,n.c)("[MediaElement] Releasing media element to pool. type: %s",t),i[t]||(i[t]=[]),i[t].push(e)}},57288:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n=!1;function i(e){const t={};return(...r)=>{const i=JSON.stringify(r);if(t.hasOwnProperty(i))return n&&window.console.log("[memoize] %s: fetching cache for key %s",e.name,i),t[i];{n&&window.console.log("[memoize] %s: setting cache for key %s",e.name,i);const s=e(...r);return t[i]=s,s}}}},85976:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(89064);function s(e){const{providerIdentifier:t=n.Qh,serverIdentifier:r,key:s}=e;let a=r!==i.A?`server://${r}/${t}`:`provider://${t}`;return s&&(a=`${a}${s}`),a}},63188:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(87552);function i(e){return(0,n.c)(e)}},87552:(e,t,r)=>{"use strict";function n(e){return e>0?`${e} kbps`:""}r.d(t,{c:()=>n})},96588:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n=["B","KB","MB","GB","TB"],i=function(e,t=2){if(0===e)return`${(0).toFixed(t)} ${n[0]}`;const r=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return`${(e/Math.pow(1024,r)).toFixed(t)} ${n[r]}`}},42592:(e,t,r)=>{"use strict";function n(e){if(!e)return"";const t=e.indexOf("/");return-1!==t?e.substr(t+1):e}r.d(t,{c:()=>n})},71264:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t){return e?/^\d+$/.test(e)?e+((null==t?void 0:t.length)?t[0]:"p"):e.toUpperCase():""}},96736:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(87552);const i=function(e){return e>=100?function(e){if(!(e>0))return"";let t=e/1e3;return t=t>=.1?Number(t.toFixed(1)):t,t+" Mbps"}(e):(0,n.c)(e)}},25024:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(39835),i=r(59396),s=r(71264),a=r(96736);const o=function(e){if(e.index===n.c.CONVERT_AUTOMATICALLY)return(0,i.c)("Convert Automatically");if(e.index===n.c.ORIGINAL)return(0,i.c)("Original");const t=e.bitrate||e.maxVideoBitrate,r=e.videoResolution;if(!t&&!r)return(0,i.c)("Unknown");const o=[];if(t&&o.push((0,a.c)(t)),r&&(!t||t>=1e3)){const e=n.c.getResolutionFromSize(r);o.push((0,s.c)(e))}const c=o.join(", ");return e.description?c+" "+e.description:c}},69956:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(89064),s=r(96504);const a=/\/([^/]+)([^$]+)?/,o={};function c(e){if(o[e])return o[e];const{protocol:t,host:r,pathname:c,search:l}=s.c.parseUri(e),d="provider:"===t,u="server:"===t;if(!d&&!u)throw new Error("Source identifier is lacking provider or server scheme");const p=c.replace(/\/$/,"")||void 0,m=(null==p?void 0:p.match(a))||[],h=p&&"media"===m[1],y=h?n.Qh:m[1],g=d||h?p:m[2],f=g?g.slice(g.lastIndexOf("/")+1):void 0;return o[e]={isServer:u,serverIdentifier:d?i.A:r,providerIdentifier:d?r:y||n.Qh,key:g?`${g}${l}`:"",ratingKey:f||""},o[e]}},37492:(e,t,r)=>{"use strict";function n(e){const t=null==e?void 0:e.startsWith("plex:/");if(!e||!t)return;const r=e.split("/");return r[r.length-1]}r.d(t,{c:()=>n})},23880:(e,t,r)=>{"use strict";function n(e,t){const r=t?8*Math.round(t/8):0,n=e?8*Math.round(e/8*(9/16)):0;return Math.max(r,n)}r.d(t,{c:()=>n})},43976:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(96096),i=r(67520),s=r(5776),a=r(3520),o=r(69820),c=r(65988),l=r(94512),d=r(32096);const u={movie:n.default,show:i.default,season:i.default,episode:i.default,artist:s.default,album:a.default,track:a.default,photo:o.default,photoalbum:o.default,clip:c.default,station:l.default,audiobook:d.default}},86980:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(69956);function s(e){const{providerIdentifier:t}=(0,i.c)(e);return n._u(t,[n._0,n.$9])}},79084:(e,t,r)=>{"use strict";r.d(t,{KG:()=>n,cp:()=>s,ec:()=>i});const n=-1,i=10,s=function(e){return e.userRating===i}},72500:(e,t,r)=>{"use strict";function n(e){if(e)return e.relay?"relayed":e.isLoopback?"localhost":e.isPrivate?"local":"remote"}r.d(t,{c:()=>n})},41192:(e,t,r)=>{"use strict";function n(e){return e.isCloud?"online":e.isShared?"shared":"owned"}r.d(t,{c:()=>n})},24952:(e,t,r)=>{"use strict";r.d(t,{uG:()=>o,cp:()=>c}),r(38828);var n=r(99112);let i;function s(){if(void 0===i){const e=window.location.search.match(new RegExp("performanceReportingHost=([^&=]+)"));i=(e&&e[1]?decodeURIComponent(e[1]):n.c.performanceReportingHost)||null}return i}var a=r(95188);const o=`${a.Yl}-start`,c=function(e=s){const t={};function r(r){return r&&!t[r]&&(t[r]=/^(client|playback):/.test(r)||!!e()),!!r&&t[r]}const n={startPeriod:e=>n.mark(`${e}-start`),endPeriod:(e,t)=>n.measure(e,t||`${e}-start`),mark(e){let t=null;if(r(e)){window.performance.mark(e);const r=window.performance.getEntriesByName(e);t=r[r.length-1]}return t},measure(e,t,n){if(r(e))try{window.performance.measure(e,t,n),t!==o&&window.performance.clearMarks(t);const r=window.performance.getEntriesByName(e);return r[r.length-1]}catch(e){}},measureStartupDuration(e){const t=`${a.Yl}-${e}`;if(window.performance.getEntriesByName(t).length)return;const r=n.measure(t,o);return r?r.duration-this.getMeasureDurationTotal(a.gl):void 0},getMeasureDurationTotal:e=>window.performance.getEntriesByName(e).reduce(((e,t)=>e+t.duration),0)};return n}()},94336:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(34800);function i(e){if(null==e)return;const t=Math.round(e/1e3);let r;return r=t>=3600?300:60,(0,n.c)(t,r)}},15036:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(52180),i=r(38828);const s=function(){const e=Date.now(),t=(0,n.WI)("sessionStats");i.c.debug("[Metrics] Updating session last interaction time"),t.save("lastInteractionTime",e)}},43352:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(95720),i=r.n(n);r(56976);const s=/\s+/,a=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(const i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(s.test(r)){const i=r.split(s);for(let r=0,s=i.length;r<s;r++)e[t].apply(e,[i[r]].concat(n));return!1}return!0},o=function(e,t){let r,n=-1;const i=e.length,s=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a,o);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t)}},c={on:function(e,t,r){return a(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!a(this,"once",e,[t,r])||!t)return this;const n=this,s=i().once((function(){n.off(e,s),t.apply(this,arguments)}));return s._callback=t,this.on(e,s,r)},off:function(e,t,r){let n,s,o,c,l,d,u;if(!this._events||!a(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;const p=e?[e]:i().keys(this._events);for(c=0,l=p.length;c<l;c++)if(e=p[c],o=this._events[e],o){if(this._events[e]=n=[],t||r)for(d=0,u=o.length;d<u;d++)s=o[d],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&n.push(s);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;const t=[].slice.call(arguments,1);if(!a(this,"trigger",e,t))return this;const r=this._events[e],n=this._events.all;return r&&o(r,t),n&&o(n,arguments),this},stopListening:function(e,t,r){let n=this._listeningTo;if(!n)return this;const s=!t&&!r;r||"object"!=typeof t||(r=this),e&&((n={})[e._listenId]=e);for(const a in n)(e=n[a]).off(t,r,this),(s||i().isEmpty(e._events))&&delete this._listeningTo[a];return this},hasListener:function(e){const t=this._events&&this._events[e];return Array.isArray(t)&&t.length>0}};i().each({listenTo:"on",listenToOnce:"once"},(function(e,t){c[t]=function(t,r,n){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=i().uniqueId("l"))]=t,n||"object"!=typeof r||(n=this),t[e](r,n,this),this}})),c.bind=c.on,c.unbind=c.off;const l=c},56976:(e,t,r)=>{"use strict";r(79268)},88576:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=function(e){return e=parseInt(e,10),i().isNaN(e)?"":(e<10?"0":"")+e}},34800:(e,t,r)=>{"use strict";function n(e,t){let r=e/t;return r=Math.round(r),r*=t,r}r.d(t,{c:()=>n})},29377:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});const n=e=>Function.prototype.toString.call(e),i=n(Object);function s(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;const r=t.constructor;return"function"==typeof r&&r instanceof r&&n(r)===i}},87228:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(38828);function a(e,t){Array.isArray(t)?i().each(t,e):e(t)}const o={parseXML:r(77015).c,replaceXMLElementNames:function(e,t,r){Array.isArray(t)||(t=[t]);const n=t.join("|"),i=new RegExp("<("+n+")","g"),s=new RegExp("</("+n+")>","g");return(e=e.replace(i,"<"+r+' elementName="$1"')).replace(s,"</"+r+">")},parseEncodedString:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];if(null==r)e[t]="";else try{e[t]=decodeURIComponent(r)}catch(e){}}}),t)},parseInteger:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];e[t]=null==r||""===r?0:parseInt(r,10)}}),t)},parseFloat:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];e[t]=null===r||""===r?0:parseFloat(r)}}),t)},parseBoolean:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];e[t]=1===Number(r)||"true"===r}}),t)},parseArray:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];Array.isArray(r)||(e[t]=[r])}else e[t]=[]}),t)},parseQueryString:function(e,t,r){e&&(r||(r="&"),a((function(t){if(!e.hasOwnProperty(t))return;let n=e[t];var a;i().isObject(n)||(i().isString(n)?(n=n.trim().replace(/^(\?|#)/,""),e[t]=n?(a=n.split(r),i().reduce(a,(function(e,t){const r=t.split("=");let n=r[0],i=r[1];try{n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i}catch(e){s.c.warn("Unable to decode query string at "+n)}return e}),{})):{}):e[t]={})}),t))}}},1800:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e?Array.isArray(e)?e:[e]:[]}},98352:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return 1===Number(e)||"true"===e}},33964:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return null==e||""===e?0:parseInt(e,10)}},81240:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(38828),i=r(90376);const s=function(e,t={}){try{return JSON.parse(e)}catch(r){const s=(0,i.c)(e)?e.substring(0,50):"no response";return n.c.warn(`[Parser] Unable to parse JSON: ${r.message} (${s})`),t}}},11360:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(38828),i=r(29377),s=r(90376);const a=function(e,t){if(t||(t={}),(0,i.c)(e))return e;if(!(0,s.c)(e))return{};if(!(e=e.trim().replace(/^(\?|#)/,"")))return{};const r=t.separators&&t.separators.join("")||t.separator||"&",a=new RegExp(`[${r}]+`);return e.split(a).reduce(((e,t)=>{let[r,i]=t.split("=");try{r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i}catch(e){n.c.warn(`[Parser] Unable to decode query string at ${r}`)}return e}),{})}},64616:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return null==e?"":String(e)}},77015:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(20688),i=r.n(n),s=r(38828);let a;const o=function(e){const t={};let r;if(!e)return s.c.warn("[Parser] Empty XML source"),t;a=a||new(i())({attributePrefix:"",emptyNodeForm:{},ignoreRoot:!0});try{r=e&&a.xml2js(e)}catch(e){s.c.warn("[Parser] Unable to parse XML: "+e.message)}return r||t}},17312:(e,t,r)=>{"use strict";r.d(t,{o:()=>s,c:()=>a});var n=r(12612);let i;const s=["Video","Track","Photo","Playlist"],a=function(e,t){const r=t&&t.includeDirectories,a=function(e,t,r){Array.isArray(t)||(t=[t]);const n=t.join("|"),i=new RegExp(`<(${n})`,"g"),s=new RegExp(`</(${n})>`,"g");return e.replace(i,`<${r} elementName="$1"`).replace(s,`</${r}>`)}(e,r?["Directory",...s]:s,"Metadata");return r?a:function(e){i||(i=(0,n.cB)().map((e=>e.typeString)).join("|"));const t=new RegExp(`<Directory([^>]*?)type="(${i})"([\\s\\S]*?)</Directory>`,"gm"),r=new RegExp(`<Directory([^>]*?)type="(${i})"([\\s\\S]*?)/>`,"gm");return e.replace(t,'<Metadata$1type="$2" elementName="Directory"$3</Metadata>').replace(r,'<Metadata$1type="$2" elementName="Directory"$3/>')}(a)}},54560:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e?"1":"0"}},64984:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e={},t={}){return function(e,t){const r=Object.keys(e);return t.orFields&&t.andFields&&r.sort(((e,r)=>t.orFields.includes(e)&&t.andFields.includes(r)?-1:t.andFields.includes(e)&&t.orFields.includes(r)?1:0)),r}(e,t).reduce(((r,n,i)=>{let s=t.separator||"&";return 0===i?s="":t.orFields&&t.orFields.includes(n)?s="|":t.andFields&&t.andFields.includes(n)&&(s="&"),r+`${s}${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`}),"")}},33040:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(95720),i=r.n(n),s=r(1800),a=r(98352),o=r(38828);var c=r(33964),l=r(81240);var d=r(11360),u=r(64616),p=r(77015),m=r(54560);var h=r(64984);const y={parseType:function(e,t,r){const n=this.getByType("parse",e,this._parseTypeMap);return n?n(t,r):t},stringifyType:function(e,t,r){if(i().isString(t))return t;if(null==t)return"";const n=this.getByType("stringify",e,this._stringifyTypeMap);return n?n(t,r):t},getByType:function(e,t,r){if(r&&i().has(r,t))return r[t];const n=e+(t.charAt(0).toUpperCase()+t.slice(1));return i().has(this,n)?(r[t]=this[n],this[n]):void 0},parseBoolean:a.c,stringifyBoolean:m.c,parseInteger:c.c,parseFloat:function(e){return null==e||""===e?0:window.parseFloat(e)},parseString:u.c,parseEncodedString:function(e){if(null==e)return"";try{return decodeURIComponent(e)}catch(t){return o.c.warn("[Parser] Unable to parse encoded string"),e}},parseArray:s.c,parseList:function(e){return e?Array.isArray(e)?e:e.split(","):[]},stringifyList:function(e){return e.join(",")},parseQueryString:d.c,stringifyQueryString:h.c,parseJSON:l.c,parseXML:p.c,reset:function(){this._parseTypeMap={json:this.parseJSON,xml:this.parseXML},this._stringifyTypeMap={}}};y.reset();const g=y},26684:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(38828),a=r(51956);const o={ORIGINAL:-1,CONVERT_AUTOMATICALLY:-2,qualities:{},getQualityByIndex:function(e){if(e===this.CONVERT_AUTOMATICALLY)return{index:this.CONVERT_AUTOMATICALLY};if(e<0)return{index:this.ORIGINAL};const t={index:e};return i().each(this.qualities,(function(r,n){t[n]=i().result(this.qualities,n)[e]}),this),t},getQualityCount:function(){const e=i().first(i().keys(this.qualities));return i().result(this.qualities,e).length},getQualityAttribute:function(e){const t=(0,a.c)(e,e.server.get("isPrivateConnection"));return"video"!==this.type?this.type+"!"+t:t},getSyncQualityAttribute:function(){return"syncQuality!"+this.type},getCurrentQuality:function(e,t,r){const n=this.getQualityAttribute(e);let a=t.get(n);return a>=this.getQualityCount()&&(s.c.warn("Quality index "+a+" is out of bounds"),a=i().result(t,"defaults")[n],r({[n]:a})),i().extend(this.getQualityByIndex(a),{attribute:n})},getAvailableQualities:function(e){e||(e={});const t=e.lowestQualityIndex;let r=e.highestQualityIndex;const n=e.comparator,i=[];r===this.ORIGINAL&&(r=void 0);for(let e=0,s=this.getQualityCount();e<s;e++)if(!(t&&e<t)){if(r&&e>r)return i;if(n&&n.call(this,e))return i;i.push(this.getQualityByIndex(e))}return i},getResolutionFromSize:function(e){const t=e.split("x"),r=parseInt(t[1],10);return this.getResolutionFromHeight(r)},getResolutionFromHeight:function(e){return e>2560?"8k":e>1100?"4k":e>720?"1080":e>576?"720":e>480?"576":e>360?"480":"sd"},getHeightFromResolution:function(e){switch(e){case"8k":return 5120;case"4k":return 2560;case"1080":return 1080;case"720":return 720;case"576":return 576;case"480":return 480;default:return 360}},getNearestIndex:function(e,t){if(!t)return this.ORIGINAL;let r=e.indexOf(t);if(r<0){r=0;for(let n=0,i=e.length;n<i&&!(e[n]>t);n++)r=n}return r}}},10532:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(760);const i=function(e){return e.repeatOne?n.x:e.repeatAll?n.y2:n.KE}},51956:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(28476);function i(e,t){return(0,n.c)(e,t)?"localQuality":"remoteQuality"}},28476:(e,t,r)=>{"use strict";function n(e,t){const r=e.toJSON?e.toJSON():e,{isExtra:n,guid:i}=r;return!(n&&!/^file:\/\//.test(i))&&t}r.d(t,{c:()=>n})},39835:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(95720),i=r.n(n),s=r(23880),a=r(26684);const o=i().extend({},a.c,{type:"video",qualities:{bitrate:[64,96,208,320,720,1500,2e3,3e3,4e3,8e3,1e4,12e3,2e4],videoResolution:["220x128","220x128","284x160","420x240","576x320","720x480","1280x720","1280x720","1280x720","1920x1080","1920x1080","1920x1080","1920x1080"],videoQuality:[10,20,30,30,40,60,60,75,100,60,75,90,100]},getAvailableQualitiesFor(e,t,r){if(!e||!t)return[];if(Array.isArray(e)||(e=[e]),0===e.length)return[];const n=t.get("transcoderVideo"),a=t.get("transcoderVideoRemuxOnly"),o=this.getMaximumResolution(e);if(!n||a||!o)return[];const c=t.get("maxUploadBitrate"),l=i().extend({},r,{comparator:function(e){if(c&&this.qualities.bitrate[e]>c)return!0;const t=this.qualities.videoResolution[e].split("x");return(0,s.c)(t[0],t[1])>o}});return this.getAvailableQualities(l)},getBestAvailableQuality:function(e,t){return 0===t.length?o.ORIGINAL:t.find((t=>t.index===e.index))?e.index:i().last(t).index},getNearestIndexToBitrate:function(e){return this.getNearestIndex(this.qualities.bitrate,e)},getMinimumQuality:function(e,t){return(e===o.ORIGINAL?Number.MAX_VALUE:e)<(t===o.ORIGINAL?Number.MAX_VALUE:t)?e:t},getMaximumQuality:function(e,t){return this.getMinimumQuality(e,t)===e?t:e},getMaximumResolution:function(e){return e.reduce((function(e,t){if(!t.width&&!t.height)return e;const r=(0,s.c)(t.width,t.height);return null===e||r>e?r:e}),null)},isExplicitQuality:function(e){return e!==o.ORIGINAL&&e!==o.CONVERT_AUTOMATICALLY}}),c=o},54064:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(95720),i=r.n(n),s=r(91600);function a(e,t){const r=i().invert(e);return i().reduce(e,((e,n)=>(e[n]=t[r[n]],e)),{})}const o={playing:"playing",paused:"paused",stopped:"paused",error:"paused",buffering:"playing"},c=new(s.c.extend({types:{VIDEO:"video",MUSIC:"music",PHOTO:"photo"},elements:{VIDEO:"video",MUSIC:"audio",PHOTO:"photo"},streams:{VIDEO:"video",MUSIC:"audio",PHOTO:"photo"},states:{STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing",BUFFERING:"buffering",ERROR:"error"},slideshowStates:{PLAYING:"playing",PAUSED:"paused"},castStates:{ERROR:"IDLE",STOPPED:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING",BUFFERING:"BUFFERING"},mediaStates:{LOADING:"LOADING",BUFFERING:"BUFFERING",READY:"READY",ERROR:"ERROR"},initialize(){this.typeByElement=a(this.elements,this.types),this.elementByType=a(this.types,this.elements),this.typeByStream=a(this.streams,this.types),this.streamByType=a(this.types,this.streams),this.statebyCastState=a(this.castStates,this.states),this.castStateByState=a(this.states,this.castStates)},getTypeByElement(e){return this.typeByElement[e]},getElementByType(e){return this.elementByType[e]},getTypeByStream(e){return this.typeByStream[e]},getStreamByType(e){return this.streamByType[e]},getStateByCastState(e){return this.statebyCastState[e]},getCastStateByState(e){return this.castStateByState[e]},getSlideshowStateByState:e=>o[e]}))},6552:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});const n="placeholder-standard",i="placeholder-square",s="placeholder-widescreen",a={movie:n,show:n,season:n,episode:s,artist:i,album:i,track:i,photo:i,photoalbum:i,clip:s,playlist:i,playlistFolder:i,channel:i,channelDirectory:i,folder:"placeholder-folder",friend:"placeholder-friend",device:i,poster:n,art:s,collection:n}},77452:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={sizes:{movie:"portrait",show:"portrait",season:"portrait",episode:"landscape",artist:"square",album:"square",track:"square",photo:"square",photoalbum:"square",clip:"landscape",playlist:"square",playlistFolder:"square",channel:"square",channelDirectory:"square",folder:"portrait",friend:"square",poster:"portrait",art:"landscape",collection:"portrait"},ratios:{portrait:1/1.5,square:1,landscape:16/9},getRatioByType:function(e){return this.ratios[this.sizes[e]]},getPosterWidthUsingRatio:function(e,t){return Math.round(this.ratios[e]*t)},getPosterHeightUsingRatio:function(e,t){return Math.round(this.ratios[e]&t)},getPosterWidth:function(e,t){return Math.round(t*this.getRatioByType(e))},getPosterHeight:function(e,t){return Math.round(t/this.getRatioByType(e))}}},95008:(e,t,r)=>{"use strict";r.d(t,{G8:()=>i,uG:()=>s.c,qk:()=>a.c}),r(51923),r(23056);var n=r(8844);function i(e=n.c){return"ios"===e.platformID}var s=r(49716),a=r(57652)},51923:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(8844);function i(e=n.c){return"chrome"===e.id}},23056:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(8844);function i(e=n.c){return"edge"===e.id}},49716:(e,t,r)=>{"use strict";function n(){return!1}r.d(t,{c:()=>n})},57652:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(8844);function i(e=n.c){return"safari"===e.id}},99052:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(49716);function i(){return!(0,n.c)()}},47840:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37588),i=r.n(n);function s(e){const t=i().Deferred();return"object"==typeof e&&"then"in e?e.then(t.resolve,t.resolve):t.resolve(e),t.promise()}},43864:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37588),i=r.n(n);const s=function(e){const t=i().Deferred();return e.then(t.resolve,t.reject,t.notify),{promise:t.promise(),cancel:function(){t.reject({isCanceled:!0})}}}},15208:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37588),i=r.n(n);const s=function(e,t){const r=i().Deferred(),n=(new Date).getTime()+t;let s;function a(){const e=(new Date).getTime(),t=Math.max(n-e,0);window.setTimeout(s,t)}return e.then(((...e)=>{s=()=>r.resolve(...e)}),((...e)=>{s=()=>r.reject(...e)})),e.then(a,a),r.promise()}},65284:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(37588),i=r.n(n),s=r(47840);const a=function(e){return i().when(...e.map(s.c))}},17736:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(99396),i=r(90044),s=r(35860),a=r(59396),o=r(53272);const c=r(99028).c.extend({name:"LegacyLibraryProviderModel",defaults(){const e=this.server,t=e.get("isFullServer"),r=e.get("isFullOwnedServer"),c=[{type:i.c.CONTENT,key:"/library/sections"},{type:i.c.MATCH,key:"/library/matches"},{type:i.c.METADATA,key:"/library/metadata"}];return t&&c.push({type:i.c.SEARCH,key:"/hubs/search"},{type:i.c.PLAY_QUEUE,key:"/playQueues"},{type:i.c.PLAYLIST,key:"/playlists"},{type:i.c.TIMELINE,key:"/:/timeline"},{type:i.c.ACTIONS,actions:[{id:n.cR,key:"/:/scrobble",reverseKey:"/:/unscrobble"},{id:n.c7,key:"/:/rate"}]}),r&&c.push({type:i.c.MANAGE}),{identifier:s.Qh,title:(0,a.c)("Library"),types:["video","audio","photo"],protocols:r?["stream","download"]:["stream"],features:new o.c(c,{parse:!0,server:e})}}});function l(e,t){!t.get("isCloud")&&e.forEach((e=>{e.set({isPending:!1,isPopulated:!0})})),t.get("isCloud")||e.get(s.Qh)||e.add(new c({isPending:!1,isPopulated:!0},{server:t}))}},19948:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(12612),i=r(96504);function s(e,t){const r=["/library/sections",e,"all"];return t===n.Ww?i.c.join(r):i.c.join(r,{type:n.GG(t).id})}},97664:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(89064);function i(e,t){return e===n.A?`provider://${t}`:`server://${e}/${t}`}},30496:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(35860);const i=function(e,t){const r=t||e;return n._u(r,n._0)?n._0:r}},80096:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(66109),i=r(35860),s=r(42728);const a=function({protocol:e,protocolCapabilities:t=[],providerIdentifier:r,userFeaturesByUUID:a,isWatchTogether:o=!1}){if(e!==n.y&&e!==n.o)return!1;if(o)return!1;const c=i._u(r,i.Qh),l=i._u(r,[i._0,i.$9]),d=i._u(r,i.y6),u=i._u(r,i.Im),p=i._u(r,[i.Sg]),m=e===n.y||a[s.ae],h=e===n.y||t.includes("provider-playback");return!!(c||l&&m||d&&h||u&&h||p&&h)}},64036:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(58938),c=r(52180),l=r(55672),d=r(54268),u=r(91600),p=r(57639),m=r(38828),h=r(43352),y=r(8284);const g=u.c.extend({mixins:h.c,url(){const e=this.server.get("activeConnection");if(!e)return;const t=e.id.replace(/^http/,"ws");return this.server.resolveUrl("/:/websockets/notifications",{connection:new l.c({uri:t}),appendToken:!0,appendHeaders:this.appendHeaders})},initialize(e){a().bindAll(this,"onOpen","onClose","onError","onMessage","getMessageTypes"),this.server=e.server,this.appendHeaders=e.appendHeaders||!1},open(){this.socket&&this.close(),this._deferred=i().Deferred();const e=a().result(this,"url");return e?(this.socket=new window.WebSocket(e),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onerror=this.onError,this.socket.onmessage=this.onMessage,this._deferred.promise()):this._deferred.reject().promise()},close(){this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null,this._deferred&&"pending"===this._deferred.state()&&this._deferred.reject())},testConnection(){if(!this.server.get("connected"))return;const e=this.server.get("desktop").get("update");e&&e.get("state")===p.INSTALLING&&this.server.set("connected",null),this.server.trigger("error:connection",this.server)},onOpen(e){const t=c.WI("appStore"),r=this.server.entityID();r&&t.dispatch((0,d.I3)({serverEntityID:r,event:e})),this.server.trigger("socket:websocket",{opened:!0}),this.trigger("open",this.server,e),this._deferred.resolve(this.server,e)},onClose(e){this.close();const t=c.WI("appStore"),r=this.server.entityID();r&&t.dispatch((0,d.Wg)({serverEntityID:r,event:e})),this.server.trigger("socket:websocket",{closed:!0}),this.trigger("close",this.server,e),this._deferred.reject(this.server,e),this.testConnection()},onError(e){this.close(),this.server.trigger("socket:websocket",{error:!0}),this.trigger("error",this.server,e),this._deferred.reject(this.server,e),this.testConnection()},onMessage(e){let t;try{t=JSON.parse(e.data)}catch(t){return void m.c.warn("[Connections] Error formatting message:\n%s",e.data)}const r=!!t._elementType,n=r?a().first(t._children):t.NotificationContainer;if(n){const e=this[r?t.type:n.type];let i;i=r?Array.isArray(n)?n:[n]:function(e,t){return(-1===t.indexOf(e.type)?[]:function(e){switch(e.type){case y.Ip:return e.Setting;case y.i0:return e.TimelineEntry;case y.bL:return e.StatusNotification;case y.Ou:return e.ProgressNotification;case y.U$:return e.PlaySessionStateNotification;case y.gJ:return e.BackgroundGeneratorStateNotification;case y.mW:return e.VersionStateNotification;case y.Sm:return e.BackgroundProcessingQueueEventNotification;case y.yq:case y.um:case y.ug:return e.TranscodeSession;case y.At:return e.AutoUpdateNotification;case y.El:return e.ReachabilityNotification;case y.EN:return e.AccountUpdateNotification;case y.Cc:return e.ActivityNotification;case y.IB:return e.MediaGrabberDeviceNotification;case y.GA:return e.MediaProviderNotification;case y.ZX:return e.MediaProviderContentNotification;case y.iI:return e.LogSentNotification;case y.NT:return e.MediaProviderSubscriptionNotification;case y.uc:return e.ClientDecisionRequestEventNotification}}(e))||[]}(n,this.getMessageTypes()),i.forEach((t=>{try{this.trigger("message",t)}catch(e){m.c.error("[Connections] Error when triggering",t,e),o.wx(e,{extra:{message:t}})}if(a().isFunction(e))try{e.call(this,t)}catch(e){m.c.error("[Connections] Error when handling",t,e),o.wx(e,{extra:{message:t}})}}))}}})},8284:(e,t,r)=>{"use strict";r.d(t,{At:()=>P,Cc:()=>i,EN:()=>n,El:()=>y,GA:()=>p,Hq:()=>O,IB:()=>o,Ip:()=>d,NT:()=>h,Ou:()=>u,Sm:()=>a,U$:()=>l,ZX:()=>m,_8:()=>w,bL:()=>g,gJ:()=>s,i0:()=>f,iI:()=>c,mW:()=>I,s7:()=>C,uc:()=>E,ug:()=>v,um:()=>S,yq:()=>b});const n="account",i="activity",s="backgroundGeneratorState",a="backgroundProcessingQueue",o="grabber.device",c="log",l="playing",d="preference",u="progress",p="provider.change",m="provider.content.change",h="provider.subscription.change",y="reachability",g="status",f="timeline",v="transcodeSession.end",b="transcodeSession.start",S="transcodeSession.update",P="update.statechange",I="versionState",E="clientDecision",w="notifyAccountChange",C="notifyWatchTogetherExpire",O="notifyWatchTogetherInvite"},52972:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n);function s(e){const t=i().clone(e);return void 0!==t.last?(t.end=t.last+1,t.size=t.end-t.start):void 0!==t.size?(t.end=t.start+t.size,t.last=t.end-1):void 0!==t.end&&(t.last=t.end-1,t.size=t.end-t.start),t}function a(e,t){return i().filter(i().map(e,s),(function(e){return t?e.size>=0:e.size>0}))}const o={augment:s,difference:function(e,t,r){return e=s(e),t=s(t),a([{start:e.start,last:Math.min(e.last,t.start-1)},{start:Math.max(e.start,t.end),last:e.last}],r)},union:function(e,t,r){if(e=s(e),t=s(t),e.start>t.start){const r=e;e=t,t=r}const n=[e];return t.start<=e.end?n[0].last=Math.max(t.last,e.last):n.push(t),a(n,r)},degap:function(e,t){let r=s(e);return(t=s(t)).size?(r.start>t.end&&(r={start:t.end,end:r.end}),r.end<t.start&&(r={start:r.start,end:t.start}),s(r)):r},each:function(e,t,r){e=s(e);let n=Math.min(e.start,e.end);const i=Math.max(e.start,e.end);for(;n<=i;n++)t.call(r,n)},roundByPage:function(e,t){return e=s(e),s({start:Math.floor(e.start/t)*t,end:Math.ceil(e.end/t)*t})}}},43076:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(2508),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};function u(e,t={}){return(0,i.renderToStaticMarkup)(n.createElement(e,d({},t)))}},66308:(e,t,r)=>{"use strict";r.d(t,{ET:()=>d,Ep:()=>o,Gi:()=>l,Id:()=>g,K:()=>P,M$:()=>w,MF:()=>v,MX:()=>h,PS:()=>S,Q9:()=>c,QP:()=>p,Qj:()=>a,W2:()=>u,ay:()=>E,ec:()=>n,h4:()=>I,kV:()=>b,kX:()=>i,qC:()=>y,qm:()=>f,sT:()=>m,y8:()=>s});const n="general.db.backup",i="general.bundle.clean",s="grabber.grab",a="grabber.assimilate",o="library.delete",c="library.update.section",l="library.refresh.items",d="library.update.item.metadata",u="media.download",p="media.generate.bif",m="media.generate.chapter.thumbs",h="media.generate.intros",y="media.generate.loudness",g="media.generate.music.analysis",f="media.generate.credits",v="media.offline.transcode",b="general.db.optimize",S="provider.device.channelscan",P="provider.epg.load",I="provider.subscriptions.process",E="provider.subscription.refresh",w="subtitle.download"},26960:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(52180),i=r(59501),s=r(26500);function a(e,t=!1){const r=t||"Plex Media Server"===e.get("product"),a=new i.default({machineIdentifier:e.id,friendlyName:e.get("name"),version:r?e.get("productVersion"):void 0,isShared:!e.get("owned"),accessToken:e.get("accessToken"),sourceTitle:e.get("sourceTitle"),publicAddressMatches:e.get("publicAddressMatches"),httpsRequired:e.get("httpsRequired"),platform:e.get("platform"),platformVersion:e.get("platformVersion"),presence:e.get("presence"),home:e.get("home"),serverClass:r?void 0:i.default.serverClasses.SECONDARY,createdAt:e.get("createdAt"),lastSeenAt:e.get("lastSeenAt"),ownerId:e.get("ownerId")},{parent:n.WI("appModel")});return(0,s.c)(a,e),a}},38668:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(9852);function i(){const[,e,t]=(0,n.wn)().match(/^([^:]+):\/\/(.*)$/)||[];return{scheme:e,address:t}}},30137:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95420),i=r(65723);function s(e){return!!e.get("shortVersion")&&(0,i.c)(e.get("shortVersion"),n.default.mediaProvidersServerRoot)}},26500:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);function s(e,t){t.get("connections").each((r=>{const n=[{id:t.server.id}],s=i().extend(r.toJSON(),{sources:n});e.addConnection(s)}))}},62288:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(46207),i=r(59396),s=r(91224);function a(e){const{sourceType:t,sourceServer:r,sourceProvider:a,sourceDirectory:o}=e,c={key:(0,n.c)(t,r.machineIdentifier,a.identifier,o.id),sourceType:t,serverEntityID:r.entityID,machineIdentifier:r.machineIdentifier,providerEntityID:a.entityID,providerIdentifier:a.identifier,providerMetricsIdentifier:a.metricsIdentifier,directoryID:o.id,directoryIcon:o.icon,title:o.title,serverFriendlyName:r.friendlyName,serverSourceTitle:r.sourceTitle,providerSourceTitle:a.sourceTitle,isLocal:r.isConnected&&r.activeConnection&&r.activeConnection.isPrivate,isUnavailable:r.isUnavailable,isOutOfDate:r.isOutOfDate,isUnclaimedServer:r.isConnected&&!r.isClaimed&&!r.isCloud,isFullOwnedServer:r.isFullOwnedServer,isProviderReady:a.isPopulated||null!=a.error||r.isUnavailable||r.isUnauthorized};return r.isCloud?c.isCloud=!0:t===s.uO&&(c.title=(0,i.c)("Live TV & DVR")),c}},86616:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){const{key:t,sourceType:r,machineIdentifier:n,providerIdentifier:i,directoryID:s,directoryIcon:a,title:o,serverFriendlyName:c,serverSourceTitle:l,providerSourceTitle:d,isCloud:u,isFullOwnedServer:p}=e;return{key:t,sourceType:r,machineIdentifier:n,providerIdentifier:i,directoryID:s,directoryIcon:a,title:o,serverFriendlyName:c,serverSourceTitle:l,providerSourceTitle:d,isCloud:u,isFullOwnedServer:p}}},46207:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(97612);function i(e,t,r,i){return(0,n.c)("source",e,t,r,i)}},18168:(e,t,r)=>{"use strict";function n(e,t,...r){if(!t)return;const n=[];n.push(e);for(let e=0,t=r.length;e<t;e++){const t=r[e];t&&n.push(t)}return n.push(t),n.join("--")}r.d(t,{c:()=>n})},6084:(e,t,r)=>{"use strict";r.d(t,{Af:()=>v,MN:()=>o,Qh:()=>s,Qv:()=>p,SF:()=>i,Yh:()=>l,_M:()=>u,cD:()=>g,iy:()=>h,kH:()=>c,o1:()=>y,oB:()=>a,oV:()=>f,q0:()=>d,qe:()=>n,y$:()=>m});const n="servers",i="providers",s="libraries",a="hubs",o="users",c="resources",l="friends",d="homeUsers",u="metadataLists",p="metadataItems",m="mediaSubscriptions",h="liveTVSessions",y="playQueueItems",g="playlistItems",f="transcodeJobs",v="watchTogetherRooms"},10340:(e,t,r)=>{"use strict";r.d(t,{a:()=>i,c:()=>s});var n=r(38828);function i(e,t,r){const n=e.get("entities").get(t);if(n){const e=n.get(r);if(e)return e.get("model")}}function s(e,t,r){const s=i(e,t,r);return s||n.c.warn('An entity does not exist with the type "%s" and id "%s"',t,r),s}},58036:(e,t,r)=>{"use strict";r.d(t,{AZ:()=>u,CA:()=>p,Gs:()=>g,Gu:()=>E,IB:()=>m,Id:()=>w,U5:()=>b,Ww:()=>d,Y3:()=>I,cF:()=>y,gz:()=>S,im:()=>P,kj:()=>h,mw:()=>l,oH:()=>f,s7:()=>c,wb:()=>v,wz:()=>C,y0:()=>O});var n=r(35860),i=r(89064),s=r(18168),a=r(6084),o=r(10340);function c(e){return e.get("user")}function l(e){return e.get("user").get("desktop")}function d(e,{serverEntityID:t}){return(0,o.c)(e,a.qe,t)}function u(e,{serverEntityID:t}){return(0,o.a)(e,a.qe,t)}function p(e,t){const r=d(e,t);return r&&r.get("desktop")}function m(e,{providerEntityID:t}){return(0,o.c)(e,a.SF,t)}function h(e,{providerEntityID:t}){return(0,o.a)(e,a.SF,t)}function y(e,{metadataListEntityID:t}){return(0,o.c)(e,a._M,t)}function g(e,{metadataListEntityID:t}){return(0,o.a)(e,a._M,t)}function f(e,{metadataItemEntityID:t}){return(0,o.c)(e,a.Qv,t)}function v(e,{metadataItemEntityID:t}){return(0,o.a)(e,a.Qv,t)}function b(e,{mediaSubscriptionEntityID:t}){return(0,o.c)(e,a.y$,t)}function S(e,{liveTVSessionEntityID:t}){return(0,o.c)(e,a.iy,t)}function P(e,{liveTVSessionEntityID:t}){return(0,o.a)(e,a.iy,t)}function I(e,{playQueueItemEntityID:t}){return(0,o.c)(e,a.o1,t)}function E(e,{playlistItemEntityID:t}){return(0,o.c)(e,a.cD,t)}function w(e,{friendEntityID:t}){return(0,o.c)(e,a.Yh,t)}function C(e,{watchTogetherRoomEntityID:t}){return(0,o.c)(e,a.Af,t)}function O(e){const t=(0,s.c)(a.qe,i.A),r=(0,s.c)(a.SF,n.Im,t);return(0,o.c)(e,a.SF,r)}},87644:(e,t,r)=>{"use strict";function n(e,t){return e.get("ui").get(`${t}Player`)}function i(e,t){const r=e.get("ui").get("audioVideoPlayer").get("playQueue"),n=e.get("ui").get("photoPlayer").get("playQueue");return r&&r.get("playQueueID")===t?r:n&&n.get("playQueueID")===t?n:void 0}function s(e,t){const r=e.get("playQueue");if(!r)return;const n=r.get("playQueueItems");return t<0||t>=n.length?void 0:n.at(t)}r.d(t,{EJ:()=>i,OG:()=>n,UH:()=>s})},89448:(e,t,r)=>{"use strict";r.d(t,{SS:()=>f,yO:()=>v});var n=r(79268),i=r(38828);const s=[];let a,o,c,l=!1,d=!1,u=1e3/60,p=1e3/60;function m(){a&&(a=window.clearTimeout(a))}function h(){o&&(o=window.clearTimeout(o))}function y(){const e=c;c=null,h(),e&&e()}function g(){m(),h();const e=window.performance.now();let t;for(d=!0;s.length&&(!t||t-e<u);)s.pop()(),t=window.performance.now();d=!1,s.length?(i.c.warn("[State] Unable to process all updates within budget; %s update(s) remaining",s.length),a=window.setTimeout(g,p)):c&&(o=window.setTimeout(y,p))}function f(e){for(m(),h(),d=!0,l=!0;s.length;)s.pop()();if(e)try{e()}catch(e){(0,n.c)(!1,e.name+": "+e.message)}c&&y(),d=!1,l=!1}function v(e,t){if(t.isStateTreeRoot)return c=e,void(d||o||(o=window.setTimeout(y,p)));l?e():(h(),s[0]!==e&&s.unshift(e),d||a||(a=window.setTimeout(g,p)))}},4580:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e?e.toUpperCase():""}},46784:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}},23228:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}},2636:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(33040),i=r(59396);const s=function(e){return e&&n.c.parseBoolean(e)?(0,i.c)("Yes"):(0,i.c)("No")}},35940:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(59396);const i=function(e){if(!e||!e.length)return;const t=e.length;return 1===t?e[0]:2===t?(0,n.c)("{1} and {2}",e[0],e[1]):3===t?(0,n.c)("{1}, {2}, and {3}",e[0],e[1],e[2]):(0,n.c)("{1}, {2}, and {3} others",e[0],e[1],e.length-2)}},90376:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return"[object String]"===window.toString.call(e)}},39036:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(1124);function i(e=24){const t=(0,n.c)(e,0,1024);let r="";for(;r.length<t;)r+=Math.random().toString(36).substring(2,t-r.length+2);return r}},84080:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=function(e){const t=/(\d+\.){2,3}\d+/.exec(e);return i().first(t)||e}},67224:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(96504),i=r(2108);const s=function(e,t){return(0,i.c)(n.c.getLastSegment(e||""),t)}},2108:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t,r){if(!e)return"";if(e.length>t){const n=t-3-(r=r||Math.floor((t-3)/2));return e.substr(0,r)+"..."+e.substr(e.length-n)}return e}},22308:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(35860);function i(e){const t=e.split("/");if(""===t.shift()){const e=t[0],r=t[t.length-1];let i;return n._u(e,n._0)?i=e:r&&(i=r),i}return e}},59396:(e,t,r)=>{"use strict";r.d(t,{c:()=>i,s:()=>s});var n=r(37952);function i(e,t,...r){return n.c.t(e,t,...r)}function s(e,t,...r){return n.c.tEscape(e,t,...r)}},86048:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(95720),i=r.n(n),s=r(22032),a=r(38828);const o=function(e,t){return t?e.get("Media").findIndex((e=>e.id===t)):0},c=function(e,t){const r=e.Part;return i().indexOf(r,i().findWhere(r,{key:t}))};var l=r(96504);const d={extensions:{dash:".mpd",hls:".m3u8",http:""},logParams:function(e,t,r){(0,a.c)("[Transcoder] %s (%s) options:",e,t,r)},serializeParams:function(e,t){let r,n={},s={};const a=/^X-Plex/;return i().each(e,(function(e,t){a.test(t)?s[t]=e:n[t]=e})),n=l.c.stringifyParams(n),s=l.c.stringifyParams(s),r=n&&s?n+"&"+s:n||s,r},image:function(e,t,r){if(!t)return"";const n=r.fallbackServer;let s,a=!1;if(n&&n.get("isConnected")&&(s=n.get("isFullServer")?n:null),s)if(e.get("cloud"))a=!0;else if(!e.get("isFullServer")){const t=!e.get("activeConnection").get("isPrivate"),r=s.get("activeConnection").get("isPrivate");a=t||r}const o=a?s:e,c=o.id===e.id,l={url:e.resolveUrl(t,{useRelativeUrl:c,appendToken:!0}),width:r.width&&Math.round(parseFloat(r.width)),height:r.height&&Math.round(parseFloat(r.height))};r.minSize&&(l.minSize=1),r.format&&(l.format=r.format),r.quality&&(l.quality=r.quality),r.filters&&i().each(r.filters,(function(e,t){void 0!==e&&(l[t]=e)}));const d="/photo/:/transcode?"+this.serializeParams(l,o);return o.resolveUrl(d,{appendToken:!0})},music:function(e,t,r,n){n||(n="start");const s=i().first(t.get("Media"));if(!s)return;const a=i().first(s.Part);if(!a)return;let o,c;e.supports("universalMusicTranscoder")?(o=i().extend({hasMDE:1,path:e.resolveUrl(t.get("key"),{useRelativeUrl:!0}),mediaIndex:0,partIndex:0},r),c="/music/:/transcode/universal/"+n):(o={identifier:t.get("identifier"),url:e.resolveUrl(a.key,{useRelativeUrl:!0}),format:"mp3",audioCodec:"libmp3lame",audioBitrate:320,audioSamples:44100},c="/music/:/transcode/generic.mp3"),this.logParams("Music",n,o),o=i().extend(o,e.getHeaders());const l=this.extensions[o.protocol];return"start"===n&&l&&(c+=l),e.resolveUrl(c+"?"+this.serializeParams(o,e))},video:function(e,t,r,n,a,l){a||(a={}),l||(l="start");const d=e.entityID()===t.get("serverEntityID"),u=e.get("activeConnection").get("isPrivate");let p=i().extend({hasMDE:1,path:e.resolveUrl(t.get("key"),{useRelativeUrl:d,appendToken:!d}),mediaIndex:o(t,r.id),partIndex:c(r,n.key),protocol:"hls",fastSeek:1,directPlay:0,directStream:1,subtitleSize:100,audioBoost:s.WE,location:u?"lan":"wan"},a);this.logParams("Video",l,p),p=i().extend(p,e.getHeaders());const m=this.extensions[p.protocol];let h="/video/:/transcode/universal/"+l;return"start"===l&&m&&(h+=m),e.resolveUrl(h+"?"+this.serializeParams(p,e))}}},79787:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(38828);function a(e){const t=i().clone(e);return t.hasOwnProperty("title")?(t.title=i().result(t,"title"),t.hasOwnProperty("shortTitle")&&(t.shortTitle=i().result(t,"shortTitle")),t.hasOwnProperty("plural")&&(t.plural=i().result(t,"plural")),t):t}function o(e,t){const r={};return e.forEach((e=>{r[e]=t.reduceRight(((t,r)=>{const n=r[e];return null!=n&&(t[n]=r),t}),{})})),{contains:function(e){for(const t in r)if(r[t][e])return!0;return!1},get:function(e){for(const t in r){const n=r[t][e];if(n)return a(n)}s.c.warn(`No type was found for ${e}`)},getAll:function(){return t.map(a)}}}},2684:(e,t,r)=>{"use strict";r.d(t,{_x:()=>s,cp:()=>a});var n=r(59396),i=r(79787);const s="trailer",a=(0,i.c)(["id","typeString"],[{id:1,typeString:s,title:()=>(0,n.c)("Trailer")},{id:2,typeString:"deletedScene",title:()=>(0,n.c)("Deleted Scene")},{id:3,typeString:"interview",title:()=>(0,n.c)("Interview")},{id:4,typeString:"musicVideo",title:()=>(0,n.c)("Music Video")},{id:5,typeString:"behindTheScenes",title:()=>(0,n.c)("Behind the Scenes")},{id:6,typeString:"scene",title:()=>(0,n.c)("Scene")},{id:7,typeString:"liveMusicVideo",title:()=>(0,n.c)("Live Music Video")},{id:8,typeString:"lyricMusicVideo",title:()=>(0,n.c)("Lyric Music Video")},{id:9,typeString:"concert",title:()=>(0,n.c)("Concert")},{id:10,typeString:"featurette",title:()=>(0,n.c)("Featurette")},{id:11,typeString:"short",title:()=>(0,n.c)("Short")},{id:12,typeString:"other",title:()=>(0,n.c)("Other")}])},1904:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(91224),i=r(6996),s=r(37660),a=r(35860),o=r(21784);const c=function(e,t,r){const{key:c,types:l={}}=e,d=Array.isArray(t.protocols)?t.protocols.includes(o.W):t.protocols[o.W],u=c===n.uO,p=c===n.Im,m=c===n._w;if(d)return u;if(a._u(t.identifier,a.Im))return r.id===s._w?m:p;if(u||p)return!1;const h=r.agent===i.KE;if(c===n.WK&&!h||c===n.GG&&h)return!1;const{type:y,subtype:g}=l;return c===n.WK&&r.type===y||r.type===y&&(null==g&&null==r.subtype||null!=g&&r.subtype===g)};function l(e,t){if(!e||!t||"hubs"===t.id)return;const r=(0,n.SK)();for(let n=0,i=r.length;n<i;n++){const i=r[n];if(c(i,e,t))return i}return r.find((e=>e.key===n.Eq))}},97412:(e,t,r)=>{"use strict";r.d(t,{mY:()=>n,wp:()=>i});const n="spotlight",i=["shelf","grid","list","banner","hero"]},40604:(e,t,r)=>{"use strict";r.d(t,{KE:()=>i,KI:()=>a,Ww:()=>o,im:()=>s});var n=r(79787);const i="none",s="video",a="audio",o="photo",c=(0,n.c)(["id","typeString"],[{id:0,typeString:i},{id:1,typeString:s},{id:2,typeString:a},{id:3,typeString:o}]);c.get,c.getAll},1484:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i,k:()=>n});const n="musicVideo",i="clip"},12612:(e,t,r)=>{"use strict";r.d(t,{Av:()=>k,Co:()=>y,EPISODE:()=>l,GG:()=>w,Gm:()=>D,Gq:()=>T,M5:()=>O,M7:()=>o,MOVIE:()=>a,OS:()=>P,SEASON:()=>c,UJ:()=>p,UV:()=>I,WC:()=>b,Ww:()=>h,YH:()=>m,cB:()=>C,ec:()=>u,ee:()=>v,ge:()=>S,iI:()=>d,sl:()=>f,ue:()=>x,wH:()=>M,yy:()=>g});var n=r(59396),i=r(79787),s=r(40604);const a="movie",o="show",c="season",l="episode",d="artist",u="album",p="track",m="clip",h="photo",y="photoalbum",g="playlist",f="collection",v="mixed",b="channel",S="author",P="audiobook",I="chapter",E=(0,i.c)(["id","typeString"],[{id:1,typeString:a,title:()=>(0,n.c)("Movie"),plural:()=>(0,n.c)("Movies"),mediaType:s.im},{id:2,typeString:o,title:()=>(0,n.c)("Show"),plural:()=>(0,n.c)("Shows"),mediaType:s.KE,child:c},{id:3,typeString:c,title:()=>(0,n.c)("Season"),plural:()=>(0,n.c)("Seasons"),mediaType:s.KE,parent:o,child:l},{id:4,typeString:l,title:()=>(0,n.c)("Episode"),plural:()=>(0,n.c)("Episodes"),mediaType:s.im,parent:c},{id:5,typeString:"trailer",title:()=>(0,n.c)("Trailer"),plural:()=>(0,n.c)("Trailers"),mediaType:s.im},{id:6,typeString:"comic",title:()=>(0,n.c)("Comic"),plural:()=>(0,n.c)("Comics"),mediaType:s.Ww},{id:7,typeString:"person",title:()=>(0,n.c)("Person"),plural:()=>(0,n.c)("People"),mediaType:s.KE},{id:8,typeString:d,title:()=>(0,n.c)("Artist"),plural:()=>(0,n.c)("Artists"),mediaType:s.KE,child:u},{id:9,typeString:u,title:()=>(0,n.c)("Album"),plural:()=>(0,n.c)("Albums"),mediaType:s.KE,parent:d,child:p},{id:10,typeString:p,title:()=>(0,n.c)("Track"),plural:()=>(0,n.c)("Tracks"),mediaType:s.KI,parent:u},{id:11,typeString:"picture",title:()=>(0,n.c)("Picture"),plural:()=>(0,n.c)("Pictures"),mediaType:s.Ww},{id:12,typeString:m,title:()=>(0,n.c)("Clip"),plural:()=>(0,n.c)("Clips"),mediaType:s.im},{id:13,typeString:h,title:()=>(0,n.c)("Photo"),plural:()=>(0,n.c)("Photos"),mediaType:s.Ww,parent:y},{id:14,typeString:y,title:()=>(0,n.c)("Photo Album"),plural:()=>(0,n.c)("Photo Albums"),mediaType:s.KE,child:h},{id:15,typeString:g,title:()=>(0,n.c)("Playlist"),plural:()=>(0,n.c)("Playlists"),mediaType:s.KE,parent:y},{id:16,typeString:"playlistFolder",title:()=>(0,n.c)("Playlist"),plural:()=>(0,n.c)("Playlists"),mediaType:s.KE,child:g},{id:18,typeString:f,title:()=>(0,n.c)("Collection"),plural:()=>(0,n.c)("Collections"),mediaType:s.KE},{id:20,typeString:S,title:()=>"Author",plural:()=>"Authors",mediaType:s.KE},{id:21,typeString:P,title:()=>"Audiobook",plural:()=>"Audiobooks",mediaType:s.KI},{id:22,typeString:I,title:()=>"Chapter",plural:()=>"Chapters",mediaType:s.KI,parent:P}]),w=(E.contains,E.get),C=E.getAll;function O(e){const t=E.get(e);if(t&&t.child)return E.get(t.child)}function M(e){const t=E.get(e);if(t){const e=t.child;return null==e?t:M(e)}}function T(e){const t=E.get(e);if(t){const e=t.parent;return null==e?t:T(e)}}function D(e,t){if(!t){const t=T(e);return t?D(t.id,[]):[]}const r=E.get(e),n=O(e),i=[...t,r];return n?D(n.id,i):i}function k(e){return!!O(e)}function x(e){const t=E.get(e);return!!t&&t.mediaType===s.KE}},1868:(e,t,r)=>{"use strict";r.d(t,{KI:()=>n,Ww:()=>s,im:()=>i});const n="audio",i="video",s="photo"},47148:(e,t,r)=>{"use strict";r.d(t,{GG:()=>c,TV:()=>l,WK:()=>p,_q:()=>u,cp:()=>h,ge:()=>m,y6:()=>d});var n=r(6996),i=r(61432),s=r(59396),a=r(79787),o=r(12612);const c="movies",l="tv",d="music",u="photos",p="videos",m="author",h=(0,a.c)(["key","typeID","typeString","rootTypeString"],[{key:c,typeID:"1",typeString:o.MOVIE,rootTypeString:o.MOVIE,title:()=>(0,s.c)("Movies"),shortTitle:()=>(0,s.c)("Movies"),defaultLanguage:"en",defaultAgents:[n.e4,n.go],defaultScanners:[i.gh,i.AC],mutual:{agent:n.e4,scanner:i.gh}},{key:l,typeID:"2",typeString:o.M7,rootTypeString:o.M7,title:()=>(0,s.c)("TV Shows"),shortTitle:()=>(0,s.c)("Shows"),defaultLanguage:"en",defaultAgents:[n.C0,n.YP],defaultScanners:[i._e,i.m_],mutual:{agent:n.C0,scanner:i._e}},{key:d,typeID:"8",typeString:o.iI,rootTypeString:o.iI,title:()=>(0,s.c)("Music"),shortTitle:()=>(0,s.c)("Music"),defaultLanguage:"en",defaultAgents:[n.uC,n.CA],defaultScanners:[i.o1,i.sb],exclusiveAgents:[n.mc],exclusiveScanners:[i.KH],mutual:{agent:n.uC,scanner:i.o1}},{key:u,typeID:"13",typeString:o.Ww,rootTypeString:o.Co,title:()=>(0,s.c)("Photos"),shortTitle:()=>(0,s.c)("Photos"),defaultLanguage:"en",defaultAgents:[n.KE],defaultScanners:[i.KY],mutual:{}},{key:p,typeID:"1",typeString:o.MOVIE,rootTypeString:o.YH,title:()=>(0,s.c)("Other Videos"),shortTitle:()=>(0,s.c)("Videos"),defaultLanguage:"xn",defaultAgents:[n.KE],defaultScanners:[i.kz],mutual:{}},{key:m,typeID:"20",typeString:o.ge,rootTypeString:o.ge,title:()=>"Audiobooks",shortTitle:()=>"Audiobooks",defaultLanguage:"en",defaultAgents:[n.mm],defaultScanners:[i.EZ],mutual:{}}])},79320:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(16872),i=r(38924);function s(e){return{type:n.c.boolean,save(){return this.has(e)}}}function a(e){return{type:n.c.queryString,separators:["|","&"],orFields:[i.MF,i.eS],andFields:[i.Gw,i.wT],save(){return this.has(e)}}}const o={allowTuners:{type:n.c.integer,save(){return this.has("allowTuners")}},allowSync:s("allowSync"),allowChannels:s("allowChannels"),filterMovies:a("filterMovies"),filterTelevision:a("filterTelevision"),filterMusic:a("filterMusic"),filterPhotos:a("filterPhotos")}},91224:(e,t,r)=>{"use strict";r.d(t,{EB:()=>h,Ef:()=>f,Eq:()=>o,GG:()=>u,Im:()=>c,OS:()=>v,SK:()=>S,TV:()=>y,WK:()=>g,_q:()=>m,_w:()=>l,uO:()=>d,y6:()=>p});var n=r(59396),i=r(79787),s=r(1484),a=r(12612);const o="unknown",c="discover",l="watchlist",d="dvr",u="movies",p="music",m="photos",h="playlists",y="tv",g="videos",f="shared",v="audiobook",b=(0,i.c)(["key"],[{key:o,title:()=>(0,n.c)("Unknown"),types:{}},{key:h,types:{type:a.yy}},{key:u,types:{type:a.MOVIE}},{key:y,types:{type:a.M7}},{key:p,types:{type:a.iI}},{key:m,types:{type:a.Ww}},{key:g,types:{type:a.MOVIE,subtype:s.Y}},{key:"episode",types:{type:a.EPISODE}},{key:d,title:()=>(0,n.c)("Live TV & DVR")},{key:f,types:{type:a.ee}},{key:c},{key:l},{key:v,types:{type:a.ge}}]),S=(b.get,b.getAll)},76636:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(59396);const i=(0,r(79787).c)(["id","typeString"],[{id:1,typeString:"video",key:"videoStreamID",title:()=>(0,n.c)("Video")},{id:2,typeString:"audio",key:"audioStreamID",title:()=>(0,n.c)("Audio")},{id:3,typeString:"subtitles",key:"subtitleStreamID",title:()=>(0,n.c)("Subtitles")},{id:4,typeString:"lyrics",key:"lyricStreamID",title:()=>(0,n.c)("Lyrics")}])},36340:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(59396);const i=(0,r(79787).c)(["id","typeString"],[{id:0,typeString:"tag",title:()=>(0,n.c)("Tag")},{id:1,typeString:"genre",title:()=>(0,n.c)("Genre")},{id:2,typeString:"collection",title:()=>(0,n.c)("Collection")},{id:3,typeString:"bookmark",title:()=>(0,n.c)("Bookmark")},{id:4,typeString:"director",title:()=>(0,n.c)("Director"),isPerson:!0},{id:5,typeString:"writer",title:()=>(0,n.c)("Writer"),isPerson:!0},{id:6,typeString:"actor",title:()=>(0,n.c)("Actor"),isPerson:!0},{id:7,typeString:"producer",title:()=>(0,n.c)("Producer"),isPerson:!0},{id:8,typeString:"country",title:()=>(0,n.c)("Country")},{id:9,typeString:"chapter",title:()=>(0,n.c)("Chapter")},{id:10,typeString:"review",title:()=>(0,n.c)("Review")},{id:11,typeString:"label",title:()=>(0,n.c)("Label")},{id:42,typeString:"versionBackgroundProcessingTarget",title:()=>(0,n.c)("Version Background Processing Target")},{id:200,typeString:"make",title:()=>(0,n.c)("Make")},{id:201,typeString:"model",title:()=>(0,n.c)("Model")},{id:202,typeString:"aperture",title:()=>(0,n.c)("Aperture")},{id:203,typeString:"exposure",title:()=>(0,n.c)("Exposure")},{id:204,typeString:"iso",title:()=>(0,n.c)("ISO")},{id:205,typeString:"lens",title:()=>(0,n.c)("Lens")},{id:206,typeString:"device",title:()=>(0,n.c)("Device")},{id:207,typeString:"autotag",title:()=>(0,n.c)("Autotag")},{id:400,typeString:"place",title:()=>(0,n.c)("Place")},{id:300,typeString:"mood",title:()=>(0,n.c)("Mood")},{id:301,typeString:"bpm",title:()=>(0,n.c)("BPM")},{id:302,typeString:"composer",title:()=>(0,n.c)("Composer")},{id:303,typeString:"featuring",title:()=>(0,n.c)("Featuring")},{id:304,typeString:"trackArtist",title:()=>(0,n.c)("Track Artist")},{id:305,typeString:"similarArtist",title:()=>(0,n.c)("Similar Artist")},{id:306,typeString:"concert",title:()=>(0,n.c)("Concert")}])},44768:(e,t,r)=>{"use strict";function n(e){return/^\w+:\/\//.test(e)}r.d(t,{c:()=>n})},96504:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(87392),i=r.n(n),s=r(63956),a=r.n(s),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e};const m=/^([^?#]*)(?:\?([^#]*))?(#.*)?/,h=/([^?]*)\??(.*)()/;function y(e,t){return i().stringify(e,p({arrayFormat:"repeat"},t))}function g(e,t){return i().parse(e,t)}function f(e,t){const r=a().parse(e),n=r.protocol?`${r.protocol}:`:"",i=r.port?String(r.port):"",s=r.hostname?i&&`${r.hostname}:${i}`||r.hostname:"",o=r.hostname||"",c=r.fragment?`#${r.fragment}`:"",l=e,d=n&&s?`${n}//${s}`:"",u=r.path||"",p=r.query?`?${r.query}`:"",m=r.query?g(r.query,t):{};return{isAbsolute:/^[\w:]*\/\//.test(e),hash:c,host:s,hostname:o,href:l,origin:d,params:m,pathname:u,port:i,protocol:n,search:p}}const v={getLastSegment:function(e){if(e){const t=/[^/\\]+$/.exec(e);return(null==t?void 0:t[0])||e}return""},stringifyParams:y,parseParams:g,parseUrl:function(e){const t=p({},f(e)),r=/file/.test(t.protocol);return t.protocol||(t.protocol=window.location.protocol),r||(t.host||(t.host=window.location.host),t.hostname||(t.hostname=window.location.hostname),t.port||(t.port=window.location.port)),t.origin||(t.origin=r?`${t.protocol}//`:`${t.protocol}//${t.host}`),t},parseUri:f,join:function(e,t,r){var n;"string"==typeof e&&(e=[e]),e=e.filter((e=>e));const i=(null==r?void 0:r.recognizeHash)?m:h,s=e.reduce(((e,t)=>{const r=function(e){return String(e).replace(/^\/|\/$/g,"")}(t).match(i);if(!r)return e;const[,n,s,a]=r;return n&&(e.path=e.path?e.path+"/"+n:n),s&&(e.params=e.params?e.params+"&"+s:s),a&&(e.hash=a),e}),{path:"",params:"",hash:""});let a;if(null==r?void 0:r.parseParams)a=y(Object.assign(g(s.params),"string"==typeof t?g(t):t));else if((s.params||t)&&(s.params&&(a=s.params),t)){const e="string"==typeof t?t:y(t,null==r?void 0:r.stringifyOptions);e&&(a=a?`${a}&${e}`:e)}const o=e.length&&"/"===(null==(n=e[0])?void 0:n.charAt(0))?"/":"",c=s.path;return o+c+((null==r?void 0:r.trailingSlash)&&c.length&&"/"!==c[c.length-1]?"/":"")+(a?"?"+a:"")+s.hash}}},419:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(23228);const i=function(e,t){const r=new RegExp(`(\\?|&)(${(0,n.c)(t)}=[^\\?&]+(?:[\\?&]?))`,"g");return e.replace(r,((e,t)=>t)).replace(/(\?|&)$/,"")}},14556:(e,t,r)=>{"use strict";function n(e,t){let[,r]=e.match(/(^[^#]+)?/);return r=r||"",`${r}${t}`}r.d(t,{c:()=>n})},15372:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){const[,t,r=""]=e.match(/(^[^#]+)(?:#(.*$))?/),[,n,i=""]=t.match(/(^[^?]+)(\?.*$)?/),[,s,a=""]=r.match(/(^[^?]*)(\?.*$)?/);return{base:n,searchParams:i,hashPath:s,hashParams:a}}},41064:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(52180),i=r(99112);function s(e){return!e.get("experienceSettings").get("isRemoteSchemaVersionNewer")&&i.c.allowSyncSettings&&(0,n.WI)("settingFinder").find("shouldSyncSettings")}},54844:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n="::";function i(e,t){return`${e}${n}${t}`}},8137:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(78364);const i=function(e){return(0,n.c)(e,(e=>e.uuid),(()=>!0))}},27816:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});var n=r(42728);const i=["free"];function s(e,t){const r=t&&t.requires;if(!r)return!0;if(r===n.S0)return!e.anonymous;const s=e.services[r];return!!s&&!i.includes(s.subscriptionType)}},90012:(e,t,r)=>{"use strict";r.d(t,{M:()=>n,s:()=>i});var n=(e=>(e.OptIn="opt_in",e.OptOut="opt_out",e.OptOutManaged="opt_out_managed",e))(n||{}),i=(e=>(e.IncludeDiscoverSource="includeDiscoverSource",e.IncludeMetadataInSearch="includeMetadataInSearch",e.IncludeAvailabilities="includeAvailabilities",e.IncludeSocialProof="includeSocialProof",e))(i||{})},68432:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(){return window!==window.top}},84676:(e,t,r)=>{"use strict";function n(e){return{status:e.status,statusText:e.statusText,readyState:e.readyState,responseText:e.responseText}}r.d(t,{c:()=>n})},5620:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(91600),l=r(38828),d=r(96504);const u=new(c.c.extend({initialize(){a().bindAll(this,"onAjaxSend","onAjaxComplete"),this.requests=[],this.byId={}},startListening(){const e=i()(document);e.on("ajaxSend",this.onAjaxSend),e.on("ajaxComplete",this.onAjaxComplete)},stopListening(){const e=i()(document);e.off("ajaxSend",this.onAjaxSend),e.off("ajaxComplete",this.onAjaxComplete)},abortAll(e){for(let t=this.requests.length-1;t>-1;t--){const r=this.requests[t];null!=e&&e!==r.settings.scope||this.abort(r)}},abort(e){const t=a().isString(e)?this.byId[e]:e;t&&(t.xhr.aborting=!0,t.xhr.abort(),this.remove(t))},store(e,t){const r=a().uniqueId("r");e.rid=r;const n={xhr:e,settings:t};return this.requests.push(n),this.byId[r]=n,n},remove(e){const t=a().indexOf(this.requests,e);t>-1&&this.requests.splice(t,1),this.byId.hasOwnProperty(e.xhr.rid)&&delete this.byId[e.xhr.rid]},onAjaxSend(e,t,r){if(r.skipCorsWithRedirect)return;const n=this.store(t,r);t.always((()=>{t.aborting||this.remove(n)}))},onAjaxComplete(e,t,r){const n=401===t.status;if(t.aborting||!n)return;const i=d.c.parseUrl(r.url);if(n&&("/log"===i.pathname||"/"===i.pathname||"/media/providers"===i.pathname))return;const s=(0,o.WI)("appModel").get("servers"),c=s?s.find((e=>{const t=e.get("activeConnection"),n=t&&t.get("isConnected"),i=a().result(t,"url");return!!n&&r.url.substring(0,i.length)===i})):null;c&&((0,l.c)('[Connections] Active connection to "%s" lost authorization',c.get("debugName")),c.trigger("error:connection",c))}}))},80184:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(44060),l=r(99112),d=r(3736),u=r(77224),p=r(32364),m=r(86048);const h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",y=c.c.ItemView.extend({tagName:"img",background:!1,backgroundSize:"",cache:new d.c,initialize:function(e){e||(e={}),a().bindAll(this,"onLoad","onError","loadImage"),this.url=e.url,this.server=e.server,this.placeholder=e.placeholder,this.placeholderClass=e.placeholderClass,this.modelAttribute=e.modelAttribute,this.ignoreAttributeChanges=e.ignoreAttributeChanges,this.exposeUrl=e.exposeUrl,this.resetOnError=e.resetOnError,this.emptyImage=e.explicitEmpty?"url("+h+")":"",e.background&&(this.background=e.background),e.backgroundSize&&(this.backgroundSize=e.backgroundSize),e.format&&(this.format=e.format),e.quality&&(this.quality=e.quality),a().isFunction(e.getUrl)&&(this.getUrl=e.getUrl),this.allowBaseImageBlobs=l.c.allowBaseImageBlobs,this.allowBaseImagePreloading=l.c.allowBaseImagePreloading,this.setup(e)},setup:function(e){this.setDimensions(e),this.setFilters(e.filters),this.setModel(e.model,e)},setDimensions:function(e){e.width&&e.height&&(this.transcode=!0,this.width=e.width,this.height=e.height)},setFilters:function(e){this.filters=e||void 0},hasFilters:function(){return void 0!==this.filters},setModel:function(e,t){t||(t={}),this.stopListening(),this.src=null,this.model=e,e&&(this.server||(this.server=e.server),t.url||this.modelAttribute&&(this.url=this.getUrl(e.get(this.modelAttribute)),this.ignoreAttributeChanges||this.listenTo(e,"change:"+this.modelAttribute,this.onChange)))},setElement:function(e){c.c.ItemView.prototype.setElement.apply(this,arguments),this.render({force:!0})},getUrl:function(e){return e},getTranscodeUrl:function(e){if(!this.server||!this.transcode)return e;const t=o.WI("appModel"),r=(0,u.c)();return m.c.image(this.server,e,{fallbackServer:t.get("primaryServer"),width:this.width*r,height:this.height*r,minSize:this.minSize,filters:this.filters,format:this.format,quality:this.quality})},render:function(e){return e||(e={}),this.url||this.placeholder||this.placeholderClass?this.src?(e.force&&this.showImage(this.src),this):(this.isPlaceholderRendered&&this.url||this.showPlaceholder(),this.url&&this.load(this.url,this.transcode).then(this.onLoad,this.onError,this.onLoad),this):this},showPlaceholder:function(){if(this.isPlaceholderRendered=!0,this.$el.removeClass("loaded"),this.placeholderClass)return this.$el.addClass(this.placeholderClass),void this.$el.css("background-image",this.emptyImage);this.placeholder?this.showImage(this.placeholder):this.clearImage()},clearImage:function(){this.background?this.$el.css("background-image",this.emptyImage):this.showImage(h)},showImage:function(e){this.background?this.showBackgroundImage(e):this.$el.attr("src",e).removeAttr("width").removeAttr("height")},showBackgroundImage:function(e){this.$el.css("background-image","url("+e+")")},load:function(e){if(!e)return i().Deferred().reject().promise();if(e=this.getTranscodeUrl(e),this.exposeUrl&&this.$el.attr("data-image-url",e),this.allowBaseImageBlobs&&p.c.hasBlob&&p.c.hasObjectUrl){let t=this.loadBlob(e);return t=t.then(this.loadImage,null,this.loadImage),t}return this.allowBaseImagePreloading?this.loadImage(e):i().Deferred().resolve(e).promise()},loadBlob:function(e){const t=i().Deferred();this.cancel();const r=this.cache.getBlobUrl(e);if(r)return t.resolve(r),t.promise();{const r=this.cache.getPlaceholder(e);r&&t.notify(r,!0)}const n=new window.XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",this.xhr=n,n.onreadystatechange=a().bind((function(){if(4===n.readyState)if(n.onreadystatechange=null,this.xhr=null,200===n.status){const r=new window.Blob([n.response],{type:"image/jpeg"}),i=window.URL.createObjectURL(r);this.cache.store({url:e,blobUrl:i}),t.resolve(i)}else t.reject()}),this),n.send(),t.promise()},loadImage:function(e,t){const r=i().Deferred(),n=new window.Image;return n.onload=function(){n.onload=n.onabort=n.onerror=null,t?r.notify(e,n.width,n.height):r.resolve(e,n.width,n.height)},n.onabort=n.onerror=function(){n.onload=n.onabort=n.onerror=null,r.reject()},n.src=e,r.promise()},cancel:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.abort(),this.xhr=null)},onLoad:function(e,t,r){if(this.backgroundSize){const e=t&&t>this.width||r&&r>this.height?this.backgroundSize:"auto";this.$el[0].style.backgroundSize=e}this.src=e,this.placeholderClass&&this.$el.removeClass(this.placeholderClass),this.$el.addClass("loaded"),this.showImage(e),this.trigger("load",e,t,r)},onError:function(){this.resetOnError&&this.showPlaceholder(),this.trigger("error")},onClose:function(){this.cancel()},onChange:function(e,t){if(t=this.getUrl(t),this.url===t)return this;this.url=t,this.src=null,this.render()}})},92331:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(6552),i=r(77452),s=r(80184);const a=s.c.extend({background:!0,setup(e){this.minSize=!0,this.type=e.type,this.modelAttribute=e.modelAttribute||"thumb",!1!==e.placeholder&&(this.model&&this.model.get("isFolder")?this.placeholderClass=n.c.folder:e.placeholderClass||(this.placeholderClass=n.c[this.type])),s.c.prototype.setup.apply(this,arguments)},setDimensions(e){e.width?e.height=i.c.getPosterHeight(this.type,e.width):e.height&&(e.width=i.c.getPosterWidth(this.type,e.height)),s.c.prototype.setDimensions.call(this,e)},setModel(e,t){s.c.prototype.setModel.apply(this,arguments),this.model&&this.model.get("isFolder")&&(this.placeholderClass=n.c.folder)}})},48168:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(3268),s=r.n(i),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-tidal-logo-560"};s["aria-hidden"]=!t,s.style=i,s.className=a.c.plexIcon+(r?" "+r:"");const o=[n.createElement.apply(n,["path",{d:"M373.331 186.32l-93.324 93.332-93.337-93.341L280.007 93l93.332 93.309L466.67 93 560 186.318l-93.33 93.341-93.339-93.339zm.01 186.669l-93.334 93.34-93.337-93.34 93.337-93.337 93.334 93.337zm-186.67-186.67l-93.338 93.34L0 186.32 93.333 93l93.337 93.318z"}].concat([]))];return t&&o.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(o))}o.propTypes={"aria-label":s().string,className:s().string,style:s().object};const c=o;var l=r(44488),d=r(2344);const u={[d.WQ]:c,[d.s5]:l.c},p=function(e){const t=u[e.attribution];return t?n.createElement("div",{className:e.className},n.createElement(t,null)):null}},79988:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(89080),i=r.n(n),s=r(42476),a=r(11504),o=r(49304);var c=Object.defineProperty;class l extends a.Component{render(){const{className:e,containerClassName:t,backgroundClassName:r,textClassName:n,size:o,lineWidth:c,strokeColor:l,trackColor:d,progress:u,progressText:p=`${Math.round(u)}%`,easing:m,showProgressText:h,showIndeterminate:y}=this.props,g=this.props.smoothProgressDuration/1e3,f=y?50:u,v=y?null:p,b=o/2,S=b-c,P=Math.PI*(2*S),I=o+"px",E=o-3*c+"px",w=(100-f)/100*P;return a.createElement("div",{className:t,style:{width:I,height:I,lineHeight:I}},a.createElement("svg",{className:i()(e,y&&"CircularProgressBar-indeterminate-SEGr5v spin-spin-H8VRGl"),height:o,version:"1.1",width:o,xmlns:"http://www.w3.org/2000/svg"},d?a.createElement("circle",{cx:b,cy:b,fill:"transparent",r:S,style:{strokeWidth:c,stroke:d}}):null,a.createElement(s.q4.circle,{animate:{strokeDashoffset:w},cx:b,cy:b,fill:"transparent",initial:!0,r:S,strokeDasharray:P,strokeDashoffset:w,style:{strokeWidth:c,stroke:l},transition:{duration:g,ease:m}})),a.createElement("div",{className:r,style:{width:E,height:E}}),h&&v?a.createElement("div",{className:n},v):null)}}((e,t,r)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(l,"defaultProps"+"",{className:"CircularProgressBar-circularProgressBar-dVkuio",containerClassName:"CircularProgressBar-circularProgressBarContainer-LRZ8zn",backgroundClassName:"CircularProgressBar-circularProgressBarBackground-Bw4kwM",textClassName:"CircularProgressBar-circularProgressBarText-ZQsWiX",size:60,lineWidth:5,strokeColor:o.c.primaryColor,showProgressText:!0,smoothProgressDuration:1e3,easing:"easeOut"});const d=l},95164:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(11504),i=r(97104),s=r(61412),a=r(79268),o=r(38828),c=r(86796),l=r(57652),d=r(59396),u=r(40604),p=r(5120),m=r(3268),h=r.n(m);function y({onPositionUpdate:e,onTick:t}){const r=(0,n.useRef)(Date.now());return(0,n.useEffect)((()=>{let t;return e&&(t=window.setInterval(e,40)),()=>{t&&window.clearInterval(t)}}),[e]),(0,n.useEffect)((()=>{let e;return t&&(e=window.setInterval((()=>{const e=Math.floor((Date.now()-r.current)/1e3);t(e)}),1e3)),()=>{e&&window.clearInterval(e)}}),[t]),null}y.propTypes={onPositionUpdate:h().func,onTick:h().func};const g=y;var f=Object.defineProperty,v=(e,t,r)=>(((e,t,r)=>{t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class b extends n.Component{constructor(e,t){super(e,t),v(this,"_isBuffering"),v(this,"_isUnmounting"),v(this,"_lastPositionChangeTime"),v(this,"_lastPositionMilliseconds"),v(this,"_mediaEl"),v(this,"_mediaListeners"),v(this,"_node"),v(this,"_nativeSeek",(e=>{this._mediaEl.currentTime=e})),v(this,"onStarted",(()=>{const{positionSeconds:e,onDurationMillisecondsChange:t}=this.props;this.state.isStarted||(e&&(this.props.onResumeSeek||this.props.onSeek||this._nativeSeek)(e),this.setState({isStarted:!0},(()=>{if(t){const e=this._mediaEl.duration;t(Number.isFinite(e)?Math.floor(1e3*e):0)}})))})),v(this,"onDataLoad",(()=>{this._canNativelySelectAudioTrack()&&this._selectAudioTrack(),this._canNativelySelectTextTrack()&&(this._selectTextTrack(),this._mediaEl.textTracks.addEventListener("addtrack",this.onAddTrack)),(0,l.c)()||this.onStarted()})),v(this,"onCanPlay",(()=>{(0,l.c)()&&this.onStarted()})),v(this,"onCanPlayThrough",(()=>{this.props.onCanPlayThrough&&this.props.onCanPlayThrough(!0)})),v(this,"onPositionUpdate",(()=>{if(!this._mediaEl)return;const e=Math.floor(1e3*this._mediaEl.currentTime);if(e!==this._lastPositionMilliseconds)this._lastPositionMilliseconds=e,this._lastPositionChangeTime=Date.now(),this._isBuffering&&(this._isBuffering=!1,this.props.onBufferingChange&&this.props.onBufferingChange(!1));else if(!this._isBuffering&&!this.props.paused){const e=Date.now()-this._lastPositionChangeTime;e>this.props.bufferingDetectionLimit&&(o.c.warn(`[Player] Buffering detected, last position change was ${e}ms ago`),this._isBuffering=!0,this.props.onBufferingChange&&this.props.onBufferingChange(!0))}this.props.onPositionMillisecondsChange(e)})),v(this,"onProgress",(()=>{if(this.props.onBufferChange){const{buffered:e}=this._mediaEl,t=[];for(let r=0;r<e.length;r++)t.push({startSeconds:e.start(r),endSeconds:e.end(r)});this.props.onBufferChange(t)}})),v(this,"onEnded",(()=>{this.props.onEnd&&this.props.onEnd()})),v(this,"onError",(e=>{const{code:t}=e.target.error,r=function(e){switch(e){case 1:return(0,d.c)("Abort");case 2:return(0,d.c)("Network");case 3:return(0,d.c)("Decode");case 4:return(0,d.c)("Not Supported")}}(t),n=`${t} (${r||"Unknown"})`;2===t?o.c.warn(`[Player] An HTML media error occurred: ${n}; the player will attempt to recover`):(o.c.warn(`[Player] A critical HTML media error occurred: ${n}; the player cannot recover`),this.props.onError&&this.props.onError({code:`h${t}`,category:r}))})),v(this,"onSeek",(e=>{const t=this._mediaEl.ended;this._nativeSeek(e),this.props.onSeek&&this.props.onSeek(e),!this.props.paused&&t&&this._play()})),v(this,"onPause",(()=>{this._mediaEl.ended||this.props.onPause&&this.props.onPause()})),v(this,"onPlay",(()=>{this.props.onPlay&&this.props.onPlay()})),v(this,"onResize",(()=>{const{videoWidth:e,videoHeight:t}=this._mediaEl;this.props.onIntrinsicDimensions&&this.props.onIntrinsicDimensions({width:e,height:t})})),v(this,"onAddTrack",(()=>{this._selectTextTrack()})),this.state={isStarted:!1},this._mediaListeners={loadeddata:this.onDataLoad,canplay:this.onCanPlay,canplaythrough:this.onCanPlayThrough,progress:this.onProgress,ended:this.onEnded,error:this.onError,pause:this.onPause,play:this.onPlay,resize:this.onResize},this._lastPositionMilliseconds=null,this._lastPositionChangeTime=0,this._isBuffering=!1,this._isUnmounting=!1}componentDidMount(){this._mediaEl=(0,c.i_)(this.props.mediaType,this.props.allowRecycleElement);const e=this._mediaEl;e.className="HTMLMedia-mediaElement-u17S9P",e.volume=Math.max(0,Math.min(this.props.volume/100,1)),e.crossOrigin="anonymous",Object.keys(this._mediaListeners).forEach((t=>{e.addEventListener(t,this._mediaListeners[t])})),this._node=i.findDOMNode(this),this._node.appendChild(e),this.props.onElementChange?this.props.onElementChange(e):e.src=this.props.src,this.props.isReadyToPlay&&!this.props.paused&&this.props.src&&this._play(),this._mediaEl.playbackRate=this.props.playbackSpeed,this.props.onMetricsPlayerChange(s.ai)}componentDidUpdate(e,t){(0,a.c)(this.props.src===e.src,"Use a new `key` when changing `src`");const{lastSeekPositionSeconds:r,paused:n,volume:i,playbackSpeed:s,isReadyToPlay:o,audioStream:c,subtitleStream:l,subtitleSize:d,hasBurnedSubtitles:u,isStreamChangeInProgress:p,onStreamChange:m}=this.props,h=this._mediaEl,y=null!=r&&r!==e.lastSeekPositionSeconds,g=(!!e.audioStream&&e.audioStream.id)!==(!!c&&c.id),f=(!!e.subtitleStream&&e.subtitleStream.id)!==(!!l&&l.id),v=e.isStreamChangeInProgress&&!p,b=e.subtitleSize!==d;y&&this.onSeek(r),n===e.paused||h.ended||(n?this._pause():this._play()),i!==e.volume&&(h.volume=Math.max(0,Math.min(i/100,1))),s!==e.playbackSpeed&&(h.playbackRate=s),!o||e.isReadyToPlay||n||this._play(),this._canNativelySelectTextTrack()&&f&&!p&&this._selectTextTrack(),m&&(g&&!p||f&&!p||v||b&&u)&&m()}componentWillUnmount(){this._isUnmounting=!0,this._node.removeChild(this._mediaEl),this._mediaEl.src="",this._mediaEl.removeAttribute("src"),this._mediaEl.className="",Object.keys(this._mediaListeners).forEach((e=>{this._mediaEl.removeEventListener(e,this._mediaListeners[e])})),this._mediaEl.textTracks.removeEventListener("addtrack",this.onAddTrack),this.props.allowRecycleElement&&(0,c.Ah)(this._mediaEl)}_play(){const e=this._mediaEl.play();e&&e.then&&e.then(null,(e=>{this._isUnmounting||(("AbortError"===e.name||"NotAllowedError"===e.name)&&this.props.onPause&&this.props.onPause(),o.c.warn(e.name+": "+e.message))}))}_pause(){this._mediaEl.pause()}_canNativelySelectAudioTrack(){const{audioStreams:e,isDecisionDirectPlay:t}=this.props;return!!(e&&e.length&&t&&this._mediaEl.audioTracks)}_canNativelySelectTextTrack(){const{subtitlesStreams:e,isDecisionDirectPlay:t}=this.props;return!!(e&&e.length&&t&&this._mediaEl.textTracks.length>0)}_selectAudioTrack(){const{audioStreams:e,audioStream:t}=this.props,r=this._mediaEl.audioTracks;if(r){const n=(null==r?void 0:r.length)>1?null==e?void 0:e.findIndex((e=>e.id===t.id)):0;for(let e=0;e<r.length;e++)r[e].enabled=e===n}}_selectTextTrack(){var e;const{subtitleStream:t}=this.props,r=this._mediaEl.textTracks;if(this.props.onSubtitlesChange)this.props.onSubtitlesChange();else if(r&&t){let n;for(let i=0;i<r.length;i++){const s=r[i];if(s.mode="disabled",!n){const r="captions"===s.kind&&"eia_608"===t.codec,i="subtitles"===s.kind&&"vtt"===t.codec,a=s.language===t.id||s.label.toLowerCase()===(null==(e=t.language)?void 0:e.toLowerCase());(r||i)&&a&&(n=!0,s.mode="showing")}}}}render(){const{height:e,width:t,placement:r,edgeGutterX:i,edgeGutterY:s,isStackedAbove:a,onTick:o}=this.props,c=(0,p.c)(e,t,r,i,s,a);return n.createElement("div",{style:c},this.state.isStarted?n.createElement(g,{onPositionUpdate:this.onPositionUpdate,onTick:o}):null)}}v(b,"defaultProps",{mediaType:u.im,positionSeconds:0,volume:100,playbackSpeed:1,allowRecycleElement:!1,isReadyToPlay:!0});const S=b},98772:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=(r(79268),r(23228)),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e},u=(e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r};const p=function(e){const{className:t,component:r="span",childrenPropName:s="children",tags:a,message:o}=e;let c=[o],l=a.length-1,p=0;for(;l>=0;){const e=a[l],{open:t,close:r,unpaired:s,children:o,component:m,childrenPropName:h}=e,y=u(e,["open","close","unpaired","children","component","childrenPropName"]),g=t?new RegExp("(^.*)"+(0,i.c)(`{${t}}`)+"(.*)"+(0,i.c)(`{${r}}`)+"(.*$)"):new RegExp("(^.*)"+(0,i.c)(`{${s}}`)+"()(.*$)"),f=[];for(let e=c.length-1;e>=0;e--){const t=c[e];if("string"!=typeof t)f.unshift(t);else{const e=t.match(g);if(e){const[,t,r,i]=e;m?f.unshift(t,n.createElement(m,d(d({key:p},y),r?{[h||"children"]:r}:void 0)),i):f.unshift(t,o,i),p+=1}else f.unshift(t)}}f.length===c.length?l-=1:c=f}return n.createElement(r,d({className:t},{[s]:c}))}},59372:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(89080),i=r.n(n),s=r(11504),a=r(24808);const o={badge:"Badge-badge-GPVVZ0",isHidden:"Badge-isHidden-Tg5glg",default:"Badge-default-gy4ofL",primary:"Badge-primary-BGLMun",success:"Badge-success-WIQZUy",danger:"Badge-danger-cpNGtc"};function c({className:e,children:t,kind:r}){return s.createElement("span",{className:i()(e,o.badge,o[r],!t&&o.isHidden),"data-testid":"badgeElement"},t)}c.defaultProps={kind:a.sT};const l=c},17068:(e,t,r)=>{"use strict";r.d(t,{i:()=>i,c:()=>a});var n=r(11504);const i="";function s({className:e,separator:t}){return n.createElement("span",{className:e},t)}s.defaultProps={className:"DashSeparator-separator-_3fMys",separator:i};const a=s},97164:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(89080),i=r.n(n),s=r(11504),a=r(2540),o=r(24808),c=r(87808);const l={disclosureArrow:"DisclosureArrow-disclosureArrow-NTDkGd",default:"DisclosureArrow-default-IjziOV",primary:"DisclosureArrow-primary-by640G",success:"DisclosureArrow-success-Gfb_9Z",danger:"DisclosureArrow-danger-g5QDmf",small:"DisclosureArrow-small-j34aAu",up:"DisclosureArrow-up-rO9WLr",right:"DisclosureArrow-right-k2eKlT",medium:"DisclosureArrow-medium-fXE_g9",large:"DisclosureArrow-large-kYbdMt",down:"DisclosureArrow-down-eIFuNm DisclosureArrow-up-rO9WLr",left:"DisclosureArrow-left-hT7G49 DisclosureArrow-right-k2eKlT",isSelected:"DisclosureArrow-isSelected-GKTZnd"};function d({className:e,kind:t,size:r,direction:n,isSelected:a}){return s.createElement("span",{className:i()(e,l[n],l[t],l[r],a&&l.isSelected)})}d.defaultProps={className:l.disclosureArrow,direction:a.aK,kind:o.sT,size:c.IF,isSelected:!1};const u=d},4012:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=(r(79268),r(51268));const s="Measure-scrollContainer-8hW9vB";var a=Object.defineProperty,o=(e,t,r)=>(((e,t,r)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class c extends n.Component{constructor(e,t){super(e,t),o(this,"_container"),o(this,"_expandContainer"),o(this,"_frameRequestID"),o(this,"_measureTimeoutID"),o(this,"_shrinkContainer"),o(this,"_requestFrame",(()=>{this._clearTimeout(),this._cancelFrame(),this._frameRequestID=window.requestAnimationFrame(this._measure)})),o(this,"_requestTimeout",(()=>{this._clearTimeout(),this._cancelFrame(),this._measureTimeoutID=window.setTimeout(this._requestFrame,this.props.resizeTimeout)})),o(this,"_measure",(()=>{const{ignoreWidth:e,ignoreHeight:t,ignorePosition:r,ignoreTransforms:n}=this.props,{isMeasured:i,width:s,scrollWidth:a,height:o,scrollHeight:c,x:l,y:d}=this.state,u=this._container;if(!u)return;const p=u.getBoundingClientRect(),m=n?u.offsetWidth:p.width,h=n?u.offsetHeight:p.height,y=!0!==i,g=!r&&(p.left!==l||p.top!==d),f=!e&&(m!==s||u.scrollWidth!==a),v=!t&&(h!==o||u.scrollHeight!==c);if(this._reset(),y||g||f||v){const n=window.getComputedStyle(u),i={isMeasured:!0};if(r||(i.x=g?p.left:l,i.y=g?p.top:d),!e){const e=parseInt(n.paddingRight,10)||0,t=parseInt(n.paddingLeft,10)||0;i.width=f?m-t-e:s,i.scrollWidth=f?u.scrollWidth:a}if(!t){const e=parseInt(n.paddingTop,10)||0,t=parseInt(n.paddingBottom,10)||0;i.height=v?h-e-t:o,i.scrollHeight=v?u.scrollHeight:c}this.setState(i),this.props.onMeasure&&this.props.onMeasure(i)}})),o(this,"_setContainerRef",(e=>{this._container=e;const{onContainerRef:t}=this.props;t&&t(e)})),o(this,"_setExpandContainerRef",(e=>{this._expandContainer=e})),o(this,"_setShrinkContainerRef",(e=>{this._shrinkContainer=e})),o(this,"onScroll",(e=>{this._requestTimeout()}));const{ignoreWidth:r,ignoreHeight:n,ignorePosition:i}=e;this.state={isMeasured:!1,width:r?void 0:0,scrollWidth:r?void 0:0,height:n?void 0:0,scrollHeight:n?void 0:0,x:i?void 0:0,y:i?void 0:0}}componentDidMount(){this._requestFrame()}shouldComponentUpdate(e,t){return(0,i.c)(this,e,t)}componentWillUnmount(){this._cancelFrame(),this._clearTimeout()}_cancelFrame(){this._frameRequestID&&(this._frameRequestID=window.cancelAnimationFrame(this._frameRequestID))}_clearTimeout(){this._measureTimeoutID&&(this._measureTimeoutID=window.clearTimeout(this._measureTimeoutID))}_reset(){const e=this._expandContainer,t=this._shrinkContainer;e.scrollTop=1e5,e.scrollLeft=1e5,t.scrollTop=1e5,t.scrollLeft=1e5}render(){const{id:e,className:t,children:r,style:i,onKeyDown:a,onMeasure:o}=this.props,c="function"!=typeof r;return n.createElement("div",{ref:this._setContainerRef,className:t,id:e,style:i,onKeyDown:a},c?r:r(this.state),n.createElement("div",{ref:this._setExpandContainerRef,className:s,onScroll:this.onScroll},n.createElement("div",{className:"Measure-expandContent-asSKSW"})),n.createElement("div",{ref:this._setShrinkContainerRef,className:s,onScroll:this.onScroll},n.createElement("div",{className:"Measure-shrinkContent-phwzLN Measure-expandContent-asSKSW"})))}}o(c,"defaultProps",{className:"Measure-container-_70qZ9",ignoreWidth:!1,ignoreHeight:!1,ignorePosition:!1,ignoreTransforms:!1,resizeTimeout:100});const l=c},60035:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(97104),s=r(95352),a=(r(79268),r(85236)),o=r(51268),c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t)),f=(e,t,r)=>(h(e,"symbol"!=typeof t?t+"":t,r),r);class v extends n.Component{constructor(e,t){super(e,t),f(this,"_popper"),f(this,"_ref"),f(this,"onOpen",(()=>{var e,t;this._open(),null==(t=(e=this.props).onOpen)||t.call(e)})),f(this,"onClose",(()=>{var e,t;this._close(),null==(t=(e=this.props).onClose)||t.call(e)})),this._ref=e.forwardedRef||n.createRef(),this._popper=null}shouldComponentUpdate(e,t){return(0,o.c)(this,e,t)}componentDidUpdate(e){this._popper&&this._popper.update()}componentWillUnmount(){this._close()}_open(){const{target:e,options:t}=this.props,r=document.getElementById(e)||document.getElementsByName(e)[0];this._popper=(0,s.uV)(r,i.findDOMNode(this._ref.current),t),this._popper.update()}_close(){this._popper&&(this._popper.destroy(),this._popper=null)}render(){return n.createElement(a.c,g(y({},this.props),{ref:this._ref,onClose:this.onClose,onOpen:this.onOpen}))}}f(v,"defaultProps"),v.defaultProps={options:{placement:"bottom-start"}};const b=n.forwardRef(((e,t)=>n.createElement(v,g(y({},e),{forwardedRef:t}))))},85236:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(97104),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t,r)=>(u(e,"symbol"!=typeof t?t+"":t,r),r);class m extends n.Component{constructor(e,t){super(e,t),p(this,"_closeTimeoutID"),p(this,"onCloseTimeout",(()=>{this._closeTimeoutID=null,this.setState({shouldPreventPortalClose:!1},(()=>{this.props.onClose&&this.props.onClose()}))})),p(this,"onInteractionEvent",(e=>{this.props.allowInteractionEventBubbling||e.stopPropagation()})),this.state={isOpen:e.isOpen,shouldPreventPortalClose:!1}}static getDerivedStateFromProps(e,t){return e.isOpen===t.isOpen?null:{isOpen:e.isOpen,shouldPreventPortalClose:e.closeTimeoutMilliseconds&&!e.isOpen&&t.isOpen}}componentDidMount(){this.props.onOpen&&this.props.isOpen&&this.props.onOpen()}componentDidUpdate(e,t){!this.state.shouldPreventPortalClose&&t.shouldPreventPortalClose&&(this._closeTimeoutID=window.clearTimeout(this._closeTimeoutID)),this.state.shouldPreventPortalClose&&!t.shouldPreventPortalClose&&(this._closeTimeoutID=window.setTimeout(this.onCloseTimeout,this.props.closeTimeoutMilliseconds)),this.props.onOpen&&this.props.isOpen&&!e.isOpen&&this.props.onOpen()}componentWillUnmount(){this._closeTimeoutID&&window.clearTimeout(this._closeTimeoutID)}render(){const{className:e,style:t,children:r,forwardedRef:s}=this.props,{isOpen:a,shouldPreventPortalClose:o}=this.state;return a||o?i.createPortal(n.createElement("div",{ref:s,className:e,style:t,onBlur:this.onInteractionEvent,onClick:this.onInteractionEvent,onFocus:this.onInteractionEvent,onMouseDown:this.onInteractionEvent,onMouseUp:this.onInteractionEvent,onTouchCancel:this.onInteractionEvent,onTouchEnd:this.onInteractionEvent,onTouchMove:this.onInteractionEvent,onTouchStart:this.onInteractionEvent},r),document.body):null}}p(m,"defaultProps",{isOpen:!0,closeTimeoutMilliseconds:0,allowInteractionEventBubbling:!1});const h=n.forwardRef(((e,t)=>{return n.createElement(m,(r=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(r,o({forwardedRef:t}))));var r}))},62900:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(89080),i=r.n(n),s=r(42476),a=r(11504),o=r(42268),c=r(8212),l=r(51268);const d={scroller:"Scroller-scroller-aaw2tP",none:"Scroller-none-TvJZmQ",vertical:"Scroller-vertical-nKq0Q8",auto:"Scroller-auto-JAbmLE",horizontal:"Scroller-horizontal-ynfs5r",omni:"Scroller-omni-WuKSJ8",compactScroller:"Scroller-compactScroller-NfSwWT"};var u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e},b=(e,t,r)=>(f(e,"symbol"!=typeof t?t+"":t,r),r);class S extends a.Component{constructor(e,t){super(e,t),b(this,"_animationFrameID"),b(this,"_currentScrollLeft"),b(this,"_currentScrollTop"),b(this,"_scrollTimeoutID"),b(this,"_scrollToPosition"),b(this,"_scrollTopTween"),b(this,"_scrollLeftTween"),b(this,"_scrollerRef"),b(this,"onScroll",(e=>{if(e.target!==this._scrollerRef.current)return;const t=e.target.scrollTop,r=e.target.scrollLeft,n=t!==this._currentScrollTop,i=r!==this._currentScrollLeft;(n||i)&&this._setScrollPosition({scrollTop:t,scrollLeft:r}),this.props.onScroll&&this.props.onScroll(e)})),b(this,"onScrollPositionChange",(()=>{this._animationFrameID=null,this.props.onScrollPositionChange({scrollTop:this._currentScrollTop,scrollLeft:this._currentScrollLeft})})),b(this,"onScrollTimeout",(()=>{this.setState({isScrolling:!1})})),b(this,"onScrollTopUpdate",(e=>{this._updateScrollPosition({scrollTop:e}),this.props.onScrollToUpdate&&this.props.onScrollToUpdate({scrollTop:e})})),b(this,"onScrollTopComplete",(()=>{this._scrollTopTween=null,this.props.onScrollToComplete&&this.props.onScrollToComplete()})),b(this,"onScrollLeftUpdate",(e=>{this._updateScrollPosition({scrollLeft:e}),this.props.onScrollToUpdate&&this.props.onScrollToUpdate({scrollLeft:e})})),b(this,"onScrollLeftComplete",(()=>{this._scrollLeftTween=null,this.props.onScrollToComplete&&this.props.onScrollToComplete()})),this.state={isScrolling:!1},this._scrollerRef=e.forwardedRef||a.createRef(),this._currentScrollTop=0,this._currentScrollLeft=0}componentDidMount(){this._scrollTo(this.props)}UNSAFE_componentWillReceiveProps(e){e.scrollTop===this.props.scrollTop&&e.scrollLeft===this.props.scrollLeft||this.setState({isScrolling:!0})}shouldComponentUpdate(e,t){return(0,l.c)(this,e,t)}componentDidUpdate(e){this.state.isScrolling&&(this._scrollTimeoutID&&window.clearTimeout(this._scrollTimeoutID),this._scrollTimeoutID=window.setTimeout(this.onScrollTimeout,this.props.isScrollingTimeout)),this._scrollTo(this.props)}componentWillUnmount(){this._clearTimeouts(),this._cancelScrollTo()}_setScrollPosition({scrollTop:e,scrollLeft:t}){this._clearTimeouts(),this._currentScrollTop=e,this._currentScrollLeft=t,this._animationFrameID=window.requestAnimationFrame(this.onScrollPositionChange)}_updateScrollPosition({scrollTop:e,scrollLeft:t}){const r=this._scrollerRef.current;null!=e&&(r.scrollTop=e),null!=t&&(r.scrollLeft=t)}_scrollTo({scrollTop:e,scrollLeft:t}){if(null==e&&null==t)return;const r=null!=e&&e!==this._currentScrollTop,n=null!=t&&t!==this._currentScrollLeft;if(!r&&!n)return;if(!this.props.smoothScroll&&!this.props.restoreScroll)return this._currentScrollTop=e,this._currentScrollLeft=t,void this._updateScrollPosition({scrollTop:e,scrollLeft:t});const i=this.props.smoothScrollDuration/1e3;this._scrollToPosition={};const a=this._scrollerRef.current;if(this._cancelScrollTo(),r){const t=Math.min(e,a.scrollHeight-a.clientHeight);this._scrollToPosition.scrollTop=a.scrollTop,this._scrollTopTween=(0,s.Cs)(a.scrollTop,t,{type:"tween",duration:i,onUpdate:this.onScrollTopUpdate,onComplete:this.onScrollTopComplete})}if(n){const e=Math.min(t,a.scrollWidth-a.clientWidth);this._scrollToPosition.scrollLeft=a.scrollLeft,this._scrollLeftTween=(0,s.Cs)(a.scrollLeft,e,{type:"tween",duration:i,onUpdate:this.onScrollLeftUpdate,onComplete:this.onScrollLeftComplete})}}_cancelScrollTo(){this._scrollTopTween&&(this._scrollTopTween.stop(),this._scrollTopTween=null),this._scrollLeftTween&&(this._scrollLeftTween.stop(),this._scrollLeftTween=null)}_clearTimeouts(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._scrollTimeoutID&&window.clearTimeout(this._scrollTimeoutID)}render(){const e=this.props,{className:t,children:r,scrollDirection:n,autoScroll:s,compactScroller:c,enableChildrenProps:l,onScroll:u,onScrollPositionChange:p,forwardedRef:m,smoothScroll:f,restoreScroll:b,smoothScrollDuration:S,scrollTop:P,scrollLeft:I,isScrollingTimeout:E,onScrollToUpdate:w,onScrollToComplete:C}=e,O=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(e,["className","children","scrollDirection","autoScroll","compactScroller","enableChildrenProps","onScroll","onScrollPositionChange","forwardedRef","smoothScroll","restoreScroll","smoothScrollDuration","scrollTop","scrollLeft","isScrollingTimeout","onScrollToUpdate","onScrollToComplete"]);return a.createElement("div",v({ref:this._scrollerRef,className:i()(t,d.scroller,d[n],s&&d.auto,c&&d.compactScroller),onScroll:p?this.onScroll:u},O),l?(0,o.c)(r,(e=>a.cloneElement(e,{isScrolling:this.state.isScrolling,scrollTop:this._currentScrollTop,scrollLeft:this._currentScrollLeft}))):r)}}b(S,"defaultProps",{scrollDirection:c.Mn,autoScroll:!1,smoothScroll:!0,restoreScroll:!1,smoothScrollDuration:400,enableChildrenProps:!1,isScrollingTimeout:100});const P=a.forwardRef(((e,t)=>{return a.createElement(S,(r=v({},e),p(r,m({forwardedRef:t}))));var r}))},76988:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(89080),i=r.n(n),s=r(11504),a=r(87808),o=r(49304);const c={spinner:"Spinner-spinner-XTaskc spin-spin-H8VRGl",spinnerContainer:"Spinner-spinnerContainer-gUBLGs",spinnerLabel:"Spinner-spinnerLabel-ZUuHTc",small:"Spinner-small-VFWYsA Spinner-spinner-XTaskc spin-spin-H8VRGl",medium:"Spinner-medium-CSDGzv Spinner-spinner-XTaskc spin-spin-H8VRGl",large:"Spinner-large-UOvJz_ Spinner-spinner-XTaskc spin-spin-H8VRGl"};function l({className:e,containerClassName:t,labelClassName:r,size:n,color:a,label:o,loadingLabel:l}){const d=i()(e,c[n]),u={borderTopColor:a,borderLeftColor:a};return o?s.createElement("div",{className:i()(t,c.spinnerContainer)},s.createElement("div",{className:d,style:u}),s.createElement("div",{className:i()(r,c.spinnerLabel)},o)):s.createElement("div",{"aria-label":l,className:d,style:u})}l.defaultProps={size:a.IF,color:o.c.primaryColor};const d=l},1292:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(89080),i=r.n(n),s=r(11504),a=r(24808),o=r(87808),c=r(71500);const l={button:"Button-button-TxWeuE Link-link-SxPFpG",default:"Button-default-sxqP0M",primary:"Button-primary-XgQxrm",success:"Button-success-MuPA2f",danger:"Button-danger-cwEm4r",dark:"Button-dark-jHDZPL",small:"Button-small-FKukQD",medium:"Button-medium-xQMNwg",large:"Button-large-mFYLSo"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const y=function(e){var t=e,{className:r,children:n,kind:d=a.sT,size:y=o.IF}=t,g=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","kind","size"]);return s.createElement(c.c,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:i()(r,l.button,d&&l[d],y&&l[y])},g),n)}},52432:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(89080),i=r.n(n),s=r(11504),a=r(97164),o=r(71500),c=r(2540),l=r(87808);const d={disclosureArrowButton:"DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",isSelected:"DisclosureArrowButton-isSelected-NHMC06",small:"DisclosureArrowButton-small-Euj0BD",medium:"DisclosureArrowButton-medium-OfMgTz",large:"DisclosureArrowButton-large-D50Coh",disclosureArrow:"DisclosureArrowButton-disclosureArrow-iPIByG DisclosureArrow-disclosureArrow-NTDkGd",down:"DisclosureArrowButton-down-s8HHHA",left:"DisclosureArrowButton-left-nnfwdR",up:"DisclosureArrowButton-up-BRGGbL",right:"DisclosureArrowButton-right-QQ1qwV"};var u,p,m,h=Object.defineProperty,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class b extends s.Component{render(){const e=this.props,{className:t,arrowClassName:r,children:n,direction:c,kind:u,size:p,isSelected:m}=e,h=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&f.call(e,n)&&(r[n]=e[n]);return r})(e,["className","arrowClassName","children","direction","kind","size","isSelected"]),b=p||l.IF;return s.createElement(o.c,((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e})({"aria-haspopup":!0,className:i()(t,d[b],m&&d.isSelected),isSelected:m,kind:u,size:p},h),n,s.createElement(a.c,{className:i()(r,d[c],d[b]),direction:c,isSelected:m,kind:u,size:b}))}}u=b,p="defaultProps",m={className:d.disclosureArrowButton,arrowClassName:d.disclosureArrow,direction:c.aK,isSelected:!0},v(u,p+"",m);const S=b},3940:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(89080),i=r.n(n),s=r(11504),a=(r(79268),r(71500));var o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){const t=e,{className:r,iconComponent:n,iconClassName:o,activeClassName:p,disabledClassName:m,isDisabled:h,isActive:y,label:g,labelClassName:f,title:v,ariaLabel:b,children:S}=t,P=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","iconComponent","iconClassName","activeClassName","disabledClassName","isDisabled","isActive","label","labelClassName","title","ariaLabel","children"]),I=b||v;return s.createElement(a.c,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":I,className:i()(r,h&&m,y&&p),isDisabled:h,title:v},P),s.createElement(n,{className:o}),g?s.createElement("span",{className:f},g):null,S)}p.defaultProps={className:"IconButton-button-s4bVCh",activeClassName:"IconButton-isActive-SPVM7e",disabledClassName:"IconButton-isDisabled-M81hz3",labelClassName:"IconButton-label-WmQydD",isDisabled:!1};const m=p},71500:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(89080),i=r.n(n),s=r(11504),a=r(21492);r(79268);const o=null;function c(){const e=document.activeElement;return e&&e.dataset&&e.dataset.uid||o}var l=r(49340),d=r(50388),u=r(24808),p=r(51268);const m={link:"Link-link-SxPFpG",default:"Link-default-BXtKLo",primary:"Link-primary-aARVlT",success:"Link-success-xrq8fB",danger:"Link-danger-OnrZ_o",dark:"Link-dark-oZbYO4",small:"Link-small-J8cWdn",medium:"Link-medium-wZWWPc",large:"Link-large-nDat0L",isSelected:"Link-isSelected-x0P_By"};var h=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e},I=(e,t,r)=>(S(e,"symbol"!=typeof t?t+"":t,r),r);let E=o;a.c&&window.addEventListener("blur",(()=>{E=c()}));class w extends s.Component{constructor(e,t){super(e,t),I(this,"_isActive"),I(this,"_isFocused"),I(this,"_isTouch"),I(this,"_preventFocus"),I(this,"_preventOnClick"),I(this,"_ref"),I(this,"_uid"),I(this,"onTouchStart",(e=>{this._isTouch=!0,this._preventFocus=this._shouldPreventFocus(),1===e.touches.length&&this._activate(!0),this.props.onTouchStart&&this.props.onTouchStart(e)})),I(this,"onTouchMove",(e=>{this._activate(!1),this.props.onTouchMove&&this.props.onTouchMove(e)})),I(this,"onTouchEnd",(e=>{const{to:t,target:r,isDisabled:n,onTouchEnd:i}=this.props;this._isActive&&!n&&(!t||r&&"_self"!==r||(e.preventDefault(),window.location.href=t),this._press(e)),this._activate(!1),i&&i(e)})),I(this,"onTouchCancel",(e=>{this._isTouch=!1,this._activate(!1),this.props.onTouchCancel&&this.props.onTouchCancel(e)})),I(this,"onMouseDown",(e=>{this._isTouch||(this._preventFocus=this._shouldPreventFocus(),0===e.button&&this._activate(!0),this.props.onMouseDown&&this.props.onMouseDown(e))})),I(this,"onMouseUp",(e=>{if(this._isTouch)return;const{isDisabled:t,onMouseUp:r}=this.props;this._isActive&&!t&&(this._press(e),this._preventOnClick=!0),this._activate(!1),r&&r(e)})),I(this,"onMouseLeave",(e=>{this._isTouch||(this._isActive&&this.setState({isActive:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e))})),I(this,"onClick",(e=>{this._preventFocus=!1;const{isDisabled:t}=this.props;this._preventOnClick||this._isTouch||this._isActive||!this._isFocused||t||this._press(e),this._preventOnClick=!1,this._isTouch=!1})),I(this,"onFocus",(e=>{this._preventFocus?this._preventFocus=!1:this._uid!==E?(this._focus(!0),this.props.onFocus&&this.props.onFocus(e)):E=o})),I(this,"onBlur",(e=>{this._focus(!1),this.props.onBlur&&this.props.onBlur(e)})),this._preventFocus=!1,this._preventOnClick=!1,this._isTouch=!1,this._isActive=!1,this._isFocused=!1,this._uid=(0,l.c)(),this.state={isActive:!1,isFocused:!1},this._ref=s.createRef()}componentDidMount(){!this.props.isDisabled&&this.props.focusOnEnabled&&this._ref.current.focus()}shouldComponentUpdate(e,t){return(0,p.c)(this,e,t)}componentDidUpdate(e){const t=this.props.focusOnEnabled&&!this.props.isDisabled,r=e.focusOnEnabled&&!e.isDisabled;t&&!r&&this._ref.current.focus()}_activate(e){this._isActive=e,this.setState({isActive:e})}_focus(e){this._isFocused=e,this.setState({isFocused:e})}_shouldPreventFocus(){return!this.props.allowFocusOnPress&&!(c()===this._uid)}_press(e){const{onPress:t}=this.props;t&&t(e)}render(){const e=this.props,{className:t,to:r,kind:n,size:a,isSelected:o,isDisabled:c,component:l,allowFocusOnPress:u,role:p,focusOnEnabled:h,onPress:S}=e,I=((e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(e,["className","to","kind","size","isSelected","isDisabled","component","allowFocusOnPress","role","focusOnEnabled","onPress"]),{isActive:E,isFocused:w}=this.state,C={"data-uid":this._uid};let O=l;return r&&(O="a",C.href=r),C.role=p||(r?"link":"button"),C.className=i()(t,m.link,m[n],a&&m[a],o&&m.isSelected,E&&d.y0,w&&d.o1,c&&d.EP),"button"!==O&&"input"!==O||(C.type=I.type||"button",C.disabled=c),O?s.createElement(O,(M=P(P({},I),C),T={ref:this._ref,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchCancel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onClick:this.onClick,onFocus:this.onFocus,onBlur:this.onBlur},y(M,g(T)))):null;var M,T}}I(w,"defaultProps",{component:"button",kind:u.sT,isSelected:!1,isDisabled:!1,allowFocusOnPress:!1});const C=w},9464:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(89080),i=r.n(n),s=r(11504),a=r(76988),o=r(87808),c=r(49304),l=r(1292);var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){var t=e,{children:r,className:n,loadingLabel:o,spinnerSize:c,spinnerColor:d,isDisabled:y,isSpinning:g}=t,f=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","loadingLabel","spinnerSize","spinnerColor","isDisabled","isSpinning"]);return s.createElement(l.c,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:i()(n,"SpinnerButton-button-tcanHL Button-button-TxWeuE Link-link-SxPFpG",g&&"SpinnerButton-isSpinning-rH02Lt"),isDisabled:y||g},f),s.createElement("span",{className:"SpinnerButton-spinnerContainer-Eqb4MX"},s.createElement(a.c,{className:"SpinnerButton-spinner-ox41on Spinner-spinner-XTaskc spin-spin-H8VRGl",color:d,loadingLabel:o,size:c})),s.createElement("span",{className:"SpinnerButton-label-QlP0_n"},r))}y.defaultProps={isDisabled:!1,isSpinning:!1,spinnerSize:o.wH,spinnerColor:c.c.defaultColor};const g=y},93952:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(87808);const o={input:"CheckInput-input-dUDRsF",label:"CheckInput-label-E9ov4s",small:"CheckInput-small-ku4ETN",large:"CheckInput-large-Wgq5_7",isDisabled:"CheckInput-isDisabled-QjZK5o",hasError:"CheckInput-hasError-RIB5DS"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>(h(e,"symbol"!=typeof t?t+"":t,r),r);class g extends s.Component{constructor(e,t){super(e,t),y(this,"_checkbox"),y(this,"setRef",(e=>{this._checkbox=e})),y(this,"onChange",(e=>{const t=e.target.checked?this.props.checkedValue:this.props.uncheckedValue;this.props.value!==t&&this.props.onChange(t)})),this._checkbox=null}componentDidMount(){this.setIndeterminate()}componentDidUpdate(){this.setIndeterminate()}setIndeterminate(){if(!this._checkbox)return;const{value:e,uncheckedValue:t,checkedValue:r}=this.props;this._checkbox.indeterminate=e!==t&&e!==r}render(){const e=this.props,{className:t,inputClassName:r,errorClassName:n,disabledClassName:a,isDisabled:c,size:y,checkboxText:g,name:f,initialValue:v,value:b,checkedValue:S,uncheckedValue:P,showErrors:I,hasError:E,errors:w,validations:C}=e,O=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(e,["className","inputClassName","errorClassName","disabledClassName","isDisabled","size","checkboxText","name","initialValue","value","checkedValue","uncheckedValue","showErrors","hasError","errors","validations"]);return s.createElement("label",{className:i()(t,o[y],c&&a,E&&n),htmlFor:f},s.createElement("input",(M=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},O),T={ref:this.setRef,checked:b===S,className:r,disabled:c,id:f,type:"checkbox",onChange:this.onChange},l(M,d(T)))),g);var M,T}}y(g,"defaultProps",{className:o.label,inputClassName:o.input,errorClassName:o.hasError,disabledClassName:o.isDisabled,isDisabled:!1,size:a.OM,uncheckedValue:!1,checkedValue:!0,value:!1,hasError:!1});const f=g},74860:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(93952),s=r(39116),a=r(21496),o=r(85032),c=r(4304),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){var t=e,{formGroupClassName:r,labelText:c,checkboxText:l,helpText:h,showErrors:y,errors:g}=t,f=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","labelText","checkboxText","helpText","showErrors","errors"]);const[v]=g;return n.createElement(s.c,{className:r},c?n.createElement(o.c,null,c):null,n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({checkboxText:n.createElement("span",null,l,y&&v?`  ${v}`:null),hasError:y},f)),h?n.createElement(a.c,null,h):null)}h.defaultProps={showErrors:!1,errors:[]};const y=(0,c.c)(h)},84536:(e,t,r)=>{"use strict";r.d(t,{ay:()=>E,cp:()=>O});var n=r(11504),i=r(31772),s=r(95720),a=r.n(s),o=r(55340),c=r(21528),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>d(e,u(t)),v=(e,t,r)=>(y(e,"symbol"!=typeof t?t+"":t,r),r);const b="CHANGE",S="REPLACE_STATE",P="RESET",I="SHOW_ERRORS",E={change:(0,o.c)(b),replaceState:(0,o.c)(S),reset:(0,o.c)(P),showErrors:(0,o.c)(I)};function w(e={},{type:t,payload:r}){switch(t){case b:{const{name:t,change:n}=r;if(null==n){const r=g({},e);return delete r[t],r}return f(g({},e),{[t]:n})}case S:return r;case P:return{};case I:return a().mapObject(e,(e=>f(g({},e),{showErrors:0!==e.errors.length})));default:return e}}class C extends n.Component{constructor(e,t){super(e,t),v(this,"actions"),v(this,"defaultState"),v(this,"prevState"),v(this,"store"),v(this,"unsubscribe"),v(this,"onFormStoreChange",(()=>{const e=this.store.getState();this.defaultState||(this.defaultState=this.prevState),e!==this.prevState&&(this.prevState=e,this.props.onChange(e,this.defaultState))})),v(this,"onSubmit",(e=>{e.preventDefault(),e.nativeEvent.preventDefault();const t=this.store.getState();if(a().some(t,((e,t)=>0!==e.errors.length)))this.actions.showErrors();else{const e=a().mapObject(t,((e,t)=>e.value));this.props.onSubmit(e,t)}})),this.store=(0,i.eC)(w),this.prevState=this.store.getState(),this.actions=(0,i.sF)(E,this.store.dispatch)}getChildContext(){return{formStore:this.store}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}UNSAFE_componentWillReceiveProps(e){e.formState&&this.store.getState()!==e.formState&&this.actions.replaceState(e.formState)}componentWillUnmount(){this.unsubscribe&&(this.unsubscribe(),this.store.replaceReducer((e=>e)))}render(){const e=this.props,{children:t,formState:r,onChange:i}=e,s=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(e,["children","formState","onChange"]);return n.createElement("form",f(g({},s),{onSubmit:this.onSubmit}),t)}}v(C,"childContextTypes",{formStore:c.c}),v(C,"defaultProps",{onSubmit(){},onChange(){}});const O=C},39116:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({},i),r)}l.defaultProps={className:"FormGroup-group-J_LPqU"};const d=l},21496:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t,r=e,{children:i,className:u}=r,p=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(r,["children","className"]);return n.createElement("p",(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},p),s(t,a({className:u}))),i)}u.defaultProps={className:"FormHelp-help-yud9Zf"};const p=u},85032:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(89080),i=r.n(n),s=r(11504);var a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){var t,r,n=e,{children:a,className:m,errorClassName:h,name:y,hasError:g}=n,f=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(n,["children","className","errorClassName","name","hasError"]);return s.createElement("label",(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},f),r={className:i()(m,g&&h),htmlFor:y},o(t,c(r))),a)}m.defaultProps={className:"FormLabel-label-KQvmHO",errorClassName:"FormLabel-hasError-lgXkns"};const h=m},72764:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(85032);const s=function(e){const{className:t,name:r,labelText:s,showErrors:a,errors:o}=e,[c]=o;return n.createElement(i.c,{className:t,hasError:a,name:r},s,a&&c?`  ${c}`:null)}},1504:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(89080),i=r.n(n),s=r(11504),a=r(95720),o=r.n(a),c=r(87808);const l={input:"SelectInput-input-EWuFb5 input-input-XAtklw",small:"SelectInput-small-vV09Zl input-small-eTaFF8",select:"SelectInput-select-hEuTJi",large:"SelectInput-large-ByAaf3 input-large-KIQwL0",isDisabled:"SelectInput-isDisabled-ekhnwS",hasError:"SelectInput-hasError-tqVhlY"};var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t,r)=>(g(e,"symbol"!=typeof t?t+"":t,r),r);class v extends s.Component{constructor(){super(...arguments),f(this,"onChange",(e=>{this.props.onChange(e.target.value)}))}render(){const e=this.props,{className:t,errorClassName:r,disabledClassName:n,isDisabled:a,size:c,name:d,initialValue:f,value:v,values:b,hasError:S,errors:P,validations:I}=e,E=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(e,["className","errorClassName","disabledClassName","isDisabled","size","name","initialValue","value","values","hasError","errors","validations"]);return s.createElement("div",{className:i()(t,l[c],a&&n,S&&r)},s.createElement("select",(w=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e})({},E),C={className:l.select,disabled:a,id:d,name:d,value:v,onChange:this.onChange},u(w,p(C))),b.map(((e,t)=>{if(o().isString(e))return s.createElement("option",{key:t,value:e},e);const[r]=o().keys(e);return s.createElement("option",{key:t,value:r},o().result(e,r))}))));var w,C}}f(v,"defaultProps",{className:l.input,errorClassName:l.hasError,disabledClassName:l.isDisabled,isDisabled:!1,size:c.OM,hasError:!1});const b=v},17644:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(39116),s=r(21496),a=r(72764),o=r(1504),c=r(4304),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=(0,c.c)((function(e){var t=e,{formGroupClassName:r,formLabelClassName:c,name:l,labelText:h,helpText:y,showErrors:g,errors:f}=t,v=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","formLabelClassName","name","labelText","helpText","showErrors","errors"]);return n.createElement(i.c,{className:r},n.createElement(a.c,{className:c,errors:f,labelText:h,name:l,showErrors:g}),n.createElement(o.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({hasError:g,name:l},v)),y?n.createElement(s.c,null,y):null)}))},12784:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(87808);const o={input:"TextInput-input-NqTdW3 input-input-XAtklw",small:"TextInput-small-efNCXZ input-small-eTaFF8",large:"TextInput-large-I75O3g input-large-KIQwL0",isDisabled:"TextInput-isDisabled-PzBOCB input-isDisabled-NZu29w",hasError:"TextInput-hasError-o5OcFz input-hasError-GqupwL"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>(h(e,"symbol"!=typeof t?t+"":t,r),r);class g extends s.Component{constructor(){super(...arguments),y(this,"inputElement"),y(this,"onChange",(e=>{this.props.onChange(e.target.value)})),y(this,"onFocus",(()=>{this._select()})),y(this,"onRef",(e=>{this.inputElement=e}))}componentDidMount(){this.props.focusOnMount&&(this.inputElement.focus(),this._select())}_select(){if(this.inputElement&&this.props.selectTextOnFocus){const e=this.inputElement.value,t=e?e.length:0;this.inputElement.selectionStart=0,this.inputElement.selectionEnd=t}}render(){const e=this.props,{className:t,errorClassName:r,disabledClassName:n,isDisabled:a,initialValue:c,value:y,size:g,type:f,name:v,placeholder:b,hasError:S,errors:P,validations:I,focusOnMount:E,selectTextOnFocus:w}=e,C=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(e,["className","errorClassName","disabledClassName","isDisabled","initialValue","value","size","type","name","placeholder","hasError","errors","validations","focusOnMount","selectTextOnFocus"]);return s.createElement("input",(O=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},C),M={ref:E?this.onRef:null,className:i()(t,o[g],a&&n,S&&r),disabled:a,id:v,name:v,placeholder:b,type:f,value:y,onChange:this.onChange,onFocus:this.onFocus},l(O,d(M))));var O,M}}y(g,"defaultProps",{className:o.input,errorClassName:o.hasError,disabledClassName:o.isDisabled,isDisabled:!1,size:a.OM,type:"text",hasError:!1,focusOnMount:!1,selectTextOnFocus:!1});const f=g},36148:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(3008),s=r(77072),a=r(39116),o=r(21496),c=r(72764),l=r(12784),d=r(4304),u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){var t,r=e,{formGroupClassName:d,formLabelClassName:u,inputClassName:g,name:f,labelText:v,helpText:b,showErrors:S,errors:P,children:I,helpWidth:E}=r,w=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(r,["formGroupClassName","formLabelClassName","inputClassName","name","labelText","helpText","showErrors","errors","children","helpWidth"]);return n.createElement(a.c,{className:d},I,n.createElement(c.c,{className:u,errors:P,labelText:v,name:f,showErrors:S}),n.createElement(l.c,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e})({className:g,hasError:S,name:f},w)),b?n.createElement(i.QZ,{alignItems:"center",justifyContent:"space-between",width:E,wrap:"wrap"},n.createElement(o.c,null,b),w.maxLength?n.createElement(s.a,{color:"muted",font:"body-3"},`${null==(t=w.value)?void 0:t.length}/${w.maxLength}`):null):null)}g.defaultProps={errors:[]};const f=(0,d.c)(g)},4304:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(11504),i=r(31772),s=r(95720),a=r.n(s),o=(r(79268),r(29377)),c=r(55588),l=r(50492),d=r(21528),u=r(23276),p=r(51268),m=r(84536),h=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e},I=(e,t)=>y(e,g(t)),E=(e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r},w=(e,t,r)=>(S(e,"symbol"!=typeof t?t+"":t,r),r);function C(e){var t;const r=`FormInput(${(0,l.c)(e)})`;return t=class extends n.Component{constructor(e,t){super(e,t),w(this,"actions"),w(this,"hasBlurred"),w(this,"previousFormState"),w(this,"store"),w(this,"unsubscribe"),w(this,"onFormStoreChange",(()=>{const{name:e}=this.props,t=this.store.getState(),r=t[e];r||this.initializeInputState(this.props),(0,u.c)(t,this.previousFormState)||(this.previousFormState=t,this.handleStateChange(this.props)),this.state!==r&&null!=r&&this.setState(r)})),w(this,"onChange",(e=>{const{transformValue:t}=this.props;this.handleStateChange(this.props,t?t(e):e)})),w(this,"onBlur",(()=>{if(this.hasBlurred)return;this.hasBlurred=!0;const e=this.store.getState(),{name:t}=this.props,r=e[t],n=this.calculateErrors(r.value,e,this.props);this.actions.change({name:t,change:I(P({},r),{errors:n,showErrors:0!==n.length})})})),this.store=t.formStore,this.actions=(0,i.sF)(m.ay,this.store.dispatch),this.state=null,this.hasBlurred=!1}UNSAFE_componentWillMount(){this.previousFormState=this.store.getState(),this.unsubscribe=this.store.subscribe(this.onFormStoreChange),this.initializeInputState(this.props)}UNSAFE_componentWillReceiveProps(e){(0,o.c)(e.initialValue)&&(0,o.c)(this.props.initialValue)?(0,u.c)(e.initialValue,this.props.initialValue)||this.handleStateChange(e,e.initialValue):a().isEqual(e.initialValue,this.props.initialValue)||this.handleStateChange(e,e.initialValue)}shouldComponentUpdate(e,t){return(0,p.c)(this,e,t)}componentWillUnmount(){const{name:e}=this.props;this.unsubscribe&&this.unsubscribe(),this.actions.change({name:e,change:null})}initializeInputState(e){const{name:t,initialValue:r}=e,n=this.store.getState();n[t]={errors:this.calculateErrors(r,n,e),showErrors:!1,value:r},this.actions.replaceState(n)}handleStateChange(e,t){const r=this.store.getState(),{name:n}=e,i=r[n],s=Array.isArray(t)||null!=t?t:i.value,o=this.calculateErrors(s,r,e);a().isEqual(i.value,s)&&a().isEqual(i.errors,o)||this.actions.change({name:n,change:{errors:o,showErrors:this.hasBlurred&&0!==o.length,value:s}})}calculateErrors(e,t,r){const{validations:n}=r;return n.map((r=>r(e,t))).filter((e=>null!=e))}render(){const t=this.props,{validations:r,errors:i,transformValue:s,onChange:a}=t,o=E(t,["validations","errors","transformValue","onChange"]);if(!this.state)return null;const l=i.length>0,{value:d,errors:u,showErrors:p}=this.state;return n.createElement(e,I(P({},o),{errors:l?i:u,showErrors:!!l||p,value:d,onBlur:this.onBlur,onChange:(0,c.c)(this.onChange,a)}))}},w(t,"displayName",r),w(t,"contextTypes",{formStore:d.c}),w(t,"defaultProps",{validations:[],errors:[]}),w(t,"WrappedComponent",e),t}},5164:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(52432),s=r(71500),a=r(2540);const o="PageHeaderBreadcrumbButton-link-Ka3Nfp";var c,l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class h extends n.Component{render(){const e=this.props,{children:t,to:r,hasMenu:c,isMenuOpen:l,isSelected:h,isDisabled:y}=e,g=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(e,["children","to","hasMenu","isMenuOpen","isSelected","isDisabled"]);return c||r?c?n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({className:"PageHeaderBreadcrumbButton-button-HPqLEx DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG","data-testid":"typeDropdownButton",direction:l?a.UP:a.aK,isDisabled:y,isSelected:h},g),t):n.createElement(s.c,{className:o,isDisabled:y,to:r},t):n.createElement("span",{className:o},t)}}m(h,"symbol"!=typeof(c="defaultProps")?c+"":c,{hasMenu:!1,isMenuOpen:!1,isSelected:!1,isDisabled:!1});const y=h},70592:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderLeft-pageHeaderLeft-GB_cUK"};const s=i},47392:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderRight-pageHeaderRight-j9Yjqh"};const s=i},13760:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(26084),s=r(46764),a=r(12612);const o=function({className:e,type:t}){return(0,a.ue)(t)?n.createElement(i.c,{className:e}):n.createElement(s.c,{className:e})}},47008:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e};function d(e){const{className:t,style:r,src:i,width:s,height:a,backgroundSize:o,backgroundPosition:c,backgroundRepeat:d}=e;return n.createElement("div",{className:t,style:l({width:s,height:a,backgroundImage:`url(${i})`,backgroundSize:o,backgroundPosition:c,backgroundRepeat:d},r)})}d.defaultProps={backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"};const u=d},20668:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(13968),s=r(83216),a=r(47008),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};function y(e,t,r){const{className:n,style:i,styleProps:s,durationMilliseconds:a,useCrossFade:o}=r,c=document.createElement("div");c.className=n,Object.assign(c.style,h(h({position:"absolute",backgroundImage:`url(${e})`,width:"100%",height:"100%"},s),i)),t.appendChild(c),o&&"function"==typeof c.animate&&c.animate([{opacity:0},{opacity:1}],a)}function g(e){const{className:t,style:r,containerClassName:i,containerStyle:s,src:a,width:o,height:c,backgroundSize:l,backgroundPosition:d,backgroundRepeat:u,animateOnMount:p,disableCrossFade:m,durationMilliseconds:g}=e,f=(0,n.useRef)(null),v=(0,n.useRef)(!0),b=h({position:"relative",width:o,height:c},s);return(0,n.useLayoutEffect)((()=>{const e=v.current;v.current=!1;const n={className:t,style:r,styleProps:{backgroundSize:l,backgroundPosition:d,backgroundRepeat:u},durationMilliseconds:g,useCrossFade:!e||p};let i,s;return m&&(n.useCrossFade=!1),e?y(a,f.current,n):i=window.requestAnimationFrame((()=>{i=null,y(a,f.current,n),s=window.setTimeout((()=>{for(;f.current.childNodes.length>1;)(e=f.current).removeChild(e.childNodes[0]);var e}),2*g)})),()=>{i&&window.cancelAnimationFrame(i),s&&window.clearTimeout(s)}}),[t,r,a,l,d,u]),n.createElement("div",{ref:f,className:i,style:b})}g.defaultProps=c(h({},a.c.defaultProps),l({animateOnMount:!0,disableCrossFade:!1,durationMilliseconds:(0,i.c)(s.c.slowSpeed)}));const f=g},98832:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(47008),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){e&&(e.onload=e.onabort=e.onerror=void 0)}function m(e){const t=e,{src:r,emptySrc:i,component:s,preloadOnMount:m,onLoad:h,onError:y}=t,g=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["src","emptySrc","component","preloadOnMount","onLoad","onError"]),[f,v]=(0,n.useState)(m?null:r),[b,S]=(0,n.useState)(null),P=(0,n.useRef)(m);return(0,n.useEffect)((()=>{if(!P.current)return void(P.current=!0);if(!r)return;let e=new window.Image;return e.onload=()=>{e=p(e),v(r),S(null)},e.onabort=e.onerror=()=>{e=p(e),v(null),S(new Error(`Unable to load ${r}`))},e.src=r,()=>{e=p(e)}}),[r]),(0,n.useEffect)((()=>{!r&&f&&v(null)}),[f,r]),(0,n.useEffect)((()=>{f&&h&&h(f)}),[f,h]),(0,n.useEffect)((()=>{b&&y&&y(b)}),[b,y]),n.createElement(s,(I=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},g),a(I,o({src:f||i}))));var I}m.defaultProps={emptySrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",component:i.c,preloadOnMount:!0};const h=m},58840:(e,t,r)=>{"use strict";r.d(t,{cp:()=>C});var n=r(37588),i=r.n(n),s=r(11504),a=r(3736),o=r(77224),c=r(98476),l=(r(79268),r(43864)),d=r(96504),u=r(98832),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b=new a.c,S={},P={},I=[c.es,c._A,c.sZ,c.WC,c.io,c.kb,c.Oi,c.CM].sort(((e,t)=>E(e)-E(t)));function E(e){if(P.hasOwnProperty(e))return P[e];const t=e.split("-")[1];return P[e]=t,t}function w(e){const t=e,{url:r,minSize:n,format:a,quality:c,upscale:p,filters:P,allowPixelRatioSize:w,allowImageBlobs:C,supportsSize:O,onError:M}=t,T=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&f.call(e,n)&&(r[n]=e[n]);return r})(t,["url","minSize","format","quality","upscale","filters","allowPixelRatioSize","allowImageBlobs","supportsSize","onError"]),D=function(e,t){if(!e)return;const r=Object.assign(function(e){const t=e.allowPixelRatioSize?(0,o.c)():1,r=e.size||function(e){if(S.hasOwnProperty(e))return S[e];const t=I.find((t=>E(t)>=e))||I[I.length-1];return S[e]=t,t}(e.width);if(e.supportsSize)return{size:r,scale:Math.ceil(t)};{const n=E(r),i=e.height/e.width;return{width:Math.ceil(n*t),height:Math.ceil(i*n*t),minSize:e.minSize?1:void 0,upscale:e.upscale?1:void 0}}}(t),t.filters);t.format&&(r.format=t.format),t.quality&&(r.quality=t.quality);const n=e.indexOf("?");let i=e;return n>-1?(i=d.c.join(e.substring(0,n),r),i+=-1===i.indexOf("?")?"?":"&",i+=e.substring(n+1)):i=d.c.join(i,r),i}(r,e);let k,x;D&&C&&(k=b.getBlobUrl(D),k||(x=b.getPlaceholder(D)));const[A,R]=(0,s.useState)(k||x||(C?null:D)),N=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{if(N.current&&(N.current=!1,null==A))return void(M&&M());let e;return k?A!==k&&R(k):D&&C?(e=function(e){const t=i().Deferred(),r={cancelable:(0,l.c)(t.promise()),xhr:null},n=new window.XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",r.xhr=n,n.onreadystatechange=()=>{if(4===n.readyState)if(n.onreadystatechange=null,200===n.status){const r=new window.Blob([n.response],{type:"image/jpeg"}),i=window.URL.createObjectURL(r);b.store({url:e,blobUrl:i}),t.resolve(i)}else t.reject()},n.send(),r}(D),e.cancelable.promise.then((t=>{e=null,R(t)}),(({isCanceled:t}={})=>{t||(e=null,null===A?M&&M():(N.current=!0,R(null)))}))):R(D&&!C?D:null),()=>{e&&(e.cancelable.cancel(),e.xhr&&(e.xhr.onreadystatechange=null,e.xhr.abort()))}}),[A,D,k,C,M]),s.createElement(u.c,(L=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e})({},T),m(L,h({src:A,onError:M}))));var L}w.defaultProps={minSize:!0,upscale:!0,allowPixelRatioSize:!0,allowImageBlobs:!0};const C=(0,s.memo)(w)},96704:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(89080),i=r.n(n),s=r(11504),a=r(95720),o=r.n(a),c=r(50388),l=r(23276),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t,r)=>(h(e,"symbol"!=typeof t?t+"":t,r),r);class f extends s.Component{constructor(e,t){super(e,t),g(this,"_keyPool"),g(this,"_shouldRequestPage"),this.state=this._getListState(e),this._keyPool=function(e=""){const t=[],r={},n={};let i=0;function s(){let r;return t.length?r=t.shift():(r=e+i,i++),r}function a(e){delete r[e]}return{getKeys(e,i,c,l=0,d){o().each(r,((r,s)=>{const a=r.item;if(null===a)t.push(s);else{const r=o().isString(a)?a:a[d],u=c.indexOf(a)+l;(u<e||u>i)&&(t.push(s),delete n[r])}}));for(let t=e;t<=i;t++){const e=c[t-l]||null,i=e&&(o().isString(e)?e:e[d]);let a=e&&n[i];a||(a=s(),e&&(n[i]=a)),r[a]={index:t,item:e}}return t.forEach(a),t.length=0,o().extend({},r)}}}("cell"),this._shouldRequestPage=!1}UNSAFE_componentWillMount(){this.props.onListUpdate&&this.props.onListUpdate(this.state)}componentDidMount(){this._checkForPageRequest()}UNSAFE_componentWillReceiveProps(e){const t=this._getListState(e);(0,l.c)(this.state,t)||this.setState(t)}shouldComponentUpdate(e,t){const r=this.props,n=this.state;return e.items!==r.items||e.size!==r.size||e.viewportWidth!==r.viewportWidth||e.viewportHeight!==r.viewportHeight||e.listTop!==r.listTop||e.listLeft!==r.listLeft||e.isScrolling!==r.isScrolling||e.skipRenderCells!==r.skipRenderCells||e.layout!==r.layout||e.cellRenderer!==r.cellRenderer||t.visibleStartIndex!==n.visibleStartIndex||t.visibleEndIndex!==n.visibleEndIndex||t.partiallyVisibleStartIndex!==n.partiallyVisibleStartIndex||t.partiallyVisibleEndIndex!==n.partiallyVisibleEndIndex||t.renderStartIndex!==n.renderStartIndex||t.renderEndIndex!==n.renderEndIndex||t.moveIndex!==n.moveIndex}UNSAFE_componentWillUpdate(e,t){this.props.onListUpdate&&t!==this.state&&this.props.onListUpdate(t)}componentDidUpdate(){this._checkForPageRequest()}_getListState(e){const t=this._getListStyle(e),r=e.layout.getLandmarks&&e.layout.getLandmarks(),n=e.layout.getRangesForPosition(e.scrollTop,e.scrollLeft,e.size);return{listStyle:t,landmarks:r,visibleStartIndex:n.visibleStartIndex,visibleEndIndex:n.visibleEndIndex,partiallyVisibleStartIndex:n.partiallyVisibleStartIndex,partiallyVisibleEndIndex:n.partiallyVisibleEndIndex,renderStartIndex:n.renderStartIndex,renderEndIndex:n.renderEndIndex,moveIndex:e.moveIndex}}_getListStyle(e){const{size:t,layout:r,viewportWidth:n,viewportHeight:i,listTop:s,listLeft:a}=e,o={viewportWidth:n,viewportHeight:i,listTop:s,listLeft:a};return r.getListStyle(o,t)}_checkForPageRequest(){const e=this.state;this._shouldRequestPage&&(this._shouldRequestPage=!1,this.props.onPageRequest({startIndex:e.renderStartIndex,endIndex:e.renderEndIndex}))}renderCells(){const{keyPropName:e,items:t,itemsOffset:r,size:n,layout:i,hasNestedList:s,viewportWidth:a,viewportHeight:c,scrollLeft:l,scrollTop:d,cellRenderer:u,isScrolling:p,onPageRequest:m}=this.props,{moveIndex:h,renderStartIndex:g,renderEndIndex:f,partiallyVisibleStartIndex:v,partiallyVisibleEndIndex:b}=this.state;if(!n)return[];let S=n>t.length&&f===t.length-1;const P=this._keyPool.getKeys(g,f,t,r,e),I=[];return o().each(P,((r,m)=>{const g=r.index,f=r.item,P=g>=v&&g<=b,E=i.getPositionForIndex(g,n,t);(null===f||s)&&(S=!0);let w={key:m,keyPropName:e,isVirtual:!0,isVisible:P,isScrolling:p,moveIndex:h,viewportWidth:a,viewportHeight:c,cellIndex:g,cellX:E.cellX,cellY:E.cellY,cellWidth:E.cellWidth,cellHeight:E.cellHeight};s&&(w.scrollLeft=l,w.scrollTop=d),o().isString(f)?w[e]=f:w=y(y({},f),w),I.push(u(w))})),this._shouldRequestPage=!!m&&S&&!p,I}render(){const e=this._getListStyle(this.props),{className:t,isScrolling:r,skipRenderCells:n,children:a}=this.props;return s.createElement("div",{className:i()(t,r&&c.uM),style:e},n?null:this.renderCells(),a)}}g(f,"defaultProps",{keyPropName:"entityID",items:[],itemsOffset:0,hasNestedList:!1,listTop:0,listLeft:0,isScrolling:!1,skipRenderCells:!1});const v=f},43880:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(11504),i=r(4012),s=r(62900),a=r(96704),o=r(16512),c=r(8212),l=r(51268),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t,r)=>(g(e,"symbol"!=typeof t?t+"":t,r),r);function b(e,t){if(t.shouldCenterCell){const r=(t.viewportDimension-t.cellDimension)/2,n=Math.round(e-r);return Math.max(n,0)}return e-(t.offset||0)}class S extends n.Component{constructor(e,t){super(e,t),v(this,"_currentScrollIndex"),v(this,"_scrollPositionKey"),v(this,"onScrollPositionChange",(({scrollTop:e,scrollLeft:t})=>{this.setState({scrollTop:e,scrollLeft:t})})),v(this,"onListUpdate",(e=>{const{visibleStartIndex:t}=e,{scrollIndex:r,onListScrollIndexChange:n,onListUpdate:i}=this.props;this._currentScrollIndex=t,this.state.isRestoringScrollPosition&&this.setState({isRestoringScrollPosition:!1}),n&&r!==t&&n(t),i&&i(e)})),v(this,"onMeasure",(e=>{const t=Math.round(e.width),r=Math.round(e.height),{onMeasure:n}=this.props;this.setState({isMeasured:!0,width:t,height:r}),n&&n(e)})),this.state={isRestoringScrollPosition:!1,isMeasured:!1,width:null,height:null,scrollTop:0,scrollLeft:0},this._currentScrollIndex=0,e.scrollPositionStorageKey&&(this._scrollPositionKey=`${o.c.getPageKey()}!scrollPosition!${e.scrollPositionStorageKey}`)}UNSAFE_componentWillMount(){this.props.scrollIndex||this._restoreScrollPosition()}shouldComponentUpdate(e,t){return(0,l.c)(this,e,t)}componentDidUpdate(e,t){const{scrollIndex:r,scrollDirection:n,shouldCenterScrollIndex:i,layout:s}=this.props,{scrollLeft:a,scrollTop:o,width:l,height:d,isMeasured:u}=this.state;if(null==r||r===this._currentScrollIndex&&!i)return;const p=u&&!t.isMeasured&&r>0,m=u&&r!==e.scrollIndex,h=i!==e.shouldCenterScrollIndex;if(p||m||h){const e=function(e,t,{shouldCenterCell:r,outerPaddingLeft:n,outerPaddingTop:i,scrollerWidth:s,scrollerHeight:a}){return{scrollLeft:e===c.uw?b(t.cellX,{shouldCenterCell:r,offset:n,viewportDimension:s,cellDimension:t.cellWidth}):0,scrollTop:e===c.Mn?b(t.cellY,{shouldCenterCell:r,offset:i,viewportDimension:a,cellDimension:t.cellHeight}):0}}(n,s.getPositionForIndex(Math.max(r,0)),{shouldCenterCell:i,outerPaddingLeft:s.options.outerPaddingLeft,outerPaddingTop:s.options.outerPaddingTop,scrollerWidth:l,scrollerHeight:d}),t=e.scrollLeft!==a||e.scrollTop!==o;this.setState({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,isRestoringScrollPosition:p&&t})}}componentWillUnmount(){this._scrollPositionKey&&o.c.set(this._scrollPositionKey,{scrollTop:this.state.scrollTop,scrollLeft:this.state.scrollLeft})}_restoreScrollPosition(){if(this._scrollPositionKey){const e=o.c.get(this._scrollPositionKey);e&&this.setState(f({isRestoringScrollPosition:!0},e))}}render(){const e=this.props,{className:t,children:r,scrollerClassName:o,virtualListClassName:c,ignoreWidth:l,ignoreHeight:d,resizeTimeout:u,scrollDirection:p,scrollIndex:g,scrollPositionStorageKey:v,smoothScroll:b,scrollerStyle:S,forwardedRef:P,onListUpdate:I,onMeasure:E,onScroll:w}=e,C=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(e,["className","children","scrollerClassName","virtualListClassName","ignoreWidth","ignoreHeight","resizeTimeout","scrollDirection","scrollIndex","scrollPositionStorageKey","smoothScroll","scrollerStyle","forwardedRef","onListUpdate","onMeasure","onScroll"]),{isMeasured:O,isRestoringScrollPosition:M,width:T,height:D,scrollTop:k,scrollLeft:x}=this.state;return n.createElement(i.c,{className:t,ignoreHeight:d,ignorePosition:!0,ignoreWidth:l,resizeTimeout:u,onMeasure:this.onMeasure},O?n.createElement(s.c,{ref:P,className:o,enableChildrenProps:!0,scrollDirection:p,scrollLeft:x,scrollTop:k,smoothScroll:!1!==b&&!M,style:S,onScroll:w,onScrollPositionChange:this.onScrollPositionChange},n.createElement(a.c,f({className:c,skipRenderCells:M,viewportHeight:D,viewportWidth:T,onListUpdate:this.onListUpdate},C)),r):null)}}v(S,"defaultProps",{scrollDirection:c.Mn,scrollerClassName:"VirtualListScroller-scroller-eDZkq_",shouldCenterScrollIndex:!1});const P=n.forwardRef(((e,t)=>{return n.createElement(S,(r=f({},e),u(r,p({forwardedRef:t}))));var r}))},24752:(e,t,r)=>{"use strict";r.d(t,{c:()=>_});var n=r(89080),i=r.n(n),s=r(42476),a=r(11504),o=r(6968),c=r(60035),l=r(62900),d=r(32036),u=r(93980),p=r(49340),m=r(8212),h=r(87808),y=r(51268),g=r(83216),f=r(35624),v=r(37365);const b={menuPortal:"Menu-menuPortal-EGqW0f",menuScroller:"Menu-menuScroller-XtY7Ni Scroller-vertical-nKq0Q8",menu:"Menu-menu-OCzudL",isDisabled:"Menu-isDisabled-Enos2t",small:"Menu-small-neDrBw",medium:"Menu-medium-O3rEAq",large:"Menu-large-Qo_IVL"};var S=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&O(e,r,t[r]);return e},T=(e,t)=>P(e,I(t)),D=(e,t,r)=>(O(e,"symbol"!=typeof t?t+"":t,r),r);const k=(0,d.c)(g.c.menuSpeed),x=1e3*k,A=parseInt(f.c.menuPadding,10),R={ease:"easeOut",duration:k},N={ease:v.c.motionEasing,duration:k},L={opacity:R,y:N,scale:N},j={preEnter:{opacity:0,y:-10,scale:.95,transition:L},enter:{opacity:1,y:0,scale:1,transition:L},exit:{opacity:0,y:10,scale:.95,transition:L}},U=[{name:"preventOverflow",enabled:!0,options:{altAxis:!0}}];function F(e){return Math.min(window.innerHeight-2*A,e.maxHeight)}class V extends a.Component{constructor(e,t){super(e,t),D(this,"_menuID"),D(this,"_willMenuClose"),D(this,"onResize",(e=>{this.setState({maxHeight:F(this.props)})})),D(this,"onWindowDownPress",(e=>{this._isElementContainedOrTarget(e.target)||(this._willMenuClose=!0)})),D(this,"onWindowUpPress",(e=>{this._willMenuClose&&!this._isElementContainedOrTarget(e.target)&&this.props.onMenuClose(),this._willMenuClose=!1})),D(this,"onKeyDown",(e=>{const t=e.keyCode;t===o.k0?u.yE(e):t===o.UX&&(e.preventDefault(),e.stopPropagation(),this.props.onMenuClose(),u.yQ())})),this.state={maxHeight:F(e)},this._willMenuClose=!1,this._menuID=(0,p.c)()}componentDidMount(){this.props.isOpen&&this._enable(),window.addEventListener("resize",this.onResize)}shouldComponentUpdate(e,t){return(0,y.c)(this,e,t)}componentDidUpdate(e,t){const r=e.isOpen&&!e.isAutoCloseDisabled,n=this.props.isOpen&&!this.props.isAutoCloseDisabled;!r&&n?this._enable():r&&!n&&this._disable()}componentWillUnmount(){this.props.isOpen&&!this.props.isAutoCloseDisabled&&this._disable(),window.removeEventListener("resize",this.onResize)}_enable(){u.kV(document.getElementById(this._menuID)),document.addEventListener("mousedown",this.onWindowDownPress,{capture:!0}),document.addEventListener("touchstart",this.onWindowDownPress,{capture:!0}),document.addEventListener("mouseup",this.onWindowUpPress,{capture:!0}),document.addEventListener("touchend",this.onWindowUpPress,{capture:!0}),document.addEventListener("keydown",this.onKeyDown,{capture:!0})}_disable(){document.removeEventListener("mousedown",this.onWindowDownPress,{capture:!0}),document.removeEventListener("touchstart",this.onWindowDownPress,{capture:!0}),document.removeEventListener("mouseup",this.onWindowUpPress,{capture:!0}),document.removeEventListener("touchend",this.onWindowUpPress,{capture:!0}),document.removeEventListener("touchend",this.onWindowUpPress,{capture:!0})}_isElementContainedOrTarget(e){const{target:t}=this.props,r=document.getElementById(this._menuID),n=r&&r.contains(e),i=!n&&document.getElementById(t),s=i&&i.contains(e);return n||s}render(){var e;const{children:t,className:r,portalClassName:n,target:o,options:d,isOpen:u,isDisabled:p,scrollerProps:m,size:h,onMouseEnter:y,onMouseLeave:g,onMenuCloseComplete:f}=this.props,{maxHeight:v}=this.state;return a.createElement(c.c,{className:n,closeTimeoutMilliseconds:x,isOpen:u,options:T(M({placement:"bottom-start"},d),{modifiers:[...U,...null!=(e=null==d?void 0:d.modifiers)?e:[]]}),target:o,onClose:f},a.createElement(s.Iz,null,u?a.createElement(s.q4.div,{key:"container",animate:"enter",className:i()(r,b[h],p&&b.isDisabled),exit:"exit",id:this._menuID,initial:"preEnter",variants:j,onMouseEnter:y,onMouseLeave:g},a.createElement(l.c,T(M({},m),{style:{maxHeight:v}}),t)):null))}}D(V,"defaultProps",{className:b.menu,portalClassName:b.menuPortal,size:h.IF,maxHeight:600,isDisabled:!1,scrollerProps:{className:b.menuScroller,scrollDirection:m.Mn,autoScroll:!0}});const _=V},54872:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{className:t,children:r}=e;return n.createElement("div",{className:t},r)}i.defaultProps={className:"MenuHeader-menuHeader-CXps09"};const s=i},36728:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(89080),i=r.n(n),s=r(11504),a=r(71500),o=r(24808);const c={menuItem:"MenuItem-menuItem-C_KBbX",isDisabled:"MenuItem-isDisabled-rZRlPi",isHidden:"MenuItem-isHidden-y3qYbX",default:"MenuItem-default-NAJl2g",primary:"MenuItem-primary-M2Oijx",success:"MenuItem-success-YXOqgB",danger:"MenuItem-danger-bTKX6b"};var l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){const t=e,{className:r,children:n,kind:o,isDisabled:l,isHidden:h}=t,y=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","kind","isDisabled","isHidden"]);return s.createElement(a.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({className:i()(r,c.menuItem,c[o],l&&c.isDisabled,h&&c.isHidden),"data-testid":"dropdownItem",role:"menuitem"},y),n)}h.defaultProps={kind:o.sT,isDisabled:!1};const y=h},77584:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function(){return n.createElement("div",{className:"MenuSeparator-separator-ljlcCS"})}},64388:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(3268),s=r.n(i),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 473 540",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-triangle-right"};s["aria-hidden"]=!t,s.style=i,s.className=a.c.plexIcon+(r?" "+r:"");const o=[n.createElement.apply(n,["path",{d:"M473 270L0 540V0l473 270z"}].concat([]))];return t&&o.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(o))}o.propTypes={"aria-label":s().string,className:s().string,style:s().object};const c=o;var l=r(24752),d=r(36728),u=r(49340);var p=Object.defineProperty,m=(e,t,r)=>(((e,t,r)=>{t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const h={placement:"right-start"};class y extends n.Component{constructor(e,t){super(e,t),m(this,"_menuTimer"),m(this,"target"),m(this,"wasDismissed"),m(this,"_openMenu",((e=!1)=>{this.wasDismissed=!1,this._updateMenu(e,!0)})),m(this,"_closeMenu",((e=!1)=>{this.wasDismissed=e,this._updateMenu(e,!1)})),m(this,"onMouseEnter",(()=>{this._openMenu()})),m(this,"onMouseEnterMenu",(()=>{this.wasDismissed||this._openMenu()})),m(this,"onMouseLeave",(()=>{this.wasDismissed||this._closeMenu()})),m(this,"onMenuClose",(()=>{this._closeMenu(!0),this.props.onMenuClose()})),m(this,"onPress",(()=>{this._openMenu(!0)})),this.target=(0,u.c)(),this.state={isOpen:!1},this.wasDismissed=!1}componentWillUnmount(){window.clearTimeout(this._menuTimer)}_updateMenu(e,t){window.clearTimeout(this._menuTimer),this._menuTimer=window.setTimeout((()=>{this.setState({isOpen:t})}),e?0:100)}render(){const{label:e,children:t,isDisabled:r}=this.props,{isOpen:i}=this.state;return n.createElement(n.Fragment,null,n.createElement(d.c,{className:"NestedMenuItem-item-s6Int5",id:this.target,isDisabled:r,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onPress:this.onPress},e,n.createElement(c,{className:"NestedMenuItem-icon-VQvMcY"})),n.createElement(l.c,{className:"NestedMenuItem-menu-mc0wP3 Menu-menu-OCzudL",isOpen:i,options:h,target:this.target,onMenuClose:this.onMenuClose,onMouseEnter:this.onMouseEnterMenu,onMouseLeave:this.onMouseLeave},t))}}const g=y},68064:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(3268),i=r.n(n),s=r(11504),a=r(52180),o=r(55588),c=r(51268),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t,r)=>(y(e,"symbol"!=typeof t?t+"":t,r),r);class f extends s.Component{constructor(){super(...arguments),g(this,"onPress",(e=>{const t=this.props,{children:r}=t,n=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]),{metricsPage:i}=this.context;var s;(0,a.WI)("metrics").trackClick((s=((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e})({},n),d(s,u({page:i}))))}))}shouldComponentUpdate(e,t){return(0,c.c)(this,e,t)}render(){const e=s.Children.only(this.props.children);return s.cloneElement(e,{onPress:(0,o.c)(this.onPress,e.props.onPress)})}}g(f,"propTypes",{children:i().element.isRequired,action:i().string.isRequired}),g(f,"contextTypes",{metricsPage:i().string.isRequired});const v=f},42764:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(3268),i=r.n(n),s=r(11504),a=r(52180),o=(r(79268),r(23276)),c=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r},m=(e,t,r)=>(((e,t,r)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class h extends s.Component{constructor(e,t){super(e,t),m(this,"page"),this.page=e.page}getChildContext(){return{metricsPage:this.page}}componentDidMount(){const e=this.props,{children:t,isDelegated:r}=e,n=p(e,["children","isDelegated"]);r||window.requestAnimationFrame((()=>{(0,a.WI)("metrics").trackView(n)}))}UNSAFE_componentWillReceiveProps(e){}componentDidUpdate(e){const t=e,{children:r,isDelegated:n}=t,i=p(t,["children","isDelegated"]),s=this.props,{children:c,isDelegated:l}=s,d=p(s,["children","isDelegated"]),u=n!==l||!(0,o.c)(i,d);!l&&u&&(0,a.WI)("metrics").trackView(d)}render(){return this.props.children?s.Children.only(this.props.children):null}}m(h,"childContextTypes",{metricsPage:i().string.isRequired});const y=h},82468:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(62900),s=r(8212);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t=e,{children:r,className:a,innerClassName:u,scrollDirection:p}=t,m=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","innerClassName","scrollDirection"]);const h=p!==s.KE;return a||(a=h?"ModalBody-modalScroller-QY24jf ModalBody-modalBody-Me4Hwy":"ModalBody-modalBody-Me4Hwy"),n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({autoScroll:!0,className:a,scrollDirection:p},m),h?n.createElement("div",{className:u},r):r)}u.defaultProps={innerClassName:"ModalBody-innerModalBody-T6u3sU"};const p=u},90064:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){var t=e,{className:r,children:i}=t,l=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({className:r},l),i)}l.defaultProps={className:"ModalFooter-modalFooter-IDP5sZ"};const d=l},23384:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({},i),r)}l.defaultProps={className:"ModalFooterButtonBar-buttonBar-Ywyfnd"};const d=l},79264:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504);var i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const l=function(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({className:"ModalHeader-modalHeader-nb9ueN"},i),r)}},22632:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{className:t,children:r}=e;return n.createElement("div",{className:t},r)}i.defaultProps={className:"FullPage-container-BafTyc"};const s=i},78504:(e,t,r)=>{"use strict";r.d(t,{K_:()=>c,Ou:()=>l,cp:()=>d,q0:()=>o});var n=r(11504),i=r(3008),s=r(59396),a=r(79988);const o=-1,c=-1,l=-1;function d({className:e,displayIndex:t,displayTotal:r,isAdCountdownTimerEnabled:o,secondsRemaining:c,secondsTotal:l,secondsUntilAd:d}){const u=t>0&&r>0,p=d>0&&d<=5;return u&&!o?n.createElement("div",{className:e},1===r?(0,s.c)("Ad"):(0,s.c)("Ad {index} of {total}",{index:t,total:r})):u&&o?c&&l?n.createElement("div",{className:e},n.createElement(i.YR,{gap:"xs"},(0,s.c)("Ad"),n.createElement(a.c,{easing:"linear",lineWidth:3,progress:Math.round(c/l*100),showProgressText:!1,size:24,strokeColor:"rgba(255, 255, 255, 1)",trackColor:"rgba(255, 255, 255, 0.2)"}),(0,s.c)("{seconds}s",{seconds:Math.round(c)}))):null:p?n.createElement("div",{className:e},(0,s.c)("Ad in {seconds}",{seconds:Math.round(d)})):null}},76485:(e,t,r)=>{"use strict";r.d(t,{c:()=>z});var n=r(11504),i=r(87440),s=r(42476),a=r(60035),o=r(32036),c=r(95292),l=r(83216),d=r(37365);const u={tooltipPortal:"Tooltip-tooltipPortal-nDnX3n",tooltip:"Tooltip-tooltip-VFBXza",tooltipArrow:"Tooltip-tooltipArrow-rrJjO7",tooltipBottomArrow:"Tooltip-tooltipBottomArrow-BppiF5",tooltipTopArrow:"Tooltip-tooltipTopArrow-zHVo6b",tooltipRightArrow:"Tooltip-tooltipRightArrow-xXsf00",tooltipLeftArrow:"Tooltip-tooltipLeftArrow-IFLPOe",tooltipCenterAlignArrow:"Tooltip-tooltipCenterAlignArrow-Y8ToMu",tooltipLeftAlignArrow:"Tooltip-tooltipLeftAlignArrow-SYYsix",tooltipRightAlignArrow:"Tooltip-tooltipRightAlignArrow-jFr4_J",tooltipMiddleAlignArrow:"Tooltip-tooltipMiddleAlignArrow-sM2i0m",topLeft:"Tooltip-topLeft-qrTwnx Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipLeftAlignArrow-SYYsix",topCenter:"Tooltip-topCenter-Z9lZYf Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipCenterAlignArrow-Y8ToMu",topRight:"Tooltip-topRight-veYwi4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipRightAlignArrow-jFr4_J",bottomLeft:"Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",middleLeft:"Tooltip-middleLeft-VRPPlf Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipRightArrow-xXsf00 Tooltip-tooltipMiddleAlignArrow-sM2i0m",middleRight:"Tooltip-middleRight-lV0V4L Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipLeftArrow-IFLPOe Tooltip-tooltipMiddleAlignArrow-sM2i0m"};var p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f=(0,o.c)(l.c.tooltipSpeed),v=1e3*f,b={opacity:{ease:"easeOut",duration:f},y:{ease:d.c.motionEasing,duration:f},x:{ease:d.c.motionEasing,duration:f},scale:{ease:d.c.motionEasing,duration:f}};function S(e){switch(e){case c._w:case c.wA:case c.Yf:return 5;case c.oJ:case c.Cc:case c.gb:return-5;case c.I7:case c.uw:default:return 0}}function P(e){switch(e){case c._w:case c.wA:case c.Yf:case c.oJ:case c.Cc:case c.gb:return 0;case c.I7:return 5;case c.uw:return-5;default:return 0}}function I(e){switch(e){case c._w:case c.wA:case c.Yf:return-5;case c.oJ:case c.Cc:case c.gb:return 5;case c.I7:case c.uw:default:return 0}}function E(e){switch(e){case c._w:case c.wA:case c.Yf:case c.oJ:case c.Cc:case c.gb:return 0;case c.I7:return-5;case c.uw:return 5;default:return 0}}const w={before:e=>({opacity:0,y:S(e),x:P(e),scale:.95,transition:b}),enter:{opacity:1,y:0,x:.001,scale:1,transition:b},exit:e=>({opacity:0,y:I(e),x:E(e),scale:.95,transition:b})},C={[c._w]:{placement:"top-start"},[c.wA]:{placement:"top"},[c.Yf]:{placement:"top-end"},[c.oJ]:{placement:"bottom-start"},[c.Cc]:{placement:"bottom"},[c.gb]:{placement:"bottom-end"},[c.I7]:{placement:"left"},[c.uw]:{placement:"right"}};function O(e){const t=e,{children:r,className:i,target:o,attachment:c,options:l,isOpen:d,onMenuClose:p}=t,f=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","target","attachment","options","isOpen","onMenuClose"]);return n.createElement(a.c,{className:u.tooltipPortal,closeTimeoutMilliseconds:v,isOpen:d,options:l||C[c],target:o},n.createElement(s.Iz,null,d?n.createElement(s.q4.div,((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e})({key:"container",animate:"enter",className:i||u[c],custom:c,exit:"exit",initial:"before",variants:w},f),r):null))}O.defaultProps={attachment:c.Cc};const M=O;var T=Object.defineProperty,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const R=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&D)for(var n of D(e))t.indexOf(n)<0&&x.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e})({},i),r)};var N=Object.defineProperty,L=Object.defineProperties,j=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,W=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&_(e,r,t[r]);if(U)for(var r of U(t))V.call(t,r)&&_(e,r,t[r]);return e},B=(e,t)=>L(e,j(t)),H=(e,t)=>{var r={};for(var n in e)F.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&U)for(var n of U(e))t.indexOf(n)<0&&V.call(e,n)&&(r[n]=e[n]);return r};function z(e){const t=e,{component:r=R,hideOnDisabled:s=!0,hideOnPress:a=!0,showOnFocus:o=!0,showOnHover:c=!0,tooltip:l,tooltipAttachment:d,tooltipClassName:u,tooltipFocusedClassName:p,tooltipOptions:m}=t,h=H(t,["component","hideOnDisabled","hideOnPress","showOnFocus","showOnHover","tooltip","tooltipAttachment","tooltipClassName","tooltipFocusedClassName","tooltipOptions"]),[y,g]=(0,n.useState)(!1),f=(0,n.useRef)(!1),v=(0,n.useRef)(!1),b=(0,i.c)(),S=e.tooltipTarget||e.id||b,P=(0,n.useCallback)(((...t)=>{var r;c&&(v.current=!0,g(!0)),null==(r=e.onMouseEnter)||r.call(e,...t)}),[e,c]),I=(0,n.useCallback)(((...t)=>{var r;c&&(v.current=!1,g(f.current)),null==(r=e.onMouseLeave)||r.call(e,...t)}),[e,c]),E=(0,n.useCallback)(((...t)=>{var r;o&&(f.current=!0,g(!0)),null==(r=e.onFocus)||r.call(e,...t)}),[e,o]),w=(0,n.useCallback)(((...t)=>{var r;e.showOnFocus&&(f.current=!1,g(v.current)),null==(r=e.onBlur)||r.call(e,...t)}),[e]),C=(0,n.useCallback)(((...t)=>{var r;a&&(f.current=!1,v.current=!1,g(!1)),null==(r=e.onPress)||r.call(e,...t)}),[a,e]),O=f.current&&p?p:u;return(0,n.useEffect)((()=>{y&&s&&e.isDisabled&&(f.current=!1,v.current=!1,g(!1))}),[s,y,e.isDisabled]),n.createElement(n.Fragment,null,n.createElement(r,B(W({id:S},h),{onBlur:w,onFocus:E,onMouseEnter:P,onMouseLeave:I,onPress:C})),l?n.createElement(M,{attachment:d,className:O,isOpen:y,options:m,target:S},l):null)}},9968:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(11504),i=r(3008),s=r(72728),a=r(59396),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e};const m=/^imdb:\/\//,h=/^rottentomatoes:\/\//,y=/^thetvdb:\/\//,g=/^themoviedb:\/\//,f={certified:s.cP,ripe:s.W0,rotten:s.e_,spilled:s.AJ,upright:s.q_};function v({rating:e,ratingImage:t,audienceRating:r,audienceRatingImage:s}){const a=null==t?void 0:t.substr(t.lastIndexOf(".")+1),o=r&&s&&s.substr(s.lastIndexOf(".")+1),c=a&&f[a],l=o&&f[o];return n.createElement(i.ye,{gap:"m",orientation:"horizontal"},c?n.createElement(c,{description:"Rotten Tomatoes Critic Rating",value:e}):null,l?n.createElement(l,{description:"Rotten Tomatoes Audience Rating",value:r}):null)}function b(e,t){const{rating:r,ratingImage:n,audienceRating:i,audienceRatingImage:s}=e;return!!r&&!!n&&t.test(n)||!!i&&!!s&&t.test(s)}function S(e){const{rating:t,audienceRating:r}=e;if(b(e,m)){const e=r||t;return e?n.createElement(s.GC,{accessibilityLabel:(0,a.c)("IMDb Rating"),value:e}):null}if(r&&function(e,t){const{audienceRating:r,audienceRatingImage:n}=e;return!!r&&!!n&&t.test(n)}(e,y))return n.createElement(s.cn,{accessibilityLabel:(0,a.c)("TheTVDB Rating"),value:r});if(b(e,g)){const e=r||t;return e?n.createElement(s.kb,{accessibilityLabel:(0,a.c)("TMDB Rating"),value:e}):null}if(b(e,h)){let t;switch(e.preferRTRatingType){case"critic":t={rating:e.rating,ratingImage:e.ratingImage};break;case"audience":t={audienceRating:e.audienceRating,audienceRatingImage:e.audienceRatingImage};break;case void 0:t=e}return n.createElement(v,p({},t))}return t?n.createElement(s.ai,{accessibilityLabel:(0,a.c)("Rating"),value:t}):null}const P=function(e){return n.createElement(i.ye,{align:"left",orientation:"horizontal"},n.createElement(S,p({},e)))}},51796:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(3268),i=r.n(n),s=r(11504),a=r(27876),o=r(50492),c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t)),f=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r};function v(...e){const t=(0,a.Ul)(...e);return e=>{const r=t(e);function n(e,{metricsPage:t,metricsContext:n}){const i=e,{metricsContext:a}=i,o=f(i,["metricsContext"]);return s.createElement(r,y({metricsContext:a||n,metricsPage:t},o))}return n.displayName=`ConnectWithMetrics(${(0,o.c)(e)})`,n.contextTypes={metricsPage:i().string,metricsContext:i().string},n.propTypes=g(y({},r.propTypes),{metricsContext:i().string}),n}}},55588:(e,t,r)=>{"use strict";function n(...e){return function(...t){for(let r=0,n=e.length;r<n;r++){const n=e[r];"function"==typeof n&&n(...t)}}}r.d(t,{c:()=>n})},97612:(e,t,r)=>{"use strict";function n(...e){return e.filter((e=>!!e)).join("--")}r.d(t,{c:()=>n})},13968:(e,t,r)=>{"use strict";function n(e){const t=parseFloat(e,10);let r=e.match(/m?s/);switch(r&&(r=r[0]),r){case"s":return 1e3*t;case"ms":return t}return 0}r.d(t,{c:()=>n})},32036:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(13968);function i(e){return(0,n.c)(e)/1e3}},93980:(e,t,r)=>{"use strict";r.d(t,{yQ:()=>g,GC:()=>y,yE:()=>h,kV:()=>m});var n=r(95720),i=r.n(n),s=r(79268),a=r(98352);function o(e){if(e===document)return!0;if(!e)return!1;if(!e.parentNode)return!1;if(e.style){const t=e.style;if("none"===t.display||"hidden"===t.visibility)return!1}if(window.getComputedStyle){const t=window.getComputedStyle(e);if("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))return!1}return o(e.parentNode)}function c(e){let t=e.tabIndex;return null===t&&(t=void 0),!isNaN(t)&&t>=0&&function(e){if(!o(e))return!1;const t=e.nodeName.toLowerCase();return/input|select|textarea|button|object/.test(t)?!e.disabled:"a"!==t||e.href}(e)}function l(e){if(!e)return[];const t=[].slice.call(e.getElementsByTagName("*"),0).filter((e=>c(e)));return i().sortBy(t,(e=>0===e.tabIndex?1/0:e.tabIndex))}let d,u;function p(e){try{e.focus()}catch(e){}}function m(e){d=document.activeElement,u=e,function(e){const t=document.activeElement,r=t&&e&&e.contains(t);t&&!r&&t.blur()}(e)}function h(e){(0,s.c)(u,"Call `startScopedFocus(element)` before `scopeTabEvent`");const t=l(u);if(!t.length)return;e.preventDefault();const r=document.activeElement,n=r?t.indexOf(r):-1,i=t.length-1;let a;-1===n?a=e.shiftKey?i:0:(a=e.shiftKey?n-1:n+1,a<0?a=i:a>i&&(a=0)),p(t[a])}function y(){(0,s.c)(u,"Call `startScopedFocus(element)` before `scopeAutoFocus`");const e=l(u),t=i().find(e,(e=>(0,a.c)(e.getAttribute("data-autofocus"))));t&&p(t)}function g(){d&&(p(d),d=null)}},50492:(e,t,r)=>{"use strict";function n(e){return e.displayName||e.name||"Component"}r.d(t,{c:()=>n})},5120:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(89988);const i=(0,r(57288).c)((function(e=-1,t=-1,r=n._w,i=0,s=0,a){let o;if(r===n.KE)o={display:"none"};else{switch(o={position:"absolute",width:-1===t?"100%":`${t}px`,height:-1===e?"100%":`${e}px`},r){case n.oJ:o.bottom=s||0,o.left=i||0;break;case n._w:o.top=s||0,o.left=i||0}a&&(o.zIndex=1)}return o}))},43108:(e,t,r)=>{"use strict";function n(e){const{friendlyName:t,isShared:r}=e;return r?t:void 0}r.d(t,{c:()=>n})},92572:(e,t,r)=>{"use strict";function n(e){const{friendlyName:t,sourceTitle:r,isShared:n}=e;return n?r:t}r.d(t,{c:()=>n})},49340:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});let n=0;const i=function(){return"id-"+n++}},46788:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e,t=!0){const r=(0,n.useRef)(!1);(0,n.useEffect)((()=>{if(t&&!r.current)return r.current=!0,e()}),[t,e,r])}},82188:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e){const[t,r]=(0,n.useState)(!1),i=(0,n.useCallback)((()=>{r(!0)}),[]),s=(0,n.useCallback)((e=>{e.relatedTarget instanceof Node&&e.currentTarget.contains(e.relatedTarget)||r(!1)}),[]);return[t,(0,n.useMemo)((()=>({onMouseEnter:i,onMouseLeave:s,onFocus:(null==e?void 0:e.mouseEventsOnly)?void 0:i,onBlur:(null==e?void 0:e.mouseEventsOnly)?void 0:s})),[i,s,null==e?void 0:e.mouseEventsOnly])]}},13436:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},87440:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(49340);const s=function(){const[e]=(0,n.useState)(i.c);return e}},55268:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(13436),s=r(83216),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e};function p({isVirtual:e,isVisible:t,isScrolling:r}){return e&&!t||r}function m(e){const{cellIndex:t,cellX:r,cellY:a,cellWidth:o,cellHeight:c,style:l,keyPropName:d,moveDurationMilliseconds:m=400,isVirtual:h}=e,y=e[d],g=(0,i.c)(y),f=(0,i.c)(t),v=!(null==g||null==f||y!==g||e.cellIndex===f),b=(0,n.useReducer)((e=>e+1),0)[1],S=(0,n.useRef)(v),P=S.current||v,I=(0,n.useMemo)((()=>function({cellX:e,cellY:t,cellWidth:r,cellHeight:n,style:i,isMoving:a,moveDurationMilliseconds:o,isVirtual:c}){return u(c?{position:"absolute",width:r,height:n,transform:`translate3d(${e}px, ${t}px, 0)`,zIndex:a?1:0,transition:a?`transform ${s.c.defaultSpeed}`:"none",transitionDuration:a?`${o}ms`:0}:{position:"relative"},i)}({cellX:r,cellY:a,cellWidth:o,cellHeight:c,style:l,moveDurationMilliseconds:m,isMoving:P,isVirtual:h})),[r,a,o,c,l,m,P,h]),E=(0,n.useRef)(p(e)?null:y);let w;return p(e)?(w=E.current!==y,w&&(E.current=null)):(w=!1,E.current=y),(0,n.useEffect)((()=>{let e;return P&&(S.current=!0,e=window.setTimeout((()=>{S.current=!1,b({})}),2*m)),()=>{e&&window.clearTimeout(e)}}),[m,P,b]),{style:I,isPlaceholder:w}}},71892:(e,t,r)=>{"use strict";r.d(t,{A9:()=>y,AF:()=>m,AN:()=>b,Gy:()=>o,SI:()=>p,Sk:()=>S,Ub:()=>s,_N:()=>h,_Q:()=>l,ao:()=>v,g9:()=>u,io:()=>a,kR:()=>g,o1:()=>P,oX:()=>i,qE:()=>I,qm:()=>d,sZ:()=>c,y_:()=>f});var n=r(59396);function i(e){return e?void 0:(0,n.c)("Username is required")}function s(e){return e?void 0:(0,n.c)("Email address is required")}function a(e){return e?void 0:(0,n.c)("Password is required")}function o(e){return e?void 0:(0,n.c)("Password confirmation is required")}function c(e){return e?void 0:(0,n.c)("Current password is required")}const l=/(?=.*[a-z])/,d=/(?=.*[A-Z])/,u=/(?=.*\d)/,p=/(?=.*[!#$%&'()*+,\-./:;<=>?@[\]^_`{|}~])/;function m(e){return e&&e.length<10?(0,n.c)("Password must be at least 10 characters"):e&&e.length>128?(0,n.c)("Password must be no longer than 128 characters"):e&&!l.test(e)?(0,n.c)("A lowercase letter is required"):e&&!d.test(e)?(0,n.c)("An uppercase letter is required"):e&&!u.test(e)?(0,n.c)("A number is required"):e&&!p.test(e)?(0,n.c)("A special character is required"):void 0}function h(e,t){return e!==t.password.value?(0,n.c)("Passwords must match"):void 0}function y(e,t){var r;return e===(null==(r=t.currentPassword)?void 0:r.value)?(0,n.c)("New password must be different from the current password"):void 0}function g(e){return e?void 0:(0,n.c)("Verification code is required")}function f(e){return e?void 0:(0,n.c)("URL is required")}const v=e=>{if(e.length>50)return(0,n.c)("Full name is too long")},b=140,S=e=>{if(e.length>b)return(0,n.c)("Bio is too long")},P=e=>{if(e.length>100)return(0,n.c)("URL too long")},I=e=>{if(e.length>50)return(0,n.c)("Location too long")}},40352:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(52180);function i(e){const t=(0,n.WI)("appModel").get("embeddedServer");return!!e&&!!t&&e.machineIdentifier===t.get("machineIdentifier")}},55932:(e,t,r)=>{"use strict";function n(e,t){return Math.max(Math.min(e,t-1),0)}r.d(t,{c:()=>n})},13120:(e,t,r)=>{"use strict";r.d(t,{Mn:()=>i,cp:()=>a,uw:()=>s}),r(79268);var n=r(55932);const i="vertical",s="horizontal";function a(e={}){const{direction:t=i,rows:r,columns:a,overscan:o=0,innerHorizontalPadding:c=0,innerVerticalPadding:l=0,outerPaddingTop:d=0,outerPaddingRight:u=0,outerPaddingBottom:p=0,outerPaddingLeft:m=0,getCellWidth:h,getCellHeight:y}=e;let g,f,v,b,S,P,I,E,w,C;function O(e){return t===i?Math.floor(e/P):e%S}function M(e){return t===i?e%P:Math.floor(e/S)}function T(e,r){const n=O(e);return t===i?n*P:n}function D(e,r){const n=M(e);return t===i?n:n*S}return{options:e,getListStyle:function(e,n){const o=[d,u,p,m,n];for(const t in e)o.push(e[t]);const O=o.join(":");if(O===E)return w;g=e.listTop,f=e.listLeft;let M=(e.viewportWidth||0)-u-m,T=(e.viewportHeight||0)-d-p;t===i?M-=f:T-=g,M=Math.max(0,M),T=Math.max(0,T),v=h({innerViewportWidth:M,innerViewportHeight:T,innerHorizontalPadding:c,innerVerticalPadding:l}),b=y({cellWidth:v,innerViewportWidth:M,innerViewportHeight:T,innerHorizontalPadding:c,innerVerticalPadding:l}),S=Math.max(0,r||Math.floor((T+l)/(b+l))),P=Math.max(0,a||Math.floor((M+c)/(v+c))),I=P*S;let D=0,k=0;return t===i&&P?(D=P*(v+c)-c,k=Math.ceil(n/P)*(b+l)-l):t===s&&S&&(D=Math.ceil(n/S)*(v+c)-c,k=S*(b+l)-l),C={},E=O,w={width:D+u+m,height:k+d+p},w},getRelativeIndex:function(e,r,a,o){const c=t===a;if(c&&(t===i&&1===P||t===s&&1===S))return(0,n.c)(e+r,o);let l,d,u;a===i&&(l=c?P*r:r,d=D(e),u=function(e,r){if(t===i){const t=r-1,n=M(e),i=(O(t)+1)*P-(P-n);let s;return s=i<r?i:t-r%P-(P-1-n),s}{const t=D(e);return(0,n.c)(t+(S-1),r)}}(e,o)),a===s&&(l=c?S*r:r,d=T(e),u=function(e,r){if(t===i){const t=T(e);return(0,n.c)(t+(P-1),r)}{const t=r-1,n=O(e),i=(M(t)+1)*S-(S-n);let s;return s=i<r?i:t-r%S-(S-1-n),s}}(e,o));const p=e+l;return d||u?Math.max(Math.min(p,u),d):e},getCoordinateDistance:function(e,t){const r=O(e),n=O(t),i=M(e),s=M(t);return Math.sqrt(Math.pow(n-r,2)+Math.pow(s-i,2))},getPositionForIndex:function(e){const t=e;if(C[t])return C[t];const r=M(e),n=O(e),i={column:r,row:n,cellX:r*(v+c)+f+m,cellY:n*(b+l)+g+d,cellWidth:v,cellHeight:b};return C[t]=i,i},getRangesForPosition:function(e,r,s){const a=t===i?P:S,d=t===i?(e-g)/(b+l):(r-f)/(v+c),u=I+2*a+o*a*2,p=Math.ceil(d)*a,m=p+I-1,h=Math.floor(d)*a,y=p+I+a-1;let E=h-a*o;const w=(0,n.c)(E,s)+u-1;return w>=s&&(E=s-u),{visibleStartIndex:(0,n.c)(p,s),visibleEndIndex:(0,n.c)(m,s),partiallyVisibleStartIndex:(0,n.c)(h,s),partiallyVisibleEndIndex:(0,n.c)(y,s),renderStartIndex:(0,n.c)(E,s),renderEndIndex:(0,n.c)(w,s)}}}}},57928:(e,t,r)=>{"use strict";function n(e){const{cellWidth:t,aspectRatio:r,titleHeight:n=0}=e;return Math.floor(t/r+n)}r.d(t,{c:()=>n})},65316:(e,t,r)=>{"use strict";function n(e,t){const{innerViewportWidth:r,innerHorizontalPadding:n=0}=t;return Math.floor((r+n)/e)-n}function i(e){const{innerViewportWidth:t,innerHorizontalPadding:r=0,preferredCellWidth:i,minCellWidth:s,minColumns:a=1,maxColumns:o=1/0,columnAdjustment:c=0}=e;let l=Math.round((t+r)/(i+r));l+=c,l=Math.max(Math.min(l,o),a);let d=n(l,e);return d<s&&(d=l===a?s:n(l-1,e)),d}r.d(t,{c:()=>i})},42268:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e,t,r){let i=0;return n.Children.map(e,(e=>{if(n.isValidElement(e)){const n=i;return i++,t.call(r,e,n)}return e}))}},81807:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(85612);function i(e){return e===n.Su||e===n.s5}},56068:(e,t,r)=>{"use strict";r.d(t,{c:()=>n}),r(79268);const n=function(e,t){return`${e}:${t}`}},50388:(e,t,r)=>{"use strict";r.d(t,{A$:()=>o,EP:()=>a,El:()=>l,Qh:()=>c,o1:()=>s,uM:()=>n,y0:()=>i});const n="isScrolling",i="isActive",s="isFocused",a="isDisabled",o="isDragging",c="isDraggingBefore",l="isDraggingAfter"},16512:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});let n={};const i={getPageKey:()=>window.location.hash,getKey:e=>`${i.getPageKey()}!${e}`,get:e=>n[e],set(e,t){n[e]=t},remove(e){delete n[e]},clear(){n={}}},s=i},2540:(e,t,r)=>{"use strict";r.d(t,{CA:()=>i,UP:()=>n,aK:()=>s});const n="up",i="right",s="down"},24808:(e,t,r)=>{"use strict";r.d(t,{Vb:()=>a,ac:()=>i,od:()=>s,sT:()=>n});const n="default",i="primary",s="danger",a="dark"},85612:(e,t,r)=>{"use strict";r.d(t,{ET:()=>u,Ef:()=>y,I9:()=>a,KW:()=>c,P7:()=>m,QP:()=>d,Qh:()=>i,Su:()=>s,_2:()=>p,gr:()=>f,s5:()=>g,wH:()=>l,wp:()=>h,yy:()=>o});var n=r(3268);const i="library",s="continueWatching",a="prePlay",o="playlist",c="player",l="playQueue",d="liveTVTimeline",u="liveTVGrid",p="recommended",m="nowPlaying",h="downloads",y="shared",g="watchTogether",f="watchTogetherLobby";r.n(n)().oneOf(["discover",i,"directoryList","metadataList","timeline",s,a,"postPlayPrevious","postPlayNext",o,c,l,d,u,p,m,h,y,g,f])},49579:(e,t,r)=>{"use strict";r.d(t,{AJ:()=>n.EPISODE,Cs:()=>n.SEASON,UJ:()=>n.UJ,Ww:()=>n.Ww,YH:()=>n.YH,ec:()=>n.ec,ee:()=>s,kN:()=>a,qc:()=>i});var n=r(12612);const i="extra",s="mixed",a="musicVideo"},8212:(e,t,r)=>{"use strict";r.d(t,{KE:()=>n,Mn:()=>i,uw:()=>s});const n="none",i="vertical",s="horizontal"},21528:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(3268),i=r.n(n);const s=i().shape({subscribe:i().func.isRequired,dispatch:i().func.isRequired,getState:i().func.isRequired})},87808:(e,t,r)=>{"use strict";r.d(t,{IF:()=>i,OM:()=>s,wH:()=>n});const n="small",i="medium",s="large"},95292:(e,t,r)=>{"use strict";r.d(t,{Cc:()=>o,I7:()=>l,Yf:()=>s,_w:()=>n,gb:()=>c,oJ:()=>a,uw:()=>d,wA:()=>i});const n="topLeft",i="topCenter",s="topRight",a="bottomLeft",o="bottomCenter",c="bottomRight",l="middleLeft",d="middleRight"},93268:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(90044);function i(e){if(e&&e.features)return e.features.find((e=>e.type===n.c.CONTENT))}},28012:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93268);function i(e,t){const r=(0,n.c)(e);return r&&r.directories?r.directories.find((e=>e.id===t)):null}},60752:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93268);function i(e,t){return e.reduce(((e,r)=>{const i=(0,n.c)(r);return(i?i.directories:[]).filter((e=>e.type&&t.includes(e.type))).map((e=>[r.entityID,e])).forEach((t=>{e.push(t)})),e}),[])}},49256:(e,t,r)=>{"use strict";function n(e,t){if(e&&t)for(let r=0,n=e.length;r<n;r++){const n=e[r],{id:i}=n;if(i===t)return n}}r.d(t,{c:()=>n})},66436:(e,t,r)=>{"use strict";function n(e,t){const r=encodeURIComponent(e.machineIdentifier),n=encodeURIComponent(t.identifier),i=`/server/${r}`;return t.isLibraryProvider?i:`${e.isCloud?"":i}/provider/${n}`}r.d(t,{c:()=>n})},77388:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(15216);function i(e,t,r,i){return(0,n.c)(e.isCloud,e.machineIdentifier,t.identifier,r,i)}},15216:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(96504);const i="media";function s(e,t,r,s={},a){const o=["#!",i];return e||o.push(encodeURIComponent(t)),o.push(encodeURIComponent(r),a),n.c.join(o,s)}},36972:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(69956),i=r(15216);function s(e,t){const{isServer:r,serverIdentifier:s,providerIdentifier:a}=(0,n.c)(e);return(0,i.c)(!r,s,a,t)}},19204:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(40352),i=r(77388),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};function u(e,t,r,s={},a){if(!(0,n.c)(e))return r?(0,i.c)(e,t,d({source:r.id},s),a):(0,i.c)(e,t,s,a)}},33372:(e,t,r)=>{"use strict";r.d(t,{eo:()=>n});r(96504);r(93268),r(19204),Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const n={RECORDING_SCHEDULE:"view://dvr/recording-schedule",GUIDE:"view://dvr/guide",TIMELINE:"view://photo/timeline",SHARED_ITEMS:"view://shared-items",HOME_RECOMMENDED:"view://home/recommended",HOME_WATCHLIST:"view://home/watchlist"};n.RECORDING_SCHEDULE,n.GUIDE,n.TIMELINE,n.SHARED_ITEMS},23276:(e,t,r)=>{"use strict";function n(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;const i=Object.prototype.hasOwnProperty;for(let n=0;n<r.length;n++)if(!i.call(t,r[n])||e[r[n]]!==t[r[n]])return!1;return!0}r.d(t,{c:()=>n})},51268:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(23276);function i(e,t,r,i,s){const a=s||n.c;let o=a(e.props,t);return o&&(o=a(e.state,r),o&&i&&(o=a(e.context,i))),!o}},83216:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={defaultSpeed:"0.2s",slowSpeed:"0.6s",fastSpeed:"0.1s",motionEasing:"cubic-bezier(0.6, 0.4, 0.2, 1.4)",modalSpeed:"0.2s",menuSpeed:"0.15s",tooltipSpeed:"0.15s"}},49304:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});const n="#e5a00d",i="rgba(0, 0, 0, 0.15)",s="rgba(0, 0, 0, 0.3)",a={defaultColor:"#fff",quietColor:"#a8a8a8",inverseColor:"#222",primaryColor:"#cc7b19",primaryAlternateColor:"#e5a00d",selectedColor:n,successColor:"#6b5",dangerColor:"#f53",warningColor:"#f0ad4e",focusColor:"#88AAFF",appBackgroundColor:"#444f56",darkOpaqueBackgroundColor:"#1f2326",blackDarkTranslucentBackgroundColor:i,blackDarkerTranslucentBackgroundColor:s,lightTranslucentBackgroundColor:"rgba(255, 255, 255, 0.15)",badgeBackgroundColor:i,defaultBadgeColor:"rgba(255, 255, 255, 0.7)",defaultLinkColor:"rgba(255, 255, 255, 0.7)",defaultLinkHoverColor:"#fff",defaultLinkDisabledLinkColor:"rgba(255, 255, 255, 0.3)",selectedLinkColor:n,selectedLinkHoverColor:"lighten("+n+", 0.2)",defaultBackgroundColor:"rgba(255, 255, 255, 0.25)",defaultActiveBackgroundColor:"rgba(255, 255, 255, 0.2)",defaultDisabledBackgroundColor:"rgba(255, 255, 255, 0.15)",primaryButtonColor:"#1f2326",primaryBackgroundColor:"#e5a00d",primaryHoverBackgroundColor:"lighten(#e5a00d, 0.2)",primaryActiveBackgroundColor:"darken(#e5a00d, 0.2)",primaryDisabledColor:"rgba(0, 0, 0, 0.4)",primaryDisabledBackgroundColor:"darken(#e5a00d, 0.5)",quietBackgroundColor:"rgba(255, 255, 255, 0.08)",quietHoverBackgroundColor:"rgba(255, 255, 255, 0.1)",quietActiveBackgroundColor:"rgba(255, 255, 255, 0.06)",successBackgroundColor:"#3d7832",successHoverBackgroundColor:"lighten(#3d7832, 0.1)",successActiveBackgroundColor:"darken(#3d7832, 0.1)",successDisabledBackgroundColor:"darken(#3d7832, 0.3)",dangerBackgroundColor:"#b32",dangerHoverBackgroundColor:"lighten(#b32, 0.1)",dangerActiveBackgroundColor:"darken(#b32, 0.1)",dangerDisabledBackgroundColor:"darken(#b32, 0.3)",darkBackgroundColor:s,darkHoverBackgroundColor:"rgba(255, 255, 255, 0.3)",darkActiveBackgroundColor:"rgba(255, 255, 255, 0.2)",darkDisabledBackgroundColor:"rgba(255, 255, 255, 0.15)",headerColor:"rgba(255, 255, 255, 0.3)",dimColor:"rgba(255, 255, 255, 0.45)",secondaryContentColor:"rgba(255, 255, 255, 0.75)",shadowColor:"rgba(0, 0, 0, 0.35)",dividerColor:s,scrollbarBackgroundColor:"rgba(255, 255, 255, 0.2)",scrollbarHoverBackgroundColor:"rgba(255, 255, 255, 0.3)",scrollbarInactiveBackgroundColor:"rgba(255, 255, 255, 0.05)",errorBackgroundColor:"rgba(255, 85, 51, 0.3)",inputBackgroundColor:"rgba(255, 255, 255, 0.25)",inputFocusBackgroundColor:"#eee",inputColor:"#eee",inputFocusColor:"#555",inputPlaceholderColor:"#afb0b1",inputDisabledOpacity:"0.5",formSectionBackgroundColor:s,formSectionHoverBackgroundColor:i,modalBackdropBackgroundColor:"rgba(102, 102, 102, 0.6)",modalBackgroundColor:"#2d2d2d",modalBodyBackgroundColor:i,menuBackgroundColor:"#191a1c",menuDisabledBackgroundColor:"#2d2d2d",menuItemHoverBackgroundColor:"rgba(255, 255, 255, 0.08)",menuItemActiveBackgroundColor:"rgba(255, 255, 255, 0.15)",menuSeparatorBackgroundColor:"rgba(200, 200, 200, 0.15)",tooltipBackgroundColor:"#191a1c",pageHeaderBackgroundColor:"rgba(0, 0, 0, 0.7)",pageHeaderLinkColor:"#999",pageHeaderLinkHoverColor:"#eee",pageHeaderColor:"rgba(255, 255, 255, 0.75)",sidebarBackgroundColor:i,sidebarMenuButtonBackgroundColor:s,sidebarMenuButtonHoverBackgroundColor:"rgba(0, 0, 0, 0.45)",sidebarMenuButtonActiveBackgroundColor:"rgba(0, 0, 0, 0.75)",stripeListAlternateBackgroundColor:"rgba(255, 255, 255, 0.02)",stripeListHoverBackgroundColor:"rgba(255, 255, 255, 0.06)",stripeListSelectedBackgroundColor:i,liveTVSettingsAddDeviceButtonBackground:"rgba(0, 0, 0, 0.2)",liveTVSettingsBackground:"rgba(0, 0, 0, 0.3)"}},35624:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={smallSize:"26px",mediumSize:"30px",largeSize:"36px",gapSmall:"15px",gapMedium:"30px",gapLarge:"60px",navigationHeaderHeight:"60px",navigationUserMenuImageSize:"34px",pageHeaderHeight:"60px",breadcrumbMargin:"25px",menuSmallWidth:"120px",menuMediumWidth:"180px",menuLargeWidth:"220px",menuPadding:"8px",menuItemTopPadding:"4px",menuItemSidePadding:"20px",toolbarButtonWidth:"50px",posterTitlePadding:"10px",posterTitleHeight:"20px",quickSearchDefaultWidth:"560px",searchHeaderHeight:"40px",searchResultActionsTriggerWidth:"40px",searchResultHeight:"68px",searchResultPosterWidth:"60px",showTrackingPosterHeight:"75px",sidebarWidth:"240px",sidebarRightGutterWidth:"15px",sidebarLeftGutterWidth:"25px",tableCellPadding:"20px",tableHeaderHeight:"40px",tableRowHeight:"40px",tableTitleHeight:"60px",inputMaxWidth:"360px",inputBorderRadius:"4px",autosuggestSuggestionRadius:"4px",smallArrowWidth:"6px",mediumArrowWidth:"8px",largeArrowWidth:"10px",tooltipArrowSize:"6px",tooltipMarginTop:"-6px",breakpointMobileNarrow:"320px",breakpointExtraSmall:"480px",breakpointSmall:"768px",breakpointMedium:"992px",breakpointLarge:"1200px",modalBodyPadding:"30px",chooseItemModalPosterWidth:"40px",avatarFormEditSize:"1024px",avatarFormSectionSize:"80px",avatarFormProfileSectionSize:"150px",cardWidth:"616px",profileAvatarSize:"150px",customChannelsPosterWidth:"187px",customChannelsPosterHeight:"104px"}},37365:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={motionEasing:[.6,.4,.2,1.4]}},9356:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});let n=1015,i=50;const s={tooltipZIndex:n+100,modalZIndex:--n,menuZIndex:n,pageHeaderZIndex:--i,highZIndex:n,finalZIndex:49}},16728:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(43352),i=r(92444);const s=i.c.extend({mixins:[n.c],initialize({appModel:e}){i.c.prototype.initialize.apply(this,arguments),this.appModel=e,this.listenTo(this.appModel,"change:primaryServer",this.onPrimaryServerChange)},supportsRetry:e=>!0,onPrimaryServerChange(e,t){t&&!t.get("hasEventConnection")&&(this.stop(t),this.start(t))}})},58192:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(95720),i=r.n(n),s=r(91600),a=r(32364),o=r(38828),c=r(43352);const l=s.c.extend({mixins:[c.c],initialize(e){this.name=e.name||"ServerEventManager",this.appModel=e.appModel,this.servers=e.servers||this.appModel.get("servers"),this.isValidServer=e.isValidServer,this.supportsLongPolling=e.supportsLongPolling,this.allowMultipleConnections=e.allowMultipleConnections,this.allowAppendingHeaders=e.allowAppendingHeaders,this.ServerEventConnection=e.ServerEventConnection,this.connections={},this._serverRetryManager=new e.ServerRetryManager({appModel:this.appModel,callback:this.retryServerConnections.bind(this),logFormat:"[Connections] Retrying server events connection for %s in %s seconds"})},start(){this.allowMultipleConnections?this.listenTo(this.servers,{"change:isResolved":this.onServerResolvedChange,"change:isRejected":this.onServerRejectedChange,remove:this.onServerRemove,reset:this.onServersReset}):this.listenTo(this.appModel,"change:primaryServer",this.onPrimaryServerChange)},stop(){this.stopListening(),this._serverRetryManager.stopAll(),this.disconnectAll(),this.connections={}},tryConnectServer(e){const t=this.connections[e.id];this.isValidServer(e)&&!t&&(a.c.hasWebSocket||this.supportsLongPolling?this.connect({server:e}).then(null,(()=>{this._serverRetryManager.start(e)})):e.trigger("socket:websocket",{error:!0}))},connect(e){const t=e.server;let r=this.connections[t.id];r||(r=new this.ServerEventConnection({server:t,appendHeaders:this.allowAppendingHeaders}),this.connections[t.id]=r,this.listenTo(r,{open:this.onOpen,close:this.onClose,error:this.onClose}));const n=r.open(),i=r.socket?r.socket.url:r.pollUrl;return(0,o.c)(`[${this.name}] Opening server event connection to ${t.get("debugName")} at ${i}`),n},disconnectAll(){i().each(this.connections,(e=>{this.disconnect({connection:e})}))},disconnect(e){let t=e.connection;if(t||(t=this.connections[e.server.id]),t){const e=t.socket?t.socket.url:t.pollUrl,r=t.server;(0,o.c)(`[${this.name}] Closing server event connection to ${r.get("debugName")} at ${e}`),this.stopListening(t),this._serverRetryManager.stop(t.server),t.close(),delete this.connections[t.server.id]}},retryServerConnections:function(e){this.isValidServer(e)&&e.get("isResolved")&&this.connect({server:e})},onPrimaryServerChange(e,t){this.disconnectAll(),t&&this.tryConnectServer(t)},onServerResolvedChange(e,t){t&&this.tryConnectServer(e)},onServerRejectedChange(e,t){t&&this.disconnect({server:e})},onServerRemove(e){const t=this.connections[e.id];if(t&&(this.disconnect({connection:t}),e.get("isMerged")&&t)){const t=this.servers.get(e.id);this.connect({server:t})}},onServersReset(e,t){const r=t.previousModels;i().each(r,(t=>{e.contains(t)||this.disconnect({server:t})}))},onOpen(e){const t=this.connections[e.id],r=t.socket?t.socket.url:t.pollUrl;o.c.info(`[${this.name}] Opened server event connection to ${e.get("debugName")} at ${r}`),this._serverRetryManager.stop(e)},onClose(e){o.c.warn(`[${this.name}] Unexpectedly closed server event connection to ${e.get("debugName")}`),this._serverRetryManager.start(e)}})},92444:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(91600),a=r(38828);const o=s.c.extend({maximumDelay:30,initialize({callback:e,logFormat:t}){this._serversBeingRetried={},this.callback=e,this.logFormat=t},start(e){this._serversBeingRetried[e.cid]||this.supportsRetry(e)&&(this._serversBeingRetried[e.cid]={server:e,attempt:1},this._scheduleRetry(e))},stop(e){const t=this._serversBeingRetried[e.cid];t&&(window.clearTimeout(t.timeout),delete this._serversBeingRetried[e.cid])},stopAll(){i().each(this._serversBeingRetried,((e,t)=>{window.clearTimeout(e.timeout),delete this._serversBeingRetried[t]}))},supportsRetry:e=>!0,_scheduleRetry(e){const t=this._serversBeingRetried[e.cid],r=2*Math.min(this.maximumDelay/2,t.attempt);(0,a.c)(this.logFormat,e.get("debugName"),r),t.timeout=window.setTimeout((()=>{this.callback(e),t.attempt++,this._scheduleRetry(e)}),1e3*r)}})},15292:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(95720),i=r.n(n);function s(e,t){const r=t.constructor.prototype.validate;return r?r(e):[]}function a(e){const t=this.panes[e],r=l.call(this,t);return 0===s.call(this,r,t).length}function o(e,t){let r=this.panes[t].dependentPanes;return"function"==typeof r&&(r=r.call(this)),e.concat(r||[])}function c(){const e=this.$(".change-pane-btn");e.addClass("disabled").removeClass("selected"),i().each(this.getReachablePanes(),(function(t){e.filter("."+t+"-btn").removeClass("disabled")}),this),e.filter("."+this.selectedPane+"-btn").addClass("selected")}function l(e){return this[e.model]||this[this.panesModel]||this.model}const d={showPane:function(e){if(e===this.selectedPane)return;const t=this.paneRegion.currentView;t&&(this.stopListening(t,"valid",c),this.stopListening(t,"invalid",c),this.$el.removeClass("pane-"+this.selectedPane),this.onPaneHide&&this.onPaneHide(this.selectedPane,t)),this.selectedPane=e;const r=this.panes[e],n=r.constructor,s=this.paneConstructorArg?this.paneConstructorArg():{},a=new n(i().extend(s,{model:l.call(this,r)}));if(a.onModalClose){this._paneOnModalCloseCallbacks||this.listenToOnce(this,"close",(function(){i().each(this._paneOnModalCloseCallbacks,(function(e){e[1].call(e[0])}),this),this._paneOnModalCloseCallbacks=null}));const e=this._paneOnModalCloseCallbacks||[];e.push([a,a.onModalClose]),this._paneOnModalCloseCallbacks=i().uniq(e,(function(e){return e[1]}))}this.listenTo(a,"valid",c),this.listenTo(a,"invalid",c),c.call(this),this.onPaneShow&&this.onPaneShow(e,a),this.$el.addClass("pane-"+e),this.paneRegion.show(a),c.call(this)},getReachablePanes:function(){const e=i().reduce(this.panes,(function(e,t){let r=t.dependentPanes;return"function"==typeof r&&(r=r.call(this)),i().union(e,r||[])}),[],this);let t,r,n=i().filter(i().keys(this.panes),(function(t){return!i().contains(e,t)})),s=n;for(;s.length;)t=i().filter(s,a,this),r=r||t.length!==s.length,s=i().reduce(t,o,[],this),n=n.concat(s);return n.isAnyInvalid=r,n},onChangePaneClick:function(e){e.preventDefault();const t=this.$(e.currentTarget);t.isDisabled()||this.showPane(t.data("pane"))}}},13604:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s={currentState:null,enterState:function(e){if(e===this.currentState)return;const t=this.currentState,r=this.states[e];if(!r)throw new Error("The state machine is unable to enter undefined state: "+e);if(t){const e=this.states[t];if(i().isFunction(e.onExit)&&!1===e.onExit.call(this))return}this.currentState=e,i().isFunction(r.onEnter)&&!1===r.onEnter.apply(this,i().rest(arguments))?this.currentState=t:this.triggerMethod("stateMachineChange",{from:t,to:e})},enterNextState:function(){let e;if(this.currentState)e=this.states[this.currentState].nextState;else{if(!this.initialState)throw new Error("An initial state must be defined for the state machine");e=this.initialState}e?this.enterState(e):this.triggerMethod("stateMachineComplete")}}},53932:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11364),i=r(16872),s=r(76400),a=r(96504),o=r(71684);const c=n.c.extend({name:"FileModel",idAttribute:"key",rootPropertyName:"File",syncedAttrs:{key:i.c.string,title:i.c.string,path:i.c.string,network:i.c.boolean}}),l=o.c.extend({name:"FileCollection",model:c}),d=n.c.extend({name:"FilePathModel",context:["server","includeFiles"],idAttribute:"key",rootPropertyName:"Path",sessionAttrs:{isBackShortcut:i.c.boolean},sessionRelations:{children:function(){const e={};return this.includeFiles&&(e.includeFiles=1),{relationClass:r(53932).c,options:{url:a.c.join([this.id],e)}}}},syncedAttrs:{key:i.c.string,title:i.c.string,path:i.c.string,home:i.c.boolean,network:i.c.boolean}}),u=o.c.extend({name:"FilePathCollection",context:["server","includeFiles"],model:d,url(){const e={};return this.includeFiles&&(e.includeFiles=1),a.c.join(["/services/browse"],e)}}),p=n.c.extend({name:"FilePathListModel",responseType:s.qS,context:["server","includeFiles","url"],url(){const e={};return this.includeFiles&&(e.includeFiles=1),a.c.join(["/services/browse"],e)},sessionAttrs:{truncatedFilesCount:i.c.integer},syncedRelations:{paths:{relationClass:u,rootPropertyName:"Path"},files:{relationClass:l,rootPropertyName:"File"}},augmentResponse:e=>(e.File&&(e.truncatedFilesCount=Math.max(0,e.File.length-500),e.File=e.File.slice(0,500)),e)})},18930:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"MatchResultModel",context:["server"],idAttribute:"guid",rootPropertyName:"SearchResult",syncedAttrs:{id:s.c.integer,guid:s.c.string,name:s.c.string,parentGUID:s.c.string,parentName:s.c.string,type:s.c.string,index:s.c.integer,score:s.c.integer,thumb:s.c.string,year:s.c.integer,matched:s.c.boolean,disambiguation:s.c.string,area:s.c.string,beginArea:s.c.string,lifespanBegin:s.c.string,lifespanEnd:s.c.string,summary:s.c.string},syncedRelations:{children:function(){return{relationClass:r(18930).c,rootPropertyName:"SearchResult"}}},derivedAttrs:{normalizedScore:function(){const e=this.get("score");if(null!=e)return Math.min(Math.max(e,0),100)}}}),o=n.c.extend({name:"MatchResultCollection",context:["server"],model:a,url:function(){return"/library/metadata/"+this.parent.id+"/matches"}})},9424:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(74844),i=r(60976),s=r(37588),a=r.n(s),o=r(95720),c=r.n(o),l=r(71832),d=r(22784),u=r(56792),p=r(87228),m=r(96504);const h=l.c.extend({idAttribute:"ratingKey",whitelistedAttrs:["guid","addedAt","composite","duration","key","leafCount","playlistType","ratingKey","smart","summary","title","type","allowSync"],defaults:function(){return{children:new d.c([],{server:this.server,parent:this,url:function(){const e="/playlists/"+this.parent.id+"/items";let t;return"audio"===this.parent.get("playlistType")&&(t={includeRelated:1}),m.c.join(e,t)}})}},urlRoot:"/playlists",saveUrl:function(){return"/library/metadata/"+this.id},cacheKey:function(e){if(e.key)return this.server&&this.server.getScopedKey(e.key)},initialize:function(){this.listenToOnce(this.get("children"),"add",(function(e){this.set("art",e.get("art"))}))},parse:function(e){let t=this.convert(e);return t.Playlist&&(t=t.Playlist),p.c.parseInteger(t,["duration","leafCount","addedAt"]),p.c.parseBoolean(t,["smart","allowSync"]),t.isPlaylist=!0,t},findItem:function(e){return this.get("children").findWhere({playlistItemID:e})},moveItem:function(e,t){const r=t?{after:t}:{},n=m.c.join([c().result(this,"url"),"/items/",e,"/move"],r),i=c().extend(this.server.getXHROptions(n),{type:"PUT"}),s=a().ajax(i),o=this.get("children"),l=this.findItem(e);o.remove(l);const d=this.findItem(t),u=d?o.indexOf(d)+1:0;return o.add(l,{at:u}),s},removeItem:function(e){e=e.toString();const t=m.c.join([c().result(this,"url"),"/items/",e]),r=c().extend(this.server.getXHROptions(t),{type:"DELETE"}),n=a().ajax(r);n.then(c().bind((function(e){this.set(this.parse(e))}),this));const i=this.get("children"),s=this.findItem(e);return i.remove(s),n},addContent:function(e,t){const r=this.isNew()?"POST":"PUT",n=[c().result(this,"url")],i={};this.isNew()?(i.type=this.get("playlistType"),i.title=this.get("title"),i.smart=this.get("smart")?1:0):n.push("/items"),e.get("playQueueID")?i.playQueueID=e.get("playQueueID"):i.uri=u.c.uri(e,t);const s=m.c.join(n,i),o=c().extend(e.server.getXHROptions(s),{type:r}),l=a().ajax(o);return l.then(c().bind((function(e){this.set(this.parse(e))}),this)),l.promise()},isLibraryItem:function(){return!0},isPlexMusicItem:function(){return!1}});var y=r(71684),g=r(54672);const f=y.c.extend({name:"VersionGeneratorCollection",context:["server"],model:g.c,url(){return m.c.join(["playlists",this.parent.id,"items"],{type:i.c.LOCAL})}}),v=h.extend({defaults:function(){return{children:new f([],{server:this.server,parent:this})}},findItem:function(e){return this.get("children").get(e)},addContent:function(e){const t=[c().result(this,"url"),"items",e.id],r=m.c.join(t,e.getSaveParams()),n=c().extend(e.server.getXHROptions(r),{type:"PUT"}),i=a().ajax(n);return i.then(c().bind((function(e){this.set(this.parse(e))}),this)),i.promise()}}),b=n.c.extend({model:v,url:"/playlists?type="+i.c.LOCAL,parse:function(e){return this.convert(e,"Playlist")}})},90854:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(74844),i=r(60976),s=r(37588),a=r.n(s),o=r(95720),c=r.n(o),l=r(71832),d=r(816),u=r(21248),p=r(87228),m=r(96504);const h=l.c.extend({idAttribute:"playQueueID",whitelistedAttrs:["playQueueID","playQueueSelectedItemID","playQueueSelectedItemOffset","playQueueSelectedMetadataItemID","playQueueLastAddedItemID","playQueueShuffled","playQueueSourceURI","playQueueTotalCount","playQueueVersion","message"],defaults:{selectedItem:null,mediaType:null,owned:!0,hasUserAdditions:!1,playQueueVersion:0},metadataElementNames:["Directory","Video","Track","Photo","Hub"],url:function(){return"/playQueues/"+this.id},initialize:function(){this.listenTo(this,"change:message",this.onMessageChange)},_fetch:function(){const e=c().result(this,"url");return this._ajax("GET",e)},convert:function(e){const t=c().isObject(e)?e:p.c.parseXML(e);return p.c.parseBoolean(t,"playQueueShuffled"),p.c.parseInteger(t,["playQueueSelectedItemOffset","playQueueTotalCount","playQueueVersion"]),p.c.parseArray(t,"Metadata"),t},parse:function(e){c().isString(e)&&(e=p.c.replaceXMLElementNames(e,this.metadataElementNames,"Metadata"));const t=this.convert(e);t.id&&(t.playQueueID=t.id);const r=c().pick(t,this.whitelistedAttrs);return this.set(r,{silent:!0}),this.pendingChanges=this.changed,this.parseItems(t),r},parseItems:function(e){let t=this.get("collection");const r=e.Metadata,n=!!r.length,i=c().pluck(r,"playQueueItemID").indexOf(e.playQueueSelectedItemID),s=e.playQueueSelectedItemOffset-i;c().each(r,(function(t,r){t.queueIndex=s+r,e.identifier&&(t.identifier=e.identifier),e.mediaTagPrefix&&(t.mediaTagPrefix=e.mediaTagPrefix),e.mediaTagVersion&&(t.mediaTagVersion=e.mediaTagVersion)})),t?t.set(r,{parse:n}):(t=new d.c(r,{server:this.server,parent:this,parse:n}),this.set("collection",t)),t.totalSize=e.playQueueTotalCount,t.availableRange={start:s,end:s+t.length}},moveItem:function(e,t){if(e===this.get("playQueueSelectedItemID"))return a().Deferred().resolve().promise();this.set("hasUserAdditions",!0);const r={after:t||-1},n=m.c.join([c().result(this,"url"),"/items/",e,"/move"],r);return this._ajax("PUT",n)},getUpNextRange:function(){const e=this.get("collection"),t=e.get(this.get("playQueueSelectedItemID")),r=e.indexOf(t),n=Math.max(r,0);let i=n;const s=this.get("playQueueLastAddedItemID");if(null!=s){const t=e.get(s),r=e.indexOf(t);r>n&&(i=r)}return{start:n,end:i}},getCurrentItem:function(){const e=this.get("playQueueSelectedItemID");return this.get("collection").findWhere({playQueueItemID:e})||null},_ajax:function(e,t){const r=c().extend(this.server.getXHROptions(t),{type:e}),n=a().ajax(r);return n.done(c().bind((function(e){this.set(this.parse(e)),c().isEmpty(this.pendingChanges)||(c().each(this.pendingChanges,(function(e,t){this.trigger("change:"+t,this,e)}),this),this.trigger("change",this),this.pendingChanges=null),this.set("selectedItem",this.getCurrentItem())}),this)),n.promise()},onMessageChange:function(e,t){t&&u.c.trigger("show:alert",{type:"error",message:t})}}),y=n.c.extend({model:h,url:"/playQueues?type="+i.c.LOCAL,parse:function(e){return this.convert(e,"PlayQueue")}})},54672:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(11364),i=r(16872),s=r(19508),a=r(40604);const o=n.c.extend({name:"VersionGeneratorMediaSettingsModel",context:["server"],syncedAttrs:{videoQuality:{type:i.c.integer,save:!0},videoResolution:{type:i.c.string,save:!0},maxVideoBitrate:{type:i.c.integer,save:!0},audioBoost:{type:i.c.integer,save:!0},subtitleSize:{type:i.c.integer,save:!0},musicBitrate:{type:i.c.integer,save:!0},photoQuality:{type:i.c.integer,save:!0},photoResolution:{type:i.c.string,save:!0}}});var c=r(95720),l=r.n(c),d=r(96420),u=r(76400),p=r(17312),m=r(96504),h=r(71684),y=r(14224);const g=n.c.extend({name:"VersionGeneratorMetadataModel",context:["server","generator"],idAttribute:"ratingKey",syncedAttrs:l().extend({},y.c.prototype.syncedAttrs,{processingState:i.c.string,processingStateContext:i.c.string})}),f=h.c.extend({name:"VersionGeneratorMetadataCollection",context:["server","generator"],model:g}),v=n.c.extend({mixins:[d.c],name:"VersionGeneratorMetadataListModel",context:["server","generator"],collectionName:"metadataItems",url(){const e=m.c.join([l().result(this.generator,"url"),"items"]);return this.getPaginatedUrl(e)},sessionAttrs:{currentPageStart:i.c.integer,currentPageSize:i.c.integer,populatedRange:i.c.object},syncedAttrs:{totalSize:i.c.integer,identifier:i.c.string,mediaTagPrefix:i.c.string,mediaTagVersion:i.c.string,viewGroup:i.c.string,title:i.c.string},syncedRelations:{metadataItems:{relationClass:f,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()},augmentResponseText:(e,t)=>t===u.sH?(0,p.c)(e):e}),b=n.c.extend({name:"VersionGeneratorPolicyModel",context:["server"],syncedAttrs:{scope:{type:i.c.string,save:!0},value:{type:i.c.integer,save:!0},unwatched:{type:i.c.boolean,save:!0}},defaults:{unwatched:!1}}),S=n.c.extend({name:"VersionGeneratorStatusModel",context:["server"],syncedAttrs:{state:i.c.string,failureCode:i.c.string,failure:i.c.string,itemsCount:i.c.integer,itemsCompleteCount:i.c.integer,itemsSuccessfulCount:i.c.integer,itemsFailedCount:i.c.integer,itemsDisabledCount:i.c.integer,totalSize:i.c.integer}}),P=n.c.extend({name:"VersionGeneratorModel",context:["server","section","playlistID"],rootPropertyName:"Item",cache:new s.c,cacheKey(e){return this.server&&this.server.getScopedKey(e.id)},urlRoot(){return`/playlists/${this.playlistID||this.parent.id}/items`},syncedAttrs:{id:i.c.integer,clientIdentifier:i.c.string,contentType:i.c.string,composite:i.c.string,type:{type:i.c.integer,save:!0},title:{type:i.c.string,save:!0},target:{type:i.c.string,save:!0},targetTagID:{type:i.c.integer,save:!0},locationID:{type:i.c.integer,save:!0},Location:{type:i.c.object,save:!0},Device:{type:i.c.object,save:!0}},sessionRelations:{children:{relationClass:v,options(){return{generator:this}}}},syncedRelations:{status:{relationClass:S,rootPropertyName:"Status"},policy:{relationClass:b,rootPropertyName:"Policy",save:!0},mediaSettings:{relationClass:o,rootPropertyName:"MediaSettings",save:!0}},derivedAttrs:{isDirectory(){const e=this.get("Location");if(e.uri)return/(playlist:\/\/|library:\/\/([\w-]*)\/directory\/)/.test(e.uri)}},defaults:()=>({type:42,locationID:-1,Location:{},Device:{}}),defaultCounts:{[a.im]:5,[a.KI]:50,[a.Ww]:50},warningCounts:{[a.im]:10,[a.KI]:100,[a.Ww]:100},getSaveParams(e,t){const r=n.c.prototype.getSaveParams.apply(this,arguments);return r.targetTagID&&(delete r.MediaSettings,delete r.Device),{Item:r}},setPolicyDefaultsFor(e){const t=this.get("policy"),r=this.get("isDirectory");return t.has("scope")||t.set("scope",r?"count":"all"),!t.has("value")&&r&&t.set("value",this.defaultCounts[e]),this},shouldShowPolicyWarning(e,t){const r=this.get("policy").get("scope");return"count"===r?t>this.warningCounts[e]:"all"===r&&this.get("isDirectory")}})},74324:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(95720),i=r.n(n),s=r(71684),a=r(76400),o=r(17312),c=r(12612),l=r(96504),d=r(11364),u=r(16872);const p=d.c.extend({name:"MetadataAutocompleteResultModel",context:["server","section","multiMetadataItem","query"],idAttribute:"ratingKey",rootPropertyName:"Metadata",syncedAttrs:{elementName:u.c.string,ratingKey:u.c.string,parentRatingKey:u.c.string,grandparentRatingKey:u.c.string,type:u.c.string,title:u.c.string,parentTitle:u.c.string,grandparentTitle:u.c.string,tag:u.c.string,tagType:u.c.integer}});function m(e,t,r){const n=/!$/.test(r),i=/\.id$/.test(r);if(n||i)return e[r]=t,e;const s=r.match(/^(.+)\.(.+)/);return s&&(e.type=(0,c.GG)(s[1]).id,r=s[2]),e[r+".query"]=t,e}const h=s.c.extend({name:"MetadataAutocompleteResultCollection",context:["server","section","multiMetadataItem","query"],model:p,url(){let e={type:(0,c.GG)(this.multiMetadataItem.get("type")).id,limit:10};return e=i().reduce(this.query,m,e),l.c.join([this.multiMetadataItem.sectionUrl(),"autocomplete"],e)},augmentResponseText:(e,t)=>t===a.sH?(0,o.c)(e):e})},16740:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(95720),i=r.n(n),s=r(11364),a=r(16872),o=r(71684);const c=s.c.extend({name:"TagModel",context:["server","section"],idAttribute:"tag",syncedAttrs:{id:a.c.integer,key:a.c.string,tag:{type:a.c.string,save:!0},tagType:a.c.integer,librarySectionID:a.c.string,librarySectionKey:a.c.string,librarySectionType:a.c.integer,librarySectionTitle:a.c.string,filter:a.c.string,role:a.c.string,thumb:a.c.string,count:a.c.integer,directory:a.c.boolean,type:a.c.string,context:a.c.string}}),l=o.c.extend({name:"TagCollection",context:["server","section"],model:c});var d=r(64764),u=r(56792),p=r(12612),m=r(96504);const h=s.c.extend({name:"LockedFieldModel",context:["server","section"],idAttribute:"name",syncedAttrs:{name:{type:a.c.string,save:!0},locked:{type:a.c.boolean,save:!0}}}),y=o.c.extend({name:"LockedFieldCollection",context:["server","section"],model:h}),g={Autotag:"autotags",Collection:"collections",Composer:"composers",Conductor:"conductors",Country:"countries",Director:"directors",Genre:"genres",Label:"labels",Mood:"moods",Producer:"producers",Role:"roles",Similar:"similar",Style:"styles",Tag:"tags",Writer:"writers"},f={album:{title:"title",parentRatingKey:"artist.id",parentTitle:"artist.title"},track:{parentRatingKey:"album.id",parentTitle:"album.title",grandparentRatingKey:"artist.id",grandparentTitle:"artist.title"}},v=s.c.extend({name:"MultiMetadataModel",context:["server","section"],rootPropertyName:"Common",isNew:()=>!1,url(){return m.c.join([this.sectionUrl(),"common"],this.getUrlParams())},saveUrl(){return m.c.join([this.sectionUrl(),"all"],this.getUrlParams())},sectionUrl(){return i().result(this.section,"url")},sessionAttrs:{metadataItems:a.c.array.isRequired,editableTags:a.c.array,originalSaveParams:a.c.object,poster:a.c.string,art:a.c.string},syncedAttrs:{mixedFields:a.c.list.isRequired,key:{type:a.c.string,save:!0},ratingKey:{type:a.c.string,save:!0},parentRatingKey:{type:a.c.string,save:!0},grandparentRatingKey:{type:a.c.string,save:!0},title:{type:a.c.string,save:!0},titleSort:{type:a.c.string,save:!0},originalTitle:{type:a.c.string,save:!0},parentTitle:{type:a.c.string,save:!0},grandparentTitle:{type:a.c.string,save:!0},year:{type:a.c.string,save:!0},tagline:{type:a.c.string,save:!0},summary:{type:a.c.string,save:!0},studio:{type:a.c.string,save:!0},contentRating:{type:a.c.string,save:!0},originallyAvailableAt:{type:a.c.string,save:!0},rating:{type:a.c.float,save:!0},userRating:{type:a.c.float,save:!0},index:{type:a.c.integer,save:!0},parentIndex:{type:a.c.integer,save:!0},editionTitle:{type:a.c.string,save:!0}},sessionRelations:{preferences:{relationClass:d.c}},syncedRelations:Object.keys(g).reduce(((e,t)=>(e[g[t]]={relationClass:l,rootPropertyName:t,save:!0},e)),{lockedFields:{relationClass:y,rootPropertyName:"Field",save:!0}}),derivedAttrs:{type(){const e=this.getSingleMetadataItem();if(e)return e.get("type")},aggregateTitle(){if(this.get("metadataItems").length)return u.c.title(null,{items:this.get("metadataItems")})},isSingleMetadataItem(){return 1===this.get("metadataItems").length}},defaults:()=>({metadataItems:[],mixedFields:[]}),initialize(e,t){this.set("metadataItems",i().clone(t.metadataItems))},getSingleMetadataItem(){return i().first(this.get("metadataItems"))},getUrlParams(){const e=(0,p.GG)(this.get("type")),t=i().map(this.get("metadataItems"),(e=>e.get("ratingKey")));return{type:e.id,id:t.join(","),includeExternalMedia:1}},getSaveParams(){const e=s.c.prototype.getSaveParams.apply(this,arguments),t=this.get("originalSaveParams");if(!t)return e;const r={};if(i().each(e,((e,n)=>{const s=t[n];i().isEqual(e,s)||i().extend(r,this.getSaveParam(n,e,s))})),r.isReparenting){delete r.isReparenting;const e=f[this.get("type")];i().each(e,((e,t)=>{const n=e+".value",s=this.getQueryAttrSibling(e)+".value",a=i().has(r,n),o=i().has(r,s);if(a&&o&&n!==s&&delete r[s],!a&&!o){const e=this.get(t);e&&(r[n]=e)}}))}return r},getSaveParam(e,t,r){if("Field"===e)return this.getFieldSaveParams(e,t,r);if(g.hasOwnProperty(e))return this.getTagSaveParams(e,t,r);const n=f[this.get("type")];if(n&&i().has(n,e)){const r=n[e];return t?{isReparenting:!0,[r+".value"]:t}:void 0}return{[e+".value"]:t}},getFieldSaveParams:(e,t,r)=>t.reduce(((e,t)=>(e[t.name+".locked"]=t.locked,e)),{}),getTagSaveParams(e,t,r){const n=i().map(t,(e=>e.tag)),s=i().map(r,(e=>e.tag)),a=i().without(s,...n),o=e.toLowerCase(),c={};return n.forEach(((e,t)=>{c[o+"["+t+"].tag.tag"]=e})),a.length&&(c[o+"[].tag.tag-"]=i().map(a,encodeURIComponent).join(",")),c},getQueryAttr(e){const t=this.get("type"),r=f[t];return r&&r[e]||e},getQueryAttrSibling(e){const t=this.getQueryAttr(e).match(/(^.*\.)(.*$)/);return t?t[1]+("id"===t[2]?"title":"id"):e}})},78328:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"AvailableProviderModel",context:["server"],rootPropertyName:"MediaProvider",syncedAttrs:{identifier:s.c.string,title:s.c.string}}),o=n.c.extend({name:"AvailableProvidersCollection",context:["server"],model:a,url:"/media/providers?ignore_opt_outs=true"})},74648:(e,t,r)=>{"use strict";r.d(t,{cp:()=>a});var n=r(11364),i=r(16872),s=r(64764);const a=n.c.extend({name:"MediaGrabberDeviceModel",context:["server"],rootPropertyName:"Device",idAttribute:"key",sessionAttrs:{isChannelsPending:i.c.boolean,isChannelsPopulated:i.c.boolean,channelsError:i.c.object,selectedSource:i.c.string,isSaving:i.c.boolean,saveError:i.c.object},syncedAttrs:{key:i.c.integer,uuid:i.c.string,parentID:i.c.integer,uri:i.c.string,protocol:i.c.string,status:i.c.string,state:i.c.string,lastSeenAt:i.c.integer,make:i.c.string,model:i.c.string,modelNumber:i.c.string,source:i.c.integer,sources:i.c.list,title:i.c.string,tuners:i.c.integer,thumb:i.c.string,unsupported:i.c.boolean},syncedRelations:{prefs:{relationClass:s.c,rootPropertyName:"Setting",deferred:!0,save:!0}},defaults:{isChannelsPending:!1,isChannelsPopulated:!1,channelsError:null,isSaving:!1,saveError:null,unsupported:!1}})},21683:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(71684),i=r(11364),s=r(16872),a=r(64764),o=r(74648);const c=n.c.extend({name:"MediaGrabberDeviceCollection",context:["server"],model:o.cp,url:"/media/grabbers/devices"}),l=i.c.extend({name:"DVRModel",context:["server"],rootPropertyName:"Dvr",idAttribute:"key",syncedAttrs:{key:s.c.integer},sessionAttrs:{isSaving:s.c.boolean,saveError:s.c.object},syncedRelations:{devices:{relationClass:c,rootPropertyName:"Device"},prefs:{relationClass:a.c,rootPropertyName:"Setting",deferred:!0,save:!0}},defaults:{isSaving:!1,saveError:null}}),d=n.c.extend({name:"DVRCollection",context:["server"],model:l,url:"/livetv/dvrs"})},54292:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(95720),i=r.n(n),s=r(71684),a=r(13836),o=r(11364),c=r(16872),l=r(76400);const d=o.c.extend({name:"AgentAttributionModel",context:["server"],responseType:l.q2,syncedAttrs:{content:c.c.string},url:function(){return"/system/agents/attribution?identifier="+this.parent.id},augmentResponse:function(e){return{content:e}}});var u=r(6560);const p=o.c.extend({name:"LanguageModel",context:["server"],idAttribute:"code",rootPropertyName:"Language",syncedAttrs:{code:c.c.string,title:c.c.string,default:c.c.boolean},derivedAttrs:{name:function(){return this.get("title")||(0,u.c)(this.get("code"))}}}),m=s.c.extend({name:"LanguageCollection",context:["server"],model:p,comparator:"name"}),h=o.c.extend({name:"AgentModel",context:["server"],idAttribute:"identifier",rootPropertyName:"Agent",sessionAttrs:{isPrimary:c.c.boolean,selected:c.c.boolean},sessionRelations:{attribution:{relationClass:d}},syncedAttrs:{identifier:c.c.string,name:c.c.string,enabled:c.c.boolean,hasPrefs:c.c.boolean,order:c.c.string},syncedRelations:{languages:{relationClass:m,rootPropertyName:"Language"}}}),y=s.c.extend({name:"AgentCollection",context:["server","mediaTypeID","primaryAgentID","relatedAgentID"],model:h,cache:new a.c,cacheKey:function(){var e;const t=i().result(this,"url");return null==(e=this.server)?void 0:e.getScopedKey(t)},url:function(){const e="/system/agents";return this.primaryAgentID?e+"/contributors?mediaType="+this.mediaTypeID+"&primaryAgent="+this.primaryAgentID:this.relatedAgentID?e+"/"+this.relatedAgentID+"/config/"+this.mediaTypeID:this.mediaTypeID?e+"?mediaType="+this.mediaTypeID:e},hasExclusiveAgent:function(e){return!!i().intersection(this.pluck("identifier"),e).length}})},12116:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95720),i=r.n(n),s=r(26344),a=r.n(s);const o=a().extend({constructor:function(e,t,r,n){this.exclusiveAgents=t,this.agentIdentifier=r,a().call(this,e,n),this.filterBy(i().bind(this.filterExclusiveAgent,this))},filterExclusiveAgent:function(e){const t=e.get("identifier"),r=this.exclusiveAgents;if(!r)return!0;const n=this.agentIdentifier,i=-1!==r.indexOf(n),s=-1!==r.indexOf(t);return i?t===n:!s}})},11912:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(95720),i=r.n(n),s=r(11364);const a=s.c.extend({additionalRelations:[],copyFromModel(e,t){this._copy(e,this,t)},copyToModel(e,t){this._copy(this,e,t)},_copy(e,t,r={}){const n=!!t.releaseCapturedChangeEvents;n||t.startCapturingChangeEvents(),this._copyAttributes(e,t,r),this._copyRelations(e,t,r),n||t.releaseCapturedChangeEvents()},_copyAttributes(e,t,r){const n={};i().each(this.syncedAttrs,((t,i)=>{r.included&&!r.included.includes(i)||(n[i]=e.get(i))})),t.set(n)},_copyRelations(e,t,r){i().each(this.syncedRelations,((n,i)=>{if(r.included&&!r.included.includes(i))return;if(this.additionalRelations.includes(i))return;const a=e.get(i),o=t.get(i);if(a&&o){const e=a.toJSON();o instanceof s.c?o.set(o.parse(e)):o.set(e,{parse:!0})}}))}})},8712:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(16872),i=r(71684),s=r(11364);const a=s.c.extend({name:"StoredConnectionSourceModel",syncedAttrs:{id:n.c.string}}),o=i.c.extend({name:"StoredConnectionSourceCollection",model:a}),c=s.c.extend({name:"StoredConnectionModel",idAttribute:"uri",syncedAttrs:{uri:n.c.string,scheme:n.c.string,address:n.c.string,port:n.c.string,relay:n.c.boolean},syncedRelations:{sources:{relationClass:o}}}),l=i.c.extend({name:"StoredConnectionCollection",model:c});var d=r(11912),u=r(53272),p=r(99028),m=Object.defineProperty,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const v=s.c.extend({name:"StoredProviderModel",idAttribute:"identifier",syncedAttrs:((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e})({},p.c.prototype.syncedAttrs),syncedRelations:{features:{relationClass:u.c}}}),b=i.c.extend({name:"StoredProviderCollection",model:v}),S=d.c.extend({name:"StoredServerModel",idAttribute:"machineIdentifier",additionalRelations:["connections"],syncedAttrs:{machineIdentifier:n.c.string,friendlyName:n.c.string,accessToken:n.c.string,sourceTitle:n.c.string,home:n.c.boolean,serverClass:n.c.string,platform:n.c.string,isShared:n.c.boolean,version:n.c.string,publicAddressMatches:n.c.boolean,ownerId:n.c.integer,mediaProviders:n.c.integer},syncedRelations:{providers:{relationClass:b},connections:{relationClass:l}}})},65080:(e,t,r)=>{"use strict";r.d(t,{c:()=>x});var n=r(16872),i=r(41932),s=(r(79268),r(71684)),a=r(52180),o=r(58744),c=r(54488),l=r(12372),d=r(82108),u=r(45791),p=r(11912),m=r(8712);const h=s.c.extend({name:"StoredServerCollection",model:m.c});var y=r(11364),g=r(45524),f=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const w=y.c.extend({name:"StoredUserSettingModel",syncedAttrs:(C=((e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e})({},g.c.prototype.syncedAttrs),O={isDirty:n.c.boolean},v(C,b(O)))});var C,O;const M=w,T=s.c.extend({name:"StoredUserSettingCollection",model:M}),D=p.c.extend({name:"StoredUserModel",additionalRelations:["servers"],syncedAttrs:{id:n.c.integer,authToken:n.c.string,anonymous:n.c.boolean,username:n.c.string,email:n.c.string,title:n.c.string,thumb:n.c.string,pin:n.c.string,home:n.c.boolean,restricted:n.c.boolean,guest:n.c.boolean,hasAllEntitlements:n.c.boolean,lastPrimaryServerID:n.c.string},syncedRelations:{subscriptions:{relationClass:u.c},roles:{relationClass:l.c},entitlements:{relationClass:c.c},services:{relationClass:d.c},features:{relationClass:o.c},settings:{relationClass:T},experienceSettings:()=>({relationClass:(0,a.WI)("StoredUserExperienceSettingsModel")}),servers:{relationClass:h}},clearSensitiveAttributes(){this.unset("authToken"),this.unset("pin"),this.get("servers").reset()}}),k=s.c.extend({name:"StoredUserCollection",model:D}),x=new(i.c.extend({name:"UserStorageModel",storageKey:"users",sessionAttrs:{activeUserID:n.c.integer},syncedRelations:{users:{relationClass:k}},initialize(){this.debouncedSaveTimeout=null},debouncedSave(){this.debouncedSaveTimeout&&window.clearTimeout(this.debouncedSaveTimeout),this.debouncedSaveTimeout=window.setTimeout((()=>this.save()),1e3)},flushDebouncedSave(){this.debouncedSaveTimeout&&(window.clearTimeout(this.debouncedSaveTimeout),this.save())},getActiveUser(){const e=this.get("users"),t=this.get("activeUserID");if(null!=t)return e.get(t)},clearActiveUser(){const e=this.getActiveUser();return e&&e.clearSensitiveAttributes(),this.unset("activeUserID"),this.save()},getActiveServers(){const e=this.getActiveUser();if(e)return e.get("servers")}}))},45128:(e,t,r)=>{"use strict";r.d(t,{C:()=>o,c:()=>c});var n=r(11364),i=r(16872),s=r(52482),a=r(50708);const o={WARNING:"warning",USER:"user",LIBRARIES:"libraries",RESTRICTIONS:"restrictions",SUMMARY:"summary"},c=n.c.extend({name:"ShareModalModel",context:["server"],sessionAttrs:{steps:i.c.array,step:i.c.string,metadataItemEntityID:i.c.string,friendEntityID:i.c.string,username:i.c.string,restrictionProfileIdentifier:i.c.string,isNewFriend:i.c.boolean,isAddingHomeUser:i.c.boolean,isCreatingManagedUser:i.c.boolean,selectedAllLibrariesMachineIdentifiers:i.c.array,selectedLibrarySectionIDs:i.c.array,filterOptionsTags:i.c.object,isUsernameValidating:i.c.boolean,isUsernameValidated:i.c.boolean,isServerOverviewsPopulating:i.c.boolean,isServerOverviewsPopulated:i.c.boolean,isServerSharesPopulating:i.c.boolean,isServerSharesPopulated:i.c.boolean,serverSharesError:i.c.string,isFilterOptionsTagsPopulating:i.c.boolean,isFilterOptionsTagsPopulated:i.c.boolean,isSharingPending:i.c.boolean,isSharingCompleted:i.c.boolean,sharingError:i.c.string,inviteToken:i.c.string,inviteTokenError:i.c.string},sessionRelations:{serverOverviews:{relationClass:s.c,deferred:!0}},defaults:()=>({steps:[],step:null,metadataItemEntityID:null,friendEntityID:null,username:"",restrictionProfileIdentifier:a.CU,isNewFriend:!1,isAddingHomeUser:!1,isCreatingManagedUser:!1,selectedAllLibrariesMachineIdentifiers:null,selectedLibrarySectionIDs:null,filterOptionsTags:{},isUsernameValidating:!1,isUsernameValidated:!1,isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!1,isServerSharesPopulating:!1,isServerSharesPopulated:!1,serverSharesError:null,isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!1,isSharingPending:!1,isSharingCompleted:!1,sharingError:null,inviteToken:null,inviteTokenError:null})})},91740:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11364),i=r(16872),s=r(18168),a=r(6084),o=r(79320),c=r(71684),l=r(93780);const d=c.c.extend({name:"ServerShareCollection2",context:["server"],model:l.c});var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const g=n.c.extend({name:"FriendModel2",context:["server"],rootPropertyName:"User",entityType:a.Yh,entityID(e=this.state){return(0,s.c)(this.entityType,e.id)},urlRoot(){return this.get("home")?"/api/users":"/api/friends"},sessionAttrs:{user:i.c.string,isRemoving:i.c.boolean},syncedAttrs:((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e})({id:i.c.integer,home:i.c.boolean,protected:i.c.boolean,restricted:i.c.boolean,title:i.c.string,username:i.c.string,email:i.c.string,thumb:i.c.string,recommendationsPlaylistId:i.c.string},o.c),syncedRelations:{serverShares:{relationClass:d,rootPropertyName:"Server"}},defaults:{isRemoving:!1}})},8296:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(74844),i=r(95720),s=r.n(i),a=r(71832),o=r(87228);const c=a.c.extend({urlRoot:"/api/home/users",whitelistedAttrs:["id","uuid","admin","protected","restricted","restrictionProfile","guest","title","username","email","thumb"],convert(e){let t=s().isObject(e)?e:o.c.parseXML(e);return t.User&&(t=t.User),o.c.parseInteger(t,"id"),o.c.parseBoolean(t,["admin","protected","restricted","guest"]),t},parse(e){let t=this.convert(e);return t=s().pick(t,this.whitelistedAttrs),t},getSaveParams(e,t){if(s().isEmpty(e)){const e={};return this.get("restricted")?e.title=this.get("title"):this.isNew()&&(e.invitedEmail=this.get("username")),e}return a.c.prototype.getSaveParams.apply(this,arguments)}}),l=n.c.extend({model:c,url:"/api/home/users",parse(e){return this.convert(e,"User")}})},49768:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(95720),i=r.n(n),s=r(11364),a=r(16872),o=r(18168),c=r(6084),l=r(79320),d=r(96504),u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const g=s.c.extend({name:"HomeUserModel",context:["server"],rootPropertyName:"User",entityType:c.q0,entityID(e=this.state){return(0,o.c)(this.entityType,e.id)},urlRoot(){return this.get("restricted")?"/api/v2/home/users":"/api/home/users"},saveUrl(){let e=i().result(this,"url");return this.get("restricted")&&(e=d.c.join([e,"/restricted"])),e},pinUrl(){const e=this.get("restricted")?"/api/v2/home/users/restricted":"/api/home/users";return d.c.join([e,this.get("id")])},sessionAttrs:{isRemoving:a.c.boolean},syncedAttrs:((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e})({id:a.c.integer,uuid:a.c.string,admin:a.c.boolean,protected:a.c.boolean,restricted:a.c.boolean,restrictionProfile:a.c.string,guest:a.c.boolean,title:a.c.string,username:a.c.string,email:a.c.string,thumb:a.c.string},l.c),defaults:{isRemoving:!1},getSaveParams(e){const t=s.c.prototype.getSaveParams.apply(this,arguments);return e&&0!==Object.keys(e).length||(this.get("restrictionProfile")&&(t.restrictionProfile=this.get("restrictionProfile")),t.sharingSettings={},Object.keys(l.c).forEach((e=>{t.hasOwnProperty(e)&&(t.sharingSettings[e]=t[e],delete t[e])})),this.get("restricted")?t.friendlyName=this.get("username"):this.isNew()&&(t.invitedEmail=this.get("username"))),t}})},93780:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11364),i=r(16872),s=r(25116),a=r(76400),o=r(71684);const c=n.c.extend({name:"ServerShareLibraryModel",syncedAttrs:{id:i.c.integer,key:i.c.string,title:i.c.string,type:i.c.string}}),l=o.c.extend({name:"ServerShareLibraryCollection",context:["server"],model:c});var d=r(79320);const u=n.c.extend({name:"ServerShareSharingSettingsModel",syncedAttrs:d.c}),p=n.c.extend({name:"ServerShareModel2",context:["server"],mergeStrategy:s.c,responseType:a.qS,urlRoot:"api/v2/shared_servers",syncedAttrs:{id:i.c.integer,serverId:i.c.integer,machineIdentifier:i.c.string,name:i.c.string,owned:i.c.boolean,admin:i.c.boolean,pending:i.c.boolean,accepted:i.c.boolean,ownerId:i.c.integer,inviteToken:i.c.string,invitedEmail:i.c.string,invitedAt:i.c.string,acceptedAt:i.c.string,lastSeenAt:i.c.string,deletedAt:i.c.string,leftAt:i.c.string,numLibraries:i.c.integer,allLibraries:i.c.boolean},syncedRelations:{libraries:{relationClass:l},sharingSettings:{relationClass:u}}})},54488:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"UserEntitlementModel",syncedAttrs:{id:s.c.string}}),o=n.c.extend({name:"UserEntitlementCollection",model:a})},12372:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"UserRoleModel",syncedAttrs:{id:s.c.string}}),o=n.c.extend({name:"UserRoleCollection",model:a})},82108:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(71684),i=r(11364),s=r(16872);const a=i.c.extend({name:"UserServiceModel",syncedAttrs:{id:s.c.string,subscriptionType:s.c.string}}),o=n.c.extend({name:"UserServiceCollection",model:a})},45524:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11364),i=r(16872),s=r(98352),a=r(33964),o=r(81240);const c={bool:s.c,json:o.c},l=n.c.extend({name:"UserSettingModel",context:["server"],sessionAttrs:{isDirty:i.c.boolean},syncedAttrs:{id:i.c.string,type:i.c.string,value:i.c.oneOfType(i.c.boolean,i.c.object),hidden:i.c.boolean,updatedAt:i.c.integer},defaults:{isDirty:!1},augmentResponse(e){const t=this.get("isDirty"),r=this.get("updatedAt"),n=(0,a.c)(e.updatedAt),i=r&&n&&r<n;if(t&&r===n||r&&n&&r>n)return this.toJSON();t&&i&&(e.isDirty=!1);const s=c[e.type];return s&&(e.value=s(e.value)),e}})},45791:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(71684),i=r(11364),s=r(16872),a=r(50292),o=r(69972);const c=i.c.extend({name:"UserSubscriptionModel",syncedAttrs:{type:s.c.oneOf(...o.cp).isRequired,state:s.c.oneOf(...a.cp).isRequired,mode:s.c.string.isRequired}}),l=n.c.extend({name:"UserSubscriptionCollection",model:c})},70432:(e,t,r)=>{"use strict";r.d(t,{c:()=>D,M:()=>T});var n=r(16872),i=r(11364),s=r(71684),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e};const h={hubIdentifier:n.c.string,hubKey:n.c.string,key:n.c.string,style:n.c.string,subtype:n.c.string,title:n.c.string,type:n.c.string},y={friendlyName:n.c.string,machineIdentifier:n.c.string.isRequired,sourceTitle:n.c.string},g={identifier:n.c.string,providerIdentifier:n.c.string,title:n.c.string},f=i.c.extend({name:"HomeHubProviderModel",syncedAttrs:m({},g)}),v=i.c.extend({name:"HomeHubServerModel",syncedAttrs:m({},y)});var b,S;const P=i.c.extend({name:"HomeHubModel",syncedAttrs:(b=m({},h),S={id:n.c.string.isRequired,directoryID:n.c.string.isRequired,directoryKey:n.c.string.isRequired,isHidden:n.c.boolean.isRequired,hiddenAt:n.c.integer},o(b,c(S))),syncedRelations:{provider:{relationClass:f},server:{relationClass:v}},defaults:{isHidden:!1}}),I=s.c.extend({name:"HomeHubCollection",model:P});var E=r(39036);const w=i.c.extend({name:"HomeSettingsModel",syncedAttrs:{hasCustomizations:n.c.boolean.isRequired,hasSeededPreferredServerContent:n.c.boolean.isRequired,hasSeededProviderPromotedContent:n.c.boolean.isRequired,preferredServerID:n.c.string,settingsKey:n.c.string.isRequired,version:n.c.integer.isRequired},syncedRelations:{hubs:{relationClass:I}},defaults:()=>({hasCustomizations:!1,hasSeededPreferredServerContent:!1,hasSeededProviderPromotedContent:!1,settingsKey:(0,E.c)(),version:1})}),C=i.c.extend({name:"SidebarSourceModel",idAttribute:"key",syncedAttrs:{key:n.c.string.isRequired,sourceType:n.c.string.isRequired,machineIdentifier:n.c.string.isRequired,providerIdentifier:n.c.string.isRequired,directoryID:n.c.string,directoryIcon:n.c.string,title:n.c.string.isRequired,serverFriendlyName:n.c.string.isRequired,serverSourceTitle:n.c.string,providerSourceTitle:n.c.string,detail:n.c.string,isCloud:n.c.boolean,isFullOwnedServer:n.c.boolean,isHidden:n.c.boolean.isRequired,hiddenAt:n.c.integer},defaults:{isHidden:!1}}),O=s.c.extend({name:"SidebarSourceCollection",model:C}),M=i.c.extend({name:"SidebarSettingsModel",syncedAttrs:{hasCompletedSetup:n.c.boolean.isRequired},syncedRelations:{pinnedSources:{relationClass:O}},defaults:()=>({hasCompletedSetup:!1})}),T="experience",D={sessionAttrs:{sidebarPreferredSourcesSavedEnteredPath:n.c.string,isDirty:n.c.boolean.isRequired,isSaving:n.c.boolean.isRequired,saveError:n.c.object},syncedAttrs:{updatedAt:n.c.integer,autoHomeHubsEnabled:n.c.boolean,shouldSaveLastSourcePivots:n.c.boolean.isRequired,lastSourcePivots:n.c.object.isRequired,savedPivotParams:n.c.object.isRequired,disabledUniversalSearchIdentifiers:n.c.object.isRequired,autoPinnedProviders:n.c.array.isRequired,dismissedUpsellModals:n.c.array,disabledEpgSources:n.c.array},syncedRelations:{homeSettings:{relationClass:w},sidebarSettings:{relationClass:M}},defaults:{autoHomeHubsEnabled:null,sidebarPreferredSourcesSavedEnteredPath:null,isDirty:!1,isSaving:!1,saveError:null,shouldSaveLastSourcePivots:!0,lastSourcePivots:{},savedPivotParams:{},disabledUniversalSearchIdentifiers:{},autoPinnedProviders:[],dismissedUpsellModals:[],disabledEpgSources:[]}}},59212:(e,t,r)=>{"use strict";r.d(t,{CI:()=>m,Ck:()=>s,Go:()=>d,Mh:()=>S,Q5:()=>v,Rt:()=>i,UT:()=>l,a0:()=>f,e$:()=>a,k3:()=>c,m0:()=>y,oH:()=>n,oO:()=>o,sT:()=>g,wD:()=>b,y4:()=>u,y9:()=>h,ye:()=>p});const n="INIT_TIMELINE_PAGE",i="CLOSE_TIMELINE_PAGE",s="FETCH_TIMELINE_DETAILS",a="POPULATE_TIMELINE_DETAILS",o="CHANGE_BACKGROUND",c="CHANGE_THEME_MUSIC",l="RESET_BACKGROUND",d="INIT_PLAYLIST_PAGE",u="INIT_PLAYLIST_ITEM_LIST",p="RESET_PLAYLIST_ITEM_LIST",m="FETCH_PLAYLIST",h="POPULATE_PLAYLIST_ITEM_RANGE",y="REPOPULATE_PLAYLIST_ITEMS",g="SELECT_PLAYLIST_ITEM",f="DESELECT_PLAYLIST_ITEM",v="MOVE_PLAYLIST_ITEM",b="REMOVE_PLAYLIST_ITEM",S="REMOVE_SELECTED_ITEMS"},75560:(e,t,r)=>{"use strict";r.d(t,{i2:()=>ee,W0:()=>z,mE:()=>G,sR:()=>J,G1:()=>Z,q4:()=>$,C8:()=>q,gt:()=>K,wd:()=>H,gj:()=>Q,mY:()=>X,Aj:()=>Y});var n=r(95720),i=r.n(n),s=r(13778),a=r(55340),o=r(21248),c=r(38828),l=r(58036),d=r(96504),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e,t){return e.save((r=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e})({},t),n={isSaving:!0,saveError:null},p(r,m(n)))).then((()=>{e.set({isSaving:!1})}),(t=>{const r=t&&t.message||"";e.set({isSaving:!1,saveError:{message:r}})}));var r,n}var b=r(35200),S=r(11420),P=r(39172),I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&T(e,r,t[r]);if(C)for(var r of C(t))M.call(t,r)&&T(e,r,t[r]);return e},k=(e,t)=>E(e,w(t));const x="app/restoreDefaultDeviceSettings",A="app/discoverServers",R="app/dismissUnclaimedServer",N="app/redirectToRoute",L="app/redirectToUrl",j="app/toggleFullscreen",U="app/selectAudioDevice",F="app/updateAudioDevices",V="app/populateCloudServer",_="app/updateNavigationHistory",W="app/setNavigationOrigin",B="app/updateAvailable",H=(0,a.c)(x),z=(0,a.c)(A),G=(0,a.c)(R),q=(0,a.c)(N),K=(0,a.c)(L),Q=(0,a.c)(U),$=((0,a.c)(F),(0,a.c)(V)),Y=(0,a.c)(_),X=(0,a.c)(W),J=((0,a.c)(B),(0,a.c)(j,(e=>({isFullscreen:!0})))),Z=(0,a.c)(j,(e=>({isFullscreen:!1}))),ee={[s.ae]:s.i2[s.ae],[s.c1]:s.i2[s.c1],[s.OC]:s.i2[s.OC],[s.SG]:s.i2[s.SG],[s.ek]:s.i2[s.ek],[s.cL]:s.i2[s.cL],[s.Ah]:s.i2[s.Ah],[s.a2]:s.i2[s.a2],[s.ms]:s.i2[s.ms],[s.WS](e,t){v(e.get("deviceSettings"),t)},[x](e){const t=e.get("deviceSettings");!function(e,{isUserRestricted:t}){const r={shouldSyncSettings:e.get("shouldSyncSettings")};t&&(r.autoLogin=e.get("autoLogin")),e.restoreDefaults(r)}(t,{isUserRestricted:e.get("user").get("restricted")}),v(t,{})},[A](e){o.c.trigger("discover:servers")},[R](e,t,r){const{machineIdentifier:n}=t,i=e.get("deviceSettings").get("dismissedUnclaimedServers");i[n]||r((0,s.wB)({dismissedUnclaimedServers:k(D({},i),{[n]:!0})}))},[s.sH](e,t){const{machineIdentifier:r}=t;e.get("servers").findServer(r).then((t=>{e.set({primaryServer:t,isWaitingForPrimaryServer:!1})}),(()=>{c.c.warn("Unable to set primary server to:",r)}))},[s.wJ](e){e.set({primaryServer:null,isWaitingForPrimaryServer:!0})},[s.Sw](e,t){const{machineIdentifier:r}=t;e.get("servers").findServer(r).done((t=>{!t.get("isOutOfDate")&&t.get("isPrimaryEligible")&&e.get("primaryServer")!==t&&e.set({primaryServer:t,isWaitingForPrimaryServer:!1})}))},[s.q4](e,t,r){const n=function(e,t=!0){let r="";return e&&("string"==typeof e.pathname?r=e.query?d.c.join(e.pathname,e.query):e.pathname:"string"==typeof e&&(r=e)),r&&t&&0!==r.indexOf("#!")&&(r="#!"+r),r}(t);t.replace?window.location.replace(n):window.location.href=n},[s.kF](e,t,r){const{key:n,replace:i}=t,a=(0,l.Ww)(e,t),o=(0,l.IB)(e,t),c=(0,P.c)(a.toJSON(),o.toJSON(),n);c&&r((0,s.IB)({pathname:c,replace:i}))},[N](e,{route:t,params:r,queryParams:n,replace:s}){i().defer((()=>{(0,S.c)(t,r,n,s)}))},[L](e,{url:t,replace:r}){r?window.location.replace(t):window.location.href=t},[j](e,{isFullscreen:t}){e.get("isFullscreen")!==t&&e.set("isFullscreen",t)},[B](e,{isUpdateAvailable:t}){e.get("isUpdateAvailable")!==t&&e.set("isUpdateAvailable",t)},[U](){},[F](){},[V](e){e.get("cloudServer").populate()},[_](e,t){const{location:r}=t,n=e.get("history"),i=n.length?n[n.length-1]:void 0;n.length&&i.pathname===r.pathname&&i.search===r.search||e.set("history",[...n,{pathname:r.pathname,search:r.search,origin:null==i?void 0:i.nextOrigin}])},[W](e,t){const{origin:r}=t,n=e.get("history"),i=n.length?n[n.length-1]:void 0;i&&e.set("history",[...n.slice(0,n.length-1),k(D({},i),{nextOrigin:r})])},[s.s5](e,{replace:t}={}){const r=e.get("history");if(r.length<2)e.set("history",[]),(0,S.c)("home",{},t);else{const n=r.slice(0,r.length-1);e.set("history",n);const i=n[n.length-1];t?b.c.replace(i):b.c.push(i)}}}},38140:(e,t,r)=>{"use strict";r.d(t,{CM:()=>l,Gi:()=>a,Mi:()=>o,Ws:()=>s,eB:()=>c});var n=r(55340),i=r(76800);const s=(0,n.c)("downloads/cancelDownloadActivity"),a=(0,n.c)("downloads/createDownloadSubscription"),o=((0,n.c)("downloads/deleteDownloadState"),(0,n.c)("downloads/deleteDownloadSubscription")),c=((0,n.c)("downloads/fetchDownloadSubscriptions"),(0,n.c)("downloads/populateDownloadSubscriptions"),(0,n.c)("downloads/processDownloadSubscriptions"),(0,n.c)("downloads/retryDownloadSubscription")),l=((0,n.c)("downloads/saveDownloadSubscription"),(0,n.c)("downloads/syncDownloadViewstate"),(0,n.c)("downloads/updateDownloadState"),(0,n.c)("downloads/refreshDownloads"));(0,n.c)("downloads/getDownloadDecision"),(0,i.c)({})},6268:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(38316),i=r.n(n),s=r(14224),a=r(69956),o=r(18168),c=r(6084),l=r(58036),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function g(e,t){var r,n,d,u;const p=function(e,t){if(t.server)return(0,l.Ww)(e,{serverEntityID:t.server.entityID});if(t.metadataItem.source){const{serverIdentifier:r}=(0,a.c)(t.metadataItem.source),n=(0,o.c)(c.qe,r);return(0,l.Ww)(e,{serverEntityID:n})}}(e,t),m=function(e,t){if(t.provider)return(0,l.IB)(e,{providerEntityID:t.provider.entityID});if(t.metadataItem.source){const{serverIdentifier:r,providerIdentifier:n}=(0,a.c)(t.metadataItem.source),i=(0,o.c)(c.qe,r),s=(0,o.c)(c.SF,n,i);return(0,l.IB)(e,{providerEntityID:s})}}(e,t);let h,g;if(t.itemServer&&(h=(0,l.Ww)(e,{serverEntityID:t.itemServer.entityID})),t.itemProvider&&(g=(0,l.IB)(e,{providerEntityID:t.itemProvider.entityID})),!t.metadataItem)return{serverModel:p,providerModel:m,itemServerModel:h,itemProviderModel:g};const f=i()(y(y({},t.metadataItem),t.metadataItemState));if(f.source){const{serverIdentifier:e,providerIdentifier:t}=(0,a.c)(f.source);p&&m&&(e!==p.get("machineIdentifier")||t!==m.get("identifier"))||delete f.source}const v=new s.c(f,{server:h||p,provider:g||m,identifier:null!=(u=null!=(d=null==(r=t.itemProvider)?void 0:r.identifier)?d:null==(n=t.provider)?void 0:n.identifier)?u:m.get("identifier"),parse:!0});null==v._populatedParams&&(v._populatedParams={});const b={includeExternalMedia:1};return f.preferences&&(b.includePreferences=1),f.extras&&(b.includeExtras=1),f.stations&&(b.includeStations=1),f.onDeck&&(b.includeOnDeck=1),f.popularLeaves&&(b.includePopularLeaves=1),f.Concert&&(b.includeConcerts=1),f.Chapter&&(b.includeChapters=1),Object.assign(v._populatedParams,b),{serverModel:p,providerModel:m,itemServerModel:h,itemProviderModel:g,metadataItemModel:v}}},48588:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(37588),i=r.n(n),s=r(52180),a=r(66780),o=r(96504),c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t));function f(e,t){const{libraryID:r,libraryType:n,cancel:c,force:l,allowMetrics:d,metricsProperties:u={}}=t,p=l?{force:1}:void 0,m=o.c.join(["/library/sections",r,"refresh"],p),h=e.getXHROptions(m,{type:c?"DELETE":"GET"});if(d){let e;e=c?a.CW:l?a._A:a.uO,(0,s.WI)("metrics").trackClick(g(y({},u),{action:e,type:"all"===r?"all":n}))}return i().ajax(h).promise()}},67496:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(37588),i=r.n(n),s=r(75276),a=r(38924),o=r(65284),c=r(12612);function l(e,t){const r=e.title.toUpperCase(),n=t.title.toUpperCase();return r<n?-1:r>n?1:0}function d(e,t){const r=Array.isArray(e)?e:[e],n=i().Deferred(),d={[a.MF]:[],[a.eS]:[]},u={[c.MOVIE]:{[a.MF]:[],[a.eS]:[]},[c.M7]:{[a.MF]:[],[a.eS]:[]},[c.iI]:{[a.MF]:[],[a.eS]:[]}},p=r.reduce(((e,t)=>(t.get("isConnected")&&e.push(t.get("sections")),e)),[]),m=p.map((e=>e.populate({scope:t})));return(0,o.c)(m).done((()=>{p.forEach((e=>{e.forEach((e=>{const t=e.get("type");u[t]&&[a.MF,a.eS].forEach((t=>{const r=new s.c({filter:t},{server:e.server,section:e}).get("options");d[t].push(r)}))}))})),(0,o.c)([...d[a.MF].map((e=>e.fetch({scope:t}))),...d[a.eS].map((e=>e.fetch({scope:t})))]).done((()=>{d[a.MF].forEach((e=>{const t=e.section.get("type");e.toJSON().forEach((e=>{u[t][a.MF].find((t=>t.value===e.value))||u[t][a.MF].push(e)}))})),d[a.eS].forEach((e=>{const t=e.section.get("type");e.toJSON().forEach((e=>{u[t][a.eS].find((t=>t.value===e.value))||u[t][a.eS].push(e)}))})),Object.keys(u).forEach((e=>{const t=u[e];t[a.MF].sort(l),t[a.eS].sort(l)})),n.resolve(u)}))})),n.promise()}},82852:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e.get("ui").get("authCodeExchange")}},54332:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(38924);function i(e,t,r,i){const s={};return e&&e.length&&(s[n.MF]=e.join(",")),t&&t.length&&(s[n.Gw]=t.join(",")),r&&r.length&&(s[n.eS]=r.join(",")),i&&i.length&&(s[n.wT]=i.join(",")),s}function s(e){const{allowSync:t,allowTuners:r,moviesContentRatings:n,moviesExcludeContentRatings:s,moviesLabels:a,moviesExcludeLabels:o,televisionContentRatings:c,televisionExcludeContentRatings:l,televisionLabels:d,televisionExcludeLabels:u,musicLabels:p,musicExcludeLabels:m}=e,h={};return null!=t&&(h.allowSync=t),null!=r&&(h.allowTuners=Number(r)),null==n&&null==s&&null==a&&null==o||(h.filterMovies=i(n,s,a,o)),null==c&&null==l&&null==d&&null==u||(h.filterTelevision=i(c,l,d,u)),null==p&&null==m||(h.filterMusic=i(null,null,p,m)),h}},69012:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37588),i=r.n(n);const s=function(e){const t=e.get("cloudServer");return i().ajax(t.getXHROptions("/api/v2/pins",{method:"POST",dataType:"json",data:{strong:!0}})).then((e=>e))}},28792:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(37588),i=r.n(n),s=r(52180),a=r(24372);function o(e,t){const r=(0,s.WI)("appModel").get("cloudServer"),n=(0,a.c)(e),o=new window.FormData;o.append("avatar",n),t&&o.append("userId",t);const c=r.getXHROptions("/api/v2/user",{type:"PUT",processData:!1,contentType:!1,data:o});return i().ajax(c)}},30388:(e,t,r)=>{"use strict";r.d(t,{EJ:()=>Ot,OE:()=>Ft,Yz:()=>Jt,SW:()=>Vt,qK:()=>_t,m9:()=>Wt,W_:()=>Bt,Sc:()=>Zt,eu:()=>Ht,GW:()=>zt,Qz:()=>rr,Si:()=>tr,It:()=>or,U3:()=>sr,AL:()=>Gt,u2:()=>qt,wZ:()=>Ut,oF:()=>Kt,Q3:()=>Qt,is:()=>er,MR:()=>$t,q8:()=>nr,eQ:()=>ir,mU:()=>Yt,_O:()=>Xt});var n=r(37588),i=r.n(n),s=r(52180),a=r(43876),o=r(55340),c=r(8295),l=r(55480),d=r(45732),u=r(96504),p=r(84676);var m=r(64220),h=r(47456),y=r(59740),g=r(66780),f=r(21248),v=r(79084),b=r(59396),S=r(6268),P=r(45564),I=r(71928),E=r(11420),w=r(95720),C=r.n(w),O=r(81543),M=r(68864),T=r.n(M);const D=O.c.extend({name:"downloadVersionModal",template:T(),serializeData:function(){const e=this.model;return{defaultLinkTarget:"_self",mediaItems:C().map(this.model.get("Media"),(function(t,r){const n=C().clone(t);n.downloadUrl=e.getDownloadUrl(r);const i=e.getFilepath(r);return i&&(n.downloadName=u.c.getLastSegment(i)),n}))}},onClick:function(){}});var k=r(48528),x=r(95420),A=r(65723),R=r(15292),N=r(16740),L=r(53640),j=r(99080),U=r(31124),F=r(62144),V=r.n(F);const _=U.c.extend({template:V(),serializeData(){return this.model.get("preferences").toJSON()},flushChanges(){const e=this.ui.form.serializeArray(),t=this.model.get("preferences");e.forEach((e=>{const r=t.get(e.name),n=r.clone();n.parseAndSetValue(e.value),n.get("value")!==r.get("value")&&t.add(n,{merge:!0})}))}});var W=r(74436),B=r(77208),H=r.n(B);const z={playlist:["general","poster","art","advanced"]},G=W.c.extend({mixins:[R.c],name:"editPlaylistModal",className:"edit-metadata-modal modal modal-lg fade",template:H(),panes:{general:{constructor:j.c},advanced:{constructor:_},poster:{constructor:L.c,model:"multiMetadataModel"},art:{constructor:L.c,model:"multiMetadataModel"}},panesModel:"tempModel",events:C().extend({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onFormSubmit","submit .edit-metadata-form":"onFormSubmit"},W.c.prototype.events),ui:{saveBtn:".save-btn",message:".form-message",navPane:".modal-nav-pane",loadingIndicator:".modal-body-pane .loading-inline"},regions:{paneRegion:".pane-region"},onlyAfterRender:["saveChanges","showPane","showNav"],initialize:function(e){W.c.prototype.initialize.apply(this,arguments);const t=e.model;this.model=t,this.multiMetadataModel=new N.c({},{server:this.model.server,metadataItems:[t]});let r=t.fetch({usePopulatedParams:!0,data:{includePreferences:"1"}});r=r.done(C().bind((function(){this.tempModel=t.clone(),this.render(),this.showNav(),this.showPane(e.selectedPane||"general"),this.listenTo(f.c,"shortcut:save",this.saveChanges)}),this)),r.fail(C().bind((function(){this.ui.message.text((0,b.c)("There was an error editing this item")),this.ui.loadingIndicator.addClass("hidden")}),this))},serializeData:function(){let e=z[this.model.get("type")]||z.movie;e=e.filter((e=>{const t="art"===e,r="poster"===e,n=this.model.server.get("shortVersion"),{playlistArtEditing:i,playlistPosterEditing:s}=x.default;return!t&&!r||t&&n&&(0,A.c)(n,i)||r&&n&&(0,A.c)(n,s)})),this.model.has("preferences")||(e=C().difference(e,["advanced"]));const t=C().reduce(e,(function(e,t){return e[t]=!0,e}),{}),r=C().escape((0,b.c)("Edit {1}",this.model.get("title")));return{item:this.model.toJSON(),panes:t,selectedPane:this.selectedPane,paneTitle:r}},paneConstructorArg:function(){return{type:this.selectedPane}},showNav:function(){this.ui.navPane.removeClass("hidden")},saveChanges:function(){const e=this.ui.saveBtn,t=this.ui.message;if(e.isDisabled())return;t.text(""),this.paneRegion.currentView.flushChanges();const r=this.model.changedAttributes(this.tempModel.attributes);r&&(delete r.art,delete r.composite,delete r.thumb,delete r.updatedAt);const n=C().reduce(r,((e,t,r)=>(this.model.syncedAttrs[r]&&(e[r]=t),e)),{});e.addClass("active");const s=[];C().isEmpty(n)||s.push(this.model.save(n)),s.push(this.savePreferences()),["art","poster"].forEach((e=>{const t=this.multiMetadataModel.get(e);t&&s.push(a.c.execute("changeArtwork",{item:this.model,artworkType:e,artworkRatingKey:t}))}));const o=i().when.apply(i(),s);o.done(C().bind((function(){this.hide()}),this)),o.fail((function(){t.text((0,b.c)("Your changes could not be saved."))})),o.always((function(){e.removeClass("active")}))},savePreferences:function(){const e=this.tempModel.get("preferences");if(!e||!e.length)return i().Deferred().resolve().promise();const t=this.model,r=u.c.join(["/library/metadata",t.get("ratingKey"),"prefs"],e.getSaveParams()),n=this.model.server.getXHROptions(r,{type:"PUT"}),s=i().ajax(n);return s.done((function(){const r=t.get("preferences");e.forEach((function(e){r.get(e.id).set("value",e.get("value"))}))})),s},onPaneShow:function(e,t){this.listenTo(t,"focusSubmit",(function(){this.ui.saveBtn.focus()}))},onPaneHide:function(e,t){t.flushChanges(),this.stopListening(t)},onFormSubmit:function(e){e.preventDefault(),this.saveChanges()}});var q=r(44060),K=r(20720),Q=r.n(K);const $=q.c.ItemView.extend({id:"auto-match-dropdown",tagName:"span",className:"automatch-dropdown",template:Q(),collectionEvents:{reset:"render"},events:{"click .auto-match-agent":"onClick"},serializeData:function(){return{agents:this.collection.toJSON()}},onClick:function(e){e.preventDefault();const t=i()(e.currentTarget).data("id"),r=this.model.agents.get(t);a.c.execute("autoMatch",{item:this.model,agent:r})}});var Y=r(6996),X=r(61432),J=r(49048),Z=r(12612),ee=r(54292),te=r(12116),re=r(59344),ne=r.n(re),ie=r(89744),se=r.n(ie);const ae=new Set([Y.e4,Y.uC,Y.C0]);function oe(e){return C().map(e,(function(e){return'<option value="'+e.value+'"'+(e.selected?" selected":"")+">"+e.label+"</option>"})).join("\n")}function ce(e,t){return e.map((function(e){return{label:e.get("name"),value:e.get("identifier"),selected:t===e.get("identifier")}}))}function le(e,t){return e?e.get("languages").map((function(e){return{label:e.get("name"),value:e.id,selected:e.id===t}})):[]}const de=q.c.ItemView.extend({template(e){const{item:t,scannerIdentifier:r}=e;return t.type===Z.ec&&r===X.o1?ne()(e):se()(e)},ui:{agentSelect:"#match-search-agent",languageSelect:"#match-search-language"},events:{"change #match-search-agent":"onAgentSelectChange"},onlyAfterRender:["updateAgents","updateLanguages"],initialize:function(){const e=(0,J.c)(this.model).get("agent"),t=this.setupAgents(e);t.then(C().bind(this.updateAgents,this,e)),t.then(C().bind(this.updateLanguages,this,e))},serializeData:function(){const e=(0,J.c)(this.model),t=e.get("agent"),r=this.model.agentsProxy.findWhere({identifier:t});return{item:this.model.toJSON(),agents:ce(this.model.agentsProxy,t),scannerIdentifier:e.get("scanner"),languages:le(r)}},setupAgents:function(e){if(this.model.agentsPromise)return this.model.agentsPromise;const t=(0,J.c)(this.model),r=t.getSectionType(),n=new ee.c([],{server:this.model.server,mediaTypeID:r.typeID}),i=n.populate({reset:!0,cancelable:!0});return i.then((()=>{const i=function(e,t){if(!e)return[];const r=ae.has(t);return e.filter((e=>{const t=ae.has(e.get("identifier"));return r?t:!t}))}(n,t.get("agent"));this.model.agents=n.clone(i);const s=r.exclusiveAgents;this.model.agentsProxy=new te.c(this.model.agents,s,e)})),this.model.agentsPromise=i,this.model.agentsPromise},updateAgents:function(e){this.ui.agentSelect.html(oe(ce(this.model.agentsProxy,e)))},updateLanguages:function(e){const t=this.model.agentsProxy.findWhere({identifier:e});if(!e)return void this.ui.languageSelect.empty();const r=(0,J.c)(this.model).get("language");this.ui.languageSelect.html(oe(le(t,r)))},onAgentSelectChange:function(e){this.updateLanguages(e.currentTarget.value)},onModalClose:function(){this.model.agents=null,this.model.agentsProxy=null,this.model.agentsPromise=null}});var ue=r(18930),pe=r(40136),me=r(60296),he=r.n(me);const ye=q.c.ItemView.extend({template:he()}),ge={collectionEvents:{"update reset sort":"onTracksUpdate"},markDiscNumbers:function(){if(!this.collection.server.supports("premiumMusic"))return;const e=this.collection.reduce((function(e,t,r){const n=t.get("parentIndex");return n!==e.lastDiscNumber&&(e.markers[r]=n,e.lastDiscNumber=n,e.count+=1),e}),{markers:{},lastDiscNumber:null,count:0});return this.discMarkers=e.markers,e.count},onRender:function(){1!==this.markDiscNumbers()&&C().each(this.discMarkers,C().bind((function(e,t){this.$("li:eq("+t+") .disc-number").removeClass("hidden")}),this))},onTracksUpdate:function(){this.render()}};var fe=r(86184),ve=r.n(fe),be=Object.defineProperty,Se=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Oe=q.c.ItemView.extend({tagName:"li",template:ve(),className:"striped-list-item",serializeData(){const e=this.model.toJSON();return t=((e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&Ce(e,r,t[r]);if(Ie)for(var r of Ie(t))we.call(t,r)&&Ce(e,r,t[r]);return e})({},e),r={escapedParentIndex:C().escape(e.parentIndex)},Se(t,Pe(r));var t,r}}),Me=pe.c.extend({mixins:[ge],tagName:"ul",itemView:Oe,className:"list"}),Te=/\d{4}/,De=function({disambiguation:e="",lifespanBegin:t="",lifespanEnd:r="",area:n="",beginArea:i=""}){const s=t.match(Te),a=r.match(Te),o=[i,n,a?`${s}-${a}`:s].filter(Boolean);return e?[e,o.length?`(${o.join(", ")})`:null].filter(Boolean).join(" "):o.join(", ")};var ke=r(14348),xe=r.n(ke);const Ae=q.c.Layout.extend({tagName:"li",className:"striped-list-item match-result-list-item row",template:xe(),ui:{matchExtendedInfo:".match-extended-info"},regions:{childrenRegion:".children-region"},events:{"click .match-result":"onClick"},initialize:function(e){this.item=e.item},onRender:function(){!this.model.get("summary")||this.model.get("type")!==Z.MOVIE&&this.model.get("type")!==Z.M7||this.ui.matchExtendedInfo.removeClass("hidden");const e=this.model.get("children");if(!e)return;const t=e.first();t&&t.get("type")===Z.UJ&&(this.ui.matchExtendedInfo.removeClass("hidden"),this.childrenRegion.show(new Me({collection:e})))},onClick:function(e){e.preventDefault(),a.c.execute("match",{item:this.item,guid:this.model.id,name:this.model.get("name"),year:this.model.get("year"),children:this.model.get("children")})},serializeData(){const e=this.model.toJSON();return{year:e.year,parentName:e.parentName,name:e.name,disambiguationInfo:De(e),thumb:e.thumb,normalizedScore:e.normalizedScore,escapedNormalizedScore:C().escape(e.normalizedScore),summary:e.summary}}}),Re=pe.c.extend({tagName:"ul",className:"list match-result-list",itemView:Ae,emptyView:ye});var Ne=r(10624),Le=r.n(Ne);const je=q.c.Layout.extend({template:Le(),regions:{resultRegion:".result-region"},onlyAfterRender:["updateResults"],initialize:function(){this.setupResults();const e=(0,J.c)(this.model),t={manual:1},r={reset:!0,timeout:0,data:t};/com\.plexapp\.agents\.none:\/\//.test(this.model.get("guid"))&&C().extend(r,{data:C().extend(t,{agent:e.get("agent"),language:e.get("language")}),processData:!0}),this.model.results.populate(r).then(C().bind(this.updateResults,this))},setupResults:function(){if(this.model.results)return;const e=this.model.results||new ue.c([],{server:this.model.server,parent:this.model});this.model.results=e},updateResults:function(){this.resultRegion.show(new Re({collection:this.model.results,itemViewOptions:{item:this.model}}))},onModalClose:function(){this.model.results=null}});var Ue=r(99852),Fe=r.n(Ue);const Ve=W.c.extend({mixins:[R.c],name:"fixIncorrectMatch",className:"fix-incorrect-match-modal modal modal-lg fade",template:Fe(),panes:{form:{constructor:de},results:{constructor:je}},ui:{searchBtn:".search-btn"},regions:{paneRegion:".pane-region",autoMatchDropdownRegion:".auto-match-dropdown-region"},events:C().extend({"click .auto-match-agent":"hide","click .match-result":"hide","click .search-options-btn":"onSearchOptionsClick","click .cancel-btn":"onCancelClick","click .search-btn":"onSearchClick","submit #fix-incorrect-match-form":"onSearchSubmit"},W.c.prototype.events),onlyAfterRender:["showPane","updateSearchBtn","showAutoMatchPicker"],initialize:function(){W.c.prototype.initialize.apply(this,arguments),de.prototype.setupAgents.apply(this).then((()=>{this.showAutoMatchPicker()})),je.prototype.setupResults.apply(this),this.showPane("results")},serializeData:function(){return{location:this.model.getLocation(),showNavigation:!this.model.isPlexMusicItem()}},updateSearchBtn:function(e){this.ui.searchBtn.toggleClass("disabled","form"!==e)},showAutoMatchPicker:function(){this.autoMatchDropdownRegion.show(new $({model:this.model,collection:this.model.agentsProxy}))},fetchResults:function(e){const t=C().reduce(e.serializeArray(),(function(e,t){return e[t.name]=t.value,e}),{manual:1});this.model.results.fetch({reset:!0,data:t,processData:!0,timeout:0})},bindings:{".modal-title-text":{modelAttribute:"guid",formatter:function(e){return/com\.plexapp\.agents\.none:\/\//.test(e)?(0,b.c)("Match"):(0,b.c)("Fix Match")}}},onRender:function(){W.c.prototype.onRender.apply(this,arguments)},onPaneShow:function(e){this.updateSearchBtn(e)},onSearchOptionsClick:function(e){e.preventDefault(),this.showPane("form")},onCancelClick:function(e){e.preventDefault(),"results"!==this.selectedPane?this.showPane("results"):this.hide()},onSearchClick:function(e){e.preventDefault();const t=i()(e.currentTarget);if(t.isDisabled())return;const r=t.closest("form");this.fetchResults(r),this.showPane("results")},onSearchSubmit:function(e){e.preventDefault();const t=i()(e.currentTarget);t.find("search-btn").isDisabled()||(this.fetchResults(t),this.showPane("results"))}});var _e=r(59044),We=r(4828),Be=r(20188),He=r(96588),ze=r(71264);const Ge={h264:10,hevc:30},qe=function(e,t){if(null==e||Number.isNaN(e))return"";const r=parseInt(e,10),n=Ge[t||"h264"];return Number.isFinite(r)&&Number.isFinite(n)?(r/n).toFixed(1):String(e)};var Ke=r(4580),Qe=r(2636);const $e=function(e){let t="";for(let r=0,n=e.length;r<n;r++){const n=e.charAt(r),i=n.toUpperCase();t+=0===r?i:n===i?" "+i:n}return t};var Ye=r(12796),Xe=r.n(Ye);const Je=["id","key","index","videoCodec","audioCodec","audioChannels","default","selected","languageCode","accessible","exists","provider","lines","minLines","follow","requiredBandwidths","deepAnalysisVersion","deepAnalysisDate","Overlay"],Ze={size:He.c,duration:Be.c,codec:Ke.c,format:Ke.c,container:Ke.c,videoResolution:ze.c,bitrateMode:Ke.c,accessible:Qe.c,exists:Qe.c,optimizedForStreaming:Qe.c,timed:Qe.c,file:u.c.getLastSegment},et={optimizedForStreaming:"Web Optimized",has64bitOffsets:"Has 64bit Offsets",cabac:"CABAC",postURL:"URL",codecID:"Codec ID"},tt={frameRate:" fps",dialogNorm:" dB",bitrate:" kbps",samplingRate:" Hz"},rt=function(e,t){const r={properties:[]};for(const n in e){if(n===t||-1!==C().indexOf(Je,n))continue;let i=et[n],s=e[n];"level"===n&&(s=qe(s,e.codec)),Ze[n]&&(s=Ze[n](s)),s&&(tt[n]&&(s+=tt[n]),i||(i=$e(n)),r.properties.push({name:i,value:s}))}return t&&e&&(r[t]=e[t]),r};function nt(e){const t=C().reject(e,(function(e){return e.id===We.K})),r=C().sortBy(t,"streamType");return C().map(r,(function(e){return rt(e,"streamType")}))}function it(e){return C().map(e.get("Media"),(function(e){return C().extend(rt(e,"Part"),{Part:C().map(e.Part,(function(e){return C().extend(rt(e,"Stream"),{file:e.file,exists:!1!==e.exists,accessible:!1!==e.accessible,Stream:nt(e.Stream)})}))})}))}const st=W.c.extend({name:"mediaInfoModal",className:"media-info-modal modal modal-lg fade",template:Xe(),ui:{scroller:".modal-body-scroll",files:".files > ul",stickyProps:".media > .props, .part > .props"},events:C().extend({"click .delete-btn":"onDeleteClick"},W.c.prototype.events),modelEvents:{"change:Media":"onMediaChange"},initialize:function(e){W.c.prototype.initialize.apply(this,arguments),this.bindAllWhenRendered("onMediaChange","onScroll"),this.loading=!1,this.media=it(this.model),this.loading=!0,this.model.fetch({usePopulatedParams:!0,data:{checkFiles:1,asyncCheckFiles:0}}).always(this.whenRendered((function(){this.model.changed.hasOwnProperty("Media")||this.updateMedia()})))},serializeData:function(){let e=this.model.get("key");const t=s.WI("appModel").get("user"),r=this.model.server;return this.model.get("isLibraryItem")&&(e=u.c.join(e,{checkFiles:1,includeAllConcerts:1,includeBandwidths:1,includeChapters:1,includeChildren:1,includeConcerts:1,includeExtras:1,includeFields:1,includeGeolocation:1,includeLoudnessRamps:1,includeMarkers:1,includeOnDeck:1,includePopularLeaves:1,includePreferences:1,includeRelated:1,includeRelatedCount:1,includeReviews:1,includeStations:1})),{key:e,url:this.model.server.resolveUrl(e,{appendToken:!0}),media:this.media,hasFiles:this.hasFiles(),hasStreams:this.hasStreams()||this.loading,showDeleteFile:r.get("isFullOwnedServer")&&r.get("allowMediaDeletion")&&r.supports("specificMediaDeletion"),showFilepath:!r.get("shared")||t.isNinja(),loading:this.loading}},updateMedia:function(){this.loading=!1,this.rerender=!0,this.ui.scroller.off("scroll",this.onScroll),this.media=it(this.model),this.render()},hasFiles:function(){return!!C().chain(this.media).pluck("Part").flatten().pluck("file").compact().size().value()},hasStreams:function(){return!!C().chain(this.media).pluck("Part").flatten().pluck("Stream").flatten().size().value()},onRender:function(){W.c.prototype.onRender.apply(this,arguments),this.ui.scroller.on("scroll",this.onScroll),this.$el.tooltip({selector:".files .label",placement:"bottom"})},onClose:function(){this.ui.scroller.off("scroll",this.onScroll)},onMediaChange:function(){this.isHidden||(this.model.get("Media").length?this.updateMedia():this.hide())},onDeleteClick:function(e){e.preventDefault(),a.c.execute("deleteMediaItem",{item:this.model,index:i()(e.currentTarget).data("media-item")})},onScroll:function(){const e=this.ui.scroller.scrollTop();let t=this.ui.scroller.offset().top;this.ui.files.length&&(t+=parseInt(this.ui.files.css("margin-bottom"),10)),t<0?window.setTimeout(this.onScroll,500):this.ui.stickyProps.each((function(){const r=i()(this),n=r.parent().height()-r.height(),s=e-this.parentNode.offsetTop,a=Math.min(Math.max(s,0),n);a&&a===s?(r.addClass("sticky"),r.css("top",t)):(r.removeClass("sticky"),r.css("top",a))}))}});var at=r(97360),ot=Object.defineProperty,ct=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,mt=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&mt(e,r,t[r]);if(dt)for(var r of dt(t))pt.call(t,r)&&mt(e,r,t[r]);return e},yt=(e,t)=>ct(e,lt(t));const gt="metadata/redispatchLegacyMetadataAction",ft="metadata/analyzeMetadataItem",vt="metadata/deleteMetadataItem",bt="metadata/deleteMetadataItemVersion",St="metadata/downloadMetadataItemVersion",Pt="metadata/editMetadataItem",It="metadata/fixMetadataItemMatch",Et="metadata/getMetadataItemInfo",wt="metadata/updateMetadataItemPlayedStatus",Ct="metadata/optimizeMetadataItem",Ot="metadata/rateMetadataItem",Mt="metadata/refreshMetadataItem",Tt="metadata/splitMetadataItemApart",Dt="metadata/unmatchMetadataItem",kt="metadata/changeMetadataItemField",xt="metadata/updateMetadataItemRefreshingState",At="metadata/UPDATE_METADATA_SETTINGS",Rt="CLEAR_METADATA_SETTINGS_ERROR",Nt="metadata/updateDownloadAvailability",Lt="metadata/updateDownloadSubscriptionIDs",jt="metadata/modifySmartPlaylist",Ut=(0,o.c)(gt),Ft=(0,o.c)(ft),Vt=(0,o.c)(vt),_t=(0,o.c)(bt),Wt=(0,o.c)(St),Bt=(0,o.c)(Pt),Ht=(0,o.c)(It),zt=(0,o.c)(Et),Gt=((0,o.c)(wt),(0,o.c)(Ct)),qt=(0,o.c)(Ot),Kt=(0,o.c)(Mt),Qt=(0,o.c)(Tt),$t=(0,o.c)(Dt),Yt=((0,o.c)(kt),(0,o.c)(xt)),Xt=(0,o.c)(At),Jt=(0,o.c)(Rt),Zt=(0,o.c)(Ot,(e=>yt(ht({},e),{rating:v.ec}))),er=(0,o.c)(Ot,(e=>yt(ht({},e),{rating:v.KG}))),tr=(0,o.c)(wt,(e=>yt(ht({},e),{played:!1}))),rr=(0,o.c)(wt,(e=>yt(ht({},e),{played:!0}))),nr=((0,o.c)("metadata/setDownloadSubscriptionID"),(0,o.c)("metadata/unsetDownloadSubscriptionID"),(0,o.c)(Nt)),ir=((0,o.c)("metadata/updateDownloadAvailabilityFromDeletedTimeline"),(0,o.c)(Lt)),sr=(0,o.c)(jt);function ar(e,t,r,n={}){r&&(0,s.WI)("metrics").trackClick(ht({page:r,action:e,type:t.get("type")},n))}const or={[h.qH]:h.It[h.qH],[h.Ab]:h.It[h.Ab],[h.QL]:h.It[h.QL],[h.OW]:h.It[h.OW],[h.$v]:h.It[h.$v],[h._c]:h.It[h._c],[h.Og]:h.It[h.Og],[h.ID]:h.It[h.ID],[h.ey]:h.It[h.ey],[h.k9]:h.It[h.k9],[h.Yz]:h.It[h.Yz],[h.Cy]:h.It[h.Cy],[gt](e,t,r){const{serverModel:n,providerModel:i,itemServerModel:s,itemProviderModel:a,metadataItemModel:o}=(0,S.c)(e,t),c=t.legacyAction.type,l=t.legacyAction.payload,d=(null==l?void 0:l.metricsProperties)||{};r({type:c,payload:yt(ht({},l),{serverEntityID:n.entityID(),providerEntityID:i.entityID(),itemServerEntityID:s?s.entityID():null,itemProviderEntityID:a?a.entityID():null,metadataItemEntityID:o.entityID(),metricsPage:t.metricsPage,metricsProperties:ht(ht({},d),t.metricsProperties),skipClickMetrics:!0})})},[ft](e,t,r){const n=(0,P.oH)(e,t),i=t.metricsPage,s={allowMetrics:!!i,metricsProperties:{page:i}};(0,c.c)(n,s).fail((e=>{r((0,y._K)((0,b.c)("There was a problem analyzing this item.")))}))},[St](e,t){const r=(0,P.oH)(e,t),n=new D({model:r});f.c.trigger("show:modal",n)},[vt](e,t){const r=(0,P.oH)(e,t),n=t.options||{},i=r.get("isPlaylist")?"deletePlaylist":"deleteItems";a.c.execute(i,ht({item:r},n)),ar(g.G0,r,t.metricsPage)},[bt](e,t){const r=(0,P.oH)(e,t);a.c.execute("deleteVersions",{item:r}),ar(g.G0,r,t.metricsPage)},[Pt](e,t){const r=(0,P.oH)(e,t),n=r.get("isPlaylist")?new G({model:r}):new k.c({model:r});f.c.trigger("show:modal",n),ar(g.SU,r,t.metricsPage)},[It](e,t){const r=(0,P.oH)(e,t);r.server.get("sections").fetch().then((()=>{const e=new Ve({model:r});f.c.trigger("show:modal",e),ar(g.Qh,r,t.metricsPage)}))},[Et](e,t){const r=(0,P.oH)(e,t),n=new st({model:r});f.c.trigger("show:modal",n),ar(g.yO,r,t.metricsPage)},[wt](e,t,r){const n=(0,P.oH)(e,t);(0,m.c)(e,t).then((()=>{r((0,y.SK)({serverEntityID:t.serverEntityID}))}),(()=>{const e=t.played?(0,b.c)("There was an unexpected error marking an item played."):(0,b.c)("There was an unexpected error marking an item unplayed.");r((0,y._K)(e))})),ar(t.played?g.Mp:g.Yj,n,t.metricsPage)},[Ct](e,t){const r=(0,P.oH)(e,t),n=new at.c({item:r});f.c.trigger("show:modal",n),ar(g.Ge,r,t.metricsPage)},[Ot](e,t,r){const{rating:n,metricsPage:i}=t,s=(0,P.IB)(e,t),a=(0,P.oH)(e,t),o={rating:n,allowMetrics:!!i,metricsProperties:{page:i}};(0,l.c)(s,a,o).fail((e=>{r((0,y._K)((0,b.c)("There was a problem rating this item.")))}))},[Mt](e,t,r){const n=(0,P.oH)(e,t),i=t.metricsPage,s={allowMetrics:!!i,metricsProperties:{page:i}};(0,d.c)(n,s).fail((e=>{503===e.status?f.c.trigger("show:modal",new _e.c({model:n.server})):r((0,y._K)((0,b.c)("There was a problem refreshing this item.")))}))},[Tt](e,t,r){const n=(0,P.oH)(e,t);a.c.execute("splitApart",{item:n,skipNavigate:!0}).done((()=>{r((0,y.SK)({serverEntityID:t.serverEntityID}))})),ar(g.Ce,n,t.metricsPage)},[Dt](e,t){const r=(0,P.oH)(e,t);a.c.execute("unmatch",{item:r}),ar(g.wp,r,t.metricsPage)},[kt](e,t,r){const{providerEntityID:n,metadataItemEntityID:s,name:a,value:o,save:c}=t,l=(0,P.oH)(e,{metadataItemEntityID:s});if(!c)return void l.set({[a]:o});const d=(0,P.IB)(e,{providerEntityID:n}),p=u.c.join(l.get("key"),{[a]:o,[`${a}.locked`]:1}),m=d.getXHROptions(p,{type:"PUT"});i().ajax(m).fail((e=>{r((0,y._K)((0,b.c)("There was a problem editing this item.")))})),ar(g.SU,l,t.metricsPage)},[xt](e,t){const r=(0,P.wb)(e,t);r&&r.set({metadataState:t.metadataState,mediaState:t.mediaState})},[At](e,t,r){const n=(0,P.IB)(e,t),s=(0,P.oH)(e,t),{data:a}=t;(function(e,t,r){const n=t.get("key"),s=u.c.join([n,"prefs"],r),a=e.getXHROptions(s,{type:"PUT"});t.set({isSettingsUpdating:!0,settingsUpdateError:null});const o=i().ajax(a);return o.then((()=>{t.set("isSettingsUpdating",!1)}),(e=>{t.set({isSettingsUpdating:!1,settingsUpdateError:(0,p.c)(e)})})),o})(n,s,a).then((()=>{r((0,h.qG)({serverEntityID:t.serverEntityID,metadataItemEntityID:t.metadataItemEntityID}))}))},[Rt](e,t,r){(0,P.oH)(e,t).set("settingsUpdateError",null)},[Nt](){},[Lt](){},[jt](e,t){const r=(0,P.Ww)(e,t),n=(0,P.IB)(e,t),i=(0,P.oH)(e,t);i.fetch().done((()=>{const e=(0,I.c)(r.toJSON(),n.toJSON(),i.toJSON());(0,E.c)(...e)}))}}},29432:(e,t,r)=>{"use strict";r.d(t,{Ih:()=>_,M$:()=>H,Q5:()=>B,Wo:()=>$,Yj:()=>W,Yp:()=>z,eM:()=>Q,ee:()=>q,gt:()=>G,iK:()=>U,k1:()=>V,mC:()=>F,y4:()=>K});var n=r(52180),i=r(15568),s=r(55340),a=r(60352),o=r(52108),c=r(29296),l=r(12380),d=r(66780),u=r(84508),p=r(21248),m=r(58036),h=r(84852),y=r(45564),g=r(97360),f=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e};const C="metadata/metadataList/fetchMetadataList",O="metadata/metadataList/populateMetadataList",M="metadata/metadataList/populateMetadataListRange",T="metadata/metadataList/repopulateMetadataListRange",D="metadata/metadataList/optimizeMetadataList",k="metadata/metadataList/selectMetadataListItem",x="metadata/metadataList/deselectMetadataListItem",A="metadata/metadataList/selectMetadataListItems",R="metadata/metadataList/deselectMetadataListItems",N="metadata/metadataList/deselectAllMetadataListItems",L="metadata/metadataList/resetMetadataList",j="metadata/metadataList/redispatchLegacyMetadataListAction",U=(0,s.c)(C),F=(0,s.c)(O),V=(0,s.c)(M),_=(0,s.c)(T),W=(0,s.c)(D),B=(0,s.c)(k),H=(0,s.c)(x),z=(0,s.c)(A),G=(0,s.c)(R),q=(0,s.c)(N),K=(0,s.c)(L),Q=(0,s.c)(j),$={[C]:(0,a.c)({getModel:y.cF}),[O]:(0,o.c)({fetchActionCreator:U,getModel:y.cF}),[M]:(0,c.c)({getModel:y.cF}),[T]:(0,l.c)({getModel:y.cF}),[D](e,t){const r=(0,y.cF)(e,t),i=new g.c({item:r});p.c.trigger("show:modal",i),function(e,t,r={}){(0,n.WI)("metrics").trackClick(w({page:t,action:e,context:u.LIST},r))}(d.Ge,t.metricsPage,t.metricsProperties)},[k](e,t,r){const{id:n,type:i,isRangeSelect:s}=t,a=(0,y.cF)(e,t),o=(0,y.oH)(e,{metadataItemEntityID:n}),c=a.getCollection();o&&r((0,h.Ep)({type:i,model:o,collection:c,isRangeSelect:s}))},[x](e,t,r){const n=(0,y.oH)(e,{metadataItemEntityID:t.id});n&&r((0,h.eo)([n.id]))},[A](e,t,r){const{ids:n,type:i}=t,s=n.reduce(((t,r)=>{const n=(0,y.wb)(e,{metadataItemEntityID:r});return n&&t.push({id:n&&n.id,type:i,model:n}),t}),[]);r((0,h.Yr)(s))},[R](e,t,r){const n=t.ids.reduce(((t,r)=>{const n=(0,y.wb)(e,{metadataItemEntityID:r});return n&&t.push({id:n&&n.id}),t}),[]);r((0,h.eo)(n))},[N](e,t,r){const n=(0,y.cF)(e,t).getCollection();r((0,h.uH)(n))},[L](e,t){const r=(0,y.cF)(e,t),n=r.get("entityKey");r.abortPendingPopulate(),r.resetPopulatePromise(null),r.restoreDefaults({entityKey:n,meta:n?r.get("meta"):void 0,containerKey:r.get("containerKey"),containerTitle:r.get("containerTitle")})},[j](e,t,r){const n=(0,m.Ww)(e,{serverEntityID:t.server.entityID}),s=(0,m.IB)(e,{providerEntityID:t.provider.entityID}),a=new i.c({containerKey:t.containerKey,librarySectionID:t.containerKey.match(/\/library\/sections\/(\w+)/)[1]},{server:n,provider:s,includeCollections:!0,includeExternalMedia:!0}),o=t.legacyAction.type,c=t.legacyAction.payload,l=(null==c?void 0:c.metricsProperties)||{};var d,u;r({type:o,payload:(d=w({},c),u={serverEntityID:n.entityID(),providerEntityID:s.entityID(),metadataListEntityID:a.entityID(),metricsPage:t.metricsPage,metricsProperties:w(w({},l),t.metricsProperties),skipClickMetrics:!0},v(d,b(u)))})}}},84852:(e,t,r)=>{"use strict";r.d(t,{Ep:()=>Z,Fc:()=>ae,OG:()=>pe,Qp:()=>me,Qt:()=>oe,Ur:()=>J,Yr:()=>ee,_W:()=>de,ag:()=>ue,cD:()=>ce,cn:()=>fe,e4:()=>ge,eo:()=>re,i0:()=>ye,kF:()=>ve,kt:()=>he,pA:()=>te,q_:()=>le,uH:()=>ne,wb:()=>Ie,yM:()=>be});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(43876),c=r(55340),l=r(8295),d=r(55480),u=r(45732),p=r(64220),m=r(35688),h=r(59740),y=r(21248),g=r(79084),f=r(52972),v=r(58036),b=r(59396),S=r(6268),P=r(48528),I=r(97360),E=Object.defineProperty,w=Object.defineProperties,C=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&D(e,r,t[r]);if(O)for(var r of O(t))T.call(t,r)&&D(e,r,t[r]);return e},x=(e,t)=>w(e,C(t)),A=(e,t)=>{var r={};for(var n in e)M.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&O)for(var n of O(e))t.indexOf(n)<0&&T.call(e,n)&&(r[n]=e[n]);return r};const R="multiSelect/redispatchLegacyMuliselectAction",N="multiSelect/selectItem",L="multiSelect/selectModels",j="multiSelect/deselectAllItems",U="multiSelect/deselectModels",F="multiSelect/deselectCollection",V="multiSelect/selectRange",_="multiSelect/deselectRange",W="multiSelect/playSelectedItems",B="multiSelect/queueSelectedItems",H="multiSelect/favoriteSelectedItems",z="multiSelect/unfavoriteSelectedItems",G="multiSelect/updateSelectedItemsPlayedStatus",q="multiSelect/editSelectedItems",K="multiSelect/refreshSelectedItems",Q="multiSelect/analyzeSelectedItems",$="multiSelect/optimizeMetadataItems",Y="multiSelect/mergeSelectedItems",X="multiSelect/deleteSelectedItems",J=(0,c.c)(R),Z=(0,c.c)(N),ee=(0,c.c)(L),te=(0,c.c)(j),re=(0,c.c)(U),ne=(0,c.c)(F),ie=(0,c.c)(V),se=(0,c.c)(_),ae=(0,c.c)(W),oe=(0,c.c)(H),ce=(0,c.c)(z),le=((0,c.c)(G),(0,c.c)(q)),de=(0,c.c)(K),ue=(0,c.c)(Q),pe=(0,c.c)($),me=(0,c.c)(Y),he=(0,c.c)(X),ye=(0,c.c)(W,(e=>{var t=e,{options:r={}}=t,n=A(t,["options"]);return x(k({},n),{options:x(k({},r),{shuffle:!0})})})),ge=(0,c.c)(G,(e=>x(k({},e),{played:!0}))),fe=(0,c.c)(G,(e=>x(k({},e),{played:!1}))),ve=(0,c.c)(B,(e=>{var t=e,{options:r={}}=t,n=A(t,["options"]);return x(k({},n),{options:x(k({},r),{next:!1})})})),be=(0,c.c)(B,(e=>{var t=e,{options:r={}}=t,n=A(t,["options"]);return x(k({},n),{options:x(k({},r),{next:!0})})}));function Se(e){return e.get("ui").get("multiSelect").get("activeSelectionItems").map((e=>e.get("model").entityID()))}function Pe(e){return e.map((e=>e.entityID()))}const Ie={[R](e,t,r){const n=t.items.map((t=>{const{metadataItemModel:r}=(0,S.c)(e,t);return r})),i=t.legacyAction.type,s=t.legacyAction.payload;r({type:i,payload:x(k({},s),{items:n})})},[N](e,t,r){const{type:n,model:i,collection:s,isRangeSelect:a=!1}=t,o=e.get("ui").get("multiSelect"),c=o.get("activeSelectionType"),l=o.get("activeSelectionRange");if(c&&c!==n)return;if(o.listenToCollection(s),!a||!l||l.collection!==s)return o.set("activeSelectionRange",{collection:s,startModel:i}),void r(ee([{id:i.id,type:n,model:i}]));const d=l.startModel,u=l.endModel,p=s.indexOf(d),m=s.indexOf(i);if(u){const e=s.indexOf(u);r(se({collection:s,range:{start:p,end:e}}))}o.set("activeSelectionRange",{collection:s,startModel:d,endModel:i}),r(ie({type:n,collection:s,range:{start:p,end:m}}))},[L](e,t){e.get("ui").get("multiSelect").get("activeSelectionItems").add(t)},[j](e){e.get("ui").get("multiSelect").get("activeSelectionItems").reset()},[U](e,t){e.get("ui").get("multiSelect").get("activeSelectionItems").remove(t)},[F](e,t,r){const n=e.get("ui").get("multiSelect"),i=n.get("activeSelectionItems"),s=[];n.stopListening(t),t.each((e=>{i.get(e.id)&&s.push(e.id)})),s.length&&r(re(s))},[V](e,t,r){const{type:n,collection:i,range:s}=t,a=e.get("ui").get("multiSelect").get("activeSelectionItems"),o=[];f.c.each(s,(e=>{const t=i.at(e);t&&!a.get(t.id)&&o.push({id:t.id,type:n,model:t})})),o.length&&r(ee(o))},[_](e,t,r){const{collection:n,range:i}=t,s=e.get("ui").get("multiSelect").get("activeSelectionItems"),a=[];f.c.each(i,(e=>{const t=n.at(e);t&&s.get(t.id)&&a.push(t.id)})),a.length&&r(re(a))},[W](e,t,r){const n=t.items?Pe(t.items):Se(e);r((0,m.wb)(x(k({},t),{metadataItemEntityIDs:n})))},[B](e,t,r){const n=t.items?Pe(t.items):Se(e);r((0,m.gV)(x(k({},t),{metadataItemEntityIDs:n})))},[H](e,t,r){const n=(0,v.IB)(e,t),s=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("model");let a=i().Deferred().resolve().promise();s.forEach((e=>{a=a.then((()=>(0,d.c)(n,e,{rating:g.ec})))})),a.fail((()=>{r((0,h._K)((0,b.c)("There was an unexpected error favoriting an item.")))}))},[z](e,t,r){const n=(0,v.IB)(e,t),s=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("model");let a=i().Deferred().resolve().promise();s.forEach((e=>{a=a.then((()=>(0,d.c)(n,e,{rating:g.KG})))})),a.fail((()=>{r((0,h._K)((0,b.c)("There was an unexpected error unfavoriting an item.")))}))},[G](e,t,r){const n=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("model");let s=i().Deferred().resolve().promise();n.forEach((r=>{s=s.then((()=>(0,p.c)(e,x(k({},t),{metadataItemEntityID:r.entityID()}))))})),s.fail((()=>{const e=t.played?(0,b.c)("There was an unexpected error marking an item played."):(0,b.c)("There was an unexpected error marking an item unplayed.");r((0,h._K)(e))})),s.always((()=>{const e={};n.forEach((t=>{const n=t.server.entityID();e[n]||(e[n]=!0,r((0,h.SK)({serverEntityID:n})))}))}))},[q](e,t){var r;const n=e.get("ui").get("multiSelect"),i=null!=(r=t.items)?r:n.get("activeSelectionItems").pluck("model"),s=new P.c({items:i});y.c.trigger("show:modal",s)},[K](e,t,r){var n;const s=e.get("ui").get("multiSelect"),a=null!=(n=t.items)?n:s.get("activeSelectionItems").pluck("model");let o=i().Deferred().resolve().promise();a.forEach((e=>{o=o.then((()=>(0,u.c)(e)))})),o.fail((()=>{r((0,h._K)((0,b.c)("There was an unexpected error refreshing an item.")))}))},[Q](e,t,r){var n;const s=e.get("ui").get("multiSelect"),a=null!=(n=t.items)?n:s.get("activeSelectionItems").pluck("model");let o=i().Deferred().resolve().promise();a.forEach((e=>{o=o.then((()=>(0,l.c)(e)))})),o.fail((()=>{r((0,h._K)((0,b.c)("There was an unexpected error analyzing an item.")))}))},[$](e,t){var r;const n=e.get("ui").get("multiSelect"),i=null!=(r=t.items)?r:n.get("activeSelectionItems").pluck("model"),s=new I.c({item:a().first(i),items:i});y.c.trigger("show:modal",s)},[Y](e,t){var r;const n=e.get("ui").get("multiSelect"),i=null!=(r=t.items)?r:n.get("activeSelectionItems").pluck("model"),[s,...a]=i;o.c.execute("merge",{item:s,items:a})},[X](e,t,r){var n;const i=e.get("ui").get("multiSelect"),s=null!=(n=t.items)?n:i.get("activeSelectionItems").pluck("model"),a=t.options||{};o.c.execute("deleteItems",x(k({},a),{items:s,skipConfirmation:!0}))}}},58388:(e,t,r)=>{"use strict";r.d(t,{UB:()=>p,gh:()=>u,wR:()=>m});var n=r(37588),i=r.n(n),s=r(55340),a=r(60352),o=r(15208),c=r(75560);const l="oauth/fetchOauthProviders",d="oauth/unlinkOauthProvider",u=(0,s.c)(l),p=(0,s.c)(d),m={[l]:(0,a.c)({key:"oauthProviders",getModel:e=>e.get("cloudServer").get("desktop")}),[d](e,t,r){const n=e.get("cloudServer"),s=n.get("desktop").get("oauthProviders").findWhere(t);s.set("isUnlinking",!0);const a=n.populate().then((()=>i().ajax(n.getXHROptions(t.url,{type:"DELETE"}))));(0,o.c)(a,1e3).done((()=>{s.set("unlinkError",null)})).fail((e=>{s.set("unlinkError",e)})).always((()=>{r((0,c.W0)()),r(u()),s.set("isUnlinking",!1)}))}}},28436:(e,t,r)=>{"use strict";r.d(t,{Cm:()=>z,Cu:()=>X,Ef:()=>K,Gg:()=>Q,Gq:()=>G,Qb:()=>$,iI:()=>q,qW:()=>re,u4:()=>Y});var n=r(37588),i=r.n(n),s=r(52180),a=r(55340),o=r(45771),c=r(54268),l=r(59740),d=r(6996),u=r(43908),p=r(66780),m=r(84508),h=r(56960),y=r(90044),g=r(61432),f=r(21248),v=r(66308),b=r(46207),S=r(58036),P=r(59396),I=r(1904),E=r(12612),w=r(96504),C=r(48588),O=r(36296),M=r(81764),T=r(8344),D=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&L(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&L(e,r,t[r]);return e},U=(e,t)=>k(e,x(t));const F="provider/scanLibraryFiles",V="provider/editLibrary",_="provider/analyzeLibrary",W="provider/emptyLibraryTrash",B="provider/deleteLibrary",H="provider/upgradeLibrary",z=(0,a.c)(F),G=(0,a.c)(V),q=(0,a.c)(W),K=(0,a.c)(_),Q=(0,a.c)(B),$=(0,a.c)(H),Y=(0,a.c)(F,(e=>U(j({},e),{force:!0}))),X=(0,a.c)(F,(e=>U(j({},e),{cancel:!0})));function J(e){const t=e.get("key");return e.get("id")||t.substr(t.lastIndexOf("/")+1)}function Z(e,t){const r=(0,S.IB)(e,t).get("features").get(y.c.CONTENT),n={};return t.contentDirectory.key&&(n.key=t.contentDirectory.key),t.contentDirectory.hubKey&&(n.hubKey=t.contentDirectory.hubKey),r.get("directories").findWhere(n)}function ee(e,t){const r=e.get("features").get(y.c.CONTENT).get("key");let n;return n=r?w.c.join([r,t.get("id")]):t.get("key"),n}function te(e,t){e(c.vH({serverEntityID:t})),e(c.EH({serverEntityID:t})),e((0,l.SK)({serverEntityID:t}))}const re={[o.O4]:o.qW[o.O4],[o._c]:o.qW[o._c],[o._A]:o.qW[o._A],[o.IH]:o.qW[o.IH],[F](e,t,r){const{cancel:n,force:i,metricsPage:s}=t,a=(0,S.Ww)(e,t),o=Z(e,t),d={libraryID:J(o),libraryType:o.get("type"),cancel:n,force:i,allowMetrics:!!s,metricsProperties:{page:s}};o.set("refreshing",!n),(0,C.c)(a,d).fail((e=>{let t;t=n?(0,P.c)("There was an unexpected error canceling the scan."):i?503===e.status?(0,P.c)("An internet connection is required to refresh library metadata. Please check this server's connection and try again."):(0,P.c)("There was an unexpected error refreshing library metadata."):503===e.status?(0,P.c)("An internet connection is required to scan library files. Please check this server's connection and try again."):(0,P.c)("There was an unexpected error scanning library files."),r((0,l._K)(t))})).always((e=>{r(c.KN({serverEntityID:t.serverEntityID}))}))},[V](e,t){const r=(0,S.Ww)(e,t),n=r.get("desktop").get("libraries"),i=Z(e,t);n.fetch().then((()=>{const e=J(i),a=n.get(e);f.c.trigger("show:modal",new T.c({server:r,model:a})),(0,s.WI)("metrics").trackClick({page:t.metricsPage,action:p.kt,type:a.get("type"),context:m.LIBRARY})}))},[W](e,t,r){const n=(0,S.Ww)(e,t),a=(0,S.IB)(e,t),o=Z(e,t),c=ee(a,o),d=w.c.join([c,"emptyTrash"]),h=n.getXHROptions(d,{type:"PUT"});i().ajax(h).done((()=>{r((0,l._K)({type:u.I,message:(0,P.c)("The trash was emptied.")}))})).fail((e=>{r((0,l._K)((0,P.c)("There was a problem emptying the trash.")))})),(0,s.WI)("metrics").trackClick({page:t.metricsPage,action:p.kf,type:o.get("type"),context:m.LIBRARY})},[_](e,t,r){const n=(0,S.Ww)(e,t),a=(0,S.IB)(e,t),o=Z(e,t),c=ee(a,o),d=w.c.join([c,"analyze"]),u=n.getXHROptions(d,{type:"PUT"});i().ajax(u).fail((e=>{r((0,l._K)((0,P.c)("There was a problem analyzing the library.")))})),(0,s.WI)("metrics").trackClick({page:t.metricsPage,action:p.Qf,type:o.get("type"),context:m.LIBRARY})},[B](e,t,r){const n=(0,S.Ww)(e,t),a=(0,S.IB)(e,t),o=Z(e,t),c=ee(a,o),d=w.c.join(c,{async:1}),u=n.getXHROptions(d,{type:"DELETE"});a.get("features").get(y.c.CONTENT).get("directories").remove(o),i().ajax(u).done((()=>{const e=(0,I.c)(a.toJSON(),o.toJSON()),t=(0,b.c)(e.key,n.get("machineIdentifier"),a.get("identifier"),o.get("id"));r((0,M.eg)({sources:[{key:t}]}))})).fail((()=>{te(r,t.serverEntityID),r((0,l._K)((0,P.c)("There was a problem deleting the library.")))})),(0,s.WI)("metrics").trackClick({page:t.metricsPage,action:p.A3,type:o.get("type"),context:m.LIBRARY})},[H](e,t,r){const n=(0,S.Ww)(e,t),s=(0,S.IB)(e,t),a=Z(e,t),o=J(a),c=a.get("type");let u;u=c===E.MOVIE?{agent:d.e4,scanner:g.gh}:c===E.iI?{agent:d.uC,scanner:g.o1}:{agent:d.C0,scanner:g._e};const p=ee(s,a),m=w.c.join(p,u),y=n.getXHROptions(m,{type:"PUT"}),f=i().ajax(y).then((()=>{te(r,t.serverEntityID)}),(()=>{r((0,l._K)((0,P.c)("There was a problem upgrading the library.")))}));t.options.refreshMetadata&&f.then((()=>{r(O.ui({serverEntityID:t.serverEntityID,libraryID:o,libraryType:c,cancel:!1,force:!0,metricsPage:h.c5}))}))},[c.uI](e,t,r){t.activity.type===v.Ep&&te(r,t.serverEntityID)}}},85008:(e,t,r)=>{"use strict";r.d(t,{g3:()=>T,UN:()=>R,mK:()=>x,Yw:()=>D,Qe:()=>k});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(13778),l=r(55340),d=r(36772),u=r(31881),p=r(84508),m=r(95188),h=r(21248),y=r(58036),g=r(59396),f=r(59501),v=r(33040);var b=r(30137),S=r(96504);const P=function(e,t,r,n){const s=e.get("user"),a=e.get("cloudServer");return s.get("anonymous")?i().Deferred().reject().promise():i().ajax(a.getXHROptions("/api/claim/token",{headers:{"X-Plex-Token":r}})).promise().then((e=>v.c.parseXML(e).token)).then((e=>i().ajax(t.getXHROptions(S.c.join("/myplex/claim",{token:e}),{type:"POST"})))).then((()=>function(e,t){const r=e.get("cloudServer").get("resources"),n={clientIdentifier:t.get("machineIdentifier")};return function(e,t={}){let r=Math.floor(Math.max(t.times||0,0));const n=Math.floor(Math.max(t.delay||0,0));t.cancel&&t.cancel.always((()=>{r=-1}));const s=i().Deferred();let a;return t.maxDuration&&(a=window.setTimeout((()=>{s.reject("maxDuration")}),t.maxDuration)),function t(){r<0||e().done((function(){a&&window.clearTimeout(a),s.resolve(...arguments)})).fail((function(){r-=1,r<0?(a&&window.clearTimeout(a),s.reject(...arguments)):"pending"===s.state()&&window.setTimeout(t,n)}))}(),s.promise()}((()=>r.fetch().then((()=>r.findWhere(n)?i().Deferred().resolve().promise():i().Deferred().reject().promise()))),{times:30,delay:1e3})}(e,t))).then((()=>{let e;return(0,b.c)(t)&&(e=t.getXHROptions("/media/providers")),t.fetch(e)})).then((()=>function(e,t,r){const n=i().Deferred();return e.get("primaryServer")===t?n.resolve():(e.once("change:primaryServer",n.resolve),r()),function(e,t){const r=i().Deferred(),n=window.setTimeout((()=>{r.reject()}),t);return e.then(r.resolve,r.reject).always((()=>{window.clearTimeout(n)})),r.promise()}(n.promise(),2e3)}(e,t,n))).then((()=>{const e=s.get("email"),r=t.get("desktop").get("cloudAccount");t.set({myPlexSigninState:f.C1,myPlexUsername:e}),r.set({signedIn:!0,username:e})}))};var I=r(82852);var E=r(69012);const w="server/claim/claimServer",C="server/claim/signInThenClaimServer",O="server/claim/signOutServer",M="server/claim/createPIN",T=(0,l.c)(w),D=(0,l.c)(C),k=(0,l.c)(O),x=(0,l.c)(M);function A(e,t,r){const{authToken:n}=t,i=(0,y.Ww)(e,t),s=(0,I.c)(e);s.set({errorMessage:null,isBusy:!0});const a=(0,o.WI)("metrics");return P(e,i,n,(()=>{r((0,c.WG)({machineIdentifier:i.id,metricsProperties:{context:p.SETTINGS}}))})).done((()=>{a.trackEvent({event:m.yy,interaction:!0})})).fail((()=>{a.trackEvent({event:m.WQ,interaction:!1}),s.set({errorMessage:(0,g.c)("There was a problem claiming this server."),isBusy:!1})}))}const R={[w](e,t,r){A(e,t,r).then((()=>{(0,I.c)(e).set({errorMessage:null,isBusy:!1})}))},[C](e,t,r){(function(e,t){const r=e.get("user"),{authToken:n}=t;return i().ajax(r.server.getXHROptions(a().result(r,"url"),{headers:{"X-Plex-Token":n}})).then((e=>r.signIn(e,{})))})(e,t).then((()=>A(e,t,r))).then((()=>{(0,I.c)(e).set({errorMessage:null,isBusy:!1})})).fail((t=>{const r=(0,d.c)(t);h.c.trigger("show:alert",{message:(0,u.c)(r)}),(0,I.c)(e).set({errorMessage:(0,g.c)("There was a problem claiming this server."),isBusy:!1})}))},[O](e,t,r){const n=(0,y.Ww)(e,t).get("desktop").get("cloudAccount"),i=(0,I.c)(e);var s;i.set({errorMessage:null,isBusy:!0}),(s=n,s.destroy({timeout:0}).promise().done((()=>{s.server.set({accessToken:void 0,myPlexSigninState:f.Yj,myPlexSubscription:!1}),s.restoreDefaults()}))).done((()=>{i.set({errorMessage:null,isBusy:!1})})).fail((()=>{i.set({errorMessage:(0,g.c)("There was a problem signing the server out."),isBusy:!1})}))},[M](e,t,r){const n=(0,E.c)(e),i=(0,I.c)(e);n.then((e=>{i.set({pinID:e.id,code:e.code,isBusy:!0})})),n.fail((()=>{i.set({fatalErrorMessage:(0,g.c)("An error occurred"),isBusy:!1})}))}}},36296:(e,t,r)=>{"use strict";r.d(t,{MN:()=>Pe,s3:()=>Ee,yK:()=>ke,I9:()=>Ce,od:()=>Me,U7:()=>Te,G8:()=>Oe,P:()=>we,C4:()=>De,GQ:()=>ve,CV:()=>ge,Wq:()=>Se,am:()=>Re,ui:()=>Ie,Gu:()=>be});var n=r(37588),i=r.n(n),s=r(52180),a=r(59501),o=r(55340),c=r(60352),l=r(52108),d=r(54268),u=r(59740),p=r(72528),m=r(43908),h=r(66780),y=r(84508),g=r(80896),f=r(1676),v=r(21248),b=r(66308),S=r(38828),P=r(99112),I=r(82660),E=r(32364);var w=r(89448),C=r(59396),O=r(96504),M=r(54844),T=r(74648),D=r(75560),k=r(6268),x=r(48588),A=r(81764),R=r(45564),N=r(95720),L=r.n(N),j=r(10540),U=r(18465),F=r(69468),V=r(45228),_=r.n(V);const W=U.c.extend({className:"alert-bar notify",template:_(),events:L().extend({"click .setup-link":"onSetupClick"},U.c.prototype.events),serializeData(){return{model:this.model.get("model"),make:this.model.get("make"),dvrSettingsRoute:(0,F.c)(this.options.machineIdentifier,"manage","dvr")}},disableDevice(){const e=(0,s.WI)("appStore"),t=this.options.serverEntityID;t&&e.dispatch((0,j.Su)({serverEntityID:t,deviceID:this.model.id,enabled:!1}))},onSetupClick(){this.hide(),this.disableDevice()},onCloseClick(e){U.c.prototype.onCloseClick.apply(this,arguments),this.disableDevice()}});var B=r(8344),H=r(46724),z=r(81140),G=r.n(z);const q=H.c.extend({template:G(),events:L().extend({"click .learn-more":"onLearnMoreClick"},H.c.prototype.events),onRender:function(){H.c.prototype.onRender.apply(this,arguments),(0,s.WI)("metrics").trackView({page:"relayNotification",mode:"modal",action:h.Ke},{interaction:!1})},onHide(){H.c.prototype.onHide.apply(this,arguments),(0,s.WI)("metrics").trackClick({page:"relayNotification",mode:"modal",action:h.Ke})},onLearnMoreClick(){(0,s.WI)("metrics").trackClick({page:"relayNotification",mode:"modal",action:h.WG})},serializeData(){return{serverName:this.options.serverName,escapedServerName:L().escape(this.options.serverName)}}});var K=Object.defineProperty,Q=Object.defineProperties,$=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&Z(e,r,t[r]);if(Y)for(var r of Y(t))J.call(t,r)&&Z(e,r,t[r]);return e},te=(e,t)=>Q(e,$(t));const re="server/redispatchLegacyServerAction",ne="server/fetchSettings",ie="server/populateSettings",se="server/updateSetting",ae="server/saveSetting",oe="server/addLibrary",ce="server/startLibrariesRefresh",le="server/allowHttpFallback",de="server/optimizeDatabase",ue="server/cleanBundles",pe="server/emptyTrash",me="server/deleteServer",he="server/discoverMediaGrabberDevice",ye="server/populateHasiTunes",ge=(0,o.c)(re),fe=(0,o.c)(ne),ve=(0,o.c)(ie),be=(0,o.c)(se),Se=(0,o.c)(ae),Pe=(0,o.c)(oe),Ie=(0,o.c)(ce),Ee=(0,o.c)(le),we=(0,o.c)(de),Ce=(0,o.c)(ue),Oe=(0,o.c)(pe),Me=(0,o.c)(me),Te=(0,o.c)(he),De=(0,o.c)(ye),ke=(0,o.c)(ce,(e=>te(ee({},e),{cancel:!0})));function xe(e,t){(0,s.WI)("metrics").trackClick({page:t,action:e,context:y.SERVER})}function Ae(e,t){const r=(0,R.Ww)(e,t),n=(0,R.CA)(e,t).get("settings").get(t.setting.id);if(n){const e=n.parse(t.setting);n.set("value",e.value),"FriendlyName"===e.id&&e.value?r.set("friendlyName",e.value):"allowMediaDeletion"===e.id&&r.set("allowMediaDeletion",e.value)}}const Re={[d.a4]:d.am[d.a4],[d.ak]:d.am[d.ak],[d.O_]:d.am[d.O_],[d.cQ]:d.am[d.cQ],[d.uI]:d.am[d.uI],[d.Q$]:d.am[d.Q$],[d.M3]:d.am[d.M3],[d.Ax]:d.am[d.Ax],[d.Oc]:d.am[d.Oc],[d.Mp]:d.am[d.Mp],[d.wn]:d.am[d.wn],[d.AR]:d.am[d.AR],[d.mI]:d.am[d.mI],[re](e,t,r){const{serverModel:n,providerModel:i}=(0,k.c)(e,t),s=t.legacyAction.type,a=t.legacyAction.payload;r({type:s,payload:te(ee({},a),{serverEntityID:n.entityID(),providerEntityID:i.entityID()})})},[ne]:(0,c.c)({key:"settings",getModel:R.CA}),[ie]:(0,l.c)({key:"settings",fetchActionCreator:fe,getModel:R.CA}),[se](e,t){Ae(e,t)},[ae](e,t){const r=(0,R.CA)(e,t).get("settings").get(t.setting.id);(0,w.SS)((()=>r.set({isSaving:!0}))),Ae(e,t),r.save().then((()=>r.set({isSaving:!1})),(()=>r.set({isSaving:!1})))},[d.e6](e,{machineIdentifier:t,serverName:r},n){const i=e.get("user").get("experienceSettings").get("reminders"),s=(0,M.c)(g.c.Relay,t),a=i.get(s);if(a&&!(0,f.c)(a.get("remindAfter")))return;const o=new q({serverName:r});v.c.trigger("show:modal",o),n((0,A.Kc)({id:s}))},[d.gl](e,t){const r=(0,R.Ww)(e,t),n=e.get("user").get("experienceSettings").get("allowHttpFallback");!function(e,t,r,n){if(function(e,t){if(!e.get("isFullServer"))return!1;if(E.c.isHostedHttps&&!P.c.allowMixedContent)return!1;const r=t===I.c.ALWAYS,n=t===I.c.SAME_NETWORK;return!!(r||n&&e.get("publicAddressMatches"))}(e,n)){const n=e.addConnection({scheme:"http",address:t,port:r,isFallback:!0});(0,S.c)("[Connections] Added insecure fallback connection for %s at %s",e.get("debugName"),n.id)}else S.c.warn("[Connections] Prevented fallback to insecure connection for",e.get("debugName"))}(r,t.address,t.port,n)},[oe](e,t){const r=(0,R.Ww)(e,t),{options:n={}}=t,i=new B.c(ee({server:r,redirect:!1!==t.redirect},n));v.c.trigger("show:modal",i),xe(h.cP,t.metricsPage)},[ce](e,t,r){const{libraryID:n="all",libraryType:i,cancel:s,force:a,metricsPage:o}=t,c=(0,R.Ww)(e,t),l={libraryID:n,libraryType:i,cancel:s,force:a,allowMetrics:!!o,metricsProperties:{page:o}};t.cancel&&(0,R.CA)(e,t).get("libraries").each((e=>e.set("refreshing",!1))),(0,x.c)(c,l).fail((()=>{const e=t.cancel?(0,C.c)("There was a problem canceling the update."):(0,C.c)("There was a problem updating libraries.");r((0,u._K)(e))})).always((()=>{r((0,d.EH)({serverEntityID:t.serverEntityID}))}))},[le](e,t,r){r((0,p.SI)({allowHttpFallback:t.allowHttpFallback})),r((0,d.KN)({serverEntityID:t.serverEntityID}))},[de](e,t,r){const n=(0,R.Ww)(e,t),s=(0,R.CA)(e,t),a=n.supports("optimizeDatabaseActivity"),o=O.c.join("/library/optimize",a?{async:1}:{}),c=n.getXHROptions(o,{type:"PUT"});r((0,d.SO)({serverEntityID:t.serverEntityID,activityType:b.kV})),s.set({optimizeDatabaseError:null}),i().ajax(c).done((()=>{a||r((0,d.k3)({serverEntityID:t.serverEntityID,activityType:b.kV}))})).fail((()=>{s.set({optimizeDatabaseError:(0,C.c)("There was a problem optimizing the database.")}),r((0,d.k3)({serverEntityID:t.serverEntityID,activityType:b.kV})),t.hideAlerts||r((0,u._K)((0,C.c)("There was a problem optimizing the database.")))})),xe(h.kV,t.metricsPage)},[ue](e,t,r){const n=(0,R.Ww)(e,t),s=(0,R.CA)(e,t),a=O.c.join("/library/clean/bundles",{async:1}),o=n.getXHROptions(a,{type:"PUT"});r((0,d.SO)({serverEntityID:t.serverEntityID,activityType:b.kX})),s.set({cleanBundlesError:null}),i().ajax(o).fail((()=>{s.set({cleanBundlesError:(0,C.c)("There was a problem removing unused bundles.")}),r((0,d.k3)({serverEntityID:t.serverEntityID,activityType:b.kX})),t.hideAlerts||r((0,u._K)((0,C.c)("There was a problem removing unused bundles.")))})),xe(h.kX,t.metricsPage)},[pe](e,t,r){const n=(0,R.Ww)(e,t),s=(0,R.CA)(e,t).get("libraries");(t.libraryID?i().Deferred().resolve([t.libraryID]).promise():s.populate().then((()=>s.map((({id:e})=>e))))).then((e=>{const t=e.map((e=>i().ajax(n.getXHROptions(`/library/sections/${e}/emptyTrash`,{type:"PUT"}))));return i().when(...t)})).then((()=>{r((0,u._K)({type:m.I,message:(0,C.c)("The trash was emptied.")}))}),(e=>{r((0,u._K)((0,C.c)("There was a problem emptying the trash.")))})),xe(h.kf,t.metricsPage)},[me](e,t,r){const n=(0,R.Ww)(e,t),s=e.get("cloudServer");if(!n)return;if(s.get("isResolved")){const e=s.getXHROptions(`/api/servers/${n.id}`,{type:"DELETE"});i().ajax(e)}const o=s.get("resources").get(n.id);o&&o.trigger("destroy",o,o.collection),n.get("isFullOwnedServer")&&n.get("isConnected")?n.get("desktop").get("cloudAccount").destroy().done((()=>{n.set({myPlexSigninState:a.Yj,myPlexSubscription:!1})})).always((()=>{r((0,d.KN)({serverEntityID:t.serverEntityID})),n.populate().fail((function(){n.trigger("destroy",n,n.collection),r((0,D.C8)({route:"home"}))}))})):(n.trigger("destroy",n,n.collection),r((0,D.C8)({route:"home"}))),xe(h.Y1,t.metricsPage)},[he](e,t){const r=(0,R.Ww)(e,t),n=e.get("ui").get("dvrSettingsUI"),i=t.device;if(n.get("isUIPopulated"))return;const s=new W({model:new T.cp(i,{parse:!0}),serverEntityID:t.serverEntityID,machineIdentifier:r.get("machineIdentifier")});v.c.trigger("show:bar","alertbar",s)},[ye](e,t){const r=(0,R.Ww)(e,t),n=(0,R.CA)(e,t);if(!n.get("isHasiTunesPopulated")){const e=O.c.join("/music/iTunes"),t=r.getXHROptions(e);i().ajax(t).done((()=>{n.set({hasiTunes:!0,isHasiTunesPopulated:!0})})).fail((()=>{n.set({hasiTunes:!1,isHasiTunesPopulated:!0})}))}}}},28016:(e,t,r)=>{"use strict";r.d(t,{Ap:()=>x,Iz:()=>R,MR:()=>L,Oe:()=>k,cN:()=>N,us:()=>A});var n=r(37588),i=r.n(n),s=r(13778),a=r(55340),o=r(57639),c=r(21248),l=r(58036),d=r(59396),u=r(96504),p=r(46724),m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e};const P="serverUpdate/fetchServerUpdateStatus",I="serverUpdate/checkForServerUpdate",E="serverUpdate/dismissServerUpdate",w="serverUpdate/downloadServerUpdate",C="serverUpdate/installServerUpdate";function O(e,t){const{download:r,initialState:n,isChecking:s=!0}=t,a={download:r?"1":"0"},c=u.c.join("/updater/check",a),l=e.getXHROptions(c,{type:"PUT"}),d=e.get("desktop").get("update"),p={isChecking:s};null!=n&&(p.state=n),d.set(p),i().ajax(l).then(null,(()=>{d.set({isChecking:!1,state:o.ERROR})}))}function M(e,t){const r=u.c.join(["/updater/apply"],t),n=e.getXHROptions(r,{type:"PUT"});return i().ajax(n)}function T(e){const t=e.get("desktop").get("update");M(e).then((()=>{t.set("state",o.INSTALLING),e.set("isInstallingServerUpdate",!0)}),(()=>{t.set("state",o.ERROR),e.set("isInstallingServerUpdate",!1)}))}function D(e,t,r,n){const i=e.get("deviceSettings").get("dismissedServerUpdateVersions");var a,o;t((0,s.wB)({dismissedServerUpdateVersions:(a=S({},i),o={[r.get("machineIdentifier")]:n},h(a,y(o)))}))}const k=(0,a.c)(P),x=(0,a.c)(I),A=(0,a.c)(E),R=(0,a.c)(w),N=(0,a.c)(C),L={[P](e,t){const r=(0,l.Ww)(e,t),n=(0,l.CA)(e,t).get("update");r.get("isFullOwnedServer")&&r.get("updater")&&!r.get("isOutOfDate")&&!n.get("isChecking")&&(n.set({isChecking:!0}),n.fetch().then((()=>{const e=n.get("state"),t=e===o.DONE||e===o.ERROR||e===o.NONE;O(r,{isChecking:t})}),(()=>{n.set({isChecking:!1})})))},[I](e,t){const{download:r,initialState:n}=t;O((0,l.Ww)(e,t),{download:r,initialState:n})},[E](e,t,r){const n=(0,l.Ww)(e,t);(0,l.CA)(e,t).get("update").get("canInstall")?M(n,{skip:1}).then((()=>{r(k(t))}),(()=>{D(e,r,n,t.version)})):D(e,r,n,t.version)},[w](e,t){O((0,l.Ww)(e,t),{download:!0,initialState:o.DOWNLOADING})},[C](e,t){const r=(0,l.Ww)(e,t);if(r.get("activeConnection").get("isLoopback"))T(r);else{const e=new p.c({title:(0,d.c)("Remote Installation"),confirmLabel:(0,d.c)("Continue"),cancelLabel:(0,d.c)("Cancel"),message:(0,d.c)("The installer may display dialogs that require input. Make sure you have desktop access to the computer running Plex Media Server before continuing.")});c.c.trigger("show:modal",e),e.promise.then((()=>T(r)))}}}},74003:(e,t,r)=>{"use strict";r.d(t,{G:()=>F,HW:()=>z,I2:()=>H,O2:()=>B,ai:()=>K,wF:()=>G,wH:()=>te,wK:()=>V,yy:()=>_});var n=r(95720),i=r.n(n),s=r(52180),a=r(76220),o=r(89118),c=r(55340),l=r(54356),d=r(35688),u=r(17472),p=r(64824),m=r(65724),h=r(4008),y=r(87800),g=r(38828),f=r(87644),v=r(26312),b=r(45564),S=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&O(e,r,t[r]);return e},T=(e,t)=>P(e,I(t));const D="syncplaySessionActions/joinSession",k="syncplaySessionActions/leaveSession",x="syncplaySessionActions/setSessionError",A="syncplaySessionActions/toggleSessionLobby",R="syncplaySessionActions/syncUser",N="syncplaySessionActions/syncLobby",L="syncplaySessionActions/syncPlaystate",j="syncplaySessionActions/addNotification",U="syncplaySessionActions/removeNotification",F=(0,c.c)(D),V=(0,c.c)(k),_=(0,c.c)(x),W=((0,c.c)(A),(0,c.c)(A,(e=>T(M({},e),{shouldShow:!0})))),B=(0,c.c)(A,(e=>T(M({},e),{shouldHide:!0}))),H=(0,c.c)(R),z=(0,c.c)(N),G=(0,c.c)(L),q=(0,c.c)(j),K=(0,c.c)(U),Q=h.k9,$="WATCH_TOGETHER";function Y(e){return J(e).get("rooms")}function X(e){return J(e).get("session")}function J(e){return e.get("ui").get("watchTogether")}function Z(e){return(null==e?void 0:e.deviceIdentifier)===a.c.prop("X-Plex-Client-Identifier")}function ee(e){const t=(0,f.OG)(e,Q);return t.get("syncplaySessionRoomID")&&!!(0,l.c)(t)}const te={[D](e,t,r){const n=(0,b.wz)(e,t),i=n.get("id");J(e).set("session",new o.c({metadataItem:n.get("metadataItem"),roomID:i})),r((0,v.sN)()),(0,s.WI)("syncplaySessionManager").join({roomID:i,roomSourceUri:n.get("sourceUri"),roomSyncplayHost:n.get("syncplayHost"),roomSyncplayPort:n.get("syncplayPort")})},[k](e,t,r){const n=X(e);if(n){const t=J(e);(0,g.c)("[Watch Together] Leaving session for room:",n.get("roomID")),(0,s.WI)("syncplaySessionManager").leave(),t.unset("session"),t.unset("sessionError")}},[x](e,t,r){const n=(0,f.OG)(e,Q),{sessionError:i}=t;n.get("syncplaySessionRoomID")?n.set({hasError:!0,errorMessage:i}):J(e).set({sessionError:i})},[A](e,t,r){const n=(0,f.OG)(e,Q),i={initiator:$,playerType:Q},{shouldHide:a,shouldShow:o}=t;let c;if(o&&(n.set({isWatchTogetherLobbyVisible:!0,isWatchTogetherParticipantsVisible:!1}),n.get("isPaused")||(c=(0,u.U$)(i))),a){const e=null!==n.get("adState");e&&(0,s.WI)("syncplaySessionManager").update({isAdPlaying:e,adDisplayIndex:n.get("adDisplayIndex"),adDisplayTotal:n.get("adDisplayTotal")}),n.get("isPaused")&&(c=(0,u.Eb)(i)),n.set({isWatchTogetherLobbyVisible:!1})}(o||a)&&(0,g.c)("[Watch Together] Session lobby is visible?",n.get("isWatchTogetherLobbyVisible")),c&&ee(e)&&((0,g.c)("[Watch Together] Dispatching after lobby visibility:",c),r(c))},[R](e,t,r){var n,i,s,a;const{event:o}=t;if(!o.user)return;const{ad:c,isPresent:l,isReady:d,positionSeconds:u,isPaused:p,user:m}=o,{deviceIdentifier:h,deviceName:f,id:b}=m,S=X(e),P=S.get("users"),I=[],E={},w=P.get(h)||P.add({deviceIdentifier:h,deviceName:f,id:b});if(!w.get("title")){const t=null==(n=Y(e).get(S.get("roomID")))?void 0:n.get("users"),r=null==t?void 0:t.get(b);r?(E.title=r.get("title"),E.thumb=r.get("thumb")):J(e).get("isRoomsPending")||(g.c.debug(`[Watch Together] Syncplay user is unknown ${m.id} (${m.deviceName})`),I.push((0,v.sN)()))}void 0!==l&&l!==w.get("isPresent")&&(E.isPresent=l,I.push(q({type:l?y.Qb:y.Ir,user:m}))),!1===l&&w.get("isAdPlaying")?(E.adDisplayIndex=null,E.adDisplayTotal=null,E.isAdPlaying=!1):void 0!==c&&(E.adDisplayIndex=null!=(i=null==c?void 0:c.displayIndex)?i:null,E.adDisplayTotal=null!=(s=null==c?void 0:c.displayTotal)?s:null,E.isAdPlaying=null!=(a=null==c?void 0:c.isPlaying)&&a),void 0!==d&&(E.isReady=d),void 0!==p&&(E.isWatching=!p),void 0!==u&&(E.positionSeconds=u),g.c.debug(`[Watch Together] Updating user ${m.id} (${m.deviceName}):`,E),w.set(E),I.forEach((e=>{g.c.debug("[Watch Together](%s) Dispatching:",R,e),r(e)}))},[L](e,t,r){const{roomID:n,event:i}=t,s=X(e);if(Z(i.user))return;const a={user:i.user},o=function(e,t){const r=(0,f.OG)(e,Q),{event:n}=t,{isPaused:i,positionSeconds:s,user:a}=n,o=null!=s,c=X(e).get("users").get(null==a?void 0:a.deviceIdentifier),l={nextPlaybackSpeed:r.get("playbackSpeed"),shouldChangePlaybackSpeed:!1,shouldPause:!1,shouldResume:!1,shouldSeek:!1,shouldStartPlayback:!1};if(!r.get("syncplaySessionRoomID")&&o)return l.shouldStartPlayback=!0,l;if(null!=r.get("adState")||(null==c?void 0:c.get("isAdPlaying")))return l;if(!ee(e))return l;if(l.shouldPause=!0===i&&!r.get("isPaused"),l.shouldResume=!1===i&&r.get("isPaused"),l.shouldSeek=n.shouldSeek,o&&(l.nextPlaybackSpeed=1,!l.shouldSeek)){const e=r.get("positionSeconds")-s;g.c.debug("[Watch Together] Local position diff:",`${e}s`),l.shouldSeek=e>=4||e<=-1.75,!l.shouldSeek&&e>1.5&&(l.nextPlaybackSpeed=.95)}return l.shouldChangePlaybackSpeed=l.nextPlaybackSpeed!==r.get("playbackSpeed"),l}(e,t),c=[];if(o.shouldStartPlayback){const e=s.get("metadataItem"),t=Math.round(1e3*i.positionSeconds);(0,g.c)(`[Watch Together] Start playback at ${t}s`),c.push((0,d.wb)({serverEntityID:e.get("serverEntityID"),providerEntityID:e.get("providerEntityID"),syncplaySessionRoomID:n,playerType:Q,isPaused:!0,isWatchTogetherLobbyVisible:!0,openState:m.m,startOffsetMilliseconds:t,options:{metadataItemKey:e.get("key"),type:p.im}}))}o.shouldChangePlaybackSpeed&&c.push((0,u.SM)({playerType:Q,playbackSpeed:o.nextPlaybackSpeed})),o.shouldSeek&&(c.push((0,u.KK)({initiator:$,playerType:Q,positionSeconds:Math.round(i.positionSeconds)})),i.shouldSeek&&c.push(q(T(M({},a),{type:y.GU})))),o.shouldPause&&c.push((0,u.U$)({initiator:$,playerType:Q}),q(T(M({},a),{type:y.qc}))),o.shouldResume&&c.push((0,u.Eb)({initiator:$,playerType:Q}),q(T(M({},a),{type:y.gT}))),c.forEach((e=>{g.c.debug("[Watch Together](%s) Dispatching:",L,e),r(e)}))},[N](e,t,r){const n=function(e,t){const{event:r}=t,{user:n,isPaused:i}=r,s=(0,f.OG)(e,Q),a=X(e),o=Y(e).get(a.get("roomID")),c=a.get("users"),l=c.get(null==n?void 0:n.deviceIdentifier),d={shouldHide:!1,shouldShow:!1};if(!l)return d;const u=!o||o.get("users").every((e=>c.findWhere({id:e.get("id")}))),p=c.length>0&&c.every((e=>e.get("isReady"))),m=!!c.find((e=>Z(e)&&e.get("isReady"))),h=!Z(n)&&(null==l?void 0:l.get("isAdPlaying")),y=!!s.get("adState"),g=s.get("isWatchTogetherLobbyVisible");return h&&!y?d.shouldShow=!0:h&&y||u&&p?d.shouldHide=!0:y||h||!1!==i||!m||(d.shouldHide=!0),d.shouldHide=g&&d.shouldHide,d.shouldShow=!g&&d.shouldShow,d}(e,t);n.shouldHide&&r(B(t)),n.shouldShow&&r(W(t))},[j](e,t,r){const n=(0,f.OG)(e,Q),s=X(e),{type:a,user:o}=t;if(Z(o))return void g.c.debug("[Watch Together] Ignoring notification from local user:",t);if(n.get("isWatchTogetherLobbyVisible"))return void g.c.debug("[Watch Together] Ignoring notification while lobby visible:",t);const c={timestamp:Date.now(),type:a,uid:i().uniqueId(),userID:o.id};(0,g.c)(`[Watch Together] Notification "${a}" from:`,o);const l=s.get("notifications").concat(c).slice(-5);s.set({notifications:l})},[U](e,t,r){const n=X(e),i=n.get("notifications").filter((e=>e.uid!==t.uid));n.set({notifications:i})},[d.K](e,t,r){const n=(0,f.OG)(e,Q);if(n.get("syncplaySessionRoomID")&&!n.get("isWatchTogetherLobbyVisible")){const{adState:e,adDisplayIndex:n,adDisplayTotal:i}=t;(0,s.WI)("syncplaySessionManager").update({isAdPlaying:null!=e,adDisplayIndex:n,adDisplayTotal:i}),null==e&&r(W())}},[d.YX](e,t,r){r(V())},[d.cI](e,t,r){r(V())},[u.GU](e,t){(0,f.OG)(e,Q).get("syncplaySessionRoomID")&&t.initiator!==$&&(0,s.WI)("syncplaySessionManager").update({hasPendingSeek:!0})},[u.G](e,t){const r=(0,f.OG)(e,Q);r.get("syncplaySessionRoomID")&&t.initiator!==$&&!r.get("adState")&&(0,s.WI)("syncplaySessionManager").update({hasPendingPlayPause:!0})}};Object.assign(te,{[u.u4]:te[u.GU],[u.Iz]:te[u.GU],[u.oF]:te[u.GU],[u.UZ]:te[u.GU]})},7960:(e,t,r)=>{"use strict";r.d(t,{SZ:()=>c,gx:()=>d,uM:()=>o});var n=r(55340),i=r(45944);const s="ui/accountSettingsPage/updateUserProfile",a="ui/accountSettingsPage/clearUpdateUserProfileError",o=(0,n.c)(s),c=(0,n.c)(a);function l(e){return e.get("ui").get("accountSettingsPage")}const d={[s](e,t){const r=function(e){return e.get("user").get("profile")}(e),n=l(e);n.set({isUpdatingUserProfile:!0,updateUserProfileError:null}),r.save(t,{type:"PUT",wait:!0}).done((()=>{r.set(t),n.set({isUpdatingUserProfile:!1,updateUserProfileError:null})})).fail((e=>{n.set({isUpdatingUserProfile:!1,updateUserProfileError:(0,i.M)(e)})}))},[a]:e=>{l(e).set("updateUserProfileError",null)}}},14824:(e,t,r)=>{"use strict";r.d(t,{Ou:()=>u,ac:()=>o,is:()=>c,qE:()=>l});var n=r(55340),i=r(76800),s=r(58036),a=r(59212);const o=(0,n.c)(a.oO),c=(0,n.c)(a.k3),l=(0,n.c)(a.UT);function d(e){return e.get("ui").get("background")}const u=(0,i.c)({[a.oO](e,t={}){const{imageUrl:r,allowBlur:n=!0}=t;d(e).set({server:(0,s.Ww)(e,t),provider:(0,s.IB)(e,t),imageUrl:r,allowBlur:n,isBackgroundPending:!1})},[a.k3](e,t){const{theme:r}=t,n=d(e),i=(0,s.Ww)(e,t),a=i&&r?i.resolveUrl(r,{appendHeaders:!0}):void 0;n.set("themeMusicUrl",a)},[a.UT](e,t){d(e).restoreDefaults({isBackgroundPending:t.isBackgroundPending})}})},44100:(e,t,r)=>{"use strict";r.d(t,{Ax:()=>v,KA:()=>f,MN:()=>S,Yb:()=>g,cX:()=>E,tq:()=>b});var n=r(37588),i=r.n(n),s=r(55340),a=r(76800),o=r(60352),c=r(96504),l=r(21683),d=r(45564);const u="ui/dvrSettings/initDVRSettingsUI",p="ui/dvrSettings/clearDVRSettingsUI",m="ui/dvrSettings/fetchDVRs",h="ui/dvrSettings/reloadGuide",y="ui/dvrSettings/cancelReloadGuide",g=(0,s.c)(u),f=(0,s.c)(p),v=(0,s.c)(m),b=(0,s.c)(h),S=(0,s.c)(y);function P(e){return e.get("ui").get("dvrSettingsUI")}function I(e,t,r){const n=(0,d.Ww)(e,t),s=c.c.join(["/livetv/dvrs",t.dvrID,"reloadGuide"]),a=n.getXHROptions(s,{method:r});i().ajax(a)}const E=(0,a.c)({[m]:(0,o.c)({key:"dvrs",getModel:P}),[u](e,t,r){const n=P(e),i=n.get("dvr"),s=(0,d.Ww)(e,t),a=s.get("machineIdentifier"),o={isUIPopulated:!0};i&&i.server.get("machineIdentifier")===a||(o.dvrs=new l.c([],{server:s})),n.set(o),(s.hasOwnerFeature("dvr")||s.hasOwnerFeature("livetv"))&&r(v(t))},[p](e){P(e).set("isUIPopulated",!1)},[h](e,t,r){I(e,t,"POST")},[y](e,t,r){I(e,t,"DELETE")}})},10540:(e,t,r)=>{"use strict";r.d(t,{Av:()=>f,Gg:()=>g,M3:()=>b,Su:()=>P,i4:()=>C,iw:()=>S,wB:()=>v});var n=r(37588),i=r.n(n),s=r(55340),a=r(76800),o=r(96504),c=r(84676),l=r(45564);const d="SAVE_DVR_SETTINGS",u="CLEAR_DVR_SETTINGS_SAVE_ERROR",p="SAVE_DEVICE_SETTINGS",m="SAVE_DEVICE_TITLE",h="CLEAR_DEVICE_SETTINGS_SAVE_ERROR",y="SET_DVR_DEVICE_ENABLED",g=(0,s.c)(d),f=(0,s.c)(u),v=(0,s.c)(p),b=(0,s.c)(m),S=(0,s.c)(h),P=(0,s.c)(y);function I(e){return e.get("ui").get("dvrSettingsUI").get("dvrSetup")}function E(e,t){const r=function(e){return e.get("ui").get("dvrSettingsUI").get("dvrs")}(e);return r.get(t.dvrID)}function w(e,t){const r=I(e),n=t.deviceID;if(t.dvrID&&n){const r=E(e,t).get("devices").get(n);if(r)return r}if(n){const e=r.get("devices").get(n);if(e)return e}return r.get("selectedDevice")}const C=(0,a.c)({[d](e,t){const r=(0,l.Ww)(e,t),n=E(e,t),s=t.prefs,a=o.c.join(["/livetv/dvrs",t.dvrID,"prefs"],s);n.set("isSaving",!0);const d=r.getXHROptions(a,{type:"PUT"}),u=i().ajax(d);u.done((()=>{const e=n.get("prefs");Object.keys(s).forEach((t=>{e.get(t).set("value",s[t])})),n.set({isSaving:!1,saveError:null})})),u.fail((e=>{n.set({isSaving:!1,saveError:(0,c.c)(e)})}))},[u](e,t){E(e,t).set("saveError",null)},[p](e,t){const r=(0,l.Ww)(e,t),n=w(e,t),s=t.prefs,a=o.c.join(["/media/grabbers/devices",t.deviceID,"prefs"],s);n.set("isSaving",!0);const d=r.getXHROptions(a,{type:"PUT"}),u=i().ajax(d);u.done((()=>{const e=n.get("prefs");Object.keys(s).forEach((t=>{e.get(t).set("value",s[t])})),n.set({isSaving:!1,saveError:null})})),u.fail((e=>{n.set({isSaving:!1,saveError:(0,c.c)(e)})}))},[m](e,t){const{title:r}=t,n=(0,l.Ww)(e,t),s=w(e,t),a=o.c.join(["/media/grabbers/devices",t.deviceID],{title:r,enabled:1}),c=n.getXHROptions(a,{type:"PUT"});i().ajax(c).then((()=>{s.set("title",r)}))},[h](e,t){w(e,t).set("saveError",null)},[y](e,t){const r=(0,l.Ww)(e,t),n=t.enabled,s=o.c.join(["/media/grabbers/devices",t.deviceID],{enabled:n?1:0}),a=r.getXHROptions(s,{type:"PUT"});i().ajax(a).promise().done((()=>{if(I(e)){const r=w(e,t);r&&r.set("status",n?"enabled":"disabled")}}))}})},58756:(e,t,r)=>{"use strict";r.d(t,{EH:()=>l,KY:()=>o,WO:()=>c,_Q:()=>a,ox:()=>s});var n=r(55340),i=r(76800);const s=(0,n.c)("ui/modal/syncDownloadModalChangeTemplateMode"),a=(0,n.c)("ui/modal/syncDownloadModalClose"),o=(0,n.c)("ui/modal/syncDownloadModalOpen"),c=(0,n.c)("ui/modal/syncDownloadModalSaveSubscription"),l=(0,i.c)({})},42716:(e,t,r)=>{"use strict";r.d(t,{Ki:()=>O,iM:()=>R,uM:()=>k,uo:()=>D});var n=r(37588),i=r.n(n),s=r(55340),a=r(60352),o=r(45771),c=r(96504),l=r(84676),d=r(78328),u=r(81764),p=r(42412),m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e};const P="ui/onlineMediaSourcePage/initOnlineMediaSourcesPage",I="ui/onlineMediaSourcePage/fetchAvailableProviders",E="ui/onlineMediaSourcePage/fetchOptOutStatuses",w="ui/onlineMediaSourcePage/updateOptOutStatuses",C="ui/onlineMediaSourcePage/clearOnlineMediaSourcesUpdateError",O=(0,s.c)(P),M=(0,s.c)(I),T=(0,s.c)(E),D=(0,s.c)(w),k=(0,s.c)(C);function x(e){return e.get("ui").get("onlineMediaSourcesPage")}function A(e,t={},r={}){const n=e.get("cloudServer"),i=e.get("user").get("uuid"),s=c.c.join(["/api/v2/user",i,"settings/opt_outs"],t);return n.getXHROptions(s,S({dataType:"json"},r))}const R={[P](e,t,r){const n=x(e),i=e.get("cloudServer");n.restoreDefaults({availableProviders:new d.c([],{server:i})}),r(M()),r(T())},[I]:(0,a.c)({key:"availableProviders",getModel:x}),[E](e,t){const r=x(e);r.set({isOptOutStatusesPending:!0,optOutStatusesError:null});const n=A(e);i().ajax(n).then((e=>{r.set({optOutStatuses:e,isOptOutStatusesPending:!1,optOutStatusesError:null})}),(e=>{r.set({isOptOutStatusesPending:!1,optOutStatusesError:(0,l.c)(e)})}))},[w](e,t,r){const n=x(e);n.set({isUpdatePending:!0,updateError:null});const s=Object.keys(t.optOutStatuses)[0],a=t.optOutStatuses[s],c=A(e,{key:s,value:a},{type:"POST"});i().ajax(c).then((()=>{const e=n.get("optOutStatuses");var t,i;n.set({optOutStatuses:(t=S({},e),i={[s]:a},h(t,y(i))),isUpdatePending:!1,updateError:null}),r((0,o.u4)()),r((0,u.k9)()),r(p.c.actions.fetchOptOuts())}),(e=>{n.set({isUpdatePending:!1,updateError:(0,l.c)(e)})}))},[C](e,t){x(e).set("updateError",null)}}},18720:(e,t,r)=>{"use strict";r.d(t,{YT:()=>S,sh:()=>b});var n=r(13778),i=r(55340),s=r(88880),a=r(66816),o=r(35860),c=r(58036),l=r(87644),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e};const v="ui/player/playQueue/toggleAutoPlay",b=(0,i.c)(v),S={[a.Qv]:a.YT[a.Qv],[a.cZ]:a.YT[a.cZ],[a.OE]:a.YT[a.OE],[a.yG]:a.YT[a.yG],[a.Wm]:a.YT[a.Wm],[a.ov]:a.YT[a.ov],[a.cv]:a.YT[a.cv],[a.Er]:a.YT[a.Er],[a.Wi]:a.YT[a.Wi],[a.yw]:a.YT[a.yw],[a.X]:a.YT[a.X],[a._S]:a.YT[a._S],[a.gf]:a.YT[a.gf],[a.aQ]:a.YT[a.aQ],[a.qi]:a.YT[a.qi],[a.a_]:a.YT[a.a_],[a.wN]:a.YT[a.wN],[a.Yv](e,{playerType:t},r){const i=e.get("user").id,s=(0,l.OG)(e,t),a=s.get("playQueue"),d=e.get("deviceSettings"),m=s.get("providerEntityID"),h=(0,c.IB)(e,{providerEntityID:m}),y={providerEntityID:m,serverEntityID:s.get("serverEntityID"),playQueueOffset:s.get("positionSeconds"),playQueueType:a.get("type"),playQueueRepeat:a.get("repeat"),playQueueID:a.get("playQueueID")};if(o._u(h.get("identifier"),[o.Sg]))return;if(s.get("isWatchTogether"))return;const g=d.get("restorePlayQueue");var v,b;r((0,n.wB)({restorePlayQueue:(v=f({},g),b={[i]:y},u(v,p(b)))}))},[a.MJ](e,t,r){const i=e.get("user").id,s=e.get("deviceSettings").get("restorePlayQueue"),a=f({},s);delete a[i],r((0,n.wB)({restorePlayQueue:a}))},[v](e,{playerType:t},r){const n=e.get("user").get("experienceSettings").get("autoPlay"),i=(0,l.OG)(e,t);(0,s.c)(e).changeAutoPlay(i,!n,r)}}},31900:(e,t,r)=>{"use strict";r.d(t,{wf:()=>w,aq:()=>O,Ar:()=>M,CM:()=>C});var n=r(52180),i=r(11364),s=r(16872),a=r(66109),o=r(23228);const c={amp:"&",apos:"'","#x27":"'","#x2F":"/","#39":"'","#47":"/",lt:"<",gt:">",nbsp:" ",quot:'"'};function l(e){let t=e;return Object.keys(c).forEach((e=>{t=t.replace(new RegExp((0,o.c)(`&${e};`),"g"),c[e])})),t}var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f=i.c.extend({sessionAttrs:{protocol:s.c.string.isRequired,protocolCapabilities:s.c.array.isRequired},syncedAttrs:{friendlyName:s.c.string.isRequired,capabilities:s.c.array,volume:s.c.integer.isRequired},defaults:{protocol:a.y,protocolCapabilities:["timeline","playback","mirror","playqueues","provider-playback"],volume:100},augmentResponse(e){return t=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e})({},e),r={friendlyName:l(e.friendlyName)},u(t,p(r));var t,r}});var v=r(55340),b=r(78292),S=r(59396);const P="ui/player/remoteCastPlayer/changeCastApiAvailability",I="ui/player/remoteCastPlayer/requestCastSession",E="ui/player/remoteCastPlayer/changeRemoteCastPlayer",w=(0,v.c)(P),C=(0,v.c)(I),O=(0,v.c)(E),M={[P](e,t){e.set({castApiAvailability:t})},[I](e){(0,n.WI)("remoteCastPlayerManager").requestSession()},[E](e,t){const r=e.get("ui"),n=r.get("audioVideoPlayer"),i=r.get("photoPlayer");if(n.get("isOpen")){const e=n.get("isWatchTogether")?{hasError:!0,errorMessage:(0,S.c)("Watch Together is not currently supported when connected to a remote player.")}:{confirmLocalToRemote:b.SB,isPaused:!0};n.set(e)}i.get("isOpen")&&i.set({confirmLocalToRemote:b.SB,isPaused:!0}),e.set("remotePlayer",new f(t,{parse:!0}))}}},69524:(e,t,r)=>{"use strict";r.d(t,{pD:()=>De,Uk:()=>ye,u6:()=>Ie,AB:()=>ke,YT:()=>xe,Up:()=>Te,mc:()=>Ce,uw:()=>Oe,WQ:()=>we,a4:()=>Ne,sA:()=>Me,GI:()=>Ee,sN:()=>Pe,oF:()=>ve,I6:()=>ge,tf:()=>fe,gH:()=>be,cR:()=>Se});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(64964),l=r(46748),d=r(55340),u=r(12384),p=r(96504),m=Object.defineProperty,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var v=r(88880),b=r(15568),S=r(82088),P=r(61360);var I=r(64139),E=r(47456),w=r(66816),C=r(35688),O=r(23408),M=r(66109),T=r(78292),D=r(64824),k=r(65724),x=r(4008),A=r(4828),R=r(35860),N=r(89064),L=r(38828),j=r(39835),U=r(30496),F=r(80096),V=r(58036),_=r(87644),W=r(89448),B=r(59396),H=r(40604),z=r(12612),G=r(76636),q=r(45564),K=Object.defineProperty,Q=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const J="ui/player/remotePlayer/changeRemotePlayer",Z="ui/player/remotePlayer/syncRemotePlayerCurrentItem",ee="ui/player/remotePlayer/syncRemotePlayerState",te="ui/player/remotePlayer/syncRemotePlayQueueState",re="ui/player/remotePlayer/syncRemoteQuality",ne="ui/player/remotePlayer/syncRemoteStreams",ie="ui/player/remotePlayer/syncRemoteExperienceSettings",se="ui/player/remotePlayer/changeRemotePlayerVolume",ae="ui/player/remotePlayer/showRemotePlayerError",oe="ui/player/remotePlayer/mirrorDetails",ce="ui/player/remotePlayer/discoverRemotePlayers",le="ui/player/remotePlayer/idleRemotePlayer",de="ui/player/remotePlayer/removeRemotePlayer",ue="ui/player/remotePlayer/confirmRemoteToLocal",pe="ui/player/remotePlyaer/cancelLocalToRemote",me="ui/player/remotePlayer/closeLocalToRemote",he="ui/player/remotePlayer/confirmLocalToRemote",ye=(0,d.c)(J),ge=(0,d.c)(Z),fe=(0,d.c)(ee),ve=(0,d.c)(te),be=(0,d.c)(re),Se=(0,d.c)(ne),Pe=(0,d.c)(ie),Ie=(0,d.c)(se),Ee=(0,d.c)(ae),we=(0,d.c)(oe),Ce=(0,d.c)(ce),Oe=(0,d.c)(le),Me=(0,d.c)(de),Te=(0,d.c)(ue),De=(0,d.c)(pe),ke=(0,d.c)(me),xe=(0,d.c)(he);function Ae(e,t){const r=(0,x.Qb)(t);return e.get("ui").get(r+"Player")}function Re(e,t,r){return e.get("servers").populateServer(t).then((t=>(t.get("isCloud")?e.get("user").get("providers"):t.get("providers")).populate().then((e=>e)))).then((e=>{const t=e.get(r)||e.get(R.Qh);return t?t.populate().then((e=>e)):i().Deferred().reject().promise()}))}const Ne={[J](e,t){const r=(0,q.gZ)(e,{playerIdentifier:t});e.set("remotePlayer",r)},[Z](e,{playQueueType:t,options:r},n){const{machineIdentifier:s,providerIdentifier:a,containerKey:o,key:c,mediaIndex:l,bitrate:d,playQueueItemID:m,shouldRefreshPlayQueue:v,initialState:I}=r;if(!o||!c)return;const E=Ae(e,t);if(!E)return;const w=s||N.A,C=e.get("servers").populateServer(w),O=Re(e,s,a),M=O.then((e=>function({providerModel:e,currentPlayQueueModel:t,containerKey:r,playQueueOptions:n}){const i=function(e){let t;if(e){const r=p.c.parseUrl(e),n=/^\/playQueues\/([^/?]+)/.exec(r.pathname||r.href);t=n?n[1]:void 0}return t}(r)||r;return t&&t.get("playQueueID")===i?t:(0,u.c)(((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e})({providerModel:e,playQueueID:i},n))}({providerModel:e,currentPlayQueueModel:E.get("playQueue"),containerKey:o,playQueueOptions:{playQueueType:t,playQueueOwn:!1}})));i().when(C,O,M).then(((t,r,s)=>{if(E.get("playQueue")===s){if(!E.get("isPlayQueueLoading")&&!s.get("isUpdatePending")&&v){const e=s.get("playQueueItems"),t=null!=m?e.get(m):e.find((e=>c===e.get("metadataItem").get("key")));if(E.set({isLyricsVisible:!1}),t){const r=s.get("playQueueSelectedItemID"),n=e.get(r),i=s.get("playQueueSelectedItemOffset"),a=e.indexOf(n),o=e.indexOf(t),c=t.get("metadataItem"),l=t.get("playQueueItemID");(0,L.c)(`[Cast] The current metadata item on the remote player changed to ${c.get("title")}`),(0,P.cp)(s).done((()=>{s.set({playQueueSelectedItemID:l,playQueueSelectedItemOffset:i+(o-a)})}))}else(0,P.cp)(s)}}else!function(e,t){const{appModel:r,serverModel:n,providerModel:s,playerModel:a,playQueueModel:o,openState:c,mediaIndex:l,bitrate:d,initialState:u}=e;if(a.get("isPlayQueueLoading"))return;const p=o.get("type");a.restoreDefaults({serverEntityID:n.entityID(),providerEntityID:s.entityID(),isOpen:!0,openState:c||p===D.KI?k.C:k.m,isPlayQueueLoading:!0,playQueue:o,liveTVSession:a.get("liveTVSession"),playbackStartTime:Date.now()}),function({serverModel:e,providerModel:t,playQueueModel:r}){if(!r.get("isLocal"))return(0,P.cp)(r);const n={server:e,provider:t},s=new b.c({containerKey:r.get("playQueueID")},n);return s.fetch().then((()=>s.get("metadataItems").length?(0,S.c)({providerModel:t,metadataListModel:s,playQueueModel:r}).then(null,(()=>i().Deferred().reject("ERROR_COMPANION_PLAY_QUEUE_COULD_NOT_ADD_TO").promise())):i().Deferred().reject("ERROR_COMPANION_PLAY_QUEUE_EMPTY").promise()),(()=>i().Deferred().reject("ERROR_COMPANION_PLAY_QUEUE_COULD_NOT_POPULATE").promise()))}({serverModel:n,providerModel:s,playQueueModel:o}).done((()=>{a.set(((e,t)=>{for(var r in t||(t={}))$.call(t,r)&&X(e,r,t[r]);if(Q)for(var r of Q(t))Y.call(t,r)&&X(e,r,t[r]);return e})({isPlayQueueLoading:!1},u)),t(be({playQueueType:p,mediaIndex:l,bitrate:d}))})).fail((()=>{const e=r.get("remotePlayer");if(e){const t=e.get("friendlyName");a.restoreDefaults({hasError:!0,errorMessage:(0,B.c)('An error occurred loading the media being played on "{playerName}".',{playerName:t})})}}))}({appModel:e,serverModel:t,providerModel:r,playerModel:E,playQueueModel:s,openState:E.get("isOpen")?null:k.C,mediaIndex:l,bitrate:d,initialState:I},n)})).fail((()=>{const t=e.get("remotePlayer");if(t){const e=t.get("friendlyName");E.restoreDefaults({hasError:!0,errorMessage:(0,B.c)('"{playerName}" is playing media from an unknown source.',{playerName:e})})}}))},[ee](e,t){const{playQueueType:r,playerState:n,providerIdentifier:s,machineIdentifier:a,liveTVSessionSubscriptionKey:o,liveTVSessionStartedAt:c,liveTVSessionSeekRangeStartedAt:d,liveTVSessionSeekStartSeconds:u,liveTVSessionSeekEndSeconds:p,liveTVSessionCurrentPosition:m,liveTVSessionChannelIdentifier:h}=t,y=Ae(e,r);if(!y||!y.get("isOpen"))return;const g=(0,V.Ww)(e,{serverEntityID:y.get("serverEntityID")});Re(e,a,s).then((e=>function(e,t,r,n,s,a,o,c,d,u){if(!n)return r.set({liveTVSession:null}),i().Deferred().resolve().promise();const p=r.get("liveTVSession"),m={key:n,currentPosition:d,startedAt:s,channelIdentifier:u,captureBuffer:{startedAt:a,seekStartSeconds:o,seekEndSeconds:c},nextPosition:null,lastSeekPosition:null};return p&&p.get("key")===n||r.set({liveTVSession:new l.c(m,{provider:t,server:t.server})}),e.get("isCloud")?(null==p||p.set(m),i().Deferred().resolve().promise()):r.get("liveTVSession").populate().then((e=>(e.set(m),e)))}(g,e,y,o,c,d,u,p,m,h))),(0,W.SS)((()=>{y.set(n)}))},[te](e,t){const{playQueueType:r,playQueueVersion:n,repeatAll:i,repeatOne:s}=t,a=Ae(e,r);if(!a||!a.get("isOpen"))return;const o=a.get("playQueue");if(a.set({repeatAll:i,repeatOne:s}),o){const e=o.get("playQueueVersion");o.set("repeat",i),!o.get("isUpdatePending")&&e<n&&o.fetch()}},[re](e,{playQueueType:t,mediaIndex:r=0,bitrate:n}){const i=Ae(e,t);if(!i||!i.get("isOpen")||i.get("isPlayQueueLoading"))return;const s=i.get("playQueue"),a=s.get("playQueueItems").get(s.get("playQueueSelectedItemID"));if(!a)return;const o=a.get("metadataItem"),l=(0,z.GG)(a.get("type"));if(!l||l.mediaType!==H.im)return;const d=o.get("Media")[r],u=c.c.prop("video"),p=j.c.getAvailableQualitiesFor(d,o.server,{lowestQualityIndex:u.lowestQualityIndex}),m=e.get("user").get("experienceSettings");let h=null==n?m.defaults().localQuality:j.c.getNearestIndexToBitrate(n);if(j.c.isExplicitQuality(h)){const e=p[0],t=p[p.length-1];e&&h<e.index?h=e.index:t&&h>t.index&&(h=j.c.ORIGINAL)}i.set({qualityIndex:h,availableQualities:p})},[ne](e,t,r){const{playQueueType:n,key:i,mediaIndex:s=0,partIndex:o=0,audioStreamID:c,subtitleStreamID:l}=t,d=Ae(e,n);if(!d||!d.get("isOpen")||d.get("isPlayQueueLoading"))return;const u=d.get("playQueue"),p=u.get("playQueueItems").get(u.get("playQueueSelectedItemID")).get("metadataItem"),m=p.get("Media")[s],h=m&&m.Part[o];if(i!==p.get("key"))return;if(!h)return;const y=a().findWhere(h.Stream,{streamType:G.c.get("audio").id,selected:!0}),g=a().findWhere(h.Stream,{streamType:G.c.get("subtitles").id,selected:!0}),f=null==c?void 0:c.toString(),v=(null==l?void 0:l.toString())||A.K;null!=c&&y&&y.id!==f&&r((0,E.Sg)({metadataItemEntityID:p.entityID(),mediaIndex:s,streamTypeString:"audio",streamID:f,updateLocalOnly:!0})),g&&g.id!==v&&r((0,E.Sg)({metadataItemEntityID:p.entityID(),mediaIndex:s,streamTypeString:"subtitles",streamID:v,updateLocalOnly:!0}))},[ie](e,t){e.get("user").get("experienceSettings").set(t)},[se](e,t){e.get("remotePlayer").set("volume",t)},[ae](e,{playQueueType:t,errorMessage:r}){const n=Ae(e,t);n&&n.restoreDefaults({hasError:!0,errorMessage:r})},[oe](e,t){const r=(0,v.c)(e),n=(0,V.IB)(e,t),i=(0,V.oH)(e,t),s=e.get("remotePlayer"),a=s.get("protocol"),o=s.get("protocolCapabilities");(0,F.c)({protocol:a,protocolCapabilities:o,providerIdentifier:(0,U.c)(n.get("identifier"),n.get("providerIdentifier")),userFeaturesByUUID:(0,I.c)(e)})&&r.mirrorDetails(i)},[ce](e){const t=e.get("companionServer");t&&(t.get("desktop").get("players").fetch(),t.get("desktop").get("neighborhoodDevices").fetch()),e.get("user").get("desktop").get("cloudCompanions").forEach((e=>{e.get("cloudPlayers").fetch().then((()=>e.set({linkState:O.qI})),((t,{status:r})=>e.set({linkState:402===r?O.oP:O.yE})))}))},[le](e,{playQueueType:t},r){const n=Ae(e,t);r((0,w.ML)()),n.restoreDefaults()},[de](e){const t=e.get("remotePlayer");if(!t)return;const r=e.get("ui"),n=r.get("audioVideoPlayer"),i=r.get("photoPlayer");n.get("isOpen")&&n.set({confirmRemoteToLocal:!0,controllable:null}),i.get("isOpen")&&i.set({confirmRemoteToLocal:!0,controllable:null});const s=t.get("protocol");s===M.y?(0,o.WI)("remoteCastPlayerManager").endSession():s===M.o&&(0,o.WI)("remotePlexPlayerManager").endSession(),e.unset("remotePlayer")},[ue](e,{playerType:t}){const r=e.get("ui").get(t+"Player"),n=r.get("playQueue"),i=n.get("playQueueItems"),s=n.get("playQueueSelectedItemID"),a=i.get(s).get("metadataItem");n.set("own",!0),(0,P.cp)(n),r.set({confirmRemoteToLocal:!1,startMetadataItemEntityID:a.entityID(),startOffsetMilliseconds:1e3*r.get("positionSeconds")})},[pe](e,{playerType:t},r){(0,_.OG)(e,t).set("confirmLocalToRemote",T.Gc),r((0,C.WS)({playerType:t}))},[me](e,{playerType:t}){(0,_.OG)(e,t).set("confirmLocalToRemote",T.Gc)},[he](e,{playerType:t}){const r=(0,_.OG)(e,t);(0,v.c)(e).startPlayback(r),r.set("confirmLocalToRemote",T.qK)}}},31564:(e,t,r)=>{"use strict";r.d(t,{EN:()=>y,If:()=>m,_W:()=>u,gj:()=>s,kZ:()=>h,q8:()=>l,sF:()=>p,sX:()=>o,sZ:()=>a,y6:()=>d,ys:()=>c});var n=r(55340),i=r(59212);const s=(0,n.c)(i.Go),a=(0,n.c)(i.y4),o=(0,n.c)(i.ye),c=(0,n.c)(i.CI),l=(0,n.c)(i.y9),d=(0,n.c)(i.m0),u=(0,n.c)(i.sT),p=(0,n.c)(i.a0),m=(0,n.c)(i.Q5),h=(0,n.c)(i.wD),y=(0,n.c)(i.Mh)},99516:(e,t,r)=>{"use strict";r.d(t,{AV:()=>q,EF:()=>z,Up:()=>ee,cH:()=>Q,eC:()=>W,gp:()=>_,m0:()=>B,mo:()=>$,yU:()=>G});var n=r(52180),i=r(17900),s=r(15568),a=r(14224),o=r(55340),c=r(76800),l=r(60352),d=r(14424),u=r(99204),p=r(47456),m=r(54268),h=r(59740),y=r(72528),g=r(42728),f=r(34932),v=r(39835),b=r(66308),S=r(12612),P=r(96504),I=r(84676),E=r(29432),w=r(45564),C=Object.defineProperty,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k="INIT_PRE_PLAY_PAGE",x="INIT_PRE_PLAY_DESCENDANT_LIST",A="INIT_PRE_PLAY_SIBLING_LIST",R="INIT_PRE_PLAY_AUGMENTED_HUBS",N="PRE_FETCH_PRE_PLAY_METADATA_ITEM",L="FETCH_PRE_PLAY_METADATA_ITEM",j="FETCH_PRE_PLAY_RELATED_HUBS",U="FETCH_PRE_PLAY_AUGMENTED_HUBS",F="MAKE_PRE_PLAY_VIDEO_DECISION",V="REPOPULATE_PRE_PLAY_POPULAR_TRACKS",_=(0,o.c)(k),W=(0,o.c)(x),B=(0,o.c)(A),H=(0,o.c)(R),z=(0,o.c)(N),G=(0,o.c)(L),q=(0,o.c)(j),K=(0,o.c)(U),Q=(0,o.c)(F),$=(0,o.c)(V);function Y(e){return e.get("ui").get("prePlayPage")}function X(e,t){const{metadataItemEntityID:r,containerKeyPattern:n}=t;if(n)return!1;const i=(0,w.Ww)(e,t),s=Y(e).get("metadataItem");return!(!s||s.server!==i||r&&s.entityID()!==r)}function J(e,t,r){const n=Y(e),i=n.get("siblingList"),s=n.get("descendantList"),a=n.get("relatedHubs");i&&r((0,E.Ih)({metadataListEntityID:i.entityID()})),s&&(n.get("metadataItem").get("type")===S.ec?r((0,E.iK)({metadataListEntityID:s.entityID()})):r((0,E.Ih)({metadataListEntityID:s.entityID()}))),a&&r(q())}function Z(e,t){const r=(0,w.Ww)(e,t),n=Y(e),i=n.get("metadataItem");if(!i||i.server!==r)return;const s=t.activity.Context;if(!s||s.key!==i.get("key"))return;if(null==s.exists&&null==s.accessible)return;const a=!s.exists||!s.accessible;n.set("isFileUnavailable",a),a&&window.setTimeout((()=>{i.set("isPreFetched",!1)}),0)}const ee=(0,c.c)({[k](e,t){const r=Y(e),n=(0,w.Ww)(e,t),s=(0,w.IB)(e,t),{providerEntityID:o,metadataKey:c}=t;if(o===r.get("providerEntityID")&&c===r.get("metadataKey"))return;const l=new a.c({key:c},{server:n,provider:s}),d=P.c.join([c.replace(/(\/library)?\/metadata/,"/hubs/metadata"),"related"]),p=(0,u.c)(e,g.sv),m=new i.c([],{server:n,provider:s,metadataItem:l,hubKey:d,includeExternalMedia:p,includeExternalMetadata:!0,asyncAugmentMetadata:!0});r.restoreDefaults({providerEntityID:o,metadataKey:c,metadataItem:l,siblingKey:r.get("siblingKey"),siblingList:r.get("siblingList"),relatedHubs:m})},[x](e,t){const r=Y(e),n=(0,w.Ww)(e,t),i=(0,w.IB)(e,t),a=(0,w.oH)(e,t),{providerEntityID:o,descendantKey:c}=t;if(!c)return void r.set({descendantKey:c,descendantList:void 0});if(o===r.get("providerEntityID")&&c===r.get("descendantKey"))return;const l=(0,u.c)(e,g.sv),d="album"===a.get("type")||"artist"===a.get("type")&&a.get("skipChildren"),p=new s.c({containerKey:c},{server:n,provider:i,excludeAllLeaves:!0,includeExternalMedia:l,includeRelated:d});r.set({descendantKey:c,descendantList:p})},[A](e,t){const r=Y(e),n=(0,w.Ww)(e,t),i=(0,w.IB)(e,t),{providerEntityID:a,siblingKey:o}=t;if(!o)return void r.set({siblingKey:o,siblingList:void 0});if(a===r.get("providerEntityID")&&o===r.get("siblingKey"))return;const c=(0,u.c)(e,g.sv),l=new s.c({containerKey:o},{server:n,provider:i,excludeAllLeaves:!0,includeExternalMedia:c});r.set({siblingKey:o,siblingList:l})},[R](e,t,r){const n=Y(e),s=n.get("metadataItem"),a=s.get("augmentationKey"),o=[S.iI,S.ec],c=[S.MOVIE,S.M7,S.SEASON,S.EPISODE],l=s.get("type");if(!o.includes(l)&&!c.includes(l)||!a)return void n.set({isAugmentedHubsPending:!1,isAugmentedHubsPopulated:!0});const d=new i.c([],{server:s.server,provider:s.provider,hubKey:s.get("augmentationKey"),excludeFields:"",wait:1});n.set({augmentedHubs:d}),r(K())},[N](e,t){const r=(0,w.oH)(e,t);(0,d.c)(r,{forceFetch:!0})},[L](e,t,r){const n=Y(e),i=n.get("metadataItem"),s=n.get("isMetadataItemPending");n.set("isMetadataItemPending",!0),(0,d.c)(i,{forceFetch:!0}).done((()=>{n.set({isMetadataItemPending:!1,isMetadataItemPopulated:!0,metadataItemError:null}),r(H())})).fail(((e,t)=>{t.aborting?n.set("isMetadataItemPending",s):n.set({isMetadataItemPending:!1,metadataItemError:(0,I.c)(t)})}))},[j]:(0,l.c)({key:"relatedHubs",getModel:Y}),[U]:(0,l.c)({key:"augmentedHubs",getModel:Y}),[F](e,t,r){const i=Y(e),s=e.get("user").get("experienceSettings"),a=i.get("metadataItem"),o=(0,n.WI)("getDecisionOptions")(a),c=v.c.getCurrentQuality(a,s,(e=>r((0,y.SI)(e)))),l=f.c.getMediaDecision(((e,t)=>{for(var r in t||(t={}))M.call(t,r)&&D(e,r,t[r]);if(O)for(var r of O(t))T.call(t,r)&&D(e,r,t[r]);return e})({item:a,transcodeServer:a.server,quality:c},o));i.set("decisionMediaItem",l.media)},[m.cQ](e,t){t.activity.type===b.Gi&&Z(e,t)},[m.uI](e,t){t.activity.type===b.Gi&&Z(e,t)},[p.Ab](e,t,r){X(e,t)&&J(e,0,r)},[h.oZ](e,t,r){const n=Y(e),i=n.get("metadataItem");if(X(e,t))i.fetch({data:{skipRefresh:1},usePopulatedParams:!0}),J(e,0,r);else{const s=(0,w.Ww)(e,t),a=n.get("siblingList"),o=t.parentMetadataKey;i&&i.server===s&&a&&o&&i.get("parentKey")===o&&r((0,E.Ih)({metadataListEntityID:a.entityID()}))}},[V](e,t,r){const n=Y(e).get("metadataItem"),i=(0,w.wb)(e,{metadataItemEntityID:t.albumMetadataItemEntityID});n&&i&&n.get("key")===i.get("parentKey")&&r((0,p.qG)({serverEntityID:t.serverEntityID,metadataItemEntityID:n.entityID()}))}})},62988:(e,t,r)=>{"use strict";r.d(t,{Yb:()=>N,GK:()=>x,so:()=>A,E7:()=>R,wL:()=>U,cp:()=>Y,eS:()=>W,CY:()=>F,a2:()=>L,IH:()=>j,AT:()=>_,A8:()=>V});var n=r(45584),i=r(61264),s=r(55340),a=r(76800),o=r(23228),c=r(54252);function l(e,t,r){if(!t)return null;const n=new Date(t);if(!(0,c.c)(n))return-1;const i=n.getTime();let s,a=0,o=e.length-1;for(;a<=o;){s=Math.floor((a+o)/2);const t=e[s],n=e[s+1],c=new Date(t.time).getTime();if(!n)return i>c?s:s+1;if(i===c)return r<s?s:s+1;const l=new Date(n.time).getTime();if(i>c&&i<l)return s+1;i>c?a=s+1:i<c&&(o=s-1)}return Math.max(0,s)}var d=r(67272);const u="MMM dd, yyyy HH:mm:ss.SSS";function p(e){return(0,d.c)(e,u,new Date)}var m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const S="ui/serverLogPageActions/changeTextFilter",P="ui/serverLogPageActions/changeTimeFilter",I="ui/serverLogPageActions/clearFilter",E="ui/serverLogPageActions/addLogLine",w="ui/serverLogPageActions/resetLogLevels",C="ui/serverLogPageActions/toggleLogLevel",O="ui/serverLogPageActions/clearLog",M="ui/serverLogPageActions/loadLogfile",T="ui/serverLogPageActions/toggleTimeFilter",D="ui/serverLogPageActions/toggleRaw",k="ui/serverLogPageActions/highlightLine",x=(0,s.c)(S),A=(0,s.c)(P),R=(0,s.c)(I),N=(0,s.c)(E),L=(0,s.c)(w),j=(0,s.c)(C),U=(0,s.c)(O),F=(0,s.c)(M),V=(0,s.c)(T),_=(0,s.c)(D),W=(0,s.c)(k);function B(e,t,r){return t.all||(t.all=[]),e.index=t.all.length,G(e,{filter:r.get("filter"),timeFilterStart:r.get("timeFilterStart"),timeFilterEnd:r.get("timeFilterEnd"),logLevels:r.get("logLevels")})?t.filtered&&t.filtered.push(e):t.filtered||(t.filtered=t.all.slice(0)),t.all.push(e),t}function H(e){return e.get("ui").get("serverLogPage")}function z(e){return e.split(/\s+/).map((e=>new RegExp((0,o.c)(e),"i")))}function G(e,t){const{filter:r,timeFilterStart:s,timeFilterStartIndex:a,timeFilterEnd:o,timeFilterEndIndex:c,logLevels:l}=t;if(l.length&&-1===l.indexOf(e.level))return!1;if(s||null!=a||o||null!=c){let t,r,l;if(null!=a&&null!=c||(t=p(e.time),null==a&&(r=s&&p(s)),null==c&&(l=o&&p(o))),null!=a&&a>e.index||null!=c&&c<e.index||r&&(0,n.c)(r,t)||l&&(0,i.c)(l,t))return!1}return!r||(t.regexps||z(r)).every((t=>t.test(e.message)||t.test(e.thread)))}function q(e){const t=e.get("filter"),r=e.get("timeFilterStart"),n=e.get("timeFilterEnd"),i=e.get("logLevels"),s=e._unfilteredLogLines,a=l(s,r,-1/0),o=l(s,n,1/0),c=function(e,t){const r=z(t.filter);return e.filter((e=>{return G(e,(n=((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e})({},t),h(n,y({regexps:r}))));var n}))}(s,{logLevels:i,filter:t,timeFilterStart:r,timeFilterStartIndex:-1===a?null:a,timeFilterEndIndex:-1===o?null:o,timeFilterEnd:n});e.set({logLines:c,unfilteredLogLinesCount:s.length,isTimeFilterStartValid:-1!==a,isTimeFilterEndValid:-1!==o})}const K=/^([^[]+)\[([^\]]+)]\s+([^\s]+)\s+-\s+(.*)/,Q={ERROR:0,WARN:1,INFO:2,DEBUG:3,VERBOSE:4};function $(e){if(!e)return null;const t=e.match(K),[,r,n,i,s]=t;return{time:r.trim(),thread:n.trim(),level:Q[i],message:s.trim()}}const Y=(0,a.c)({[E](e,t){const{message:r}=t,n=H(e);n._unfilteredLogLines||(n._unfilteredLogLines=[]);const i=n.get("logLines").length!==n._unfilteredLogLines.length,s=i?n.get("logLines"):null,a=i?s.length:null,o=B(r,{all:n._unfilteredLogLines.slice(0),filtered:s},n);o.filtered&&o.filtered.length!==a&&(o.filtered=o.filtered.slice(0)),n._unfilteredLogLines=o.all,n.set({unfilteredLogLinesCount:o.all.length,logLines:o.filtered||o.all})},[S](e,t){const r=H(e),{filter:n}=t;r.set({filter:n}),q(r)},[P](e,t){const r=H(e),{timeFilterStart:n,timeFilterEnd:i}=t;r.set({showTimeFilter:!(!n&&!i),timeFilterStart:n,timeFilterEnd:i}),q(r)},[I](e){const t=H(e);t.set({filter:"",timeFilterStart:"",timeFilterEnd:"",logLevels:[]}),q(t)},[w](e){const t=H(e);t.set({logLevels:[]}),q(t)},[C](e,t){const r=H(e),n=r.get("logLevels"),i=n.slice(0),s=n.indexOf(t.logLevel);-1===s?i.push(t.logLevel):i.splice(s,1),r.set({logLevels:i}),q(r)},[O](e){const t=H(e);t.set({logLines:[],unfilteredLogLinesCount:0,highlightedLineIndex:null,showRawText:!1}),t._unfilteredLogLines=[]},[M](e,t){const{result:r}=t,n=H(e);let i={all:[]};n.set({logLines:[],unfilteredLogLinesCount:0});try{r.split(/\n+/).map($).forEach((e=>{e&&(i=B(e,i,n))})),n._unfilteredLogLines=i.all,n.set({unfilteredLogLinesCount:i.all.length,logLines:i.filtered||i.all})}catch(e){}},[T](e){const t=H(e),r=t.get("showTimeFilter");t.set({timeFilterStart:"",timeFilterEnd:"",showTimeFilter:!r}),q(t)},[D](e){const t=H(e);t.set("showRawText",!t.get("showRawText"))},[k](e,t){H(e).set("highlightedLineIndex",t.index)}})},74764:(e,t,r)=>{"use strict";r.d(t,{CK:()=>ie,I9:()=>he,Ip:()=>ne,M3:()=>Y,_k:()=>ee,c7:()=>X,eO:()=>ae,e_:()=>J,gZ:()=>se,k9:()=>te,kD:()=>Z,o5:()=>ce,q6:()=>ye,u6:()=>re,uG:()=>me});var n=r(37588),i=r.n(n),s=r(55340),a=r(76800),o=r(22168),c=r(52047),l=r(25160),d=r(50708),u=r(51100),p=r(85976),m=r(33040),h=r(89448),y=r(59396),g=r(96504),f=r(5620),v=r(17068),b=r(45128),S=r(91740),P=r(49768),I=r(93780),E=r(67496),w=r(54332),C=r(81764),O=r(45564),M=r(17544),T=Object.defineProperty,D=Object.defineProperties,k=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&N(e,r,t[r]);if(x)for(var r of x(t))R.call(t,r)&&N(e,r,t[r]);return e};const j="shareModal",U="ui/shareModal/initShareModal",F="ui/shareModal/resetShareModal",V="ui/shareModal/sharePreviousStep",_="ui/shareModal/shareNextStep",W="ui/shareModal/validateUsername",B="ui/shareModal/setUsername",H="ui/shareModal/setUser",z="ui/shareModal/fetchServerOverviews",G="ui/shareModal/fetchServerShares",q="ui/shareModal/setLibraryShares",K="ui/shareModal/fetchFilterOptionsTags",Q="ui/shareModal/saveItemShare",$="ui/shareModal/saveLibraryShares",Y=(0,s.c)(U),X=(0,s.c)(F),J=(0,s.c)(V),Z=(0,s.c)(_),ee=(0,s.c)(W),te=(0,s.c)(B),re=(0,s.c)(H),ne=(0,s.c)(z),ie=(0,s.c)(G),se=(0,s.c)(q),ae=(0,s.c)(K),oe=(0,s.c)(Q),ce=(0,s.c)($);function le(e){return e.get("ui").get("shareModal")}function de(e,t){const r=e.get("servers"),{metadataItemEntityID:n,isNewFriend:i=!0,isAddingHomeUser:s,isCreatingManagedUser:a}=t,o=[];s&&o.push(b.C.WARNING),o.push(b.C.USER);const c=!!n,l=r.some((e=>e.get("isFullOwnedServer")&&e.get("isClaimed")&&e.get("friendlyName")));return!c&&l&&o.push(b.C.LIBRARIES),c||!i&&!s||o.push(b.C.RESTRICTIONS),i&&!a&&o.push(b.C.SUMMARY),o}function ue(e,t){return e.findIndex((e=>e===t))}function pe(e,t){return e[ue(e,t)-1]}function me(e,t){return e[ue(e,t)+1]}function he(e,t){const r=me(e,t);return!(!r||r===b.C.SUMMARY)}const ye=(0,a.c)({[U](e,t){const r=le(e),n=de(e,t);r.set({steps:n,step:n[0]})},[F](e,t={}){const r=le(e);f.c.abortAll(j),r.restoreDefaults(t)},[V](e,t,r){const n=le(e),i=n.get("steps"),s=n.get("step"),a={steps:i,step:pe(i,s),username:n.get("username"),restrictionProfileIdentifier:n.get("restrictionProfileIdentifier"),isUsernameValidated:!n.get("isCreatingManagedUser")};s===b.C.RESTRICTIONS&&(a.friendEntityID=n.get("friendEntityID"),a.isNewFriend=n.get("isNewFriend"),a.isAddingHomeUser=n.get("isAddingHomeUser"),a.isCreatingManagedUser=n.get("isCreatingManagedUser"),a.selectedAllLibrariesMachineIdentifiers=n.get("selectedAllLibrariesMachineIdentifiers"),a.selectedLibrarySectionIDs=n.get("selectedLibrarySectionIDs")),r(X(a))},[_](e){const t=le(e),r=me(t.get("steps"),t.get("step"));r&&t.set({step:r})},[W](e,t={}){const r=le(e),n=e.get("cloudServer"),{username:s=""}=t;if(""===s.trim())return void r.set({isUsernameValidating:!1,isUsernameValidated:!1});(0,h.SS)((()=>{r.set({isUsernameValidating:!0,isUsernameValidated:!1})}));const a=g.c.join("/api/users/validate",{invited_email:s}),o=n.getXHROptions(a,{type:"POST",scope:j});i().ajax(o).done((()=>{r.set({isUsernameValidating:!1,isUsernameValidated:!0})})).fail((()=>{r.set({isUsernameValidating:!1})}))},[B](e,t={},r){const n=le(e),{metadataItemEntityID:i,username:s,restrictionProfileIdentifier:a,isAddingHomeUser:o,isCreatingManagedUser:c}=t,l=e.get("user").get("allFriends");let d=l.findWhere({username:s});d||(d=l.findWhere({email:s}));const u=!!d&&!c,p=u?d.entityID():null,m=de(e,{metadataItemEntityID:i,isNewFriend:!u,isAddingHomeUser:o,isCreatingManagedUser:c});n.set({steps:m,metadataItemEntityID:i,friendEntityID:p,username:u?d.get("username"):s,restrictionProfileIdentifier:a,isNewFriend:!u,isAddingHomeUser:o,isCreatingManagedUser:c}),r(he(m,b.C.USER)?Z():i?oe():ce())},[H](e,t={},r){const n=le(e),i=(0,O.Id)(e,t),{metadataItemEntityID:s,isAddingHomeUser:a}=t,o=i.entityID(),c=de(e,{metadataItemEntityID:s,isNewFriend:!1,isAddingHomeUser:a,isCreatingManagedUser:!1});n.set({steps:c,metadataItemEntityID:s,friendEntityID:o,username:i.get("username"),isNewFriend:!1,isAddingHomeUser:a,restrictionProfileIdentifier:void 0}),r(s?oe():Z())},[z](e,t={}){const r=le(e),{serverEntityIDs:n}=t;(0,h.SS)((()=>{r.set({isServerOverviewsPopulating:!0,isServerOverviewsPopulated:!1})})),(0,o.c)(n).then((e=>{r.set({isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!0,serverOverviews:e})}))},[G](e,t={}){const r=le(e),n=(0,O.Id)(e,t);f.c.abortAll(j),n?((0,h.SS)((()=>{r.set({isServerSharesPopulating:!0,isServerSharesPopulated:!1,serverSharesError:null})})),(0,c.c)(n,j).done((()=>{r.set({isServerSharesPopulating:!1,isServerSharesPopulated:!0})})).fail((()=>{r.set({isServerSharesPopulating:!1,serverSharesError:(0,y.c)("Failed to load shares.")})}))):r.set("isServerSharesPopulated",!0)},[q](e,t={},r){const n=le(e);n.set(t),r(he(n.get("steps"),b.C.LIBRARIES)?Z():ce())},[K](e,t={}){const r=le(e),{serverEntityIDs:n}=t,i=n.map((t=>(0,O.Ww)(e,{serverEntityID:t})));f.c.abortAll(j),(0,h.SS)((()=>{r.set({isFilterOptionsTagsPopulating:!0,isFilterOptionsTagsPopulated:!1})})),(0,E.c)(i,j).done((e=>{r.set({isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!0,filterOptionsTags:e})}))},[Q](e,t,r){const n=le(e),s=n.get("metadataItemEntityID"),a=n.get("friendEntityID"),o=n.get("username"),c=n.get("isNewFriend"),l=e.get("cloudServer");(0,h.SS)((()=>{n.set({isSharingPending:!0,isSharingCompleted:!1,sharingError:null,inviteTokenError:null})}));const d=(0,O.oH)(e,{metadataItemEntityID:s}),u=(0,p.c)({serverIdentifier:d.server.get("machineIdentifier"),key:d.get("key")}),m=(0,M.c)({type:d.get("type"),title:d.get("title"),parentTitle:d.get("parentTitle"),grandparentTitle:d.get("grandparentTitle"),index:d.get("index"),parentIndex:d.get("parentIndex"),originallyAvailableAt:d.get("originallyAvailableAt")},v.i),g={items:[{uri:u,type:d.get("type"),title:m}]};if(a){const t=(0,O.Id)(e,{friendEntityID:a});g.invitedId=t.id}else g.invitedEmail=o;const f=l.getXHROptions("/api/v2/shared_items",{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(g),scope:j});i().ajax(f).then((t=>{c?function(e,t){const r=`/api/v2/shared_sources/${t}`,n=e.get("cloudServer").getXHROptions(r,{type:"GET",dataType:"json",scope:j});return i().ajax(n).then((e=>e.inviteToken),(e=>{const t=e&&e.status?e.responseJSON.errors:null,r=t?t[0].message:(0,y.c)("Unknown error");return(0,y.c)("Failed to get invite link: {errorMessage}",{errorMessage:r})}))}(e,t[0].sharedSourceId).done((e=>{n.set({inviteToken:e,isSharingPending:!1,isSharingCompleted:!0})})).fail((e=>{n.set({inviteTokenError:e,isSharingPending:!1,isSharingCompleted:!0})})).always((()=>{r(Z())})):n.set({isSharingPending:!1,isSharingCompleted:!0})}),(e=>{const t=e&&e.status?e.responseJSON.errors:null,r=t?t[0].message:null;n.set({isSharingPending:!1,sharingError:r||(0,y.c)("Failed to share item")})}))},[$](e,t={},r){const{addToHome:n,restrictions:s={}}=t,a=le(e),o=a.get("friendEntityID"),c=a.get("username"),p=a.get("restrictionProfileIdentifier"),g=a.get("isNewFriend"),f=a.get("isAddingHomeUser"),v=a.get("isCreatingManagedUser"),b=a.get("serverOverviews"),E=a.get("selectedAllLibrariesMachineIdentifiers")||[],M=a.get("selectedLibrarySectionIDs")||[],T=e.get("user");(0,h.SS)((()=>{a.set({isSharingPending:!0,isSharingCompleted:!1,sharingError:null})}));const x=[],A=o?(0,O.Id)(e,{friendEntityID:o}):new S.c({username:c},{server:T.server}),R=(0,w.c)(s);g&&A.set(R);const N=A.get("serverShares").where({owned:!0}),j=function(e=[]){return e.reduce(((e,t)=>(t.get("sections").forEach((r=>{e[r.get("id")]=t.get("machineIdentifier")})),e)),{})}(b),U=N.map((e=>e.get("machineIdentifier"))),F=Array.from(new Set(M.map((e=>j[e])))),V=Array.from(new Set([...U,...F,...E])),_=f||n&&!A.get("home")||v;let W;if(_){const e=(B=L({},R),D(B,k({username:c,restricted:v})));p&&p!==d.gv&&(e.restrictionProfile=p),W=new P.c(e,{server:T.server}).save(),v&&(W=W.then((e=>{A.set("id",parseInt(m.c.parseXML(e).id,10))})))}else{const e=0===V.length;W=g&&e?A.save(L({user:c},R)):i().Deferred().resolve().promise()}var B;W.done((()=>{V.forEach((e=>{const t=b.get(e);if(!t)return;const r=N.find((t=>t.get("machineIdentifier")===e)),n=E.indexOf(e)>-1,i=!r,s=!n&&!F.find((t=>t===e)),a=function(e,t){const r=e.get("sections");return t.filter((e=>r.get(e)))}(t,M),o=n?[]:a;if(i){const t=new I.c({machineIdentifier:e}),r=(0,l.c)({user:T,friend:A,serverShare:t,librarySectionIDs:o,isNewFriend:g,isCreatingManagedUser:v,isNewServerShare:!0});x.push(r)}else if(s)x.push(r.destroy({wait:!0}));else{const e=(0,l.c)({user:T,friend:A,serverShare:r,librarySectionIDs:o,isNewFriend:g,isCreatingManagedUser:v,isNewServerShare:!1});x.push(e)}})),i().when(...x).done(((...e)=>{const t={isSharingPending:!1,isSharingCompleted:!0};if(V.length>0&&g&&!v){const r=(x.length>1?e[e.length-1]:e)[0];t.inviteToken=r.inviteToken}a.set(t),v&&T.set("home",!0),r(Z())})).fail(((...e)=>{let t;for(const r of e){const e=(0,u.c)(r,null,"status");if(e){t=e;break}}t||(t=v?(0,y.c)("Failed to create home user."):g?(0,y.c)("Failed to send invite."):(0,y.c)("Failed to update server shares.")),a.set({isSharingPending:!1,sharingError:t})})).always((()=>{r((0,C.MB)()),r((0,C.QF)()),_&&(T.get("homeUsers").fetch(),r((0,C.QD)()),r((0,C.AT)()))}))})).fail((e=>{const t=(0,u.c)(e,null,"status")||(0,y.c)("Failed to create home user.");a.set({isSharingPending:!1,sharingError:t})}))}})},66840:(e,t,r)=>{"use strict";r.d(t,{Ih:()=>f,Ul:()=>b,ay:()=>g});var n=r(37588),i=r.n(n),s=r(55340),a=r(76800),o=r(88880),c=r(51100),l=r(58036),d=r(89448),u=r(59396),p=r(96504);const m=["aqt","ass","idx","jss","psb","rt","smi","srt","ssa","sub","txt","utf","utf-8","utf8","vtt"],h="ui/subtitlesUploadModal/resetUploadSubtitles",y="ui/subtitlesUploadModal/uploadSubtitles",g=(0,s.c)(h),f=(0,s.c)(y);function v(e){return e.get("ui").get("subtitlesUploadModal")}const b=(0,a.c)({[h](e){v(e).restoreDefaults()},[y](e,t,r){const{file:n}=t,s=(0,l.oH)(e,t),a=v(e),h=n.name,y=function(e){const t=e.lastIndexOf(".");return t>=0?e.substring(t+1):null}(h);if(!m.includes(y))return void a.set({error:(0,u.c)("Unsupported subtitle file format")});if(n.size>1048576)return void a.set({error:(0,u.c)("Subtitle file exceeds 1MB size limit")});(0,d.SS)((()=>{a.set({isUploading:!0,isUploaded:!1,error:null})}));const g=new window.FileReader;g.onload=t=>{if(t.target.error)return void a.set({isUploading:!1,isUploaded:!1,error:(0,u.c)("Unable to upload subtitle file")});const r=t.target.result,n=p.c.join([s.get("key"),"subtitles"],{title:h,format:y}),l=s.server.getXHROptions(n,{method:"POST",processData:!1,contentType:!1,data:r});i().ajax(l).then((()=>{a.set({isUploading:!1,isUploaded:!0,error:null});const t=e.get("ui").get("audioVideoPlayer");s.fetch({data:{skipRefresh:1},usePopulatedParams:!0}),t.get("isOpen")&&(0,o.c)(e).refreshRemoteStreams(t)}),(e=>{a.set({isUploading:!1,isUploaded:!1,error:(0,c.c)(e,(0,u.c)("Unable to upload subtitle file"))})}))},g.readAsText(n)}})},16396:(e,t,r)=>{"use strict";r.d(t,{_e:()=>s,eo:()=>o,s1:()=>c,uA:()=>a});var n=r(55340),i=r(59212);const s=(0,n.c)(i.oH),a=(0,n.c)(i.Rt),o=(0,n.c)(i.Ck),c=(0,n.c)(i.e$)},71908:(e,t,r)=>{"use strict";r.d(t,{A2:()=>ce,C8:()=>Z,CK:()=>se,Co:()=>ee,Eh:()=>J,IX:()=>Y,Ip:()=>ie,Sm:()=>ne,a6:()=>me,aT:()=>le,eO:()=>X,ic:()=>oe,kP:()=>re,o5:()=>ae,qM:()=>te,uk:()=>de});var n=r(37588),i=r.n(n),s=r(14224),a=r(55340),o=r(76800),c=r(22168),l=r(52047),d=r(25160),u=r(59740),p=r(50708),m=r(51100),h=r(69956),y=r(89448),g=r(59396),f=r(96504),v=r(5620),b=r(49768),S=r(93780),P=r(67496),I=r(54332),E=r(28792),w=r(81764),C=r(45564),O=Object.defineProperty,M=Object.defineProperties,T=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const R="userSharingSettingsPage",N="ui/userSharingSettingsPage/resetUserSharingSettingsPage",L="ui/userSharingSettingsPage/fetchFilterOptionsTags",j="ui/userSharingSettingsPage/setFriendRestrictions",U="ui/userSharingSettingsPage/updateManagedUserProfile",F="ui/userSharingSettingsPage/legacyUpdateManagedUserProfile",V="ui/userSharingSettingsPage/dismissFriendError",_="ui/userSharingSettingsPage/fetchSharedSources",W="ui/userSharingSettingsPage/populateSharedItem",B="ui/userSharingSettingsPage/deleteSharedItem",H="ui/userSharingSettingsPage/fetchServerOverviews",z="ui/userSharingSettingsPage/fetchServerShares",G="ui/userSharingSettingsPage/saveLibraryShares",q="ui/userSharingSettingsPage/dismissSharingError",K="ui/userSharingSettingsPage/removeServerShare",Q="ui/userSharingSettingsPage/dismissRemoveServerShareError",$="ui/userSharingSettingsPage/addToHome",Y=(0,a.c)(N),X=(0,a.c)(L),J=(0,a.c)(j),Z=((0,a.c)(F),(0,a.c)(U)),ee=(0,a.c)(V),te=(0,a.c)(_),re=(0,a.c)(W),ne=(0,a.c)(B),ie=(0,a.c)(H),se=(0,a.c)(z),ae=(0,a.c)(G),oe=(0,a.c)(q),ce=(0,a.c)(K),le=(0,a.c)(Q),de=(0,a.c)($);function ue(e){return e.get("ui").get("userSharingSettingsPage")}function pe(e,t,r){return e.map((e=>{if(e.origin!==t)return e;const n=e.sharedItems.filter((e=>e.id!==r));return i=((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e})({},e),M(i,T({sharedItems:n}));var i}))}const me=(0,o.c)({[N](e){const t=ue(e);v.c.abortAll(R),t.restoreDefaults()},[L](e,t={}){const r=ue(e),{serverEntityIDs:n}=t,i=n.map((t=>(0,C.Ww)(e,{serverEntityID:t})));v.c.abortAll(R),(0,y.SS)((()=>{r.set({isFilterOptionsTagsPopulating:!0,isFilterOptionsTagsPopulated:!1})})),(0,P.c)(i,R).done((e=>{r.set({filterOptionsTags:e,isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!0})}))},[j](e,t,r){const n=ue(e),s=e.get("cloudServer"),{friendEntityID:a,restrictions:o}=t,{restrictionProfileIdentifier:c}=o,l=(0,C.Id)(e,{friendEntityID:a}),d=(0,C.mw)(e);let u;if((0,y.SS)((()=>{n.set({isUpdatingFriend:!0,updateFriendError:null})})),c){const e={userId:l.id};c!==p.gv&&(e.restrictionProfile=c);const t=s.getXHROptions("/api/v2/home/users/restricted/profile",{type:"POST",contentType:"application/json",data:JSON.stringify(e),scope:R});u=i().ajax(t).then((()=>{const e=d.get("homeUsers").find((e=>e.id===l.id)),t=c===p.gv?"":c;return l.fetch().then((()=>{e.set("restrictionProfile",t)}))}))}else{const e=(0,I.c)(o);u=l.save(e)}u.then((()=>{n.set({isUpdatingFriend:!1})}),(()=>{n.set({isUpdatingFriend:!1,updateFriendError:(0,g.c)("Failed to update")})}))},[F](e,t,r){const n=ue(e),s=e.get("cloudServer"),a=e.get("user").get("homeUsers"),{friendEntityID:o,username:c,avatar:l}=t,d=(0,C.Id)(e,{friendEntityID:o});let u;if((0,y.SS)((()=>{n.set({isUpdatingFriend:!0,updateFriendError:null})})),c){if(c.trim()===d.get("title"))return void n.set({isUpdatingFriend:!1});if(a.findWhere({title:c.trim()}))return void n.set({isUpdatingFriend:!1,updateFriendError:(0,g.c)("A Home user already exists with this name")});const e={friendlyName:c.trim()},t=s.getXHROptions(`/api/v2/home/users/restricted/${d.id}`,{type:"POST",contentType:"application/json",data:JSON.stringify(e),scope:R});u=i().ajax(t)}else l&&(u=(0,E.c)(l,d.id));u.then((()=>{n.set({isUpdatingFriend:!1}),a.fetch(),r((0,w.QD)()),r((0,w.MB)())}),(()=>{n.set({isUpdatingFriend:!1,updateFriendError:(0,g.c)("Failed to update")})}))},[U](e,t,r){const{friendEntityID:n,username:s,avatar:a,restrictionProfileIdentifier:o}=t,c=ue(e),l=e.get("cloudServer"),d=e.get("user").get("homeUsers"),u=(0,C.sz)(e,{homeUserEntityID:n});if(!u)return;let p;if((0,y.SS)((()=>{c.set({isUpdatingFriend:!0,updateFriendError:null})})),o){const e={restrictionProfile:"unrestricted"!==o?o:void 0,userId:u.id},t=l.getXHROptions("/api/v2/home/users/restricted/profile",{type:"POST",contentType:"application/json",data:JSON.stringify(e),scope:R});p=i().ajax(t)}else if(s){if(s.trim()===u.get("title"))return void c.set({isUpdatingFriend:!1});if(d.findWhere({title:s.trim()}))return void c.set({isUpdatingFriend:!1,updateFriendError:(0,g.c)("A Home user already exists with this name")});const e={friendlyName:s.trim()},t=l.getXHROptions(`/api/v2/home/users/restricted/${u.id}`,{type:"POST",contentType:"application/json",data:JSON.stringify(e),scope:R});p=i().ajax(t)}else a&&(p=(0,E.c)(a,u.id));p&&p.then((()=>{c.set({isUpdatingFriend:!1}),d.fetch(),r((0,w.QD)())}),(()=>{c.set({isUpdatingFriend:!1,updateFriendError:(0,g.c)("Failed to update")})}))},[V](e,t,r){ue(e).set({updateFriendError:null})},[_](e,t,r){const n=ue(e),s=e.get("cloudServer");(0,y.SS)((()=>{n.set({isSharedSourcesPopulating:!0,isSharedSourcesPopulated:!1,sharedSourcesError:null})}));const a=f.c.join("/api/v2/shared_sources/owned",{invitedId:t.userID,includeItems:!0}),o=f.c.join("/api/v2/shared_sources/received",{ownerId:t.userID,includeItems:!0}),c=s.getXHROptions(a,{type:"GET",dataType:"json",scope:R}),l=s.getXHROptions(o,{type:"GET",dataType:"json",scope:R});i().when(i().ajax(c),i().ajax(l)).then(((e,t)=>{n.set({ownedSharedSources:e[0],receivedSharedSources:t[0],isSharedSourcesPopulating:!1,isSharedSourcesPopulated:!0})}),(()=>{n.set({isSharedSourcesPopulating:!1,sharedSourcesError:(0,g.c)("Failed to fetch shared items.")})}))},[W](e,t,r){const{serverIdentifier:n,providerIdentifier:i,key:a}=(0,h.c)(t.uri),o=e.get("servers").get(n),c=o&&o.get("providers").get(i);c&&c.get("isPopulated")&&new s.c({key:a},{server:o,provider:c}).populate()},[B](e,t,r){const n=ue(e),s=e.get("cloudServer"),{id:a,origin:o,isOwnedItem:c}=t;n.set("deleteSharedItemID",a);const l=s.getXHROptions(`/api/v2/shared_items/${a}`,{method:"DELETE",dataType:"json",scope:R});i().ajax(l).then((()=>{const e={deleteSharedItemID:null};if(c){const t=pe(n.get("ownedSharedSources"),o,a);e.ownedSharedSources=t}else{const t=pe(n.get("receivedSharedSources"),o,a);e.receivedSharedSources=t}n.set(e)}),(()=>{r((0,u._K)({type:"error",message:(0,g.c)("There was a problem removing this shared item.")})),n.set("deleteSharedItemID",null)}))},[H](e,t={}){const r=ue(e),{serverEntityIDs:n}=t;(0,y.SS)((()=>{r.set({isServerOverviewsPopulating:!0,isServerOverviewsPopulated:!1})})),(0,c.c)(n).then((e=>{r.set({isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!0,serverOverviews:e})}))},[z](e,t={}){const r=ue(e),n=(0,C.Id)(e,t);v.c.abortAll(R),(0,y.SS)((()=>{r.set({isServerSharesPopulating:!0,isServerSharesPopulated:!1,serverSharesError:null})})),(0,l.c)(n,R).done((()=>{r.set({isServerSharesPopulating:!1,isServerSharesPopulated:!0})})).fail((()=>{r.set({isServerSharesPopulating:!1,serverSharesError:(0,g.c)("Failed to load shares.")})}))},[G](e,t={},r){const n=ue(e),i=e.get("user");(0,y.SS)((()=>{n.set({isSharingPending:!0,isSharingCompleted:!1,sharingError:null})}));const{friendEntityID:s,machineIdentifier:a,selectedLibrarySectionIDs:o,isAllLibrariesSelected:c}=t,u=(0,C.Id)(e,{friendEntityID:s}),p=u.get("serverShares"),h=p.findWhere({machineIdentifier:a}),f=!h,v=!c&&0===o.length,b=c?[]:o;let P;if(f){const e=new S.c({machineIdentifier:a});P=(0,d.c)({user:i,friend:u,serverShare:e,librarySectionIDs:b,isNewFriend:!1,isNewServerShare:!0})}else P=v?h.destroy({wait:!0}):(0,d.c)({user:i,friend:u,serverShare:h,librarySectionIDs:b,isNewFriend:!1,isNewServerShare:!1});P.done((e=>{f&&p.add(new S.c(e,{server:i.server,parse:!0})),n.set({isSharingPending:!1,isSharingCompleted:!0})})).fail((e=>{n.set({isSharingPending:!1,sharingError:(0,m.c)(e,null,"status")||(0,g.c)("Failed to update server shares.")})})).always((()=>{(0,l.c)(u,R)}))},[q](e,t,r){ue(e).set({sharingError:null})},[K](e,t,r){const n=ue(e);(0,y.SS)((()=>{n.set({isRemoveServerSharePending:!0,isRemoveServerShareCompleted:!1,removeServerShareError:null})}));const{friendEntityID:i,machineIdentifier:s}=t,a=(0,C.Id)(e,{friendEntityID:i});a.get("serverShares").findWhere({machineIdentifier:s}).destroy({wait:!0}).done((()=>{n.set({isRemoveServerSharePending:!1,isRemoveServerShareCompleted:!0})})).fail((e=>{n.set({isRemoveServerSharePending:!1,removeServerShareError:(0,m.c)(e,null,"status")||(0,g.c)("Failed to remove server share.")})})).always((()=>{(0,l.c)(a,R)}))},[Q](e,t,r){ue(e).set({removeServerShareError:null})},[$](e,t,r){const n=ue(e),i=e.get("user"),s=(0,C.Id)(e,t);(0,y.SS)((()=>{n.set({isUpdatingFriend:!0,updateFriendError:null})})),new b.c({username:s.get("username")},{server:i.server}).save().done((()=>{n.set({isUpdatingFriend:!1}),r((0,w.QD)()),r((0,w.QF)()),r((0,w.AT)())})).fail((e=>{n.set({isUpdatingFriend:!1,updateFriendError:(0,m.c)(e,(0,g.c)("Failed to add to Plex Home"),"status")})}))}})},19572:(e,t,r)=>{"use strict";r.d(t,{VU:()=>w,gx:()=>S,y0:()=>v,kT:()=>f,op:()=>b,_Q:()=>I,ew:()=>P});var n=r(37588),i=r.n(n),s=r(55340),a=r(89448),o=r(59396),c=r(82852);const l=function(e,t){const r=e.get("cloudServer");return i().ajax(r.getXHROptions(`/api/v2/pins/${t}`,{dataType:"json"})).promise().then((e=>e))};var d=r(69012);const u="user/authCodeExchange/readStoredPIN",p="user/authCodeExchange/preloadPIN",m="user/authCodeExchange/resetAuthCodeExchange",h="user/authCodeExchange/beginPolling",y="user/authCodeExchange/stopPolling",g="user/authCodeExchange/skipSignIn",f=(0,s.c)(u),v=(0,s.c)(p),b=(0,s.c)(m),S=(0,s.c)(h),P=(0,s.c)(y),I=(0,s.c)(g);function E(e,t){const r=(0,c.c)(e);return r.set({isBusy:!0}),(0,d.c)(e).then((({id:e,code:n,expiresIn:i})=>{const s=window.setTimeout((()=>{t(P())}),1e3*i);r.set({code:n,pinID:e,pinTimeout:s,isBusy:!1})})).fail((()=>{r.set({fatalErrorMessage:(0,o.c)("An error occurred"),isBusy:!1})}))}const w={[m](e,t,r){const n=(0,c.c)(e);(0,a.SS)((()=>{n.set({code:null,pinID:null,authToken:null,errorMessage:null})}))},[u](e,t,r){const n=(0,c.c)(e),s=n.get("pinIDInitial"),a=(s?i().Deferred().resolve(s).promise():i().Deferred().reject().promise()).then((()=>l(e,s).fail((()=>{n.set({errorMessage:(0,o.c)("There was an error signing in")})})))).then((({authToken:e})=>e?i().Deferred().resolve(e).promise():(n.set({errorMessage:(0,o.c)("There was an error signing in")}),i().Deferred().reject().promise()))).then((e=>{n.set({authToken:e})}));t.shouldCreatePIN&&a.fail((()=>E(e,r)))},[p](e,t,r){(0,c.c)(e).set({isBusy:!0,code:null,pinID:null}),E(e,r)},[h]:function(e,t,r){const{pinID:n}=t,i=(0,c.c)(e);function s(){const t=i.get("pinID");n===t&&l(e,n).then((({authToken:e})=>{e?i.set({authToken:e}):a()})).fail((e=>{i.set({code:null,pinID:null,isBusy:!1,fatalErrorMessage:e&&404===e.status?null:(0,o.c)("An error occurred")})}))}function a(){window.setTimeout(s,2e3)}a()},[y](e,t,r){const n=(0,c.c)(e),i=n.get("pinTimeout");i&&window.clearTimeout(i),n.set({pinID:null,pinTimeout:null,code:null})},[g](e,t,r){e.set({skipSignIn:!0})}}},22716:(e,t,r)=>{"use strict";r.d(t,{ML:()=>h,QN:()=>y});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(46235),c=r(43876),l=r(55340),d=r(36772),u=r(31881),p=r(21248);const m="user/signIn/signInWithAuthToken",h=(0,l.c)(m),y={[m](e,t,r){const{authToken:n,onSignInSuccess:s}=t,l=e.get("user");l.get("isSignedIn")&&l.get("authToken")!==n?c.c.execute("resetUser").then((()=>o.c.set("myPlexAccessToken",n))).then((()=>window.location.reload())):function(e,{authToken:t,onSignInSuccess:r}){const n=e.get("cloudServer"),s=e.get("user");i().ajax(n.getXHROptions(a().result(s,"url"),{headers:{"X-Plex-Token":t}})).then((e=>s.signIn(e))).then((()=>{r&&r()})).fail((e=>{const t=(0,d.c)(e);p.c.trigger("show:alert",{message:(0,u.c)(t)})}))}(e,{authToken:n,onSignInSuccess:s})}}},81764:(e,t,r)=>{"use strict";r.d(t,{mA:()=>vt,uE:()=>st,lV:()=>St,iY:()=>Ye,Wk:()=>nt,mw:()=>ot,Kg:()=>Mt,S6:()=>yt,Ks:()=>dt,MB:()=>Xe,A$:()=>ut,QD:()=>Je,UJ:()=>gt,k9:()=>jt,uU:()=>tt,QF:()=>ft,u6:()=>Lt,Af:()=>it,cF:()=>Et,Nl:()=>It,AN:()=>et,GC:()=>Ze,Mp:()=>bt,y0:()=>mt,An:()=>pt,kn:()=>ct,u0:()=>Ot,sL:()=>at,B$:()=>Nt,AF:()=>xt,ML:()=>kt,Kc:()=>Rt,Ix:()=>At,iU:()=>Ct,AT:()=>Pt,_K:()=>lt,i4:()=>Dt,zD:()=>Tt,oZ:()=>ht,eg:()=>wt,YL:()=>rt,Qn:()=>Wt});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(99112),l=r(13778),d=r(55340),u=r(60352),p=r(52108),m=r(72528),h=r(39036),y=r(59740),g=r(66780),f=r(95188),v=r(56960),b=r(37660),S=r(35860),P=r(94484);const I=[7,30,60,90];function E(e=0){return(0,P.c)(Date.now(),I[e]||180)}var w=r(21248),C=r(51100),O=r(38828);function M(e){return e.isCloud?"online":e.isFullOwnedServer?"owned":"shared"}function T(e){return e.isConnected?"online":"offline"}var D=r(41192);var k=r(33040),x=r(47840),A=r(86616),R=r(58036),N=r(89448),L=r(59396),j=r(96504),U=r(41064),F=r(70432),V=r(28792),_=r(87392),W=r.n(_),B=r(15208);const H=function(e,t){const r=e.server.getXHROptions(a().result(e,"url"),{method:"POST",dataType:"json",data:W().stringify({urls:t},{arrayFormat:"brackets"})||"urls="});return(0,B.c)(i().ajax(r),400).then((t=>{e.reset(t)}),(e=>i().Deferred().reject(e.status&&e.responseJSON.errors||[]).promise()))};var z=r(45564),G=r(1692),q=r(11420),K=r(94368),Q=Object.defineProperty,$=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,te=(e,t)=>{for(var r in t||(t={}))J.call(t,r)&&ee(e,r,t[r]);if(X)for(var r of X(t))Z.call(t,r)&&ee(e,r,t[r]);return e},re=(e,t)=>$(e,Y(t));const ne="user/changePreferredServer",ie="user/fetchAllFriends",se="user/populateAllFriends",ae="user/fetchHomeUsers",oe="user/populateHomeUsers",ce="user/fetchPlans",le="user/populatePlans",de="user/updateUser",ue="user/clearUpdateUserError",pe="user/fetchWebhooks",me="user/addWebhook",he="user/replaceWebhook",ye="user/clearUpdateWebhookError",ge="user/removeWebhook",fe="user/startFirstRunExperience",ve="user/endFirstRunExperience",be="user/fetchHomeDetails",Se="user/removeHomeUser",Pe="user/removeFriend",Ie="user/toggleGuestUser",Ee="user/editHomeUserPIN",we="user/fetchInvites",Ce="user/fetchSentInvites",Oe="user/acceptInvite",Me="user/rejectInvite",Te="user/cancelInvite",De="user/showNewHomeWarnings",ke="user/pinSources",xe="user/pinDiscoverSources",Ae="user/unpinSources",Re="user/setupSources",Ne="user/reorderPinnedSources",Le="user/updatePinnedSources",je="user/dismissUpsellModal",Ue="user/dismissWhatsNewFeature",Fe="user/saveSetting",Ve="user/syncSettings",_e="user/syncExperienceSettings",We="user/restoreDefaultExperienceSettings",Be="user/restoreCustomizationSettings",He="user/setTwoFactorEnabled",ze="user/setReminder",Ge="user/removeReminder",qe="user/resetReminders",Ke="user/fetch",Qe="user/fetchOptOuts",$e="user/populateOptOuts",Ye=(0,d.c)(ne),Xe=(0,d.c)(ie),Je=(0,d.c)(ae),Ze=(0,d.c)(oe),et=(0,d.c)(se),tt=(0,d.c)(ce),rt=((0,d.c)(le),(0,d.c)(de)),nt=(0,d.c)(ue),it=(0,d.c)(pe),st=(0,d.c)(me),at=(0,d.c)(he),ot=(0,d.c)(ye),ct=(0,d.c)(ge),lt=(0,d.c)(fe),dt=(0,d.c)(ve),ut=(0,d.c)(be),pt=(0,d.c)(Se),mt=(0,d.c)(Pe),ht=(0,d.c)(Ie),yt=(0,d.c)(Ee),gt=(0,d.c)(we),ft=(0,d.c)(Ce),vt=(0,d.c)(Oe),bt=(0,d.c)(Me),St=(0,d.c)(Te),Pt=(0,d.c)(De),It=(0,d.c)(ke),Et=(0,d.c)(xe),wt=(0,d.c)(Ae),Ct=(0,d.c)(Re),Ot=(0,d.c)(Ne),Mt=((0,d.c)(Le),(0,d.c)(je)),Tt=((0,d.c)(Ue),(0,d.c)(Fe),(0,d.c)(Ve)),Dt=(0,d.c)(_e),kt=(0,d.c)(We),xt=(0,d.c)(Be),At=(0,d.c)(He),Rt=(0,d.c)(ze),Nt=((0,d.c)(Ge),(0,d.c)(qe)),Lt=(0,d.c)(Ke),jt=(0,d.c)(Qe);function Ut(e,t){if(!e.get("isSignedIn")||!c.c.allowSyncSettings)return i().Deferred().resolve().promise();const r=Array.isArray(t)?t:[t],n=j.c.join("/api/v2/user/settings",{sharedSettings:(0,U.c)(e)?1:0}),s=e.server.getXHROptions(n,{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({value:JSON.stringify(r)})});return i().ajax(s).promise()}function Ft(e,t){if(!e)return null;const r=e.find((e=>e.id===t));return r&&r.updatedAt}function Vt(e){return e.get("user")}function _t(e){return e.get("user").get("experienceSettings").get("sidebarSettings")}(0,d.c)($e);const Wt={[m.Su]:m.Qn[m.Su],[m.U$]:m.Qn[m.U$],[m.El]:m.Qn[m.El],[m.W0]:m.Qn[m.W0],[m.iu]:m.Qn[m.iu],[m.cP]:m.Qn[m.cP],[m.wN](e){(0,N.SS)((()=>{e.get("user").set("lockState",G.Z9.Locked)}))},[ne](e,t,r){const{machineIdentifier:n}=t,i=function(e){return e.get("user").get("experienceSettings").get("homeSettings")}(e);i.set("preferredServerID",n),function(e,t){const r=e.get("user").get("experienceSettings").get("homeSettings");r.set("settingsKey",(0,h.c)()),t((0,m.SI)({homeSettings:r}))}(e,r)},[ie]:(0,u.c)({key:"allFriends",getModel:Vt}),[se]:(0,p.c)({key:"allFriends",fetchActionCreator:Xe,getModel:Vt}),[ae]:(0,u.c)({key:"homeUsers",getModel:R.mw}),[oe]:(0,u.c)({key:"homeUsers",fetchActionCreator:Je,getModel:R.mw}),[ce]:(0,u.c)({key:"plans",getModel:R.mw}),[le]:(0,p.c)({key:"plans",fetchActionCreator:tt,getModel:R.mw}),[ue](e){(0,R.mw)(e).set("updateUserError",null)},[de](e,t,r){const n=(0,R.mw)(e),s=e.get("user"),o=t,{avatar:c}=o,l=((e,t)=>{var r={};for(var n in e)J.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&X)for(var n of X(e))t.indexOf(n)<0&&Z.call(e,n)&&(r[n]=e[n]);return r})(o,["avatar"]);let d;if(n.set({isUpdatingUser:!0,updateUserError:null}),c)d=(0,V.c)(c);else{const e=new window.FormData;a().each(l,((t,r)=>{e.append(r,t)}));const t=a().result(s,"url"),r=null!=l.experimentalFeatures?j.c.join([t,"settings","experimental_features"],{opt_in:l.experimentalFeatures}):t,n=s.server.getXHROptions(r,{type:"PUT",processData:!1,contentType:!1,data:null!=l.experimentalFeatures?void 0:e});d=i().ajax(n)}d.done((e=>{!t.avatar&&s.get("hasPassword")||s.fetch();const r=a().reduce(t,((e,t,r)=>(s.hasAttr(r)&&(e[r]=t),e)),{});s.set(r),n.set({isUpdatingUser:!1,updateUserError:null})})).fail((e=>{const t=k.c.parseXML(e.responseText),r=Array.isArray(t)&&t||(Array.isArray(t.error)?t.error:[t.error]),i=a().mapObject(a().groupBy(r,(e=>e&&e.field?e.field:"request")),((e,t)=>a().flatten(e)));n.set({isUpdatingUser:!1,updateUserError:i})}))},[pe]:(0,u.c)({key:"webhooks",getModel:R.mw}),[me](e){const t=(0,R.mw)(e);t.get("webhooks").add({}),t.set("updateWebhooksError",null)},[he](e,{oldUrl:t,newUrl:r}){const n=(0,R.mw)(e),i=n.get("webhooks");if(i.findWhere({url:t})){const e=i.map((e=>{const n=e.get("url");return n===t?r:n}));n.set({isUpdatingWebhooks:!0,updateWebhooksError:null}),H(i,e).always((()=>{n.set("isUpdatingWebhooks",!1)})).fail((e=>{n.set("updateWebhooksError",e[0])}))}},[ye](e){(0,R.mw)(e).set("updateWebhooksError",null)},[ge](e,t){const r=(0,R.mw)(e),n=r.get("webhooks");if(!t){const e=n.filter((e=>e.get("url")!==t));return void n.reset(e)}r.set({isRemovingWebhooks:!0,updateWebhooksError:null});const i=n.map((e=>e.get("url"))).filter((e=>e!==t));H(n,i).always((()=>{r.set("isRemovingWebhooks",!1)})).fail((e=>{r.set("updateWebhooksError",e[0])}))},[fe](e,t={},r){window.setTimeout((()=>{r((0,l.IB)({replace:!0,pathname:"/client-setup"}))}),0)},[ve](e,t){const{preferredServerEntityID:r}=t;if(r){!function(e,t=!0){(0,o.WI)("metrics").trackEvent({event:f.Wi,interaction:t,properties:{page:v.ac,action:g.Ci,serverType:(0,D.c)(e),status:T(e),firstRun:!0}})}((0,R.Ww)(e,{serverEntityID:r}).toJSON(),t.preferredServerInteraction)}window.setTimeout((()=>{(0,q.c)("home",{},!0)}),0)},[be](e){const t=(0,R.mw)(e),r=t.get("homeDetails");t.set("isHomeDetailsPending",!0),r.fetch().then((()=>{t.set({isHomeDetailsPending:!1,isHomeDetailsPopulated:!0,homeDetailsError:null})}),((e,r)=>{const n={isHomeDetailsPending:!1};404===r.status?(n.isHomeDetailsPopulated=!0,n.homeDetailsError=null):(n.isHomeDetailsPopulated=!1,n.homeDetailsError=r),t.set(n)}))},[Se](e,t,r){const n=e.get("user"),s=(0,R.mw)(e),a=s.get("homeUsers"),o=n.get("homeUsers"),c=n.get("allFriends"),l=(0,z.sz)(e,t),d=n.id===l.id;(0,N.SS)((()=>{l.set("isRemoving",!0)}));const u=l.server.getXHROptions(l.url(),{type:"DELETE"});i().ajax(u).then((()=>{const e=c.get(l.id);d?(a.reset([l]),l.set("admin",!0)):a.remove(l),e?l.get("restricted")?c.remove(e):e.set("home",!1):d&&c.each((e=>{e.set("home",!1)}));const t=!!n.get("pin")||a.length>1;if(n.set("home",t),!t){const e=s.get("homeDetails"),t=n.get("homeDetails");e.restoreDefaults(),t.restoreDefaults()}o.fetch(),l.set("isRemoving",!1)}),(()=>{r((0,y._K)({type:"error",message:d?(0,L.c)("There was a problem leaving this home."):(0,L.c)("There was a problem removing this user.")})),l.set({isRemoving:!1})}))},[Pe](e,t,r){const n=e.get("user"),s=(0,R.mw)(e),a=s.get("homeUsers"),o=n.get("allFriends"),c=n.get("homeUsers"),l=(0,z.Id)(e,t);(0,N.SS)((()=>{l.set("isRemoving",!0)}));const d=j.c.join(["/api/v2/friends",l.id]),u=l.server.getXHROptions(d,{type:"DELETE"});i().ajax(u).then((()=>{const e=l.get("home");s.get("invites").fetch(),s.get("sentInvites").fetch(),e&&(a.fetch(),c.fetch()),l.get("serverShares").some((e=>!e.owned))&&w.c.trigger("discover:servers"),l.set({isRemoving:!1}),o.remove(l)}),(()=>{r((0,y._K)({type:"error",message:(0,L.c)("There was a problem removing this friend.")})),l.set({isRemoving:!1})}))},[Ie](e,t,r){const n=e.get("user"),s=(0,R.mw)(e),a=n.get("homeSize"),o=s.get("homeDetails"),c=s.get("homeUsers"),l=n.get("allFriends"),d=n.get("homeDetails"),u=n.get("homeUsers"),p=!o.get("guestEnabled");o.set("isTogglingGuestUser",!0);const m=j.c.join("/api/home",{guestEnabled:p?1:0}),h=p&&1===a,g=n.server.getXHROptions(m,{type:h?"POST":"PUT"});i().ajax(g).then((()=>{c.fetch(),l.fetch(),u.fetch(),p||2!==a?(d.set("guestEnabled",p),o.set({guestEnabled:p,isTogglingGuestUser:!1}),h&&n.set("home",!0)):(d.clear(),o.clear(),n.set("home",!1))}),(e=>{const t=p?(0,L.c)("Unable to enable guest account"):(0,L.c)("Unable to disable guest account"),n=(0,C.c)(e,t,"status");r((0,y._K)({type:"error",message:n})),o.set("isTogglingGuestUser",!1)}))},[Ee](e,t){const r=(0,z.sz)(e,t),n=new K.c({model:r,isEditing:!0});w.c.trigger("show:modal",n),n.promise.then((e=>{r.set("protected",!!e)}))},[we]:(0,u.c)({key:"invites",getModel:R.mw}),[Ce]:(0,u.c)({key:"sentInvites",getModel:R.mw}),[Oe](e,t,r){const n=e.get("user"),s=(0,R.mw)(e),a=s.get("invites"),o=a.get(t.inviteID),c=s.get("homeUsers").get(n.id),l=n.get("homeUsers");o.set("isAccepting",!0);const d=c.get("protected"),u=o.get("home")&&!d?function(e){const t=new K.c({model:e,isEditing:!0,isEditWarning:!0});return w.c.trigger("show:modal",t),(0,x.c)(t.promise)}(c):i().Deferred().resolve().promise();u.then((()=>o.save(null,{force:!0}))).then((()=>{a.remove(o),l.fetch(),r(Je()),r(Xe()),r(ft()),o.get("server")&&w.c.trigger("discover:servers")}),(e=>{o.set("isAccepting",!1),r((0,y._K)({type:"error",message:(0,L.c)("There was a problem accepting this invite.")}))}))},[Me](e,t,r){const n=(0,R.mw)(e).get("invites"),s=n.get(t.inviteID);s.set("isRemoving",!0);const a=s.server.getXHROptions(s.url(),{type:"DELETE"});i().ajax(a).then((()=>{n.remove(s),s.get("server")&&r(Xe())}),(()=>{s.set("isRemoving",!1),r((0,y._K)({type:"error",message:(0,L.c)("There was a problem rejecting this invite.")}))}))},[Te](e,t,r){const n=(0,R.mw)(e).get("sentInvites"),s=n.get(t.inviteID);s.set("isRemoving",!0);const a=s.server.getXHROptions(s.url(),{type:"DELETE"});i().ajax(a).then((()=>{n.remove(s),s.get("server")&&r(Xe())}),(()=>{s.set("isRemoving",!1),r((0,y._K)({type:"error",message:(0,L.c)("There was a problem canceling this invite.")}))}))},[De](e,t,r){const n=e.get("user"),i=(0,R.mw)(e).get("homeUsers"),s=i.get(n.id);if(s.get("protected")||i.length>1)return;const a=new K.c({model:s,isEditing:!0,isEditWarning:!0});w.c.trigger("show:modal",a)},[Re](e,t,r){const n=_t(e),i=n.get("pinnedSources"),{sources:s=[]}=t;n.get("hasCompletedSetup")||n.set("hasCompletedSetup",!0);const a=s.map(A.c);i.reset(a),r((0,m.SI)({sidebarSettings:n})),a.forEach((e=>{(0,o.WI)("metrics").trackEvent({event:f.Wi,interaction:!0,identifier:e.providerIdentifier,properties:{page:v.op,action:g.In,type:e.sourceType,serverType:M(e),firstRun:!0}})}))},[ke](e,t,r){const n=_t(e),i=n.get("pinnedSources"),{sources:s=[],interaction:a=!0}=t,c=s.map(A.c);i.add(c),r((0,m.SI)({sidebarSettings:n})),c.forEach((e=>{(0,o.WI)("metrics").trackEvent({event:f.Wi,interaction:a,identifier:e.providerIdentifier,properties:{page:v.gh,action:g.In,type:e.sourceType,serverType:M(e),firstRun:!1}})}))},[xe](e,t,r){const n=_t(e),i=n.get("pinnedSources"),{sources:s=[]}=t,a=s.map(A.c),{homeSources:c,watchlistSources:l}=a.reduce(((e,t)=>(t.directoryID===b.qU?e.homeSources.push(t):t.directoryID===b._w&&e.watchlistSources.push(t),e)),{homeSources:[],watchlistSources:[]});if(c.length){const{vodIndex:e,cloudEPGIndex:t,lastCloudSourceIndex:r}=i.reduce(((e,t,r)=>t.get("isCloud")?(r>e.lastCloudSourceIndex&&(e.lastCloudSourceIndex=r),S._u(t.get("providerIdentifier"),S.Sg)&&(e.vodIndex=r),S._u(t.get("providerIdentifier"),S.$9)&&(e.cloudEPGIndex=r),e):e),{vodIndex:-1,cloudEPGIndex:-1,lastCloudSourceIndex:-1}),n=Math.max(e,t),s=n>-1?n:Math.max(r,i.length-1);i.add(c,{at:s+1})}l.length&&i.add(l,{at:0}),r((0,m.SI)({sidebarSettings:n})),a.forEach((e=>{(0,o.WI)("metrics").trackEvent({event:f.Wi,interaction:!0,identifier:e.providerIdentifier,properties:{page:v.Ib,action:g.In,type:e.sourceType,serverType:M(e)}})}))},[Ae](e,t,r){const n=_t(e),i=n.get("pinnedSources"),{sources:s=[]}=t,a=s.map((e=>i.get(e.key)));i.remove(a),r((0,m.SI)({sidebarSettings:n})),s.forEach((e=>{(0,o.WI)("metrics").trackEvent({event:f.Wi,interaction:!0,identifier:e.providerIdentifier,properties:{page:v.gh,action:g.Cc,type:e.sourceType,serverType:M(e),firstRun:!1}})}))},[Ne](e,t,r){const n=_t(e),i=n.get("pinnedSources"),s=t.sourceKeys.map((e=>i.get(e)));i.reset(s),r((0,m.SI)({sidebarSettings:n})),(0,o.WI)("metrics").trackEvent({event:f.Wi,interaction:!0,properties:{page:v.gh,action:g.WS}})},[Le](e,t,r){const{sourceKeys:n,pinnedSourceAttrs:i}=t,s=_t(e),a=s.get("pinnedSources");n.forEach((e=>{const t=a.get(e);t&&t.set(i)})),r((0,m.SI)({sidebarSettings:s}))},[je](e,t,r){const n=e.get("user").get("experienceSettings").get("dismissedUpsellModals"),{dismissedModal:i}=t;n.includes(i)||r((0,m.SI)({dismissedUpsellModals:[...n,i]}))},[Ue](e,t,r){const n=e.get("user").get("experienceSettings").get("dismissedWhatsNewFeatures"),{dismissedFeature:i}=t;n[i]||r((0,m.SI)({dismissedWhatsNewFeatures:re(te({},n),{[i]:!0})}))},[Fe](e,t,r){e.get("user").get("settings").get(t.id).set({value:t.value,isDirty:!0}),r(Tt([t.id]))},[Ve](e,t){const r=e.get("user"),n=r.get("settings");Ut(r,t.map((e=>n.get(e).toJSON({syncedOnly:!0})))).then((e=>{t.forEach((t=>{const r=n.get(t),i=Ft(e,t);i&&r.set({updatedAt:i,isDirty:!1})}))}))},[m.uA](e,t,r){e.get("user").get("experienceSettings").set(re(te({},t),{isDirty:!0})),r(Dt())},[_e](e){const t=e.get("user"),r=t.get("experienceSettings"),n=r.toJSON({excluded:["updatedAt"],syncedOnly:!0,excludeDefaults:!0});r.set({isSaving:!0,saveError:null}),Ut(t,{id:F.M,type:"json",value:JSON.stringify(n),hidden:!0}).then((e=>{const t=Ft(e,F.M),n={isSaving:!1};t&&(n.updatedAt=t,n.isDirty=!1),r.set(n)}),(()=>{r.set({isSaving:!1,saveError:{message:(0,L.c)("An error occurred while syncing settings")}})}))},[We](e,t,r){const n=e.get("user").get("experienceSettings"),i={showAdvancedSettings:n.get("showAdvancedSettings"),isDirty:!0};n.restoreDefaults(i),r(Dt())},[Be](e,t,r){const n=e.get("user").get("experienceSettings");n.set("autoHomeHubsEnabled",!0),n.get("homeSettings").restoreDefaults(),n.get("sidebarSettings").restoreDefaults(),r(Dt())},[He](e,{twoFactorEnabled:t},r){e.get("user").set({twoFactorEnabled:t})},[ze](e,t,r){const n=e.get("user").get("experienceSettings"),{id:i,data:s,remindAfter:a}=t,o=n.get("reminders"),c=o.get(i),l=c?c.get("times")+1:0;o.add({data:s,id:i,times:l,remindAfter:(a||E(l)).toISOString()},{merge:!0}),r((0,m.SI)())},[Ge](e,t,r){e.get("user").get("experienceSettings").get("reminders").remove(t.id),r((0,m.SI)())},[qe](e,t,r){const n=e.get("user").get("experienceSettings").get("reminders");(0,O.c)(`[User] Removing ${n.length} reminders`),n.clear(),r((0,m.SI)())},[Ke](e,t,r){e.get("user").fetch()},[Qe]:(0,u.c)({key:"optOuts",getModel:Vt}),[$e]:(0,p.c)({key:"optOuts",fetchActionCreator:jt,getModel:Vt})}},26312:(e,t,r)=>{"use strict";r.d(t,{qK:()=>x,MT:()=>L,CQ:()=>A,QC:()=>N,e4:()=>R,cj:()=>U,O6:()=>k,sN:()=>j,O8:()=>V});var n=r(52180),i=r(14224),s=r(55340),a=r(37588),o=r.n(a),c=r(79032),l=r(84833);var d=r(14424),u=r(95188),p=r(35860),m=r(38828),h=r(85976),y=r(69956),g=r(59396),f=r(6084),v=r(74003),b=r(45564),S=r(29320),P=r(17544);const I="watchTogetherRooms/tryUpdateRooms",E="watchTogetherRooms/createRoom",w="watchTogetherRooms/inviteUsers",C="watchTogetherRooms/resetCreateRoom",O="watchTogetherRooms/populateMetadataItem",M="watchTogetherRooms/deleteRoom",T="watchTogetherRooms/roomsUpdated",D="watchTogetherRooms/updateRooms",k=((0,s.c)("watchTogetherRooms/initialize"),(0,s.c)(I)),x=(0,s.c)(E),A=(0,s.c)(w),R=(0,s.c)(C),N=(0,s.c)(O),L=(0,s.c)(M),j=(0,s.c)(D),U=(0,s.c)(T);function F(e){return e.get("ui").get("watchTogether")}const V={[I](e,t,r){const i=(0,n.WI)("watchTogetherRoomsManager").getRoomsClient();!1===(null==i?void 0:i.isOpen)&&r(j())},[D](e,t,r){const i=(0,n.WI)("watchTogetherRoomsManager").getRoomsClient(),s=F(e);s.set({isRoomsPending:!0,isRoomsPopulated:!1}),i.rooms().then((e=>{r(U({rooms:e}))}),(e=>{m.c.warn("[Watch Together] Unable to fetch rooms:",e),s.set({roomsError:(0,g.c)("Unable to retrieve Watch Together rooms."),isRoomsPending:!1,isRoomsPopulated:!1})}))},[T](e,t,r){const n=F(e),i=n.get("rooms");i.set(t.rooms,{parse:!0}),n.set({isRoomsPending:!1,isRoomsPopulated:!0});const s=n.get("session");if(s){const e=i.get(s.get("roomID"));if(e){const t=e.get("users");s.get("users").forEach((e=>{const r=t.get(e.get("id"));!r||e.get("thumb")&&e.get("title")||e.set({thumb:e.get("thumb")||r.get("thumb"),title:e.get("title")||r.get("title")})}))}}},[E](e,t,r){const i=F(e),s=(0,b.oH)(e,t),a=s.get("sourceURI"),o=(0,P.c)(s.toJSON()),{userIDs:c}=t,l=(0,n.WI)("watchTogetherRoomsManager").getRoomsClient();i.set({isInvitePending:!0,isInviteCompleted:!1,inviteError:null}),l.createRoom(a,o,c).then((e=>{(0,n.WI)("metrics").trackEvent({event:u.OG,interaction:!0,properties:{itemCount:c.length+1,playbackSessionId:e}});const t=i.get("rooms").get(e);i.set({isInvitePending:!1,isInviteCompleted:!0}),t.set({isMetadataItemPending:!1,isMetadataItemPopulated:!0,metadataItem:s}),i.get("session")||r((0,v.G)({watchTogetherRoomEntityID:t.entityID()}))})).catch((e=>{m.c.warn("[Watch Together] An error occurred while creating a room:",e),i.set({isInvitePending:!1,inviteError:(0,g.c)("Unable to send invite. Please try again.")})}))},[w](e,t){const r=F(e),i=(0,b.wz)(e,t),s=(0,n.WI)("watchTogetherRoomsManager").getRoomsClient();r.set({isInvitePending:!0,isInviteCompleted:!1,inviteError:null}),s.inviteUsers(i.get("id"),t.userIDs).then((()=>{r.set({isInvitePending:!1,isInviteCompleted:!0})})).catch((e=>{m.c.warn("[Watch Together] An error occurred while inviting users:",e),r.set({isInvitePending:!1,inviteError:(0,g.c)("Unable to send invite. Please try again.")})}))},[C](e){F(e).set({isInvitePending:!1,isInviteCompleted:!1,inviteError:null})},[O](e,t){const r=(0,b.wz)(e,t);if(r.get("isMetadataItemPopulated"))return;const n=r.get("sourceUri"),{key:s,serverIdentifier:a,providerIdentifier:u}=(0,y.c)(n),m=(0,h.c)({providerIdentifier:u,serverIdentifier:a}),v=function(e,t){const{key:r,providerIdentifier:n,serverIdentifier:i}=(0,y.c)(t),s=e.get("entities").get(f.Qv).findWhere((e=>{const t=null==e?void 0:e.get("model");return t&&t.server&&t.provider&&t.server.get("machineIdentifier")===i&&t.provider.get("identifier")===n&&t.get("key")===r}));return null==s?void 0:s.get("model")}(e,n);let P;if(r.set({isMetadataItemPending:!0,metadataItemError:null}),v)P=Promise.resolve(v);else{const t=e.get("servers").findWhere({machineIdentifier:a}),r=(null==t?void 0:t.get("isCloud"))?(0,b.s7)(e):t;P=r?(0,S.c)((I=r.get("providers"),E={identifier:u},function(e,t){return e.findWhere(t)?o().Deferred().resolve(e).promise():(0,c.c)({eventSource:e,events:["add"],predicate:()=>!!e.findWhere(t)})}(I,E).then((e=>(0,l.c)(e.findWhere(E))),(()=>o().Deferred().reject().promise())))).then((e=>{const r=new i.c({key:s,source:m},{server:t,provider:e});return(0,S.c)((0,d.c)(r)).then((()=>r))})):Promise.reject(new Error("Cannot populate from unknown server"))}var I,E;P.then((e=>{const t=!e.get("key")&&p._u(u,[p.Sg])?{isMetadataItemPending:!1,isMetadataItemPopulated:!1,metadataItemError:(0,g.c)("This item is not available in your region.")}:{isMetadataItemPending:!1,isMetadataItemPopulated:!0,metadataItem:e};r.set(t)}),(e=>{const t=null==e?void 0:e.server,n=(null==t?void 0:t.get("isConnected"))||(null==t?void 0:t.get("isUnauthorized"))?(0,g.c)("You dont have access to this item. Ask the owner to share it with you."):(0,g.c)("The server is unreachable.");r.set({isMetadataItemPending:!1,isMetadataItemPopulated:!1,metadataItemError:n})}))},[M](e,t){const r=(0,b.wz)(e,t);(0,n.WI)("watchTogetherRoomsManager").getRoomsClient().deleteRoom(r.get("id")).catch((e=>{m.c.warn("[Watch Together] An error occurred while deleting a room:",e)}))}}},95808:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(57864),i=r(4659),s=r(83095),a=r(65348),o=r(19264),c=r(51988);function l(){return(0,n.M3)((0,i.c)(),a.c,s.c,o.c,((e,t,r,n)=>(0,c.cp)({server:t,provider:r,stableUser:n,metadataItem:e})))}},3960:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(57864),i=r(4659),s=r(83095),a=r(65348),o=r(12612),c=r(61240),l=r(96504),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};let g,f;var v=r(39172);function b(){return(0,n.M3)(((e,{containerKey:t})=>t),((e,{containerTitle:t})=>t),((e,{metricsContext:t})=>t),(0,i.c)(),a.c,s.c,(0,n.M3)((0,i.c)(),(e=>{if(e&&!e.skipDetails&&!e.isExtra&&!e.radio&&e.type!==o.Ww&&e.type!==o.YH)return e.type===o.UJ?e.skipParent?e.grandparentKey:e.parentKey:e.key})),((e,t,r,n={},i,s,a)=>{if(n.isFolder){const i=e.match(/(.*?)\/folder/)[1],s={key:`${i}/all`,typeKey:`${i}/folder`,folderKey:a,folderTitle:n.title,parentFolderKey:e,parentFolderTitle:t};return r&&(s.context=r),function(e,t=window.location.hash){const r=function(e){if(g===e)return f;const t=e.split("?"),r=t.length>1?t[1]:void 0,n=r?l.c.parseParams(r):{};return g=e,f={url:t[0],params:n},f}(t),n={type:void 0,typeKey:e.typeKey,filters:(0,c.c)(e.filters),limit:e.limit,filterLabel:e.filterLabel,customFilter:e.customFilter?1:void 0,sort:e.sort,folderKey:e.folderKey,folderTitle:e.folderTitle,parentFolderKey:e.parentFolderKey,parentFolderTitle:e.parentFolderTitle,save:1};return n.customFilter||(n.playlistID=void 0,n.playlistTitle=void 0),l.c.join(r.url,y(y({},r.params),n))}(s)}const d={};return r&&(d.context=r),n.type===o.Co&&(d.legacy=1),(0,v.c)(i,s,a,d,n.playlistType)}))}},96568:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(4659),s=r(9940),a=r(29372);function o(){return(0,n.M3)((0,i.c)(),s.c,((e,t)=>!!e&&(0,a.c)(t,e.ratingKey)))}},47744:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(4659),s=r(12612),a=r(49579);function o(){return(0,n.M3)(((e,{listType:t})=>t),(0,i.c)(),((e,t={})=>{const r=t.type;if(r){if(r===s.yy)return s.yy;if(r===s.sl)return s.sl;if(e===a.Ww)return s.Ww;{const e=s.wH(r);return e&&e.mediaType}}}))}},9940:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(95720),s=r.n(i),a=r(95924);let o;const c=(0,n.M3)(a.c,(e=>{const t=s().pluck(e.activeSelectionItems,"id");return o&&s().isEqual(o,t)?o:(o=t,t)}))},95924:(e,t,r)=>{"use strict";function n(e){return e.ui.multiSelect}r.d(t,{c:()=>n})},38595:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(62200);const s=(0,n.M3)(i.c,(e=>e?e.desktop.activities:[]));function a(e){return(0,n.M3)(s,(t=>t.filter((t=>t.type===e))))}},58320:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(12840);function s(){return(0,n.M3)(((e,{serverEntityID:t})=>t),i.c,((e,t)=>!(!e||e!==t)))}},6188:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(47884);function s(){return(0,n.M3)((0,i.c)(),(e=>e.v4.root.core.serverNowPlayingSessions),((e,t)=>{var r;if(!e)return 0;const n=t[e.machineIdentifier],i=null==n?void 0:n.sessionKeys;return null!=(r=null==i?void 0:i.length)?r:0}))}},12840:(e,t,r)=>{"use strict";function n(e){return e.embeddedServer}r.d(t,{c:()=>n})},62200:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(12488),s=r(33808),a=r(12840);const o=(0,i.c)((0,n.M3)(a.c,s.c,((e,t)=>t[e])),(e=>e))},37336:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(13671);const s=(0,n.M3)(i.c,(e=>e.dismissedUnclaimedServers))},12500:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(32516);const s=(0,n.M3)(i.c,(e=>e.timeFormat))},7948:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(12488),i=r(92076),s=r(33808),a=r(43180),o=r(12612),c=r(60752),l=r(83832);const d=(0,n.c)(a.c,s.c,i.c,((e,t,r)=>e.reduce(((e,n)=>{const i=t[n],s=i.providers.map((e=>r[e])),a=(0,c.c)(s,[o.MOVIE,o.M7,o.iI]).map((([e,t])=>{const r=(0,l.c)(i,t);return[e,t,r.hasPlexMusicUpgrade||r.hasPlexMovieUpgrade||r.hasPlexSeriesUpgrade]})).filter((([,,e])=>e));return a.length>0&&a.forEach((([t,r])=>{e.push([i.machineIdentifier,n,t,r])})),e}),[])))},61596:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});const n="auto"},32132:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n={PRODUCTION:"9AC194DC",QA:"4289C4E0",NINJA:"EB90125F",CUSTOM:"custom"};n.settings=[{value:n.PRODUCTION,title:"Production"},{value:n.QA,title:"QA"},{value:n.NINJA,title:"Ninja"},{value:n.CUSTOM,title:"Custom"}];const i=n},60712:(e,t,r)=>{"use strict";r.d(t,{C2:()=>a,C_:()=>i,EN:()=>n,El:()=>s,QT:()=>p,_w:()=>m,ae:()=>u,c1:()=>l,fp:()=>d,wR:()=>c,yi:()=>o});const n="account",i="download-button",s="downloads-page",a="dvr-setup",o="lyrics",c="nav-bar",l="server-setup",d="sonos",u="users-and-sharing",p="webhooks",m="watchlist"},41520:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(76220),i=r(16852),s=r(95008);let a;function o(){return a||(a=(0,s.uG)()&&"windows"===n.c.prop("X-Plex-Platform")?i.Qb:i.MR),a}},42336:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(99112),i=r(42728),s=r(12612);function a(e,t,r,a){if(!(e&&t&&r&&a))return!1;const{type:o,hasInvalidKey:c,deletedAt:l,isFolder:d,isMetadataList:u,firstItemType:p,dvrChannel:m,onAir:h}=a;if(!u&&(c||l||d))return!1;if(!(m||u||t.protocols.stream||h))return!1;if(u&&!p)return!1;const y=!!r[i.WC];if(t.protocols.livetv&&(e.livetv<4||!y))return!1;if(t.protocols.livetv&&!n.c.allowLiveTVPlayback)return!1;if(t.features.playqueue)return!0;const g=u?p:o,f=(0,s.wH)(g),v=(0,s.M5)(g);return g===f.typeString||v.id===f.id}},83620:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(61596);function s(e){var t;const{name:r,description:s}=(null==(t=e.toJSON)?void 0:t.call(e))||e;return r===i.C?(0,n.c)("Auto select device"):s}},83832:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(6996),i=r(42728),s=r(12612);function a(e,t){var r;const a=e.isConnected&&e.isFullOwnedServer&&(null==(r=e.ownerFeatures)?void 0:r.includes(i.AC));return{hasPlexMusicUpgrade:!(!a||!t||t.type!==s.iI||t.agent!==n.mc&&t.agent!==n.CA),hasPlexMovieUpgrade:!(!a||!t||t.type!==s.MOVIE||t.agent!==n.an&&t.agent!==n.go),hasPlexSeriesUpgrade:!(!a||!t||t.type!==s.M7||t.agent!==n.an&&t.agent!==n.YP)}}},73416:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(49716),i=r(68432);const s=function(){return(0,n.c)()||(0,i.c)()}},45564:(e,t,r)=>{"use strict";r.d(t,{AZ:()=>s.AZ,CA:()=>s.CA,Gu:()=>s.Gu,IB:()=>s.IB,Id:()=>s.Id,Ww:()=>s.Ww,cF:()=>s.cF,gZ:()=>o,kj:()=>s.kj,mw:()=>s.mw,oH:()=>s.oH,s7:()=>s.s7,sz:()=>a,wb:()=>s.wb,wz:()=>s.wz});var n=r(10340),i=r(6084),s=r(58036);function a(e,{homeUserEntityID:t}){return(0,n.c)(e,i.q0,t)}function o(e,{playerIdentifier:t}){const r=e.get("user").get("desktop").get("cloudCompanions");for(const e of r.models){const r=e.get("cloudPlayers").findWhere({playerIdentifier:t});if(r)return r}return e.get("companionServer").get("desktop").get("players").findWhere({playerIdentifier:t})}},65026:(e,t,r)=>{"use strict";r.d(t,{_:()=>sQ,c:()=>aQ});var n={};r.r(n),r.d(n,{CENTER:()=>wD,EAST:()=>vD,NORTH:()=>gD,NORTHEAST:()=>fD,NORTHWEST:()=>ED,SOUTH:()=>SD,SOUTHEAST:()=>bD,SOUTHWEST:()=>PD,WEST:()=>ID});var i=r(11504),s=r(27876),a=r(85448),o=r(99112),c=r(84508),l=r(56960),d=r(85052),u=r(4008),p=r(42728),m=r(98352),h=r(3008),y=r(44500),g=r(59396),f=r(75560),v=r(35770),b=r(82228),S=r(29208),P=r(59956),I=r(66984),E=r(16416),w=r(27256),C=r(94644),O=r(23748),M=r(61536),T=r(53952),D=r(86936),k=r(97884),x=r(49828),A=r(92796),R=r(95156),N=Object.defineProperty,L=Object.defineProperties,j=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,W=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&_(e,r,t[r]);if(U)for(var r of U(t))V.call(t,r)&&_(e,r,t[r]);return e},B=(e,t)=>L(e,j(t));const H=(0,b.c)({rowHeight:(0,x.c)("xxxl"),overscan:1,outerPaddingTop:(0,x.c)("m"),outerPaddingLeft:parseInt(R.c.v4PagePadding,10),outerPaddingRight:parseInt(R.c.v4PagePadding,10),innerVerticalPadding:(0,x.c)("xs")});function z(){const{id:e}=(0,a.W4)(),t=(0,s.OY)(),r=(0,P.c)(),{isPopulated:n,details:o,isFriend:l,isSignedInUser:d}=(0,D.c)(),{friends:u,isPopulated:p,totalSize:m,updateFriendStatus:b,getNextPage:x}=(0,T.c)(e),R=(0,i.useMemo)((()=>{if(!o)return;let e="";return e=l?c.FRIEND:l||d?c.SELF:c.NON_FRIEND,e}),[o,l,d]);(0,i.useEffect)((()=>{n&&R&&r({contextTuple:[R,S._Q,S._Q]})}),[R,n,r]);const N=(0,i.useCallback)((()=>{t((0,f.mY)({origin:y.kR}))}),[t]),L=(0,i.useMemo)((()=>e=>i.createElement(v.c,B(W({},e),{updateFriendStatus:b,onPress:N}))),[N,b]);return n&&p?o&&u.length?i.createElement(S.cp,{metricsContextParam:R},i.createElement(I.c,null,i.createElement(A.c,null,i.createElement(h.ye,{align:"left",gap:"m",width:"100%"},i.createElement(M.c,{subtitle:{title:(0,g.c)("Friends")},title:{href:(0,k.c)("userProfile",{id:e}),title:o.displayName||o.username}}))),i.createElement(C.c,{cellComponentFactory:L,items:u,keyPropName:"id",layout:H,scrollDirection:w.y.Vertical,totalSize:m,onPageRequest:x}))):null:i.createElement(E.c,null,i.createElement(O.c,null))}var G=r(3972),q=r(96732),K=r(34992),Q=r(8436),$=r(56632),Y=r(54952),X=r(36048),J=r(97503),Z=r(53636),ee=r(42836),te=r(39864),re=r(32512),ne=r(57512);const ie=ne.m.injectEndpoints({endpoints:e=>({getActivityComments:e.query({query:e=>({document:"\n    query getActivityComments($id: ID!, $first: PaginationInt, $after: String, $last: PaginationInt, $before: String) {\n  activityComments(\n    first: $first\n    after: $after\n    id: $id\n    last: $last\n    before: $before\n  ) {\n    nodes {\n      date\n      id\n      message\n      user {\n        id\n        avatar\n        username\n        displayName\n        isBlocked\n        isMuted\n        isHidden\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n      hasPreviousPage\n      startCursor\n    }\n  }\n}\n    ",variables:e})})})}),{useGetActivityCommentsQuery:se,useLazyGetActivityCommentsQuery:ae}=ie;var oe=r(56784),ce=r(11528),le=r(9192),de=r(19732),ue=r(31760),pe=r(39968),me=r(70684),he=r(34328),ye=r(70456),ge=r(48112),fe=r(1692),ve=r(41744),be=r(50920),Se=r(42152),Pe=r(92432),Ie=r(13778),Ee=r(66780),we=r(24348),Ce=r(37660),Oe=r(35860),Me=r(89064),Te=r(85976),De=r(96504),ke=r(13436),xe=r(59380),Ae=r(34708),Re=r(83672),Ne=r(90068),Le=r(44688),je=r(3544),Ue=r(51304),Fe=r(85712),Ve=r(17464),_e=r(37984),We=r(64156),Be=r(51660),He=r(2024),ze=r(8684),Ge=r(91320),qe=r(77872),Ke=r(912),Qe=r(87396),$e=r(34632),Ye=r(77072),Xe=r(93808),Je=r(46572),Ze=r(32956),et=r(16160),tt=r(19880),rt=r(99524),nt=r(59248),it=r(11096),st=r(77404);function at(e,t,r,n){const i=(0,We.cp)({width:t.portrait.width,height:t.portrait.height,server:r,provider:n,url:(0,st.c)(e,{displayImageType:it.OQ.CoverPoster})}),s=(0,We.cp)({width:t.landscape.width,height:t.landscape.height,server:r,provider:n,url:(0,st.c)(e,{displayImageType:it.OQ.CoverArt})});return!s&&!i||s?{src:s||"",type:$.It.Landscape}:{src:null!=i?i:"",type:$.It.Poster}}var ot=r(73384);function ct({activity:e}){const{details:{uuid:t}}=(0,s.w1)(Je.c),{user:r}=e,n=t===r.id,{metadataItem:a,server:o,provider:c,isPopulated:l,error:d}=(0,ot.c)(e),{src:u,type:p}=at(a,xe.o,o,c),m=(0,i.useMemo)((()=>{const e=r.displayName||r.username;return n?a.type===Xe.WW.Season?(0,g.c)("You reported {season} of {item} on {server}",{season:a.title,item:a.parentTitle,server:o.friendlyName}):(0,g.c)("You reported {item} on {server}",{item:a.title,server:o.friendlyName}):a.type===Xe.WW.Season?(0,g.c)("{name} reported {season} of {item} on {server}",{name:e,season:a.title,item:a.parentTitle,server:o.friendlyName}):(0,g.c)("{name} reported {item} on {server}",{name:e,item:a.title,server:o.friendlyName})}),[n,a.parentTitle,a.title,a.type,o.friendlyName,r.displayName,r.username]),y=(0,i.useMemo)((()=>l||d||!o.isConnected?d||!o.isConnected?i.createElement(h.ye,{align:"center",gap:"s",width:"100%"},e.message?i.createElement(nt.c,{message:e.message}):null,i.createElement(h.YR,{gap:"xs",verticalAlign:"center"},i.createElement(Qe.default,{color:"accent"}),i.createElement(Ye.a,{color:"muted"},(0,g.c)("There's an issue with the server")))):i.createElement(h.ye,{width:"100%"},i.createElement(nt.c,{message:e.message||m})):i.createElement(h.ye,{align:"center",width:"100%"},i.createElement($e.c,null))),[e.message,m,d,l,o.isConnected]);return i.createElement(Ze.c,{provider:c,server:o},i.createElement(rt.c,{activity:e,metadataItem:a}),i.createElement(et.c,{activity:e,imageSrc:u,imageType:p,isPrimary:!1,metadataItem:a},y),i.createElement(tt.c,{activity:e,commentCount:e.commentCount,isDisabled:!!d||!o.isConnected,metadataItem:a}))}var lt=r(36350),dt=r(86728),ut=r(672),pt=r(69604),mt=r(87416),ht=r(42592),yt=r(13100),gt=r(63700),ft=r(86740),vt=r(57473),bt=r(61272),St=r(66484),Pt=r(18012),It=r(34116);function Et(e){const[t,r]=(0,_e.c$)(),n=(0,Pt.c)(t,r,e.key),s=(0,gt.c)(e),a=(0,Ne.c)(e,"key"),o=(0,Ne.c)(e,"parentKey"),c=(0,Ne.c)(e,"grandparentKey"),l=(0,mt.c)({useLongName:!0,episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0}),d=(0,ft.c)(e,n),u=(0,It.c)(e),p=(0,i.useMemo)((()=>e.type===Xe.WW.Episode?c:e.type===Xe.WW.Season?o:a),[c,e.type,o,a]),m=(0,i.useMemo)((()=>{if(e.type===Xe.WW.Episode||e.type===Xe.WW.Season)return a}),[e.type,a]),h=(0,i.useMemo)((()=>e.type===Xe.WW.Episode?e.grandparentTitle:e.type===Xe.WW.Season?e.parentTitle:(0,St.c)(e)),[e]),y=(0,i.useMemo)((()=>{if(e.type===Xe.WW.Episode||e.type===Xe.WW.Season)return(0,St.c)(e)}),[e]),f=(0,i.useMemo)((()=>{switch(e.type){case Xe.WW.Episode:case Xe.WW.Season:return i.createElement(vt.c,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]});case Xe.WW.Show:return i.createElement(vt.c,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]});default:return i.createElement(vt.c,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isRentVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]})}}),[e]),v=(0,i.useMemo)((()=>{if(e.type===Xe.WW.Episode)return[o?i.createElement(ve.c,{key:"parentTitle",color:"inherit",font:"inherit",href:o},e.parentTitle):e.parentTitle,a?i.createElement(ve.c,{key:"grandParentTitle",color:"inherit",font:"inherit",href:a},l):l,d,u?i.createElement(Ye.a,{color:"accent",font:"inherit"},u):void 0]}),[l,e.parentTitle,e.type,o,u,a,d]);return{title:p?i.createElement(ve.c,{href:p},i.createElement(Ye.a,{color:"primary",font:"heading-1"},h)):h,subtitle:m?i.createElement(ve.c,{href:m},i.createElement(Ye.a,{color:"default",font:"heading-2"},y)):y,summary:e.summary,summaryLabelLess:(0,g.c)("Less"),summaryLabelMore:(0,g.c)("More"),starRating:s?i.createElement(bt.g,{metadataItem:e}):void 0,ratings:[e.rating||e.audienceRating?i.createElement(yt.c,{metadataItem:e}):null],buttonBar:f,facts:v,genres:[e.originallyAvailableAt?(0,ut.c)(e.originallyAvailableAt,e.type!==Xe.WW.Episode?"yyyy":void 0):void 0,e.duration?(0,pt.c)(e.duration):void 0,e.contentRating?(0,ht.c)(e.contentRating):void 0]}}var wt=r(49720),Ct=r(26623),Ot=r(66576),Mt=r(5784),Tt=r(28988),Dt=r(61969),kt=r(44696),xt=r(59382),At=r(57864),Rt=r(2100);const Nt=function(e){return(0,At.M3)(Rt.c,(t=>{var r;return null==(r=t.activity.comments[e])?void 0:r.comment}))};var Lt=r(89080),jt=r.n(Lt),Ut=r(58660),Ft=r(98728),Vt=r(93036),_t=r(9868),Wt=r(29164),Bt=r(23300),Ht=r(46844),zt=r(46896),Gt=r(46212),qt=r(25576),Kt=r(53480);const Qt={shimmer:"LoadingActivityCommentItem-shimmer-S0zfw3",poster:"LoadingActivityCommentItem-poster-GQVAec LoadingActivityCommentItem-shimmer-S0zfw3",line:"LoadingActivityCommentItem-line-sVvmBl LoadingActivityCommentItem-shimmer-S0zfw3",title:"LoadingActivityCommentItem-title-zNnDON LoadingActivityCommentItem-shimmer-S0zfw3",date:"LoadingActivityCommentItem-date-PdLCnz LoadingActivityCommentItem-shimmer-S0zfw3"},$t=32;function Yt(){const e=(0,s.w1)(Wt.c);return i.createElement(h.ye,{gap:"m",grow:!0,height:"100%",padding:"m",width:"100%"},i.createElement(h.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},i.createElement("div",{className:Qt.poster},i.createElement(Se.mw,{posterStyle:"circle",width:$t},i.createElement(Bt.c,{server:e,size:$t,url:""}))),i.createElement(h.ye,{gap:"xxs",orientation:"vertical",width:"100%"},i.createElement("div",{className:Qt.title}),i.createElement("div",{className:Qt.date}))),i.createElement(h.ye,{gap:"xs"},i.createElement("div",{className:Qt.line}),i.createElement("div",{className:Qt.line})))}var Xt=r(86868);const Jt=ne.m.injectEndpoints({endpoints:e=>({removeComment:e.mutation({query:e=>({document:"\n    mutation removeComment($input: RemoveCommentInput!) {\n  removeComment(input: $input)\n}\n    ",variables:e})})})}),{useRemoveCommentMutation:Zt}=Jt,er={card:"ActivityCommentItem-card-ipBLw1",border:"ActivityCommentItem-border-SJJtWr"};var tr=Object.defineProperty,rr=Object.defineProperties,nr=Object.getOwnPropertyDescriptors,ir=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,or=(e,t,r)=>t in e?tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cr=(e,t)=>{for(var r in t||(t={}))sr.call(t,r)&&or(e,r,t[r]);if(ir)for(var r of ir(t))ar.call(t,r)&&or(e,r,t[r]);return e},lr=(e,t)=>rr(e,nr(t)),dr=(e,t)=>{var r={};for(var n in e)sr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ir)for(var n of ir(e))t.indexOf(n)<0&&ar.call(e,n)&&(r[n]=e[n]);return r};const ur=32;function pr(e){var t,r=e,{item:n,activityId:a,onCellHeightChange:o,removeComment:c}=r,l=dr(r,["item","activityId","onCellHeightChange","removeComment"]);const d=(0,ze.c)(),u=(0,s.OY)(),p=(0,_t.y)(),m=(0,_t.y)(),{addToast:v}=(0,Pe.Wo)(),b=(0,qt.c)(),[P,{isSuccess:I,isLoading:E,error:w,reset:C}]=Zt(),[O,{isSuccess:M,isLoading:T,error:D,reset:x}]=(0,de.Eh)(),A=I||M,R=E||T,N=w||D,L=b?x:C,j=(0,zt.c)(l),[U,F]=(0,Ht.c)(cr({onCellHeightChange:o},l)),{details:{uuid:V}}=(0,s.w1)(Je.c),_=(0,s.w1)(Wt.c),{data:W}=(0,s.w1)(ce.mk.endpoints.GetUserDetails.select({uuid:null!=(t=null==n?void 0:n.user.id)?t:""}));(0,i.useEffect)((()=>{A&&n&&(c(n.id),m.onClose(),d({action:Ee._c}))}),[A,n,m,c,d]),(0,i.useEffect)((()=>{(null==N?void 0:N.message)&&(v({color:"alert",description:N.message,type:"foreground"}),L(),m.onClose())}),[v,null==N?void 0:N.message,m,L]);const B=(0,i.useCallback)((()=>{n&&(b?O({input:{id:n.id,report:a}}):P({input:{activity:a,id:n.id}}))}),[a,b,n,P,O]),H=(0,i.useCallback)((()=>{m.onClose(),d({action:Ee.gg})}),[m,d]),z=(0,i.useCallback)((()=>{u((0,f.mY)({origin:y.cl})),d({action:Ee.iw})}),[u,d]);if(!n)return i.createElement("div",{key:l.key,ref:U,className:jt()(er.card,l.cellIndex>0&&er.border),style:lr(cr({},j.style),{height:"auto",visibility:F?"visible":"hidden"})},i.createElement(Yt,null));const G=W?!!W.user.isBlocked:!!n.user.isBlocked,q=n.user.isHidden,K=V===n.user.id,Q=K?(0,k.c)("profile"):(0,k.c)("userProfile",{id:n.user.id});return i.createElement(S.cp,{extendParentContextProviders:!0,metricsPane:we.cl},i.createElement("div",{key:l.key,ref:U,className:jt()(er.card,l.cellIndex>0&&er.border),style:lr(cr({},j.style),{height:"auto",visibility:F?"visible":"hidden"})},i.createElement(h.ye,{gap:"m",grow:!0,height:"100%",padding:"m",width:"100%"},i.createElement(h.ye,{align:"space-between",gap:"xxs",orientation:"horizontal",verticalAlign:"center"},i.createElement(h.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},G?i.createElement(Bt.c,{server:_,size:ur,url:""}):i.createElement(Se.mw,{posterStyle:"circle",width:ur},i.createElement(i.Fragment,null,i.createElement(Bt.c,{server:_,size:ur,url:G||q?"":n.user.avatar}),q?null:i.createElement(Se.ic,{href:Q,posterStyle:"circle",onPress:z}))),i.createElement(h.ye,{orientation:"vertical"},q?i.createElement(Ye.a,{color:"primary",font:"body-2"},(0,g.c)("Hidden Account")):i.createElement(ve.c,{href:Q,onPress:z},i.createElement(Ye.a,{color:"primary",font:"body-2"},G?n.user.username:n.user.displayName||n.user.username)),i.createElement(Ye.a,{color:"muted",font:"body-3"},(0,Kt.S)(n.date)))),K||q?null:i.createElement(Xt.c,{showLibraryAccess:!1,user:n.user}),K?i.createElement(i.Fragment,null,i.createElement(Vt.iS,{isOpen:p.isOpen,onOpenChange:p.onOpenChange},i.createElement(Vt.Eq,null,i.createElement(Ut.wP,{accessibilityLabel:(0,g.c)("More actions"),icon:Ft.default,size:"xs",testID:"moreActionsButton",transparent:!0,type:"button"})),i.createElement(Vt.wz,null,i.createElement(Vt.qS,{onPress:m.onOpen},(0,g.c)("Delete comment")))),i.createElement(Gt.c,{confirmColor:"alert",confirmLabel:(0,g.c)("Delete"),declineLabel:(0,g.c)("Cancel"),description:(0,g.c)("Are you sure you want to delete this comment?"),isWaiting:R,modalState:m,title:(0,g.c)("Delete comment"),onClose:H,onSuccess:B})):null),i.createElement(Ye.a,{align:"left",color:G?"muted":"default",font:"body-2",whiteSpace:"preserve-breaks"},G?(0,g.c)("Comment from blocked account hidden"):null,q?(0,g.c)("You don't have permission to view this content"):null,G||q?null:n.message))))}var mr=r(58224);const hr=(0,i.createContext)({width:0,height:0,scrollTop:0,scrollLeft:0,targetScrollPosition:{targetScrollTop:0,targetScrollLeft:0},scrollRestoreProps:{onScrollPositionChange(){}},onScrollPositionReady(){},ref(){},setTargetScrollPosition(){}});function yr(){return(0,i.useContext)(hr)}function gr({children:e,id:t}){const[r,{width:n,height:s}]=(0,Be.c)(),[a,o]=(0,i.useState)(),[c,l]=(0,i.useState)({scrollTop:0,scrollLeft:0});(0,i.useEffect)((()=>{null!=a&&o(void 0)}),[a]);const d=(0,i.useCallback)((e=>{l(e)}),[]),{scrollRestoreProps:u,onScrollPositionReady:p}=(0,mr.c)({key:t,onScrollPositionChange:d});return i.createElement(hr.Provider,{value:{width:n,height:s,scrollTop:c.scrollTop,scrollLeft:c.scrollLeft,scrollRestoreProps:u,targetScrollPosition:a,onScrollPositionReady:p,setTargetScrollPosition:o,ref:r}},e)}var fr=r(99558),vr=r(30708);const br=(0,At.M3)(vr.c,(e=>{var t;return null!=(t=e.GetReportComments)?t:{}})),Sr=(0,At.M3)(vr.c,(e=>{var t;return null!=(t=e.GetReportedIssues)?t:{}}));function Pr(){const e=(0,s.OY)(),t=(0,s.w1)(Sr),r=(0,s.w1)(br),n=(0,i.useCallback)(((t,r)=>{e(de.mk.util.updateQueryData("reportComments",r,(e=>{e&&e.reportComments.nodes.push(t)})))}),[e]),a=(0,i.useCallback)(((t,n)=>{Object.keys(r).forEach((r=>{const i=JSON.parse(r);i.id===t&&e(de.mk.util.updateQueryData("reportComments",i,(e=>{e&&(e.reportComments.nodes=e.reportComments.nodes.filter((e=>e.id!==n)))})))}))}),[e,r]);return{updateCommentCount:(0,i.useCallback)(((r,n)=>{Object.keys(t).forEach((t=>{e(de.mk.util.updateQueryData("getReportedIssues",JSON.parse(t),(e=>{e.reports.nodes.map(((t,i)=>{t.id===r&&(e.reports.nodes[i].commentCount+=n)}))})))})),e(de.mk.util.updateQueryData("reportById",{id:r},(e=>{e.reportByID&&(e.reportByID.commentCount+=n)})))}),[t,e]),appendComment:n,removeComment:a}}const Ir=ne.m.injectEndpoints({endpoints:e=>({createComment:e.mutation({query:e=>({document:"\n    mutation createComment($input: CreateCommentInput!) {\n  createComment(input: $input) {\n    date\n    id\n    message\n    user {\n      id\n      avatar\n      username\n      displayName\n      isHidden\n      isMuted\n      isBlocked\n    }\n  }\n}\n    ",variables:e})})})}),{useCreateCommentMutation:Er}=Ir,wr={container:"SendComment-container-Qqu74q"},Cr=parseInt(R.c.commentInputHeight,10),Or=parseInt(R.c.commentPageMarginBottom,10),Mr=Cr+Or-(0,x.c)("s"),Tr=(0,x.c)("xxl")+2*(0,x.c)("xs")+(0,x.c)("l")+parseInt(R.c.pageHeaderRowHeight,10);function Dr({id:e,isListReady:t,listHeight:r,viewportHeight:n,viewportTop:a}){const o=(0,s.OY)(),c=(0,ze.c)(),l=function(){const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,i.useCallback)((()=>e.current),[])}(),d=(0,qt.c)(),u=(0,i.useRef)(),{scrollTop:p,height:m}=yr(),[y,f]=(0,i.useState)(0),[v,b]=(0,i.useState)(!1),{addToast:S}=(0,Pe.Wo)(),P=(0,i.useRef)(null),I=(0,s.w1)(Wt.c),{updateCommentCount:E}=(0,Mt.c)(),{updateCommentCount:w}=Pr(),[C,O]=(0,i.useState)(""),[M,{isSuccess:T,isLoading:D,data:k,error:A,reset:R}]=Er(),[N,{isSuccess:L,isLoading:j,data:U,error:F,reset:V}]=(0,de.eM)(),_=T||L,W=D||j,B=k||U,H=A||F,z=d?V:R,{details:{thumb:G}}=(0,s.w1)(Je.c);(0,i.useEffect)((()=>{var e;const t=null!=(e=u.current)?e:u.current=document.querySelector(`#${$.yi}`);if(!t)return;const{bottom:i,height:s,top:o}=t.getBoundingClientRect(),c=i-Tr+(0,x.c)("m")<n,l=o+s+r;b(c&&l>=Tr),f(l-Or<n?l:n+a)}),[m,p,n,r,a]),(0,i.useEffect)((()=>{(null==H?void 0:H.message)&&(S({color:"alert",description:H.message,type:"foreground",testID:"error"}),R())}),[S,null==H?void 0:H.message,R]),(0,i.useEffect)((()=>{_&&B&&P.current&&(P.current.value="",P.current.blur(),P.current.dispatchEvent(new Event("input",{bubbles:!0})),O(""),z(),d?w(e,1):E(e,1),o(xt.c.actions.createComment({activity:e,comment:"createReportComment"in B?B.createReportComment:B.createComment})),c({action:Ee.ef}))}),[k,o,e,T,R,c,_,B,z,d,w,E]),(0,i.useEffect)((()=>()=>{C.length&&!l()&&c({action:Ee.At})}),[l,C.length,c]);const q=i.createElement(Bt.c,{server:I,size:32,url:G}),K=(0,i.useCallback)((e=>{O(e.target.value)}),[]),Q=(0,i.useCallback)((()=>{0!==C.trim().length&&(d?N({input:{message:C,report:e}}):M({input:{activity:e,message:C}}))}),[M,N,e,d,C]);return i.createElement(h.ye,{minHeight:Cr,width:"100%"},i.createElement(h.ye,{gap:"none",orientation:"horizontal",verticalAlign:"center",width:"100%"},t&&v?i.createElement("div",{className:wr.container,style:{top:y,height:y===n+a?Mr:"auto"}},i.createElement(h.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"top",width:"100%"},q,i.createElement(fr.c,{ref:P,autoFocus:!0,disabled:W,lineHeight:20,maxHeight:Or,placeholder:(0,g.c)("Leave a comment"),value:C,onChange:K,onSubmit:Q}),C.length>0?i.createElement(Ut.wP,{accessibilityLabel:(0,g.c)("Send"),color:"accent",icon:"send",iconSize:"l",size:"s",transparent:!0,waiting:W,onPress:Q}):null)):null))}const kr=20,xr=50,Ar=32,Rr=64;var Nr=Object.defineProperty,Lr=Object.defineProperties,jr=Object.getOwnPropertyDescriptors,Ur=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,_r=(e,t,r)=>t in e?Nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wr=(e,t)=>{for(var r in t||(t={}))Fr.call(t,r)&&_r(e,r,t[r]);if(Ur)for(var r of Ur(t))Vr.call(t,r)&&_r(e,r,t[r]);return e},Br=(e,t)=>Lr(e,jr(t));const Hr=parseInt(R.c.pageHeaderRowHeight,10);function zr({id:e,commentCount:t,queryResponse:r,viewportHeight:n,viewportTop:a,appendComment:o,removeComment:c,updateCommentCount:l}){const d=(0,s.OY)(),{addToast:u}=(0,Pe.Wo)(),p=(0,i.useRef)(),m=(0,i.useRef)(!1),[y,g]=(0,i.useState)(0),[f,v]=(0,i.useState)(!1),b=(0,i.useRef)(),{scrollTop:S,scrollLeft:P,height:I,width:E,setTargetScrollPosition:w,onScrollPositionReady:C}=yr(),O=(0,s.w1)(Nt(e)),{data:M,isPopulated:T,isNextPageAvailable:D,cursor:k,scrollBehavior:x,error:A,totalSize:N,setScrollerBehavior:L,getNextPage:j,insert:U,remove:F}=r,[V,_]=(0,i.useState)([]),{cellHeights:W,isWaitingToRestore:B,onCellHeightsChange:H}=(0,Dt.c)({key:`activityComments-${e}`});(0,i.useEffect)((()=>{(null==A?void 0:A.message)&&u({color:"alert",description:A.message,type:"foreground"})}),[u,null==A?void 0:A.message]),(0,i.useEffect)((()=>{O&&p.current!==O.id&&("Down"===x&&!D||"Up"===x?(U(O),o(O,"Down"===x?{id:e,first:Y.a,after:k}:{id:e,last:Y.a})):L("Up"),p.current=O.id,d(xt.c.actions.clearComment({activity:e})),w({targetScrollTop:I}),m.current=!0)}),[o,O,k,d,D,I,e,U,x,L,w]),(0,i.useEffect)((()=>{W.length&&_(W)}),[W]),(0,i.useEffect)((()=>{T&&!B&&C()}),[T,B,C]),(0,i.useEffect)((()=>{I&&m.current&&w({targetScrollTop:I})}),[I,w]);const z=(0,i.useCallback)((e=>{b.current=e.height}),[]);(0,i.useEffect)((()=>{g((e=>!b.current||b.current>I?e:Math.floor(I)-Math.floor(b.current)))}),[I]);const G=(0,i.useCallback)((t=>{c(e,t),F(t,(e=>e.id)),l(e,-1)}),[e,F,c,l]);(0,i.useEffect)((()=>{f&&(w({targetScrollTop:I}),m.current=!1,v(!1))}),[I,f,w]);const q=(0,i.useCallback)(((e,r)=>{M&&e===t-1&&M[e]&&m.current&&v(!0),_((t=>(t[e]=r,H(t),[...t])))}),[t,M,H]),K=(0,i.useMemo)((()=>(0,kt.c)({getEstimatedCellHeight:e=>{const t=null==M?void 0:M[e];return t?t.message.length/xr*kr+Ar+Rr:130},cellHeights:V,width:parseInt(R.c.cardWidth,10),overscan:1})),[V,M]),Q=(0,i.useCallback)((t=>i.createElement(pr,Br(Wr({},t),{activityId:e,removeComment:G,onCellHeightChange:q}))),[e,q,G]);return!T||B?i.createElement(h.ye,{align:"center",paddingTop:"l",width:"100%"},i.createElement($e.c,null)):i.createElement(i.Fragment,null,t&&M?i.createElement(Tt.c,{cellComponentFactory:Q,isWaitingToRestoreScrollPosition:B,items:M,keyPropName:"id",layout:K,scrollLeft:P,scrollTop:S-y+Hr,totalSize:M.length,viewportHeight:n-Hr,viewportWidth:E,onListReady:z,onPageRequest:j}):null,i.createElement(Dr,{id:e,isListReady:!t||N>0,listHeight:b.current||0,viewportHeight:n-Hr,viewportTop:a}))}const Gr=(0,At.M3)(vr.c,(e=>{var t;return null!=(t=e.GetComments)?t:{}}));function qr({id:e,viewportHeight:t,viewportTop:r}){var n;const{data:a}=(0,s.w1)(ie.endpoints.getActivityComments.select({id:e,last:Y.a})),{data:o}=(0,s.w1)(re.mk.endpoints.GetActivityById.select({id:e})),c=(null==(n=null==o?void 0:o.activityByID)?void 0:n.commentCount)||0,l=(0,Ot.c)(ie.endpoints.getActivityComments,{key:`comments-${e}`,fetchSize:Y.a,args:{id:e},transformResponse:e=>({data:e.activityComments.nodes,endCursor:e.activityComments.pageInfo.endCursor,hasNextPage:e.activityComments.pageInfo.hasNextPage,startCursor:e.activityComments.pageInfo.startCursor,hasPreviousPage:e.activityComments.pageInfo.hasPreviousPage}),scrollBehavior:a?"Up":"Down",totalSize:c}),{appendComment:d,removeComment:u}=function(){const e=(0,s.OY)(),t=(0,s.w1)(Gr);return{appendComment:(0,i.useCallback)(((t,r)=>{e(ie.util.updateQueryData("getActivityComments",r,(e=>{e&&e.activityComments.nodes.push(t)})))}),[e]),removeComment:(0,i.useCallback)(((r,n)=>{Object.keys(t).forEach((t=>{const i=JSON.parse(t);i.id===r&&e(ie.util.updateQueryData("getActivityComments",i,(e=>{e&&(e.activityComments.nodes=e.activityComments.nodes.filter((e=>e.id!==n)))})))}))}),[e,t])}}(),{updateCommentCount:p}=(0,Mt.c)();return i.createElement(zr,{appendComment:d,commentCount:c,id:e,queryResponse:l,removeComment:u,updateCommentCount:p,viewportHeight:t,viewportTop:r})}var Kr=r(26340),Qr=r(51912),$r=r(36820),Yr=r(38652);function Xr({children:e}){return i.createElement(Yr.cp,{metadataActions:void 0},e)}function Jr({id:e,viewportHeight:t,viewportTop:r}){var n;const{data:a}=(0,s.w1)(de.mk.endpoints.reportComments.select({id:e,last:Y.a})),{data:o}=(0,s.w1)(de.mk.endpoints.reportById.select({id:e})),c=(null==(n=null==o?void 0:o.reportByID)?void 0:n.commentCount)||0,l=(0,Ot.c)(de.mk.endpoints.reportComments,{key:`comments-${e}`,fetchSize:Y.a,args:{id:e},transformResponse:e=>({data:e.reportComments.nodes,endCursor:e.reportComments.pageInfo.endCursor,hasNextPage:e.reportComments.pageInfo.hasNextPage,startCursor:e.reportComments.pageInfo.startCursor,hasPreviousPage:e.reportComments.pageInfo.hasPreviousPage}),scrollBehavior:a?"Up":"Down",totalSize:c}),{appendComment:d,removeComment:u,updateCommentCount:p}=Pr();return i.createElement(zr,{appendComment:d,commentCount:c,id:e,queryResponse:l,removeComment:u,updateCommentCount:p,viewportHeight:t,viewportTop:r})}var Zr=r(95460);const en={container:"DiscoverActivityCard-container-t6145L"};var tn=Object.defineProperty,rn=Object.defineProperties,nn=Object.getOwnPropertyDescriptors,sn=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,cn=(e,t,r)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ln=(e,t)=>{for(var r in t||(t={}))an.call(t,r)&&cn(e,r,t[r]);if(sn)for(var r of sn(t))on.call(t,r)&&cn(e,r,t[r]);return e},dn=(e,t)=>rn(e,nn(t));const un={[$.It.Poster]:{width:128,height:192},[$.It.Landscape]:{width:390,height:219}},pn=parseInt(R.c.commentPageMarginBottom,10);function mn({activity:e,viewportHeight:t,viewportTop:r}){const n=(0,s.OY)(),{metadataItem:a,isPopulated:o,server:c,provider:l,isServer:d,error:u}=(0,ot.c)(e),p="ActivityWatchSession"===e.__typename?a.grandparentKey:a.key,{isPopulated:m,isPending:h,error:g,item:f}=(0,s.w1)((0,je.c)(null!=p?p:a.key));return(0,Ge.c)({origin:"Report"===e.__typename?y.yG:y.Mz,pane:"Report"===e.__typename?we.G_:we.CC}),(0,i.useEffect)((()=>{!o||d||g||h||m||n(Le.c.actions.fetchMetadataItem({provider:l,server:c,key:null!=p?p:a.key}))}),[a.key,n,o,h,m,d,p,g,l,c]),d&&u?i.createElement(qe.c,null):o&&c&&l&&(d||m||g)?i.createElement(_e.cp,{contentDirectoryID:Ce.qU,machineIdentifier:c.machineIdentifier,providerIdentifier:l.identifier},i.createElement(hn,{activity:e,metadataItem:d||g?a:f,viewportHeight:t,viewportTop:r})):i.createElement(E.c,null,i.createElement(O.c,null))}function hn({activity:e,metadataItem:t,viewportHeight:r,viewportTop:n}){const s=(0,ze.c)(),[a,o]=(0,_e.c$)(),c=Et(t),l="Report"===e.__typename,d=(0,Ne.c)(t,"key"),{src:u,type:p}=(0,i.useMemo)((()=>(0,Ct.c)(e)),[e]),m=(0,We.cp)({width:un[p].width,height:un[p].height,server:a,provider:o,url:u}),{src:y,type:g}=at(t,un,a,o),f=(0,i.useCallback)((()=>{s({action:Ee.I9})}),[s]),v=(l?g:p)===$.It.Landscape?"landscape":"portrait",b=$.It.Landscape?un.landscape.width:un.portrait.width,S="ActivityWatchSession"===e.__typename;return i.createElement($r.c,{metadataItem:t,skipFetch:!1},i.createElement(Ue.cp,{containerProvider:o,containerServer:a,containerSourceURI:t.sourceURI,containerSubtype:t.subtype,containerType:t.type},i.createElement("div",{className:en.container},i.createElement(h.ye,{grow:!1},i.createElement("div",{id:$.yi},"Report"===e.__typename?i.createElement(Xr,{item:e},i.createElement(ct,{activity:e})):i.createElement(Ke.c,{item:e},(0,wt.c)(e))),"Report"!==e.__typename?i.createElement(qr,{id:e.id,viewportHeight:r,viewportTop:n}):null,"Report"===e.__typename?i.createElement(Jr,{id:e.id,viewportHeight:r,viewportTop:n}):null),i.createElement(h.ye,{gap:"m"},i.createElement(Se.mw,{posterStyle:v,width:b},i.createElement(He.c,{durationMilliseconds:0,fit:He.A.Cover,height:"100%",src:l?y:m,width:"100%"}),S?i.createElement(lt.c,{activity:e}):null,d?i.createElement(Se.ic,{href:d,posterStyle:v,onPress:f}):null),i.createElement(h.ye,{maxWidth:un.landscape.width},i.createElement(be.ol,ln({},c)))))))}function yn({isReport:e}){const{id:t,providerIdentifier:r}=(0,a.W4)(),{ref:n,scrollRestoreProps:o,targetScrollPosition:c}=yr(),[u,{height:p,top:m}]=(0,Be.c)(),y=(0,s.OY)(),{addToast:f}=(0,Pe.Wo)(),v=Oe.SI(r),b=r||Oe.Im,P=(0,s.w1)((0,Ve.c)(b,v)),w=(0,Qr.c)({machineIdentifier:Me.A,providerIdentifier:b,contentDirectoryID:Ce.qU,pivotID:d.gz,pageType:void 0,directoryKey:void 0}),C=(0,Te.c)({serverIdentifier:Me.A,providerIdentifier:b,key:Fe.OG.DiscoverActivity}),{data:{activityByID:M}={},isFetching:T,error:D}=(0,re.Uf)({id:t},{skip:e}),{data:{reportByID:x}={},isFetching:R,error:N}=(0,de.u_)({id:t},{skip:!e}),L=e?x:M,j=T||R,U=D||N,F=(0,dt.c)(P,L),V=(0,ke.c)(null!=L?L:null)&&!L,_=(0,i.useRef)(!1),{communityFriends:{error:W,isPending:B,isPopulated:H}}=(0,s.w1)(Re.c);return(0,i.useEffect)((()=>{W||B||H||y(Ae.c.actions.fetchCommunityFriends())}),[y,W,B,H]),(0,i.useEffect)((()=>{V&&(y((0,Ie.IB)(F)),_.current=!0)}),[y,V,F]),(0,i.useEffect)((()=>{V||_.current||((null==U?void 0:U.message)||null===L)&&(f({color:"alert",description:(0,g.c)("Item not found"),type:"foreground",testID:"error"}),y((0,Ie.IB)({pathname:De.c.join(Zr.c.discoverHome,{pivot:d.gz}),replace:!0})))}),[null==U?void 0:U.message,L,f,y,V]),j||V?i.createElement(E.c,null,i.createElement(O.c,null)):!L||U?i.createElement(qe.c,null):i.createElement(S.cp,{metricsPage:e?l.Ab:l.Ck,metricsPane:xe._[L.__typename]},i.createElement(_e.cp,{contentDirectoryID:Ce.qU,machineIdentifier:Me.A,providerIdentifier:b},i.createElement(h.ye,{ref:u,height:`calc(100% - ${pn}px)`,width:"100%"},e?i.createElement(A.c,null,i.createElement(ve.c,{font:"body-1",href:(0,k.c)("reports")},(0,g.c)("Reported Issues"))):i.createElement(Kr.c,{selectedPivot:w,sourceURI:C}),i.createElement(I.c,dn(ln(ln({},o),c),{skipScrollRestore:!0}),i.createElement(h.ye,{ref:n},i.createElement(mn,{activity:L,viewportHeight:p,viewportTop:m}))))))}function gn({isReport:e}){const{id:t}=(0,a.W4)();return i.createElement(gr,{id:`ActivityDetail-${t}`},i.createElement(yn,{isReport:e}))}var fn=r(37492),vn=r(4388),bn=r(31636),Sn=r(72139),Pn=r(4668),In=r(16556),En=r(74760),wn=r(69160),Cn=r(80208),On=r(60872),Mn=Object.defineProperty,Tn=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,xn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,Rn=(e,t,r)=>t in e?Mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nn=(e,t)=>{for(var r in t||(t={}))xn.call(t,r)&&Rn(e,r,t[r]);if(kn)for(var r of kn(t))An.call(t,r)&&Rn(e,r,t[r]);return e},Ln=(e,t)=>Tn(e,Dn(t));const jn=300,Un=110;function Fn({metadataItem:e}){const t=Et(e),r=(0,vn.cp)(e.type,e.subtype)===vn.cr;return i.createElement(be.ol,Ln(Nn({},t),{poster:i.createElement(En.c,{isChromaMetadata:!0,metadataItem:e,posterWidth:r?jn:Un}),summary:""}))}function Vn({machineIdentifier:e,providerIdentifier:t,metadataKey:r}){const n=(0,s.w1)((0,Pn.c)(e)),a=(0,s.w1)((0,bn.c)(e,t)),{metadata:{metadataItem:o,error:d,isPopulated:u}}=(0,s.w1)(On.c);(0,Pt.c)(n,a,r);const p=o?(0,Sn.c)({provider:a,librarySectionID:o.librarySectionID,isPlaylist:o.isPlaylist}):void 0,m=o&&r===o.key&&u&&!d;(0,Cn.c)(e,t);const y=(0,i.useMemo)((()=>(0,fn.c)(null==o?void 0:o.guid)),[null==o?void 0:o.guid]);return m?i.createElement(S.cp,{metricsContextParam:c.PRE_PLAY,metricsPage:l.Mz},i.createElement(_e.cp,{contentDirectoryID:null==p?void 0:p.id,machineIdentifier:e,providerIdentifier:t},i.createElement(I.c,null,i.createElement($r.c,{metadataItem:o,skipFetch:!1},i.createElement(Ue.cp,{containerProvider:a,containerServer:n,containerSourceURI:o.sourceURI,containerSubtype:o.subtype,containerType:o.type},i.createElement(wn.c,null),i.createElement(h.ye,{gap:"m",orientation:"horizontal",paddingTop:"m",paddingX:"xxl"},i.createElement(Fn,{metadataItem:o})),i.createElement(In.c,{id:y})))))):i.createElement(E.c,null,i.createElement(O.c,null))}var _n=r(52180),Wn=r(35688),Bn=Object.defineProperty,Hn=(e,t,r)=>(((e,t,r)=>{t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class zn extends i.Component{constructor(e,t){super(e,t),Hn(this,"_currentDurationMilliseconds"),Hn(this,"fadeOutStartMilliseconds"),Hn(this,"fadeOutTimeoutID"),Hn(this,"fadeOut",(()=>{const{currentThemeMusicUrl:e}=this.state;e&&this.props.volume>0?(this.fadeOutStartMilliseconds||(this.fadeOutStartMilliseconds=Date.now()),this.setState(this.updateFrameState)):this.reset()})),Hn(this,"updateFrameState",(e=>{const t=e.relativeVolume;let r=-t*(Date.now()-this.fadeOutStartMilliseconds)/2e3+t;return r=Math.max(0,r),r&&(this.fadeOutTimeoutID=window.setTimeout(this.fadeOut,100)),{volume:r}})),Hn(this,"onDurationMillisecondsChange",(e=>{this._currentDurationMilliseconds=e})),Hn(this,"onPositionMillisecondsChange",(e=>{const t=Math.floor(e/1e3),r=this.state.shouldStopOnEnd?0:2e3;this.state.positionSeconds!==t&&this.setState({positionSeconds:t}),this._currentDurationMilliseconds-e<=r&&!this.fadeOutTimeoutID&&this.endThemeMusic()})),Hn(this,"onEnd",(()=>{this.reset()})),Hn(this,"onMetricsPlayerChange",(()=>{})),this.state=this.getInitialStateFromProps(e)}UNSAFE_componentWillReceiveProps(e){const{volume:t,themeMusicUrl:r}=this.props,{volume:n,themeMusicUrl:i}=e;if(t!==n){const e={relativeVolume:this.getRelativeVolume(n)};this.fadeOutTimeoutID||(e.volume=e.relativeVolume),this.setState(e)}r!==i&&(i?this.reset(i):this.fadeOutTimeoutID||this.endThemeMusic())}componentWillUnmount(){this.reset()}getRelativeVolume(e){return.5*e}getInitialStateFromProps({currentThemeMusicUrl:e,volume:t}){const r=this.getRelativeVolume(t);return{currentThemeMusicUrl:e,relativeVolume:r,volume:r,positionSeconds:0,shouldStopOnEnd:o.c.shouldStopThemeMusicOnNavigate}}reset(e){this.fadeOutTimeoutID=window.clearTimeout(this.fadeOutTimeoutID),this.fadeOutStartMilliseconds=null,this.setState(this.getInitialStateFromProps({currentThemeMusicUrl:e,volume:this.props.volume}))}endThemeMusic(){if(this.state.shouldStopOnEnd){const{dispatchEndPlayback:e,playerType:t}=this.props;e({playerType:t}),this.reset()}else this.fadeOut()}render(){const{currentThemeMusicUrl:e,positionSeconds:t,volume:r}=this.state;if(!e)return null;const{component:n,playerType:s}=this.props;return i.createElement(n,{key:e,allowRecycleElement:!0,isBackgroundMedia:!0,isThemeMusic:!0,mediaType:"audio",playerType:s,positionSeconds:t,src:e,volume:r,onDurationMillisecondsChange:this.onDurationMillisecondsChange,onEnd:this.onEnd,onMetricsPlayerChange:this.onMetricsPlayerChange,onPositionMillisecondsChange:this.onPositionMillisecondsChange})}}const Gn=zn;var qn=Object.defineProperty,Kn=Object.getOwnPropertySymbols,Qn=Object.prototype.hasOwnProperty,$n=Object.prototype.propertyIsEnumerable,Yn=(e,t,r)=>t in e?qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Xn={dispatchEndPlayback:Wn.WS};class Jn extends i.Component{shouldComponentUpdate(e){const{volume:t,themeMusicUrl:r,isPlayerOpen:n}=this.props;return e.volume!==t||e.themeMusicUrl!==r||e.isPlayerOpen!==n||!e.isBackgroundPending}render(){const e=this.props,{isBackgroundPending:t,isPlayerOpen:r}=e,n=((e,t)=>{var r={};for(var n in e)Qn.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Kn)for(var n of Kn(e))t.indexOf(n)<0&&$n.call(e,n)&&(r[n]=e[n]);return r})(e,["isBackgroundPending","isPlayerOpen"]);return r?null:i.createElement(Gn,((e,t)=>{for(var r in t||(t={}))Qn.call(t,r)&&Yn(e,r,t[r]);if(Kn)for(var r of Kn(t))$n.call(t,r)&&Yn(e,r,t[r]);return e})({},n))}}var Zn,ei,ti;Zn=Jn,ei="defaultProps",ti={playerType:u.k9},Yn(Zn,ei+"",ti);const ri=(0,s.Ul)((function(){return(0,At.M3)((0,_n.WI)("selectLocalVolume"),(e=>e.ui.background),(e=>e.ui.audioVideoPlayer.isOpen),((e,t,r)=>({volume:e,isBackgroundPending:t.isBackgroundPending,themeMusicUrl:t.themeMusicUrl,component:(0,_n.WI)("mediaComponent").getComponent({protocol:"http",isDirectPlay:!0}),isPlayerOpen:r})))}),Xn)(Jn);var ni=r(64116);const ii=r.p+"static/b38a559594ac52d049ba.png";var si=r(20668),ai=(e=>(e[e.None=0]="None",e[e.OnlyBrightColors=1]="OnlyBrightColors",e[e.OnlyDarkColors=2]="OnlyDarkColors",e[e.OnlyDistinctColors=4]="OnlyDistinctColors",e[e.OrderByBrightness=8]="OrderByBrightness",e[e.OrderByDarkness=16]="OrderByDarkness",e[e.AvoidWhite=32]="AvoidWhite",e[e.AvoidBlack=64]="AvoidBlack",e))(ai||{}),oi=Object.defineProperty;const ci=30;function li(e,t,r){return e+t*ci+r*ci*ci}const di=[[0,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,1,1],[0,1,-1],[0,-1,0],[0,-1,1],[0,-1,-1],[1,0,0],[1,0,1],[1,0,-1],[1,1,0],[1,1,1],[1,1,-1],[1,-1,0],[1,-1,1],[1,-1,-1],[-1,0,0],[-1,0,1],[-1,0,-1],[-1,1,0],[-1,1,1],[-1,1,-1],[-1,-1,0],[-1,-1,1],[-1,-1,-1]];class ui{constructor(){((e,t,r)=>{((e,t,r)=>{t in e?oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"_cells")}extractQuadrantColorsFromImage(e,t,r,n){const i=[],{width:s,height:a}=e,o=Math.floor(s*n),c=Math.floor(a*n);return e.region={minX:0,minY:0,maxX:o,maxY:c},this._extractColorsFromRegion(i,e,t,r),e.region={minX:s-o,minY:0,maxX:s,maxY:c},this._extractColorsFromRegion(i,e,t,r),e.region={minX:s-o,minY:a-c,maxX:s,maxY:a},this._extractColorsFromRegion(i,e,t,r),e.region={minX:0,minY:a-c,maxX:o,maxY:a},this._extractColorsFromRegion(i,e,t,r),i}_extractColorsFromRegion(e,t,r,n){let i=this._extractColorsFromImage(t,r,n);i.length||r===ai.None||(i=this._extractColorsFromImage(t,ai.None,n));for(let t=0;t<n;t++)i.length&&e.push(t<i.length?i[t]:i[0])}_extractColorsFromImage(e,t,r){let n=this._extractAndFilterMaximaFromImage(e,t);return n=this._performAdaptiveDistinctFilteringForMaxima(n,r),this._colorsFromMaxima(n)}_colorsFromMaxima(e){return e.map((e=>({red:e.red,green:e.green,blue:e.blue})))}_filterMaxima(e,t,r){const n=[];for(let i=0;i<e.length;i++){const s=e[i],a=s.red-t.red,o=s.green-t.green,c=s.blue-t.blue;Math.sqrt(a*a+o*o+c*c)>=r&&n.push(s)}return n}_extractAndFilterMaximaFromImage(e,t){let r=this._findAndSortMaximaInImage(e,t);return t&ai.AvoidBlack&&(r=this._filterMaxima(r,{red:0,green:0,blue:0},.25)),t&ai.AvoidWhite&&(r=this._filterMaxima(r,{red:1,green:1,blue:1},.25)),r}_performAdaptiveDistinctFilteringForMaxima(e,t){let r=e;if(r.length>t){let e=r,n=.1;for(let i=0;i<10&&(e=this._filterDistinctMaxima(r,n),!(e.length<=t));i++)r=e,n+=.05;r=r.slice(0,t)}return r}_filterDistinctMaxima(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n];let s=!0;for(let r=0;r<n;r++){const n=e[r],a=i.red-n.red,o=i.green-n.green,c=i.blue-n.blue;if(Math.sqrt(a*a+o*o+c*c)<t){s=!1;break}}s&&r.push(i)}return r}_findAndSortMaximaInImage(e,t){let r=this._findLocalMaximaInImage(e,t);return t&ai.OnlyDistinctColors&&(r=this._filterDistinctMaxima(r,.1)),t&ai.OrderByBrightness?this._orderByBrightness(r):t&ai.OrderByDarkness&&this._orderByDarkness(r),r}_orderByBrightness(e){e.sort(((e,t)=>t.brightness-e.brightness))}_orderByDarkness(e){e.sort(((e,t)=>e.brightness-t.brightness))}_clearCells(){this._cells||(this._cells=new Array(27e3));for(let e=0;e<27e3;e++)this._cells[e]={hitCount:0,redAcc:0,greenAcc:0,blueAcc:0}}_findLocalMaximaInImage(e,t){this._clearCells();const r=e.data;if(!(null==r?void 0:r.length)||!this._cells)return[];let n=0,i=e.width,s=0,a=e.height;e.region&&(n=e.region.minX,i=e.region.maxX,s=e.region.minY,a=e.region.maxY);for(let o=s;o<a;o++)for(let s=n;s<i;s++){const n=o*e.width+s,i=r[4*n+0]/255,a=r[4*n+1]/255,c=r[4*n+2]/255,l=.2126*i+.7152*a+.0722*c;if(t&ai.OnlyBrightColors&&l>.6)continue;if(t&ai.OnlyDarkColors&&l<.4)continue;const d=li(Math.floor(29*i),Math.floor(29*a),Math.floor(29*c));this._cells[d].hitCount++,this._cells[d].redAcc+=i,this._cells[d].greenAcc+=a,this._cells[d].blueAcc+=c}let o=!1;const c=[];for(let e=0;e<ci;e++)for(let t=0;t<ci;t++)for(let r=0;r<ci;r++){const n=this._cells[li(e,t,r)].hitCount;if(0===n)continue;o=!0;for(let i=0;i<27;i++){const s=e+di[i][0],a=t+di[i][1],c=r+di[i][2];if(s>=0&&a>=0&&c>=0&&s<ci&&a<ci&&c<ci&&this._cells[li(s,a,c)].hitCount>n){o=!1;break}}if(!o)continue;const i=li(e,t,r),s=this._cells[i],{hitCount:a,redAcc:l,greenAcc:d,blueAcc:u}=s,p=l/a,m=d/a,h=u/a;c.push({cellIndex:i,hitCount:a,red:p,green:m,blue:h,brightness:.2126*p+.7152*m+.0722*h})}return c.sort(((e,t)=>t.hitCount-e.hitCount)),c}}var pi=Object.defineProperty,mi=(e,t,r)=>(((e,t,r)=>{t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class hi{constructor(e){mi(this,"_rgb"),mi(this,"_hsl"),this._rgb=e}get red(){return this._rgb.red}get green(){return this._rgb.green}get blue(){return this._rgb.blue}get hsl(){return this._hsl||this._updateHSLfromRGB(),this._hsl||[0,0,0]}getLightness(){var e;return this._hsl||this._updateHSLfromRGB(),(null==(e=this._hsl)?void 0:e[2])||0}getSaturation(){const e=this.red,t=this.green,r=this.blue,n=Math.max(e,t,r),i=Math.min(e,t,r);let s=0;return n>0&&(s=(n-i)/n*100),s}getLuminance(){const e=100*this.red,t=100*this.green,r=100*this.blue;return Math.max(e,t,r)}darken(e){this._hsl||this._updateHSLfromRGB(),this._hsl&&(this._hsl[2]*=1-e,this._updateRGBfromHSL())}toHexString(){return`#${Math.round(255*this.red).toString(16).padStart(2,"0")}${Math.round(255*this.green).toString(16).padStart(2,"0")}${Math.round(255*this.blue).toString(16).padStart(2,"0")}`}_updateHSLfromRGB(){const e=this.red,t=this.green,r=this.blue,n=Math.max(e,t,r),i=Math.min(e,t,r),s=n+i,a=s/2;let o=0,c=0;if(n===i)o=0,c=0;else{const l=n-i;c=l/(a>.5?2-s:s),e>=n?(o=(t-r)/l,t<r&&(o+=6)):o=t>=n?2+(r-e)/l:4+(e-t)/l,o/=6}this._hsl=[360*o,100*c,100*a]}_updateRGBfromHSL(){if(!this._hsl)return;const e=[0,0,0],t=this._hsl[0]/360,r=this._hsl[1]/100,n=this._hsl[2]/100;if(r<=0)e[0]=n,e[1]=n,e[2]=n;else if(n<=0)e[0]=0,e[1]=0,e[2]=0;else{const i=n<.5?n*(1+r):n+r-n*r,s=2*n-i,a=[t+1/3,t,t-1/3];for(let t=0;t<3;t++)a[t]<0?a[t]+=1:a[t]>1&&(a[t]-=1),a[t]<1/6?e[t]=s+6*(i-s)*a[t]:a[t]<.5?e[t]=i:a[t]<2/3?e[t]=s+(i-s)*(2/3-a[t])*6:e[t]=s}this._rgb.red=e[0],this._rgb.green=e[1],this._rgb.blue=e[2]}}var yi=Object.defineProperty;class gi{constructor(){((e,t,r)=>{((e,t,r)=>{t in e?yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"_colorCube",new ui)}extractColors(e){const t=this._colorCube.extractQuadrantColorsFromImage(e,ai.AvoidBlack|ai.AvoidWhite,5,.4);if(!t.length)return[];const r=this._fillColorPalette(t),n=r.slice(0,5),i=r.slice(5,10),s=r.slice(10,15),a=r.slice(15,20),o=[this._dropBoringColorsInStages(n)[0],this._dropBoringColorsInStages(i)[0],this._dropBoringColorsInStages(s)[0],this._dropBoringColorsInStages(a)[0]];this._percentageDifferent(o[0],o[1])<15&&o[1].darken(.7),this._percentageDifferent(o[2],o[3])<15&&o[3].darken(.7);for(let e=0;e<o.length;e++)o[e].getLightness()>50&&o[e].darken(.1);return o.map((e=>({rgb:[Math.round(255*e.red),Math.round(255*e.green),Math.round(255*e.blue)],hsl:e.hsl,webColor:e.toHexString()})))}_fillColorPalette(e){const t=e.map((e=>new hi(e)));if(t.length<20){const e=221/255,r={red:e,green:e,blue:e};for(let e=t.length;e<=20;e++)t.push(new hi(r))}return t}_dropBoringColorsInStages(e){let t=this._dropBoringColors([e[0]],25,100,25,100);if(t.length||(t=this._dropBoringColors([e[1]],15,100,25,100)),t.length||(t=this._dropBoringColors([e[0]],2,40,30,95)),t.length||(t=this._dropBoringColors([e[1]],2,40,60,95)),!t.length){const r=e.slice(1);t=this._dropBoringColors(r,30,100,25,100),t.length||(t=this._dropBoringColors(r,15,100,25,100))}return t.length||(t=this._dropBoringColors(e,5,90,5,90)),t.length||(t=[e[0]]),t}_dropBoringColors(e,t,r,n,i){return e.filter((e=>this._colorInRange(e,t,r,n,i)))}_colorInRange(e,t,r,n,i){const s=e.getSaturation(),a=e.getLuminance();return s>=t&&s<=r&&a>=n&&a<=i&&!(s+a>190)}_percentageDifferent(e,t){return(Math.abs(e.red-t.red)+Math.abs(e.green-t.green)+Math.abs(e.blue-t.blue))/3*100}}var fi=r(92912),vi=Object.defineProperty,bi=Object.defineProperties,Si=Object.getOwnPropertyDescriptors,Pi=Object.getOwnPropertySymbols,Ii=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable,wi=(e,t,r)=>t in e?vi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ci=(e,t)=>{for(var r in t||(t={}))Ii.call(t,r)&&wi(e,r,t[r]);if(Pi)for(var r of Pi(t))Ei.call(t,r)&&wi(e,r,t[r]);return e},Oi=(e,t)=>bi(e,Si(t));const Mi=640,Ti={position:"absolute",width:"100%",height:"100%"},Di=Oi(Ci({},Ti),{background:`url(${ii})`,zIndex:2}),ki=Oi(Ci({},Ti),{opacity:0}),xi={opacity:10,background:"343a3f"},Ai=Oi(Ci({},xi),{opacity:25,format:"png"}),Ri=function({serverEntityID:e,providerEntityID:t,url:r,allowBlur:n}){const a=(0,s.w1)((0,he.c)(p.Co)),o=n&&a,[c,{width:l,height:d}]=(0,Be.c)(),{width:u,height:m,filters:h}=(0,i.useMemo)((()=>{if(l&&d){if(o)return{width:240,height:d/l*240};if(n){const e=l/d,t=e>1?Mi:Mi*e,r=e>1?Mi/e:Mi,n=Math.max(l/t,d/r),i=Math.round(100/n);return{width:t,height:r,filters:Oi(Ci({},Ai),{blur:i})}}return{width:Math.min(l,1920),height:Math.min(d,1080),filters:xi}}return{width:0,height:0}}),[n,o,d,l]),{colors:y,onImageUrlAvailable:g}=function(e){const[t,r]=(0,i.useState)(),n=(0,i.useRef)(new Image);(0,i.useEffect)((()=>{e||r(void 0),n.current.src=""}),[e]);const s=(0,i.useCallback)((()=>{var e,t,i,s;const a=document.createElement("canvas");a.width=n.current.width,a.height=n.current.height;const o=a.getContext("2d");if(!o)return;o.drawImage(n.current,0,0);const c=(u=o.getImageData(0,0,a.width,a.height).data,p=a.width,m=a.height,(new gi).extractColors({data:u,width:p,height:m})).slice(0,4),l=((null==(e=c[0])?void 0:e.hsl[2])+(null==(t=c[1])?void 0:t.hsl[2]))/2,d=((null==(i=c[2])?void 0:i.hsl[2])+(null==(s=c[3])?void 0:s.hsl[2]))/2;var u,p,m;c.length<4||l<=15&&d<=15?r(void 0):r(c.map((({webColor:e})=>e)))}),[]);return{colors:t,onImageUrlAvailable:(0,i.useCallback)((e=>{n.current.onload=s,n.current.src=e}),[s])}}(o?r:void 0);return i.createElement("div",{ref:c,style:Ti},o||!r?i.createElement("div",{style:{height:d,width:l}},i.createElement(ni.O,{bottomLeft:null==y?void 0:y[3],bottomRight:null==y?void 0:y[2],topLeft:null==y?void 0:y[0],topRight:null==y?void 0:y[1]})):null,o&&u&&m?i.createElement(fi.c,{key:"colorExtraction",allowPixelRatioSize:!1,component:si.c,containerStyle:ki,height:m,providerEntityID:t,serverEntityID:e,url:r,width:u,onLoad:g}):null,!o&&u&&m?i.createElement(fi.c,{allowPixelRatioSize:!1,component:si.c,containerStyle:Ti,filters:h,height:m,providerEntityID:t,serverEntityID:e,upscale:n,url:r,width:u}):null,o?null:i.createElement("div",{style:Di}))},Ni=(0,At.M3)((e=>e.ui.background),(e=>({serverEntityID:e.server,providerEntityID:e.provider,url:e.imageUrl,allowBlur:e.allowBlur,isBackgroundPending:e.isBackgroundPending})));class Li extends i.Component{shouldComponentUpdate(e){return!e.isBackgroundPending}render(){const{serverEntityID:e,providerEntityID:t,url:r,allowBlur:n}=this.props;return i.createElement(Ri,{allowBlur:n,providerEntityID:t,serverEntityID:e,url:r})}}const ji=(0,s.Ul)((e=>Ni))(Li);var Ui=r(14824),Fi=r(22968);const Vi={backgroundContainer:"FullPageBackground-backgroundContainer-mKhZ21"};function _i(){return function(){const e=(0,s.OY)(),t=(0,a.IT)(),r=(0,Fi.c)();(0,i.useEffect)((()=>{e((0,Ui.qE)({isBackgroundPending:r}))}),[t,r,e])}(),i.createElement("div",{className:Vi.backgroundContainer},i.createElement(ji,null),i.createElement(ri,null))}var Wi=r(87616),Bi=r(48800),Hi=r(26312),zi=r(6900),Gi=r(67532),qi=r(54348);const Ki=(0,At.M3)(Q.c,(e=>e.services));var Qi=r(31632),$i=r(53151),Yi=r(63160),Xi=r(84392),Ji=r(90012),Zi=r(35060),es=r(85308),ts=r(10868);function rs(e){const{initialized:t}=(0,i.useContext)(Xi.StatsigContext),[r,n]=(0,i.useState)(null),{isPopulated:a,error:o}=(0,s.w1)(es.c),c=(0,ts.c)(),l=(0,Zi.c)(Ji.s.IncludeDiscoverSource),d=(0,s.w1)(Wi.c);return(0,i.useEffect)((()=>{if(t&&l&&c&&(null==d?void 0:d.isPopulated)){const t=Xi.Statsig.getLayer("web").getValue(e);n(t)}}),[d,c,t,l,e]),{isLoading:c&&(!t||!a&&!o||l&&null===r),result:r}}var ns=r(84512),is=r(59501),ss=r(92076),as=r(1744),os=r(14252),cs=r(13148),ls=r(70068),ds=r(97024),us=r(62288);function ps(e,t,r){const{isCloud:n,isFullOwnedServer:i,serverFriendlyName:s,serverSourceTitle:a,providerSourceTitle:o}=e,{ownedSources:c,sharedSources:l}=t,d=Object.keys(c).length,u=Object.keys(l).length;if(n)return d>0||u>0?o:void 0;if(i)return d>1?s:void 0;const p=l[a];return(p?p.length:0)>1?r?s:`${a}  ${s}`:d>0||u>1?a:void 0}var ms=Object.defineProperty,hs=Object.defineProperties,ys=Object.getOwnPropertyDescriptors,gs=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,vs=Object.prototype.propertyIsEnumerable,bs=(e,t,r)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ss=r(1904),Ps=r(91224),Is=r(28012),Es=Object.defineProperty,ws=Object.defineProperties,Cs=Object.getOwnPropertyDescriptors,Os=Object.getOwnPropertySymbols,Ms=Object.prototype.hasOwnProperty,Ts=Object.prototype.propertyIsEnumerable,Ds=(e,t,r)=>t in e?Es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ks(){return(0,At.M3)(ds.c,ls.c,cs.c,os.c,ss.c,as.c,(e=>!e.user.isFullUser),((e,t,r,n,i,s,a)=>{const o=[];return e.forEach((e=>{if(e.isHidden)return;const a=function(e,t){return e.find((e=>e.machineIdentifier===t))}(r,e.machineIdentifier),c=function(e,t,r,n){if(!e)return null;const i=(e.isCloud?r:e.providers).find((e=>{const r=t[e];return r&&r.identifier===n}));return t[i]}(a,i,t.providers,e.providerIdentifier),l=(0,Is.c)(c,e.directoryID),d=(0,Ss.c)(c,l);if(d)(!a.isCloud||!Oe.QJ(e.providerIdentifier))&&d.key===Ps.uO&&s||o.push((0,us.c)({sourceType:d.key,sourceServer:a,sourceProvider:c,sourceDirectory:l}));else{const r=function(e,t,r,n){return e?e.isCloud?e.connectionTestResult!==is.ot.UNAVAILABLE&&!n.isProvidersPopulated&&!n.providersError||t&&!t.isPopulated&&!t.error:e.connectionTestResult===is.ot.PENDING:r.isResourcesPending}(a,c,n,t);o.push(((e,t)=>ws(e,Cs(t)))(((e,t)=>{for(var r in t||(t={}))Ms.call(t,r)&&Ds(e,r,t[r]);if(Os)for(var r of Os(t))Ts.call(t,r)&&Ds(e,r,t[r]);return e})({},e),{serverEntityID:a&&a.entityID,providerEntityID:c&&c.entityID,isUnavailable:!r,isProviderReady:c?c.isPopulated||null!=c.error:!r}))}})),function(e,t){const r=function(e){return e.reduce(((e,t)=>{const{isFullOwnedServer:r,serverSourceTitle:n,machineIdentifier:i}=t;if(!r&&n){null==e.sharedSources[n]&&(e.sharedSources[n]=[]);const t=e.sharedSources[n];t.includes(i)||t.push(i)}return i&&r&&(null==e.ownedSources[i]&&(e.ownedSources[i]=0),e.ownedSources[i]++),e}),{sharedSources:{},ownedSources:{}})}(e);return e.map((e=>((e,t)=>hs(e,ys(t)))(((e,t)=>{for(var r in t||(t={}))fs.call(t,r)&&bs(e,r,t[r]);if(gs)for(var r of gs(t))vs.call(t,r)&&bs(e,r,t[r]);return e})({},e),{titleDetail:ps(e,r,t)})))}(o,a)}))}var xs=r(70404),As=r(41520),Rs=r(99192),Ns=(e=>(e.Auto="auto",e.Custom="custom",e))(Ns||{}),Ls=r(1256),js=r(97308),Us=r(24252),Fs=r(42784),Vs=r(24660),_s=r(7148),Ws=r(84144),Bs=r(11822),Hs=r(67604),zs=r(624),Gs=r(80280),qs=r(50536),Ks=r(41260),Qs=r(91360),$s=r(3088),Ys=r(84796),Xs=r(42768);const Js=(0,At.M3)(Ys.c,Xs.c,$s.c,Qs.c,((e,t,r,n)=>{const i={};for(let s=0,a=e.length;s<a;s++){const a=e[s],o=t[a.key];if(!(null==o?void 0:o.isPopulated))continue;const c=o.hubs.find((({hubIdentifier:e})=>e!==Ks.G.OnDeck));if(!c)continue;const l=r[c.sourceURI],d=l.items.map((({sourceURI:e})=>n[e]));i[a.source]={hubsSource:a,hub:c,metadataList:l,metadataListItemState:d}}return i})),Zs=Js,ea=(0,At.M3)(Zs,(e=>{const t=Object.values(e).reduce(((e,{metadataList:t,metadataListItemState:r})=>e.concat(t.items.reduce(((e,t,n)=>{const i=r[n];return i&&e.push({metadataItem:t,metadataItemState:i}),e}),[]))),[]).reduce(((e,{metadataItem:t,metadataItemState:r})=>{var n;const i=e.find((e=>e.metadataItem.type===Xe.WW.Episode&&t.type===Xe.WW.Episode&&e.metadataItem.grandparentGuid===t.grandparentGuid));return(null==(n=null==i?void 0:i.metadataItem)?void 0:n.Media)||(i&&!i.metadataItem.Media&&t.Media?e.splice(e.indexOf(i),1,{metadataItem:t,metadataItemState:r}):i||e.push({metadataItem:t,metadataItemState:r})),e}),[]);return t.sort(((e,t)=>{var r,n,i,s;const a=e.metadataItem,o=t.metadataItem,c=e.metadataItemState,l=t.metadataItemState,d=null!=(n=null!=(r=null==a?void 0:a.includedAt)?r:null==c?void 0:c.lastViewedAt)?n:0;return(null!=(s=null!=(i=null==o?void 0:o.includedAt)?i:null==l?void 0:l.lastViewedAt)?s:0)-d})),t.map((({metadataItem:t})=>{const{hubsSource:r,hub:n}=e[t.source];return{listItemKey:t.sourceURI,hub:n,hubsSource:r,metadataItem:t}}))})),ta=ea,ra=(0,At.M3)(Zs,(e=>Object.values(e).filter((e=>{const{hub:t}=e;return t.isStale})))),na=ra;var ia=Object.defineProperty,sa=Object.defineProperties,aa=Object.getOwnPropertyDescriptors,oa=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,la=Object.prototype.propertyIsEnumerable,da=(e,t,r)=>t in e?ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ua(){return i.createElement(zs.c,null,(0,g.c)("Continue Watching"))}const pa=(0,i.memo)((function({metricsRow:e=0}){const t=(0,s.OY)(),r=(0,s.w1)(ta),n=(0,s.w1)(na),a=(0,i.useMemo)((()=>(0,_s.c)({key:Vs.G,items:r})),[r]),o=(0,i.useMemo)((()=>[{imageType:it.OQ.CoverPoster,type:Gi.a.Mixed}]),[]),c=(0,s.w1)(qs.c),l=(0,i.useMemo)((()=>r.reduce(((e,t)=>{var r,n,i;return Math.max(e,null!=(i=null==(n=null==(r=t.hub.Meta)?void 0:r.DisplayFields)?void 0:n.reduce(((e,{fields:t})=>Math.max(e,t.length)),0))?i:0)}),0)),[r]),d=(0,i.useMemo)((()=>(0,Hs.c)({listType:Gi.a.Mixed,listStyle:Gi.y.List,columnWidth:c,titleCount:l})),[c,l]);(0,i.useEffect)((()=>{n.forEach((({hub:e,hubsSource:r})=>{t(Bs.c.actions.throttledRepopulateRequested({server:r.server,provider:r.provider,sourceURI:e.sourceURI}))}))}),[t,n]);const u=(0,i.useMemo)((()=>t=>{var r,n,s;if(!t.item)return i.createElement(i.Fragment,null);const{metadataItem:c,hub:l,hubsSource:d}=t.item;return i.createElement(S.cp,{key:t.key,column:t.cellIndex,name:l.context,row:e},i.createElement(_e.cp,{machineIdentifier:null==(r=d.server)?void 0:r.machineIdentifier,providerIdentifier:null==(n=d.provider)?void 0:n.identifier},i.createElement(Ue.cp,{containerKey:a.key,containerMeta:{DisplayFields:null==(s=l.Meta)?void 0:s.DisplayFields,DisplayImage:o},containerProvider:d.provider,containerServer:d.server,containerSourceURI:l.sourceURI,containerType:Gi.a.Mixed,listStyle:Gi.y.Hero},i.createElement(Ws.c,(u=((e,t)=>{for(var r in t||(t={}))ca.call(t,r)&&da(e,r,t[r]);if(oa)for(var r of oa(t))la.call(t,r)&&da(e,r,t[r]);return e})({},t),sa(u,aa({item:c})))))));var u}),[a.key,o,e]);return i.createElement(Gs.c,{cellComponentFactory:u,hub:a,hubTitleComponent:ua,items:r,keyPropName:"listItemKey",layout:d,totalSize:r.length})})),ma={hub:"HomeDiscoverHub-hub-CTD2Xw"};function ha(){const e=(0,ze.c)(),t=(0,i.useCallback)((t=>()=>{e({action:t,experimentName:Yi.IJ.HomeDiscoverNavigation})}),[e]);return i.createElement("div",{className:ma.hub},i.createElement(h.ye,{as:"span"},i.createElement(ve.c,{href:(0,k.c)("discoverHome"),onPress:t("discoverTitleClicked")},i.createElement(h.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},i.createElement(Ye.a,{color:"primary",font:"heading-2"},(0,g.c)("Discover"))))),i.createElement(h.ye,{as:"div"},i.createElement(Ye.a,{color:"muted",font:"caption"},(0,g.c)("See what your friends are watching"))),i.createElement(h.ye,{gap:"xs",orientation:"horizontal",paddingTop:"m",verticalAlign:"center"},i.createElement(Ut.mq,{href:(0,k.c)("discoverPivot",{pivot:d.MZ}),label:(0,g.c)("Trending"),pill:!0,onPress:t("trendingClicked")}),i.createElement(Ut.mq,{href:(0,k.c)("discoverPivot",{pivot:d.gz}),label:(0,g.c)("Activity"),pill:!0,onPress:t("activityClicked")}),i.createElement(Ut.mq,{href:(0,k.c)("discoverPivot",{pivot:d.ik}),label:(0,g.c)("Find Friends"),pill:!0,onPress:t("findFriendsClicked")}),i.createElement(Ut.mq,{href:(0,k.c)("discoverPivot",{pivot:d.YD}),label:(0,g.c)("My Profile"),pill:!0,onPress:t("profileClicked")})))}var ya=r(36624),ga=r(92700),fa=r(87512),va=Object.defineProperty,ba=Object.defineProperties,Sa=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,wa=(e,t,r)=>t in e?va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ca=(0,fa.c)((e=>(0,At.M3)(Xs.c,(0,he.c)(p.jQ),((t,r)=>{const n=t[e];return i=((e,t)=>{for(var r in t||(t={}))Ia.call(t,r)&&wa(e,r,t[r]);if(Pa)for(var r of Pa(t))Ea.call(t,r)&&wa(e,r,t[r]);return e})({},n),s={hubs:r?n.hubs.filter((e=>e.hubIdentifier!==Ks.G.VodContinueWatching&&e.hubIdentifier!==Ks.G.WatchlistContinueWatching&&e.hubIdentifier!==Ks.G.MergedContinueWatching&&e.hubIdentifier!==Ks.G.ContinueWatching)):n.hubs},ba(i,Sa(s));var i,s})))),Oa=Ca;var Ma=r(46028),Ta=r(60184),Da=r(27312),ka=Object.defineProperty,xa=Object.defineProperties,Aa=Object.getOwnPropertyDescriptors,Ra=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,La=Object.prototype.propertyIsEnumerable,ja=(e,t,r)=>t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ua=(e,t)=>{for(var r in t||(t={}))Na.call(t,r)&&ja(e,r,t[r]);if(Ra)for(var r of Ra(t))La.call(t,r)&&ja(e,r,t[r]);return e},Fa=(e,t)=>xa(e,Aa(t));const Va={key:"",contentDirectoryID:[],isPending:!1,isSourceReady:!1,isSourceMissing:!1,isSourceUnavailable:!1,isSourceError:!1,isListPending:!1,isListPopulated:!1,isListEmpty:!1,isListError:!1},_a=(0,At.M3)((e=>e.isWaitingForServers),(e=>e.user.isProvidersPopulated),(e=>e.user.providersError),Ta.c,Da.c,((e,t,r,n,i)=>i.map((({key:i,server:s,provider:a})=>{if(!s)return Fa(Ua({},Va),{key:i,isPending:e,isSourceMissing:!0});const o=Fa(Ua({},Va),{key:i});if(o.isSourceUnavailable=!!s.isBlockingUI||s.isUnavailable,o.isSourceError=s.isUnauthorized||!!(null==a?void 0:a.error),a){o.isSourceReady=s.isConnected&&a.isPopulated;const e=n.hubsListsByKey[i];e?(o.contentDirectoryID=Array.from(e.contentDirectoryID),e.pinnedContentDirectoryID&&(o.pinnedContentDirectoryID=Array.from(e.pinnedContentDirectoryID)),o.isPending=o.isSourceReady&&!e.isPopulated&&!e.error,o.isListPending=e.isPending,o.isListPopulated=e.isPopulated,o.isListError=!!e.error,o.isListEmpty=e.isPopulated&&(!e.hubs.length||e.hubs.every((e=>!e.initialSize&&!e.more)))):o.isPending=!o.isSourceUnavailable&&!o.isSourceError}else o.isSourceMissing=!0,s.isConnected?o.isPending=!!s.isCloud&&!t&&!r:o.isPending=!s.isBlockingUI&&!s.isUnavailable&&!s.isUnauthorized;return o})))),Wa=_a,Ba=(0,At.M3)(Wa,(e=>{const t=[];let r=0;for(;e[r];){const n=e[r];if(n.isPending)break;n.isListPopulated&&!n.isListEmpty&&t.push(n.key),r++}return t})),Ha=(0,Ma.c)(Ba,(e=>e)),za=[Ks.G.ContinueWatching,Ks.G.VodContinueWatching,Ks.G.MergedContinueWatching],Ga=(0,fa.c)((function(e,t){return(0,At.M3)(Xs.c,Ha,(0,he.c)(p.jQ),((r,n,i)=>{const s=n.indexOf(e);return n.slice(0,-1===s?n.length:s).reduce(((e,t)=>r[t].hubs.reduce(((e,{initialSize:t,more:r,hubIdentifier:n})=>i&&za.includes(n)?e:e+(t||r?1:0)),e)),t)}))}));var qa=r(36972),Ka=r(20436),Qa=r(85420);function $a({children:e,hub:t}){const{metricsContextTuple:r}=(0,S.e0)(),n=(0,s.w1)((0,Qa.c)(t.source)),a=(0,qa.c)(t.source,{key:t.key,title:t.title,source:t.source,pageType:Fe.Qf.List,context:(0,S.QN)(r)});return i.createElement(h.ye,null,i.createElement(Ka.c,{href:a,hub:t},e),n?i.createElement(Ye.a,{font:"caption"},n):void 0)}const Ya=(0,i.memo)((function({hubsSource:e,metricsRowOffset:t}){var r,n;const a=(0,s.w1)(Oa(e.key)),o=(0,s.w1)(Ga(e.key,t));return e.server&&e.provider?i.createElement(_e.cp,{key:e.key,machineIdentifier:null==(r=e.server)?void 0:r.machineIdentifier,providerIdentifier:null==(n=e.provider)?void 0:n.identifier},i.createElement(ga.c,{hubComponent:ya.c,hubTitleComponent:$a,hubs:a.hubs,metricsRowOffset:o})):null}));var Xa=r(5164),Ja=r(70592),Za=r(47392),eo=r(22732),to=r(86564);function ro(){return(0,s.w1)(to.c)?i.createElement(eo.c,null):i.createElement(A.c,null,i.createElement(Ja.c,null,i.createElement(Xa.c,null,(0,g.c)("Home"))),i.createElement(Za.c,null,i.createElement(zi.c,{listStyles:[Gi.y.Grid],selectedListStyle:Gi.y.Grid})))}var no=r(74003),io=r(81180),so=r(31460);const ao=e=>e.ui.watchTogether,oo=(0,At.M3)(so.c,ao,((e,t)=>t.rooms.map((t=>e[t]))));var co=r(69956),lo=r(35940),uo=r(69452),po=r(6400),mo=r(94952);const ho=function(e){return(0,At.M3)(mo.c,(t=>e?t[e]:void 0))};var yo=r(44488),go=r(24752),fo=r(36728),vo=r(87440),bo=r(62592),So=r(84184),Po=r(68260),Io=r(1432),Eo=r(10376);const wo=(0,At.M3)(ao,(e=>!!e.session));var Co=r(23208),Oo=r(79240),Mo=r(37768),To=r(72840);const Do={modalHeader:"WatchTogetherRoomErrorModal-modalHeader-QO4JxS ModalHeader-modalHeader-nb9ueN"};function ko({isOpen:e,title:t,errorMessage:r,metricsPage:n,onModalClose:s}){return i.createElement(S.cp,{metricsPage:n},i.createElement(Co.c,{isOpen:e,size:Fs.c.Small,onModalClose:s},i.createElement(Mo.c,{onModalClose:s},i.createElement(To.c,{className:Do.modalHeader},t),i.createElement(Oo.c,null,r))))}const xo={card:"WatchTogetherHubItemPosterCard-card-vcbHYk PosterCard-card-BRB1k_",moreButton:"WatchTogetherHubItemPosterCard-moreButton-_FWBLX MetadataPosterCardActions-moreButton-kNJ7sJ MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",image:"WatchTogetherHubItemPosterCard-image-YfpwDn",iconContainer:"WatchTogetherHubItemPosterCard-iconContainer-vfahiZ PosterCardIcon-container-ZQcJrO",link:"WatchTogetherHubItemPosterCard-link-L73ErH PosterCardLink-link-LozvMm Link-link-vSsQW1",hoveredLink:"WatchTogetherHubItemPosterCard-hoveredLink-GoVdZm PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1",hiddenMoreButton:"WatchTogetherHubItemPosterCard-hiddenMoreButton-Ic41FB WatchTogetherHubItemPosterCard-moreButton-_FWBLX MetadataPosterCardActions-moreButton-kNJ7sJ MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1 MetadataPosterCardActions-isHidden-TxYAU9"};function Ao({className:e=xo.card,watchTogetherRoom:t,metadataItem:r,width:n,height:a,aspectRatio:o}){const[c,d]=(0,_e.c$)(),u=(0,s.OY)(),p=(0,io.c)(),m=(0,s.w1)(wo),[h,y]=(0,Eo.c)(),{isOpen:f,onClose:v,onToggle:b}=(0,io.c)(),S=(0,vo.c)(),{entityID:P,title:I,metadataItemError:E}=t,w=f||h,C=(0,We.cp)({server:c,provider:d,width:n,height:a,url:r?(0,st.c)(r,{aspectRatio:o}):void 0}),O=(0,i.useCallback)((()=>{E?p.onOpen():u(no.G({watchTogetherRoomEntityID:P}))}),[u,P,E,p]),M=(0,i.useCallback)((()=>{O(),v()}),[O,v]),T=(0,i.useCallback)((()=>{u(Hi.MT({watchTogetherRoomEntityID:P})),v()}),[u,P,v]),D=(0,i.useCallback)((()=>{p.onClose()}),[p]);return i.createElement(So.c,{ref:y,className:e,style:{width:n,height:a}},r?i.createElement(He.c,{className:xo.image,height:a,src:C,width:n}):i.createElement(Po.c,{className:xo.iconContainer,height:a,width:n},i.createElement(yo.c,null)),i.createElement(Io.c,{"aria-label":I,className:xo.link,hoverClassName:xo.hoveredLink,isHovered:h||f,onPress:O}),i.createElement(bo.c,{className:w?xo.moreButton:xo.hiddenMoreButton,id:S,isPending:!1,onPress:b}),i.createElement(go.c,{isOpen:f,target:S,onMenuClose:v},i.createElement(fo.c,{"aria-label":(0,g.c)("Join"),isDisabled:m||p.isOpen,onPress:M},(0,g.c)("Join")),i.createElement(fo.c,{"aria-label":(0,g.c)("Remove"),isDisabled:p.isOpen,onPress:T},(0,g.c)("Remove"))),i.createElement(ko,{errorMessage:E,isOpen:p.isOpen,metricsPage:l.wR,title:(0,g.c)("Cannot access this item"),onModalClose:D}))}const Ro={card:"WatchTogetherHubItem-card-oKXZjM WatchTogetherHubItemPosterCard-card-vcbHYk PosterCard-card-BRB1k_",splitTitleContainer:"WatchTogetherHubItem-splitTitleContainer-vNlYlo",title:"WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",secondaryTitle:"WatchTogetherHubItem-secondaryTitle-OPeK7j WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu undefined",splitLineTitle:"WatchTogetherHubItem-splitLineTitle-KvuClY WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",splitLineSecondaryTitle:"WatchTogetherHubItem-splitLineSecondaryTitle-UcnzvS WatchTogetherHubItem-secondaryTitle-OPeK7j WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu undefined WatchTogetherHubItem-splitLineTitle-KvuClY WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu"};var No=Object.getOwnPropertySymbols,Lo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,Uo=(e,t)=>{var r={};for(var n in e)Lo.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&No)for(var n of No(e))t.indexOf(n)<0&&jo.call(e,n)&&(r[n]=e[n]);return r};const Fo=vn.cr;function Vo(e){var t=e,{item:r}=t,n=Uo(t,["item"]);const a=(0,s.OY)(),o=(0,zt.c)(n),c=(0,s.w1)(ho(null==r?void 0:r.metadataItem)),l=(0,i.useMemo)((()=>(0,po.c)({width:n.cellWidth,aspectRatio:Fo})),[n.cellWidth]),d=(0,i.useMemo)((()=>r?(0,lo.c)(r.users.map((e=>e.title))):""),[r]),u=(0,i.useMemo)((()=>(null==c?void 0:c.source)?(0,co.c)(c.source):null),[null==c?void 0:c.source]);return(0,i.useEffect)((()=>{!r||r.isMetadataItemPopulated||r.metadataItemError||a((0,Hi.QC)({watchTogetherRoomEntityID:r.entityID}))}),[a,r]),!r||(null==r?void 0:r.isMetadataItemPending)?i.createElement("div",{ref:o.cellRef,style:o.style},i.createElement(uo.c,{className:Ro.card,index:n.cellIndex,style:l})):(null==r?void 0:r.isMetadataItemPopulated)&&c&&u?i.createElement(_e.cp,{machineIdentifier:u.serverIdentifier,providerIdentifier:u.providerIdentifier},i.createElement("div",{ref:o.cellRef,style:o.style},i.createElement(Ao,{aspectRatio:Fo,className:Ro.card,height:l.height,metadataItem:c,watchTogetherRoom:r,width:l.width}),i.createElement("div",{className:Ro.title,title:r.title},r.title),i.createElement("div",{className:Ro.secondaryTitle,title:d},d))):i.createElement("div",{style:o.style},i.createElement(Ao,{aspectRatio:Fo,className:Ro.card,height:l.height,watchTogetherRoom:r,width:l.width}),i.createElement("div",{className:Ro.splitTitleContainer},i.createElement("span",{className:Ro.splitLineTitle,title:r.title},r.title),i.createElement("span",{className:Ro.splitLineSecondaryTitle,title:(0,g.c)("No Access")},(0,g.c)("No Access"))),i.createElement("div",{className:Ro.secondaryTitle,title:d},d))}function _o(){return i.createElement(Ka.c,{hub:{attribution:Ks.i.WatchTogether}},(0,g.c)("Watch Together"))}var Wo=Object.defineProperty,Bo=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable,Go=(e,t,r)=>t in e?Wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qo=(e,t)=>{for(var r in t||(t={}))Ho.call(t,r)&&Go(e,r,t[r]);if(Bo)for(var r of Bo(t))zo.call(t,r)&&Go(e,r,t[r]);return e};const Ko={source:"watchTogether",sourceURI:"watch-together"};function Qo({hubLayoutOptions:e,className:t,hubHeaderClassName:r}){const n=(0,s.OY)(),a=(0,s.w1)(ao),o=(0,s.w1)(oo),c=(0,s.w1)(qs.c),d=(0,io.c)(),{sessionError:u}=a,p=(0,i.useMemo)((()=>(0,Hs.c)(qo({listType:Gi.a.Mixed,listStyle:Gi.y.Hero,columnWidth:c,titleCount:2},e))),[c,e]),m=(0,i.useCallback)((()=>{n(no.wK())}),[n]);(0,i.useEffect)((()=>{u?d.onOpen():d.isOpen&&d.onClose()}),[d,u]);const h=(0,i.useCallback)((e=>i.createElement(Vo,qo({},e))),[]);return i.createElement(i.Fragment,null,i.createElement(Gs.c,{cellComponentFactory:h,className:t,hub:Ko,hubHeaderClassName:r,hubTitleComponent:_o,items:o,keyPropName:"id",layout:p,totalSize:o.length}),i.createElement(ko,{errorMessage:u,isOpen:d.isOpen,metricsPage:l.wR,title:(0,g.c)("Watch Together session error"),onModalClose:m}))}const $o=(0,At.M3)((0,he.c)(p.jQ),ta,((e,t)=>e&&!!t.length));var Yo=r(27884),Xo=r(66912);const Jo=(0,At.M3)(Xo.c,Yo.c,((e,t)=>e.some((e=>!e.isCloud&&!e.isUnauthorized))||t.some((e=>e.features.find((e=>e.type===Fe.Aj.Content)))))),Zo=(0,At.M3)(oo,(e=>!!e.length));var ec=r(43196);var tc=r(3852);const rc=(0,At.M3)(Da.c,Wa,(0,ec.c)("sidebarSettings"),(e=>e.ui.watchTogether.isRoomsPending),(e=>e.ui.watchTogether.rooms.length>0),(0,he.c)(p.jQ),((e,t,r,n,i,s)=>function(e,t,r,n=!1,i=!1,s=!1){if((0,tc.c)(e.length===t.length,"hubsSources and hubsStates have differing length"),!r.hasCompletedSetup)return{isPending:!0};let a=0;const o=t.length;if(s)for(let r=0;r<o;r++){const n=t[r],i=e[r];if(i.feature&&i.feature.type!==Fe.Aj.ContinueWatching){a=r;break}if(!(n.isListPopulated||n.isListEmpty||n.isListError||n.isSourceUnavailable))return{isPending:!0}}for(let e=a;e<o;e++){const r=t[e];if(r.isListPopulated&&!r.isListEmpty)return{isPopulated:!0};if(r.isPending)return{isPending:!0}}return n?{isPending:!0}:i?{isPopulated:!0}:t.length?t.every((e=>e.isListEmpty))?{isEmpty:!0}:t.some((e=>e.isSourceUnavailable))?{isUnavailable:!0}:{isError:!0}:{hasNoPinnedSources:!0}}(e,t,r,n,i,s)));var nc=r(34648);const ic={friendSuggestions:"HomePageContent-friendSuggestions-NU2iz5"},sc=(0,At.M3)(ks(),(e=>e.reduce(((e,t)=>(!0===t.isCloud?e.cloudSources++:e.pmsSources++,e)),{cloudSources:0,pmsSources:0})));function ac(){const e=(0,s.w1)(sc),t=(0,s.w1)(Zo),r=(0,s.w1)($o),n=(0,s.w1)(xs.c),a=(0,s.w1)(Da.c),o=(0,s.w1)(Ha),c=(0,s.w1)(Jo),{isPending:l,isPopulated:d,isUnavailable:u,isError:p,isEmpty:m,hasNoPinnedSources:h}=(0,s.w1)(rc),{result:y}=rs("homeDiscoverNavigation"),{result:f,isLoading:v}=rs("friendSuggestionVisibility");let b=0;t&&b++,r&&b++;const S=l||v;return(0,Ge.c)({mode:Ns.Auto,pinnedPMSSources:e.pmsSources,pinnedProviderSources:e.cloudSources},!S),i.createElement(i.Fragment,null,y!==Yi.gf.Tabs?i.createElement(ro,null):null,S?i.createElement(E.c,null,i.createElement(O.c,null)):null,d&&!S?i.createElement(Ls.c,null,t?i.createElement(Qo,null):null,r?i.createElement(pa,{metricsRow:t?1:0}):null,y===Yi.gf.Buttons?i.createElement(ha,null):null,f?i.createElement("div",{className:ic.friendSuggestions},i.createElement(nc.c,{experimentName:Yi.IJ.HomeFriendSuggestionsHub})):null,a.map((e=>o.includes(e.key)?i.createElement(Ya,{key:e.key,hubsSource:e,metricsRowOffset:b}):null))):null,u?i.createElement(js.c,{description:(0,g.c)("Check your network connection and verify that any media servers are online."),title:(0,g.c)("No content available")}):null,p?i.createElement(js.c,{description:(0,g.c)("There was an error loading your home screen. Please try again in a few minutes."),title:(0,g.c)("Something went wrong")}):null,m&&!n?i.createElement(E.c,{description:(0,g.c)("There's no content to display based on your currently pinned sources. You can always pin additional sources to your sidebar."),iconSrc:String(ns),title:(0,g.c)("Your home screen is currently empty")}):null,m&&n?i.createElement(E.c,{description:(0,g.c)("Kindly ask the Plex Home admin to share content with you."),iconSrc:String(ns),title:(0,g.c)("No content available")}):null,h&&c?i.createElement(E.c,{description:(0,g.c)("Your home screen is based on sources pinned to your sidebar. Choose a source from the More menu and pin it to see its content here."),iconSrc:String(ns),title:(0,g.c)("Your home screen is empty")}):null,!h||c||n?null:i.createElement(E.c,{description:(0,g.c)("Organize, beautify, stream, and share your personal collection of movies, TV, music, and photos anywhere, on all your devices. To get started, download our free Plex Media Server software on the device where you store your media."),iconSrc:String(ns),title:(0,g.c)("Add your media to Plex")},i.createElement(Rs.c,{kind:Us.c.Primary,size:Fs.c.Large,target:"_self",to:(0,As.c)()},(0,g.c)("Get Plex Media Server"))),h&&!c&&n?i.createElement(E.c,{description:(0,g.c)("Kindly ask the Plex Home admin to share content with you."),iconSrc:String(ns),title:(0,g.c)("No content available")}):null)}var oc=r(13648);const cc=(0,At.M3)(Ta.c,(e=>e.lastFetchedAt)),lc=cc;var dc=r(22816),uc=r(85040),pc=r(93964),mc=r(94968);const hc=864e5;function yc(e){return!!e&&e<=Date.now()-hc}function gc(){const e=(0,s.OY)(),{context:t}=(0,a.W4)(),r=(0,i.useRef)([{key:Fe.OG.Home,title:(0,g.c)("Home"),type:Fe.Qf.View,route:"#!",id:"home"},{key:Fe.OG.HomeTrending,title:(0,g.c)("Trending"),type:Fe.Qf.View,route:"#!?tab=trending",context:"source:content.home",id:"trending"},{key:Fe.OG.HomeActivity,title:(0,g.c)("Activity"),type:Fe.Qf.View,route:"#!?tab=activity",id:"activity"},{key:Fe.OG.HomeFindFriends,title:(0,g.c)("Find Friends"),type:Fe.Qf.View,route:"#!?tab=friends",id:"findFriends"},{key:Fe.OG.HomeProfile,title:(0,g.c)("My Profile"),type:Fe.Qf.View,route:"#!?tab=profile",id:"profile"}]),n=(0,qi.c)(),o=(0,s.w1)(Da.c),d=(0,s.w1)(Wa),u=(0,s.w1)(lc),p=(0,s.w1)(Ki),{isLoading:m,result:h}=rs("homeDiscoverNavigation");(0,i.useEffect)((()=>{yc(u)&&e(oc.c.actions.reset())}),[e,u]),(0,i.useEffect)((()=>{e(oc.c.actions.populateAllRequested({hubsSources:o,hubsStates:d,userServices:p}))}),[e,o,d,p]),(0,i.useEffect)((()=>()=>{e(oc.c.actions.markStaleRequested())}),[e]),(0,i.useEffect)((()=>{const t=()=>{"visible"===document.visibilityState&&yc(u)&&e(oc.c.actions.reset())};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}),[e,u]),(0,i.useEffect)((()=>{e((0,Hi.O6)())}),[e]);const y=r.current.find((e=>{var t;return n.tab&&(null==(t=e.route)?void 0:t.includes(n.tab))}))||r.current[0],f=(0,i.useCallback)((e=>{const t=r.current.find((t=>t.route===e));if(t&&t.id)return{value:t.id,experimentName:Yi.IJ.HomeDiscoverNavigation}}),[]),v=(0,i.useMemo)((()=>{switch(y.key){case Fe.OG.Home:return i.createElement(S.cp,{metricsContextParam:t,metricsPage:l.qU},i.createElement(ac,null));case Fe.OG.HomeTrending:return i.createElement(S.cp,{metricsPage:l.Im,name:null==y?void 0:y.context},i.createElement(Qi.c,{sourceURI:"provider://tv.plex.provider.discover/hubs/sections/home"}));case Fe.OG.HomeActivity:return i.createElement(S.cp,{metricsContextParam:c.DISCOVER,metricsPage:l.Mz},i.createElement(In.c,null));case Fe.OG.HomeFindFriends:return i.createElement(S.cp,{metricsContextParam:c.DISCOVER,metricsPage:l.ox},i.createElement(dc.c,null));case Fe.OG.HomeProfile:return i.createElement(S.cp,{metricsContextParam:c.SELF,metricsPage:l.W4},i.createElement(uc.c,{showHeader:!1}));default:return null}}),[t,null==y?void 0:y.context,y.key]);return m?i.createElement(E.c,null,i.createElement(O.c,null)):i.createElement(I.c,{scrollDirection:w.y.None},h===Yi.gf.Tabs?i.createElement(mc.c,null,i.createElement(S.cp,{metricsContextParam:t,metricsPage:l.qU},i.createElement($i.c,{getMetricsProperties:f,pivots:r.current,selectedPivot:y})),i.createElement(pc.c,null,i.createElement(zi.c,{listStyles:[Gi.y.Grid],selectedListStyle:y.key===Fe.OG.Home?Gi.y.Grid:void 0}))):null,v)}function fc(){const e=(0,s.w1)(Wt.c),t=(0,s.w1)(Wi.c);return i.createElement(_e.cp,{contentDirectoryID:"home",machineIdentifier:e.machineIdentifier,providerIdentifier:(null==t?void 0:t.identifier)||Bi.c.identifier},i.createElement(gc,null))}const vc={container:"PlayerContainer-container-DtCwJl"};function bc({children:e}){return i.createElement("div",{className:vc.container},e)}var Sc=r(52513),Pc=r(54192),Ic=r(44096),Ec=r(83052),wc=r(12696),Cc=Object.defineProperty,Oc=Object.defineProperties,Mc=Object.getOwnPropertyDescriptors,Tc=Object.getOwnPropertySymbols,Dc=Object.prototype.hasOwnProperty,kc=Object.prototype.propertyIsEnumerable,xc=(e,t,r)=>t in e?Cc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ac=r(86672),Rc=r(18188),Nc=r(6872),Lc=r(37608),jc=r(84620),Uc=r(53572),Fc=r(684),Vc=Object.defineProperty,_c=Object.defineProperties,Wc=Object.getOwnPropertyDescriptors,Bc=Object.getOwnPropertySymbols,Hc=Object.prototype.hasOwnProperty,zc=Object.prototype.propertyIsEnumerable,Gc=(e,t,r)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qc=(e,t)=>{for(var r in t||(t={}))Hc.call(t,r)&&Gc(e,r,t[r]);if(Bc)for(var r of Bc(t))zc.call(t,r)&&Gc(e,r,t[r]);return e},Kc=(e,t)=>_c(e,Wc(t));const Qc=function({metadataKey:e,metadataType:t,type:r}){const n=(0,s.OY)(),[a,o,c]=(0,_e.c$)(),l=(0,s.w1)(qs.c),d=(0,s.w1)(Lc.c),{metadata:{metadataItem:u}}=(0,s.w1)(On.c),{settings:p,isPending:m,isPopulated:y,error:g}=(0,s.w1)((0,Sc.c)(a.machineIdentifier,null==u?void 0:u.librarySectionID)),f=(0,i.useMemo)((()=>function(e){return(0,wc.c)((t=((e,t)=>{for(var r in t||(t={}))Dc.call(t,r)&&xc(e,r,t[r]);if(Tc)for(var r of Tc(t))kc.call(t,r)&&xc(e,r,t[r]);return e})({},e),r={listType:Gi.a.Person,listStyle:Gi.y.Grid,titleCount:2},Oc(t,Mc(r))));var t,r}({columnWidth:l,outerPaddingBottom:parseInt(R.c.v4PagePadding,10)})),[l]),v=(0,i.useMemo)((()=>{if(!u)return"";switch(u.type){case Xe.WW.Season:return`${u.parentTitle} / ${u.title}`;case Xe.WW.Episode:return`${u.grandparentTitle} / ${(0,Ec.c)({seasonIndex:u.parentIndex,episodeIndex:u.index,date:u.originallyAvailableAt,noLeadingZero:!0,separator:" "})}`;default:return u.title}}),[u]),b=(0,i.useCallback)((e=>e.item&&u?i.createElement(Rc.c,Kc(qc({},e),{contentDirectory:c,metadataItem:u,posterDurationMilliseconds:0,provider:o,server:a,serverSettings:p})):i.createElement(i.Fragment,null)),[c,u,o,a,p]),{emptyGroups:S,nonEmptyGroups:P}=(0,i.useMemo)((()=>d.reduce(((e,t)=>(0===t.credits.length?e.emptyGroups.push(t):e.nonEmptyGroups.push(Kc(qc({},t),{credits:t.type===Xe.Cu.Actor?(0,jc.eq)(d.filter((e=>e.type===t.type&&e.metadataType===t.metadataType||e.type!==t.type))):(0,jc.oN)(d)})),e)),{emptyGroups:[],nonEmptyGroups:[]})),[d]),E=(0,i.useMemo)((()=>P.find((e=>e.type===r&&e.metadataType===t))),[P,r,t]);return(0,Cn.c)(a.machineIdentifier,o.identifier),(0,Nc.c)(),(0,i.useEffect)((()=>{a.isCloud||!(null==u?void 0:u.librarySectionID)||m||y||g||n(Pc.cp.actions.fetchServerSectionSettings({server:a,librarySectionID:u.librarySectionID}))}),[n,m,y,null==u?void 0:u.librarySectionID,a,g]),(0,i.useEffect)((()=>{if(!P.length)return;const i=S.find((e=>e.type===r&&e.metadataType===t));if(!E||i){const t=P[0];n((0,Ie.IB)({pathname:(0,Uc.c)(a.machineIdentifier,o.identifier,{key:e,type:t.type,metadataType:t.metadataType}),replace:!0}))}}),[E,n,S,e,t,P,o.identifier,a.machineIdentifier,r]),E?i.createElement(I.c,null,i.createElement(wn.c,null),i.createElement(h.ye,{gap:"l"},v?i.createElement(A.c,null,i.createElement(ve.c,{font:"heading-1",href:(0,Fc.c)(a.machineIdentifier,o.identifier,{key:e})},v)):null,P.length>1?i.createElement(Ic.WO,{align:"center"},P.map((t=>i.createElement(Ic.sV,{key:`${t.type}-${t.metadataType}`,href:(0,Uc.c)(a.machineIdentifier,o.identifier,{key:e,metadataType:t.metadataType,type:t.type}),isActive:E.type===t.type&&E.metadataType===t.metadataType},t.title)))):null,i.createElement(C.c,{cellComponentFactory:b,items:E.credits,keyPropName:"listItemKey",layout:f,totalSize:E.credits.length}))):i.createElement(I.c,null,i.createElement(Ac.c,null))};var $c=r(18730),Yc=r(75536),Xc=r(50249),Jc=r(53728),Zc=r(55e3);function el(){const e=(0,s.OY)(),{machineIdentifier:t,providerIdentifier:r}=(0,$c.c)(),n=(0,pe.c)(),a=(0,Yc.c)(n.key),o=(0,Yc.c)(n.type),c=(0,Yc.c)(n.metadataType),d=(0,s.w1)((0,Pn.c)(t)),u=(0,s.w1)((0,bn.c)(t,r)),{metadata:{metadataItem:p,error:m,isPopulated:h}}=(0,s.w1)(On.c),{isPending:y,isPopulated:g,error:f}=(0,s.w1)((0,Sc.c)(d.machineIdentifier,null==p?void 0:p.librarySectionID));(0,Pt.c)(d,u,a);const v=p?(0,Sn.c)({provider:u,librarySectionID:p.librarySectionID}):void 0,b=!(!p||a!==p.key||!h||m);return(0,i.useEffect)((()=>{d.isCloud||!(null==p?void 0:p.librarySectionID)||y||g||f||e(Pc.cp.actions.fetchServerSectionSettings({server:d,librarySectionID:p.librarySectionID}))}),[e,y,g,null==p?void 0:p.librarySectionID,d,f]),o!==Xe.Cu.Actor&&o!==Xe.Cu.Other||d.isCloud&&(null==p?void 0:p.isAdult)?i.createElement(Zc.c,null):b&&h?i.createElement(Xc.c,{machineIdentifier:t,providerIdentifier:r},a?i.createElement(S.cp,{metricsContextParam:(0,Yc.c)(n.context),metricsPage:l.I9},i.createElement(_e.cp,{contentDirectoryID:null==v?void 0:v.id,machineIdentifier:t,providerIdentifier:r},i.createElement(Qc,{metadataKey:a,metadataType:c,type:o}))):i.createElement(Zc.c,null)):i.createElement(Jc.c,null,i.createElement(E.c,null,i.createElement(O.c,null)))}var tl=r(72528),rl=r(45944),nl=r(74860),il=r(36148),sl=r(71892),al=r(35624),ol=r(36708),cl=r(32380),ll=r(86196),dl=r(21928),ul=r(92784),pl=r(96996),ml=r(12064),hl=r(11420),yl=r(21040),gl=r(7584),fl=r(80396),vl=r(17484),bl=r(96272),Sl=r(2374);const Pl={input:"EditProfile-input-dFFj1F",bio:"EditProfile-bio-bfx3oP TextInput-input-NqTdW3 input-input-XAtklw",createdAtBadge:"EditProfile-createdAtBadge-Z5o6WK"};var Il=Object.defineProperty,El=Object.defineProperties,wl=Object.getOwnPropertyDescriptors,Cl=Object.getOwnPropertySymbols,Ol=Object.prototype.hasOwnProperty,Ml=Object.prototype.propertyIsEnumerable,Tl=(e,t,r)=>t in e?Il(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dl=(e,t)=>{for(var r in t||(t={}))Ol.call(t,r)&&Tl(e,r,t[r]);if(Cl)for(var r of Cl(t))Ml.call(t,r)&&Tl(e,r,t[r]);return e},kl=(e,t)=>El(e,wl(t));const xl=parseInt(al.c.avatarFormEditSize,10),Al=parseInt(al.c.avatarFormProfileSectionSize,10);function Rl(){const e=(0,s.OY)(),t=(0,ze.c)(),r=(0,s.w1)(Wt.c),{error:n,isPending:a,isPopulated:o,isUpdating:c,details:{uuid:l,email:d,thumb:u,friendlyName:p,username:m,plexPass:h}}=(0,s.w1)(Je.c),y=(0,yl.c)(c),{privacy:f,isPopulated:v}=(0,pl.c)(),[b,{isLoading:S}]=(0,ce.It)(),{details:P,isPopulated:w}=(0,ul.c)(l),[C,{isLoading:T,isSuccess:D,data:x,error:R,reset:N}]=(0,ce.im)(),[L,j]=(0,i.useState)(),[U,F]=(0,i.useState)(),V=(0,s.w1)((0,ec.c)("dismissProfileGetStartedCard")),[_,W]=(0,i.useState)({isPhotoOpen:!1,isFullNameOpen:!1,isLocationOpen:!1,isBioOpen:!1,isLinkOpen:!1,isBadgesOpen:!1}),[B,H]=(0,i.useState)();(0,Ge.c)(),(0,i.useEffect)((()=>{f&&F({createdAt:f.createdAt===ce.oL.Friends,plexPass:f.plexPass===ce.oL.Friends})}),[f]),(0,i.useEffect)((()=>{V||e((0,tl.SI)({dismissProfileGetStartedCard:!0}))}),[V,e]),(0,i.useEffect)((()=>{j({bio:null==P?void 0:P.bio,location:null==P?void 0:P.location,url:null==P?void 0:P.url})}),[null==P?void 0:P.bio,null==P?void 0:P.location,null==P?void 0:P.url]),(0,i.useEffect)((()=>{x&&j({bio:x.updateUserProfile.bio,location:x.updateUserProfile.location,url:x.updateUserProfile.url})}),[x]),(0,i.useEffect)((()=>{n&&H((0,ll.c)(n,rl.c.EditAccount)),(null==R?void 0:R.message)&&H(null==R?void 0:R.message)}),[R,x,n]),(0,i.useEffect)((()=>{a||o||B||e(cl.c.actions.fetchUserDetails({server:r}))}),[e,a,o,r,B]),(0,i.useEffect)((()=>{c||T||S||R||n||W({isPhotoOpen:!1,isFullNameOpen:!1,isBioOpen:!1,isLinkOpen:!1,isLocationOpen:!1,isBadgesOpen:!1})}),[c,R,T,n,S]),(0,i.useEffect)((()=>{(D||y&&!c)&&e(ce.mk.util.invalidateTags([{type:X.gK.GetUserDetails,id:l}]))}),[e,D,c,y,l]);const z=(0,i.useCallback)((()=>{H(""),N(),e(cl.c.actions.clearError())}),[e,N]),G=(0,i.useCallback)((t=>{e(cl.c.actions.updateUserDetails({server:r,update:t}))}),[e,r]),q=(0,i.useCallback)((e=>{t({action:u&&!e.avatar?Ee.Ww:Ee.o5}),G(e)}),[G,u,t]),K=(0,i.useCallback)((e=>{t({action:Ee.aQ}),G(kl(Dl({},e),{friendlyName:e.friendlyName.trim()}))}),[G,t]),Q=(0,i.useCallback)((({plexPassBadge:e,joinedPlexBadge:r})=>{const n=e?ce.oL.Friends:ce.oL.Private,i=r?ce.oL.Friends:ce.oL.Private;(null==U?void 0:U.createdAt)!==r&&t({action:Ee.Ad}),h&&(null==U?void 0:U.plexPass)!==e&&t({action:Ee.sT}),b({input:{createdAt:i,plexPass:n}}),F({createdAt:r,plexPass:e})}),[null==U?void 0:U.createdAt,null==U?void 0:U.plexPass,h,t,b]),$=(0,i.useCallback)((e=>{t({action:Ee.y4}),C({input:{location:e.location}})}),[t,C]),Y=(0,i.useCallback)((e=>{t({action:Ee.i2}),C({input:{bio:e.bio}})}),[t,C]),J=(0,i.useCallback)((e=>{t({action:Ee.oD}),C({input:{url:e.url}})}),[t,C]),Z=(0,i.useCallback)((()=>{t({action:Ee.gp}),(0,hl.c)("account")}),[t]),ee=(0,i.useMemo)((()=>e=>()=>{B&&z(),W((t=>function(e,t){return e[t]=!e[t],Object.keys(e).map((r=>{r!==t&&(e[r]=!1)})),Dl({},e)}(t,e)))}),[B,z]);if(!o||!w||!v||!L&&P)return i.createElement(E.c,null,i.createElement(O.c,null));if(!L)return i.createElement(vl.c,null);const{location:te,bio:re,url:ne}=L||{},ie=h?(0,g.c)("Display badges for Plex Pass and Plex joined date"):(0,g.c)("Display badge for Plex joined date");return i.createElement(I.c,null,i.createElement(A.c,null,i.createElement(M.c,{editing:!0,subtitle:{title:p||m},title:{href:(0,k.c)("profile"),title:(0,g.c)("My Profile")}})),i.createElement(dl.c,null,i.createElement(Sl.c,{className:Pl.input,closedNode:i.createElement(Bt.c,{server:r,size:Al,url:u}),errorMessage:B,isOpen:_.isPhotoOpen,isUpdating:c,title:(0,g.c)("Profile Image"),onSubmit:q,onTogglePress:ee("isPhotoOpen")},i.createElement(ol.c,null,(0,g.c)("Profile Image")),i.createElement(gl.c,{height:xl,initialValue:(0,ml.c)(u,xl),name:"avatar",serverEntityID:r.entityID,url:(0,ml.c)(u,xl),width:xl,onTogglePress:ee("isPhotoOpen")})),i.createElement(bl.c,{title:(0,g.c)("Public Profile Information")}),i.createElement(Sl.c,{className:Pl.input,closedNode:m===d?(0,g.c)("Not set"):m,editLabel:(0,g.c)("Go to Account Settings"),title:(0,g.c)("Username"),onTogglePress:Z}),i.createElement(Sl.c,{className:Pl.input,closedNode:p||(0,g.c)("Not set"),errorMessage:B,isOpen:_.isFullNameOpen,isUpdating:c,title:(0,g.c)("Full Name"),onSubmit:K,onTogglePress:ee("isFullNameOpen")},i.createElement(il.c,{autoComplete:"off",errors:void 0,helpText:(0,g.c)("Help friends discover you on Plex with whatever name that youre best known by. For instance: your full name or a nickname."),initialValue:p||"",labelText:(0,g.c)("Full name"),name:"friendlyName",validations:[sl.ao]})),i.createElement(Sl.c,{className:Pl.input,closedNode:(null==U?void 0:U.createdAt)||(null==U?void 0:U.plexPass)?(0,g.c)("Displaying - {badges}",{badges:[(null==U?void 0:U.createdAt)?(0,g.c)("Joined Date"):void 0,h&&(null==U?void 0:U.plexPass)?(0,g.c)("Plex Pass"):void 0].filter(Boolean).join(", ")}):ie,errorMessage:B,isOpen:_.isBadgesOpen,isUpdating:S,title:(0,g.c)("Badges"),onSubmit:Q,onTogglePress:ee("isBadgesOpen")},i.createElement(nl.c,{checkboxText:(0,g.c)("Display the date you joined Plex"),formGroupClassName:Pl.createdAtBadge,initialValue:!!(null==U?void 0:U.createdAt),labelText:(0,g.c)("Badges"),name:"joinedPlexBadge"}),h?i.createElement(nl.c,{checkboxText:(0,g.c)("Display a Plex Pass badge"),initialValue:!!(null==U?void 0:U.plexPass),name:"plexPassBadge"}):null),i.createElement(Sl.c,{className:Pl.input,closedNode:te||(0,g.c)("Add your location"),errorMessage:B,isOpen:_.isLocationOpen,isUpdating:T,title:(0,g.c)("Location"),onSubmit:$,onTogglePress:ee("isLocationOpen")},i.createElement(il.c,{autoComplete:"off",errors:void 0,helpText:(0,g.c)("Adding location to your profile lets friends know where you are in this big beautiful world."),initialValue:null!=te?te:"",labelText:(0,g.c)("Location"),name:"location",placeholder:(0,g.c)("Add your location"),validations:[sl.qE]})),i.createElement(Sl.c,{className:Pl.input,closedNode:re||(0,g.c)("Add a description about yourself"),errorMessage:B,isOpen:_.isBioOpen,isUpdating:T,title:(0,g.c)("Bio"),onSubmit:Y,onTogglePress:ee("isBioOpen")},i.createElement(il.c,{autoComplete:"off",errors:void 0,helpText:(0,g.c)("Share something about yourself. Try starting with some of your favorite movies, genres, and TV shows!"),helpWidth:"85%",initialValue:null!=re?re:"",inputClassName:Pl.bio,labelText:(0,g.c)("Bio"),maxLength:sl.AN,name:"bio",placeholder:(0,g.c)("Add a description about yourself"),validations:[sl.Sk]})),i.createElement(Sl.c,{className:Pl.input,closedNode:ne?i.createElement(ve.c,{color:"accent",href:ne,target:"_blank"},ne):(0,g.c)("Add website"),errorMessage:B,isOpen:_.isLinkOpen,isUpdating:T,title:(0,g.c)("Link"),onSubmit:J,onTogglePress:ee("isLinkOpen")},i.createElement(il.c,{autoComplete:"off",errors:void 0,helpText:(0,g.c)("Provide a link on your profile for a personal website or social media profile."),initialValue:null!=ne?ne:"",labelText:(0,g.c)("Link"),name:"url",placeholder:(0,g.c)("Add website"),validations:[sl.o1]})),i.createElement(bl.c,{title:(0,g.c)("Privacy")}),i.createElement(fl.c,null)))}var Nl=r(6240),Ll=r(46204);const jl={zeroState:"ProfileHubPageZeroState-zeroState-svLTUp",subtitle:"ProfileHubPageZeroState-subtitle-VexwSL",buttonLabel:"ProfileHubPageZeroState-buttonLabel-L4XTxn"},Ul=132;function Fl({icon:e,href:t,onPress:r,title:n,subtitle:s,buttonText:a,buttonLabel:o}){return i.createElement("div",{className:jl.zeroState},i.createElement(h.ye,{align:"center",gap:"xl"},i.createElement(Ll.c,{icon:e,iconSize:"xxl",size:Ul}),i.createElement(h.ye,{align:"center",gap:"s"},i.createElement(Ye.a,{color:"inherit",font:"heading-2"},n),i.createElement("div",{className:jl.subtitle},i.createElement(Ye.a,{color:"inherit"},s))),i.createElement(h.ye,{align:"center",gap:"s"},t?i.createElement(Ut.mq,{color:"accent",href:t,label:a,onPress:r}):i.createElement(Ut.q,{color:"accent",label:a,onPress:r}),o?i.createElement("div",{className:jl.buttonLabel},i.createElement(Ye.a,{color:"muted",font:"inherit"},o)):null)))}var Vl=r(97576),_l=r(97623),Wl=r(18915);const Bl={scroller:"ProfileWatchlist-scroller-D_jHzv VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"};var Hl=Object.defineProperty,zl=Object.defineProperties,Gl=Object.getOwnPropertyDescriptors,ql=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Ql=Object.prototype.propertyIsEnumerable,$l=(e,t,r)=>t in e?Hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yl=(e,t)=>{for(var r in t||(t={}))Kl.call(t,r)&&$l(e,r,t[r]);if(ql)for(var r of ql(t))Ql.call(t,r)&&$l(e,r,t[r]);return e},Xl=(e,t)=>zl(e,Gl(t));const Jl=1;function Zl({user:e,isSignedInUser:t,profileRoute:r}){const n=(0,Wl.c)(),a=(0,s.w1)(qs.c),{data:o,isPopulated:c,fetchMore:l,totalSize:d,remove:u}=(0,_l.c)(e.id,t);(0,Ge.c)();const p=(0,i.useMemo)((()=>(0,wc.c)({listType:Gi.a.Mixed,columnWidth:a,overscan:1,innerHorizontalPadding:(0,x.c)("xl")})),[a]),m=(0,i.useMemo)((()=>e=>e.item?i.createElement(Vl.c,Xl(Yl({},e),{canRemoveActivity:t,removeActivity:t?u:void 0})):i.createElement(i.Fragment,null)),[t,u]);return i.createElement(i.Fragment,null,i.createElement(A.c,null,i.createElement(M.c,{subtitle:{title:(0,g.c)("Ratings")},title:{title:t&&!n?(0,g.c)("My Profile"):e.displayName||e.username,href:r}}),i.createElement(Za.c,null,i.createElement(zi.c,{listStyles:[Gi.y.Grid],selectedListStyle:Gi.y.Grid}))),c?null:i.createElement(E.c,null,i.createElement(O.c,null)),c&&o&&!o.length?i.createElement(Fl,{buttonText:(0,g.c)("Add a Rating Now"),href:(0,k.c)("profileWatchHistory"),icon:Nl.default,subtitle:(0,g.c)("Good, bad, or ugly  let your friends know how you feel about what youre watching."),title:(0,g.c)("Seen it? Loved it? Rate it!")}):null,c&&(null==o?void 0:o.length)?i.createElement(C.c,{cellComponentFactory:m,className:Bl.scroller,items:null!=o?o:[],keyPropName:"id",layout:p,minPageCount:Jl,totalSize:d,onPageRequest:l}):null)}var ed=r(96096),td=r(37048),rd=r(96856),nd=r(60080),id=r(57244),sd=r(52008),ad=r(72772),od=r(24992),cd=r(14400),ld=r(68536),dd=r(83660),ud=r(94840),pd=r(24972),md=r(33484),hd=r(88716),yd=r(57608);const gd={row:"ProfileWatchHistoryItem-row-Ukl65Q ListRow-row-oh5MTV",actionsLink:"ProfileWatchHistoryItem-actionsLink-EiH8ua",hidden:"ProfileWatchHistoryItem-hidden-Ylsq5_"};var fd=Object.defineProperty,vd=Object.defineProperties,bd=Object.getOwnPropertyDescriptors,Sd=Object.getOwnPropertySymbols,Pd=Object.prototype.hasOwnProperty,Id=Object.prototype.propertyIsEnumerable,Ed=(e,t,r)=>t in e?fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wd=(e,t)=>{for(var r in t||(t={}))Pd.call(t,r)&&Ed(e,r,t[r]);if(Sd)for(var r of Sd(t))Id.call(t,r)&&Ed(e,r,t[r]);return e},Cd=(e,t)=>vd(e,bd(t)),Od=(e,t)=>{var r={};for(var n in e)Pd.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Sd)for(var n of Sd(e))t.indexOf(n)<0&&Id.call(e,n)&&(r[n]=e[n]);return r};function Md(e){var t,r,n,s,a,o,c,l,d=e,{item:u,canHideActivity:p,insert:m,remove:y}=d,f=Od(d,["item","canHideActivity","insert","remove"]);const v=(0,zt.c)(f),[b]=(0,_e.c$)(),S=(0,hd.c)(),P=(0,_t.y)(),I=(0,_t.y)(),E=(0,ad.c)(null==(t=null==u?void 0:u.metadataItem)?void 0:t.sourceURI),[w,C]=(0,ce.U_)(),[O,M]=(0,ce.i4)(),T=(0,i.useRef)(),{insertItemByDate:D}=(0,yd.c)(X.gK.GetWatchHistoryHub),{hoverRef:k,isHovered:x,actionsMenuButtonID:A,isActionsMenuOpen:R,onActionsMenuClose:N,onActionsMenuCloseComplete:L,onActionsMenuToggle:j}=(0,od.c)({server:b,provider:S,metadataItem:null!=(r=null==u?void 0:u.metadataItem)?r:ld.c,metadataItemState:E}),U=(0,i.useMemo)((()=>(null==u?void 0:u.metadataItem)?u.metadataItem.type===Xe.WW.Episode?[it.Mv.GrandparentTitle,it.Mv.EpisodeTitleAndIdentifier]:u.metadataItem.displayFields:[]),[null==u?void 0:u.metadataItem]),F=(0,i.useCallback)((()=>{(null==u?void 0:u.id)&&w({input:{id:u.id,type:te.IL.WatchHistory}})}),[u,w]),V=(0,i.useCallback)((e=>{(null==u?void 0:u.id)&&(T.current=e.toISOString(),O({id:u.id,input:{date:e}}))}),[O,null==u?void 0:u.id]),_=(0,i.useCallback)((()=>{(null==u?void 0:u.id)&&(null==y||y(u.id))}),[null==u?void 0:u.id,y]),W=(0,i.useCallback)((()=>{if(null==u?void 0:u.id){const e=null==y?void 0:y(u.id);if(!e)return;const t=Cd(wd({},e),{date:T.current||e.date}),r=D(t);r>-1&&m(t,r)}}),[m,D,null==u?void 0:u.id,y]),B=(0,i.useMemo)((()=>({removeActivity:{callback:P.onOpen,title:(0,g.c)("Remove Activity")},editActivity:{callback:I.onOpen,title:(0,g.c)("Edit Watched Date")}})),[I.onOpen,P.onOpen]),H=(0,i.useMemo)((()=>{var e;return(0,Kt.S)(null==(e=null==u?void 0:u.activity)?void 0:e.viewedAt)}),[null==(n=null==u?void 0:u.activity)?void 0:n.viewedAt]),z=(0,i.useMemo)((()=>{var e;return null==(e=null==u?void 0:u.metadataItem.Image)?void 0:e.reduce(((e,t)=>Cd(wd({},e),{[t.type]:t})),{})}),[null==u?void 0:u.metadataItem.Image]),G=(null==u?void 0:u.metadataItem.type)?(0,cd.cp)(null==u?void 0:u.metadataItem.type,u.metadataItem.subtype,{displayFieldNames:U}):[];if(!u||!(null==u?void 0:u.metadataItem))return null;const q=(null==(s=u.activity)?void 0:s.viewedAt)?(0,nd.c)(new Date(u.activity.viewedAt),"LLLL dd, yyyy"):null;return i.createElement($r.c,{metadataItem:u.metadataItem},i.createElement(_e.cp,{machineIdentifier:b.machineIdentifier,providerIdentifier:S.identifier},i.createElement(Yr.cp,{key:f.key,activity:u.activity,metadataActions:p?B:void 0},i.createElement(ud.c,{ref:k,className:gd.row,isHovered:x||R,style:v.style},i.createElement(h.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center",width:"100%"},i.createElement(h.ye,{gap:"m",grow:!0,orientation:"horizontal",verticalAlign:"center"},i.createElement(dd.S,{height:40,posterStyle:"landscape",server:b,url:null!=(o=null==(a=null==z?void 0:z[it.OQ.CoverArt])?void 0:a.url)?o:"",width:72}),i.createElement(h.ye,{width:"100%"},G.map(((e,t)=>{if(null==e)return null;const r=(0,cd.mQ)(e);return i.createElement(id.c,{key:t,component:r.component,isDoubleLine:!1,isSecondary:t>0,metadataItem:u.metadataItem})})))),i.createElement(h.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},q!==H?i.createElement(rd.o,{tooltip:i.createElement(Ye.a,{color:"muted",font:"body-3"},q)},i.createElement("span",{"aria-label":null!=q?q:"",className:gd.date},i.createElement(Ye.a,{color:"muted",font:"body-3"},H))):i.createElement(Ye.a,{color:"muted",font:"body-3"},H),i.createElement(bo.c,{className:jt()(gd.actionsLink,!x&&!R&&gd.hidden),id:A,isPending:E.isPending,tabIndex:-1,onPress:j}))),i.createElement(sd.c,{actionsOverride:{isPlayVisible:!1,isEditVisible:!1},isOpen:R,metadataItem:u.metadataItem,target:A,onMenuClose:N,onMenuCloseComplete:L}),i.createElement(md.c,{body:(0,g.c)("This activity will no longer appear in your Activity feed or Profile unless you repeat the activity"),modalState:P,mutationState:wd({},C),title:(0,g.c)("Remove Activity"),onRemoveActivity:F,onSuccess:_}),(null==(c=u.activity)?void 0:c.viewedAt)?i.createElement(pd.c,{date:null==(l=u.activity)?void 0:l.viewedAt,error:M.error,isEditing:M.isLoading,modalState:I,onEditDate:V,onSuccess:W}):null))))}var Td=r(51760),Dd=r(16092);const kd={scroller:"ProfileWatchHistory-scroller-aEEKMF VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",stats:"ProfileWatchHistory-stats-tMalrO",content:"ProfileWatchHistory-content-BJwzCt"};var xd=Object.defineProperty,Ad=Object.defineProperties,Rd=Object.getOwnPropertyDescriptors,Nd=Object.getOwnPropertySymbols,Ld=Object.prototype.hasOwnProperty,jd=Object.prototype.propertyIsEnumerable,Ud=(e,t,r)=>t in e?xd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fd=(e,t)=>{for(var r in t||(t={}))Ld.call(t,r)&&Ud(e,r,t[r]);if(Nd)for(var r of Nd(t))jd.call(t,r)&&Ud(e,r,t[r]);return e},Vd=(e,t)=>Ad(e,Rd(t));const _d=1,Wd=68;function Bd({user:e,isSignedInUser:t,profileRoute:r}){const{addToast:n}=(0,Pe.Wo)(),a=(0,s.w1)(Wt.c),o=(0,s.w1)(Wi.c),c=(0,Wl.c)(),{data:l,isPopulated:d,totalSize:u,error:p,fetchMore:m,insert:h,remove:y}=(0,Dd.c)(e.id,t);(0,Ge.c)(),(0,i.useEffect)((()=>{(null==p?void 0:p.message)&&n({color:"alert",description:p.message,type:"foreground"})}),[n,null==p?void 0:p.message]);const{isUninitialized:f,data:v}=(0,ce.Kw)({uuid:e.id}),S=(0,i.useMemo)((()=>(0,b.c)({overscan:1,rowHeight:Wd})),[]),P=(0,i.useCallback)((()=>{const e=document.querySelector(`#${td.s5}`);null==e||e.focus()}),[]),I=(0,i.useMemo)((()=>e=>{var r;return e.item?i.createElement(_e.cp,{key:e.key,machineIdentifier:null==a?void 0:a.machineIdentifier,providerIdentifier:null!=(r=null==o?void 0:o.identifier)?r:""},i.createElement(Md,Vd(Fd({},e),{canHideActivity:t,insert:h,remove:t?y:void 0}))):i.createElement(i.Fragment,null)}),[t,h,null==o?void 0:o.identifier,y,null==a?void 0:a.machineIdentifier]);return i.createElement(i.Fragment,null,i.createElement(A.c,null,i.createElement(M.c,{subtitle:{title:(0,g.c)("Watch History")},title:{title:t&&!c?(0,g.c)("My Profile"):e.displayName||e.username,href:r}})),d&&!f||p?null:i.createElement(E.c,null,i.createElement(O.c,null)),d&&!f&&l&&!l.length?i.createElement(Fl,{buttonText:(0,g.c)("Search for Movies & Shows"),icon:ed.default,subtitle:(0,g.c)("Start watching and your history will appear here. Or search for any movie or show you fancy to add anything manually to your watch history."),title:(0,g.c)("Time to get watching!"),onPress:P}):null,d&&!f&&(null==l?void 0:l.length)?i.createElement("div",{className:kd.content},i.createElement(C.c,{cellComponentFactory:I,className:kd.scroller,items:null!=l?l:[],keyPropName:"id",layout:S,minPageCount:_d,totalSize:u,onPageRequest:m}),(null==v?void 0:v.user.watchStats)?i.createElement("div",{className:kd.stats},i.createElement(Td.c,{stats:v.user.watchStats})):null):null)}var Hd=r(3728),zd=r(40772),Gd=Object.defineProperty,qd=Object.getOwnPropertySymbols,Kd=Object.prototype.hasOwnProperty,Qd=Object.prototype.propertyIsEnumerable,$d=(e,t,r)=>t in e?Gd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yd=(e,t)=>{for(var r in t||(t={}))Kd.call(t,r)&&$d(e,r,t[r]);if(qd)for(var r of qd(t))Qd.call(t,r)&&$d(e,r,t[r]);return e};const Xd=1;function Jd({user:e,isSignedInUser:t,profileRoute:r}){const n=(0,Wl.c)(),a=(0,s.w1)(qs.c),{data:o,isPopulated:c,totalSize:l,fetchMore:u}=(0,zd.c)(e.id,t);(0,Ge.c)();const p=(0,i.useMemo)((()=>(0,wc.c)({listType:Gi.a.Mixed,columnWidth:a,overscan:1,innerHorizontalPadding:(0,x.c)("xl")})),[a]),m=(0,i.useMemo)((()=>e=>e.item?i.createElement(Vl.c,Yd({},e)):i.createElement(i.Fragment,null)),[]);return i.createElement(i.Fragment,null,i.createElement(A.c,null,i.createElement(M.c,{subtitle:{title:(0,g.c)("Watchlist")},title:{title:t&&!n?(0,g.c)("My Profile"):e.displayName||e.username,href:r}}),i.createElement(Za.c,null,i.createElement(zi.c,{listStyles:[Gi.y.Grid],selectedListStyle:Gi.y.Grid}))),c?null:i.createElement(E.c,null,i.createElement(O.c,null)),c&&o&&!o.length?i.createElement(Fl,{buttonText:(0,g.c)("Discover Something New"),href:(0,k.c)("discoverWatchlist",{},{pivot:d.sV}),icon:Hd.default,subtitle:(0,g.c)("Keep track of what you want to watch next from any streaming service, all in one place."),title:(0,g.c)("Save anything to your Watchlist")}):null,c&&(null==o?void 0:o.length)?i.createElement(C.c,{cellComponentFactory:m,className:Bl.scroller,items:null!=o?o:[],keyPropName:"id",layout:p,minPageCount:Xd,totalSize:l,onPageRequest:u}):null)}function Zd(e,t){return t?c.FRIEND:e?c.SELF:c.NON_FRIEND}function eu({page:e}){const{isFriend:t,isSignedInUser:r,details:n,isPopulated:s}=(0,D.c)(),a=(0,Wl.c)(),o=(0,i.useMemo)((()=>r?a?(0,k.c)("discoverPivot",{pivot:d.YD}):(0,k.c)("profile"):(0,k.c)("userProfile",{id:null==n?void 0:n.id})),[null==n?void 0:n.id,a,r]),c=(0,i.useMemo)((()=>e===Zl?we.S8:e===Jd?we._w:e===Bd?we.Il:void 0),[e]);return!n&&s?i.createElement(Zc.c,null):i.createElement(I.c,null,s?i.createElement(S.cp,{metricsContextParam:Zd(r,t),metricsPane:c},n?i.createElement(e,{isFriend:t,isSignedInUser:r,profileRoute:o,user:n}):i.createElement(i.Fragment,null)):i.createElement(E.c,null,i.createElement(O.c,null)))}var tu=r(39528),ru=r(54740),nu=r.n(ru),iu=r(54444),su=r(74392),au=r(64776),ou=r(21248),cu=r(38828),lu=r(43848),du=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function uu(){const e=(0,a.IT)(),t=(0,s.w1)(Wt.c),{onOpen:r,isOpen:n,onOpenChange:o,onClose:c}=(0,_t.y)(),{handleSubmit:l,register:d}=(0,iu.aS)(),{addToast:u}=(0,Pe.Wo)(),[p,m]=(0,i.useState)(!1),y=(0,i.useRef)(Date.now()),f=(0,i.useCallback)((r=>du(this,[r],(function*({description:r}){try{m(!0);const n=nu()((0,_n.WI)("logs").toJSON(),{level:cu.c.LEVEL_ERROR}),i={misc:JSON.stringify(n),issue:r,timestamp:new Date(y.current).toJSON(),screen:`${e.pathname}${e.search}`};yield lu.c.post("/api/v2/issues",{data:i,server:t}),u({color:"confirm",description:"Your report has been sent",type:"foreground"}),c()}catch(e){u({color:"alert",description:(0,ll.c)(e),type:"foreground"})}finally{m(!1)}}))),[u,e.pathname,e.search,c,t]);return(0,i.useEffect)((()=>(ou.c.on("shortcut:reportProblem",r),()=>{ou.c.off("shortcut:reportProblem",r)}))),i.createElement(au.wJ,{isOpen:n,onOpenChange:o},i.createElement(au.EX,{as:"form",closeButtonAccessibilityLabel:(0,g.c)("Close Modal"),header:"Report a Problem",size:"s",onSubmit:l(f)},i.createElement(au.aU,null,i.createElement(h.ye,{gap:"m"},i.createElement(Ye.a,{font:"body-2"},"Use this form to report any problems you have while using the application. We collect some information from your session but additionally you can describe the problem below."),i.createElement(su.F$,{ref:d,disabled:p,id:"description",label:(0,g.c)("Description (optional)"),name:"description"}))),i.createElement(au._A,null,i.createElement(au.YB,null,i.createElement(Ut.q,{disabled:p,label:(0,g.c)("Cancel"),onPress:c}),i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Send"),type:"submit",waiting:p})))))}var pu=r(83248),mu=r(86200),hu=Object.defineProperty,yu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,fu=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,bu=Object.prototype.propertyIsEnumerable,Su=(e,t,r)=>t in e?hu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pu=(e,t)=>{for(var r in t||(t={}))vu.call(t,r)&&Su(e,r,t[r]);if(fu)for(var r of fu(t))bu.call(t,r)&&Su(e,r,t[r]);return e},Iu=(e,t)=>yu(e,gu(t)),Eu=(e,t)=>{var r={};for(var n in e)vu.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fu)for(var n of fu(e))t.indexOf(n)<0&&bu.call(e,n)&&(r[n]=e[n]);return r};function wu(e){var t=e,{item:r,children:n,onCellHeightChange:s}=t,a=Eu(t,["item","children","onCellHeightChange"]);const o=(0,zt.c)(a),[c,l]=(0,Ht.c)(Pu({onCellHeightChange:s},a));return r?i.createElement("div",{key:a.key,ref:c,style:Iu(Pu({},o.style),{visibility:l?"visible":"hidden"})},i.createElement(Xr,{item:r},n)):null}const Cu={scroller:"ReportedIssues-scroller-VL65si VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"};var Ou=Object.defineProperty,Mu=Object.defineProperties,Tu=Object.getOwnPropertyDescriptors,Du=Object.getOwnPropertySymbols,ku=Object.prototype.hasOwnProperty,xu=Object.prototype.propertyIsEnumerable,Au=(e,t,r)=>t in e?Ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ru=(e,t)=>{for(var r in t||(t={}))ku.call(t,r)&&Au(e,r,t[r]);if(Du)for(var r of Du(t))xu.call(t,r)&&Au(e,r,t[r]);return e},Nu=(e,t)=>Mu(e,Tu(t));const Lu="reports",ju=25;function Uu(){const e=(0,s.OY)(),t=(0,P.c)(),[r,n]=(0,i.useState)([]),{data:a,totalSize:o,isPopulated:c,error:l,getNextPage:d}=(0,Ot.c)(de.mk.endpoints.getReportedIssues,{key:Lu,fetchSize:ju,args:{},transformResponse:e=>({data:e.reports.nodes,endCursor:e.reports.pageInfo.endCursor,hasNextPage:!!e.reports.pageInfo.hasNextPage})}),{cellHeights:u,isWaitingToRestore:p,onCellHeightsChange:m}=(0,Dt.c)({key:Lu});(0,i.useEffect)((()=>{(null==a?void 0:a.length)&&t({itemsLoaded:a.length,pagesLoaded:Math.ceil(a.length/ju)})}),[null==a?void 0:a.length,t]),(0,i.useEffect)((()=>{u.length&&n(u)}),[u]),(0,i.useEffect)((()=>{e(de.mk.util.updateQueryData("reportsUnreadCount",void 0,(e=>{e.reportsUnreadCount=0})))}),[e]);const y=(0,i.useCallback)(((e,t)=>{n((r=>(r[e]=t,m(r),[...r])))}),[m]),f=(0,i.useMemo)((()=>(0,kt.c)({getEstimatedCellHeight:e=>{const t=null==a?void 0:a[e];return t?(0,mu.c)(t,!1):0},cellHeights:r,innerPaddingBottom:(0,x.c)("m"),width:parseInt(R.c.cardWidth,10),overscan:1})),[r,a]),v=(0,i.useCallback)((e=>{const{item:t}=e;return t?i.createElement(wu,Nu(Ru({},e),{onCellHeightChange:y}),i.createElement(ct,{activity:t})):i.createElement(i.Fragment,null)}),[y]);return l?i.createElement(qe.c,null):c&&!p&&a?i.createElement(I.c,null,i.createElement(A.c,null,i.createElement(Ye.a,{color:"muted",font:"body-1",numberOfLines:1},(0,g.c)("Reported Issues"))),a.length>0?i.createElement(C.c,{cellComponentFactory:v,className:Cu.scroller,items:a,keyPropName:"id",layout:f,totalSize:o,onPageRequest:d}):i.createElement(h.ye,{align:"center",gap:"xl",paddingTop:"xxxl",width:"100%"},i.createElement(Ll.c,{icon:pu.default,iconSize:"xxl",size:132}),i.createElement(h.ye,{align:"center",gap:"m",maxWidth:460},i.createElement(Ye.a,{color:"primary",font:"heading-1"},(0,g.c)("No Reported Issues")),i.createElement(Ye.a,{align:"center",color:"default",font:"body-1"},(0,g.c)("This page will display any issues you report and any issues reported by those with access to your Libraries."))))):i.createElement(E.c,null,i.createElement(O.c,null))}var Fu=r(54073),Vu=r(46248),_u=r(2221),Wu=r(28796),Bu=r(26240),Hu=r(98248),zu=r(93268),Gu=r(29632);const qu=(0,At.M3)(os.c,(e=>e.isResourcesPopulated)),Ku=(0,At.M3)(os.c,(e=>e.hasFailedResources)),Qu=(0,At.M3)(qu,Ku,(0,Gu.c)("isProvidersPopulated"),(0,Gu.c)("providersError"),((e,t,r,n)=>t||!!n||e&&r));var $u=r(11876);const Yu=(0,At.M3)($u.c,Qu,((e,t)=>{const r=e.some((e=>!(!e.provider||!e.provider.isPopulated)&&!!(0,zu.c)(e.provider)));return t&&!r}));var Xu=r(51328);const Ju=(0,At.M3)(Xu.c,(e=>e.length>0));var Zu=r(95348),ep=r(70508),tp=r(32516),rp=r(42764),np=r(81764),ip=r(37336),sp=r(13671);const ap=(0,At.M3)(sp.c,(e=>e.hasDismissedServerDownloadMessage)),op=(0,At.M3)(cs.c,(e=>e.some((e=>e.connections.some((e=>e.isLoopback))&&e.connectionTestResult===is.ot.PENDING))));var cp=r(45436);const lp=(0,At.M3)(os.c,op,cp.c,xs.c,Ju,((e,t,r,n,i)=>e.isResourcesPopulated&&!t&&!r.length&&!n&&!i));var dp=r(23812);const up=function(e){const{children:t,isSidebarCollapsed:r}=e;return i.createElement(i.Fragment,null,r?i.createElement("div",{className:"EmptySourceSidebar-sidebarUnderlay-Fpi4rC SourceSidebar-sidebarUnderlay-Npir7j"}):null,i.createElement("div",{className:r?"EmptySourceSidebar-collapsedSidebar-KENtE6 SourceSidebar-collapsedSidebar-heX4mD SourceSidebar-sidebar-yw2lNo":"EmptySourceSidebar-openSidebar-kELdTG SourceSidebar-openSidebar-I364_Z SourceSidebar-sidebar-yw2lNo"},t))},pp=function(){const e=(0,g.c)("An unexpected error is impacting the sidebar");return i.createElement(up,{isSidebarCollapsed:!0},i.createElement(dp.c,{errorMessage:`${e}.`},i.createElement(rd.o,{placement:"right",tooltip:e},i.createElement(Ut.wP,{accessibilityLabel:e,icon:Qe.default,iconSize:"l",insetFocus:!0,size:"s",transparent:!0}))))};var mp=r(42476),hp=r(32036),yp=r(75372),gp=r(99724),fp=r(14248),vp=r(54464),bp=r(71500),Sp=r(73048),Pp=r(87808);const Ip={button:"SourceSidebarLink-button-rWG8gD SidebarLink-sidebarLink-ns5vmb Link-default-BXtKLo",isDim:"SourceSidebarLink-isDim-MhqsPv",title:"SourceSidebarLink-title-C2NvGy SidebarLink-title-OWiZjJ",iconContainer:"SourceSidebarLink-iconContainer-xQGX4C",isDisabled:"SourceSidebarLink-isDisabled-wpis2k SourceSidebarLink-isDim-MhqsPv",isSelected:"SourceSidebarLink-isSelected-rPGiHo",sourceLink:"SourceSidebarLink-sourceLink-hLtTJn",titles:"SourceSidebarLink-titles-vXEyId",detail:"SourceSidebarLink-detail-C3uCVj",small:"SourceSidebarLink-small-lIEoIa",medium:"SourceSidebarLink-medium-Y3siEA"};var Ep=Object.defineProperty,wp=Object.defineProperties,Cp=Object.getOwnPropertyDescriptors,Op=Object.getOwnPropertySymbols,Mp=Object.prototype.hasOwnProperty,Tp=Object.prototype.propertyIsEnumerable,Dp=(e,t,r)=>t in e?Ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function kp(e){const{"data-testid":t,className:r,size:n,style:s,linkClassName:a,titleClassName:o,isActiveClassName:c,isSelectedClassName:l,icon:d,title:u,detail:p,to:m,role:h,isActive:y,isDim:g,isDisabled:f,isSelected:v,children:b,onNavigate:S,onMouseEnter:P,onMouseLeave:I,onFocus:E,onBlur:w}=e;let C,O;return m?(C=bp.c,O={isDisabled:f,to:m,role:h,"data-testid":t,onPress:S}):(C="div",O={}),i.createElement("div",{className:jt()(r,Ip[n],y&&c,g&&Ip.isDim,f&&Ip.isDisabled,v&&l),"data-testid":"sidebarSource",style:s,onBlur:w,onFocus:E,onMouseEnter:P,onMouseLeave:I},i.createElement(C,(M=((e,t)=>{for(var r in t||(t={}))Mp.call(t,r)&&Dp(e,r,t[r]);if(Op)for(var r of Op(t))Tp.call(t,r)&&Dp(e,r,t[r]);return e})({className:a},O),wp(M,Cp({title:p?`${u}, ${p}`:u}))),i.createElement("div",{className:Ip.iconContainer},d),i.createElement("div",{className:Ip.titles},i.createElement("div",{className:o},u),p?i.createElement("div",{className:Ip.detail},p):null)),b);var M}kp.defaultProps={className:Ip.button,size:Pp.IF,linkClassName:Ip.sourceLink,titleClassName:Ip.title,isActiveClassName:Ip.isActive,isSelectedClassName:Ip.isSelected};const xp=kp;var Ap=Object.defineProperty,Rp=Object.getOwnPropertySymbols,Np=Object.prototype.hasOwnProperty,Lp=Object.prototype.propertyIsEnumerable,jp=(e,t,r)=>t in e?Ap(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Up=function(e){const t=e,{icon:r,connectDragSource:n}=t,s=((e,t)=>{var r={};for(var n in e)Np.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Rp)for(var n of Rp(e))t.indexOf(n)<0&&Lp.call(e,n)&&(r[n]=e[n]);return r})(t,["icon","connectDragSource"]),a=i.createElement(xp,((e,t)=>{for(var r in t||(t={}))Np.call(t,r)&&jp(e,r,t[r]);if(Rp)for(var r of Rp(t))Lp.call(t,r)&&jp(e,r,t[r]);return e})({icon:r||i.createElement(Sp.default,null)},s));return n?n(i.createElement("div",{className:"ReorderSourceSidebarItem-dragSource-rea4x0"},a)):a};var Fp=r(4012),Vp=r(85236),_p=r(1768),Wp=r(71088),Bp=r(2608),Hp=r(72952);const zp=parseInt(R.c.sourceSidebarItemHeight,10);class Gp extends i.Component{render(){const{item:e,style:t}=this.props;if(!e||!t)return null;const{sourceTitle:r,sourceDetail:n}=e;return i.createElement(Wp.c,null,i.createElement(Up,{detail:n,style:t,title:r}))}}const qp=(0,_p.y)((function(e,t){const r=e.getItem(),n={item:r,style:null},i=e.getInitialSourceClientOffset(),s=e.getSourceClientOffset();if(e.getItemType()===Bp.YL&&i&&s){let e=s.y;e-r.listTop<=0?e=r.listTop:e+zp>=r.listBottom&&(e=r.listBottom-zp),n.style=(0,Hp.c)({x:i.x,y:e},r.listWidth)}return n}))(Gp);var Kp=r(97904),Qp=r(14788),$p=r(30832),Yp=r(97104),Xp=r(50388);const Jp={beginDrag(e,t,r){const{sourceTitle:n,sourceTitleDetail:i,listIndex:s,isRemoved:a,listHeight:o,listWidth:c,listTop:l,listRight:d,listBottom:u,listLeft:p}=e;return{dragIndex:s,sourceTitle:n,sourceTitleDetail:i,isRemoved:a,listHeight:o,listWidth:c,listTop:l,listRight:d,listBottom:u,listLeft:p}},endDrag(e,t,r){e.onItemDragEnd({didDrop:t.didDrop()})}},Zp={hover(e,t,r){const n=t.getClientOffset(),i=(0,Yp.findDOMNode)(r).getBoundingClientRect(),s=(i.bottom-i.top)/2,a=n.y-i.top,o=t.getItem().dragIndex,c=e.listIndex;let l;l=c===o?c:a>s?c+1:c,e.onItemDragMove({dragIndex:o,dropIndex:l})}};class em extends i.Component{componentDidMount(){this.props.connectDragPreview((0,$p.s)())}render(){const{sourceTitle:e,sourceTitleDetail:t,isOver:r,isDragging:n,isDraggingBefore:s,isDraggingAfter:a,connectDropTarget:o,connectDragSource:c}=this.props;return i.createElement("div",{ref:o,className:jt()("SourceListItemDragSource-container-m_4j23",r&&"SourceListItemDragSource-isOver-Zwfenf",n&&Xp.A$,r&&s&&Xp.Qh,r&&a&&Xp.El)},i.createElement(Up,{connectDragSource:c,detail:t,title:e}))}}const tm=(0,Kp.o)(Bp.YL,Zp,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((0,Qp.I)(Bp.YL,Jp,(function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(em));var rm=Object.defineProperty,nm=Object.defineProperties,im=Object.getOwnPropertyDescriptors,sm=Object.getOwnPropertySymbols,am=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,cm=(e,t,r)=>t in e?rm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lm=(e,t)=>{for(var r in t||(t={}))am.call(t,r)&&cm(e,r,t[r]);if(sm)for(var r of sm(t))om.call(t,r)&&cm(e,r,t[r]);return e},dm=(e,t)=>nm(e,im(t)),um=(e,t,r)=>(cm(e,"symbol"!=typeof t?t+"":t,r),r);const pm={dragIndex:-1,dropIndex:-1,hasValidDropTarget:!1};class mm extends i.Component{constructor(e,t){super(e,t),um(this,"onItemDragMove",(e=>{const{dragIndex:t,dropIndex:r}=e,{dragIndex:n,dropIndex:i}=this.state;let s=r!==i?r:i;const a=t!==n?t:n;if((s===a||s>a&&s-a==1)&&(s=-1),a!==n||s!==i){const e={dragIndex:a,dropIndex:s,hasValidDropTarget:-1!==s};this.setState(e)}})),um(this,"onItemDragEnd",(e=>{const{dragIndex:t,dropIndex:r}=this.state;let n;e.didDrop&&-1!==r&&(n=()=>{this.props.onReorderSource({fromIndex:t,toIndex:r>t?r-1:r})}),this.setState(pm,n)})),um(this,"onMeasure",(e=>{const{height:t,width:r,x:n,y:i}=e;this.setState({listHeight:t,listWidth:r,listTop:i,listRight:n+r,listBottom:i+t,listLeft:n})})),this.state=dm(lm({},pm),{listHeight:0,listWidth:0,listTop:0,listRight:0,listBottom:0,listLeft:0})}render(){const{className:e,sources:t}=this.props,{dropIndex:r,hasValidDropTarget:n}=this.state;return i.createElement(Fp.c,{className:e,ignoreTransforms:!0,onMeasure:this.onMeasure},t.map(((e,t)=>{const s=n&&r===t,a=n&&r===t+1;return i.createElement(tm,dm(lm({},this.state),{key:e.key,hasValidDropTarget:n,isDraggingAfter:a,isDraggingBefore:s,listIndex:t,sourceTitle:e.title,sourceTitleDetail:e.titleDetail,onItemDragEnd:this.onItemDragEnd,onItemDragMove:this.onItemDragMove}))})),i.createElement(Vp.c,null,i.createElement(qp,null)))}}um(mm,"defaultProps",{className:"SortableSources-container-Ie2iGN Measure-container-_70qZ9"});const hm=mm;var ym=Object.defineProperty,gm=Object.getOwnPropertySymbols,fm=Object.prototype.hasOwnProperty,vm=Object.prototype.propertyIsEnumerable,bm=(e,t,r)=>t in e?ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Sm(e){return i.createElement("div",((e,t)=>{for(var r in t||(t={}))fm.call(t,r)&&bm(e,r,t[r]);if(gm)for(var r of gm(t))vm.call(t,r)&&bm(e,r,t[r]);return e})({},e))}Sm.defaultProps={className:"SourceSidebarHeader-header-EoXy2_"};const Pm=Sm;var Im=r(62900),Em=Object.defineProperty,wm=Object.getOwnPropertySymbols,Cm=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,Mm=(e,t,r)=>t in e?Em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Tm(e){const{className:t}=e;return i.createElement(Im.c,((e,t)=>{for(var r in t||(t={}))Cm.call(t,r)&&Mm(e,r,t[r]);if(wm)for(var r of wm(t))Om.call(t,r)&&Mm(e,r,t[r]);return e})({autoScroll:!0,className:t},e))}Tm.defaultProps={className:"SourceSidebarScroller-scroller-kZMnGn Scroller-scroller-aaw2tP"};const Dm=Tm;var km=Object.defineProperty;class xm extends i.Component{constructor(){super(...arguments),((e,t,r)=>{((e,t,r)=>{t in e?km(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"onReorderSource",(({fromIndex:e,toIndex:t})=>{if(e===t)return;const{sources:r,hiddenSidebarSourceKeys:n,onReorderPinnedSources:i}=this.props,s=function(e,t,r){let n=e.slice(0);if(r<0||r>n.length)return n;const i=n[t];return n=function(e,t){const r=e.slice(0);return t<0||t>=r.length||r.splice(t,1),r}(n,t),n.splice(r,0,i),n}(r.map((e=>e.key)),e,t);i({sourceKeys:s.concat(n)})}))}render(){const{sources:e,hasDownloadsSource:t,onCloseReorderPinSources:r}=this.props;return i.createElement(i.Fragment,null,i.createElement(Pm,null,i.createElement("div",{className:"SourceSidebarReorderContent-titleContainer-xlRyl1"},i.createElement("div",{className:"SourceSidebarReorderContent-title-Zc2QBQ"},(0,g.c)("Reorder")),i.createElement(bp.c,{"aria-label":(0,g.c)("Done"),className:"SourceSidebarReorderContent-close-Gd4JXk",onPress:r},i.createElement(gp.default,null)))),i.createElement(Dm,null,i.createElement("div",{className:"SourceSidebarReorderContent-expandedSidebarContent-GSs74t SourceSidebarContent-expandedSidebarContent-e8X1Bo"},i.createElement(Up,{icon:i.createElement(fp.default,null),isDisabled:!0,title:(0,g.c)("Home")}),t?i.createElement(Up,{icon:i.createElement(vp.default,null),isDisabled:!0,title:(0,g.c)("Downloads")}):null,i.createElement(hm,{sources:e,onReorderSource:this.onReorderSource}))))}}const Am=xm,Rm=(0,At.M3)(ds.c,(e=>({hiddenSidebarSourceKeys:e.reduce(((e,t)=>(t.isHidden&&e.push(t.key),e)),[])}))),Nm={onReorderPinnedSources:np.u0},Lm=(0,s.Ul)(Rm,Nm)(Am);var jm=r(57708);const Um=(0,At.M3)(cs.c,(e=>e.filter((e=>!e.isCloud&&!e.isEmbedded&&!!e.friendlyName))));var Fm=r(15364),Vm=r(43108),_m=r(92572),Wm=r(19204),Bm=r(43964),Hm=r(62124);const zm=parseInt(R.c.sourceSidebarServerHeaderIconSize,10),Gm=function(e){const{serverEntityID:t,thumb:r}=e;return i.createElement(Hm.c,{height:zm,serverEntityID:t,url:r,width:zm})},qm=function({server:e}){const t=(0,s.w1)((0,Bm.c)(e.machineIdentifier));return i.createElement(Gm,{serverEntityID:e.entityID,thumb:t})};var Km=r(82188),Qm=r(68564),$m=r(86016);const Ym={spinner:"SourceSidebarBadgedIcon-spinner-KXPdzb",container:"SourceSidebarBadgedIcon-container-Mlq6jq",badge:"SourceSidebarBadgedIcon-badge-YnA33X"};function Xm({isUnavailable:e,isOutOfDate:t,isUnclaimed:r}){return e?(0,g.c)("Unavailable"):t?(0,g.c)("Needs update"):r?(0,g.c)("Unclaimed"):void 0}function Jm(e){const{isRemote:t,isUnclaimed:r,isUnavailable:n,isOutOfDate:s}=e,a=n||r||s;return a||t?i.createElement("div",{className:Ym.badge},a?i.createElement(Qm.default,{accessibilityLabel:Xm(e)}):i.createElement($m.default,{accessibilityLabel:(0,g.c)("Remote server")})):null}function Zm(e){const{icon:t,showBadgedIcon:r,isPending:n,isRemote:s,isUnavailable:a,isOutOfDate:o,isUnclaimed:c}=e;return r?n?i.createElement(yp.c,{className:Ym.spinner}):i.createElement("div",{className:Ym.container},t,i.createElement(Jm,{isOutOfDate:o,isRemote:s,isUnavailable:a,isUnclaimed:c})):t}Zm.defaultProps={showBadgedIcon:!0};const eh=Zm;var th=r(51796),rh=r(36296),nh=r(65800),ih=r(32364),sh=r(3940),ah=r(54505);const oh="SourceSidebarServerHeaderActionsButtons-button-PNpBdW IconButton-button-s4bVCh",ch=(0,th.c)(null,(function(e,t){const r={serverEntityID:t.serverEntityID,metricsPage:t.metricsPage};return{onAddLibraryPress(){e(rh.MN(r))}}}))((function(e){const{className:t,isHovered:r,overflowMenuButtonID:n,isOverflowMenuOpen:s,onAddLibraryPress:a,onOverflowMenuToggle:o}=e,c=ih.c.hasTouchScreen||r||s;return i.createElement("div",{className:c?t:"SourceSidebarServerHeaderActionsButtons-hidden-QubPQZ"},i.createElement(sh.c,{className:oh,"data-testid":"sidebarLibrariesAddButton",iconComponent:nh.c,title:(0,g.c)("Add Library"),onPress:a}),i.createElement(sh.c,{"aria-haspopup":"true",className:oh,"data-testid":"sidebarLibrariesMoreButton",iconComponent:ah.c,id:n,title:(0,g.c)("More Actions"),onPress:o}))}));var lh=r(11724);var dh=Object.defineProperty,uh=Object.defineProperties,ph=Object.getOwnPropertyDescriptors,mh=Object.getOwnPropertySymbols,hh=Object.prototype.hasOwnProperty,yh=Object.prototype.propertyIsEnumerable,gh=(e,t,r)=>t in e?dh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fh=(e,t)=>{for(var r in t||(t={}))hh.call(t,r)&&gh(e,r,t[r]);if(mh)for(var r of mh(t))yh.call(t,r)&&gh(e,r,t[r]);return e};const vh=function(e){const t=e,{serverEntityID:r,machineIdentifier:n,hasServerActions:s,iconNode:a,isPending:o,isRemote:c,isUnavailable:l,isOutOfDate:d,isUnclaimed:u,onToggleLockedPress:p}=t,m=((e,t)=>{var r={};for(var n in e)hh.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&mh)for(var n of mh(e))t.indexOf(n)<0&&yh.call(e,n)&&(r[n]=e[n]);return r})(t,["serverEntityID","machineIdentifier","hasServerActions","iconNode","isPending","isRemote","isUnavailable","isOutOfDate","isUnclaimed","onToggleLockedPress"]),h=(0,vo.c)(),[y,g]=(0,i.useState)(!1),[f,v]=(0,Km.c)(),b=(0,i.useCallback)((()=>{g(!y)}),[y]),S=(0,i.useCallback)((()=>{g(!1)}),[]);return(0,i.useEffect)((()=>{p&&p(y)}),[y,p]),i.createElement(i.Fragment,null,i.createElement(xp,(P=fh(fh({},m),v),uh(P,ph({icon:i.createElement(eh,{icon:i.createElement("div",{className:"SourceSidebarServerHeader-iconContainer-P2XElS SourceSidebarItem-iconImg-fzfjD5"},a),isOutOfDate:d,isPending:o,isRemote:c,isUnavailable:l,isUnclaimed:u}),isActive:y,isSelectedClassName:"SourceSidebarServerHeader-isSelected-nt4TtJ SourceSidebarLink-isSelected-rPGiHo",role:"navigation",titleClassName:"SourceSidebarServerHeader-title-YAQuKs SourceSidebarLink-title-C2NvGy SidebarLink-title-OWiZjJ"}))),s?i.createElement(ch,{className:"SourceSidebarServerHeader-actionContainer-PUOXvi",isHovered:f,isOverflowMenuOpen:y,overflowMenuButtonID:h,serverEntityID:r,onOverflowMenuToggle:b}):null),s?i.createElement(lh.c,{isOverflowMenuOpen:y,machineIdentifier:n,overflowMenuButtonID:h,serverEntityID:r,onOverflowMenuClose:S,onOverflowMenuToggle:b}):null);var P};var bh=r(23228);function Sh(e){const t=window.location.hash,r=new RegExp("^"+(0,bh.c)(e)+"\\b");return!(!t||!e)&&r.test(t)}const Ph=(0,s.Ul)((function(){return(0,At.M3)((e=>e.cloudServer),ls.c,((e,t)=>({cloudServerEntityID:e,thumb:t.thumb})))}))((function(e){const{cloudServerEntityID:t,thumb:r}=e,n="#!/get-plex-media-server";return i.createElement(vh,{iconNode:i.createElement(Gm,{serverEntityID:t,thumb:r}),isSelected:Sh(n),title:(0,g.c)("Your Media"),to:n})}));var Ih=r(47884);function Eh(e){return e.user.optOuts}var wh=r(78364);const Ch=(0,At.M3)(ds.c,(e=>(0,wh.c)(e,(e=>e.key),(e=>e))));var Oh=r(98360),Mh=r(95188),Th=r(15216),Dh=r(4412),kh=r(42176);var xh=Object.defineProperty,Ah=Object.defineProperties,Rh=Object.getOwnPropertyDescriptors,Nh=Object.getOwnPropertySymbols,Lh=Object.prototype.hasOwnProperty,jh=Object.prototype.propertyIsEnumerable,Uh=(e,t,r)=>t in e?xh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Fh={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:({reference:e})=>[0,-.2*e.height]}}]};function Vh(e){const{serverEntityID:t,providerEntityID:r,source:n,dismissedUnclaimedServers:o,size:c,showDetail:d,showIcons:u,metricsOrigin:p,isReorderable:m,onToggleLockedPress:h,onReorderPinSources:y}=e,{machineIdentifier:f,providerIdentifier:v}=(0,$c.c)(),b=(0,pe.c)(),S=(0,Yc.c)(b.source),P=(0,vo.c)(),[I,E]=(0,i.useState)(!1),[w,C]=(0,Km.c)(),O=(0,s.w1)(as.c),M=!!(0,a.SU)({path:Zr.c.hybridGuide,exact:!0}),T=(0,i.useCallback)((()=>{E(!I)}),[I]),D=(0,i.useCallback)((()=>{E(!1)}),[]);(0,i.useEffect)((()=>{h&&h(I)}),[I,h]);const x=(0,i.useCallback)((()=>{(0,_n.WI)("metrics").trackEvent({event:Mh.Wi,interaction:!0,properties:{page:l.gh,identifier:n.providerMetricsIdentifier,action:Ee.Yd,origin:p}})}),[n,p]),A=n.sourceType===Ps.Eq,R=I||w,N=n.isPinned&&!R,L=!1===n.isLocal&&!1===n.isCloud&&!1===n.isUnavailable,j=i.createElement(Dh.c,{source:n});let U=null,F=!1,V=!1,_=d?n.titleDetail:void 0;return n.sourceType===Ps.uO?(U=(0,k.c)("hybridGuide",O?void 0:{machineIdentifier:n.machineIdentifier,providerIdentifier:n.providerIdentifier}),_=O?void 0:_,F=O?M:f===n.machineIdentifier&&v===n.providerIdentifier,V=!O&&!!n.isUnavailable):A||(U=(0,Th.c)(n.isCloud,n.machineIdentifier,n.providerIdentifier,{source:n.directoryID}),F=f===n.machineIdentifier&&v===n.providerIdentifier&&S===n.directoryID,V=n.isUnavailable||A),i.createElement(i.Fragment,null,i.createElement(xp,(W=((e,t)=>{for(var r in t||(t={}))Lh.call(t,r)&&Uh(e,r,t[r]);if(Nh)for(var r of Nh(t))jh.call(t,r)&&Uh(e,r,t[r]);return e})({},C),B={className:"SourceSidebarItem-button-Zng372 SourceSidebarLink-button-rWG8gD SidebarLink-sidebarLink-ns5vmb Link-default-BXtKLo",detail:_,icon:i.createElement(eh,{icon:j,isOutOfDate:n.isOutOfDate,isRemote:L,isUnavailable:V,isUnclaimed:n.isUnclaimedServer&&o&&!o[n.machineIdentifier],showBadgedIcon:u}),isActive:I,isActiveClassName:"SourceSidebarItem-isActive-W5MDaX undefined",isDim:V||n.isOutOfDate,isSelected:F,isSelectedClassName:"SourceSidebarItem-isSelected-YtSvbM SourceSidebarLink-isSelected-rPGiHo",size:d?c:Pp.wH,title:n.title,to:U,onNavigate:x},Ah(W,Rh(B))),i.createElement("span",{className:"SourceSidebarItem-actionContainer-K0PtxH"},N?i.createElement("div",{className:"SourceSidebarItem-pinnedIcon-kWOuPv"},i.createElement(Oh.default,null)):null,i.createElement(sh.c,{className:R?"SourceSidebarItem-overflowButton-twBadH":"SourceSidebarItem-hiddenOverflowButton-OuaYQX","data-testid":"sidebarSourceOverflow",iconComponent:ah.c,id:P,title:(0,g.c)("Actions"),onPress:T}))),i.createElement(kh.c,{isOverflowMenuOpen:I,isReorderable:m,menuOptions:Fh,providerEntityID:r,serverEntityID:t,source:n,target:P,onOverflowMenuClose:D,onReorderPinSources:y}));var W,B}Vh.defaultProps={showDetail:!0,showIcons:!0};const _h=Vh;var Wh=Object.defineProperty,Bh=Object.defineProperties,Hh=Object.getOwnPropertyDescriptors,zh=Object.getOwnPropertySymbols,Gh=Object.prototype.hasOwnProperty,qh=Object.prototype.propertyIsEnumerable,Kh=(e,t,r)=>t in e?Wh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Qh=(0,s.Ul)((function(){return(0,At.M3)((0,At.M3)(((e,{providerEntityIDs:t})=>t),ss.c,((e,t)=>e.map((e=>t[e])))),(0,Ih.c)(),xs.c,Eh,Ch,as.c,((e,t,r,n,i,s)=>{const a=e.reduce(((e,a)=>{const o=(0,zu.c)(a);return(0,Hu.c)({sourceServer:t,sourceProvider:a,directories:o&&o.directories,optOuts:n,isManagedUser:r,hasHybridGuide:s}).forEach((t=>{var r,n;e.push((r=((e,t)=>{for(var r in t||(t={}))Gh.call(t,r)&&Kh(e,r,t[r]);if(zh)for(var r of zh(t))qh.call(t,r)&&Kh(e,r,t[r]);return e})({},t),n={isPinned:!!i[t.key]},Bh(r,Hh(n))))})),e}),[]);return a.sort(((e,t)=>e.title.localeCompare(t.title))),{sources:a}}))}),(function(e,t){return{}}))((function(e){const{sources:t,onToggleLockedPress:r}=e;return i.createElement(i.Fragment,null,t.map((e=>i.createElement(_h,{key:e.key,metricsOrigin:y.KO,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,showDetail:!1,showIcons:!1,source:e,onToggleLockedPress:r}))))})),$h=Qh;var Yh=r(26080),Xh=r(68392);const Jh="SourcesToggleButton-icon-bQY20U";var Zh=Object.defineProperty,ey=Object.getOwnPropertySymbols,ty=Object.prototype.hasOwnProperty,ry=Object.prototype.propertyIsEnumerable,ny=(e,t,r)=>t in e?Zh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function iy(e){const t=e,{showTitle:r,showUnclaimed:n,isAllSources:s}=t,a=((e,t)=>{var r={};for(var n in e)ty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ey)for(var n of ey(e))t.indexOf(n)<0&&ry.call(e,n)&&(r[n]=e[n]);return r})(t,["showTitle","showUnclaimed","isAllSources"]);return i.createElement(bp.c,((e,t)=>{for(var r in t||(t={}))ty.call(t,r)&&ny(e,r,t[r]);if(ey)for(var r of ey(t))ry.call(t,r)&&ny(e,r,t[r]);return e})({className:"SourcesToggleButton-link-B_77gm","data-testid":"sidebarMore"},a),s?i.createElement(h.YR,{align:"center",gap:"xxs",verticalAlign:"center"},i.createElement("div",{className:Jh},i.createElement(Xh.default,null)),r?(0,g.c)("Pinned"):null):i.createElement(h.YR,{align:"center",gap:"xxs",verticalAlign:"center"},r&&n?i.createElement(Qm.default,{accessibilityLabel:(0,g.c)("Unclaimed")}):null,r?(0,g.c)("More"):null,i.createElement("div",{className:Jh},i.createElement(Yh.default,null))))}iy.defaultProps={showTitle:!0};const sy=iy,ay=(0,At.M3)(ls.c,(e=>({providers:e.providers,isPending:e.isProvidersPending,isPopulated:e.isProvidersPopulated,providersError:e.providersError}))),oy=(0,s.Ul)((function(){return(0,At.M3)(Um,ay,(e=>e.cloudServer),ip.c,((e,t,r,n)=>({servers:e,cloudProviders:t,cloudServerEntityID:r,dismissedUnclaimedServers:n})))}),(function(e,t){return{}}))((function(e){const{isExpanded:t,servers:r,cloudProviders:n,cloudServerEntityID:s,dismissedUnclaimedServers:o,showServerDownloadMessage:c,onToggleAllSourcesPress:l,onToggleLockedPress:d}=e,{machineIdentifier:u,providerIdentifier:p}=(0,$c.c)(),m=(0,pe.c)(),h=(0,a.SU)({path:Zr.c.prePlay,exact:!0});return i.createElement(i.Fragment,null,i.createElement(Pm,null,i.createElement(sy,{isAllSources:!0,showTitle:t,onPress:l})),i.createElement(Dm,null,i.createElement("div",{className:"AllSourcesSidebarContent-container-Wz3vfX"},r.map((e=>{const t=u===e.machineIdentifier&&p===Oe.Qh&&!m.source&&!h;return i.createElement("div",{key:e.machineIdentifier,className:"AllSourcesSidebarContent-serverContainer-tKVBtr"},i.createElement(vh,{detail:(0,Vm.c)(e),hasServerActions:e.isFullOwnedServer&&e.isConnected&&!e.isOutOfDate,iconNode:i.createElement(qm,{server:e}),isOutOfDate:e.isOutOfDate,isPending:e.isPending,isRemote:!e.isPrivateConnection&&!e.isUnavailable,isSelected:t,isUnavailable:e.isUnavailable,isUnclaimed:e.isConnected&&!e.isClaimed&&!o[e.machineIdentifier],machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,title:(0,_m.c)(e),to:(0,Wm.c)(e,{identifier:Oe.Qh},null,{key:Fu.u,pageType:Fm.oB}),onToggleLockedPress:d}),i.createElement($h,{providerEntityIDs:e.providers,serverEntityID:e.entityID,onToggleLockedPress:d}))})),n.providers.length?i.createElement(i.Fragment,null,i.createElement(vh,{iconNode:i.createElement("img",{className:"AllSourcesSidebarContent-iconImg-DBtzjj",src:ns}),isPending:n.isPending,isUnavailable:n.providersError,title:(0,g.c)("Plex")}),i.createElement($h,{providerEntityIDs:n.providers,serverEntityID:s,onToggleLockedPress:d})):null,c?i.createElement("div",{className:"AllSourcesSidebarContent-extrasContainer-SdOwow"},i.createElement(Ph,null)):null)))}));var cy=r(51268);const ly=(0,At.M3)(Um,ip.c,((e,t)=>({showUnclaimed:e.some((e=>e.isConnected&&!e.isClaimed&&!t[e.machineIdentifier]))}))),dy=(0,s.Ul)(ly,(function(e,t){return{}}))(sy);var uy=r(58860);const py="#!/get-plex-media-server",my=function(e){const{size:t}=e;return i.createElement(xp,{icon:i.createElement(uy.default,null),isSelected:Sh(py),size:t,title:(0,g.c)("Your Media"),to:py})};var hy=r(92608),yy=r(62200),gy=r(38356);const fy=(0,s.Ul)((function(){return(0,At.M3)(hy.c,yy.c,((e,t)=>({route:(0,gy.c)(e.downloads),isUnavailable:!t||t.isUnavailable})))}),(function(e,t){return{}}))((function(e){const{size:t,route:r,isUnavailable:n}=e,s=!!(0,a.SU)({path:Zr.c.downloads,exact:!0});return i.createElement(xp,{icon:i.createElement(eh,{icon:i.createElement(vp.default,null),isUnavailable:n}),isDim:n,isSelected:s,size:t,title:(0,g.c)("Downloads"),to:r})})),vy=function(e){const{size:t}=e,r=(0,a.SU)({path:Zr.c.home,exact:!0});return i.createElement(xp,{"data-testid":"sidebarHome",icon:i.createElement(fp.default,null),isSelected:!!r,linkClassName:"HomeSourceLink-sourceLink-aaNRiO SourceSidebarLink-sourceLink-hLtTJn",size:t,title:(0,g.c)("Home"),to:"#"})};class by extends i.Component{shouldComponentUpdate(e,t){return(0,cy.c)(this,e,t)}render(){const{sources:e,hasSourceDetail:t,hasDownloadsSource:r,dismissedUnclaimedServers:n,isExpanded:s,hasNoProviders:a,isMoreMenuRequired:o,showServerDownloadMessage:c,onToggleAllSourcesPress:l,onToggleLockedPress:d,onReorderPinSources:u}=this.props,p=t?void 0:Pp.wH;return i.createElement(Dm,null,i.createElement("div",{className:s?"SourceSidebarContent-expandedSidebarContent-e8X1Bo":void 0},i.createElement(vy,{size:p}),e.length?e.map((e=>i.createElement(_h,{key:e.key,dismissedUnclaimedServers:n,isReorderable:!0,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,size:p,source:e,onReorderPinSources:u,onToggleLockedPress:d}))):i.createElement("div",{className:"SourceSidebarContent-zeroState-Ux8ErY"},(0,g.c)("Your favorite sources will appear here. Any source in the MORE menu below can be saved here for quick access.")),c?i.createElement(my,{size:p}):null,r?i.createElement(fy,{size:p}):null,s&&o&&!a?i.createElement(dy,{isAllSources:!1,onPress:l}):null))}}const Sy=by,Py="SourceSidebar-pane-mmshLu";var Iy=Object.defineProperty,Ey=(e,t,r)=>(((e,t,r)=>{t in e?Iy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const wy=(0,hp.c)(jm.c.defaultSpeed),Cy={opacity:{duration:wy},x:{duration:wy,ease:"easeInOut"}},Oy={appear:e=>({opacity:0,scale:1,x:"left"===e?"100%":"-100%",transition:Cy}),enter:{opacity:1,scale:1,x:"0%",transition:Cy},exit:e=>({opacity:0,scale:1,x:"left"===e?"100%":"-100%",transition:Cy})};function My(e,t){return t?e?"SourceSidebar-expandedSidebar-B0cYmO SourceSidebar-sidebar-yw2lNo":"SourceSidebar-collapsedSidebar-heX4mD SourceSidebar-sidebar-yw2lNo":"SourceSidebar-openSidebar-I364_Z SourceSidebar-sidebar-yw2lNo"}class Ty extends i.Component{constructor(e,t){super(e,t),Ey(this,"_setExpandedTimeoutID"),Ey(this,"onMouseEnter",(()=>{this.props.isSidebarCollapsed&&(this.resetExpandTimeout(),this.setState({isMouseOver:!0}))})),Ey(this,"onMouseLeave",(()=>{this.clearSetExpandedTimeout(),this.setState((e=>({isExpanded:!!e.isLocked&&e.isExpanded,isMouseOver:!1})))})),Ey(this,"onMouseMove",(()=>{this.props.isSidebarCollapsed&&!this.state.isLocked&&this.resetExpandTimeout()})),Ey(this,"onToggleAllSourcesPress",(()=>{this.setState({isSidebarAllSources:!this.state.isSidebarAllSources})})),Ey(this,"onToggleLockedPress",(e=>{this.setState((t=>{const r=null!=e?e:!t.isLocked;return{isLocked:r,isExpanded:!(!t.isMouseOver&&!r)&&t.isExpanded}}))})),Ey(this,"onReorderPinSources",(()=>{this.setState({isReordering:!0,isLocked:!0})})),Ey(this,"onCloseReorderPinSources",(()=>{this.setState({isReordering:!1,isLocked:!1})})),this.state={isMouseOver:!1,isLocked:!1,isExpanded:!1,isSidebarCollapsed:e.isSidebarCollapsed,isReordering:!1,isSidebarAllSources:!1}}static getDerivedStateFromProps(e,t){return t.isSidebarCollapsed!==e.isSidebarCollapsed?{isSidebarCollapsed:e.isSidebarCollapsed}:null}componentWillUnmount(){this.clearSetExpandedTimeout()}clearSetExpandedTimeout(){this._setExpandedTimeoutID&&(window.clearTimeout(this._setExpandedTimeoutID),this._setExpandedTimeoutID=null)}resetExpandTimeout(){this.clearSetExpandedTimeout(),this._setExpandedTimeoutID=window.setTimeout((()=>this.setState({isExpanded:!0})),250)}render(){const{sources:e,hasSourceDetail:t,hasDownloadsSource:r,hasDismissedServerDownloadMessage:n,shouldShowServerDownloadMessage:s,dismissedUnclaimedServers:a,isPending:o,hasNoProviders:c,isMoreMenuRequired:d,isSidebarCollapsed:u}=this.props,{isExpanded:p,isReordering:m,isSidebarAllSources:h}=this.state,y=!u||p||m;return o?i.createElement(up,{isSidebarCollapsed:u},i.createElement(yp.c,null)):i.createElement(S.cp,{metricsPage:l.gh},i.createElement(i.Fragment,null,u?i.createElement("div",{className:"SourceSidebar-sidebarUnderlay-Npir7j"}):null,i.createElement("div",{className:My(p||m,u),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove},m?i.createElement("div",{className:Py},i.createElement(Lm,{hasDownloadsSource:r,sources:e,onCloseReorderPinSources:this.onCloseReorderPinSources})):i.createElement(mp.Iz,{initial:!1},i.createElement(mp.q4.div,{key:h?"right":"left",animate:"enter",className:Py,custom:h?"right":"left",exit:"exit",initial:"appear",variants:Oy},h?i.createElement(oy,{isExpanded:y,showServerDownloadMessage:s,onToggleAllSourcesPress:this.onToggleAllSourcesPress,onToggleLockedPress:this.onToggleLockedPress}):i.createElement(Sy,{dismissedUnclaimedServers:a,hasDownloadsSource:r,hasNoProviders:c,hasSourceDetail:t,isExpanded:y,isMoreMenuRequired:d,showServerDownloadMessage:s&&!n,sources:e,onReorderPinSources:this.onReorderPinSources,onToggleAllSourcesPress:this.onToggleAllSourcesPress,onToggleLockedPress:this.onToggleLockedPress}))))))}}const Dy=Ty;var ky=Object.defineProperty,xy=Object.defineProperties,Ay=Object.getOwnPropertyDescriptors,Ry=Object.getOwnPropertySymbols,Ny=Object.prototype.hasOwnProperty,Ly=Object.prototype.propertyIsEnumerable,jy=(e,t,r)=>t in e?ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Uy={dispatchSetupSources:np.iU,dispatchStartFirstRunExperience:np._K},Fy=(0,s.Ul)((function(){return(0,At.M3)(ep.c,Zu.c,Ju,(0,At.M3)(os.c,Bu.c,((e,t)=>t.reduce(((t,r)=>{const n=(0,zu.c)(r),i=(0,Hu.c)({sourceServer:e,sourceProvider:r,directories:n&&n.directories});return t.push(...i),t}),[]))),ks(),ip.c,ap,lp,tp.c,Yu,(0,At.M3)($u.c,ks(),Qu,((e,t,r)=>{if(!r)return!1;for(let r=0;r<e.length;r++){const{server:n,provider:i}=e[r];if(!n.isCloud&&n.friendlyName&&!n.isUnauthorized&&!n.isPending)return!0;if(n.isEmbedded)continue;if(!i)continue;const s=(0,zu.c)(i);if(!s)continue;const{directories:a}=s;if(a.some((e=>!t.find((t=>t.providerIdentifier===i.identifier&&t.directoryID===e.id)))))return!0}return!1})),((e,t,r,n,i,s,a,c,l,d,u)=>{const{isSidebarCollapsed:p,sidebarSettings:{hasCompletedSetup:m}}=l;return{isAnonymousUser:e,hasInitialSources:t,hasPreferredEligibleServers:r,dismissedUnclaimedServers:s,defaultSources:n,sources:i,hasSourceDetail:i.some((e=>!!e.titleDetail)),hasDownloadsSource:o.c.allowSyncDownload,hasDismissedServerDownloadMessage:a,shouldShowServerDownloadMessage:c,hasCompletedSetup:m,isSidebarCollapsed:p,hasNoProviders:d,isMoreMenuRequired:u}}))}),Uy)((function(e){const t=e,{isAnonymousUser:r,hasPreferredEligibleServers:n,hasInitialSources:s,hasCompletedSetup:a,defaultSources:o,dispatchStartFirstRunExperience:c,dispatchSetupSources:d}=t,u=((e,t)=>{var r={};for(var n in e)Ny.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ry)for(var n of Ry(e))t.indexOf(n)<0&&Ly.call(e,n)&&(r[n]=e[n]);return r})(t,["isAnonymousUser","hasPreferredEligibleServers","hasInitialSources","hasCompletedSetup","defaultSources","dispatchStartFirstRunExperience","dispatchSetupSources"]),[p,m]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{r||!n||a||p?s&&!a&&d({sources:o}):(m(!0),c())}),[c,d,r,n,a,s,o,p,m]),i.createElement(rp.c,{isDelegated:!0,page:l.gh},i.createElement(Dy,(h=((e,t)=>{for(var r in t||(t={}))Ny.call(t,r)&&jy(e,r,t[r]);if(Ry)for(var r of Ry(t))Ly.call(t,r)&&jy(e,r,t[r]);return e})({},u),xy(h,Ay({isPending:!a})))));var h}));class Vy extends i.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e){cu.c.error(e)}render(){return this.state.hasError?i.createElement(pp,null):i.createElement(Fy,null)}}const _y=Vy;function Wy(){var e;const{machineIdentifier:t}=(0,a.W4)(),[r,n]=(0,i.useState)(!1),o=(0,s.OY)(),c=(0,i.useMemo)((()=>(0,Vu.c)(t)),[t]),l=(0,s.w1)(c),d=null==(e=l.desktop)?void 0:e.settings.find((e=>"AcceptedEULA"===e.id));return(0,i.useEffect)((()=>{const e=window.setInterval((()=>{o((0,f.W0)())}),2e3);return()=>{window.clearInterval(e)}}),[o]),(0,i.useEffect)((()=>{d&&l.isFullOwnedServer&&l.isConnected&&l.isClaimed&&(d.value?(0,hl.c)("media",{machineIdentifier:l.machineIdentifier,providerIdentifier:Oe.Qh},{key:Fu.u,pageType:Fe.Qf.Hub}):(0,hl.c)("serverSetup",{machineIdentifier:l.machineIdentifier}))}),[d,l.isClaimed,l.isConnected,l.isFullOwnedServer,l.machineIdentifier]),(0,i.useEffect)((()=>{const e=window.setTimeout((()=>{n(!0)}),3e5);return()=>{window.clearTimeout(e)}}),[]),i.createElement(Wu.c,null,i.createElement(_u.c,null,i.createElement(_y,null),r?i.createElement(js.c,null,(0,g.c)("Something went wrong. Make sure the server is available and try again.")):i.createElement(E.c,{description:(0,g.c)("Initializing Plex Media Server")},i.createElement(O.c,null))))}var By=r(18168),Hy=r(6084),zy=r(97612),Gy=r(37588),qy=r.n(Gy),Ky=r(95720),Qy=r.n(Ky),$y=r(43876),Yy=r(44060),Xy=r(6996),Jy=r(58036),Zy=r(54292);var eg=r(22632),tg=r(77010),rg=r(10348),ng=r(19572),ig=r(22716),sg=r(73416),ag=r(44152),og=r(39272),cg=r(56018);const lg=function(){return i.createElement("div",{className:"PlexHeaderImage-plexImageContainer-CYUorb"},i.createElement("div",{className:"PlexHeaderImage-plexImage-P1bVmG"}))};var dg=r(9464);var ug=Object.defineProperty,pg=Object.getOwnPropertySymbols,mg=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,yg=(e,t,r)=>t in e?ug(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function gg(e){const t=e,{component:r}=t,n=((e,t)=>{var r={};for(var n in e)mg.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&pg)for(var n of pg(e))t.indexOf(n)<0&&hg.call(e,n)&&(r[n]=e[n]);return r})(t,["component"]);return i.createElement(r,((e,t)=>{for(var r in t||(t={}))mg.call(t,r)&&yg(e,r,t[r]);if(pg)for(var r of pg(t))hg.call(t,r)&&yg(e,r,t[r]);return e})({className:"SignInFormSection-section-gdej2Z"},n))}gg.defaultProps={component:"div"};const fg=gg,vg="SkipSignInMessage-item-qgyBgn",bg=function(e){return i.createElement(fg,null,i.createElement("div",{className:"SkipSignInMessage-header-mIp8T7"},(0,g.c)("You must be signed in for Plex to work properly. If you are not signed in")),i.createElement("ul",{className:"SkipSignInMessage-list-Yahrrf"},i.createElement("li",{className:vg},(0,g.c)("Any connections between your media server and players WILL NOT BE SECURE")),i.createElement("li",{className:vg},(0,g.c)("You may experience degraded streaming performance")),i.createElement("li",{className:vg},(0,g.c)("It will be more difficult, and sometimes impossible, to find your server and discover players")),i.createElement("li",{className:vg},(0,g.c)("You will not be able to access your media server from outside your home")),i.createElement("li",{className:vg},(0,g.c)("You will not be able to access content and many features provided by Plex"))))};var Sg=r(24808),Pg=r(35200);var Ig=Object.defineProperty,Eg=(e,t,r)=>(((e,t,r)=>{t in e?Ig(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class wg extends i.Component{constructor(e,t){super(e,t),Eg(this,"onSwitchToSkipSignInPress",(()=>{this.setState({isSkipSignInVisible:!0})})),Eg(this,"onStillTherePress",(()=>{this.setState({isSkipSignInVisible:!1}),this.props.onStillTherePress()})),Eg(this,"onSignInPress",(()=>{this.setState({isSkipSignInVisible:!1}),this.props.onSignInPress()})),this.state={isSkipSignInVisible:!1}}render(){const{to:e,code:t,signUp:r,isBusy:n,onSkipSignInPress:s}=this.props,o=!(n||t),c=!o,l=this.state.isSkipSignInVisible,d=(0,a.ot)(Pg.c.location.pathname,{path:Zr.c.serverSetup});return i.createElement(Im.c,{autoScroll:!0,className:"SignInLaunchPagePoll-page-EgO9ex"},d&&!l?i.createElement(bp.c,{className:"SignInLaunchPagePoll-switchToSkipSignInLink-tZtlV9",kind:Sg.ac,onPress:this.onSwitchToSkipSignInPress},(0,g.c)("What's this?")):null,i.createElement(lg,null),i.createElement("div",{className:"SignInLaunchPagePoll-container-GbUpky"},l?i.createElement(bg,null):null,i.createElement("div",{className:"SignInLaunchPagePoll-section-sAmgqd"},c?i.createElement(dg.c,{className:"SignInLaunchPagePoll-button-mlNjmR SpinnerButton-button-tcanHL Button-button-TxWeuE Link-link-SxPFpG Button-large-mFYLSo",isSpinning:!t,kind:Sg.ac,size:Pp.OM,target:"_blank",to:e,type:"submit",onPress:this.onSignInPress},r?(0,g.c)("Sign up"):(0,g.c)("Sign in")):null,o?i.createElement(bp.c,{kind:Sg.ac,onPress:this.onStillTherePress},(0,g.c)("Are you still there?")):null)),l?i.createElement(bp.c,{className:"SignInLaunchPagePoll-addendumLink-nRxdyh",kind:Sg.ac,onPress:s},(0,g.c)("Skip and accept limited functionality")):null)}}const Cg=wg;var Og=Object.defineProperty,Mg=Object.getOwnPropertySymbols,Tg=Object.prototype.hasOwnProperty,Dg=Object.prototype.propertyIsEnumerable,kg=(e,t,r)=>t in e?Og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xg=(e,t,r)=>(kg(e,"symbol"!=typeof t?t+"":t,r),r);const Ag={dispatchPreloadPIN:ng.y0,dispatchBeginPolling:ng.gx,dispatchStopPolling:ng.ew,dispatchSkipSignIn:ng._Q};class Rg extends i.Component{constructor(){super(...arguments),xg(this,"onSignInPress",(()=>{this.props.dispatchBeginPolling({pinID:this.props.pinID})})),xg(this,"onStillTherePress",(()=>{this.props.dispatchPreloadPIN()})),xg(this,"onSkipSignInPress",(()=>{this.props.dispatchSkipSignIn()}))}componentDidMount(){this.props.dispatchPreloadPIN()}componentWillUnmount(){this.props.dispatchStopPolling()}render(){const e=this.props,{dispatchPreloadPIN:t,dispatchBeginPolling:r,dispatchStopPolling:n,dispatchSkipSignIn:s}=e,a=((e,t)=>{var r={};for(var n in e)Tg.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Mg)for(var n of Mg(e))t.indexOf(n)<0&&Dg.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchPreloadPIN","dispatchBeginPolling","dispatchStopPolling","dispatchSkipSignIn"]);return i.createElement(cg.c,((e,t)=>{for(var r in t||(t={}))Tg.call(t,r)&&kg(e,r,t[r]);if(Mg)for(var r of Mg(t))Dg.call(t,r)&&kg(e,r,t[r]);return e})({component:Cg,onSignInPress:this.onSignInPress,onSkipSignInPress:this.onSkipSignInPress,onStillTherePress:this.onStillTherePress},a))}}const Ng=(0,s.Ul)(rg.c,Ag)(Rg);var Lg=Object.defineProperty,jg=Object.getOwnPropertySymbols,Ug=Object.prototype.hasOwnProperty,Fg=Object.prototype.propertyIsEnumerable,Vg=(e,t,r)=>t in e?Lg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _g={dispatchReadStoredPIN:ng.kT};class Wg extends i.Component{componentDidMount(){this.props.dispatchReadStoredPIN({shouldCreatePIN:!0})}render(){const e=this.props,{pinID:t,dispatchReadStoredPIN:r}=e,n=((e,t)=>{var r={};for(var n in e)Ug.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&jg)for(var n of jg(e))t.indexOf(n)<0&&Fg.call(e,n)&&(r[n]=e[n]);return r})(e,["pinID","dispatchReadStoredPIN"]);return t?i.createElement(cg.c,((e,t)=>{for(var r in t||(t={}))Ug.call(t,r)&&Vg(e,r,t[r]);if(jg)for(var r of jg(t))Fg.call(t,r)&&Vg(e,r,t[r]);return e})({component:og.c,pinID:t,replace:!0},n)):i.createElement(Jc.c,null,i.createElement(yp.c,null))}}const Bg=(0,s.Ul)(rg.c,_g)(Wg);var Hg=Object.defineProperty,zg=Object.getOwnPropertySymbols,Gg=Object.prototype.hasOwnProperty,qg=Object.prototype.propertyIsEnumerable,Kg=(e,t,r)=>t in e?Hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qg=(e,t)=>{for(var r in t||(t={}))Gg.call(t,r)&&Kg(e,r,t[r]);if(zg)for(var r of zg(t))qg.call(t,r)&&Kg(e,r,t[r]);return e};const $g={dispatchResetAuthCodeExchange:ng.op,dispatchSignInWithAuthToken:ig.ML};class Yg extends i.Component{componentDidMount(){this.props.dispatchResetAuthCodeExchange()}componentDidUpdate(e){this.props.authToken!==e.authToken&&this.props.authToken&&this.props.dispatchSignInWithAuthToken({authToken:this.props.authToken,onSignInSuccess:this.props.signUp?()=>(0,hl.c)("home"):null})}render(){const e=this.props,{providerID:t,errorMessage:r,fatalErrorMessage:n,signUp:s,isPollClient:a,dispatchResetAuthCodeExchange:o,dispatchSignInWithAuthToken:c}=e,l=((e,t)=>{var r={};for(var n in e)Gg.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&zg)for(var n of zg(e))t.indexOf(n)<0&&qg.call(e,n)&&(r[n]=e[n]);return r})(e,["providerID","errorMessage","fatalErrorMessage","signUp","isPollClient","dispatchResetAuthCodeExchange","dispatchSignInWithAuthToken"]);return n?i.createElement(ag.c,null):t?i.createElement(cg.c,Qg({component:og.c,providerID:t,replace:!0,signUp:s},l)):a?i.createElement(Ng,Qg({signUp:s},l)):i.createElement(Bg,{signUp:s})}}const Xg=(0,s.Ul)((function(){return(0,At.M3)(rg.c,(e=>Qg({isPollClient:(0,sg.c)()},e)))}),$g)(Yg),Jg=tg.c.extend({component:e=>i.createElement(eg.c,null,i.createElement(Xg,{signUp:e.signUp}))});var Zg=r(47840),ef=r(60712),tf=r(95392),rf=r(22636),nf=r.n(rf);const sf=Yy.c.ItemView.extend({className:"setup-basic-container",template:nf(),ui:{modalContainer:".modal-container",connectCheckbox:"#connect",publishServerCheckbox:"#PublishServerOnPlexOnlineKey",submitBtn:".submit-btn",nextBtn:".next-btn"},collectionEvents:{reset:"render"},events:{"change input[id]":"onInputChange","submit #setup-basic-form":"onSubmit","change #PublishServerOnPlexOnlineKey":"onPublishSettingChange"},initialize:function(){Qy().bindAll(this,"onPlexPassModalClose"),this.collection=this.model.get("desktop").get("settings"),this.collection.populate({reset:!0}),this.model.isVersionOrNewer("0.9.15.5")?this.changes={PublishServerOnPlexOnlineKey:1}:this.changes={FirstRun:0,PublishServerOnPlexOnlineKey:1};const e=this.model.get("superToken");e&&(this.changes.PlexOnlineToken=e);const t=(0,_n.WI)("appModel").get("user").get("hasPlexSubscription");this.isPlexPassModalOpen=!this.model.get("isDesktop")&&!t},serializeData:function(){const e=this.model.toJSON(),t=this.collection.get("FriendlyName"),r=this.collection.get("PublishServerOnPlexOnlineKey");return{server:e,friendlyNameSetting:t?t.toJSON():null,publishSetting:r?r.toJSON():null}},mountReact:function(){Yp.render(i.createElement(s.C_,{store:(0,_n.WI)("appStore")},i.createElement(tf.c,{isOpen:this.isPlexPassModalOpen,metricsProperties:{context:c.SETUP_WIZARD,firstRun:!0},origin:ef.c1,onModalClose:this.onPlexPassModalClose})),this.ui.modalContainer[0])},unmountReact:function(){this.isRendered&&Yp.unmountComponentAtNode(this.ui.modalContainer[0])},submit:function(){const e=this.ui.submitBtn;if(e.hasClass("active"))return;e.addClass("active"),(0,_n.WI)("metrics").trackClick({action:Ee.gb,page:l.Gx,pane:"name",firstRun:!0,value:this.ui.publishServerCheckbox.is(":checked")});let t=this.save();t=t.done((()=>{this.ui.nextBtn.click()})),t.always((function(){e.removeClass("active")}))},save(){return this.saveChanges().then((()=>this.claimServer()))},saveChanges(){return(Qy().isEmpty(this.changes)?qy().Deferred().resolve().promise():this.collection.first().save(this.changes)).then(null,(()=>{ou.c.trigger("show:alert",{type:"error",message:(0,g.c)("There was a problem saving these settings.")})}))},claimServer(){const e=(0,_n.WI)("appModel"),t=e.get("cloudServer");return!this.model.supports("claimServer")||this.model.get("isClaimed")||this.model.get("superToken")||e.get("user").get("anonymous")?qy().Deferred().resolve().promise():(0,Zg.c)(t.populate().then((()=>$y.c.execute("signInServer",{claim:!0,cloudAccount:this.model.get("desktop").get("cloudAccount")}).then(null,(()=>{ou.c.trigger("show:alert",{type:"error",message:(0,g.c)("There was a problem claiming this server.")})})))))},onBeforeRender:function(){this.unmountReact()},onRender:function(){this.mountReact()},onClose:function(){this.unmountReact()},onInputChange:function(e){const t=e.currentTarget;let r=t.value;"checkbox"===t.type&&(r=t.checked?1:0),this.changes[t.id]=r},onSubmit:function(e){e.preventDefault(),this.submit()},onPlexPassModalClose:function(){this.isPlexPassModalOpen=!1,this.mountReact()}}),af=sf;var of=r(65284),cf=r(73528),lf=r.n(cf);const df=Yy.c.ItemView.extend({className:"setup-complete-container",template:lf(),ui:{modalContainer:".modal-container",submitBtn:".submit-btn",doneBtn:".done-btn"},collectionEvents:{reset:"render"},events:{"change input[id]":"onInputChange","submit #setup-complete-form":"onSubmit"},initialize:function(){this.collection=this.model.get("desktop").get("settings"),this.collection.populate({reset:!0}),this.changes={};const e=_n.WI("appModel").get("user");e.get("isSignedIn")?e.fetch().done(this.whenRendered((()=>{this.ui.submitBtn.removeClass("active")}))):this.once("attached",(()=>{this.ui.submitBtn.removeClass("active")}))},serializeData:function(){const e=this.collection.get("collectUsageData");return{devicesImg:"data:image/svg+xml,%3csvg width='548' height='360' viewBox='0 0 548 360' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eGroup%3c/title%3e%3cdefs%3e%3cpath id='a' d='M196 173v13H81v-14'/%3e%3cmask id='j' x='0' y='0' width='115' height='14' fill='white'%3e%3cuse xlink:href='%23a'/%3e%3c/mask%3e%3cpath d='M6.522 173C2.92 173 0 170.631 0 167.71V5.29C0 2.37 2.92 0 6.522 0h262.956C273.08 0 276 2.369 276 5.29v162.42c0 2.921-2.92 5.29-6.522 5.29H6.522z' id='b'/%3e%3cmask id='k' x='0' y='0' width='276' height='173' fill='white'%3e%3cuse xlink:href='%23b'/%3e%3c/mask%3e%3cpath id='c' d='M13 160.185h249.91V13H13z'/%3e%3cmask id='l' x='0' y='0' width='249.911' height='147.185' fill='white'%3e%3cuse xlink:href='%23c'/%3e%3c/mask%3e%3crect id='d' width='192' height='140' rx='6'/%3e%3cmask id='m' x='0' y='0' width='192' height='140' fill='white'%3e%3cuse xlink:href='%23d'/%3e%3c/mask%3e%3cpath id='e' d='M20 11h152v118H20z'/%3e%3cmask id='n' x='0' y='0' width='152' height='118' fill='white'%3e%3cuse xlink:href='%23e'/%3e%3c/mask%3e%3ccircle id='f' cx='12' cy='70' r='6'/%3e%3cmask id='o' x='0' y='0' width='12' height='12' fill='white'%3e%3cuse xlink:href='%23f'/%3e%3c/mask%3e%3cpath id='g' d='M0 18h72v84H0z'/%3e%3cmask id='p' x='0' y='0' width='72' height='84' fill='white'%3e%3cuse xlink:href='%23g'/%3e%3c/mask%3e%3ccircle id='h' cx='36' cy='109' r='5'/%3e%3cmask id='q' x='0' y='0' width='10' height='10' fill='white'%3e%3cuse xlink:href='%23h'/%3e%3c/mask%3e%3crect id='i' width='72' height='120' rx='8.4'/%3e%3cmask id='r' x='0' y='0' width='72' height='120' fill='white'%3e%3cuse xlink:href='%23i'/%3e%3c/mask%3e%3c/defs%3e%3cg fill='none' fill-rule='evenodd'%3e%3cg transform='translate(272 87)'%3e%3cuse stroke='%23BBB' mask='url(%23j)' stroke-width='6' xlink:href='%23a'/%3e%3cuse stroke='%23BBB' mask='url(%23k)' stroke-width='6' xlink:href='%23b'/%3e%3cuse stroke='%23BBB' mask='url(%23l)' stroke-width='4' xlink:href='%23c'/%3e%3cpath fill='%23F8AD18' d='M137.042 120.75H117l22.19-34.375L117 52h20.042l22.19 34.375z'/%3e%3c/g%3e%3cg transform='translate(0 220)'%3e%3cuse stroke='%23BBB' mask='url(%23m)' stroke-width='6' xlink:href='%23d'/%3e%3cuse stroke='%23BBB' mask='url(%23n)' stroke-width='4' xlink:href='%23e'/%3e%3cuse stroke='%23BBB' mask='url(%23o)' stroke-width='4' xlink:href='%23f'/%3e%3ccircle fill='%23BBB' cx='180' cy='70' r='2'/%3e%3cpath fill='%23F8AD18' d='M94.58 102H76l20.645-30.968L76 38h18.58l20.646 33.032z'/%3e%3c/g%3e%3cg transform='translate(60)'%3e%3crect width='72' height='120' rx='8.4'/%3e%3cuse stroke='%23BBB' mask='url(%23p)' stroke-width='4' xlink:href='%23g'/%3e%3cuse stroke='%23BBB' mask='url(%23q)' stroke-width='4' xlink:href='%23h'/%3e%3crect fill='%23BBB' x='31' y='10' width='10.8' height='2.4' rx='1.2'/%3e%3cuse stroke='%23BBB' mask='url(%23r)' stroke-width='6' xlink:href='%23i'/%3e%3cpath d='M35.032 79H24l12.258-18.387L24 41h11.032L47.29 60.613z' fill='%23F8AD18'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",collectUsageDataSetting:e?e.toJSON():null}},submit:function(){const e=this.ui.submitBtn;e.hasClass("active")||(e.addClass("active"),this.save().always(this.whenRendered((function(){this.ui.doneBtn.click(),e.removeClass("active")}))))},save:function(){this.saved=!0,Qy().has(this.changes,"collectUsageData")&&!this.changes.collectUsageData&&_n.WI("metrics").trackClick({action:Ee.Ux,page:l.Gx,pane:"complete",firstRun:!0});const e=this.collection.first().save(this.changes),t=this.model.get("sections").filter((e=>e.isNew())).map((e=>e.save())),r=qy().when(e,(0,of.c)(t));return r.fail((()=>{ou.c.trigger("show:alert",{type:"error",message:(0,g.c)("There was a problem saving these settings.")})})),r},onClose:function(){this.saved||this.save()},onInputChange:function(e){const t=e.currentTarget;let r=t.value;"checkbox"===t.type&&(r=t.checked?1:0),this.changes[t.id]=r},onSubmit:function(e){e.preventDefault(),this.submit()}}),uf=df;var pf=r(29300),mf=r.n(pf);const hf=Yy.c.ItemView.extend({className:"setup-error-container",template:mf()});var yf=r(5528),gf=r.n(yf);const ff=Yy.c.ItemView.extend({className:"setup-intro-container",template:gf(),serializeData:()=>({computerImg:"data:image/svg+xml,%3csvg width='810' height='230' viewBox='0 0 810 230' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3ePMS %e2%86%92 Computer%3c/title%3e%3cdefs%3e%3cpath d='M159.595 207.477c-.494-2.47-2.65-9.732-3.347-21.444H99.36c-.698 11.712-2.853 18.974-3.346 21.444-.976 4.88-4.79 8.829-12.04 11.059-5.912 1.819-5.158 10.693 1.674 10.693h84.314c6.831 0 7.587-8.873 1.673-10.693-7.25-2.23-11.064-6.178-12.04-11.059z' id='a'/%3e%3cmask id='d' x='0' y='0' width='95.633' height='43.196' fill='white'%3e%3cuse xlink:href='%23a'/%3e%3c/mask%3e%3cpath d='M256 147.5v31.564c0 5.527-4.47 10.008-9.996 10.008H9.996c-5.52 0-9.996-4.476-9.996-10.008V10.003C0 4.48 4.47 0 9.996 0h236.008C251.524 0 256 4.485 256 10.003V147.5z' id='b'/%3e%3cmask id='e' x='0' y='0' width='256' height='189.072' fill='white'%3e%3cuse xlink:href='%23b'/%3e%3c/mask%3e%3ccircle id='c' cx='110' cy='110' r='110'/%3e%3cmask id='f' x='0' y='0' width='220' height='220' fill='white'%3e%3cuse xlink:href='%23c'/%3e%3c/mask%3e%3c/defs%3e%3cg fill='none' fill-rule='evenodd'%3e%3cg transform='translate(553)' stroke='%23BBB'%3e%3cuse mask='url(%23d)' stroke-width='6' xlink:href='%23a'/%3e%3cuse mask='url(%23e)' stroke-width='6' xlink:href='%23b'/%3e%3cpath d='M1.5 147.5h253.198' stroke-width='3' stroke-linecap='square'/%3e%3c/g%3e%3cg transform='translate(0 5)'%3e%3cuse stroke='%23F8AD18' mask='url(%23f)' stroke-width='8' fill='%231F1F1F' xlink:href='%23c'/%3e%3cpath fill='%23F8AD18' d='M112.134 179.667H72.11l44.31-69.056-44.31-69.055h40.023l44.31 69.055z'/%3e%3c/g%3e%3cg fill='%23BBB'%3e%3cpath d='M504.5 115l-14 13.5v-27zM479 118a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-16 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mediaImg:"data:image/svg+xml,%3csvg width='715' height='149' viewBox='0 0 715 149' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eMEDIA ICONS%3c/title%3e%3cdefs%3e%3cpath d='M57.897 0H10.008C4.482 0 0 4.481 0 10.008v5.505L57.897 0zm56.776 0h3.89c5.527 0 10.008 4.482 10.008 10.008v41.86L114.673 0zm13.898 114.168v4.395c0 5.527-4.481 10.008-10.008 10.008H74.818l53.753-14.403zM16.02 128.571h-6.01C4.48 128.571 0 124.09 0 118.563V68.789l16.019 59.782z' id='a'/%3e%3cmask id='j' x='-2' y='-2' width='132.571' height='132.571'%3e%3cpath fill='white' d='M-2-2h132.571v132.571H-2z'/%3e%3cuse xlink:href='%23a'/%3e%3c/mask%3e%3crect id='b' width='128.571' height='128.571' rx='10'/%3e%3cmask id='k' x='0' y='0' width='128.571' height='128.571' fill='white'%3e%3cuse xlink:href='%23b'/%3e%3c/mask%3e%3cpath d='M39.782 26.592V83.99c-3.279-1.034-7.234-1.16-11.267-.103-8.767 2.297-14.488 9.26-12.77 15.535 1.718 6.276 10.226 9.505 18.995 7.197 8.101-2.116 14.71-8.217 14.15-14.076l.041-41.718 40.386-5.385v33.165c-3.28-1.034-7.235-1.16-11.268-.102-8.766 2.296-14.488 9.259-12.77 15.535s10.226 9.504 18.995 7.196c8.101-2.116 14.711-8.217 14.151-14.075 0-14.795.04-65.95.04-65.95l-58.683 5.384z' id='c'/%3e%3cmask id='l' x='0' y='0' width='83.025' height='86.156' fill='white'%3e%3cuse xlink:href='%23c'/%3e%3c/mask%3e%3cpath d='M66.113 9.595l-40.705-3.56a8.845 8.845 0 0 0-9.586 8.04l-.39 4.457 50.68-8.937zm55.734 4.877l5.475.479c4.868.425 8.47 4.717 8.044 9.583l-3.895 44.518-9.624-54.58zm4.201 116.56l-.47 5.383a8.845 8.845 0 0 1-9.586 8.04l-44.16-3.863 54.216-9.56zm-104.59 5.153l-7.38-.645c-4.868-.426-8.47-4.718-8.044-9.584l4.517-51.625 10.906 61.854z' id='d'/%3e%3cmask id='m' x='-2' y='-2' width='133.4' height='142.49'%3e%3cpath fill='white' d='M4 4h133.4v142.49H4z'/%3e%3cuse xlink:href='%23d'/%3e%3c/mask%3e%3cpath d='M.607 9.015A8.845 8.845 0 0 1 9.455.169H111.76c4.887 0 8.848 3.961 8.848 8.846v112.308a8.845 8.845 0 0 1-8.848 8.846H9.455c-4.886 0-8.848-3.962-8.848-8.846V9.015z' id='e'/%3e%3cmask id='n' x='0' y='0' width='120' height='130' fill='white'%3e%3cuse xlink:href='%23e'/%3e%3c/mask%3e%3cpath id='f' d='M14.636 14.197h90.647v82.014H14.636z'/%3e%3cmask id='o' x='0' y='0' width='90.647' height='82.014' fill='white'%3e%3cuse xlink:href='%23f'/%3e%3c/mask%3e%3cpath id='g' d='M14.636 65.996l30.216-23.741 23.74 26.978 14.03-10.791 22.661 20.504v17.266H14.636z'/%3e%3cmask id='p' x='0' y='0' width='90.647' height='53.957' fill='white'%3e%3cuse xlink:href='%23g'/%3e%3c/mask%3e%3cpath d='M63.972 8.681L22.12 5.019a5 5 0 0 0-5.42 4.539l-.663 7.575 47.935-8.452zm47.885 4.19l10.872.95a5.004 5.004 0 0 1 4.549 5.411l-4.742 54.2-10.679-60.562zm5.391 120.998l-.651 7.447a5 5 0 0 1-5.42 4.539l-41.374-3.62 47.445-8.366zm-96.042 4.114l-10.638-.93a5.004 5.004 0 0 1-4.549-5.411l4.666-53.327 10.52 59.668z' id='h'/%3e%3cmask id='q' x='-2' y='-2' width='125.297' height='144.874'%3e%3cpath fill='white' d='M4 3h125.297v144.874H4z'/%3e%3cuse xlink:href='%23h'/%3e%3c/mask%3e%3cpath d='M11 13.994A5 5 0 0 1 16.003 9h100.994A5.004 5.004 0 0 1 122 13.994v122.55a5.001 5.001 0 0 1-5 4.993H16c-2.761 0-5-2.244-5-4.993V13.994z' id='i'/%3e%3cmask id='r' x='0' y='0' width='111' height='132.537' fill='white'%3e%3cuse xlink:href='%23i'/%3e%3c/mask%3e%3c/defs%3e%3cg fill='none' fill-rule='evenodd'%3e%3cg stroke='%23D8FF95' stroke-width='4'%3e%3cuse mask='url(%23j)' xlink:href='%23a' transform='rotate(5 241.396 6673.607)'/%3e%3cg transform='rotate(-10 410.15 -3228.07)'%3e%3cuse mask='url(%23k)' xlink:href='%23b'/%3e%3cuse mask='url(%23l)' xlink:href='%23c'/%3e%3c/g%3e%3c/g%3e%3cg transform='translate(279 -1)' stroke='%23FFA0DE' stroke-width='4'%3e%3cuse mask='url(%23m)' xlink:href='%23d'/%3e%3cg transform='rotate(-10 122.65 7.135)'%3e%3cuse mask='url(%23n)' xlink:href='%23e'/%3e%3cuse mask='url(%23o)' xlink:href='%23f'/%3e%3cuse mask='url(%23p)' xlink:href='%23g'/%3e%3c/g%3e%3c/g%3e%3cg stroke='%23A4E2FF' transform='translate(-1 -1)'%3e%3cuse mask='url(%23q)' stroke-width='4' xlink:href='%23h'/%3e%3cuse mask='url(%23r)' stroke-width='4' transform='rotate(-10 66.5 75.269)' xlink:href='%23i'/%3e%3cpath stroke-width='2' d='M11.823 31.053l9.79-1.727 1.725 9.79-9.789 1.726zM15.994 54.71l9.79-1.725 1.726 9.789-9.79 1.726zM20.166 78.368l9.79-1.727 1.725 9.79-9.789 1.725zM24.337 102.026l9.79-1.726 1.726 9.789-9.79 1.726zM28.51 125.682l9.788-1.726 1.726 9.79-9.789 1.725zM93.4 16.669l9.79-1.726 1.725 9.789-9.788 1.726zM97.573 40.326l9.789-1.726 1.726 9.79-9.79 1.725zM101.743 63.984l9.79-1.726 1.726 9.788-9.79 1.727zM105.914 87.64l9.79-1.725 1.725 9.789-9.789 1.726zM110.086 111.299l9.79-1.727 1.726 9.79-9.79 1.726zM31.716 32.659l52.21-9.206 7.191 40.788-52.21 9.206zM41.497 88.132l52.21-9.206 7.191 40.788-52.21 9.206z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",playImg:"data:image/svg+xml,%3csvg width='945' height='360' viewBox='0 0 945 360' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3ePLAY MEDIA ICONS%3c/title%3e%3cdefs%3e%3cpath id='a' d='M196 172v14H81v-14'/%3e%3cmask id='m' x='0' y='0' width='115' height='14' fill='white'%3e%3cuse xlink:href='%23a'/%3e%3c/mask%3e%3cpath d='M6.522 173C2.92 173 0 170.631 0 167.71V5.29C0 2.37 2.92 0 6.522 0h262.956C273.08 0 276 2.369 276 5.29v162.42c0 2.921-2.92 5.29-6.522 5.29H6.522z' id='b'/%3e%3cmask id='n' x='0' y='0' width='276' height='173' fill='white'%3e%3cuse xlink:href='%23b'/%3e%3c/mask%3e%3cpath id='c' d='M13 160.185h249.91V13H13z'/%3e%3cmask id='o' x='0' y='0' width='249.911' height='147.185' fill='white'%3e%3cuse xlink:href='%23c'/%3e%3c/mask%3e%3crect id='d' width='192' height='140' rx='6'/%3e%3cmask id='p' x='0' y='0' width='192' height='140' fill='white'%3e%3cuse xlink:href='%23d'/%3e%3c/mask%3e%3cpath id='e' d='M20 11h152v118H20z'/%3e%3cmask id='q' x='0' y='0' width='152' height='118' fill='white'%3e%3cuse xlink:href='%23e'/%3e%3c/mask%3e%3ccircle id='f' cx='12' cy='70' r='6'/%3e%3cmask id='r' x='0' y='0' width='12' height='12' fill='white'%3e%3cuse xlink:href='%23f'/%3e%3c/mask%3e%3cpath id='g' d='M0 18h72v84H0z'/%3e%3cmask id='s' x='0' y='0' width='72' height='84' fill='white'%3e%3cuse xlink:href='%23g'/%3e%3c/mask%3e%3ccircle id='h' cx='36' cy='109' r='5'/%3e%3cmask id='t' x='0' y='0' width='10' height='10' fill='white'%3e%3cuse xlink:href='%23h'/%3e%3c/mask%3e%3crect id='i' width='72' height='120' rx='8.4'/%3e%3cmask id='u' x='0' y='0' width='72' height='120' fill='white'%3e%3cuse xlink:href='%23i'/%3e%3c/mask%3e%3cpath d='M159.595 207.477c-.494-2.47-2.65-9.732-3.347-21.444H99.36c-.698 11.712-2.853 18.974-3.346 21.444-.976 4.88-4.79 8.829-12.04 11.059-5.912 1.819-5.158 10.693 1.674 10.693h84.314c6.831 0 7.587-8.873 1.673-10.693-7.25-2.23-11.064-6.178-12.04-11.059z' id='j'/%3e%3cmask id='v' x='0' y='0' width='95.633' height='43.196' fill='white'%3e%3cuse xlink:href='%23j'/%3e%3c/mask%3e%3cpath d='M256 147.5v31.564c0 5.527-4.47 10.008-9.996 10.008H9.996c-5.52 0-9.996-4.476-9.996-10.008V10.003C0 4.48 4.47 0 9.996 0h236.008C251.524 0 256 4.485 256 10.003V147.5z' id='k'/%3e%3cmask id='w' x='0' y='0' width='256' height='189.072' fill='white'%3e%3cuse xlink:href='%23k'/%3e%3c/mask%3e%3ccircle id='l' cx='55' cy='55' r='55'/%3e%3cmask id='x' x='0' y='0' width='110' height='110' fill='white'%3e%3cuse xlink:href='%23l'/%3e%3c/mask%3e%3c/defs%3e%3cg fill='none' fill-rule='evenodd'%3e%3cg transform='translate(669 87)'%3e%3cuse stroke='%23BBB' mask='url(%23m)' stroke-width='6' xlink:href='%23a'/%3e%3cuse stroke='%23BBB' mask='url(%23n)' stroke-width='6' xlink:href='%23b'/%3e%3cuse stroke='%23BBB' mask='url(%23o)' stroke-width='4' xlink:href='%23c'/%3e%3cpath fill='%23F8AD18' d='M137.042 120.75H117l22.19-34.375L117 52h20.042l22.19 34.375z'/%3e%3c/g%3e%3cg transform='translate(397 220)'%3e%3cuse stroke='%23BBB' mask='url(%23p)' stroke-width='6' xlink:href='%23d'/%3e%3cuse stroke='%23BBB' mask='url(%23q)' stroke-width='4' xlink:href='%23e'/%3e%3cuse stroke='%23BBB' mask='url(%23r)' stroke-width='4' xlink:href='%23f'/%3e%3ccircle fill='%23BBB' cx='180' cy='70' r='2'/%3e%3cpath fill='%23F8AD18' d='M94.58 102H76l20.645-30.968L76 38h18.58l20.646 33.032z'/%3e%3c/g%3e%3cg transform='translate(457)'%3e%3crect width='72' height='120' rx='8.4'/%3e%3cuse stroke='%23BBB' mask='url(%23s)' stroke-width='4' xlink:href='%23g'/%3e%3cuse stroke='%23BBB' mask='url(%23t)' stroke-width='4' xlink:href='%23h'/%3e%3crect fill='%23BBB' x='31' y='10' width='10.8' height='2.4' rx='1.2'/%3e%3cuse stroke='%23BBB' mask='url(%23u)' stroke-width='6' xlink:href='%23i'/%3e%3cpath d='M35.032 79H24l12.258-18.387L24 41h11.032L47.29 60.613z' fill='%23F8AD18'/%3e%3c/g%3e%3cg stroke='%23BBB' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M330.598 183.254C341.355 172.41 348 157.481 348 141c0-16.723-6.841-31.848-17.878-42.728'/%3e%3cpath d='M319.988 172.65C328.033 164.52 333 153.34 333 141c0-12.523-5.115-23.851-13.37-32.01M309.502 161.92A29.902 29.902 0 0 0 318 141c0-8.376-3.433-15.951-8.969-21.394'/%3e%3c/g%3e%3cg transform='translate(0 65)'%3e%3cuse stroke='%23BBB' mask='url(%23v)' stroke-width='6' xlink:href='%23j'/%3e%3cuse stroke='%23BBB' mask='url(%23w)' stroke-width='6' xlink:href='%23k'/%3e%3cpath d='M1.5 147.5h253.198' stroke='%23BBB' stroke-width='3' stroke-linecap='square'/%3e%3cg transform='translate(73 21)'%3e%3cuse stroke='%23F8AD18' mask='url(%23x)' stroke-width='6' fill='%231F1F1F' xlink:href='%23l'/%3e%3cpath fill='%23F8AD18' d='M56.382 89.375H36.339L58.53 55 36.34 20.625h20.043L78.572 55z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"})});var vf=r(94944),bf=r(40136),Sf=r(8344),Pf=r(52256),If=r.n(Pf);const Ef={artist:"music",movie:"film",photo:"picture",show:"display"},wf=Yy.c.ItemView.extend({tagName:"li",className:"card-tile-list-single-item",template:If(),events:{"click .edit-section-btn":"onEditClick","click .delete-section-btn":"onDeleteClick"},serializeData:function(){var e;const t=this.model.server,r=this.model.toJSON(),n=null==(e=r.locations)?void 0:e[0],i=r.locations?r.locations.length:0;return{section:r,serverID:t.id,icon:Ef[r.type],path:n.path,more:i-1}},bindings:{".section-title":{modelAttribute:"title"}},onEditClick:function(e){e.preventDefault();const t=this.model,r=new Sf.c({model:t,server:t.server,isDefaultSection:t.isNew()});t.isNew()&&r.promise.always((()=>{t.trigger("destroy",t,t.collection)})),ou.c.trigger("show:modal",r)},onDeleteClick:function(e){e.preventDefault();const t=this.model;t.isNew()?t.trigger("destroy",t,t.collection):$y.c.execute("deleteSection",{section:t})}}),Cf=bf.c.extend({tagName:"ul",className:"list card-tile-list",itemView:wf});var Of=r(34212),Mf=r.n(Of);const Tf=Yy.c.Layout.extend({className:"setup-library-container",template:Mf(),regions:{list:".setup-section-list-container"},events:{"click .add-section-btn":"onAddSectionClick"},metricsValue:function(){return this.collection.size()},initialize:function(e){const t=this.model,r=t.get("sections"),n=new vf.c([],{server:t,url:"/services/defaultLibraries"});this.collection=r,this.model.supports("defaultSections")&&e.isFirstVisitToSubset&&qy().when(n.populate(),r.populate()).done((()=>{r.length||n.forEach((e=>{e.collection=r,r.add(e)}))}))},onRender:function(){this.list.show(new Cf({collection:this.collection}))},onAddSectionClick:function(e){e.preventDefault(),ou.c.trigger("show:modal",new Sf.c({server:this.model}))}});var Df=r(2568),kf=r.n(Df);const xf=Yy.c.ItemView.extend({className:"setup-loading-container",template:kf()});var Af=r(26548),Rf=r.n(Af);const Nf={setupIntro:"intro",setupError:"error",setupBasic:"name",setupLibrary:"library",setupComplete:"complete"},Lf=[Xy.go,Xy.YP,Xy.CA],jf=Yy.c.Layout.extend({className:"container",template:Rf(),maxAttempts:120,ui:{header:".setup-header"},regions:{container:".setup-container"},events:{"click .segment-btn":"onNavClick","click .next-btn":"onNavClick","click .done-btn":"onDoneClick"},onlyAfterRender:["onAgentsSuccess","onAgentsFail","onUpdatesComplete"],initialize:function(e){Qy().bindAll(this,"start","onAgentsSuccess","onAgentsFail","onUpdatesComplete","onSkipSignInChange"),this.subset=e.subset||"setupIntro",this.attempts=0,this._visitedSubsets={},cu.c.info("Starting the setup wizard");const t=(0,_n.WI)("appModel");this.model=(0,Jy.Ww)(t,e),this.listenTo(t,"change:skipSignIn",this.onSkipSignInChange);const r=(0,Jy.s7)(t);this.listenTo(r,"change:isSignedIn",this.onUserSignedInChange)},serializeData:function(){return{subset:this.subset}},renderSubset:function(){if(this.model.get("shared"))return void this.navigate("setupError");const e=(0,_n.WI)("appModel"),t=e.get("user").server,r=t.populate();r.done(this.whenRendered((()=>{this.navigate("setupIntro")}))),r.fail((()=>{e.get("primaryServer").get("desktop").get("settings").fetch().then((e=>!0===e.get("AcceptedEULA").get("value")?qy().Deferred().resolve():qy().Deferred().reject())).then(this.whenRendered((()=>{this.navigate("setupIntro")}))).fail(this.whenRendered((()=>{const r=e.get("skipSignIn"),n=t.get("isUnavailable");this.navigate(r||n?"setupIntro":"setupSignIn")})))}))},start:function(){if(this.attempts>=this.maxAttempts)return cu.c.error("Failed to start the setup wizard after "+this.attempts+" attempts"),void this.navigate("setupError");this.attempts++;const e=this.model.get("startState");if(e)(0,cu.c)("Waiting for server to start ("+e+")"),this.model.fetch().done(Qy().delay(this.start,500));else{const e=new Zy.c([],{server:this.model}).fetch({timeout:0});e.done(this.onAgentsSuccess),e.fail(this.onAgentsFail)}},navigate:function(e){const t="setupIntro"===e,r="setupSignIn"===e,n="setupLoading"===e,i=function(e){return{setupSignIn:Jg,setupIntro:ff,setupLoading:xf,setupError:hf,setupBasic:af,setupLibrary:Tf,setupComplete:uf}[e]}(e),s=Nf[e];this.previousSubset=this.subset,this.subset=e,s&&(0,_n.WI)("metrics").trackView({page:l.Gx,pane:s,firstRun:!0});const a=!this._visitedSubsets[e];this._visitedSubsets[e]=!0;const o=new i({model:this.model,isFirstRun:!0,isFirstVisitToSubset:a});this.container.show(o),this.ui.header.toggleClass("hidden",t||r),this.$el.addClass(e),this.previousSubset!==e&&this.$el.removeClass(this.previousSubset),n&&this.start()},onRender:function(){this.renderSubset()},onAgentsSuccess:function(e){(0,cu.c)("Looking for a core agent");const t=Lf.find((t=>e.get(t)));t?((0,cu.c)(t+" found"),this.model.get("desktop").get("settings").populate().then((e=>e.get("AcceptedEULA").save({AcceptedEULA:!0}))),$y.c.execute("updateChannel",{server:this.model,silent:!0}).always(this.onUpdatesComplete)):(cu.c.error("No core agents found"),this.navigate("setupError"))},onAgentsFail:function(){cu.c.warn("Unable to request agents"),Qy().delay(this.start,500)},onUpdatesComplete:function(){this.navigate("setupBasic")},onNavClick:function(e){e.preventDefault();const t=qy()(e.currentTarget),r=t.data("subset");t.hasClass("segment-btn")&&"setupBasic"===this.subset&&this.container.currentView?(e.preventDefault(),this.container.currentView.submit()):this.navigate(r)},onDoneClick:function(e){e.preventDefault(),(0,_n.WI)("metrics").trackClick({page:l.Gx,action:Ee.eq,firstRun:!0}),(0,hl.c)("home")},onSkipSignInChange(){this.renderSubset()},onUserSignedInChange(){this.renderSubset()}});var Uf=r(71572),Ff=r(95e3),Vf=r(29e3),_f=r(46788);const Wf=(0,s.Ul)((function(){return(0,At.M3)((0,Vf.c)(),(e=>{const t=e.settings.find((e=>"AcceptedEULA"===e.id));return{isSettingsPopulated:e.isSettingsPopulated,settingsError:e.settingsError,hasAcceptedEULA:!(!t||!t.value),isAcceptedEULASaving:!(!t||!t.isSaving)}}))}),(function(e,t){const{serverEntityID:r,forwardUrl:n}=t;return{onPopulateSettings(){e((0,rh.GQ)({serverEntityID:r}))},onAcceptEULA(){e((0,rh.Wq)({serverEntityID:r,setting:{id:"AcceptedEULA",value:!0}}))},onSkipSignIn(){(0,_n.WI)("metrics").trackClick({page:l.i0,action:Ee.cx,firstRun:!0}),e((0,f.gt)({url:n}))}}}))((function(e){const{isSettingsPopulated:t,settingsError:r,hasAcceptedEULA:n,isAcceptedEULASaving:s,onPopulateSettings:a,onAcceptEULA:o,onSkipSignIn:c}=e;return(0,_f.c)((()=>{a()})),(0,_f.c)((()=>{o()}),t&&!n),(0,_f.c)((()=>{c()}),n&&!s),r?i.createElement(vl.c,{description:(0,g.c)("The server you're trying to access doesn't seem to exist."),title:(0,g.c)("Media server not found")}):i.createElement(Jc.c,null,i.createElement(yp.c,null))})),Bf=(0,s.Ul)((function(){return(0,At.M3)(((e,{serverEntityID:t})=>t),(e=>e.primaryServer),(e=>e.isWaitingForPrimaryServer),os.c,((e,t,r)=>({serverEntityID:e||t,isWaitingForPrimaryServer:r})))}))((function(e){const{serverEntityID:t,isWaitingForPrimaryServer:r}=e,n=(0,pe.c)(),s=(0,Yc.c)(n.forwardUrl);return t?i.createElement(Ff.c,{hideUnclaimedPage:!0,serverEntityID:t},s?i.createElement(Wf,{forwardUrl:s,serverEntityID:t}):i.createElement(Uf.c,{key:(0,zy.c)("SetupPage",t),className:sQ,view:jf,viewOptions:{serverEntityID:t,subset:"setupBasic"}})):r?i.createElement(Jc.c,null,i.createElement(yp.c,null)):i.createElement(vl.c,{description:(0,g.c)("The server you're trying to access doesn't seem to exist."),title:(0,g.c)("Media server not found")})}));function Hf(){const e=(0,$c.c)(),t=(0,By.c)(Hy.qe,e.machineIdentifier);return i.createElement(Wu.c,null,i.createElement(_u.c,null,i.createElement(Bf,{serverEntityID:t})))}function zf(e){switch(e){case"success":return"confirm";case"error":return"alert";default:return"default"}}var Gf=r(24952),qf=r(94368);const Kf={darkModalBackdrop:"UserSelectModal-darkModalBackdrop-hbxDAc"};function Qf(){return(0,i.useEffect)((()=>(Gf.cp.startPeriod(Mh.gl),()=>{Gf.cp.endPeriod(Mh.gl)})),[]),i.createElement(Uf.c,{key:"UserSelectModal",className:Kf.darkModalBackdrop,view:qf.c,viewOptions:{isForced:!0,backdrop:!1}})}var $f=r(39832);const Yf=(0,At.M3)(Je.c,(e=>e.showViewStateSyncPrompt));var Xf=r(26184),Jf=r(92600),Zf=Object.getOwnPropertySymbols,ev=Object.prototype.hasOwnProperty,tv=Object.prototype.propertyIsEnumerable,rv=(e,t)=>{var r={};for(var n in e)ev.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Zf)for(var n of Zf(e))t.indexOf(n)<0&&tv.call(e,n)&&(r[n]=e[n]);return r};function nv(){const e=(0,s.OY)(),{metricsPage:t,metricsContextTuple:r}=(0,S.e0)(),{machineIdentifier:n,providerIdentifier:a}=(0,$c.c)(),o=(0,s.w1)((0,Pn.c)(n)),c=(0,s.w1)((0,bn.c)(n,a)),l=(0,pe.c)();return(0,i.useEffect)((()=>{const n=l,{key:i,channel:s,source:a}=n,d=rv(n,["key","channel","source"]);e((0,Jf.AD)({server:o,provider:c,metadataKey:i?(0,Yc.c)(i):void 0,channel:s?(0,Yc.c)(s):void 0,prePlayRouteParams:d,metricsPage:t,metricsContextTuple:r}))}),[l,e,t,c,o,r]),i.createElement(Jc.c,null,i.createElement(yp.c,null))}function iv(){const{machineIdentifier:e,providerIdentifier:t}=(0,$c.c)(),r=(0,pe.c)();return i.createElement(Wu.c,null,i.createElement(_u.c,null,i.createElement(Xc.c,{machineIdentifier:e,providerIdentifier:t},i.createElement(S.cp,{metricsContextParam:(0,Yc.c)(r.context),metricsPage:l.I9},i.createElement(nv,null)))))}var sv=r(98624),av=r(57923),ov=r(64804);const cv=r.p+"static/ad91496fe7dbb6f93efc.png",lv={background:"BetaCommunityWhatsNewModalContent-background-PgEOd3"};var dv=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));const uv="radial-gradient(86.06% 158.74% at 0% 0%, #2d32a8 0%, rgb(45 50 168 / 0%) 100% ),                  radial-gradient( 84.01% 149.15% at 0% 100%, #854159 0%, rgb(133 65 89 / 0%) 100% ),                  radial-gradient( 80.06% 143.28% at 96.81% 100%, #18254e 0%, rgb(24 37 78 / 0%) 100% ),                  radial-gradient( 82.41% 151.06% at 100% 0%, #009aee 0%, rgb(0 153 238 / 0%) 100% ), #00b1e3";function pv({onFinish:e}){const t=(0,_t.y)(),r=(0,i.useRef)(!1),[n,{isSuccess:s,isLoading:a}]=(0,ce.cc)(),{privacyOptions:o,isPopulated:c,isUpdating:l,isSuccess:d,isError:u,onPrivacyChange:p,onSave:m}=(0,ov.c)({privacies:["Friends","Profile"],isOnboarding:!0});(0,i.useEffect)((()=>{c&&!r.current&&t.onOpen()}),[c,t]),(0,i.useEffect)((()=>{d&&n({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}})}),[d,n]),(0,i.useEffect)((()=>{u&&t.onClose()}),[u,t]),(0,Ge.c)();const y=(0,i.useCallback)((()=>dv(this,null,(function*(){(yield m())||n({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}})}))),[m,n]),f=(0,i.useCallback)((()=>{r.current=!0,t.onClose()}),[t]);return(0,i.useEffect)((()=>{s&&(null==e||e(),f())}),[s,f,e]),c&&o.length?i.createElement(au.wJ,{isDismissible:!1,isOpen:t.isOpen,onClose:f},i.createElement(au.EX,{closeButtonAccessibilityLabel:(0,g.c)("Close"),header:(0,g.c)("We've made it easier to Discover together"),hideCloseButton:!0,size:"l"},i.createElement("div",{className:lv.background,style:{background:uv}}),i.createElement(au.kP,{paddingBottom:"none",paddingTop:"xs"},i.createElement(Ye.a,{color:"inherit",font:"inherit"},(0,g.c)("You can now search for accounts by name, and view someone's friend list. Update your visibility settings anytime."))),i.createElement(au.aU,null,i.createElement(h.ye,{gap:"xxs",paddingBottom:"xxs",width:"100%"},o.map((e=>i.createElement(Se.mw,{key:e.role,posterStyle:"landscape",width:"100%"},i.createElement(h.ye,{align:"space-between",orientation:"horizontal",padding:"s",width:"100%"},i.createElement(h.ye,{gap:"xxs",orientation:"horizontal",verticalAlign:"center"},i.createElement(Ye.a,{align:"center"},e.title),e.description?i.createElement(rd.o,{tooltip:i.createElement(Ye.a,{font:"caption"},e.description)},i.createElement(Ut.c,{accessibilityLabel:e.title},i.createElement(h.ye,null,i.createElement(sv.default,{color:"muted"})))):null),i.createElement(av.c,{changePrivacy:p,mode:e.mode,role:e.role,showLabel:!0})))))),i.createElement("img",{key:cv,src:cv,width:"100%"})),i.createElement(au._A,null,i.createElement(au.YB,{align:"right"},i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Done"),shrink:!1,waiting:l||a,onPress:y}))))):null}var mv=r(64744),hv=r(89448),yv=r(576),gv=r(25760),fv=r(48708),vv=r(58980);function bv(e){const t=(0,ze.c)(),r=(0,s.OY)(),n=(0,s.w1)(Wi.c),a=(0,s.w1)(os.c),[o,c]=(0,i.useState)(!1),{sidebarSettings:{hasCompletedSetup:d}}=(0,s.w1)(tp.c),{isPopulated:u,isPending:m,error:h}=(0,s.w1)((0,gv.c)(n)),{details:{isFullUser:y,anonymous:g,uuid:f},isNewUser:v,isPopulated:b}=(0,vv.c)(Je.c,cl.c.actions.fetchUserDetails),S=(0,ts.c)(),P=(0,s.w1)((0,mv.c)(p.eK)),I=(0,yv.c)(),E=y&&!g,w=!g&&I&&P&&d,{data:C,isSuccess:O}=(0,ce.uC)({uuid:f},{skip:!E||!f});(0,i.useEffect)((()=>{w&&a.isConnected&&(null==n?void 0:n.isPopulated)&&b&&!m&&!u&&!h&&r(fv.cp.actions.preferredServicesFetchRequested({server:a,provider:n}))}),[r,m,u,b,h,n,a,w]);const M=(0,i.useCallback)((()=>{c(!0),(0,hv.SS)((()=>{n&&v&&r(fv.cp.actions.preferredServicesSaveRequested({server:a,provider:n,preferredServices:[]})),r(ce.mk.util.updateQueryData("GetUserOnboardingStatus",{uuid:f},(e=>{e.user.hasSeenOnboarding=!0,e.user.hasSeenOnboardingV2=!0})))})),t({page:l.mG,pane:e,action:Ee.eq})}),[r,v,e,n,a,t,f]),T=S&&!o&&d&&!!C&&b&&O&&u;return{showNewUserOnboarding:T&&v&&!C.user.hasSeenOnboarding&&!C.user.hasSeenOnboarding,showBetaCommunityUserOnboarding:T&&C.user.hasSeenOnboarding&&!C.user.hasSeenOnboardingV2,showNewCommunityUserOnboarding:T&&!v&&!C.user.hasSeenOnboarding&&!C.user.hasSeenOnboardingV2,onFinish:M}}function Sv(){const e=we.uI,{showBetaCommunityUserOnboarding:t,onFinish:r}=bv(e);return t?i.createElement(S.cp,{metricsPage:l.mG,metricsPane:e},i.createElement(pv,{onFinish:r})):null}var Pv=r(38748),Iv=r(61484),Ev=r(14983),wv=r(20232),Cv=r(64856),Ov=r(55202);const Mv={backgroundContainer:"WhatsNewModal-backgroundContainer-lSutuD UpsellModal-backgroundContainer-RikWr2",textContainer:"WhatsNewModal-textContainer-LMGENn",screenContainer:"WhatsNewModal-screenContainer-NK2iat",screenWrapper:"WhatsNewModal-screenWrapper-taR1DI",spinnerContainer:"WhatsNewModal-spinnerContainer-J5BoHN"};function Tv({backgroundClassName:e=Mv.backgroundContainer,backgroundColor:t,backgroundSrc:r,screenClassName:n=Mv.screenWrapper,screenSrc:s,children:a,isDismissible:o,isOpen:c,onClose:l}){const[d,{height:u}]=(0,Be.c)(),[p,m]=(0,i.useState)(1),[y,f]=(0,i.useState)(1),v=(0,i.useCallback)((({target:e})=>{m(e.naturalWidth),f(e.naturalHeight)}),[]);return i.createElement(Ov.c,{backgroundClassName:e,backgroundColor:t,backgroundSrc:r,header:(0,g.c)("Discover What's New"),isDismissible:o,isOpen:c,onClose:l},i.createElement(h.ye,{align:"space-between",gap:"m",grow:!0,orientation:"horizontal"},i.createElement("div",{className:Mv.textContainer},a),s?i.createElement("div",{className:Mv.screenContainer},i.createElement("div",{ref:d,className:n,style:{minWidth:u*(p/y)}},i.createElement("img",{key:s,height:"100%",src:s,width:"100%",onLoad:v}))):null))}const Dv={container:"WhatsNewModalButton-container-ISYbFa"};function kv({children:e,color:t="default",onPress:r}){return i.createElement("div",{className:Dv.container},i.createElement(Ut.q,{color:t,label:e,onPress:r}))}const xv={textInnerContainer:"WhatsNewInfoStepsModal-textInnerContainer-Mv8Eyl",dot:"WhatsNewInfoStepsModal-dot-QWwLPL",activeDot:"WhatsNewInfoStepsModal-activeDot-Z6Carm",list:"WhatsNewInfoStepsModal-list-he3Hzl"};function Av({steps:e,activeIndex:t,setActiveIndex:r}){const n=(0,i.useMemo)((()=>Array.from(new Array(e.length))),[e]);return i.createElement(h.ye,{gap:"s",orientation:"horizontal"},n.map(((e,n)=>i.createElement(Rv,{key:n,index:n,isActive:n===t,setActiveIndex:r}))))}function Rv({index:e,setActiveIndex:t,isActive:r}){const n=(0,i.useCallback)((()=>{t(e)}),[e,t]);return i.createElement(Cv.i8,{accessibilityLabel:(0,g.c)("Go to step {1}",e+1),className:jt()(xv.dot,r&&xv.activeDot),onPress:n})}function Nv({steps:e,isDismissible:t,isOpen:r,extraActions:n,onClose:s}){const[a,o]=(0,i.useState)(0);(0,Ge.c)();const c=(0,i.useCallback)((()=>{const t=a+1;t>=e.length?s():o(t)}),[a,s,e.length]),l=(0,i.useMemo)((()=>e[a]),[a,e]);if(!l)return null;const{backgroundClassName:d,backgroundColor:u,backgroundSrc:p,screenClassName:m,screenSrc:y,showProgressDots:f=!0,title:v,copy:b}=l;return i.createElement(Tv,{backgroundClassName:d,backgroundColor:u,backgroundSrc:p,isDismissible:t,isOpen:r,screenClassName:m,screenSrc:y,onClose:s},i.createElement(h.ye,{align:"center",gap:"xl",grow:!0,width:"100%"},i.createElement("div",{className:xv.textInnerContainer},i.createElement(h.ye,{align:"center",gap:"xl",width:"100%"},i.createElement(Ye.a,{align:"center",font:"heading-1"},v),i.createElement(h.ye,{gap:"l"},b))),i.createElement(h.ye,{align:"center",gap:"xl",width:"100%"},f?i.createElement(Av,{activeIndex:a,setActiveIndex:o,steps:e}):null,i.createElement(h.ye,{gap:"m",orientation:"horizontal"},i.createElement(kv,{color:"accent",onPress:c},(0,g.c)("Continue")),n))))}const Lv={container:"WhatsNewList-container-AAhiWv"};var jv=Object.defineProperty,Uv=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,Vv=Object.prototype.propertyIsEnumerable,_v=(e,t,r)=>t in e?jv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wv=(e,t)=>{for(var r in t||(t={}))Fv.call(t,r)&&_v(e,r,t[r]);if(Uv)for(var r of Uv(t))Vv.call(t,r)&&_v(e,r,t[r]);return e};function Bv({icon:e,title:t,description:r}){return i.createElement("li",null,i.createElement(h.ye,{gap:"xl"},i.createElement(h.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},i.createElement(e,{color:"accent",size:"xxl"}),i.createElement(h.ye,null,t?i.createElement(Ye.a,{font:"heading-2"},t):null,i.createElement(Ye.a,{color:t?"muted":"default"},r)))))}function Hv({items:e}){return i.createElement("ul",{className:Lv.container},i.createElement(h.ye,{gap:"xl"},e.map(((e,t)=>i.createElement(Bv,Wv({key:t},e))))))}const zv=r.p+"static/edcf58282df216813823.png",Gv=r.p+"static/649a13a642b61fb2b28a.png",qv=r.p+"static/6dfb6ea587bcf1d4aef0.png",Kv={screen:"CommunityWhatsNewModal-screen-TvIiK0 WhatsNewModal-screenWrapper-taR1DI",screen3:"CommunityWhatsNewModal-screen3-OTUNZw WhatsNewModal-screenWrapper-taR1DI",backgroundContainer2:"CommunityWhatsNewModal-backgroundContainer2-QayyYu UpsellModal-backgroundContainer-RikWr2",backgroundContainer3:"CommunityWhatsNewModal-backgroundContainer3-pH_B9X UpsellModal-backgroundContainer-RikWr2"};function Qv(){return i.createElement(Hv,{items:[{icon:Pv.default,description:(0,g.c)("Keep track of movies and shows youve watched and more.")},{icon:Iv.default,description:(0,g.c)("See what your friends are watching, rating, and saving to their Watchlist.")},{icon:Ev.default,description:(0,g.c)("Control which of your activities your friends can see on Plex.")}]})}function $v(){const e=we.aC,t=(0,ze.c)(),r=(0,_t.y)(),n=(0,yl.c)(r.isOpen),s=(0,_t.y)(),a=(0,i.useRef)(!1),[o,{isSuccess:c,isLoading:d}]=(0,ce.cc)(),{showNewCommunityUserOnboarding:u,onFinish:p}=bv(e),m=(0,i.useCallback)((()=>{o({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}})}),[o]),h=(0,i.useCallback)((()=>{a.current=!0,s.onOpen(),r.onClose()}),[s,r]),y=(0,i.useCallback)((()=>{h(),t({page:l.mG,action:Ee.sr})}),[h,t]);return(0,i.useEffect)((()=>{!n&&r.isOpen?ou.c.trigger("tempHideModals"):n&&!r.isOpen&&ou.c.trigger("restoreTempHiddenModals")}),[n,r.isOpen]),(0,i.useEffect)((()=>{u&&!a.current&&r.onOpen()}),[u,r]),(0,i.useEffect)((()=>{c&&s.isOpen&&(p(),s.onClose())}),[c,p,s]),u?i.createElement(S.cp,{metricsPage:l.mG,metricsPane:e},i.createElement(i.Fragment,null,i.createElement(Nv,{extraActions:i.createElement(kv,{onPress:y},(0,g.c)("Skip to Profile Settings")),isOpen:r.isOpen,steps:[{screenSrc:zv,screenClassName:Kv.screen,title:(0,g.c)("Welcome to Discover Together"),copy:i.createElement(Qv,null),showProgressDots:!1},{screenSrc:Gv,screenClassName:Kv.screen,backgroundClassName:Kv.backgroundContainer2,title:(0,g.c)("Personality goes a long way"),copy:i.createElement(Ye.a,{align:"center",color:"inherit"},(0,g.c)("Your profile is at the heart of your Plex experience: what youve watched, rated, and saved to your Watchlist."))},{screenSrc:qv,screenClassName:Kv.screen3,backgroundClassName:Kv.backgroundContainer3,title:(0,g.c)("Let your friends be your guide"),copy:i.createElement(Ye.a,{align:"center",color:"inherit"},(0,g.c)("Throughout Plex, youll now see what your friends are streaming, liking, and excited to watch next."))}],onClose:h}),i.createElement(wv.c,{buttonLabel:(0,g.c)("Finish"),isOnboarding:!0,isOpen:s.isOpen,isWaiting:d,onClose:m}))):null}var Yv=r(54536),Xv=r(25071),Jv=r(14180),Zv=r(62656),eb=r(12112),tb=r(85392),rb=r(87592);function nb({title:e,description:t,isWaiting:r,modalState:n,options:s,legal:a,onPress:o,onSave:c}){const l=(0,i.useCallback)((()=>{c()}),[c]),d=(0,i.useCallback)((e=>()=>{o(e)}),[o]);return 0===s.length?null:i.createElement(au.wJ,{isDismissible:!1,isOpen:n.isOpen,onOpenChange:n.onOpenChange},i.createElement(au.EX,{closeButtonAccessibilityLabel:(0,g.c)("Close"),header:e,hideCloseButton:!0},i.createElement(au.aU,null,i.createElement(h.ye,{gap:"l"},i.createElement(Ye.a,{color:"muted",font:"body-1"},t),i.createElement(h.ye,{gap:"none"},s.map((({id:e,isChecked:t,label:r,icon:n},s)=>i.createElement(Ut.c,{key:s,onPress:d(e)},i.createElement(h.ye,{orientation:"vertical",verticalAlign:"center"},i.createElement(rb.c,{size:"s"}),i.createElement(Ye.a,{color:t?"accent":"default",font:"body-2"},i.createElement(h.ye,{align:"space-between",as:"span",gap:"xs",orientation:"horizontal",padding:"s",paddingX:"s",verticalAlign:"center",width:"100%"},i.createElement(h.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n?i.createElement(Yv.c,{name:n}):null,i.createElement(Ye.a,{color:t?"accent":"primary",font:"body-1"},r)),t?i.createElement(Yv.c,{accessibilityLabel:r,color:"accent",name:"check",size:"l"}):null)))))),i.createElement(rb.c,{size:"s"})))),i.createElement(au._A,null,i.createElement(h.ye,{align:"space-between",gap:"s",orientation:"horizontal",verticalAlign:"center",width:"100%"},i.createElement(h.ye,{verticalAlign:"center",width:"75%"},a?i.createElement(Ye.a,{color:"muted",font:"caption"},a):null),i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Save"),shrink:!1,waiting:r,onPress:l})))))}var ib=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())})),sb=(e=>(e.Weekly="weekly",e.Daily="daily",e.Off="off",e))(sb||{});const ab="tv.plex.notification.community.friends_activity.email",ob="tv.plex.notification.community.friends_activity.frequency",cb=r.p+"static/2f036fdb4e7e3cfbf7ab.png",lb={background:"NewUserCommunityWhatsNewModalContent-background-yS0Slc",privacyPoster:"NewUserCommunityWhatsNewModalContent-privacyPoster-z6bTFB"};var db=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));const ub="radial-gradient(84.01% 149.15% at 0% 100%, #B35C55 0%, rgba(179, 92, 85, 0) 100%),                   radial-gradient(80.06% 143.28% at 96.81% 100%, #A62D2D 0%, rgba(166, 45, 45, 0) 100%),                   radial-gradient(82.41% 151.06% at 100% 0%, #C15C18 0%, rgba(193, 92, 24, 0) 100%),                   radial-gradient(86.06% 158.74% at 0% 0%, #CC9227 0%, rgba(204, 146, 39, 0) 100%), #1C1C1C";function pb({title:e,description:t,icon:r,modalState:n}){return i.createElement(Ut.c,{onPress:n.onToggle},i.createElement("div",{className:lb.privacyPoster},i.createElement(h.ye,{gap:"s",orientation:"horizontal",paddingX:"m",paddingY:"xs",verticalAlign:"center",width:"100%"},i.createElement(r,{size:"xl"}),i.createElement(h.ye,{width:"100%"},i.createElement(Ye.a,{font:"heading-4"},e),i.createElement(Ye.a,{font:"caption"},t)),i.createElement(Yv.c,{name:"chevron-right"}))))}function mb({onFinish:e}){const{addToast:t}=(0,Pe.Wo)(),r=(0,_t.y)(),n=(0,_t.y)(),a=(0,_t.y)(),o=(0,_t.y)(),c=(0,i.useRef)(!1),[l,d]=(0,i.useState)(!1),[u,{isSuccess:p,isLoading:m,error:y,reset:f}]=(0,ce.cc)(),{privacyOptions:v,isPopulated:b,isUpdating:S,isSuccess:P,isError:I,setPrivacyOptions:E,onPrivacyChange:w,onSave:C}=(0,ov.c)({isOnboarding:!0}),O=(0,i.useMemo)((()=>v.find((e=>e.role===X.Ix.WatchHistory))),[v]),{frequency:M,onChange:T,onSave:D,isUpdating:k}=function(){const{addToast:e}=(0,Pe.Wo)(),t=(0,s.w1)(Wt.c),[r,n]=(0,i.useState)("weekly"),[a,o]=(0,i.useState)(!1),c=(0,i.useRef)(!1),l=(0,i.useCallback)((e=>{c.current=!1,n(e)}),[]),d=(0,i.useCallback)((()=>ib(this,null,(function*(){if(!c.current){o(!0);try{const e=yield lu.c.put("/api/v2/mailing/users/subscription/discover_preferences",{server:t,data:{discoverPreferences:[{identifier:ab,enabled:"off"!==r},{identifier:ob,value:r}]}});if(200!==e.status&&204!==e.status)throw new Error("Invalid response status");c.current=!0}catch(t){e({color:"alert",description:(0,g.c)("There was an error while saving your email settings."),type:"foreground",testID:"error"})}finally{o(!1)}}}))),[e,t,r]);return{isUpdating:a,frequency:r,onSave:d,onChange:l}}();(0,Ge.c)(),(0,i.useEffect)((()=>{b&&!c.current&&r.onOpen()}),[b,r]),(0,i.useEffect)((()=>{P&&(n.isOpen||u({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}}),n.onClose())}),[P,u,n]),(0,i.useEffect)((()=>{I&&(n.onClose(),r.onClose())}),[I,r,n]);const x=(0,i.useMemo)((()=>O&&O.mode!==te.oL.Friends?O.mode===te.oL.FriendsOfFriends?Jv.default:Zv.default:Xv.default),[O]),A=(0,i.useMemo)((()=>O&&O.mode!==te.oL.Friends?O.mode===te.oL.FriendsOfFriends?{title:(0,g.c)("Share my Watch History"),description:(0,g.c)("Let your friendsand theirssee what youve been watching lately.")}:{title:(0,g.c)("Make my activity private"),description:(0,g.c)("No one will see what you watchor mark as watchedon Plex.")}:{title:(0,g.c)("Share with my friends only"),description:(0,g.c)("Let friends and family on Plex see what you've been watching lately.")}),[O]),R=(0,i.useMemo)((()=>M===sb.Off?eb.default:tb.default),[M]),N=(0,i.useMemo)((()=>M===sb.Daily?{title:(0,g.c)("Send me a daily activity digest"),description:(0,g.c)("We'll send a daily email highlighting TV & movies your friends are watching now. ")}:M===sb.Weekly?{title:(0,g.c)("Send me a weekly activity digest "),description:(0,g.c)("We'll send a weekly email highlighting TV & movies your friends are watching now. ")}:{title:(0,g.c)("Don't send me activity digests"),description:(0,g.c)("You will not receive email digests highlighting what your friends are watching now.")}),[M]),L=(0,i.useCallback)((()=>db(this,null,(function*(){yield D(),o.onClose()}))),[o,D]),j=(0,i.useCallback)((()=>db(this,null,(function*(){d(!0),yield D(),(yield C())||u({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}})}))),[C,D,u]),U=(0,i.useCallback)((()=>{c.current=!0,r.onClose()}),[r]),F=(0,i.useCallback)((e=>{T(e)}),[T]),V=(0,i.useCallback)((()=>db(this,null,(function*(){(yield C())||n.onClose()}))),[C,n]),_=(0,i.useCallback)((e=>{w(X.Ix.WatchHistory,e)}),[w]);return(0,i.useEffect)((()=>{p&&(null==e||e(),U())}),[p,U,e]),(0,i.useEffect)((()=>{(null==y?void 0:y.message)&&(d(!1),t({color:"alert",description:y.message,type:"foreground",testID:"error"}),f())}),[t,f,y]),b&&v.length&&O?i.createElement(i.Fragment,null,i.createElement(au.wJ,{isDismissible:!1,isOpen:r.isOpen,onClose:U},i.createElement(au.mt,{header:"",size:"l"},i.createElement(h.ye,null,i.createElement("div",{className:lb.background,style:{background:ub}}),i.createElement(au.aU,null,i.createElement("img",{src:cb,width:"100%"}),i.createElement(Ye.a,{align:"center",color:"primary",font:"heading-1"},(0,g.c)("Share your Watch History")),i.createElement(h.ye,{gap:"xs",paddingBottom:"xxs",paddingTop:"xs",width:"100%"},i.createElement(pb,{description:A.description,icon:x,modalState:n,title:A.title}),i.createElement(pb,{description:N.description,icon:R,modalState:o,title:N.title}),i.createElement(Ye.a,{color:"muted",font:"caption"},(0,g.c)("If you are a resident of the United States, your above Watch History setting will apply for two years. You can always withdraw your consent in your profile settings.")))),i.createElement(au._A,null,i.createElement(h.ye,{align:"space-between",orientation:"horizontal"},i.createElement(Ut.q,{label:(0,g.c)("View All Activity Settings"),shrink:!1,onPress:a.onOpen}),i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Save My Choices"),shrink:!1,waiting:S||m||k||l,onPress:j})))))),i.createElement(nb,{description:(0,g.c)("Do you and your friends have the same taste in movies & TV? Sharing your Watch History is a great way to find out."),isWaiting:S,legal:(0,g.c)("If you are a resident of the United States, your above Watch History setting will apply for two years and then revert to private unless you choose to renew your consent. All other choices will remain in effect until you change them."),modalState:n,options:[{id:te.oL.FriendsOfFriends,isChecked:O.mode===te.oL.FriendsOfFriends,label:(0,g.c)("Friends of Friends"),icon:"friend-of-friends"},{id:te.oL.Friends,isChecked:O.mode===te.oL.Friends,label:(0,g.c)("Friends Only"),icon:"friends"},{id:te.oL.Private,isChecked:O.mode===te.oL.Private,label:(0,g.c)("Private"),icon:"user-private"}],title:(0,g.c)("Share my Watch History"),onPress:_,onSave:V}),i.createElement(nb,{description:(0,g.c)("Always looking for something new to watch? Get inspired by what your friends have been streaming lately, delivered in the form of a curated email summary from Plex."),isWaiting:k,modalState:o,options:[{id:sb.Weekly,isChecked:M===sb.Weekly,label:(0,g.c)("Weekly")},{id:sb.Daily,isChecked:M===sb.Daily,label:(0,g.c)("Daily")},{id:sb.Off,isChecked:M===sb.Off,label:(0,g.c)("Off")}],title:(0,g.c)("Receive Friend Activity Digest"),onPress:F,onSave:L}),i.createElement(wv.c,{buttonLabel:(0,g.c)("Save"),isOnboarding:!0,isOpen:a.isOpen,privacies:v,onClose:a.onClose,onPrivaciesUpdated:E})):null}const hb=r.p+"static/28d9e2828ccc6816fe4e.png";var yb=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));const gb="radial-gradient(84.01% 149.15% at 0% 100%, #B35C55 0%, rgba(179, 92, 85, 0) 100%),                   radial-gradient(80.06% 143.28% at 96.81% 100%, #A62D2D 0%, rgba(166, 45, 45, 0) 100%),                   radial-gradient(82.41% 151.06% at 100% 0%, #C15C18 0%, rgba(193, 92, 24, 0) 100%),                   radial-gradient(86.06% 158.74% at 0% 0%, #CC9227 0%, rgba(204, 146, 39, 0) 100%), #1C1C1C";function fb({onFinish:e}){const t=(0,_t.y)(),r=(0,i.useRef)(!1),[n,{isSuccess:s,isLoading:a}]=(0,ce.cc)(),{privacyOptions:o,isPopulated:c,isUpdating:l,isSuccess:d,isError:u,onPrivacyChange:p,onSave:m}=(0,ov.c)({isOnboarding:!0}),y=(0,i.useMemo)((()=>o.find((e=>e.role===X.Ix.WatchHistory))),[o]);(0,i.useEffect)((()=>{c&&!r.current&&t.onOpen()}),[c,t]),(0,i.useEffect)((()=>{d&&n({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}})}),[d,n]),(0,i.useEffect)((()=>{u&&t.onClose()}),[u,t]),(0,Ge.c)();const f=(0,i.useCallback)((()=>yb(this,null,(function*(){(yield m())||n({input:{hasSeenOnboarding:!0,hasSeenOnboardingV2:!0}})}))),[m,n]),v=(0,i.useCallback)((()=>{r.current=!0,t.onClose()}),[t]);return(0,i.useEffect)((()=>{s&&(null==e||e(),v())}),[s,v,e]),c&&o.length&&y?i.createElement(au.wJ,{isDismissible:!1,isOpen:t.isOpen,onClose:v},i.createElement(au.EX,{closeButtonAccessibilityLabel:(0,g.c)("Close"),header:(0,g.c)("Share your Watch History"),hideCloseButton:!0,size:"l"},i.createElement("div",{className:lv.background,style:{background:gb}}),i.createElement(au.kP,{paddingBottom:"none",paddingTop:"xs"},i.createElement(Ye.a,{color:"inherit",font:"inherit"},(0,g.c)("Do you and your friends have the same taste in movies & TV? Sharing your Watch History is a great way to find out."))),i.createElement(au.aU,null,i.createElement(h.ye,{gap:"xxs",paddingBottom:"xxs",width:"100%"},i.createElement(Se.mw,{posterStyle:"landscape",width:"100%"},i.createElement(h.ye,{align:"space-between",orientation:"horizontal",padding:"s",width:"100%"},i.createElement(h.ye,{gap:"xxs",orientation:"horizontal",verticalAlign:"center"},i.createElement(Ye.a,{align:"center"},(0,g.c)("My Watch History"))),i.createElement(av.c,{changePrivacy:p,mode:y.mode,role:y.role,showLabel:!0})))),i.createElement("img",{key:hb,src:hb,width:"100%"})),i.createElement(au._A,null,i.createElement(h.ye,{align:"space-between",gap:"s",orientation:"horizontal",verticalAlign:"center",width:"100%"},i.createElement(h.ye,{verticalAlign:"center",width:"75%"},i.createElement(Ye.a,{color:"primary",font:"body-3"},(0,g.c)("If you are a resident of the United States, your above Watch History setting will apply for two years. You can always withdraw your consent in your profile settings."))),i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Accept"),shrink:!1,waiting:l||a,onPress:f}))))):null}function vb(){const e=we.i,t=(0,s.w1)((0,he.c)(p.Mz)),{showNewUserOnboarding:r,onFinish:n}=bv(e);return r?i.createElement(S.cp,{metricsPage:l.mG,metricsPane:e},t?i.createElement(mb,{onFinish:n}):i.createElement(fb,{onFinish:n})):null}var bb=r(17920);const Sb={container:"PageHeaderPlaceholder-container-dQ5VUs"};function Pb(){return i.createElement("div",{className:Sb.container})}var Ib=r(95008),Eb=r(72080);const wb={container:"ErrorNavBar-container-_0iluT NavBar-container-F87RQ_"};function Cb(){const e=(0,g.c)("An unexpected error is impacting the navigation bar");return i.createElement("div",{className:wb.container},i.createElement(dp.c,{errorMessage:`${e}.`},i.createElement(rd.o,{tooltip:e},i.createElement(Ut.wP,{accessibilityLabel:e,icon:Qe.default,iconSize:"l",insetFocus:!0,transparent:!0}))))}var Ob=r(44524),Mb=r(26848),Tb=r(23736),Db=r(60880),kb=r(3984),xb=r(15704),Ab=r(60004),Rb=r(16852),Nb=r(19768),Lb=r(86148);function jb(){const e=(0,g.c)("An unexpected error is impacting the account menu");return i.createElement(dp.c,{errorMessage:`${e}.`},i.createElement(rd.o,{placement:"right",tooltip:e},i.createElement(Ut.wP,{accessibilityLabel:e,icon:Qe.default,iconSize:"l",insetFocus:!0,transparent:!0})))}var Ub=r(48384),Fb=r(93596);const Vb={disclosure:"NavBarAccountMenu-disclosure-wxY3xU",profileAvatarBadge:"NavBarAccountMenu-profileAvatarBadge-AS8Pv6",navbarAvatarBadge:"NavBarAccountMenu-navbarAvatarBadge-aUFsOp",profile:"NavBarAccountMenu-profile-hkAkkF",container:"NavBarAccountMenu-container-RRO8xK",profileContainer:"NavBarAccountMenu-profileContainer-xO2bsU",avatarWrapper:"NavBarAccountMenu-avatarWrapper-MmAZIR"},_b=30,Wb=80,Bb=248;function Hb(){const e=(0,s.OY)(),t=(0,s.w1)(ye.c),r=(0,Lb.c)(),{details:{friendlyName:n,thumb:a,username:o,anonymous:c,isFullUser:l},isPending:d,isPopulated:u,error:p}=(0,s.w1)(Je.c),{friendInvites:m,homeInvites:y,serverInvites:f,unreadAnnouncements:v,unreadReports:b,isPopulated:S}=(0,Nb.c)(),P=(0,s.w1)(Wt.c),I=(0,_t.y)(),[E,w]=(0,i.useState)(!1),C=(0,i.useRef)(null);(0,i.useEffect)((()=>{w(P.isConnected)}),[P]),(0,i.useEffect)((()=>{E&&t&&(e((0,np.QD)()),e((0,np.UJ)()),d||u||p||e(cl.c.actions.fetchUserDetails({server:P})))}),[e,p,E,d,u,t,P]);const O=(0,i.useCallback)((()=>{const e=(0,_n.WI)("keyboardShortcuts");ou.c.trigger("show:modal",new Fb.c({shortcuts:e.shortcuts}))}),[]),M=(0,i.useCallback)((()=>{(0,_n.WI)("metrics").trackClick({action:Ee.wR}),e((0,tl.WS)())}),[e]),T=E&&(!t||c),D=t&&l&&!c,x=n||o,A=o!==x?o:null,R=y+m+f+v+b;return i.createElement(Vt.iS,{isOpen:I.isOpen,onOpenChange:I.onOpenChange},i.createElement(rd.o,{sideOffset:7,tooltip:(0,g.c)("Account")},i.createElement(Vt.Eq,null,i.createElement(Ut._M,{ref:C,accessibilityLabel:(0,g.c)("Account Menu"),isOpen:I.isOpen,testID:"navbarAccountMenuTrigger",type:"button"},i.createElement("div",{className:Vb.disclosure},i.createElement(Bt.c,{server:P,size:_b,url:a}),S&&R>0?i.createElement("div",{className:Vb.navbarAvatarBadge},i.createElement(Ub.c,{size:"l"},R)):null)))),i.createElement(Vt.wz,{align:"end",testID:"menu",width:Bb},c?null:i.createElement("div",{className:Vb.profile},i.createElement(Vt.M1,{disabled:!l,href:(0,k.c)("profile")},i.createElement("div",{className:Vb.profileContainer},i.createElement(h.ye,{align:"center",gap:"xxs"},i.createElement("div",{className:Vb.avatarWrapper},i.createElement(Bt.c,{server:P,size:Wb,url:a}),m+y>0?i.createElement("div",{className:Vb.profileAvatarBadge},i.createElement(Ub.c,{size:"l"},m+y)):null),i.createElement(h.ye,{align:"center",width:"90%"},i.createElement(Ye.a,{numberOfLines:1},x),A?i.createElement(Ye.a,{color:"muted",font:"body-2",numberOfLines:1},A):null))))),l&&!c?i.createElement(Vt.M1,{color:"primary",href:(0,k.c)("profile")},(0,g.c)("View Profile")):null,i.createElement(Vt.M1,{color:"primary",href:(0,k.c)("account")},i.createElement(h.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},i.createElement(Ye.a,{color:"inherit",font:"inherit"},(0,g.c)("Account Settings")),f>0?i.createElement(Ub.c,{size:"l"},f):null)),t&&l&&!c?i.createElement(Vt.M1,{color:"primary",href:"#!/announcements"},i.createElement(h.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},(0,g.c)("Announcements"),v>0?i.createElement(Ub.c,{size:"l"},v):null)):null,r?i.createElement(Vt.M1,{color:"primary",href:"#!/reports"},i.createElement(h.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},(0,g.c)("Reported Issues"),b>0?i.createElement(Ub.c,{size:"l"},b):null)):null,E?i.createElement(Vt.M1,{color:"primary",href:(0,As.c)(),target:"_self"},(0,g.c)("Get Plex Apps")):null,E?i.createElement(Vt.M1,{color:"primary",href:Rb.GS,target:"_self"},(0,g.c)("Help")):null,i.createElement(Vt.qS,{onPress:O},(0,g.c)("Keyboard Shortcuts")),i.createElement(Vt.ew,null),c?null:i.createElement(Vt.qS,{color:"primary",onPress:M},(0,g.c)("Switch User")),T?i.createElement(Vt.M1,{color:"primary",href:(0,k.c)("login")},(0,g.c)("Sign In")):null,D?i.createElement(Vt.M1,{color:"primary",href:(0,k.c)("logout")},(0,g.c)("Sign Out")):null))}function zb(){return i.createElement(Eb.c,{errorComponent:jb},i.createElement(Hb,null))}function Gb({color:e="default",icon:t,isDisabled:r,title:n,onPress:s}){return i.createElement(rd.o,{tooltip:n},i.createElement(Ut.wP,{accessibilityLabel:n,color:e,disabled:r,icon:t,iconSize:"l",transparent:!0,onPress:s}))}function qb({color:e="default",href:t,icon:r,isDisabled:n,title:s}){return i.createElement(rd.o,{tooltip:s},i.createElement(Ut.eE,{accessibilityLabel:s,color:e,disabled:n,href:t,icon:r,iconSize:"l",transparent:!0}))}var Kb=r(91500),Qb=r(25398),$b=r(25248),Yb=r(29704),Xb=r(95676),Jb=r(63524),Zb=r(99372),eS=Object.defineProperty,tS=Object.defineProperties,rS=Object.getOwnPropertyDescriptors,nS=Object.getOwnPropertySymbols,iS=Object.prototype.hasOwnProperty,sS=Object.prototype.propertyIsEnumerable,aS=(e,t,r)=>t in e?eS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oS=(e,t)=>{for(var r in t||(t={}))iS.call(t,r)&&aS(e,r,t[r]);if(nS)for(var r of nS(t))sS.call(t,r)&&aS(e,r,t[r]);return e},cS=(e,t)=>tS(e,rS(t));function lS({type:e,value:t,title:r}){const n=(0,s.OY)(),a=(0,s.w1)((0,ec.c)("searchExperiments")),o=(0,i.useCallback)((t=>{n((0,tl.SI)({searchExperiments:cS(oS({},a),{[e]:t})}))}),[n,a,e]);return i.createElement(Vt.OF,{isChecked:t,shouldCloseOnPress:!1,onCheckedChanged:o},r)}const dS=function(){const e=(0,Zb.i)(p.sP),t=(0,s.w1)((0,Xb.c)(Jb.kz.ShowResultScores)),r=(0,i.useMemo)((()=>[{type:Jb.kz.ShowResultScores,value:t,title:"Show result scores"}]),[t]);return e?i.createElement(i.Fragment,null,i.createElement(Vt.Yd,null," Dev Flags"),r.map((e=>i.createElement(lS,cS(oS({},e),{key:e.type}))))):null};var uS=r(43048),pS=r(69484),mS=r(68624),hS=r(76592),yS=Object.defineProperty,gS=Object.getOwnPropertySymbols,fS=Object.prototype.hasOwnProperty,vS=Object.prototype.propertyIsEnumerable,bS=(e,t,r)=>t in e?yS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,SS=(e,t)=>{for(var r in t||(t={}))fS.call(t,r)&&bS(e,r,t[r]);if(gS)for(var r of gS(t))vS.call(t,r)&&bS(e,r,t[r]);return e};function PS({id:e,title:t,enabled:r}){const n=(0,s.OY)(),a=(0,i.useCallback)((t=>{n(hS.c.actions.searchProviderChangeEnabled({id:e,enabled:t}))}),[n,e]);return i.createElement(Vt.OF,{isChecked:r,shouldCloseOnPress:!1,onCheckedChanged:a},t)}function IS(){const e=(0,s.OY)(),t=(0,uS.c)(),{isUpdating:r}=(0,s.w1)(mS.c),n=(0,s.w1)(Wt.c),a=(0,s.w1)(pS.c);return(0,i.useEffect)((()=>{n.isConnected&&(null==a?void 0:a.isPopulated)&&r&&e(hS.c.actions.searchProvidersUpdateRequested({server:n,provider:a}))}),[e,r,a,n]),t.length?i.createElement(i.Fragment,null,i.createElement(Vt.Yd,{color:"primary"},(0,g.c)("On Plex")),t.map((e=>i.createElement(PS,SS({key:e.id},e))))):null}var ES=r(8624),wS=r(50112),CS=r(36180),OS=Object.defineProperty,MS=Object.defineProperties,TS=Object.getOwnPropertyDescriptors,DS=Object.getOwnPropertySymbols,kS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,AS=(e,t,r)=>t in e?OS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RS=(e,t)=>{for(var r in t||(t={}))kS.call(t,r)&&AS(e,r,t[r]);if(DS)for(var r of DS(t))xS.call(t,r)&&AS(e,r,t[r]);return e},NS=(e,t)=>MS(e,TS(t));function LS(){const e=(0,s.OY)(),t=(0,s.w1)(wS.c),r=(0,s.w1)(ES.c),n=(0,i.useMemo)((()=>t.filter((([e])=>!e.isCloud)).flatMap((([e])=>e))),[t]),a=(0,i.useCallback)((t=>n=>{(0,hv.SS)((()=>{e((0,tl.SI)({disabledUniversalSearchIdentifiers:NS(RS({},r),{[t]:!n})})),e(hS.c.actions.clearResults()),e(hS.c.actions.markPending())}))}),[r,e]);return n.length?i.createElement(i.Fragment,null,i.createElement(Vt.Yd,{color:"primary"},(0,g.c)("Media Libraries")),n.map((e=>i.createElement(Vt.OF,{key:e.machineIdentifier,isChecked:!r[e.machineIdentifier],shouldCloseOnPress:!1,onCheckedChanged:a(e.machineIdentifier)},i.createElement(Ye.a,{font:"body-2",numberOfLines:2},(0,CS.c)(e)))))):null}var jS=r(74914),US=r(44956),FS=r(56676),VS=r(7988),_S=r(12908),WS=r(17876),BS=r(23128);var HS=Object.defineProperty,zS=Object.getOwnPropertySymbols,GS=Object.prototype.hasOwnProperty,qS=Object.prototype.propertyIsEnumerable,KS=(e,t,r)=>t in e?HS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function QS({itemIndex:e,currentIndex:t,getItemProps:r,result:n}){const a=(0,s.OY)(),o=(0,s.w1)($b.c),c=(0,i.useCallback)((()=>{a((0,tl.SI)({recentSearches:o.filter(((t,r)=>r!==e))}))}),[a,o,e]),l=r({className:jt()("RecentSearchResultItem-container-UIffR3",e===t&&"RecentSearchResultItem-highlighted-sxfe86"),index:e,item:n});return i.createElement("div",((e,t)=>{for(var r in t||(t={}))GS.call(t,r)&&KS(e,r,t[r]);if(zS)for(var r of zS(t))qS.call(t,r)&&KS(e,r,t[r]);return e})({},l),i.createElement(h.ye,{align:"space-between",gap:"xs",orientation:"horizontal",verticalAlign:"center",width:"100%"},i.createElement(h.ye,{gap:"l",orientation:"horizontal",verticalAlign:"center"},i.createElement(BS.default,{color:"muted",size:"l"}),i.createElement(Ye.a,{font:"heading-3",numberOfLines:1},n.query)),i.createElement(Ut.wP,{accessibilityLabel:(0,g.c)("Delete Recent Search"),icon:gp.default,iconSize:"l",size:"xs",transparent:!0,onPress:c})))}var $S=r(5028),YS=r(73092),XS=r(49412);var JS=Object.defineProperty,ZS=Object.getOwnPropertySymbols,eP=Object.prototype.hasOwnProperty,tP=Object.prototype.propertyIsEnumerable,rP=(e,t,r)=>t in e?JS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function nP({itemIndex:e,currentIndex:t,getItemProps:r,searchResult:n}){const s=(0,XS.mQ)(n)?n:void 0,a=(0,XS.mQ)(n)?n.items[0]:n,{serverIdentifier:o,providerIdentifier:c}=(0,co.c)(a.source);return i.createElement(_e.cp,{machineIdentifier:o,providerIdentifier:c},i.createElement(YS.c,{isHovered:t===e},i.createElement("div",((e,t)=>{for(var r in t||(t={}))eP.call(t,r)&&rP(e,r,t[r]);if(ZS)for(var r of ZS(t))tP.call(t,r)&&rP(e,r,t[r]);return e})({},r({className:"SearchResultItem-underlay-XK4qa4",index:e,item:a}))),i.createElement("div",{className:"SearchResultItem-overlay-z1OiWo"},i.createElement($S.c,{isHighlighted:t===e,mergedResult:s,result:a}))))}var iP=r(47284),sP=r(72916);const aP=(0,At.M3)(sP.c,(e=>e.sourceStatuses));function oP(){const{query:e}=(0,s.w1)(sP.c),t=(0,s.w1)(aP),r=(0,i.useMemo)((()=>{let e=0,r=0,n=0;return Object.entries(t).forEach((([,t])=>{switch(t){case Jb.me.Pending:e++;break;case Jb.me.Succeeded:r++;break;case Jb.me.Failed:n++}})),{pending:e,fetched:r,errored:n}}),[t]),n=(0,i.useMemo)((()=>{if(0!==r.pending)return(0,g.c)("Searched {number} of {total}",{number:r.fetched+r.errored,total:r.pending+r.fetched+r.errored})}),[r.errored,r.fetched,r.pending]),a=(0,iP.c)(!!n,!1);return i.createElement(h.ye,{align:"center",gap:"s",orientation:"horizontal",padding:n?"l":"m",verticalAlign:"center"},n?i.createElement(i.Fragment,null,a?i.createElement(Ye.a,{color:"muted",font:"body-3"},n):null,i.createElement($e.c,{size:"xs"})):i.createElement(i.Fragment,null,i.createElement(Ye.a,{color:"primary",font:"heading-2",numberOfLines:1},(0,g.c)('Top Results for "{query}"',{query:e})),r.errored?i.createElement(rd.o,{tooltip:(0,g.c)("Some search requests timed out.")},i.createElement(Ut.wP,{accessibilityLabel:(0,g.c)("Warning"),icon:Qe.default,size:"s",transparent:!0})):null))}var cP=r(48212);function lP(){const e=(0,a.IT)();return!!(0,a.ot)(e.pathname,Zr.c.search)}var dP=r(85908);const uP="SearchPopover-searchHeading-Csy1CF";var pP=Object.defineProperty,mP=Object.defineProperties,hP=Object.getOwnPropertyDescriptors,yP=Object.getOwnPropertySymbols,gP=Object.prototype.hasOwnProperty,fP=Object.prototype.propertyIsEnumerable,vP=(e,t,r)=>t in e?pP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bP=(e,t)=>{for(var r in t||(t={}))gP.call(t,r)&&vP(e,r,t[r]);if(yP)for(var r of yP(t))fP.call(t,r)&&vP(e,r,t[r]);return e};const SP=parseInt(al.c.quickSearchDefaultWidth,10),PP=(0,i.forwardRef)((function(e,t){var r=e,{children:n,highlightedIndex:a,getItemProps:o,isOpen:c,items:l,onOpenChange:d,searchResults:u}=r,p=((e,t)=>{var r={};for(var n in e)gP.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&yP)for(var n of yP(e))t.indexOf(n)<0&&fP.call(e,n)&&(r[n]=e[n]);return r})(r,["children","highlightedIndex","getItemProps","isOpen","items","onOpenChange","searchResults"]);const{anchorRef:m,maxHeight:y,width:f,onInteractOutside:v}=(0,WS.c)({defaultWidth:SP}),b=lP(),S=(0,cP.c)(),{query:P,isPending:I,isPopulated:E}=(0,s.w1)(sP.c),w=u.length>0,{results:C,openSearchResultsPage:O}=l.reduce(((e,t)=>((0,XS.QZ)(t)?e.openSearchResultsPage=t:e.results.push(t),e)),{results:[],openSearchResultsPage:null});return i.createElement(FS._k,{isOpen:c,onOpenChange:d},i.createElement(FS.Kd,{ref:m},n),i.createElement("div",bP({ref:t},p),i.createElement(FS.IN,{arrow:!1,autoFocus:!1,maxHeight:y,placementAlign:"start",placementOffset:(0,x.c)("xs"),portalled:!1,width:f,onInteractOutside:v},P&&!(null==S?void 0:S.length)?i.createElement("div",{className:uP},i.createElement(Ye.a,{font:"body-2"},(0,g.c)("Please enable at least one source in search settings and try again."))):null,!P&&(0,XS.YP)(C[0])?i.createElement(VS.aS,null,i.createElement(h.ye,{align:"center",gap:"l",padding:"l"},i.createElement(Ye.a,{color:"primary",font:"heading-2"},(0,g.c)("Recent Searches")),i.createElement(h.ye,{gap:"none",width:"100%"},C.map(((e,t)=>i.createElement(QS,{key:`${e.query}${t}`,currentIndex:a,getItemProps:o,itemIndex:t,result:e})))))):null,!b&&P&&I?i.createElement("div",{className:"SearchPopover-loadingContainer-ZncjCG"},i.createElement($e.c,null)):null,b||!P||I||!E||w?null:i.createElement("div",{className:uP},i.createElement(_S.c,{query:P})),!b&&P&&!I&&E&&w?i.createElement(h.ye,{width:"100%"},i.createElement(VS.aS,{scrollShadow:!0},i.createElement(oP,null),i.createElement(h.ye,{gap:"none"},C.map(((e,t)=>i.createElement(nP,{key:(0,dP.c)(e),currentIndex:a,getItemProps:o,itemIndex:t,searchResult:e}))))),O?i.createElement("div",{key:C.length,className:"SearchPopover-buttonContainer-B6AYXk"},i.createElement(Ut.q,(M=bP({},o({index:C.length,item:O})),T={color:"accent",label:(0,g.c)("View More Results"),size:"xs",style:a===C.length?{backgroundColor:"var(--color-background-accent-focus)"}:{}},mP(M,hP(T))))):null):null)));var M,T})),IP=(0,i.memo)(PP),EP={container:"UniversalSearchError-container-bsntm8 UniversalSearch-searchInputContainer-T16aBq"};function wP(){const e=(0,g.c)("An unexpected error is impacting the search bar");return i.createElement("div",{className:EP.container},i.createElement(dp.c,{errorMessage:`${e}.`},i.createElement(rd.o,{placement:"right",tooltip:e},i.createElement(Ut.wP,{accessibilityLabel:e,icon:Qe.default,iconSize:"l",insetFocus:!0,transparent:!0}))))}var CP=r(5632),OP=r(98616),MP=r(54500),TP=r(16124);const DP=(0,At.M3)(TP.c,(e=>e.reduce(((e,[t,r])=>(t.isCloud||r.forEach((r=>{e.push((0,Te.c)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier}))})),e)),[]))),kP=(0,Ma.c)(DP,(e=>e));var xP=r(89220),AP=r(64840),RP=r(50976),NP=r(43948),LP=r(84920),jP=r(11236),UP=r(72264),FP=r(86552);const VP={searchInputContainer:"UniversalSearch-searchInputContainer-T16aBq",list:"UniversalSearch-list-vTcKL5"};var _P=Object.defineProperty,WP=Object.defineProperties,BP=Object.getOwnPropertyDescriptors,HP=Object.getOwnPropertySymbols,zP=Object.prototype.hasOwnProperty,GP=Object.prototype.propertyIsEnumerable,qP=(e,t,r)=>t in e?_P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KP=(e,t)=>{for(var r in t||(t={}))zP.call(t,r)&&qP(e,r,t[r]);if(HP)for(var r of HP(t))GP.call(t,r)&&qP(e,r,t[r]);return e},QP=(e,t)=>WP(e,BP(t));function $P(){const e=lP(),t=(0,s.OY)(),r=function(){const e=(0,s.OY)(),t=(0,s.w1)(Q.c),r=(0,s.w1)(CP.c),n=(0,s.w1)(pS.c),{query:a,pivot:o,source:c}=(0,s.w1)(sP.c),d=lP(),u=(0,cP.c)(),p=(0,MP.c)(),m=(0,s.w1)(kP),h=(0,i.useMemo)((()=>(0,xP.c)(o)),[o]),y=(0,i.useMemo)((()=>{if(!n)return[];const e=(0,RP.c)({userFeatures:t.features,userServices:t.services,userProviderIdentifiers:r,provider:n}),i=(0,AP.c)(e,p);return h.filter((e=>i.includes(e)))}),[h,n,p,t.features,t.services,r]);return(0,i.useCallback)((()=>{a.length&&(null==u?void 0:u.length)&&(d&&e(OP.c.actions.reset()),e(hS.c.actions.searchRequested({query:a,searchSources:m,searchProviders:p,searchPivot:o,cloudSearchTypes:y})),(0,_n.WI)("metrics").trackEvent({event:Mh.Ud,page:l.bv,interaction:!0,properties:{value:a,source:c}}))}),[a,null==u?void 0:u.length,d,e,m,p,o,y,c])}(),n=(0,NP.c)(),a=(0,ze.c)(),o=(0,Yb.c)(),c=(0,pe.c)(),d=(0,Yc.c)(c.query),u=(0,_t.y)(),[p,m]=(0,i.useState)(null),[h,y]=(0,i.useState)(!0),f=(0,s.w1)(wS.c),v=(0,s.w1)(TP.c),{pivot:b,query:P,isPending:I,isPopulated:E}=(0,s.w1)(sP.c),w=(0,s.w1)((0,LP.c)(td.kb)),C=(0,s.w1)($b.c),O=(0,uS.c)(),M=(0,cP.c)(),T=(0,i.useRef)(null),D=(0,i.useRef)(null),k=(0,FP.c)(r,td.iw),x=(0,i.useMemo)((()=>f.some((([e])=>!e.isCloud))||O.length),[O,f]),A=(0,i.useMemo)((()=>I||E?(null==M?void 0:M.length)?[...w,{searchType:Jb.Sw.OpenSearchResultsPage}]:[]:C),[I,E,C,null==M?void 0:M.length,w]),R=(0,i.useMemo)((()=>A.findIndex(XS.QZ)),[A]),{getInputProps:N,getComboboxProps:L,getItemProps:j,getMenuProps:U,highlightedIndex:F,isOpen:V,openMenu:_,closeMenu:W,selectItem:B,setHighlightedIndex:H,setInputValue:z,reset:G}=(0,Kb.c7)({items:A,defaultHighlightedIndex:R,initialInputValue:d||P,itemToString:e=>(0,XS.YP)(e)?e.query:"",onInputValueChange({selectedItem:e,inputValue:r}){(0,XS.YP)(e)||P===r||(t(hS.c.actions.setSource(Jb.i2.Input)),t(hS.c.actions.setQuery(r||"")))},onSelectedItemChange({selectedItem:e,type:r}){e&&((0,XS.YP)(e)?(t(hS.c.actions.setSource(Jb.i2.RecentSearch)),t(hS.c.actions.setQuery(e.query))):(0,XS.QZ)(e)?(t((0,tl.SI)({recentSearches:(0,jP.c)(C,P,b)})),t((0,Ie.IB)({pathname:De.c.join(Zr.c.search,{pivot:b,query:P})}))):(0,XS.mQ)(e)?m((0,UP.c)(v,e,r)):m(e))},stateReducer(e,{changes:t,type:r}){switch(r){case Kb.c7.stateChangeTypes.InputBlur:return QP(KP({},t),{inputValue:e.inputValue,selectedItem:null});case Kb.c7.stateChangeTypes.ItemClick:case Kb.c7.stateChangeTypes.InputKeyDownEnter:case Kb.c7.stateChangeTypes.FunctionSelectItem:return(0,XS.YP)(t.selectedItem)?QP(KP({},t),{isOpen:!0}):QP(KP({},t),{inputValue:e.inputValue,isOpen:!1});default:return t}}}),q=(0,i.useMemo)((()=>QP(KP({},u),{onOpenChange(e){var t;e?(u.onOpen(),W()):(u.onClose(),B(null),m(null),null==(t=D.current)||t.focus(),_())}})),[u,W,_,B]),K=(0,i.useCallback)((()=>{t(hS.c.actions.clearResults()),G()}),[t,G]),$=(0,i.useCallback)((()=>{P.length||V||K()}),[P.length,V,K]),Y=(0,i.useCallback)((()=>{(!V&&(null==C?void 0:C.length)||(null==w?void 0:w.length))&&_(),V||P.length||a({action:Ee.iS})}),[V,_,P.length,null==C?void 0:C.length,null==w?void 0:w.length,a]),X=(0,i.useCallback)((e=>{"Home"!==e.key&&"End"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0)}),[]),J=(0,i.useCallback)((e=>{e?_():W()}),[W,_]),Z=(0,i.useCallback)((()=>{K(),(null==C?void 0:C.length)&&_()}),[K,_,null==C?void 0:C.length]),ee=(0,i.useCallback)(((e,t)=>{m(e),y(t)}),[]);(0,i.useEffect)((()=>{H(R)}),[R,H]),(0,i.useEffect)((()=>{const e=()=>{var e;null==(e=D.current)||e.focus()};return ou.c.on("shortcut:search",e),()=>{ou.c.off("shortcut:search",e)}}),[]),(0,i.useEffect)((()=>{P.length||(null==C?void 0:C.length)||W()}),[W,P,null==C?void 0:C.length]),(0,i.useEffect)((()=>{E&&(B(null),_())}),[E,_,B]),(0,i.useEffect)((()=>{P.length&&(null==M?void 0:M.length)?t(hS.c.actions.markPending()):t(hS.c.actions.clearResults())}),[t,P,null==M?void 0:M.length]),(0,i.useEffect)((()=>{var e;d&&z(d),null==(e=D.current)||e.blur()}),[e]),(0,i.useEffect)((()=>{null==k||k()}),[k]),(0,i.useEffect)((()=>{var e;p&&((0,XS.mQ)(p)?(q.onOpen(),o(p.items[0])):(n(p,h),B(null),m(null),y(!0),W(),null==(e=D.current)||e.blur()))}),[p]);const te=x?{settingsMenuItems:i.createElement(i.Fragment,null,i.createElement(Vt.Yd,null,(0,g.c)("Sources to Search")),i.createElement(LS,null),i.createElement(IS,null),i.createElement(dS,null)),settingsMenuAccessibilityLabel:(0,g.c)("Search Servers and Providers")}:{},re=e?!P.length&&V:V;return i.createElement(US.c,{closeMenu:W,onResultSelect:ee},i.createElement(S.cp,{metricsPage:l.bv},i.createElement("div",KP({className:VP.searchInputContainer},L()),i.createElement(IP,QP(KP({},U()),{getItemProps:j,highlightedIndex:F,isOpen:re,items:A,searchResults:w,onOpenChange:J}),i.createElement(Qb.U,QP(KP({},te),{ref:T,inputProps:N({ref:D,id:td.s5,onBlur:$,onFocus:Y,onKeyDown:X}),onClearPress:Z}))),p&&(0,XS.mQ)(p)?i.createElement(jS.c,{mergedResult:p,modalState:q,onResultSelect:ee}):null)))}function YP(){return i.createElement(Eb.c,{errorComponent:wP},i.createElement($P,null))}var XP=r(80260),JP=r(31900),ZP=r(69524),eI=r(36856),tI=r(81688),rI=r(66109),nI=r(80096),iI=r(96072);function sI(){return(0,At.M3)(ss.c,(0,iI.c)("providerEntityID"),((e,t)=>e[t]))}var aI=r(30496);const oI=function(){return(0,At.M3)(sI(),(e=>(0,aI.c)(e.identifier,e.providerIdentifier)))},cI=function(e){return e.castApiAvailability},lI=function(){return(e,t)=>t.playerType?(0,At.M3)(cI,oI(),eI.c,((e,t,r)=>(0,nI.c)({protocol:rI.y,providerIdentifier:t,userFeaturesByUUID:r})?e:tI.Eq))(e,t):cI(e)};var dI=r(90156);const uI=(0,At.M3)(dI.c,(({cloudCompanions:e})=>e)),pI=(0,At.M3)(uI,(e=>e.reduce(((e,{cloudPlayers:t})=>e.concat(t)),[])));var mI=r(33808);const hI=(0,At.M3)((e=>e.companionServer),mI.c,((e,t)=>t[e])),yI=(0,At.M3)(hI,(e=>e?e.desktop.players:[])),gI=(0,At.M3)(yI,pI,((e,t)=>e.concat(t))),fI=function(){return(e,t)=>t.playerType?(0,At.M3)(oI(),eI.c,gI,((e,t,r)=>r.filter((({protocol:r,protocolCapabilities:n})=>(0,nI.c)({protocol:r,protocolCapabilities:n,providerIdentifier:e,userFeaturesByUUID:t})))))(e,t):gI(e,t)};var vI=r(23408);const bI=(0,At.M3)(uI,os.c,((e,t)=>e.filter((({identifier:e})=>e.includes("sonos"))).map((e=>{const r=De.c.join(e.linkURL,{"X-Plex-Token":t.accessToken,next:window.location.href});return{title:e?e.title:"Sonos",state:e?e.linkState:vI._g,url:r}})))),SI=(0,At.M3)(hI,(e=>e?e.desktop.neighborhoodDevices:[])),PI=(0,At.M3)(SI,(e=>!!e.find((({uuid:e})=>e.includes("RINCON")))));r(32132);var II=r(79584),EI=r(49128),wI=r(98772),CI=r(82468),OI=r(79264),MI=r(44064),TI=r(35456);const DI=function(e){const{isOpen:t,onClose:r}=e;return i.createElement(MI.c,{isOpen:t,metricsPage:l.cv,size:Pp.wH,onModalClose:r},i.createElement(TI.c,{onModalClose:r},i.createElement(OI.c,null,(0,g.c)("Chromecast unavailable")),i.createElement(CI.c,null,i.createElement(wI.c,{message:(0,g.c)("Casting to Chromecast requires a secure connection to the Plex Web app. Please visit {openLink}https://app.plex.tv{closeLink} and try again."),tags:[{open:"openLink",close:"closeLink",component:bp.c,to:`https://app.plex.tv/desktop${window.location.hash}`,kind:Sg.ac}]}))))};function kI({children:e,playerIdentifier:t,onPlayerSelect:r}){const n=(0,i.useCallback)((()=>{r(t)}),[t,r]);return i.createElement(Vt.qS,{onPress:n},e)}const xI="RemotePlayerMenuItems-remotePlayerProduct-KMhver",AI="RemotePlayerMenuItems-menuItemSubtitle-FzNTQf",RI="RemotePlayerMenuItems-emptyMessage-hzy_5u";function NI(e){const{castApiAvailability:t,castAppTitle:r,sonosLinks:n,isRemotePlayer:s,remotePlayerName:a,remotePlayerProduct:o,players:c,zIndex:l,onMenuClose:d,onPlayerSelect:u,onCastPress:p,onDisconnectPress:m}=e,h=(0,_t.y)(),y=(0,_t.y)(),f=(0,yl.c)(h.isOpen);(0,i.useEffect)((()=>{f&&!h.isOpen&&d()}),[f,h.isOpen,d]);const v=n.filter((({state:e})=>e===vI.yE)),b=!s&&t===tI.qE,S=!s&&t===tI.sR,P=!s&&v.length,I=!s&&n.length&&n.every((({state:e})=>e===vI.oP)),E=b||S||P||I,w=!s&&!!c.length,C=!(s||b||S||w);return i.createElement(Vt.wz,{align:"end",zIndex:l},s?i.createElement(i.Fragment,null,i.createElement(Vt.Yd,null,a),i.createElement(Vt.Yd,null,o),i.createElement(Vt.qS,{onPress:m},(0,g.c)("Disconnect"))):null,b?i.createElement(Vt.qS,{onPress:p},r?(0,g.c)("Cast ({title})...",{title:r}):(0,g.c)("Cast...")):null,S?i.createElement(i.Fragment,null,i.createElement(DI,{isOpen:h.isOpen,onClose:h.onClose}),i.createElement(Vt.qS,{onPress:h.onOpen},(0,g.c)("Cast..."))):null,null,P?v.map((e=>i.createElement(Vt.M1,{key:e.url,href:e.url},i.createElement("div",null,e.title,"..."),i.createElement("div",{className:AI},(0,g.c)("Link your Sonos account"))))):null,I?i.createElement(Vt.qS,{onPress:y.onOpen},i.createElement("div",null,"Sonos..."),i.createElement("div",{className:AI},(0,g.c)("Upgrade to a Plex Pass"))):null,E&&w?i.createElement(Vt.ew,null):null,w?c.map((({playerIdentifier:e,friendlyName:t,product:r})=>i.createElement(kI,{key:e,playerIdentifier:e,onPlayerSelect:u},i.createElement("div",null,t),i.createElement("div",{className:xI},r)))):null,C?i.createElement("div",{className:RI},(0,g.c)("No players found")):null,i.createElement(tf.c,{isOpen:y.isOpen,origin:ef.fp,onModalClose:y.onClose}))}var LI=Object.defineProperty,jI=Object.defineProperties,UI=Object.getOwnPropertyDescriptors,FI=Object.getOwnPropertySymbols,VI=Object.prototype.hasOwnProperty,_I=Object.prototype.propertyIsEnumerable,WI=(e,t,r)=>t in e?LI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,BI=(e,t)=>{for(var r in t||(t={}))VI.call(t,r)&&WI(e,r,t[r]);if(FI)for(var r of FI(t))_I.call(t,r)&&WI(e,r,t[r]);return e};const HI=()=>{},zI=(0,s.Ul)((function(){return(0,At.M3)(lI(),XP.c,fI(),bI,PI,(e=>e.companionServer),HI,((e,t,r,n,i,s,a)=>({castApiAvailability:e,castAppTitle:a,sonosLinks:i?n:[],hasCompanionServer:!!s,isRemotePlayer:!!t,remotePlayerName:t&&t.friendlyName,remotePlayerProduct:t&&t.product,players:r})))}),(function(e){return{onDiscoverPlayers(t){e(ZP.mc())},onPlayerSelect(e){(0,_n.WI)("remotePlexPlayerManager").requestSession(e)},onCastPress(t){e(JP.CM())},onDisconnectPress(t){e(ZP.sA())}}}))((function(e){const{isRemotePlayer:t,castApiAvailability:r,castAppTitle:n,sonosLinks:s,hasCompanionServer:a,remotePlayerName:o,remotePlayerProduct:c,players:l,buttonType:d,onDiscoverPlayers:u,onPlayerSelect:p,onCastPress:m,onDisconnectPress:h,onMenuChange:y}=e,f=(0,_t.y)(),v=r===tI.qE,b=t?II.default:EI.default,S=!v&&!a;(0,i.useEffect)((()=>{f.isOpen&&u()}),[f.isOpen,u]);const P=(0,i.useCallback)((e=>{f.onOpenChange(e),null==y||y(e)}),[f,y]),I={accessibilityLabel:(0,g.c)("Select Player"),color:t?"accent":void 0,icon:b,disabled:S,title:f.isOpen?void 0:(0,g.c)("Select Player"),transparent:!0};return i.createElement(Vt.iS,{isOpen:f.isOpen,onOpenChange:P},"navbar"===d?i.createElement(rd.o,{tooltip:(0,g.c)("Select Player")},i.createElement(Vt.Eq,null,i.createElement(Ut.wP,(E=BI({},I),jI(E,UI({iconSize:"l"})))))):i.createElement(Vt.Eq,null,i.createElement(Ut.wP,BI({},I))),i.createElement(NI,{castApiAvailability:r,castAppTitle:n,isRemotePlayer:t,players:l,remotePlayerName:o,remotePlayerProduct:c,sonosLinks:s,zIndex:"player"===d?1115:void 0,onCastPress:m,onDisconnectPress:h,onMenuClose:f.onClose,onPlayerSelect:p}));var E}));function GI(){const e=(0,a.Uz)(),t=(0,i.useCallback)((()=>{e.push(Zr.c.login)}),[e]);return i.createElement(Ut.c,{font:"button-2",testID:"signInButton",onPress:t},(0,g.c)("Sign In"))}function qI(){const e=(0,a.Uz)(),t=(0,i.useCallback)((()=>{e.push(Zr.c.signUp)}),[e]);return i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Sign Up"),size:"xs",testID:"signUpButton",onPress:t})}var KI=r(31920);function QI(){return i.createElement(h.ye,{height:"100%",paddingLeft:"m",paddingRight:"m",verticalAlign:"center"},i.createElement(KI.E,null))}var $I=r(65631),YI=r(45764),XI=r(91176),JI=r(57639),ZI=r(84080);function eE(e,t,r){const n=function(e){const t=e.desktop&&e.desktop.update;if(t&&(t.state===JI.AVAILABLE||t.state===JI.DOWNLOADED||t.state===JI.DOWNLOADING||t.state===JI.NOTIFY))return(0,ZI.c)(t.version)}(e);return!!(e.isConnected&&e.isFullOwnedServer&&n&&n!==r&&n!==t[e.machineIdentifier])}var tE=r(12840);const rE=(0,At.M3)(sp.c,(e=>e.dismissedServerUpdateVersions)),nE=(0,At.M3)(sp.c,(e=>e.serverUpdateDismissedVersion));var iE=r(66308);const sE={[iE.PS]:!0,[iE.K]:!0,[iE.y8]:!0,[iE.Qj]:!0,[iE.kX]:!0,[iE.ec]:!0,[iE.kV]:!0,[iE.Ep]:!0,[iE.Q9]:!0,[iE.ET]:!0,[iE.W2]:!0,[iE.QP]:!0,[iE.sT]:!0,[iE.MX]:!0,[iE.Id]:!0,[iE.qm]:!0,[iE.qC]:!0,[iE.MF]:!0,[iE.M$]:!0};var aE=r(14120),oE=r(97816),cE=r(72520),lE=r(7948);const dE=(0,At.M3)(lE.c,(e=>e.length>0));var uE=r(6188),pE=r(72496),mE=r(69468),hE=r(79988);const yE=function(e){const{title:t,subtitle:r,progress:n,isPostProcessing:s}=e;return i.createElement("div",{className:"ActivityMenuStatusItem-splitButton-Sa1oyX MenuItem-menuItem-C_KBbX"},i.createElement("span",{className:"ActivityMenuStatusItem-activityTitleContainer-vryK9I"},i.createElement("span",{className:"ActivityMenuStatusItem-activityTitle-HuU0VV",title:t},t,r?":":null),r?i.createElement("span",{className:"ActivityMenuStatusItem-activitySubtitle-t3Hz4s",title:r},r):null),i.createElement("span",null,null==n||s?i.createElement(yp.c,{size:Pp.wH}):i.createElement(hE.c,{lineWidth:2,progress:n,showProgressText:!1,size:18})))},gE="NavBarActivityMenuStatusItem-statusContainer-pbKIoK",fE="NavBarActivityMenuStatusItem-splitButton-PrLqV7 ActivityMenuStatusItem-splitButton-Sa1oyX MenuItem-menuItem-C_KBbX",vE="NavBarActivityMenuStatusItem-statusButtonIndicator-GUycVY",bE="NavBarActivityMenuStatusItem-alertIndicator-FcBD_Y",SE="NavBarActivityMenuStatusItem-statusTitle-I84MTr",PE="NavBarActivityMenuStatusItem-primaryLabel-HsZp5z";function IE(e){const{labelClassName:t,label:r,indicator:n}=e;return i.createElement(fo.c,{className:fE,to:null==e?void 0:e.to,onPress:null==e?void 0:e.onPress},i.createElement("span",{className:t},r),n?i.createElement("span",{className:vE},n):null)}const EE=(0,s.Ul)((function(){return(0,At.M3)((0,Ih.c)(),(0,uE.c)(),(0,At.M3)((0,Vf.c)(),(e=>e.backgroundTranscodeJobs?e.backgroundTranscodeJobs:[])),(0,At.M3)((0,Vf.c)(),(e=>e.activities?e.activities:[])),(0,At.M3)(((e,{serverEntityID:t})=>t),lE.c,((e,t)=>t.some((([,t])=>e===t)))),rE,nE,ss.c,((e,t,r,n,i,s,a,o)=>({friendlyName:e.friendlyName,machineIdentifier:e.machineIdentifier,providerEntityID:e.providers.map((e=>o[e])).find((e=>e.identifier===Oe.Qh)).entityID,sessionsCount:t,backgroundTranscodeJobs:r,activities:n,showLibraryUpgradeAvailable:i,showUpdateAvailable:eE(e,s,a)})))}))((function(e){const{friendlyName:t,machineIdentifier:r,sessionsCount:n,backgroundTranscodeJobs:s,activities:a,showUpdateAvailable:o,onMenuClose:c}=e,l=encodeURIComponent(r),d=(0,i.useCallback)((()=>{(0,hl.E)(r),c()}),[r,c]);return i.createElement("div",{className:gE},i.createElement("div",{className:SE},t),i.createElement(IE,{indicator:n?`${n}`:null,label:(0,g.c)("Dashboard"),to:(0,mE.c)(r,"status","server-dashboard"),onPress:c}),s.length?i.createElement(IE,{indicator:`${s.length}`,label:(0,g.c)("Conversions"),to:(0,mE.c)(r,"status","conversion"),onPress:c}):null,a.length?a.map((e=>{const{uuid:t,type:r,title:n,subtitle:s,progress:a,Context:o={}}=e;return sE[r]?i.createElement(yE,{key:t,isPostProcessing:o.status===pE.iQ,progress:a,subtitle:s,title:n}):null})):null,o?i.createElement(IE,{indicator:i.createElement("div",{className:bE},i.createElement(oE.default,null)),label:(0,g.c)("Server Update Available"),labelClassName:PE,to:`#!/server/${l}/update`,onPress:c}):null,e.showLibraryUpgradeAvailable?i.createElement(IE,{indicator:i.createElement("div",{className:bE},i.createElement(oE.default,null)),label:(0,g.c)("Upgrade Libraries"),labelClassName:PE,onPress:d}):null)})),wE=(0,s.Ul)((function(){return(0,At.M3)((0,Vf.c)(),(e=>({activities:e&&e.activities?e.activities.filter((e=>sE[e.type])):[]})))}))((function(e){const{activities:t,onMenuClose:r}=e;return t.length?i.createElement("div",{className:"NavBarEmbeddedServerActivityMenuStatusItem-statusContainer-hGI00g NavBarActivityMenuStatusItem-statusContainer-pbKIoK"},i.createElement("div",{className:"NavBarEmbeddedServerActivityMenuStatusItem-statusTitle-NzWm_R NavBarActivityMenuStatusItem-statusTitle-I84MTr"},i.createElement(bp.c,{to:(0,gy.c)(),onPress:r},(0,g.c)("Downloads"))),t.map((e=>{const{uuid:t,title:r,subtitle:n,progress:s,Context:a={}}=e;return i.createElement(yE,{key:t,isPostProcessing:a.status===pE.iQ,progress:s,subtitle:n,title:r})}))):null}));var CE=Object.defineProperty,OE=Object.defineProperties,ME=Object.getOwnPropertyDescriptors,TE=Object.getOwnPropertySymbols,DE=Object.prototype.hasOwnProperty,kE=Object.prototype.propertyIsEnumerable,xE=(e,t,r)=>t in e?CE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,AE=Object.defineProperty,RE=Object.getOwnPropertySymbols,NE=Object.prototype.hasOwnProperty,LE=Object.prototype.propertyIsEnumerable,jE=(e,t,r)=>t in e?AE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const UE={sessionsCount:0,backgroundTranscodeJobsCount:0,activitiesCount:0};function FE(e,t){return e.reduce(((e,r)=>{const{backgroundTranscodeJobs:n=[],activities:i=[]}=r.desktop,s=t[r.machineIdentifier],a=null==s?void 0:s.sessionKeys.length,o=n.length,c=i.filter((e=>!!sE[e.type])).length;return a>0&&(e.sessionsCount+=a),o>0&&(e.backgroundTranscodeJobsCount+=o),c>0&&(e.activitiesCount+=c),e}),((e,t)=>{for(var r in t||(t={}))NE.call(t,r)&&jE(e,r,t[r]);if(RE)for(var r of RE(t))LE.call(t,r)&&jE(e,r,t[r]);return e})({},UE))}const VE=(0,At.M3)(XI.c,(e=>e.v4.root.core.serverNowPlayingSessions),((e,t)=>FE(e,t))),_E=(0,At.M3)(yy.c,(e=>e.v4.root.core.serverNowPlayingSessions),((e,t)=>e?FE([e],t):UE)),WE=(0,At.M3)(VE,_E,((e,t)=>({activitiesCount:e.activitiesCount+t.activitiesCount,backgroundTranscodeJobsCount:e.backgroundTranscodeJobsCount+t.backgroundTranscodeJobsCount,sessionsCount:e.sessionsCount+t.sessionsCount}))),BE=(0,At.M3)(XI.c,$I.c,((e,t)=>e.reduce(((e,r)=>{const{libraries:n}=r.desktop;return e+n.filter((e=>{const r=t[e];return!!r&&r.refreshing})).length}),0))),HE=(0,At.M3)(XI.c,rE,nE,((e,t,r)=>e.some((e=>eE(e,t,r))))),zE=(0,s.Ul)((function(){return(0,At.M3)(((e,{isDisabled:t})=>!!t),tE.c,YI.c,WE,BE,HE,((e,t,r,n,i,s)=>{const a=r.length>0;let o=a;return t&&(o=!0,e=e||!a&&n.sessionsCount+n.backgroundTranscodeJobsCount+n.activitiesCount===0),{isDisabled:e,embeddedServerEntityID:t,ownedServerEntityIDs:r,showActivityButton:o,hasSessions:n.sessionsCount>0,hasConversions:n.backgroundTranscodeJobsCount>0,hasActivities:n.activitiesCount>0,hasAvailableServerUpdate:s,hasLibraryRefreshing:i>0,activityButtonCount:n.sessionsCount+n.backgroundTranscodeJobsCount}}))}))((function(e){const{activityButtonCount:t,embeddedServerEntityID:r,hasActivities:n,hasAvailableServerUpdate:a,hasConversions:o,hasLibraryRefreshing:c,hasSessions:l,isDisabled:d,ownedServerEntityIDs:u,showActivityButton:p}=e,m=(0,s.w1)(dE),h=(0,_t.y)(),[y,f]=(0,Km.c)({mouseEventsOnly:!0}),v=n||c,b=l||o,S=!b&&!t&&(a||m),P=t?String(t):void 0,I=(0,i.useMemo)((()=>b?aE.default:S?oE.default:cE.default),[b,S]);return(0,i.useEffect)((()=>{d&&h.isOpen&&h.onClose()}),[d,h,h.isOpen,h.onClose]),p?i.createElement("div",{className:jt()("NavBarActivityButton-container-Ht8exI",y&&"NavBarActivityButton-isHovered-kHR2yB")},P?i.createElement("div",{className:"NavBarActivityButton-labelContainer-T_xEik"},i.createElement(Ye.a,{color:"inherit",font:"body-3"},P)):null,v?i.createElement("div",{className:"NavBarActivityButton-spinnerContainer-o1MKbT"},i.createElement($e.c,{color:"inherit",size:"m"})):null,i.createElement(Vt.iS,{isOpen:h.isOpen,onOpenChange:h.onOpenChange},i.createElement(rd.o,{tooltip:(0,g.c)("Activity")},i.createElement(Vt.Eq,null,i.createElement(Ut.wP,(E=((e,t)=>{for(var r in t||(t={}))DE.call(t,r)&&xE(e,r,t[r]);if(TE)for(var r of TE(t))kE.call(t,r)&&xE(e,r,t[r]);return e})({},f),w={accessibilityLabel:(0,g.c)("Activity"),color:b||S?"accent":void 0,disabled:d,icon:I,iconSize:"l",transparent:!0},OE(E,ME(w)))))),i.createElement(Vt.wz,{align:"end",width:300},u.map((e=>i.createElement(EE,{key:e,serverEntityID:e,onMenuClose:h.onClose}))),r?i.createElement(wE,{key:r,serverEntityID:r,onMenuClose:h.onClose}):null))):null;var E,w}));var GE=r(9852),qE=Object.defineProperty,KE=(e,t,r)=>(((e,t,r)=>{t in e?qE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class QE extends i.Component{constructor(e,t){super(e,t),KE(this,"onButtonPress",(e=>{const{shouldBypassModal:t}=this.props;(0,_n.WI)("metrics").trackEvent({event:Mh.wB,interaction:!0,context:{experiments:{"upsell-experiment":t?"direct":"in-app"}}}),t||this.setState({isPlexPassModalOpen:!0})})),KE(this,"onModalClose",(e=>{this.setState({isPlexPassModalOpen:!1})})),this.state={isPlexPassModalOpen:!1}}render(){const{shouldBypassModal:e}=this.props,t=De.c.join((0,GE.ci)("/plex-pass/purchase"),{utm_source:"app.plex.tv",utm_medium:"app",utm_campaign:"PP_in-app-upsell_01",utm_content:ef.wR});return i.createElement(i.Fragment,null,e?i.createElement(Ut.mq,{color:"accent",href:t,label:(0,g.c)("Go Premium"),size:"xs",target:"_blank",onPress:this.onButtonPress}):i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Go Premium"),size:"xs",onPress:this.onButtonPress}),i.createElement(tf.c,{isOpen:this.state.isPlexPassModalOpen,metricsProperties:{context:c.NAV_BAR},origin:ef.wR,onModalClose:this.onModalClose}))}}const $E=QE,YE=(0,Ib.G8)()||(0,Ib.uG)(),XE=(0,At.M3)((e=>e.isFullscreen),(e=>e)),JE=(0,At.M3)(tp.c,(e=>e.isSidebarCollapsed)),ZE=(0,At.M3)((e=>e.downloads&&e.downloads.subscriptions),(e=>!!e&&e.length>0)),ew=(0,At.M3)(Um,(e=>e.some((e=>e.isConnected)))),tw=(0,s.Ul)((function(){return(0,At.M3)((e=>e.history),ls.c,XE,JE,(0,At.M3)(ls.c,os.c,ZE,ew,((e,t,r,n)=>!(e.isLocked||!t)&&(t.isResolved||r||n))),(0,mv.c)(p.Aj),((e,t,r,n,i,s)=>{const a=(0,Ib.uG)()&&(0,_n.WI)("fullscreenManager").hasFullscreen;return{hasHistory:e.length>1,isFullscreen:r,isSidebarCollapsed:n,isAnonymousUser:!!t.anonymous,canGoPremium:t.canGoPremium,shouldBypassPlexPassUpsellModal:s,canEnterFullscreen:a&&!r,canExitFullscreen:a&&r,canNavigateHistory:YE,shouldRender:i}}))}),(function(e,t){return{onBackPress(t){e((0,Ie.eo)())},onEnterFullscreen(e){(0,_n.WI)("fullscreenManager").enter()},onExitFullscreen(e){(0,_n.WI)("fullscreenManager").exit()},onToggleCollapsedSidebar(t){(0,hv.SS)((()=>{e((0,tl.SI)({isSidebarCollapsed:t}))}))}}}))((function(e){const{hasHistory:t,canEnterFullscreen:r,canExitFullscreen:n,isAnonymousUser:o,canGoPremium:c,shouldBypassPlexPassUpsellModal:l,canNavigateHistory:d,isSidebarCollapsed:u,shouldRender:p,onBackPress:m,onEnterFullscreen:y,onExitFullscreen:f,onToggleCollapsedSidebar:v}=e,b=(0,s.w1)(Ab.c),S=(0,i.useCallback)((()=>{v(!u)}),[u,v]),P=!!(0,a.SU)({path:[Zr.c.account,Zr.c.accountPlexTv,Zr.c.announcements,Zr.c.devices,Zr.c.info,Zr.c.login,Zr.c.logout,Zr.c.logs,Zr.c.onlineMediaSources,Zr.c.serverSettings,Zr.c.signUp,Zr.c.streamingServices,Zr.c.userSharingSettings,Zr.c.usersSharing,Zr.c.plexHome,Zr.c.plexHomeSharing,Zr.c.manageLibraryAccess,Zr.c.manageLibraryAccessSharing,Zr.c.watchlistRSS,Zr.c.webSettings,Zr.c.webSettingsExperiments,Zr.c.webhooks],exact:!0});if(!p)return null;const I=(0,zy.c)("NavBar",b);return i.createElement("div",{key:I,className:"NavBar-container-F87RQ_"},i.createElement(h.ye,{align:"center",grow:!0,height:"100%",orientation:"horizontal",verticalAlign:"center"},P?i.createElement(qb,{href:(0,k.c)("home"),icon:fp.default,title:(0,g.c)("Home")}):i.createElement(Gb,{icon:Ob.default,title:u?(0,g.c)("Expand"):(0,g.c)("Collapse"),onPress:S}),i.createElement("div",{className:"NavBar-logoContainer-bFQ9Af"},i.createElement(qb,{href:(0,k.c)("home"),icon:Mb.default,title:(0,g.c)("Home")})),d?i.createElement(Gb,{icon:Tb.default,isDisabled:!t,title:(0,g.c)("Back"),onPress:m}):null,i.createElement(YP,null)),i.createElement(h.ye,{align:"center",height:"100%",orientation:"horizontal",paddingLeft:"m",paddingRight:"m",verticalAlign:"center"},c?i.createElement($E,{shouldBypassModal:l}):null,o?i.createElement(h.ye,{gap:"m",orientation:"horizontal"},i.createElement(GI,null),i.createElement(qI,null)):null,c||o?i.createElement(QI,null):null,n?i.createElement(Gb,{icon:Db.default,title:(0,g.c)("Exit Full Screen"),onPress:f}):null,r?i.createElement(Gb,{icon:kb.default,title:(0,g.c)("Enter Full Screen"),onPress:y}):null,r||n?i.createElement(QI,null):null,i.createElement(zE,null),i.createElement(qb,{href:(0,k.c)("webSettings",{settingsSubset:"general"}),icon:xb.default,title:(0,g.c)("Settings")}),i.createElement(zI,{buttonType:"navbar"}),i.createElement(zb,null)))}));function rw(){return i.createElement(Eb.c,{errorComponent:Cb},i.createElement(tw,null))}var nw=r(24012);const iw=function(){const e=(0,pe.c)(),t=(0,Yc.c)(e.redirectUrl),r=(0,s.OY)(),n=(0,s.w1)(ep.c),{available:o,isResolved:c,isRejected:l}=(0,s.w1)(os.c),d=(0,ke.c)(o),u=!0===o||!1===o,p=!0!==d&&!1!==d;return(0,_f.c)((()=>{r((0,f.q4)())})),(0,i.useEffect)((()=>{p&&u&&r((0,f.q4)())}),[r,u,p]),c?n?i.createElement(Xg,null):i.createElement(a.YJ,{to:t||Zr.c.home[0]}):l&&u?o?i.createElement(Xg,null):i.createElement(nw.c,null):i.createElement(E.c,null,i.createElement(O.c,null))};var sw=r(1292),aw=r(32116);const ow=(0,At.M3)(ap,(e=>({hasDismissedServerDownloadMessage:e}))),cw={dispatchSaveDeviceSettings:Ie.wB},lw=(0,s.Ul)(ow,cw)((function(e){const{hasDismissedServerDownloadMessage:t,dispatchSaveDeviceSettings:r}=e,n=(0,i.useCallback)((()=>{r({hasDismissedServerDownloadMessage:!0})}),[r]);return i.createElement(Jc.c,{description:(0,g.c)("Organize, beautify, stream, and share your personal collection of movies, TV, music, and photos anywhere, on all your devices. To get started, download our free Plex Media Server software on the device where you store your media."),iconSrc:ns,title:(0,g.c)("Add your media to Plex")},i.createElement(sw.c,{kind:Sg.ac,size:Pp.OM,target:"_self",to:(0,As.c)()},(0,g.c)("Get Plex Media Server")),t?null:i.createElement(aw.c,null,i.createElement(bp.c,{kind:Sg.ac,size:Pp.wH,to:"#",onPress:n},(0,g.c)("Don't show this in my Pinned Sources sidebar"))))}));var dw=r(85332),uw=r(92048),pw=r(57344);class mw extends i.Component{static getDerivedStateFromProps(e,t){return e.isSignedIn&&!t.isSigningOut?{isSigningOut:!0}:null}constructor(e,t){super(e,t),this.state={isSigningOut:!1}}componentDidMount(){this.state.isSigningOut&&this.props.onSignOut()}componentDidUpdate(e,t){this.state.isSigningOut&&!t.isSigningOut&&this.props.onSignOut()}render(){return i.createElement(dw.c,{metricsPage:l.is},i.createElement(uw.c,null,i.createElement(pw.c,null,i.createElement(yp.c,null))))}}const hw=mw,yw=(0,At.M3)(ls.c,(({isSignedIn:e})=>({isSignedIn:e}))),gw=(0,s.Ul)(yw,(function(e){return{onSignOut(){$y.c.execute("signOut").then((()=>{e((0,f.C8)({route:"login",replace:!0}))}))}}}))(hw);var fw=r(3268),vw=r.n(fw),bw=r(17472),Sw=r(57674);const Pw=function(){return(0,At.M3)((0,iI.c)("currentDecision"),(0,Sw.c)(),((e,t)=>e&&e.playQueueItemID===t.playQueueItemID?e:void 0))};var Iw=r(12488);const Ew="commercial",ww="credits",Cw="intro";var Ow=r(1764);function Mw(){return(0,At.M3)(mI.c,(0,iI.c)("serverEntityID"),((e,t)=>e[t]))}var Tw=r(29680);const Dw=(0,At.M3)(sp.c,(e=>e.debugAdKind));var kw=r(96516);function xw(e=0){return(0,At.M3)((0,Sw.c)(e),mo.c,((e,t)=>{if(e)return t[e.metadataItem]}))}const Aw=(0,At.M3)(sI(),(e=>!(!e||!Oe._u((0,aI.c)(e.identifier,e.providerIdentifier),[Oe.$9,Oe._0]))));function Rw(){return(0,At.M3)(Aw,xw(),(0,kw.c)(),Pw(),((e,t,r,n)=>{let i;return e?i=r:n&&(i=t.Media[n.mediaIndex]),i||null}))}var Nw=r(81792),Lw=r(21784),jw=r(40604),Uw=r(12612),Fw=r(50492),Vw=r(31772),_w=r(55340);const Ww=(0,i.createContext)(),Bw="UPDATE_POSITION_MILLISECONDS",Hw="RESET_POSITION_MILLISECONDS",zw=(0,_w.c)(Bw),Gw=(0,_w.c)(Hw);function qw(e,{type:t,payload:r}){switch(t){case Bw:return r;case Hw:return 0;default:return e}}var Kw=Object.defineProperty,Qw=Object.defineProperties,$w=Object.getOwnPropertyDescriptors,Yw=Object.getOwnPropertySymbols,Xw=Object.prototype.hasOwnProperty,Jw=Object.prototype.propertyIsEnumerable,Zw=(e,t,r)=>t in e?Kw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eC=(e,t,r)=>(Zw(e,"symbol"!=typeof t?t+"":t,r),r);const tC=function(e){var t;const r={dispatchUpdatePositionMilliseconds:zw,dispatchResetPositionMilliseconds:Gw};return(0,s.Ul)(null,r,null,{context:Ww})((t=class extends i.Component{constructor(){super(...arguments),eC(this,"onPositionMillisecondsChange",(e=>{this.props.dispatchUpdatePositionMilliseconds(e)}))}shouldComponentUpdate(e,t){return(0,cy.c)(this,e,t)}componentWillUnmount(){this.props.dispatchResetPositionMilliseconds()}render(){const t=this.props,{dispatchUpdatePositionMilliseconds:r,dispatchResetPositionMilliseconds:n}=t,s=((e,t)=>{var r={};for(var n in e)Xw.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Yw)for(var n of Yw(e))t.indexOf(n)<0&&Jw.call(e,n)&&(r[n]=e[n]);return r})(t,["dispatchUpdatePositionMilliseconds","dispatchResetPositionMilliseconds"]);return i.createElement(e,(a=((e,t)=>{for(var r in t||(t={}))Xw.call(t,r)&&Zw(e,r,t[r]);if(Yw)for(var r of Yw(t))Jw.call(t,r)&&Zw(e,r,t[r]);return e})({},s),o={onPositionMillisecondsChange:this.onPositionMillisecondsChange},Qw(a,$w(o))));var a,o}},eC(t,"displayName",`PositionMillisecondsMonitor(${(0,Fw.c)(e)})`),eC(t,"WrappedComponent",e),eC(t,"propTypes",{dispatchUpdatePositionMilliseconds:vw().func.isRequired,dispatchResetPositionMilliseconds:vw().func.isRequired}),t))};function rC(){return(0,At.M3)(XP.c,(0,iI.c)("playbackSpeed"),(0,Ow.c)(),((e,t,r)=>e?1:t||r&&r.playbackSpeed||1))}var nC=r(99252),iC=r(65724),sC=r(95420);var aC=r(84360),oC=r(66816),cC=r(29572),lC=r(46112);var dC=r(76636);const uC=function(){return(0,At.M3)((0,iI.c)("mediaIndex"),(0,Sw.c)(),mo.c,((e=0,t,r)=>{if(!t||!t.metadataItem)return;const{Media:n}=r[t.metadataItem];return n[e]}))},pC=function(){return(0,At.M3)((0,iI.c)("partIndex"),uC(),((e=0,t)=>{if(t)return t.Part[e]}))},mC=function(){return(0,At.M3)(pC(),(e=>{if(!e)return{videoStreams:[],selectedVideoStream:null,audioStreams:[],selectedAudioStream:null,subtitlesStreams:[],selectedSubtitlesStream:null};const t=dC.c.get("video").id,r=dC.c.get("audio").id,n=dC.c.get("subtitles").id,i=e.Stream.filter((e=>e.streamType===t)),s=e.Stream.filter((e=>e.streamType===r)),a=e.Stream.filter((e=>e.streamType===n)),o=i[0],c=s.find((e=>e.selected)),l=a.find((e=>e.selected));return{videoStreams:i,selectedVideoStream:o,audioStreams:s,selectedAudioStream:c,subtitlesStreams:a,selectedSubtitlesStream:l}}))};var hC=r(53256);function yC(){return(0,At.M3)(Aw,xw(),(0,hC.c)(),((e,t,r)=>e?r:t))}var gC=r(39835);const fC=function(){return(0,At.M3)((0,iI.c)("serverEntityID"),Pw(),mI.c,((e,t,r)=>r[(null==t?void 0:t.transcodeServerEntityID)||e]))};var vC=r(78292),bC=r(4828),SC=r(55272),PC=r(65723),IC=r(1484),EC=r(89988);var wC=Object.defineProperty,CC=Object.defineProperties,OC=Object.getOwnPropertyDescriptors,MC=Object.getOwnPropertySymbols,TC=Object.prototype.hasOwnProperty,DC=Object.prototype.propertyIsEnumerable,kC=(e,t,r)=>t in e?wC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class xC extends i.Component{constructor(e,t){super(e,t),((e,t,r)=>{kC(this,t+"",void 0)})(0,"_mediaComponent"),this._mediaComponent=(0,_n.WI)("mediaComponent")}render(){const e=this.props,{isDecisionPending:t,isDecisionDirectPlay:r,isDecisionDirectStreamAudio:n,isDecisionDirectStreamVideo:s,isLibraryProvider:a,hasStreamProtocol:o,isPaused:c,isAdVisible:l,decisionUrl:d,decisionProtocol:u,decisionError:p,decisionDrm:m,decisionCertificate:h,decisionLicense:y,media:g,mediaType:f,mediaSubtype:v,placement:b,shouldCoverWhenDecisionPending:S}=e,P=((e,t)=>{var r={};for(var n in e)TC.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&MC)for(var n of MC(e))t.indexOf(n)<0&&DC.call(e,n)&&(r[n]=e[n]);return r})(e,["isDecisionPending","isDecisionDirectPlay","isDecisionDirectStreamAudio","isDecisionDirectStreamVideo","isLibraryProvider","hasStreamProtocol","isPaused","isAdVisible","decisionUrl","decisionProtocol","decisionError","decisionDrm","decisionCertificate","decisionLicense","media","mediaType","mediaSubtype","placement","shouldCoverWhenDecisionPending"]);if(t)return S?i.createElement("div",{className:"PlayerMedia-isDecisionPending-r621tc"}):null;const I=this._mediaComponent.getComponent({drm:m,protocol:u,isDirectPlay:r,isDirectStreamAudio:n,isDirectStreamVideo:s,isLibraryProvider:a,hasStreamProtocol:o,media:g}),E=f===jw.KI?EC.KE:b;return i.createElement(i.Suspense,{fallback:null},i.createElement(I,(w=((e,t)=>{for(var r in t||(t={}))TC.call(t,r)&&kC(e,r,t[r]);if(MC)for(var r of MC(t))DC.call(t,r)&&kC(e,r,t[r]);return e})({},P),CC(w,OC({key:d,certificate:h,drm:m,isDecisionDirectPlay:r,isDecisionDirectStreamAudio:n,isDecisionDirectStreamVideo:s,license:y,media:g,mediaSubtype:v,mediaType:f,paused:c||l,placement:E,src:d})))));var w}}const AC=xC;var RC=Object.defineProperty,NC=Object.defineProperties,LC=Object.getOwnPropertyDescriptors,jC=Object.getOwnPropertySymbols,UC=Object.prototype.hasOwnProperty,FC=Object.prototype.propertyIsEnumerable,VC=(e,t,r)=>t in e?RC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_C=(e,t)=>{for(var r in t||(t={}))UC.call(t,r)&&VC(e,r,t[r]);if(jC)for(var r of jC(t))FC.call(t,r)&&VC(e,r,t[r]);return e},WC=(e,t,r)=>(VC(e,"symbol"!=typeof t?t+"":t,r),r);function BC(e){const{playerType:t,mediaType:r,mediaSubtype:n,durationSeconds:i,minSecondsForPostPlay:s}=e;return r===jw.im&&n!==IC.k&&t===u.k9&&i>=s||e.displayPostplay}const HC={dispatchMakeDecision:cC.gN,dispatchMakeNextDecision:cC.Oi,dispatchRemoveDecision:cC.E8,dispatchRetryDecision:cC.Y1,dispatchUpdatePlayerDuration:bw.Ir,dispatchUpdatePlayerPosition:bw.W9,dispatchUpdatePlayerSeekRange:bw.I$,dispatchUpdatePlayerBuffering:bw.EB,dispatchPause:bw.U$,dispatchPlay:bw.Eb,dispatchUpdatePlayerError:bw._6,dispatchSendTimeline:bw.Ki,dispatchTickPlayer:bw.Yb,dispatchShowPostPlay:oC.GO,dispatchPlayNextItem:oC.Ax,dispatchEndPlayback:Wn.WS,dispatchSetMetricsPlayer:Wn.i,dispatchUpdateMediaDimensions:bw.Ud,dispatchUpdateCanPlayThrough:bw.Mt,dispatchUpdateSessionMetadataItems:aC.a2,dispatchChangeStream:bw.Os};class zC extends i.Component{constructor(e,t){super(e,t),WC(this,"_hasPreFetched"),WC(this,"_hasRefreshedPlayQueue"),WC(this,"_shouldStopOnUnmount"),WC(this,"_previousStream"),WC(this,"_isTryingToRecover"),WC(this,"onDurationMillisecondsChange",(e=>{this.props.dispatchUpdatePlayerDuration({playerType:this.props.playerType,durationMilliseconds:e})})),WC(this,"onPositionMillisecondsChange",(e=>{const{playerType:t,isLiveTV:r,liveTVSessionEntityID:n,dispatchUpdateSessionMetadataItems:i,dispatchUpdatePlayerPosition:s,onPositionMillisecondsChange:a}=this.props,o=Math.floor(e/1e3);a&&a(e),o!==this.props.positionSeconds&&(s({playerType:t,positionSeconds:o}),r&&i({liveTVSessionEntityID:n}))})),WC(this,"onTick",(e=>{const{metadataItemEntityID:t,liveTVSessionEntityID:r,mediaItemID:n,playerType:i,dispatchTickPlayer:s}=this.props;s({metadataItemEntityID:t,liveTVSessionEntityID:r,mediaItemID:n,playerType:i,secondsElapsed:e})})),WC(this,"onBufferingChange",(e=>{this.props.dispatchUpdatePlayerBuffering({playerType:this.props.playerType,isBuffering:e})})),WC(this,"onPause",(()=>{this.props.isAdVisible||this.props.dispatchPause({playerType:this.props.playerType,isApplicationInitiated:!0})})),WC(this,"onPlay",(()=>{this.props.isAdVisible||this.props.dispatchPlay({playerType:this.props.playerType,isApplicationInitiated:!0})})),WC(this,"onStreamChange",(()=>{const{playerType:e,playQueueItemEntityID:t,positionSeconds:r,liveTVPositionSeconds:n,qualityIndex:i,decisionMediaIndex:s,decisionPartIndex:a,dispatchMakeDecision:o,dispatchRemoveDecision:c}=this.props;c({playerType:e,playQueueItemEntityID:t}),o({playerType:e,playQueueItemEntityID:t,mediaIndex:s,partIndex:a,qualityIndex:i,options:{offset:null!=n?1e3*n:1e3*r}})})),WC(this,"onMetricsPlayerChange",(e=>{const{playerType:t,dispatchSetMetricsPlayer:r}=this.props;r({playerType:t,metricsPlayer:e})})),WC(this,"onError",((e={})=>{const{code:t,category:r,message:n}=e,{playerType:i,isDecisionDirectPlay:s,isDecisionDirectStreamVideo:a,isDecisionDirectStreamAudio:o,canTranscodeServerTranscode:c,dispatchUpdatePlayerError:l}=this.props;s&&c?(cu.c.warn("[Player] Direct Play failed, but server can transcode. Attempting to fallback to either Direct Stream or transcode..."),this._itemRestarting(this.props,{allowDirectPlay:!1})):a&&c?(cu.c.warn("[Player] Direct Stream failed, but server can transcode. Attempting to fallback to video transcode..."),this._itemRestarting(this.props,{allowDirectPlay:!1,transcoderOptions:{directStream:0}})):o&&c?(cu.c.warn("[Player] Video transcode failed. Attempting to fallback to video and audio transcode..."),this._itemRestarting(this.props,{allowDirectPlay:!1,transcoderOptions:{directStream:0,directStreamAudio:0}})):(this.onPause(),l({playerType:i,errorCode:t,errorCategory:r,errorMessage:n}))})),WC(this,"onEnd",(()=>{const{playerType:e,playQueueItemEntityID:t,qualityIndex:r,repeatOne:n,repeatAll:i,isLastPlayQueueItem:s,totalCount:a,decisionMediaIndex:o,decisionPartIndex:c,decisionPartCount:l,dispatchMakeDecision:d,dispatchRemoveDecision:u,dispatchShowPostPlay:p,dispatchPlayNextItem:m,dispatchEndPlayback:h}=this.props,y=n||i&&1===a;c+1<l?(u({playerType:e,playQueueItemEntityID:t}),d({playerType:e,playQueueItemEntityID:t,qualityIndex:r,mediaIndex:o,partIndex:c+1,options:{offset:0}})):y?(u({playerType:e,playQueueItemEntityID:t}),d({playerType:e,playQueueItemEntityID:t,qualityIndex:r,mediaIndex:o,partIndex:0,options:{offset:0}})):!s||i?BC(this.props)?p({playerType:e}):m({playerType:e,isApplicationInitiated:!0}):h({playerType:e})})),WC(this,"onIntrinsicDimensions",(({width:e,height:t})=>{const{playerType:r,dispatchUpdateMediaDimensions:n}=this.props;(0,cu.c)(`[Player] Media resized: ${e}x${t} (${e/t})`),n({playerType:r,width:e,height:t})})),WC(this,"onCanPlayThrough",(e=>{const{playerType:t,dispatchUpdateCanPlayThrough:r}=this.props;r({playerType:t,canPlayThrough:e})})),WC(this,"onTryToRecover",((e={})=>{const{playerType:t,dispatchChangeStream:r}=this.props;if(!this._previousStream||this._isTryingToRecover)return this._isTryingToRecover=!1,void this.onError(e);const{id:n,streamType:i}=this._previousStream;r({playerType:t,streamID:n,streamTypeString:dC.c.get(i).typeString}),this._isTryingToRecover=!0})),this._hasRefreshedPlayQueue=!1,this._shouldStopOnUnmount=!1,this._isTryingToRecover=!1}componentDidMount(){this._itemStarting(this.props),this.props.mediaType===jw.Ww&&this._itemProgressing(this.props)}componentDidUpdate(e){const{playQueueItemEntityID:t,mediaItemID:r,playerType:n,mediaType:i,isDecisionPending:s,isPaused:a,isBuffering:o,hasError:c,positionSeconds:l,durationSeconds:d,preFetchSeconds:u,qualityIndex:p,dispatchMakeNextDecision:m,liveTVPositionSeconds:h,isLiveTV:y,audioStream:g,isStreamChangeInProgress:f}=this.props,v=e.mediaItemID,b=y?!(!r||!v||r===v):t!==e.playQueueItemEntityID,S=s!==e.isDecisionPending,P=p!==e.qualityIndex,I=a!==e.isPaused,E=o!==e.isBuffering,w=c!==e.hasError,C=d!==e.durationSeconds,O=(!!e.audioStream&&e.audioStream.id)!==(!!g&&g.id),M=this._isTryingToRecover&&e.isBuffering&&!this.props.isBuffering;if(!P||b||S){if(b)return this._hasRefreshedPlayQueue=!1,this._hasPreFetched=!1,this._itemStopping(e,{removeDecision:!y}),this._itemStarting(this.props),void(i===jw.Ww&&(this._itemProgressing(this.props,{shouldRefreshPlayQueue:!0}),this._hasRefreshedPlayQueue=!0));!this._hasPreFetched&&d>0&&d-l<u&&!BC(this.props)&&(this._hasPreFetched=!0,m({playerType:n})),!S&&(!this._hasRefreshedPlayQueue||I||E||w||C)&&(this._itemProgressing(this.props,{shouldRefreshPlayQueue:!this._hasRefreshedPlayQueue}),this._hasRefreshedPlayQueue=!0),this._isTryingToRecover||!O||f||(this._previousStream=e.audioStream),M&&(this._isTryingToRecover=!1)}else{const e=null!=h?1e3*h:1e3*l;this._itemRestarting(this.props,{offset:e})}}componentWillUnmount(){!this.props.shouldSuppressStopOnUnmount&&this._shouldStopOnUnmount&&this._itemStopping(this.props,{continuing:!1}),this.props.onPositionMillisecondsChange&&this.props.onPositionMillisecondsChange(0)}_itemStarting(e){const{mediaType:t,playerType:r,playQueueItemEntityID:n,qualityIndex:i}=e;t!==jw.Ww&&e.dispatchMakeDecision({playerType:r,playQueueItemEntityID:n,qualityIndex:i})}_itemRestarting(e,t={}){const{mediaType:r,playerType:n}=e;r!==jw.Ww&&e.dispatchRetryDecision({playerType:n,decisionOptions:t})}_itemProgressing(e,{shouldRefreshPlayQueue:t=!1}={}){const{playerType:r,mediaType:n,serverEntityID:i,providerEntityID:s,playQueueItemEntityID:a,metadataItemEntityID:o,mediaItemID:c,playbackTime:l,positionSeconds:d,durationSeconds:u,isPaused:p,decisionMediaIndex:m,decisionPartIndex:h,decisionPartCount:y,dispatchSendTimeline:g,liveTVSessionEntityID:f}=e,v=n===jw.Ww,b=p&&!v?SC.YT:SC.U$;g({playerType:r,serverEntityID:i,providerEntityID:s,playQueueItemEntityID:a,metadataItemEntityID:o,liveTVSessionEntityID:f,mediaItemID:c,shouldRefreshPlayQueue:t,options:v?{state:b}:{playbackSessionID:e.playbackSessionID,playbackTime:l,positionSeconds:d,durationSeconds:u,mediaIndex:m,partIndex:h,partCount:y}}),this._shouldStopOnUnmount=!0}_itemStopping(e,{continuing:t=!0,removeDecision:r=!0}={}){e.dispatchSendTimeline({playerType:e.playerType,providerEntityID:e.providerEntityID,playQueueItemEntityID:e.playQueueItemEntityID,metadataItemEntityID:e.metadataItemEntityID,liveTVSessionEntityID:e.liveTVSessionEntityID,mediaItemID:e.mediaItemID,options:{state:SC.SG,continuing:t,playbackSessionID:e.playbackSessionID,playbackTime:e.playbackTime,positionSeconds:e.positionSeconds,durationSeconds:e.durationSeconds,mediaIndex:e.decisionMediaIndex,partIndex:e.decisionPartIndex,partCount:e.decisionPartCount}}),r&&e.mediaType!==jw.Ww&&e.dispatchRemoveDecision({playerType:e.playerType,playQueueItemEntityID:e.playQueueItemEntityID}),this._shouldStopOnUnmount=!1}render(){const e=this.props,{preFetchSeconds:t,minSecondsForPostPlay:r,repeatOne:n,repeatAll:s,totalCount:a,isLastPlayQueueItem:c,isAdVisible:l,shouldSuppressStopOnUnmount:d,canTranscodeServerTranscode:u,qualityIndex:p,decisionMediaIndex:m,decisionPartIndex:h,decisionPartCount:y,dispatchMakeDecision:g,dispatchRemoveDecision:f,dispatchUpdatePlayerDuration:v,dispatchUpdatePlayerPosition:b,dispatchUpdatePlayerSeekRange:S,dispatchUpdatePlayerBuffering:P,dispatchPause:I,dispatchUpdatePlayerError:E,dispatchTickPlayer:w,dispatchShowPostPlay:C,dispatchPlayNextItem:O,dispatchEndPlayback:M,dispatchSetMetricsPlayer:T,dispatchUpdateMediaDimensions:D,dispatchUpdateCanPlayThrough:k}=e,x=((e,t)=>{var r={};for(var n in e)UC.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&jC)for(var n of jC(e))t.indexOf(n)<0&&FC.call(e,n)&&(r[n]=e[n]);return r})(e,["preFetchSeconds","minSecondsForPostPlay","repeatOne","repeatAll","totalCount","isLastPlayQueueItem","isAdVisible","shouldSuppressStopOnUnmount","canTranscodeServerTranscode","qualityIndex","decisionMediaIndex","decisionPartIndex","decisionPartCount","dispatchMakeDecision","dispatchRemoveDecision","dispatchUpdatePlayerDuration","dispatchUpdatePlayerPosition","dispatchUpdatePlayerSeekRange","dispatchUpdatePlayerBuffering","dispatchPause","dispatchUpdatePlayerError","dispatchTickPlayer","dispatchShowPostPlay","dispatchPlayNextItem","dispatchEndPlayback","dispatchSetMetricsPlayer","dispatchUpdateMediaDimensions","dispatchUpdateCanPlayThrough"]);return l&&!o.c.allowAdsOverMedia?null:i.createElement(AC,(A=_C({},x),R={isAdVisible:l,onBufferingChange:this.onBufferingChange,onCanPlayThrough:this.onCanPlayThrough,onDurationMillisecondsChange:this.onDurationMillisecondsChange,onEnd:this.onEnd,onError:this.onError,onIntrinsicDimensions:this.onIntrinsicDimensions,onMetricsPlayerChange:this.onMetricsPlayerChange,onPause:this.onPause,onPlay:this.onPlay,onPositionMillisecondsChange:this.onPositionMillisecondsChange,onStreamChange:this.onStreamChange,onTick:this.onTick,onTryToRecover:this.onTryToRecover},NC(A,LC(R))));var A,R}}WC(zC,"defaultProps",{preFetchSeconds:10,minSecondsForPostPlay:300,shouldSuppressStopOnUnmount:!1});const GC=(0,s.Ul)((function(){return(0,At.M3)(function(e=0){return(0,At.M3)((0,Sw.c)(e),mo.c,ss.c,((e,t,r)=>{if(!e||!e.metadataItem)return;const n=t[e.metadataItem];return n&&r[n.providerEntityID]}))}(),(0,Nw.c)(),Pw(),fC(),(0,Sw.c)(),(0,Sw.c)(1),yC(),Rw(),mC(),(0,lC.c)(),(0,At.M3)((0,_n.WI)("selectRemoteQuality"),(e=>{let t=gC.c.getQualityByIndex(e).bitrate;return null==t&&(t=2e5),1e3*t})),((e,t,r,n,i,s,a,c,l,d,u)=>{const p=t.playQueue,m=p.playQueueSelectedItemOffset,h=i.entityID,y=!s||m+1===p.length,g={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,mediaItemID:null==c?void 0:c.id,metadataItemEntityID:null==a?void 0:a.entityID,playQueueItemEntityID:h,liveTVSessionEntityID:null==d?void 0:d.entityID,isDecisionPending:!r,isPaused:t.isPaused,isBuffering:t.isBuffering,hasError:t.hasError,repeatOne:t.repeatOne,repeatAll:t.repeatAll,totalCount:p.length,isLastPlayQueueItem:y,displayPostplay:i.displayPostPlay,playbackTime:t.itemPlaybackTime,positionSeconds:t.positionSeconds,durationSeconds:t.durationSeconds,playbackSessionID:t.playbackSessionID,lastSeekPositionSeconds:t.lastSeekPositionSeconds,videoStreams:l.videoStreams,videoStream:l.selectedVideoStream,audioStreams:l.audioStreams,audioStream:l.selectedAudioStream,subtitlesStreams:l.subtitlesStreams,subtitleStream:l.selectedSubtitlesStream,isStreamChangeInProgress:null==a?void 0:a.isStreamChangeInProgress,bufferingDetectionLimit:o.c.bufferingDetectionLimit};if(d){const e=t.confirmLocalToRemote===vC.qK;Object.assign(g,function(e){if(!e)return{};const t=e.captureBuffer,r={liveTVSessionSubscriptionKey:e.key,liveTVSessionChannelIdentifier:e.channelIdentifier,liveTVSessionCurrentPosition:e.currentPosition,liveTVSessionStartedAt:e.startedAt};if(t){const n=t.startedAt,i=e.startedAt,s=n||i;Object.assign(r,{liveTVPositionSeconds:e.currentPosition-s,liveTVSessionSeekRangeStartedAt:t.startedAt,liveTVSessionSeekStartSeconds:t.seekStartSeconds,liveTVSessionSeekEndSeconds:t.seekEndSeconds})}return r}(d),{shouldSuppressStopOnUnmount:e,isLiveTV:!0})}return r&&(g.decisionMediaIndex=r.mediaIndex,g.decisionPartIndex=r.partIndex,g.decisionPartCount=r.partCount,g.decisionUrl=r.url,g.decisionProtocol=r.protocol,g.decisionError=r.error,g.isCloud=n.isCloud,g.isDecisionDirectPlay=r.isDirectPlay,g.isDecisionDirectStreamVideo=r.canDirectStreamVideo,g.isDecisionDirectStreamAudio=r.canDirectStreamAudio,g.canTranscodeServerTranscode=!n.isCloud&&(0,PC.c)(n.version,sC.default.decisionEndpoint),r.playbackSessionID&&(g.playbackSessionID=r.playbackSessionID),g.hasBurnedSubtitles=l.selectedSubtitlesStream&&l.selectedSubtitlesStream.id!==bC.K&&!r.subtitlesUrl,g.decisionDrm=r.drm,g.decisionLicense=r.license,g.decisionCertificate=r.certificate),!g.isDecisionDirectPlay||"dash"!==g.decisionProtocol&&"hls"!==g.decisionProtocol||(g.bufferingGoal=10,g.defaultBandwidthEstimate=u),e&&(g.isLibraryProvider=e.isLibraryProvider,g.hasStreamProtocol=e.protocols.includes("stream")),g}))}),HC,(function(e,t,r){const n=t;return _C(_C(_C({},r),e),n)}))(zC),qC=(0,s.Ul)((function(){return(0,At.M3)((0,iI.c)("qualityIndex"),tp.c,nC.c,rC(),(0,At.M3)(((e,{mediaType:t})=>t),(0,iI.c)("openState"),((e,t)=>e===jw.im&&t===iC.m)),((e,t,r,n,i)=>({qualityIndex:e,subtitleSize:t.subtitleSize,volume:r,playbackSpeed:n,shouldCoverWhenDecisionPending:i})))}))(GC);var KC=Object.defineProperty,QC=Object.defineProperties,$C=Object.getOwnPropertyDescriptors,YC=Object.getOwnPropertySymbols,XC=Object.prototype.hasOwnProperty,JC=Object.prototype.propertyIsEnumerable,ZC=(e,t,r)=>t in e?KC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const eO=tC((function(e){return i.createElement(qC,(t=((e,t)=>{for(var r in t||(t={}))XC.call(t,r)&&ZC(e,r,t[r]);if(YC)for(var r of YC(t))JC.call(t,r)&&ZC(e,r,t[r]);return e})({},e),QC(t,$C({allowRecycleElement:!0,type:"audio"}))));var t}));function tO(){return(0,At.M3)((0,lC.c)(),(e=>e&&e.currentPosition))}var rO=r(15508),nO=r(61412),iO=r(30336);const sO="direct",aO="copy",oO="transcode";var cO=r(72500),lO=r(41192),dO=r(34800),uO=r(94336),pO=Object.defineProperty,mO=Object.defineProperties,hO=Object.getOwnPropertyDescriptors,yO=Object.getOwnPropertySymbols,gO=Object.prototype.hasOwnProperty,fO=Object.prototype.propertyIsEnumerable,vO=(e,t,r)=>t in e?pO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bO=(e,t)=>{for(var r in t||(t={}))gO.call(t,r)&&vO(e,r,t[r]);if(yO)for(var r of yO(t))fO.call(t,r)&&vO(e,r,t[r]);return e},SO=(e,t)=>mO(e,hO(t)),PO=(e,t,r)=>(vO(e,"symbol"!=typeof t?t+"":t,r),r);const IO="unknown",EO={dispatchSetPlayerItemPlaybackTime:bw.aC,dispatchSetPlayerSessionPlaybackTime:bw.kj};class wO extends i.Component{constructor(e,t){super(e,t),PO(this,"_tickTimeout"),PO(this,"hasEnded"),PO(this,"hasError"),PO(this,"hasStopped"),PO(this,"itemDecision"),PO(this,"itemID"),PO(this,"itemMetricsProperties"),PO(this,"itemPlaybackMilliseconds"),PO(this,"itemPlaybackTimestamp"),PO(this,"sessionAdPlaybackStartTime"),PO(this,"sessionPlaybackCount"),PO(this,"sessionPlaybackMilliseconds"),PO(this,"onTickTimeout",(()=>{this.flushPlaybackTimes(),this.setTickTimeout(this.props)})),this.itemID=null,this.itemDecision=null,this.itemMetricsProperties=null,this.itemPlaybackTimestamp=null,this.itemPlaybackMilliseconds=0,this.sessionPlaybackMilliseconds=0,this.sessionPlaybackCount=0,this.sessionAdPlaybackStartTime=0,this.hasError=!1,this.hasEnded=!1,this.hasStopped=!1,this._tickTimeout=null}componentDidMount(){this.update()}componentDidUpdate(e){this.update(e)}componentWillUnmount(){this.hasStopped=!0,this.trackItemEnd(),this.trackSessionEnd(),this.clearTickTimeout()}clearTickTimeout(){this._tickTimeout&&(this._tickTimeout=window.clearTimeout(this._tickTimeout))}setTickTimeout(e){e.isPlaying&&(this.clearTickTimeout(),this.itemPlaybackTimestamp=Date.now(),this._tickTimeout=window.setTimeout(this.onTickTimeout,1e3))}update(e={}){const{itemID:t,decision:r,isRemotePlayer:n,isAdVisible:i,isPlaying:s,hasError:a,metricsType:o,metricsPlayer:c}=this.props,{isPlaying:l}=e;if(s&&!l?this.setTickTimeout(this.props):!s&&l&&this.clearTickTimeout(),n)return void(e.isRemotePlayer||(this.trackItemEnd(),this.trackSessionEnd()));!this.hasError&&a&&(this.hasError=!0,this.trackFailure()),this.itemID&&(this.itemID===t?this.updateCurrentItem():this.trackItemEnd());const d=!this.itemID&&!this.hasError&&t&&c&&(r||o===Uw.Ww);d&&i&&!s&&!this.sessionAdPlaybackStartTime&&(this.sessionAdPlaybackStartTime=Date.now()),d&&s&&this.trackItemStart()}updateCurrentItem(){const{decision:e,isPlaying:t,hasEnded:r}=this.props;if(t?(this.itemPlaybackTimestamp||(this.itemPlaybackTimestamp=Date.now()),this.hasEnded=r):this.flushPlaybackTimes(),this.itemDecision&&e&&this.itemDecision!==e){let t;if(this.itemDecision.qualityIndex!==e.qualityIndex?t="quality":this.itemDecision.partIndex===e.partIndex&&(t="streams"),t){const e=this.itemMetricsProperties.offset;this.trackItemRestart(t),this.itemMetricsProperties.offset=e}}}getItemMetricsProperties(){const e={serverType:this.props.metricsServerType,connectionType:this.props.metricsConnectionType,type:this.props.metricsType,identifier:this.props.metricsIdentifier,page:this.props.metricsPage,contextTuple:this.props.metricsContextTuple,setting:this.props.metricsSetting,auto:this.props.metricsAutoPlay,protocol:this.props.metricsProtocol,offset:this.props.metricsOffset,container:this.props.metricsContainer,duration:this.props.metricsDuration,bitrate:this.props.metricsBitrate,origin:this.props.metricsOrigin,audioCodec:this.props.metricsAudioCodec,audioDecision:this.props.metricsAudioDecision,videoCodec:this.props.metricsVideoCodec,videoDecision:this.props.metricsVideoDecision,subtitleFormat:this.props.metricsSubtitleFormat,subtitleDecision:this.props.metricsSubtitleDecision,player:this.props.metricsPlayer,mode:this.props.metricsMode};return this.props.isLiveTV&&this.props.isCloudServer&&(e.guid=this.props.metricsGUID,e.group=this.props.metricsGroup,e.title=this.props.metricsTitle,e.publishedAt=this.props.metricsPublishedAt,e.containedId=this.props.metricsContainerID),this.props.metricsSource&&(e.source=this.props.metricsSource),this.props.metricsRentalPrice&&(e.rentalPrice=this.props.metricsRentalPrice),e}flushPlaybackTimes(){if(!this.itemPlaybackTimestamp)return;const e=Date.now()-this.itemPlaybackTimestamp;this.itemPlaybackTimestamp=null,this.itemPlaybackMilliseconds+=e,this.sessionPlaybackMilliseconds+=e,this.setPlayerItemPlaybackTime(),this.setPlayerSessionPlaybackTime(),(0,_n.WI)("metrics").addPlaybackTime(e)}trackItemStart(){this.itemID=this.props.itemID,this.itemDecision=this.props.decision,this.itemMetricsProperties=this.getItemMetricsProperties(),this.itemPlaybackTimestamp=Date.now(),this.itemPlaybackMilliseconds=0,this.sessionPlaybackCount+=1,this.hasEnded=this.props.hasEnded,this.hasError=this.props.hasError;const e=this.props.playbackStartTime,t=bO({},this.itemMetricsProperties);if(e>0&&1===this.sessionPlaybackCount){const r=this.sessionAdPlaybackStartTime||Date.now();t.latency=r-e}this.props.syncplaySessionRoomID&&(t.format="watch-together",t.playbackSessionId=this.props.syncplaySessionRoomID),(0,_n.WI)("metrics").trackEvent({event:Mh._e,interaction:!0,properties:t}),(0,_n.WI)("metrics").incrementPlaybackCount(),this.setTickTimeout(this.props)}trackItemRestart(e){this.itemDecision=this.props.decision,this.itemMetricsProperties=this.getItemMetricsProperties(),(0,_n.WI)("metrics").trackEvent({event:Mh.A5,interaction:!0,properties:SO(bO({},this.itemMetricsProperties),{reason:e})})}trackItemEnd(){if(!this.itemID)return;let e;this.flushPlaybackTimes(),this.clearTickTimeout(),e=this.props.isRemotePlayer?"cast":this.hasError?"failed":this.hasEnded?"completed":this.hasStopped?"stopped":"skipped";const t=SO(bO({},this.itemMetricsProperties),{playbackTime:(0,uO.c)(this.itemPlaybackMilliseconds),status:e});this.props.syncplaySessionRoomID&&(t.format="watch-together",t.playbackSessionId=this.props.syncplaySessionRoomID),(0,_n.WI)("metrics").trackEvent({event:Mh.SA,interaction:!0,properties:t}),this.itemID=null,this.itemDecision=null,this.itemMetricsProperties=null,this.itemPlaybackTimestamp=null,this.itemPlaybackMilliseconds=0,this.hasError=!1,this.hasEnded=!1}trackSessionEnd(){this.sessionPlaybackCount&&(this.flushPlaybackTimes(),(0,_n.WI)("metrics").trackEvent({event:Mh.Uz,interaction:!0,properties:{serverType:this.props.metricsServerType,connectionType:this.props.metricsConnectionType,type:this.props.metricsType,playbackCount:this.sessionPlaybackCount,playbackTime:(0,uO.c)(this.sessionPlaybackMilliseconds)}}),this.sessionPlaybackMilliseconds=0,this.sessionPlaybackCount=0,this.sessionAdPlaybackStartTime=0)}trackFailure(){(0,_n.WI)("metrics").trackEvent({event:Mh.aY,interaction:!0,properties:{serverType:this.props.metricsServerType,connectionType:this.props.metricsConnectionType,container:this.props.metricsContainer,type:this.props.metricsType,error:this.props.errorCode,mode:this.props.metricsMode}})}setPlayerItemPlaybackTime(){this.props.dispatchSetPlayerItemPlaybackTime({playbackTime:this.itemPlaybackMilliseconds,playerType:this.props.playerType})}setPlayerSessionPlaybackTime(){this.props.dispatchSetPlayerSessionPlaybackTime({playbackTime:this.sessionPlaybackMilliseconds,playerType:this.props.playerType})}render(){return null}}PO(wO,"defaultProps",{metricsPage:l.KW});const CO=(0,s.Ul)((function(){return(0,At.M3)(Aw,sI(),Mw(),yC(),Rw(),Pw(),(0,Sw.c)(),(0,At.M3)(((e,{isAdVisible:t})=>t),(0,rO.c)(["confirmRemoteToLocal","isPostPlayVisible","isMediaLoading","isBuffering","isPaused","hasError"]),yC(),Pw(),((e,t,r,n)=>!(!r||r.type!==Uw.Ww)||!(!n||e||t.confirmRemoteToLocal||t.isPostPlayVisible||t.isMediaLoading||t.isBuffering||t.isPaused||t.hasError))),(0,At.M3)(tO(),(0,iI.c)("positionSeconds"),yC(),Rw(),Pw(),((e,t,r,n,i)=>{if(e){if(!n)return!1;const{beginsAt:t,endsAt:r}=n;return e>r-.9*(r-t)}if(r&&r.type===Uw.Ww)return!0;if(i){const e=n&&n.Part[i.partIndex];if(n&&n.duration&&e)return(0,iO.c)(n,e,1e3*t)>.9*n.duration}return!1})),(0,iI.c)("syncplaySessionRoomID"),(0,iI.c)("hasError"),(0,iI.c)("errorCode"),(0,iI.c)("metricsPage"),(0,iI.c)("metricsContextTuple"),(0,iI.c)("metricsAutoPlay"),(0,iI.c)("metricsPlayer"),(0,iI.c)("metricsSetting"),(0,iI.c)("playbackStartTime"),((e,t,r,n,i,s,a,o,c,l,d,u,p,m,h,y,g,f)=>{const v={decision:s,isPlaying:o,isLiveTV:e,hasEnded:c,hasError:d,errorCode:u,metricsPage:p,metricsContextTuple:m,metricsAutoPlay:h,metricsPlayer:y,metricsSetting:g,playbackStartTime:f,syncplaySessionRoomID:l};if(r&&(v.isCloudServer=r.isCloud,v.metricsServerType=(0,lO.c)(r),v.metricsConnectionType=(0,cO.c)(r.activeConnection)),n){if(v.metricsType=n.type,v.metricsIdentifier=n.identifier,(null==t?void 0:t.identifier)===Oe.Sg){const{rentalPrice:e}=n;v.metricsSource=e?"tvod":"avod",e&&(v.metricsRentalPrice=e)}e&&i&&(v.metricsGUID=n.ratingKey,v.metricsTitle=n.type===Uw.EPISODE?n.grandparentTitle:n.title,v.metricsPublishedAt=i.beginsAt,v.metricsContainerID=i.channelIdentifier,v.metricsGroup=i.channelShortTitle),n.type===Uw.Ww&&(v.metricsPlayer=nO.ai,n.Media.length&&(v.metricsContainer=n.Media[0].container))}if(v.itemID=e?null==i?void 0:i.id:null==a?void 0:a.playQueueItemID,t&&!v.metricsIdentifier&&(v.metricsIdentifier=t.identifier),s){const e=function(e){const t={};return e.isDirectPlay?(t.videoDecision=sO,t.audioDecision=sO,t.subtitleDecision=sO):(t.videoDecision=e.canDirectStreamVideo?aO:oO,t.audioDecision=e.canDirectStreamAudio?aO:oO,t.subtitleDecision=e.useSoftSubtitles?aO:oO),t}(s),t=i&&i.Part[s.partIndex];let r;n&&(r=Uw.GG(n.type).mediaType);const a=dC.c.get("video").id,o=t&&Qy().findWhere(t.Stream,{streamType:a}),c=dC.c.get("audio").id,l=t&&Qy().findWhere(t.Stream,{streamType:c,selected:!0}),d=dC.c.get("subtitles").id,u=t&&Qy().findWhere(t.Stream,{streamType:d,selected:!0});v.metricsProtocol=s.protocol,v.metricsOffset=s.positionSeconds,s.drm&&(v.metricsMode=s.drm),i&&(v.metricsContainer=i.container,v.metricsDuration=(0,uO.c)(i.duration||n.duration),v.metricsBitrate=function(e){if(null==e)return;let t;return t=e>=10240?512:e>=1024?256:e>=512?128:e>=256?64:32,(0,dO.c)(e,t)}(i.bitrate),v.metricsOrigin=i.origin),r===jw.im&&(v.metricsVideoCodec=o&&o.codec||IO,v.metricsVideoDecision=e.videoDecision,u&&u.id!==bC.K&&(v.metricsSubtitleFormat=u&&u.codec||IO,v.metricsSubtitleDecision=e.subtitleDecision)),r!==jw.im&&r!==jw.KI||(v.metricsAudioCodec=l&&l.codec||IO,v.metricsAudioDecision=e.audioDecision)}return v}))}),EO)(wO);var OO=Object.defineProperty;class MO extends i.Component{constructor(e,t){super(e,t),((e,t,r)=>{((e,t,r)=>{t in e?OO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"_screenSaverManager"),this._screenSaverManager=(0,_n.AN)("screenSaverManager")?(0,_n.WI)("screenSaverManager"):null}componentDidMount(){this._toggleScreenSaver(this.props.isEnabled)}componentDidUpdate(e){e.isEnabled!==this.props.isEnabled&&this._toggleScreenSaver(this.props.isEnabled)}componentWillUnmount(){this._toggleScreenSaver(!0)}_toggleScreenSaver(e){this._screenSaverManager&&this._screenSaverManager.toggle(e)}render(){return null}}const TO=(0,s.Ul)((function(){return(0,At.M3)((0,rO.c)(["isOpen","isPaused","openState"]),(({isOpen:e,isPaused:t,openState:r})=>{const n=r===iC.m;return{isEnabled:!e||!n||t}}))}))(MO);var DO=Object.defineProperty,kO=(e,t,r)=>(((e,t,r)=>{t in e?DO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class xO extends i.Component{constructor(){super(...arguments),kO(this,"timeoutID"),kO(this,"onResize",(e=>{this.timeoutID=window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(this.onResizeTimeout,this.props.resizeDelay)})),kO(this,"onResizeTimeout",(()=>{this.props.onScreenSizeChange({width:window.innerWidth,height:window.innerHeight})}))}componentDidMount(){window.addEventListener("resize",this.onResize),this.onResizeTimeout()}componentWillUnmount(){window.removeEventListener("resize",this.onResize),this.timeoutID=window.clearTimeout(this.timeoutID)}render(){return null}}kO(xO,"propTypes",{resizeDelay:vw().number,onScreenSizeChange:vw().func.isRequired}),kO(xO,"defaultProps",{resizeDelay:100});const AO=xO;var RO=r(43684);function NO(){return(0,At.M3)(tO(),(0,At.M3)((0,lC.c)(),mo.c,((e,t)=>e&&(e.timeline||e.grabOperation)?e.timeline?e.timeline.map((e=>t[e])):[t[e.grabOperation.metadataItem]]:[])),((e,t)=>{if(null!=e)for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.Media.length;t++){const r=n.Media[t],{beginsAt:i,endsAt:s}=r;if(i<=e&&s>e)return n}}}))}var LO=r(62884),jO=r(70460),UO=r(16712),FO=Object.defineProperty,VO=(e,t,r)=>(((e,t,r)=>{t in e?FO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function _O(e,t){const r=Math.max(e,t),n=Date.now()-1e3*r;return(0,LO.c)(n)}class WO extends i.Component{constructor(e,t){super(e,t),VO(this,"_updateTimeAgoTimeout"),VO(this,"updateTimeAgo",(()=>{const{captureBufferStartedAt:e,mediaItemBeginsAt:t}=this.props,r=6e4-1e3*(new Date).getSeconds(),n=_O(e,t);n!==this.state.timeAgo&&this.setState({timeAgo:n}),this._updateTimeAgoTimeout=window.setTimeout(this.updateTimeAgo,r)})),VO(this,"onConfirm",(e=>{const{serverEntityID:t,providerEntityID:r,onConfirm:n}=this.props;n({serverEntityID:t,providerEntityID:r,offset:e})})),this._updateTimeAgoTimeout=null,this.state={timeAgo:_O(e.captureBufferStartedAt,e.mediaItemBeginsAt)}}componentDidMount(){this.props.mediaItemBeginsAt||this.onConfirm(),this.updateTimeAgo()}componentWillUnmount(){this._updateTimeAgoTimeout&&window.clearTimeout(this._updateTimeAgoTimeout)}render(){const{isOpen:e,captureBufferStartedAt:t,mediaItemBeginsAt:r,onModalClose:n}=this.props,{timeAgo:s}=this.state;return t?i.createElement(jO.c,{isOpen:e,metricsPage:l.W8,title:(0,g.c)("Join Session in Progress"),onCancel:n,onItemSelect:this.onConfirm},i.createElement(UO.c,{value:1e3*Math.max(r-t,0)},(0,g.c)("Watch from start (started {timeAgo} ago)",{timeAgo:s})),i.createElement(UO.c,{value:null},(0,g.c)("Watch Live"))):null}}const BO=WO;var HO=Object.defineProperty,zO=Object.defineProperties,GO=Object.getOwnPropertyDescriptors,qO=Object.getOwnPropertySymbols,KO=Object.prototype.hasOwnProperty,QO=Object.prototype.propertyIsEnumerable,$O=(e,t,r)=>t in e?HO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const YO=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,lC.c)(),(0,At.M3)(tO(),NO(),(0,lC.c)(),((e,t,r)=>{if(null!=e&&t&&r)return t.Media.find((t=>{const{beginsAt:n,endsAt:i,channelIdentifier:s}=t;return n<=e&&i>e&&r.channelIdentifier===s}))})),((e,t,r)=>{const{serverEntityID:n,providerEntityID:i}=e,s={serverEntityID:n,providerEntityID:i};if(t&&t.captureBuffer){const e=t.captureBuffer.startedAt;s.captureBufferStartedAt=e}return r?s.mediaItemBeginsAt=r.beginsAt:t&&t.grabOperation&&(s.mediaItemBeginsAt=t.grabOperation.mediaItem.beginsAt),s}))}),(function(e,{playerType:t}){return{onConfirm(r){var n;e((0,aC.ae)((n=((e,t)=>{for(var r in t||(t={}))KO.call(t,r)&&$O(e,r,t[r]);if(qO)for(var r of qO(t))QO.call(t,r)&&$O(e,r,t[r]);return e})({},r),zO(n,GO({playerType:t})))))},onModalClose(){e((0,aC.gz)({playerType:t}))}}}))(BO),XO=(0,At.M3)(XP.c,(e=>e?e.friendlyName:null));var JO=r(63300);const ZO=function(e){const{isOpen:t,playerName:r,onConfirm:n,onCancel:s}=e;return i.createElement(JO.c,{cancelLabel:(0,g.c)("No"),confirmLabel:(0,g.c)("Yes"),isOpen:t,message:(0,g.c)("Would you like to continue playback on {playerName}?",{playerName:r}),metricsPage:l.SC,title:(0,g.c)("Continue Playback"),onCancel:s,onConfirm:n})};var eM=Object.defineProperty,tM=Object.defineProperties,rM=Object.getOwnPropertyDescriptors,nM=Object.getOwnPropertySymbols,iM=Object.prototype.hasOwnProperty,sM=Object.prototype.propertyIsEnumerable,aM=(e,t,r)=>t in e?eM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const oM={dispatchCancelLocalToRemote:ZP.pD,dispatchConfirmLocalToRemote:ZP.YT,dispatchCloseLocalToRemote:ZP.AB},cM=(0,s.Ul)((function(){return(0,At.M3)(XO,(0,iI.c)("confirmLocalToRemote"),((e,t)=>({playerName:e,confirmLocalToRemote:t})))}),oM)((function(e){const t=e,{playerType:r,confirmLocalToRemote:n,dispatchCancelLocalToRemote:s,dispatchCloseLocalToRemote:a,dispatchConfirmLocalToRemote:o}=t,c=((e,t)=>{var r={};for(var n in e)iM.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&nM)for(var n of nM(e))t.indexOf(n)<0&&sM.call(e,n)&&(r[n]=e[n]);return r})(t,["playerType","confirmLocalToRemote","dispatchCancelLocalToRemote","dispatchCloseLocalToRemote","dispatchConfirmLocalToRemote"]);(0,i.useEffect)((()=>{n===vC.qK&&a({playerType:r})}),[n,r,a]);const l=(0,i.useCallback)((()=>{s({playerType:r})}),[r,s]),d=(0,i.useCallback)((()=>{o({playerType:r})}),[r,o]);return i.createElement(ZO,(u=((e,t)=>{for(var r in t||(t={}))iM.call(t,r)&&aM(e,r,t[r]);if(nM)for(var r of nM(t))sM.call(t,r)&&aM(e,r,t[r]);return e})({},c),tM(u,rM({onCancel:l,onConfirm:d}))));var u}));var lM=r(46308),dM=r(20188),uM=r(17068);var pM=Object.defineProperty,mM=Object.defineProperties,hM=Object.getOwnPropertyDescriptors,yM=Object.getOwnPropertySymbols,gM=Object.prototype.hasOwnProperty,fM=Object.prototype.propertyIsEnumerable,vM=(e,t,r)=>t in e?pM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const bM=(0,s.Ul)((function(){return(0,At.M3)(((e,{confirmOffsetPayload:t})=>t),mo.c,((e,t)=>{let r;return e&&(r=t[e.metadataItemEntityID]),r?{viewOffset:r.viewOffset,duration:r.duration}:{}}))}),(function(e,{playerType:t,confirmOffsetPayload:r}){return{onConfirm(t){var n;e(Wn.wb((n=((e,t)=>{for(var r in t||(t={}))gM.call(t,r)&&vM(e,r,t[r]);if(yM)for(var r of yM(t))fM.call(t,r)&&vM(e,r,t[r]);return e})({},r),mM(n,hM({confirmPlayback:!0,confirmOffset:!0,startOffsetMilliseconds:t})))))},onCancel(){e(Wn._U({playerType:t}))}}}))((function(e){const{isOpen:t,viewOffset:r,duration:n,onConfirm:s,onCancel:a}=e,o=(n-r)/1e3,c=o>0;return i.createElement(jO.c,{isOpen:t,metricsPage:l.Uv,title:(0,g.c)("Resume Playback"),onCancel:a,onItemSelect:s},i.createElement(UO.c,{autoFocus:!0,value:r},i.createElement(i.Fragment,null,(0,g.c)("Resume from {time}",{time:(0,dM.c)(r)}),c?i.createElement(uM.c,null):null,c?(0,lM.c)(o):null)),i.createElement(UO.c,{value:0},(0,g.c)("Start from the beginning")))}));var SM=Object.defineProperty,PM=Object.defineProperties,IM=Object.getOwnPropertyDescriptors,EM=Object.getOwnPropertySymbols,wM=Object.prototype.hasOwnProperty,CM=Object.prototype.propertyIsEnumerable,OM=(e,t,r)=>t in e?SM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const MM=(0,s.Ul)(null,(function(e,{playerType:t,confirmPlaybackPayload:r}){return{onConfirm(){var t;e(Wn.wb((t=((e,t)=>{for(var r in t||(t={}))wM.call(t,r)&&OM(e,r,t[r]);if(EM)for(var r of EM(t))CM.call(t,r)&&OM(e,r,t[r]);return e})({},r),PM(t,IM({confirmPlayback:!0})))))},onCancel(){e(Wn.OU({playerType:t}))}}}))((function(e){const{isOpen:t,onConfirm:r,onCancel:n}=e;return i.createElement(JO.c,{confirmLabel:(0,g.c)("Play"),isOpen:t,message:(0,g.c)("This will clear changes made to the queue and play the selection instead."),metricsPage:l.IL,title:(0,g.c)("Play Now"),onCancel:n,onConfirm:r})}));var TM=r(80896),DM=r(54844),kM=r(17268);const xM=vw().shape({metricsContext:vw().oneOf(Object.values(c)).isRequired,type:vw().oneOf(Object.values(kM)).isRequired});var AM=r(68064),RM=r(90064),NM=r(23384);function LM(e){const{isOpen:t,metricsPage:r,onDismiss:n,upsellPayload:s,subscribeUrl:a,onSubscribe:o}=e,c=(0,i.useCallback)((()=>{n(),o&&o()}),[n,o]);return i.createElement(MI.c,{isOpen:t,metricsPage:r,size:Pp.wH,onModalClose:n},i.createElement(TI.c,{onModalClose:n},s.type===kM.TONE_MAPPING?i.createElement(OI.c,null,(0,g.c)("HDR Conversion")):null,s.type===kM.TONE_MAPPING?i.createElement(CI.c,null,i.createElement("p",null,(0,g.c)("This video needs to be converted for playback and contains High Dynamic Range (HDR) content. Colors will appear distorted on this device.")),i.createElement("p",null,(0,g.c)('With a Plex Pass, you can preview the new "HDR tone mapping" feature to correct colors during conversion!'))):null,i.createElement(RM.c,null,i.createElement(NM.c,null,i.createElement(AM.c,{action:Ee.Ke,context:s.metricsContext},i.createElement(sw.c,{onPress:n},(0,g.c)("OK"))),i.createElement(AM.c,{action:Ee.Tx,context:s.metricsContext},i.createElement(sw.c,{"data-autofocus":!0,kind:Sg.ac,target:"_blank",to:a,onPress:c},(0,g.c)("Get a Plex Pass")))))))}LM.defaultProps={metricsPage:l.aO,subscribeUrl:(0,GE.ci)("/plex-pass")};const jM=LM;var UM=Object.defineProperty,FM=Object.defineProperties,VM=Object.getOwnPropertyDescriptors,_M=Object.getOwnPropertySymbols,WM=Object.prototype.hasOwnProperty,BM=Object.prototype.propertyIsEnumerable,HM=(e,t,r)=>t in e?UM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const zM=(0,s.Ul)(null,(function(e,t){const{upsellPayload:r,onDismiss:n}=t;return{onDismiss(){const i=(0,DM.c)(TM.c.Upsell,r.type);e((0,np.Kc)({id:i})),n&&n(t)}}}))(jM);var GM;zM.propTypes=(GM=((e,t)=>{for(var r in t||(t={}))WM.call(t,r)&&HM(e,r,t[r]);if(_M)for(var r of _M(t))BM.call(t,r)&&HM(e,r,t[r]);return e})({},zM.propTypes),FM(GM,VM({upsellPayload:xM.isRequired,onDismiss:vw().func})));const qM=zM;var KM=Object.defineProperty,QM=Object.defineProperties,$M=Object.getOwnPropertyDescriptors,YM=Object.getOwnPropertySymbols,XM=Object.prototype.hasOwnProperty,JM=Object.prototype.propertyIsEnumerable,ZM=(e,t,r)=>t in e?KM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const eT=(0,s.Ul)(null,(function(e,t){const{playerType:r}=t;return{onDismiss(){e((0,Wn.k5)({playerType:r}))}}}))(qM);eT.propTypes=((e,t)=>QM(e,$M(t)))(((e,t)=>{for(var r in t||(t={}))XM.call(t,r)&&ZM(e,r,t[r]);if(YM)for(var r of YM(t))JM.call(t,r)&&ZM(e,r,t[r]);return e})({},eT.propTypes),{playerType:vw().oneOf([u.k9,u.Ww]).isRequired});const tT=eT,rT=(0,s.Ul)(null,(function(e,{playerType:t}){return{onConfirm(){e((0,ZP.Up)({playerType:t}))},onCancel(){e((0,Wn.WS)({playerType:t}))}}}))((function(e){const{isOpen:t,onConfirm:r,onCancel:n}=e;return i.createElement(JO.c,{cancelLabel:(0,g.c)("No"),confirmLabel:(0,g.c)("Yes"),isOpen:t,message:(0,g.c)("Would you like to continue playback here?"),metricsPage:l.Cs,title:(0,g.c)("Continue Playback"),onCancel:n,onConfirm:r})}));var nT=r(27836);var iT=Object.defineProperty,sT=(e,t,r)=>(((e,t,r)=>{t in e?iT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function aT(e){const t=Math.floor(Date.now()/1e3);return e.reduce(((e,{mediaItem:r})=>{const{beginsAt:n,startOffsetSeconds:i=0}=r,s=n-i;return s>t&&(!e||s<e)?s:e}),0)}function oT(e){return Math.max(0,e-Math.floor(Date.now()/1e3))}class cT extends i.Component{constructor(e,t){super(e,t),sT(this,"_tickTimeout"),sT(this,"_tick",(()=>{this.setState({endSeconds:oT(this.state.endsAt)}),this._setTickTimeout()})),this._tickTimeout=null;const r=aT(e.conflicts);this.state={endsAt:r,endSeconds:oT(r)}}componentDidMount(){this._setTickTimeout()}componentDidUpdate(e,t){const{conflicts:r,onModalClose:n}=this.props;e.conflicts!==r&&this._updateEndSeconds(),t.endSeconds>0&&0===this.state.endSeconds&&n({showError:!0})}componentWillUnmount(){this._tickTimeout&&window.clearTimeout(this._tickTimeout)}_setTickTimeout(){this.state.endSeconds&&(this._tickTimeout=window.setTimeout(this._tick,1e3))}_updateEndSeconds(){const e=aT(this.props.conflicts);this.setState({endsAt:e,endSeconds:oT(e)})}render(){const{endSeconds:e}=this.state,t=function(e){if(null==e)return"";const t=(0,nT.cp)(e),r=24*t.days*60,n=60*t.hours,i=t.minutes+n+r,s=t.seconds;return i&&s?(0,g.c)("{1}min {2}sec",i,s):i?(0,g.c)("{1}min",i):s>0?(0,g.c)("{1}sec",s):""}(1e3*e);return i.createElement("span",null,(0,g.c)("This live TV session will end in: {formattedMinutesSeconds}",{formattedMinutesSeconds:t}))}}const lT=cT;var dT=r(74428),uT=r(54084),pT=r(4659);function mT(e,t,r,n){const i=e===Uw.EPISODE?r:t;return n?(0,g.c)("Stop watching {openSpan}{title}{closeSpan} and continue",{title:i}):(0,g.c)("Stop recording {openSpan}{title}{closeSpan} and continue",{title:i})}const hT=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),(e=>({type:e.type,title:e.title,grandparentTitle:e.grandparentTitle,thumb:e.thumb,grandparentThumb:e.grandparentThumb})))}),(function(e,t){const{playerType:r,grabOperationKey:n}=t;return{onCancelConflictPress(){e((0,aC.G0)({playerType:r,grabOperationKey:n}))}}}))((function(e){const{serverEntityID:t,type:r,title:n,grandparentTitle:s,thumb:a,grandparentThumb:o,isRolling:c,onCancelConflictPress:l}=e;return i.createElement(bp.c,{className:"PlayerConflictItemRow-conflict-y1cRSc",onPress:l},i.createElement(fi.c,{className:"PlayerConflictItemRow-thumbnail-etABr9",component:si.c,height:80,serverEntityID:t,url:a||o,width:53}),i.createElement("div",{className:"PlayerConflictItemRow-title-WqTy1A"},i.createElement(wI.c,{message:mT(r,n,s,c),tags:[{open:"openSpan",close:"closeSpan",component:"span",className:"PlayerConflictItemRow-titleHighlight-UHO3hi"}]})))})),yT=function(e){const{serverEntityID:t,hasSubscribeFeature:r,isPlayerOpen:n,playerType:s,isConflictCancelling:a,conflicts:o,error:c,onModalClose:l}=e,d=function(e,t){return e?t?(0,g.c)("A recording is scheduled to start in a few minutes and all tuners are currently in use. Please select from one of the actions below. Selecting OK or taking no action will end this live viewing session once the recording starts."):(0,g.c)("All tuners are in use. Please ask the server owner to free up a tuner to continue watching Live TV."):t?(0,g.c)("Please select from one of the actions below."):(0,g.c)("All tuners are in use. Please ask the server owner to free up a tuner to watch Live TV.")}(n,r);return i.createElement(TI.c,{onModalClose:l},i.createElement(OI.c,{className:"PlayerConflictModalContent-modalHeader-tlkQ8U ModalHeader-modalHeader-nb9ueN"},(0,g.c)("All Tuners are Currently in Use")),c?i.createElement(uT.c,{kind:Sg.od,message:(0,g.c)("There was an error trying to cancel the selected item, please try again")}):null,i.createElement(CI.c,{innerClassName:"PlayerConflictModalContent-innerModalBody-I1PZRN ModalBody-innerModalBody-T6u3sU"},i.createElement("div",{className:"PlayerConflictModalContent-message-VcxuAn"},d),r?i.createElement("div",{className:"PlayerConflictModalContent-conflicts-tFH9Aw"},o.map((e=>i.createElement(hT,{key:e.key,grabOperationKey:e.key,isPlayerOpen:n,isRolling:e.rolling,metadataItemEntityID:e.metadataItem,playerType:s,serverEntityID:t})))):null),i.createElement(RM.c,null,i.createElement("div",{className:"PlayerConflictModalContent-footerMessage-hqGCE7"},n?i.createElement(lT,{conflicts:o,onModalClose:l}):null),i.createElement(NM.c,null,i.createElement(dT.c,{isSpinning:a,kind:Sg.ac,onPress:l},n||!r?(0,g.c)("OK"):(0,g.c)("Cancel")))))},gT=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),sI(),(0,lC.c)(),xs.c,((e,t,r,n)=>{const i={serverEntityID:e.serverEntityID,hasSubscribeFeature:!!t.features.find((({type:e})=>"subscribe"===e))&&!n,error:e.cancelConflictError,isConflictCancelling:e.isConflictCancelling};return r&&(i.conflicts=r.grabOperation.conflicts),i}))}),(function(e,t){const{isPlayerOpen:r,playerType:n}=t;return{onModalClose({showError:t=!1}={}){e(r?(0,aC.Ko)({playerType:n,showError:t}):(0,aC.vh)({playerType:n}))}}}))((function(e){const{isOpen:t,isPlayerOpen:r,playerType:n,serverEntityID:s,hasSubscribeFeature:a,conflicts:o,isConflictCancelling:c,onModalClose:d}=e;return i.createElement(MI.c,{isOpen:t,metricsPage:l.Uj,size:Pp.wH,onModalClose:d},i.createElement(yT,{conflicts:o,hasSubscribeFeature:a,isConflictCancelling:c,isPlayerOpen:r,playerType:n,serverEntityID:s,onModalClose:d}))}));var fT=r(79816);var vT=Object.defineProperty,bT=Object.getOwnPropertySymbols,ST=Object.prototype.hasOwnProperty,PT=Object.prototype.propertyIsEnumerable,IT=(e,t,r)=>t in e?vT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ET(e){const{errorCode:t,errorMessage:r,title:n}=e;return t===fT.Cg?i.createElement(wI.c,{message:(0,g.c)("This browser can not play DRM-protected content over an insecure connection. Please try {openLink}https://app.plex.tv{closeLink} instead."),tags:[{open:"openLink",close:"closeLink",component:bp.c,kind:Sg.ac,to:Rb.m4}]}):t===fT.Ih?(0,g.c)("An error occurred trying to play this item. Please enable DRM support in your browser then try again."):r||(n?(0,g.c)('An error occurred trying to play "{title}".',{title:n}):(0,g.c)("An error occurred trying to play this item."))}const wT=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),xw(),pC(),Pw(),((e,{mediaType:t})=>t),((e,{isRemotePlayer:t})=>t),((e,t,r,n,i,s)=>{const{playQueue:a,repeatAll:o,errorCode:c,errorCategory:l,isWatchTogether:d}=e,u=r&&r.entityID,p=a&&a.currentIndex,m=function(e,t,r,n){if(!e||!t)return r;const i=t&&t.Media[e.mediaIndex],s=i&&i.source?i.source:t.source;if(!s)return r;const a=(0,co.c)(s);return Oe._u(a.providerIdentifier,Oe.y6)&&"h4"===n?(0,g.c)("An error occurred trying to play this item. Please make sure content from TIDAL is not already playing on another device."):r}(n,t,e.errorMessage,c),h={playQueueItemEntityID:u,showSkipButton:!!a&&(p<a.playQueueItems.length-1||o),showRetryButton:!!a&&i!==jw.Ww&&!s&&!d,errorMessage:m,errorCode:c,errorCategory:l};return t&&(h.title=t.title),h}))}),(function(e,t){const r={playerType:t.playerType};return{onModalClose(){e((0,Wn.WS)(r))},onSkipPress(t){e((0,oC.Ax)(r))},onRetryPress(t){e((0,bw.gG)(r)),e((0,cC.Y1)(r))}}}))((function(e){const{isOpen:t,showSkipButton:r,showRetryButton:n,errorCode:s,errorCategory:a,onSkipPress:o,onRetryPress:c,onModalClose:d}=e;return i.createElement(MI.c,{isOpen:t,metricsPage:l.Y,size:Pp.wH,onModalClose:d},i.createElement(TI.c,{onModalClose:d},i.createElement(OI.c,{className:"PlayerErrorModal-modalHeader-_vIr3h ModalHeader-modalHeader-nb9ueN"},(0,g.c)("Playback Error")),i.createElement(CI.c,null,i.createElement(ET,((e,t)=>{for(var r in t||(t={}))ST.call(t,r)&&IT(e,r,t[r]);if(bT)for(var r of bT(t))PT.call(t,r)&&IT(e,r,t[r]);return e})({},e)),null!=s?i.createElement("p",{className:"PlayerErrorModal-errorCode-b6NbJN"},(0,g.c)("Error code: {errorCode}",{errorCode:s}),a?` (${a})`:null):null),r||n?i.createElement(RM.c,null,i.createElement(NM.c,null,r?i.createElement(sw.c,{onPress:o},(0,g.c)("Skip")):null,n?i.createElement(sw.c,{kind:Sg.ac,onPress:c},(0,g.c)("Retry")):null)):null))}));var CT=r(18580),OT=r(33356);function MT(e,t){return{src:De.c.join(e,{width:t,height:t,minSize:1}),sizes:`${t}x${t}`,type:"image/jpeg"}}function TT({metadataItem:e,player:t,transcodeURL:r}){return(0,i.useEffect)((()=>{const n=e&&Oe._u((0,co.c)(e.source).providerIdentifier,[Oe._0,Oe.$9]),i=!!e&&!n;window.navigator.mediaSession.playbackState=i?function(e){return(null==e?void 0:e.isPaused)||(null==e?void 0:e.isBuffering)?(null==e?void 0:e.isPaused)?"paused":"none":"playing"}(t):"none",window.navigator.mediaSession.metadata=i?new window.MediaMetadata({title:e.title,artist:e.originalTitle||e.grandparentTitle,album:e.parentTitle,artwork:r?[MT(r,96),MT(r,128),MT(r,192),MT(r,256),MT(r,512)]:void 0}):null}),[e,t,r]),(0,i.useEffect)((()=>()=>{window.navigator.mediaSession.metadata=null,window.navigator.mediaSession.playbackState="none"}),[]),null}const DT=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),xw(),((e,t)=>({metadataItem:t,player:e,url:t?(0,OT.o)(t.type,t):void 0,serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID})))}))((0,s.Ul)((()=>(0,At.M3)((0,CT.c)(),(e=>({transcodeURL:e})))))((({metadataItem:e,player:t,transcodeURL:r,url:n,serverEntityID:s,providerEntityID:a})=>i.createElement(TT,{metadataItem:e,player:t,providerEntityID:a,serverEntityID:s,transcodeURL:r,url:n}))));var kT=Object.defineProperty,xT=(e,t,r)=>(((e,t,r)=>{t in e?kT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const AT={dispatchPlayPreviousItem:oC.oH,dispatchStepBack:bw.QP,dispatchSkipBack:bw.iu,dispatchTogglePlayPause:bw.Cu,dispatchPlay:bw.Eb,dispatchPause:bw.U$,dispatchSkipForward:bw.EP,dispatchStepForward:bw.s7,dispatchPlayNextItem:oC.Ax,dispatchChangeVolume:bw.eU,dispatchEndPlayback:Wn.WS};class RT extends i.Component{constructor(e,t){super(e,t),xT(this,"onPreviousShortcut",(()=>{this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayPreviousItem({playerType:this.props.playerType})})),xT(this,"onStepBackShortcut",(()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchStepBack(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayPreviousItem(e)})),xT(this,"onSkipBackShortcut",(()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchSkipBack(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayPreviousItem(e)})),xT(this,"onPlayPauseShortcut",(()=>{this.props.isCurrentMediaTypePausable&&this.props.dispatchTogglePlayPause({playerType:this.props.playerType})})),xT(this,"onPlayShortcut",(()=>{this.props.isCurrentMediaTypePausable&&this.props.dispatchPlay({playerType:this.props.playerType})})),xT(this,"onPauseShortcut",(()=>{this.props.isCurrentMediaTypePausable&&this.props.dispatchPause({playerType:this.props.playerType})})),xT(this,"onSkipForwardShortcut",(()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchSkipForward(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayNextItem(e)})),xT(this,"onStepForwardShortcut",(()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchStepForward(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayNextItem(e)})),xT(this,"onNextShortcut",(()=>{this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayNextItem({playerType:this.props.playerType})})),xT(this,"onVolumeChange",(e=>{this.props.dispatchChangeVolume({volume:e,playerType:this.props.playerType})})),xT(this,"onVolumeIncrease",(()=>{this.onVolumeChange(Math.min(this.props.volume+10,100))})),xT(this,"onVolumeDecrease",(()=>{this.onVolumeChange(Math.max(this.props.volume-10,0))})),xT(this,"onCloseShortcut",(()=>{this.setState({isCloseConfirmModalOpen:!0})})),xT(this,"onCloseConfirmPress",(e=>{this.props.dispatchEndPlayback({playerType:this.props.playerType})})),xT(this,"onCloseCancelPress",(e=>{this.setState({isCloseConfirmModalOpen:!1})})),xT(this,"onToggleFullscreenShortcut",(()=>{this.props.onToggleFullscreenShortcut()})),this.state={isCloseConfirmModalOpen:!1}}componentDidMount(){this.props.allowShortcuts&&this._startListening()}componentDidUpdate(e){const{allowShortcuts:t}=this.props;t&&!e.allowShortcuts?this._startListening():!t&&e.allowShortcuts&&this._stopListening()}componentWillUnmount(){this.props.allowShortcuts&&this._stopListening()}_startListening(){const{isCurrentMediaTypePausable:e,isCurrentMediaTypeSkippable:t}=this.props;ih.c.hasMediaSession&&(window.navigator.mediaSession.setActionHandler("play",e?this.onPlayShortcut:null),window.navigator.mediaSession.setActionHandler("pause",e?this.onPauseShortcut:null),window.navigator.mediaSession.setActionHandler("previoustrack",t?this.onPreviousShortcut:null),window.navigator.mediaSession.setActionHandler("nexttrack",t?this.onNextShortcut:null),window.navigator.mediaSession.setActionHandler("stop",this.onCloseShortcut)),ou.c.on({"shortcut:skipPrevious":this.onPreviousShortcut,"shortcut:stepBackward":this.onStepBackShortcut,"shortcut:seekBackward":this.onSkipBackShortcut,"shortcut:playPause":this.onPlayPauseShortcut,"shortcut:play":this.onPlayShortcut,"shortcut:pause":this.onPauseShortcut,"shortcut:seekForward":this.onSkipForwardShortcut,"shortcut:stepForward":this.onStepForwardShortcut,"shortcut:skipNext":this.onNextShortcut,"shortcut:increaseVolume":this.onVolumeIncrease,"shortcut:decreaseVolume":this.onVolumeDecrease,"shortcut:toggleFullScreen":this.onToggleFullscreenShortcut,"shortcut:stop":this.onCloseShortcut})}_stopListening(){ih.c.hasMediaSession&&(window.navigator.mediaSession.setActionHandler("play",null),window.navigator.mediaSession.setActionHandler("pause",null),window.navigator.mediaSession.setActionHandler("previoustrack",null),window.navigator.mediaSession.setActionHandler("nexttrack",null),window.navigator.mediaSession.setActionHandler("stop",null)),ou.c.off({"shortcut:skipPrevious":this.onPreviousShortcut,"shortcut:stepBackward":this.onStepBackShortcut,"shortcut:seekBackward":this.onSkipBackShortcut,"shortcut:playPause":this.onPlayPauseShortcut,"shortcut:play":this.onPlayShortcut,"shortcut:pause":this.onPauseShortcut,"shortcut:seekForward":this.onSkipForwardShortcut,"shortcut:stepForward":this.onStepForwardShortcut,"shortcut:skipNext":this.onNextShortcut,"shortcut:increaseVolume":this.onVolumeIncrease,"shortcut:decreaseVolume":this.onVolumeDecrease,"shortcut:toggleFullScreen":this.onToggleFullscreenShortcut,"shortcut:stop":this.onCloseShortcut})}render(){return i.createElement(JO.c,{isOpen:this.state.isCloseConfirmModalOpen,message:(0,g.c)("Closing the player will stop playback. Any changes to the queue will be lost."),metricsPage:l.E6,title:(0,g.c)("Stop Playback"),onCancel:this.onCloseCancelPress,onConfirm:this.onCloseConfirmPress})}}const NT=(0,s.Ul)((function(){return(0,At.M3)((0,At.M3)((e=>e.ui.audioVideoPlayer.openState),(e=>e.ui.photoPlayer.openState),((e,{playerType:t})=>t),((e,t,r)=>function(e){const{playerType:t,audioVideoOpenState:r,photoOpenState:n}=e,i=t===u.k9&&!!r,s=t===u.Ww&&!!n;let a=0,o=0;return r===iC.C?a+=1:r===iC.m&&(a+=2),n===iC.C?o+=1:n===iC.m&&(o+=2),i&&a>=o||s&&o>a}({audioVideoOpenState:e,photoOpenState:t,playerType:r}))),xw(),(0,At.M3)((0,Sw.c)(),(e=>{let t;if(e){const r=(0,Uw.GG)(e.type);t=r&&r.mediaType}return t})),((e,{isAdVisible:t})=>t),nC.c,((e,t,r,n,i)=>{const s=t&&Oe._u((0,co.c)(t.source).providerIdentifier,[Oe._0,Oe.$9]),a=t&&(0,co.c)(t.source).serverIdentifier===Me.A,o=s&&a;return{allowShortcuts:e,isCurrentMediaTypePausable:!o,isCurrentMediaTypeSkippable:!n&&!s,isCurrentMediaTypeSeekable:!(n||o||r!==jw.KI&&r!==jw.im),volume:i}}))}),AT)(RT);var LT=Object.defineProperty;class jT extends i.Component{constructor(e,t){super(e,t),((e,t,r)=>{((e,t,r)=>{t in e?LT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"title"),this.title=document.title}componentDidMount(){this._updateWindowTitle()}componentDidUpdate(){this._updateWindowTitle()}componentWillUnmount(){document.title=this.title}_updateWindowTitle(){const{type:e,title:t,originalTitle:r,grandparentTitle:n,index:i,parentIndex:s,originallyAvailableAt:a,isPaused:o}=this.props;if(!t||!e)return;let c;if(e===Uw.EPISODE)c=`${n} - ${(0,Ec.c)({seasonIndex:s,episodeIndex:i,date:a,noLeadingZero:!0,separator:"  "})}`;else if(e===Uw.UJ){const e=r||n;c=e?`${e} - ${t}`:t}else c=t;o||(c=` ${c}`),document.title=c}render(){return null}}const UT=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),xw(),((e,t)=>t?{type:t.type,title:t.title,originalTitle:t.originalTitle,grandparentTitle:t.grandparentTitle,index:t.index,parentIndex:t.parentIndex,originallyAvailableAt:t.originallyAvailableAt,isPaused:e.isPaused}:{}))}))(jT);var FT=Object.defineProperty,VT=Object.defineProperties,_T=Object.getOwnPropertyDescriptors,WT=Object.getOwnPropertySymbols,BT=Object.prototype.hasOwnProperty,HT=Object.prototype.propertyIsEnumerable,zT=(e,t,r)=>t in e?FT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function GT(e){const t=e,{component:r}=t,n=((e,t)=>{var r={};for(var n in e)BT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&WT)for(var n of WT(e))t.indexOf(n)<0&&HT.call(e,n)&&(r[n]=e[n]);return r})(t,["component"]);return i.createElement(i.Suspense,{fallback:null},i.createElement(r,((e,t)=>VT(e,_T({allowRecycleElement:!0,type:"video"})))(((e,t)=>{for(var r in t||(t={}))BT.call(t,r)&&zT(e,r,t[r]);if(WT)for(var r of WT(t))HT.call(t,r)&&zT(e,r,t[r]);return e})({},n))))}GT.defaultProps={component:qC};const qT=GT,KT=tC(GT);function QT(e){const t=document.getElementById("plex").classList,r="show-video-player";e?t.add(r):t.remove(r)}var $T=Object.defineProperty,YT=Object.defineProperties,XT=Object.getOwnPropertyDescriptors,JT=Object.getOwnPropertySymbols,ZT=Object.prototype.hasOwnProperty,eD=Object.prototype.propertyIsEnumerable,tD=(e,t,r)=>t in e?$T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rD=(e,t)=>{for(var r in t||(t={}))ZT.call(t,r)&&tD(e,r,t[r]);if(JT)for(var r of JT(t))eD.call(t,r)&&tD(e,r,t[r]);return e},nD=(e,t)=>YT(e,XT(t)),iD=(e,t,r)=>(tD(e,"symbol"!=typeof t?t+"":t,r),r);const sD=parseInt(R.c.playerControlsPosterHeight,10),aD=parseInt(R.c.playerControlsLandscapePosterWidth,10),oD=parseInt(R.c.playerControlsNarrowBreakpoint,10),cD=parseInt(R.c.playerControlsPosterLeftGutter,10),lD=parseInt(R.c.playerControlsPosterBottomGutter,10),dD=parseInt(R.c.playerControlsNarrowPosterBottomGutter,10);class uD extends i.Component{constructor(e,t){super(e,t),iD(this,"positionMillisecondsStore"),iD(this,"updateAdState",(()=>{var e;const{ad:t}=this.state,{isOpen:r,onUpdateCurrentAd:n}=this.props;n&&n(t&&r?{adDisplayIndex:t.displayIndex,adDisplayTotal:t.displayTotal,adDurationSeconds:Math.floor(t.duration),adPositionSeconds:Math.floor(this.state.adPositionMilliseconds/1e3),adState:SC.U$,adTimeOffsetSeconds:null!=(e=null==t?void 0:t.timeOffset)?e:null}:{adDisplayIndex:null,adDisplayTotal:null,adDurationSeconds:null,adPositionSeconds:null,adState:null,adTimeOffsetSeconds:null})})),iD(this,"onAdPositionMillisecondsChange",(e=>{this.setState({adPositionMilliseconds:e})})),iD(this,"onAdChange",(e=>{this.setState({ad:e,adPositionMilliseconds:0,hasRequestedAds:!0})})),iD(this,"onScreenSizeChange",(({width:e})=>{const t=e<=oD;t!==this.state.isNarrowLayout&&this.setState({isNarrowLayout:t})})),iD(this,"onSeekBarInteractionStart",(()=>{this.setState({isSeeking:!0})})),iD(this,"onSeekBarInteractionEnd",(()=>{this.setState({isSeeking:!1})})),iD(this,"onUpdateBufferedRanges",(e=>{const{onUpdateBufferedRanges:t}=this.props;t&&t(e)})),this.state={ad:null,adPositionMilliseconds:0,isNarrowLayout:!1,seekEndMilliseconds:0,seekStartMilliseconds:0},this.positionMillisecondsStore=(0,Vw.eC)(qw,0)}static getDerivedStateFromProps(e,t){const r={vastUrl:e.vastUrl,isRemotePlayer:e.isRemotePlayer};return t.vastUrl===r.vastUrl&&t.isRemotePlayer===r.isRemotePlayer||(r.hasRequestedAds=!1,r.ad=null,r.adPositionMilliseconds=0),r}componentDidMount(){QT(this.props.showBackgroundVideoPlayer)}componentDidUpdate(e,t){e.showBackgroundVideoPlayer!==this.props.showBackgroundVideoPlayer&&QT(this.props.showBackgroundVideoPlayer),(e.isOpen&&!this.props.isOpen||t.ad!==this.state.ad||t.ad===this.state.ad&&t.adPositionMilliseconds!==this.state.adPositionMilliseconds&&Math.floor(this.state.adPositionMilliseconds/1e3)!==this.props.adPositionSeconds)&&this.updateAdState()}componentWillUnmount(){QT(!1)}render(){var e,t;const{adState:r,adPositionSeconds:n,adDurationSeconds:a,playerType:o,isOpen:c,isMiniPlayer:d,isRemotePlayer:u,isPlayQueueLoading:p,isPostPlayVisible:m,isFullscreen:h,isVideo:y,hasError:g,hasConflicts:f,confirmLiveTVPlayback:v,showBackgroundVideoPlayer:b,currentMediaType:S,currentMediaSubtype:P,confirmPlaybackPayload:I,confirmOffsetPayload:E,advertisingNoticePayload:w,confirmRemoteToLocal:C,confirmLocalToRemote:O,confirmPlayerUpsellPayload:M,vastUrl:T,mediaComponent:D,mediaHeight:k,mediaPlacement:x,mediaWidth:A,playerComponent:R,bufferedRanges:N,machineIdentifier:L,providerIdentifier:j,onToggleFullscreen:U}=this.props,{ad:F,adPositionMilliseconds:V,hasRequestedAds:_,seekStartMilliseconds:W,seekEndMilliseconds:B,isNarrowLayout:H,isSeeking:z}=this.state;if(!c)return g?i.createElement(wT,{isOpen:!0,isRemotePlayer:u,mediaType:S,playerType:o}):f?i.createElement(gT,{isOpen:!0,isPlayerOpen:c,playerType:o}):v?i.createElement(YO,{isOpen:!0,isPlayerOpen:c,playerType:o}):null;const G=y&&d?{edgeGutterX:cD,edgeGutterY:H?dD:lD,height:sD,placement:EC.oJ,width:aD}:{height:k,placement:x,width:A},q=r===SC.U$,K=!!T&&!_,Q=null!=(t=null==(e=N[N.length-1])?void 0:e.endSeconds)?t:0;return i.createElement(_e.cp,{machineIdentifier:L,providerIdentifier:j},i.createElement(s.C_,{context:Ww,store:this.positionMillisecondsStore},i.createElement(rp.c,{page:l.KW},i.createElement("div",{className:jt()(d?"Player-miniPlayerContainer-mixkS9":"Player-fullPlayerContainer-wBDz23",!b&&!d&&"Player-fullPlayerContainerBackground-tILqnC")},I?i.createElement(MM,{confirmPlaybackPayload:I,isOpen:!0,playerType:o}):null,M?i.createElement(tT,{isOpen:!0,playerType:o,upsellPayload:M}):null,w?i.createElement(RO.c,{advertisingNoticePayload:w,isOpen:!0,playerType:o}):null,E?i.createElement(bM,{confirmOffsetPayload:E,isOpen:!0,playerType:o}):null,C?i.createElement(rT,{isOpen:!0,playerType:o}):null,O!==vC.Gc?i.createElement(cM,{isOpen:!0,playerType:o}):null,g?i.createElement(wT,{isOpen:!0,isRemotePlayer:u,mediaType:S,playerType:o}):null,f?i.createElement(gT,{isOpen:!0,isPlayerOpen:c,playerType:o}):null,K||m||p||u&&O===vC.Gc||C?null:i.createElement(D,nD(rD({},G),{isAdVisible:q,isNarrowLayout:H,isStackedAbove:d,mediaSubtype:P,mediaType:S,playerType:o,onBufferChange:this.onUpdateBufferedRanges})),!T||u||C||g?null:i.createElement(qT,nD(rD({},G),{ad:F,component:(0,_n.WI)("adPlayerComponent").getComponent(),isFullscreen:h,isIdle:!!z,isMiniPlayer:d,isNarrowLayout:H,isStackedAbove:d,playerType:o,positionSeconds:Math.round(V/1e3),statusOverlayClassName:"Player-adPlayerDisplayIndexContainer-aXzbe8",url:T,onAdChange:this.onAdChange,onPositionMillisecondsChange:this.onAdPositionMillisecondsChange})),i.createElement(R,nD(rD(rD({},this.props),G),{ad:F,adDurationMilliseconds:1e3*a,adPositionMilliseconds:u?1e3*n:V,bufferEndMilliseconds:1e3*Q,bufferStartMilliseconds:0,isAdVisible:q,isNarrowLayout:H,seekEndMilliseconds:B,seekStartMilliseconds:W,onSeekBarInteractionEnd:this.onSeekBarInteractionEnd,onSeekBarInteractionStart:this.onSeekBarInteractionStart})),i.createElement(NT,{isAdVisible:q,playerType:o,onToggleFullscreenShortcut:U}),ih.c.hasMediaSession?i.createElement(DT,{playerType:o}):null,i.createElement(UT,{playerType:o}),i.createElement(CO,{isAdVisible:q,isRemotePlayer:u,playerType:o}),i.createElement(TO,{playerType:o}),i.createElement(AO,{onScreenSizeChange:this.onScreenSizeChange})))))}}iD(uD,"defaultProps",{bufferedRanges:[],confirmLiveTVPlayback:!1,isMusic:!1,isPhoto:!1,isVideo:!1,isLiveTV:!1});const pD=uD;var mD=r(6968);function hD(e){return e?`${e.type}:${e.startTimeOffset}:${e.endTimeOffset}`:void 0}var yD=r(49716);const gD="north",fD="northeast",vD="east",bD="southeast",SD="south",PD="southwest",ID="west",ED="northwest",wD="center";var CD=r(58840);const OD=(0,s.Ul)((function(){return(0,At.M3)((0,CT.c)(),(e=>({url:e})))}))(CD.cp),MD=Math.max(256,144),TD={maxWidth:256/1920*100+"vw",maxHeight:144/1080*100+"vh"},DD={maxWidth:"10vw",maxHeight:"10vh"},kD={maxWidth:128/1920*100+"vw",maxHeight:72/1080*100+"vh"},xD=({className:e,src:t,style:r})=>i.createElement("img",{className:e,src:t,style:r}),AD=({className:e,providerEntityID:t,overlay:r,serverEntityID:n})=>{const[s,a]=(0,i.useState)();let o;switch(r.size){case"large":o=TD;break;case"medium":o=DD;break;default:o=kD}const c=(0,i.useCallback)((()=>{a(new Error("Unable to load overlay"))}),[]);return(0,i.useEffect)((()=>{a(void 0)}),[r]),s?null:i.createElement(OD,{className:e,component:xD,format:"png",height:MD,providerEntityID:t,serverEntityID:n,style:o,url:r.key,width:MD,onError:c})},RD={outerContainer:"MediaOverlays-outerContainer-UKEbAn",innerContainer:"MediaOverlays-innerContainer-ROiPjc",horizontal:"MediaOverlays-horizontal-bRV8S8",vertical:"MediaOverlays-vertical-EHUQz1",overlay:"MediaOverlays-overlay-wqRggw",northwest:"MediaOverlays-northwest-zAGZ9N MediaOverlays-horizontal-bRV8S8",north:"MediaOverlays-north-qRQuKL MediaOverlays-horizontal-bRV8S8",northeast:"MediaOverlays-northeast-Ry3jQP MediaOverlays-horizontal-bRV8S8",east:"MediaOverlays-east-rZp1RY MediaOverlays-vertical-EHUQz1",southeast:"MediaOverlays-southeast-T27LmT MediaOverlays-horizontal-bRV8S8",south:"MediaOverlays-south-CFbnrI MediaOverlays-horizontal-bRV8S8",southwest:"MediaOverlays-southwest-uIzp7J MediaOverlays-horizontal-bRV8S8",west:"MediaOverlays-west-VR13xa MediaOverlays-vertical-EHUQz1",center:"MediaOverlays-center-A0OoIj MediaOverlays-horizontal-bRV8S8"};var ND=Object.defineProperty,LD=Object.defineProperties,jD=Object.getOwnPropertyDescriptors,UD=Object.getOwnPropertySymbols,FD=Object.prototype.hasOwnProperty,VD=Object.prototype.propertyIsEnumerable,_D=(e,t,r)=>t in e?ND(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const WD=(0,s.Ul)((function(){return(0,At.M3)(uC(),(0,kw.c)(),(0,lC.c)(),(0,rO.c)(["mediaHeight","mediaWidth","itemPlaybackTime","positionSeconds","providerEntityID","serverEntityID"]),((e,t,r,n)=>((e,t)=>LD(e,jD(t)))(((e,t)=>{for(var r in t||(t={}))FD.call(t,r)&&_D(e,r,t[r]);if(UD)for(var r of UD(t))VD.call(t,r)&&_D(e,r,t[r]);return e})({},n),{liveTVMediaItem:t,liveTVSession:r,playQueueMediaItem:e})))}))((({itemPlaybackTime:e,liveTVMediaItem:t,liveTVSession:r,mediaHeight:s,mediaWidth:a,playQueueMediaItem:o,positionSeconds:c,providerEntityID:l,serverEntityID:d})=>{const[u,p]=function(){const[e,t]=(0,i.useState)([window.innerWidth,window.innerHeight]);return(0,i.useEffect)((()=>{function e(){t([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e}(),m=(0,i.useMemo)((()=>{const n=Math.floor(e/1e3);let i,s=-1;return r&&t?(i=t,s=r.currentPosition-t.beginsAt):o&&(i=o,s=c),(null==i?void 0:i.Overlay)?function(e,t){const{secondsSinceMediaItemAiringBegan:r,secondsSinceMediaItemPlaybackBegan:n}=t;return e.reduce(((e,t)=>{const i=t.startTimeOffset/1e3,s=i+(null==t.duration?Number.POSITIVE_INFINITY:t.duration/1e3);let a=!1;return"absolute"===t.startTimeOffsetType?a=n>=i&&n<s:"relative"===t.startTimeOffsetType&&(a=r>=i&&r<s),a&&(e.has(t.gravity)?e.get(t.gravity).push(t):e.set(t.gravity,[t])),e}),new Map)}(i.Overlay,{secondsSinceMediaItemAiringBegan:s,secondsSinceMediaItemPlaybackBegan:n}):void 0}),[e,r,t,o,c]);if(!(null==m?void 0:m.size)||!s||!a)return null;const h=Math.min(u/a,p/s);return i.createElement("div",{className:RD.outerContainer},i.createElement("div",{className:RD.innerContainer,style:{width:a*h/u*100+"vw",height:s*h/p*100+"vh"}},Object.values(n).map((e=>{var t;const r=null==(t=null==m?void 0:m.get(e))?void 0:t.map(((e,t)=>i.createElement(AD,{key:t,className:RD.overlay,overlay:e,providerEntityID:l,serverEntityID:d})));return r?i.createElement("div",{key:e,className:RD[e]},r):null}))))}));var BD=r(59740),HD=r(40716),zD=Object.defineProperty,GD=Object.getOwnPropertySymbols,qD=Object.prototype.hasOwnProperty,KD=Object.prototype.propertyIsEnumerable,QD=(e,t,r)=>t in e?zD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const $D=function(e){const t=(0,At.M3)((e=>e),(e=>({positionMilliseconds:e})));function r(t){const r=t,{positionSeconds:n,positionMilliseconds:s}=r,a=((e,t)=>{var r={};for(var n in e)qD.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&GD)for(var n of GD(e))t.indexOf(n)<0&&KD.call(e,n)&&(r[n]=e[n]);return r})(r,["positionSeconds","positionMilliseconds"]);let o=s;return null!=n&&Math.abs(n-Math.floor(s/1e3))>1&&(o=1e3*n),i.createElement(e,((e,t)=>{for(var r in t||(t={}))qD.call(t,r)&&QD(e,r,t[r]);if(GD)for(var r of GD(t))KD.call(t,r)&&QD(e,r,t[r]);return e})({positionMilliseconds:o,positionSeconds:n},a))}return r.displayName=`WithPositionMilliseconds(${(0,Fw.c)(e)})`,r.WrappedComponent=e,r.propTypes={positionSeconds:vw().number,positionMilliseconds:vw().number.isRequired},(0,s.Ul)(t,null,null,{context:Ww})(r)};var YD=r(86604),XD=r.n(YD),JD=r(4448),ZD=r(72484),ek=r(35320),tk=r(49340);var rk=Object.defineProperty,nk=(e,t,r)=>(((e,t,r)=>{t in e?rk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class ik extends i.Component{constructor(e,t){super(e,t),nk(this,"_clock"),nk(this,"_connectionTimeoutID"),nk(this,"_errorCount"),nk(this,"_formatTimeoutID"),nk(this,"_isMounted"),nk(this,"_loadTimeout"),nk(this,"_loadTimeoutID"),nk(this,"_positionAtTimeOfRequest"),nk(this,"_renderer"),nk(this,"_rendererID"),nk(this,"_resetAfterSeekStarted"),nk(this,"_resetLater"),nk(this,"_xhr"),nk(this,"_loadSubtitles",(()=>{this._loadTimeoutID&&(this._loadTimeoutID=window.clearTimeout(this._loadTimeoutID)),this._connectionTimeoutID&&(this._connectionTimeoutID=window.clearTimeout(this._connectionTimeoutID)),this._formatTimeoutID&&(this._formatTimeoutID=window.clearTimeout(this._formatTimeoutID));const{subtitlesUrl:e,positionMilliseconds:t,decisionUseSidecarSrtSubtitles:r}=this.props;this._positionAtTimeOfRequest=t,(0,cu.c)("[Subtitles] loading subtitles. position: %s url: %s",this._positionAtTimeOfRequest,e),this._abortStream(),this._xhr=new window.XMLHttpRequest;const n=new(XD().parser.XhrStream)(this._xhr),i=r?new(XD().parser.SrtStreamParser)(n).ass:new(XD().parser.StreamParser)(n).minimalASS;this._openSubtitlesConnection(),i.then(this.onSubtitlesLoad,this.onSubtitlesFail)})),nk(this,"_getPosition",(()=>{const{positionMilliseconds:e,offset:t}=this.props,r=(e+t)/1e3;if(r%1e3){const e=this._clock.currentTime;if(Math.floor(e)===r)return e}return r})),nk(this,"onMeasure",(({width:e,height:t})=>{this.setState({width:e,height:t})})),nk(this,"onSubtitlesLoad",(e=>{if(!this._isMounted)return!1;(0,cu.c)("[Subtitles] Starting to render subtitles"),this._destroySubtitles(),this._clock=new(XD().renderers.AutoClock)(this._getPosition,1e3),this._renderer=new(XD().renderers.WebRenderer)(e,this._clock,document.getElementById(this._rendererID),this.props.rendererOptions),this._setSubtitleSize(),this._rerenderSubtitles(),this._setClockState(),this._formatTimeoutID=window.setTimeout((()=>{this._setSubtitleColor(),this._setSubtitlePosition(),this._rerenderSubtitles()}),0)})),nk(this,"onSubtitlesConnectionTimeout",(()=>{(0,cu.c)("[Subtitles] Connection inactivity timeout, reopening."),this._openSubtitlesConnection()})),nk(this,"onSubtitlesFail",(()=>{if(!this._isMounted)return!1;const e=this._xhr.readyState,t=this._xhr.status;this._errorCount++,cu.c.warn("[Subtitles] Request failed. statusCode:%s state:%s errorCount:%s %s",t,e,this._errorCount,this._xhr.errorString||""),this._errorCount>this.props.consecutiveErrorsTolerance?this.props.onSubtitlesError():this._loadTimeoutID=window.setTimeout(this._loadSubtitles,this.props.retryTimeout)})),XD().debugMode=!1,this.state={width:0,height:0},this._rendererID=(0,tk.c)(),this._loadTimeoutID=null,this._connectionTimeoutID=null,this._errorCount=0,this._positionAtTimeOfRequest=null,this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.props.subtitlesUrl&&this._loadSubtitles()}componentDidUpdate(e,t){const{isOpen:r,isBuffering:n,isPaused:i,hasError:s,heightOffset:a,rendererOptions:o,offset:c,color:l,position:d,size:u,sizeMultiplier:p,subtitlesUrl:m}=this.props,{width:h,height:y}=this.state;if(this._shouldResetStream(e)||o!==e.rendererOptions||m!==e.subtitlesUrl)return void this._loadSubtitles();const g=l!==e.color,f=d!==e.position,v=u!==e.size||p!==e.sizeMultiplier;g&&this._setSubtitleColor(),f&&this._setSubtitlePosition(),v&&this._setSubtitleSize(),(g||f||v||h!==t.width||y!==t.height||a!==e.heightOffset)&&this._rerenderSubtitles(),r===e.isOpen&&n===e.isBuffering&&i===e.isPaused&&s===e.hasError||this._setClockState(),c!==e.offset&&this._setPosition()}componentWillUnmount(){(0,cu.c)("[Subtitles] Closing"),this._loadTimeoutID&&(this._loadTimeoutID=window.clearTimeout(this._loadTimeoutID)),this._connectionTimeoutID&&(this._connectionTimeoutID=window.clearTimeout(this._connectionTimeoutID)),this._formatTimeoutID&&(this._formatTimeoutID=window.clearTimeout(this._formatTimeoutID)),this._isMounted=!1,this._destroySubtitles(),this._abortStream()}_openSubtitlesConnection(){const{subtitlesUrl:e,isDirectPlay:t,positionSeconds:r,connectionTimeout:n}=this.props;this._abortStream(),this._xhr.onreadystatechange=e=>{4===e.currentTarget.readyState&&(e.currentTarget.status>=200&&e.currentTarget.status<300?this._errorCount=0:this.onSubtitlesFail())},n&&(this._xhr.onprogress=e=>{(0,cu.c)("[Subtitles] Received data, restarting connection timer."),window.clearTimeout(this._connectionTimeoutID),this._connectionTimeoutID=window.setTimeout(this.onSubtitlesConnectionTimeout,n)});let i=e;if(t){const t=De.c.parseUrl(e);t.params.offset=r,i=De.c.join([t.origin,t.pathname],t.params)}this._xhr.open("GET",i,!0),this._xhr.send()}_destroySubtitles(){this._loadTimeoutID&&(this._loadTimeout=window.clearTimeout(this._loadTimeoutID)),this._clock&&(this._clock.disable(),this._clock=null),this._renderer&&(this._renderer.disable(),this._renderer=null);const e=document.getElementById(this._rendererID);for(;e.hasChildNodes();)e.removeChild(e.lastChild)}_abortStream(){this._xhr&&((0,cu.c)("[Subtitles] Aborting existing xhr."),this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.abort())}_setSubtitleColor(){const{color:e}=this.props;if(!this._renderer)return;const t=function(e){const t=/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(e);return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:null}(e),r=this._renderer.ass.styles.get("Default");t?r?((0,cu.c)("[Subtitles] Setting subtitle color to %s",e),r._primaryColor=new(XD().parts.Color)(t.red,t.green,t.blue,1),r._outlineColor=e===JD.c.BLACK?new(XD().parts.Color)(255,255,255,1):new(XD().parts.Color)(0,0,0,1)):cu.c.warn("[Subtitles] Unable to set subtitle color, no default style"):cu.c.warn("[Subtitles] Unable to set subtitle color, invalid color")}_setSubtitlePosition(){const{position:e}=this.props;if(!this._renderer)return;const t=this._renderer.ass.styles.get("Default");let r=2;e===ZD.c.MIDDLE?r=5:e===ZD.c.TOP&&(r=8),t?((0,cu.c)("[Subtitles] Setting subtitle position to %s",e),t._alignment=r):cu.c.warn("[Subtitles] Unable to set subtitle position, no default style")}_setSubtitleSize(){const{size:e,sizeMultiplier:t}=this.props;if(!this._renderer)return;const r=this._renderer.ass.properties,n=e*t/100;let i,s;this.state.originalResolutionX&&this.state.originalResolutionY?(i=this.state.originalResolutionX,s=this.state.originalResolutionY):(i=r.resolutionX,s=r.resolutionY,this.setState({originalResolutionX:i,originalResolutionY:s})),r.resolutionX=i/n,r.resolutionY=s/n}_rerenderSubtitles(){if(this._renderer){const{width:e,height:t}=this.state;(0,cu.c)("[Subtitles] Re-rendering subtitles"),this._renderer.resize(e,t-this.props.heightOffset)}}_setPosition(){const e=this._clock;if(!e||!e._manualClock)return;const{positionMilliseconds:t,offset:r}=this.props;e._manualClock._currentTime=(t+r)/1e3}_setClockState(){const e=this._clock;if(!e)return;const{isOpen:t,isBuffering:r,isPaused:n,hasError:i}=this.props;return r||n?((0,cu.c)("[Subtitles] Clock State: paused"),void e.pause()):!t||i?((0,cu.c)("[Subtitles] Clock State: disabled"),void e.disable()):n?void 0:((0,cu.c)("[Subtitles] Clock State: playing"),void e.play())}_shouldResetStream(e){const{isOpen:t,isMediaLoading:r,isBuffering:n,isPaused:i,hasError:s,positionMilliseconds:a,lastSeekPositionSeconds:o,decisionUseSidecarSrtSubtitles:c}=this.props;if(c)return!1;const l=this._positionAtTimeOfRequest,d=a-e.positionMilliseconds,u=d>0&&t&&!r&&!n&&!i&&!s;return null!=o&&o!==e.lastSeekPositionSeconds?(this._resetAfterSeekStarted=!0,this._resetLater=!1,!1):this._resetAfterSeekStarted?!!(u&&1e3*o<a)&&(this._resetAfterSeekStarted=!1,!0):u&&this._resetLater?(this._resetLater=!1,!0):(!this._xhr||d>1e4||a<l)&&(this._resetLater=!u,u)}render(){return i.createElement(Fp.c,{className:"Subtitles-measure-fffGGG",onMeasure:this.onMeasure},i.createElement("div",{className:"Subtitles-renderer-f7uT59",id:this._rendererID,role:"alert"}))}}nk(ik,"defaultProps",{offset:0,color:JD.c.WHITE,position:ZD.c.BOTTOM,size:ek.c.NORMAL,sizeMultiplier:1,heightOffset:0,consecutiveErrorsTolerance:3,connectionTimeout:null,retryTimeout:3e3,rendererOptions:{enableSvg:!1,preciseOutlines:!1}});const sk=ik;var ak=Object.defineProperty,ok=Object.defineProperties,ck=Object.getOwnPropertyDescriptors,lk=Object.getOwnPropertySymbols,dk=Object.prototype.hasOwnProperty,uk=Object.prototype.propertyIsEnumerable,pk=(e,t,r)=>t in e?ak(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mk=(e,t)=>{for(var r in t||(t={}))dk.call(t,r)&&pk(e,r,t[r]);if(lk)for(var r of lk(t))uk.call(t,r)&&pk(e,r,t[r]);return e},hk=(e,t)=>ok(e,ck(t));const yk={dispatchMakeDecision:cC.gN,dispatchRemoveDecision:cC.E8,dispatchShowAlert:BD._K};class gk extends i.Component{constructor(e,t){super(e,t),((e,t,r)=>{pk(this,t+"",r)})(0,"onSubtitlesError",(()=>{const{playQueueItemEntityID:e,playerType:t,positionMilliseconds:r,qualityIndex:n,decisionMediaIndex:i,decisionPartIndex:s,decisionUseSidecarSrtSubtitles:a,dispatchMakeDecision:o,dispatchRemoveDecision:c}=this.props;a?this.setState({hasSidecarSrtFailed:!0}):(c({playerType:t,playQueueItemEntityID:e}),o({playerType:t,playQueueItemEntityID:e,qualityIndex:n,mediaIndex:i,partIndex:s,options:{offset:r,subtitlesBurnLevel:HD.c.ALWAYS}}))})),this.state={hasSidecarSrtFailed:!1}}componentDidUpdate(e,t){const{hasSidecarSrtFailed:r}=this.state;r&&r!==t.hasSidecarSrtFailed&&(cu.c.error("[Subtitles] Unrecoverable error processing",this.props.subtitlesUrl),this.props.dispatchShowAlert({type:"error",message:(0,g.c)("There was an unexpected subtitles error")}))}render(){const e=this.props,{subtitlesUrl:t,dispatchMakeDecision:r,dispatchRemoveDecision:n}=e,s=((e,t)=>{var r={};for(var n in e)dk.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&lk)for(var n of lk(e))t.indexOf(n)<0&&uk.call(e,n)&&(r[n]=e[n]);return r})(e,["subtitlesUrl","dispatchMakeDecision","dispatchRemoveDecision"]);return!t||this.state.hasSidecarSrtFailed?null:i.createElement(sk,hk(mk({subtitlesUrl:t},s),{onSubtitlesError:this.onSubtitlesError}))}}const fk=$D(gk),vk=(0,s.Ul)((function(){return(0,At.M3)((0,rO.c)(["isOpen","isMediaLoading","isBuffering","isPaused","hasError","qualityIndex","positionSeconds","lastSeekPositionSeconds"]),Pw(),(0,Sw.c)(),mC(),(0,_n.WI)("selectSubtitleSettings"),((e,t,r,n,i)=>{const s=r.entityID,a=hk(mk(mk({},e),i),{playQueueItemEntityID:s});return t&&(a.decisionMediaIndex=t.mediaIndex,a.decisionPartIndex=t.partIndex,a.decisionUseSidecarSrtSubtitles=t.useSidecarSrtSubtitles,a.subtitlesUrl=t.subtitlesUrl,a.isDirectPlay=t.isDirectPlay),n.selectedSubtitlesStream&&(a.offset=n.selectedSubtitlesStream.offset),a}))}),yk)(fk);var bk=r(83216),Sk=Object.defineProperty,Pk=Object.defineProperties,Ik=Object.getOwnPropertyDescriptors,Ek=Object.getOwnPropertySymbols,wk=Object.prototype.hasOwnProperty,Ck=Object.prototype.propertyIsEnumerable,Ok=(e,t,r)=>t in e?Sk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Mk(e){"Enter"===e.key&&e.nativeEvent.stopImmediatePropagation()}const Tk=(0,hp.c)(bk.c.defaultSpeed),Dk={enter:{opacity:1,duration:Tk},exit:{opacity:0,duration:Tk}},kk=function(e){var t=e,{isHidden:r,isHiddenPolite:n,marker:s,positionSeconds:a,onSeekPress:o}=t,c=((e,t)=>{var r={};for(var n in e)wk.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ek)for(var n of Ek(e))t.indexOf(n)<0&&Ck.call(e,n)&&(r[n]=e[n]);return r})(t,["isHidden","isHiddenPolite","marker","positionSeconds","onSeekPress"]);const l=hD(s),[d,u]=(0,i.useState)(0),{isOpen:p,onOpen:m,onClose:h}=(0,io.c)(),y=(0,i.useRef)(),f=(0,i.useCallback)((e=>{s&&(Mk(e),u(a),o(Math.round(s.endTimeOffset/1e3)))}),[s,o,a]);return(0,i.useEffect)((()=>{const e=1e3*a,t=!s,i=e<(null==s?void 0:s.startTimeOffset),o=e>=(null==s?void 0:s.endTimeOffset),c=d>0,l=(null==s?void 0:s.endTimeOffset)-e<500,u=n&&y.current&&a>=y.current;r||t||i||o||u||c&&l?h():n&&!y.current?y.current=a+10:t||i||o||m()}),[s,r,n,d,a,m,h]),(0,i.useEffect)((()=>()=>{y.current=0,u(0)}),[l]),i.createElement(mp.Iz,null,p&&l?i.createElement(mp.q4.div,{key:l,animate:"enter",exit:"exit",initial:"exit",variants:Dk},i.createElement(sw.c,((e,t)=>Pk(e,Ik(t)))(((e,t)=>{for(var r in t||(t={}))wk.call(t,r)&&Ok(e,r,t[r]);if(Ek)for(var r of Ek(t))Ck.call(t,r)&&Ok(e,r,t[r]);return e})({},c),{autoFocus:"autofocus",onKeyDown:Mk,onKeyUp:Mk,onPress:f,onTouchEnd:Mk,onTouchStart:Mk}),function(e){switch(e.type){case Ew:return(0,g.c)("Skip Ads");case ww:return(0,g.c)("Skip Credits");case Cw:return(0,g.c)("Skip Intro");case"recaps":return(0,g.c)("Skip Recaps")}}(s))):null)};var xk=Object.defineProperty,Ak=Object.defineProperties,Rk=Object.getOwnPropertyDescriptors,Nk=Object.getOwnPropertySymbols,Lk=Object.prototype.hasOwnProperty,jk=Object.prototype.propertyIsEnumerable,Uk=(e,t,r)=>t in e?xk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Fk=(0,s.Ul)((function(){return(0,At.Ex)({positionSeconds:(0,iI.c)("positionSeconds")})}),(function(e,{playerType:t}){return{onSeekPress(r){e(bw.KK({playerType:t,positionSeconds:r}))}}}))((function(e){var t=e,{playerType:r,marker:n,isHidden:s}=t,a=((e,t)=>{var r={};for(var n in e)Lk.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Nk)for(var n of Nk(e))t.indexOf(n)<0&&jk.call(e,n)&&(r[n]=e[n]);return r})(t,["playerType","marker","isHidden"]);return i.createElement(kk,((e,t)=>Ak(e,Rk(t)))(((e,t)=>{for(var r in t||(t={}))Lk.call(t,r)&&Uk(e,r,t[r]);if(Nk)for(var r of Nk(t))jk.call(t,r)&&Uk(e,r,t[r]);return e})({},a),{isHidden:s,marker:n}))}));var Vk=r(97412),_k=r(43880),Wk=r(8212),Bk=r(48168),Hk=r(4416);function zk(e){const{title:t,attribution:r,route:n,sourceTitle:s}=e;return i.createElement(Hk.c,{className:"MetadataHubCellHeader-title-DZp8lw HubCellTitle-hubCellTitle-vtmWL9"},r?i.createElement(Bk.c,{attribution:r,className:"MetadataHubCellHeader-attribution-xYcGBg"}):null,n?i.createElement(bp.c,{to:n},t):t,s?i.createElement(uM.c,{className:"MetadataHubCellHeader-titleSeparator-PicVTv DashSeparator-separator-_3fMys"}):null,s?i.createElement("span",{className:"MetadataHubCellHeader-sourceTitle-J2ISh2"},s):null)}var Gk=r(26540);const qk="HubCell-hubScrollButton-bSxOcb";var Kk=Object.defineProperty,Qk=(e,t,r)=>(((e,t,r)=>{t in e?Kk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class $k extends i.Component{constructor(e,t){super(e,t),Qk(this,"_isReady"),Qk(this,"_listRef"),Qk(this,"_pageSize"),Qk(this,"_visibleEndIndex"),Qk(this,"_visibleStartIndex"),Qk(this,"onListUpdate",(e=>{const{visibleStartIndex:t,visibleEndIndex:r,renderEndIndex:n,listStyle:i}=e,{onListReady:s}=this.props,a=this._isReady?void 0:s;this._isReady=!0,this._visibleStartIndex=t,this._visibleEndIndex=r,this._pageSize=this._visibleEndIndex-this._visibleStartIndex;const o=t>0,c=n>r;this.setState({showActions:o||c,enablePrevious:o,enableNext:c,listHeight:i.height},a)})),Qk(this,"onListScrollIndexChange",(e=>{this._setScrollIndex(e)})),Qk(this,"onPreviousPress",(()=>{this._setScrollIndex(this._visibleStartIndex-this._pageSize-1)})),Qk(this,"onNextPress",(()=>{this._setScrollIndex(this._visibleEndIndex+1)})),this.state={showActions:!1,enablePrevious:!1,enableNext:!1,listHeight:"auto",scrollIndex:this.props.scrollIndex||0},this._isReady=!1,this._listRef=i.createRef()}static getDerivedStateFromProps(e,t){return null!=e.scrollIndex&&e.scrollIndex!==t.scrollIndex?{scrollIndex:e.scrollIndex}:null}componentDidMount(){this.props.more&&!this.props.totalSize&&this.props.onPageRequest({startIndex:0,endIndex:this.props.size||1}),this.props.more||this.props.size||this.props.totalSize||(this._isReady=!0,this.props.onListReady&&this.props.onListReady())}shouldComponentUpdate(e,t){return(0,cy.c)(this,e,t)}componentDidUpdate(e){this._isReady||!e.isPending||this.props.isPending||(this._isReady=!0,this.props.onListReady&&this.props.onListReady())}_setScrollIndex(e){this.props.onListScrollIndexChange&&this.props.onListScrollIndexChange(e),null==this.props.scrollIndex&&this.setState({scrollIndex:e})}render(){const{className:e,hubIdentifier:t,title:r,style:n,sourceTitle:s,attribution:a,route:o,scrollDirection:c,size:l,more:d,random:u,totalSize:p,keyPropName:m,itemsOffset:h,items:y,layout:f,cellRenderer:v,resizeTimeout:b,onPageRequest:S}=this.props,{showActions:P,enablePrevious:I,enableNext:E,listHeight:w}=this.state;if(!l&&!p)return null;const C=u?l:p||(d?l+1:l),O={visibility:"auto"===w?"hidden":"visible"},M={height:w,overflow:"hidden"},T=n!==Vk.mY;return i.createElement("div",{className:e,"data-testid":"hub--"+t,style:O},T?i.createElement(Gk.c,{className:"HubCell-hubCellHeader-IRMxnP HubCellHeader-hubCellHeader-QcXKFB"},i.createElement(zk,{attribution:a,route:o,sourceTitle:s,title:r}),P?i.createElement("div",{className:"HubCell-hubActions-vNaGig"},i.createElement(sh.c,{className:qk,"data-testid":"hubPreviousButton",iconComponent:Xh.default,isDisabled:!I,title:(0,g.c)("Previous Page"),onPress:this.onPreviousPress}),i.createElement(sh.c,{className:qk,"data-testid":"hubNextButton",iconComponent:Yh.default,isDisabled:!E,title:(0,g.c)("Next Page"),onPress:this.onNextPress})):null):null,i.createElement("div",{style:M},i.createElement(_k.c,{ref:this._listRef,cellRenderer:v,ignoreHeight:!0,items:y,itemsOffset:h,keyPropName:m,layout:f,resizeTimeout:b,scrollDirection:c,scrollIndex:this.state.scrollIndex,scrollerClassName:"HubCell-hubScroller-BP5BGe VirtualListScroller-scroller-eDZkq_",shouldCenterScrollIndex:this.props.shouldCenterScrollIndex,size:Math.min(1e4,C),onListScrollIndexChange:this.onListScrollIndexChange,onListUpdate:this.onListUpdate,onPageRequest:S})))}}Qk($k,"defaultProps",{className:"HubCell-hubCell-bbBxQT",shouldCenterScrollIndex:!1,scrollDirection:Wk.uw});const Yk=$k;var Xk=Object.defineProperty,Jk=(e,t,r)=>(((e,t,r)=>{t in e?Xk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const Zk=parseInt(R.c.playerControlsHeight,10);class ex extends i.Component{constructor(){super(...arguments),Jk(this,"onMeasure",(e=>{this.props.onDimensionsChange&&this.props.onDimensionsChange(e)}))}render(){const{className:e,bottom:t,children:r}=this.props;return i.createElement(Fp.c,{className:e,ignorePosition:!0,ignoreWidth:!0,style:{bottom:t},onMeasure:this.onMeasure},r)}}Jk(ex,"defaultProps",{className:"AudioVideoStripeContainer-container-Pz3oFW",bottom:Zk});const tx=ex;var rx=r(55268),nx=r(13120),ix=r(57928),sx=r(65316),ax=r(85612),ox=r(49852),cx=Object.defineProperty,lx=Object.defineProperties,dx=Object.getOwnPropertyDescriptors,ux=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,mx=Object.prototype.propertyIsEnumerable,hx=(e,t,r)=>t in e?cx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yx=(e,t)=>{for(var r in t||(t={}))px.call(t,r)&&hx(e,r,t[r]);if(ux)for(var r of ux(t))mx.call(t,r)&&hx(e,r,t[r]);return e},gx=(e,t)=>lx(e,dx(t));const fx=(0,ox.u2)(Uw.MOVIE,ax.KW),vx=2*(parseInt(R.c.posterTitleHeight,10)+parseInt(R.c.posterTitlePadding,10));function bx(e){return e-vx}const Sx=(0,i.memo)((function(e){const{serverEntityID:t,index:r,thumb:n,tag:s,isActive:a,startTimeOffset:o,cellWidth:c,cellHeight:l,onSeekTo:d}=e,u=(0,rx.c)(e),p=(0,i.useCallback)((()=>{const e=Math.round(o/1e3);d(e)}),[o,d]),m=r;return i.createElement("div",{style:u.style},i.createElement(bp.c,{className:jt()("VideoChapterCell-thumbWrapper-N0G90v",a&&"VideoChapterCell-isActive-mPEd2f"),onPress:p},i.createElement(fi.c,{key:m,backgroundSize:"contain",component:si.c,height:bx(l),serverEntityID:t,url:n,width:c})),i.createElement("div",{className:"VideoChapterCell-titleContainer-mFa0s0"},i.createElement("div",{className:"VideoChapterCell-title-Lzujh2"},function(e,t){return t||(0,g.c)("Chapter {index}",{index:e})}(r,s)),i.createElement("div",{className:"VideoChapterCell-secondaryTitle-qUtvKy"},(0,dM.c)(o))))}));var Px=r(4968);var Ix=Object.defineProperty,Ex=Object.defineProperties,wx=Object.getOwnPropertyDescriptors,Cx=Object.getOwnPropertySymbols,Ox=Object.prototype.hasOwnProperty,Mx=Object.prototype.propertyIsEnumerable,Tx=(e,t,r)=>t in e?Ix(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Dx=(0,nx.cp)({direction:nx.uw,rows:1,overscan:0,innerHorizontalPadding:30,outerPaddingTop:10,outerPaddingLeft:5,outerPaddingRight:5,getCellWidth:e=>(0,sx.c)(gx(yx({},e),{minCellWidth:135,preferredCellWidth:180,minColumns:2,maxColumns:11,aspectRatio:fx})),getCellHeight:e=>(0,ix.c)(gx(yx({},e),{aspectRatio:fx,titleHeight:vx}))});class kx extends i.Component{constructor(e,t){super(e,t),((e,t,r)=>{Tx(this,t+"",r)})(0,"onHubCellScrollIndexChange",(e=>{this.setState({scrollIndex:e,scrollIndexIsActiveChapter:!1})})),this.state={scrollIndex:this.props.activeChapterIndex,scrollIndexIsActiveChapter:!0,activeChapterIndex:this.props.activeChapterIndex}}static getDerivedStateFromProps(e,t){return t.activeChapterIndex!==e.activeChapterIndex?{scrollIndex:e.activeChapterIndex,scrollIndexIsActiveChapter:!0,activeChapterIndex:e.activeChapterIndex}:null}render(){const{serverEntityID:e,bottom:t,activeChapterIndex:r,chapters:n,onSeekTo:s}=this.props;return i.createElement(tx,{bottom:t,className:"VideoChapters-container-F7xaPX AudioVideoStripeContainer-container-Pz3oFW"},i.createElement(Yk,{cellRenderer:(0,Px.c)({serverEntityID:e,onSeekTo:s},Sx),hubIdentifier:"chapters",items:n.map(((e,t)=>((e,t)=>Ex(e,wx(t)))(((e,t)=>{for(var r in t||(t={}))Ox.call(t,r)&&Tx(e,r,t[r]);if(Cx)for(var r of Cx(t))Mx.call(t,r)&&Tx(e,r,t[r]);return e})({},e),{isActive:t===r}))),keyPropName:"index",layout:Dx,scrollIndex:this.state.scrollIndex,shouldCenterScrollIndex:this.state.scrollIndexIsActiveChapter,size:n.length,title:(0,g.c)("Chapter selection"),onListScrollIndexChange:this.onHubCellScrollIndexChange}))}}const xx=kx,Ax=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,Ow.c)(),(0,At.M3)((0,iI.c)("positionSeconds"),xw(),((e,t)=>t&&t.chapters?t.chapters.findIndex((t=>Math.floor(t.startTimeOffset/1e3)<=e&&Math.floor(t.endTimeOffset/1e3)>e)):-1)),((e,t,r)=>({serverEntityID:e.serverEntityID,chapters:t.chapters,activeChapterIndex:r})))}),(function(e,{playerType:t}){return{onSeekTo(r){e(bw.KK({playerType:t,positionSeconds:r}))}}}))(xx);var Rx=r(93592),Nx=r(72596);var Lx=r(87840);var jx=Object.defineProperty,Ux=Object.defineProperties,Fx=Object.getOwnPropertyDescriptors,Vx=Object.getOwnPropertySymbols,_x=Object.prototype.hasOwnProperty,Wx=Object.prototype.propertyIsEnumerable,Bx=(e,t,r)=>t in e?jx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Hx(e){const t=e,{className:r,isPrimary:n}=t,s=((e,t)=>{var r={};for(var n in e)_x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Vx)for(var n of Vx(e))t.indexOf(n)<0&&Wx.call(e,n)&&(r[n]=e[n]);return r})(t,["className","isPrimary"]);return i.createElement(sh.c,((e,t)=>Ux(e,Fx(t)))(((e,t)=>{for(var r in t||(t={}))_x.call(t,r)&&Bx(e,r,t[r]);if(Vx)for(var r of Vx(t))Wx.call(t,r)&&Bx(e,r,t[r]);return e})({},s),{className:jt()(r,n&&"PlayerIconButton-isPrimary-VXE1Uo")}))}Hx.defaultProps={className:"PlayerIconButton-playerButton-zDmEsI IconButton-button-s4bVCh"};const zx=Hx,Gx=(0,At.M3)(XP.c,(e=>e?e.product:null)),qx=(0,At.M3)(XO,Gx,(0,At.M3)(gI,cI,oI(),(0,iI.c)("isWatchTogether"),(0,At.M3)((0,Nx.c)(),(e=>null==e?void 0:e.type)),eI.c,((e,t,r,n,i,s)=>{const a=t===tI.qE&&(0,nI.c)({protocol:rI.y,providerIdentifier:r,userFeaturesByUUID:s,isWatchTogether:n,playQueueType:i}),o=e.some((({protocol:e,protocolCapabilities:t})=>(0,nI.c)({protocol:e,protocolCapabilities:t,providerIdentifier:r,userFeaturesByUUID:s,isWatchTogether:n,playQueueType:i})));return a||o})),((e,t,r)=>({remotePlayerName:e,remotePlayerProduct:t,showRemotePlayer:r}))),Kx=(0,s.Ul)(qx,(function(e,t){const r={playerType:t.playerType};return{onCollapsePress(t){e((0,Rx.QP)(r))}}}))((function(e){const{playerType:t,showRemotePlayer:r,hasFullscreen:n,isFullscreen:s,remotePlayerName:o,remotePlayerProduct:c,onCollapsePress:l,onCastMenuChange:d,onEnterFullscreenPress:u,onExitFullscreenPress:p}=e,m=(0,a.IT)(),y=(0,yl.c)(m);return(0,i.useEffect)((()=>{y&&m!==y&&!(0,a.ot)(y.pathname,{path:Zr.c.watchNow,exact:!0})&&l()}),[m,y,l]),i.createElement("div",{className:"FullPlayerTopControls-topControls-Fp11QH"},i.createElement("div",null,i.createElement(zx,{"data-testid":"minimizePlayerButton",iconComponent:Lx.default,title:(0,g.c)("Minimize Player"),onPress:l}),o?i.createElement("span",{className:"FullPlayerTopControls-remotePlayerName-R4f2zN"},(0,g.c)("Casting to {playerName}",{playerName:o})):null,o&&c?i.createElement("span",{className:"FullPlayerTopControls-remotePlayerProduct-bHCcxi"},"(",c,")"):null),i.createElement(h.YR,{gap:"s",verticalAlign:"center"},r?i.createElement(zI,{buttonType:"player",playerType:t,onMenuChange:d}):null,n&&s?i.createElement(zx,{"data-testid":"windowedButton",iconComponent:Db.default,title:(0,g.c)("Exit Fullscreen"),onPress:p}):null,n&&!s?i.createElement(zx,{"data-testid":"fullscreenButton",iconComponent:kb.default,title:(0,g.c)("Enter Fullscreen"),onPress:u}):null))}));var Qx=Object.defineProperty,$x=(e,t,r)=>(((e,t,r)=>{t in e?Qx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Yx extends i.Component{constructor(e,t){super(e,t),$x(this,"_playPauseTimeoutID"),$x(this,"onPress",(e=>{this._cancelPlayPause(),this.setState((({isPaused:e})=>({isPaused:!e}))),this._playPauseTimeoutID=window.setTimeout((()=>{this._playPauseTimeoutID=null,this.props.isPaused!==this.state.isPaused&&this.props.onTogglePlayPress(e)}),175)})),$x(this,"onDoubleClick",(e=>{this.props.onToggleFullscreen()})),this.state={isPaused:e.isPaused},this._playPauseTimeoutID=null}UNSAFE_componentWillReceiveProps(e){e.isPaused===this.state.isPaused||this._playPauseTimeoutID||this.setState({isPaused:e.isPaused})}componentWillUnmount(){this._cancelPlayPause()}_cancelPlayPause(){this._playPauseTimeoutID&&(window.clearTimeout(this._playPauseTimeoutID),this._playPauseTimeoutID=null)}render(){const{className:e,isCursorHidden:t}=this.props;return i.createElement("div",{className:jt()(e,"PlayPauseOverlay-overlay-lF71cy",t&&"PlayPauseOverlay-hiddenCursor-GpErBJ"),onClick:this.onPress,onDoubleClick:this.onDoubleClick})}}$x(Yx,"defaultProps",{isCursorHidden:!1});const Xx=Yx,Jx=(0,s.Ul)((function(){return(0,At.Ex)({isPaused:(0,iI.c)("isPaused")})}),(function(e,t){const r={playerType:t.playerType};return{onTogglePlayPress(t){e((0,bw.Cu)(r))}}}))(Xx);var Zx=r(90044),eA=r(39920);const tA=(0,At.M3)(sp.c,(e=>e.audioDevices||[])),rA=(0,At.M3)(tA,(e=>e.filter((e=>e.present)))),nA=(0,At.M3)(tA,sp.c,((e,t)=>e.find((e=>e.name===t["player.audioDevice"]))));var iA=r(83620),sA=r(29016),aA=r(52432),oA=r(2540),cA=r(33316),lA=Object.defineProperty,dA=Object.getOwnPropertySymbols,uA=Object.prototype.hasOwnProperty,pA=Object.prototype.propertyIsEnumerable,mA=(e,t,r)=>t in e?lA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hA=(e,t,r)=>(mA(e,"symbol"!=typeof t?t+"":t,r),r);class yA extends i.Component{constructor(e,t){super(e,t),hA(this,"_menuInputButtonID"),hA(this,"onToggleMenuPress",(e=>{this.setState({isMenuOpen:!this.state.isMenuOpen})})),hA(this,"onMenuClose",(e=>{this.setState({isMenuOpen:!1})})),hA(this,"onSelectPress",(e=>t=>{this.props.onChange(e),this.onMenuClose()})),this.state={isMenuOpen:!1},this._menuInputButtonID=(0,tk.c)()}getSelectedValue(e,t){const r=Qy().find(e,(e=>{if(Qy().isString(e))return e===t;const[r]=Qy().keys(e);return r===t}));if(Qy().isString(r))return r;const[n]=Qy().keys(r);return null==r?void 0:r[n]}render(){const e=this.props,{name:t,size:r,kind:n,value:s,values:a,overrideSelectedValue:o}=e,c=((e,t)=>{var r={};for(var n in e)uA.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&dA)for(var n of dA(e))t.indexOf(n)<0&&pA.call(e,n)&&(r[n]=e[n]);return r})(e,["name","size","kind","value","values","overrideSelectedValue"]),l=this.getSelectedValue(a,s);return null==l?null:i.createElement(aA.c,{direction:this.state.isMenuOpen?oA.UP:oA.aK,id:this._menuInputButtonID,kind:n,size:r,onPress:this.onToggleMenuPress},o||l,i.createElement(go.c,((e,t)=>{for(var r in t||(t={}))uA.call(t,r)&&mA(e,r,t[r]);if(dA)for(var r of dA(t))pA.call(t,r)&&mA(e,r,t[r]);return e})({isOpen:this.state.isMenuOpen,target:this._menuInputButtonID,onMenuClose:this.onMenuClose},c),a.map((e=>{if(Qy().isString(e))return i.createElement(cA.c,{key:e,isSelected:e===s,onPress:this.onSelectPress(e)},e);const[t]=Qy().keys(e);return i.createElement(cA.c,{key:t,isSelected:t===s,onPress:this.onSelectPress(t)},e[t])}))))}}const gA=yA,fA=function(e){const{bottom:t,children:r,title:n=(0,g.c)("Playback Settings"),onDimensionsChange:s}=e;return i.createElement(tx,{bottom:t,className:"AudioVideoPlaybackSettings-container-BiWMYV AudioVideoStripeContainer-container-Pz3oFW",onDimensionsChange:s},i.createElement("div",{className:"AudioVideoPlaybackSettings-title-UOBMcN"},n),i.createElement("div",{className:"AudioVideoPlaybackSettings-menusContainer-Xi40Bt","data-testid":"playbackSettingsContainer"},r))};function vA({className:e,label:t,children:r,isDisabled:n}){return i.createElement("div",{className:jt()(e,n&&"AudioVideoSettingsRow-isDisabled-icmrw6")},i.createElement("div",{className:"AudioVideoSettingsRow-label-KyxW_F AudioVideoSettingsRow-cell-Vk7CGy"},t),i.createElement("div",{className:"AudioVideoSettingsRow-cell-Vk7CGy"},r))}vA.defaultProps={className:"AudioVideoSettingsRow-row-thlbfp"};const bA=vA;var SA=r(99424);var PA=Object.defineProperty,IA=(e,t,r)=>(((e,t,r)=>{t in e?PA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class EA extends i.Component{constructor(e,t){super(e,t),IA(this,"onPlaybackSpeedChange",(({positionValue:e})=>{this.setState({playbackSpeed:e},(()=>{this.props.onPlaybackSpeedChange(e)}))})),this.state={playbackSpeed:e.playbackSpeed}}UNSAFE_componentWillReceiveProps(e){e.playbackSpeed!==this.props.playbackSpeed&&this.setState({playbackSpeed:e.playbackSpeed})}render(){const{audioDevices:e,bottom:t,canSetPlaybackSpeed:r,playbackSpeed:n,playbackSpeedSetting:s,selectedAudioDevice:a,onAudioDeviceChange:o,onDimensionsChange:c}=this.props;return i.createElement(fA,{bottom:t,onDimensionsChange:c},r?i.createElement(bA,{label:(0,g.c)("Playback Speed")},i.createElement(sA.c,{className:"AudioSettings-slider-sGEpW3 Slider-slider-YdLxcK",max:s.max,min:s.min,stepSize:s.step,value:this.state.playbackSpeed,onChange:this.onPlaybackSpeedChange}),(0,SA.Q)(n)):null,(null==e?void 0:e.length)>1?i.createElement(bA,{label:(0,g.c)("Audio Device")},i.createElement(gA,{name:"audioDevice",size:Pp.IF,value:a.name,values:e.map((e=>({[e.name]:(0,iA.c)(e)}))),onChange:o})):null)}}IA(EA,"defaultProps",{playbackSpeedSetting:{min:.5,max:2,step:.1}});const wA=EA,CA=(0,th.c)((function(){return(0,At.M3)((0,iI.c)("controllable"),rC(),(0,At.M3)(sI(),(e=>{if(!e)return;const t=Qy().findWhere(e.features,{type:Zx.c.SETTINGS});return t&&Qy().findWhere(t.settings,{id:eA.s})||void 0})),rA,nA,((e,t,r,n,i)=>({audioDevices:n,selectedAudioDevice:i,canSetPlaybackSpeed:!e||!!e.playbackSpeed,playbackSpeed:t,playbackSpeedSetting:r})))}),(function(e,t){const{playerType:r}=t;return{onAudioDeviceChange(t){e((0,f.gj)({deviceName:t}))},onPlaybackSpeedChange(t){e(bw.SM({playerType:r,playbackSpeed:t}))}}}))(wA);function OA(e){return i.createElement("div",{className:e.className},e.children)}OA.defaultProps={className:"BottomBar-bottomBar-hnsKzI"};const MA=OA;function TA(e){return i.createElement("div",{className:e.className},e.children)}TA.defaultProps={className:"ControlsContainer-controlsContainer-txiwBZ"};const DA=TA;var kA=r(62796),xA=r(30388),AA=Object.defineProperty,RA=Object.defineProperties,NA=Object.getOwnPropertyDescriptors,LA=Object.getOwnPropertySymbols,jA=Object.prototype.hasOwnProperty,UA=Object.prototype.propertyIsEnumerable,FA=(e,t,r)=>t in e?AA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,VA=(e,t)=>{for(var r in t||(t={}))jA.call(t,r)&&FA(e,r,t[r]);if(LA)for(var r of LA(t))UA.call(t,r)&&FA(e,r,t[r]);return e},_A=(e,t)=>RA(e,NA(t)),WA=(e,t,r)=>(FA(e,"symbol"!=typeof t?t+"":t,r),r);class BA extends i.Component{constructor(e,t){super(e,t),WA(this,"_lastVolume"),WA(this,"onVolumeChange",(e=>{const{volume:t}=this.state,r=Math.round(Math.min(100,Math.max(0,t+e)));t!==r&&this.setState({volume:r},(()=>{this.props.onVolumeChange(this.state.volume)}))})),WA(this,"onVolumeIconPress",(()=>{const e=this.state.volume>0;e&&(this._lastVolume=this.state.volume),this.setState({volume:e?0:this._lastVolume||100},(()=>{this.props.onVolumeChange(this.state.volume)}))})),this.state={volume:e.volume}}UNSAFE_componentWillReceiveProps({volume:e}){e!==this.state.volume&&this.setState({volume:e})}render(){const{component:e}=this.props;return i.createElement(e,_A(VA(VA({},this.props),this.state),{onVolumeChange:this.onVolumeChange,onVolumeIconPress:this.onVolumeIconPress}))}}const HA=(0,s.Ul)((function(){return(0,At.M3)(((e,{isWatchTogether:t})=>t),(0,Nw.c)(),(0,Sw.c)(),nC.c,((e,t,r,n)=>{const i=t.controllable,s=t.playQueue,a=s.currentIndex;let o,c,l;return i?(c=!i.skipNext,o=!i.skipPrevious,l=!i.shuffle):(c=!t.repeatAll&&a>=t.playQueue.playQueueItems.length-1,o=!t.repeatAll&&a<=0&&t.positionSeconds<=kA.WM,l=!s.canShuffle),{metadataItemEntityID:r.metadataItem,providerEntityID:t.providerEntityID,serverEntityID:t.serverEntityID,volume:n,activateChaptersButton:t.isChaptersVisible,activateLyricsButton:t.isLyricsVisible,activateQueueButton:t.isPlayQueueVisible,activateRepeatButton:t.repeatAll,activateRepeatOneButton:t.repeatOne,activateSettingsButton:t.isSettingsVisible,activateWatchTogetherParticipantsButton:t.isWatchTogetherParticipantsVisible,activateShuffleButton:s.playQueueShuffled,disableNextButton:c,disablePauseButton:!!i&&!i.playPause,disablePlayButton:!!i&&!i.playPause,disablePreviousButton:o,disableRepeatButton:!!i&&!i.repeat,disableRepeatOneButton:!!i&&!i.repeat,disableShuffleButton:l,disableSkipBackButton:!!i&&!i.seekTo,disableSkipForwardButton:!!i&&!i.seekTo,showCloseButton:!0,showNextButton:!e,showPauseButton:!t.isPaused,showPlayButton:t.isPaused,showPreviousButton:!e,showRepeatButton:!t.repeatOne&&!e,showRepeatOneButton:t.repeatOne&&!e,showVolume:!i||i.volume}}))}),(function(e,t){const{playerType:r,metadataType:n}=t,i={playerType:r,metadataType:n};return{onEditPress(t){e(xA.W_(t))},onFavoritePress(t){e(xA.Sc(t))},onUnfavoritePress(t){e(xA.is(t))},onRepeatPress(){e(oC.w1(i))},onRepeatOnePress(){e(oC.w1(i))},onPreviousPress(){e(oC.oH(i))},onNextPress(){e(oC.Ax(i))},onShufflePress(){e(oC.G6(i))},onQueuePress(){e(oC._W(i))},onLyricsPress(){e(oC.ui(i))},onSkipBackPress(){e(bw.iu(i))},onPlayPress(){e(bw.Eb(i))},onPausePress(){e(bw.U$(i))},onSkipForwardPress(){e(bw.EP(i))},onSettingsPress(){e(bw.sR(i))},onWatchTogetherParticipantsPress(){e(bw.W4(i))},onChaptersPress(){e(bw.oJ(i))},onVolumeChange(t){e(bw.eU(_A(VA({},i),{volume:t})))},onClosePress(){e(Wn.WS(i))}}}),(function(e,t,r){const{metadataItemEntityID:n,providerEntityID:i}=e;return _A(VA(VA(VA({},r),e),t),{onEditPress(){t.onPausePress(),t.onEditPress({metadataItemEntityID:n})},onFavoritePress(){t.onFavoritePress({metadataItemEntityID:n,providerEntityID:i})},onUnfavoritePress(){t.onUnfavoritePress({metadataItemEntityID:n,providerEntityID:i})}})}))(BA);function zA(e){const{className:t,children:r}=e;return i.createElement("div",{className:t},r)}zA.defaultProps={className:"AudioVideoInfoBar-container-pMB8ou"};const GA=zA,qA=function(e){const{className:t}=e;return i.createElement(GA,{className:t},i.createElement("div",{className:"AdInfoBar-message-MipuJf"},(0,g.c)("Video will play after this advertisement")))};var KA=r(61636),QA=r(15808),$A=r(82235),YA=r(69080),XA=r(57760),JA=r(9384),ZA=r(90816),eR=r(52888),tR=r(40828),rR=r(28820),nR=r(72524),iR=r(45676),sR=r(29307),aR=r(24644),oR=r(53284),cR=r(64688),lR=r(79528),dR=r(60024),uR=r(64592),pR=r(81808),mR=r(82432),hR=r(72788),yR=Object.defineProperty,gR=(e,t,r)=>(((e,t,r)=>{t in e?yR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class fR extends i.Component{constructor(e,t){super(e,t),gR(this,"onTogglePress",(()=>{this.setState((e=>({isToggled:!e.isToggled})))})),this.state={isToggled:!1}}render(){const{className:e,durationSeconds:t,positionSeconds:r}=this.props,n=1e3*r,s=1e3*t,a=s-n;return i.createElement(bp.c,{className:e,"data-testid":"mediaDuration",onPress:this.onTogglePress},this.state.isToggled?`-${(0,dM.c)(a)}`:(0,dM.c)(n)," / ",(0,dM.c)(s))}}gR(fR,"defaultProps",{className:"DurationRemaining-container-kNC4qp"});const vR=fR;var bR=r(2344);function SR(e){const{isTidal:t,isPreview:r,isLossless:n}=e,s=!t||!r&&!n;return i.createElement("div",{className:jt()(e.className,s&&"MediaInfo-hidden-N07ayS")},i.createElement("span",{className:"MediaInfo-info-EtfOCX"},r?(0,g.c)("TIDAL Preview"):"HI-FI"))}SR.defaultProps={className:"MediaInfo-infoContainer-atbj39"};const PR=SR,IR=(0,s.Ul)((function(){return(0,At.M3)(Pw(),(0,pT.c)(),((e,t)=>{if(!t)return{isTidal:!1,isPreview:!1,isLossless:!1};const r=t.Media[e?e.mediaIndex:0],n=!!r&&"flac"===r.audioCodec;return{isTidal:t.attribution===bR.WQ,isPreview:!!t.preview,isLossless:n}}))}))(PR);var ER=r(59476);function wR(e){const{className:t,playerType:r,serverEntityID:n,providerEntityID:s,metadataItemEntityID:a,type:o,subtype:c,positionSeconds:l,context:d,showStarRating:u,hasUserRating:p,isUnknownAiring:m,showDuration:h,durationSeconds:y}=e;if(m)return i.createElement("div",{className:t},(0,g.c)("Unknown Airing"));if(!a||!o)return null;const f=(0,ER.c)(o,d,{subtype:c,providerEntityID:s});return i.createElement("div",{className:jt()(t,u&&p&&"PlayerControlsMetadata-hasUserRating-DpOEAa")},f.map(((e,t)=>i.createElement(mR.c,{key:t,component:e,isSecondary:t>0,metadataItemEntityID:a,playerType:r,positionSeconds:l,providerEntityID:s,serverEntityID:n}))),h&&y&&null!=l?i.createElement(vR,{className:"PlayerControlsMetadata-durationContainer-Vee1CO DurationRemaining-container-kNC4qp","data-testid":"mediaDuration",durationSeconds:y,positionSeconds:l}):null,i.createElement(IR,{className:"PlayerControlsMetadata-mediaInfoContainer-VGTEUw MediaInfo-infoContainer-atbj39",metadataItemEntityID:a,playerType:r}),u?i.createElement(hR.c,{className:"PlayerControlsMetadata-ratingContainer-jI3BZZ",metadataItemEntityID:a,providerEntityID:s,serverEntityID:n}):null)}wR.defaultProps={className:"PlayerControlsMetadata-container-aTRKIG"};const CR=wR;var OR=Object.defineProperty,MR=Object.defineProperties,TR=Object.getOwnPropertyDescriptors,DR=Object.getOwnPropertySymbols,kR=Object.prototype.hasOwnProperty,xR=Object.prototype.propertyIsEnumerable,AR=(e,t,r)=>t in e?OR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const RR=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,pT.c)(),((e,t={})=>({serverEntityID:t.serverEntityID||e.serverEntityID,providerEntityID:t.providerEntityID||e.providerEntityID,type:t.type,subtype:t.subtype,context:ax.KW,hasUserRating:null!=t.userRating})))}))(CR);RR.propTypes=((e,t)=>MR(e,TR(t)))(((e,t)=>{for(var r in t||(t={}))kR.call(t,r)&&AR(e,r,t[r]);if(DR)for(var r of DR(t))xR.call(t,r)&&AR(e,r,t[r]);return e})({},RR.propTypes),{metadataItemEntityID:vw().string,playerType:vw().string.isRequired});const NR=RR;var LR=Object.defineProperty,jR=Object.defineProperties,UR=Object.getOwnPropertyDescriptors,FR=Object.getOwnPropertySymbols,VR=Object.prototype.hasOwnProperty,_R=Object.prototype.propertyIsEnumerable,WR=(e,t,r)=>t in e?LR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const BR=(0,s.Ul)((function(){return(0,At.M3)((0,hC.c)(),(e=>({metadataItemEntityID:e&&e.entityID,isUnknownAiring:!e})))}))(NR);BR.propTypes=((e,t)=>jR(e,UR(t)))(((e,t)=>{for(var r in t||(t={}))VR.call(t,r)&&WR(e,r,t[r]);if(FR)for(var r of FR(t))_R.call(t,r)&&WR(e,r,t[r]);return e})({},BR.propTypes),{playerType:vw().string.isRequired});const HR=BR;var zR=r(78112),GR=r(70168),qR=r(6744),KR=r(47312),QR=r(43788);const $R=parseInt(R.c.playerIconButtonSize,10),YR=(0,s.Ul)((function(){return(0,At.M3)((0,GR.c)(),(e=>({isRecording:!!e,recordingProgress:e&&e.progress})))}))((function(e){const{isRecording:t,recordingProgress:r,onPress:n}=e;return i.createElement("div",{className:"LiveTVRecordButton-recordButton-kCfW0A"},i.createElement(zx,{"data-testid":"recordButton",iconComponent:t?qR.default:KR.default,title:(0,g.c)("Record"),onPress:n}),t?i.createElement(QR.c,{backgroundClassName:"LiveTVRecordButton-recordingProgressBackground-t1imWc CircularProgressBar-circularProgressBarBackground-BcC4L1 CircularProgressBar-circularProgressBarBackground-Bw4kwM",containerClassName:"LiveTVRecordButton-recordingProgressBarContainer-PUe0Mp CircularProgressBar-absoluteCenterCircularProgressBarContainer-Fv3RhV",lineWidth:2,progress:r,showProgressText:!1,size:$R}):null)}));var XR=Object.defineProperty,JR=(e,t,r)=>(((e,t,r)=>{t in e?XR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class ZR extends i.Component{constructor(e,t){super(e,t),JR(this,"onRecordPress",(e=>{this.setState({isSubscribeModalOpen:!0})})),JR(this,"onSubscribeModalClose",(()=>{this.setState({isSubscribeModalOpen:!1})})),this.state={isSubscribeModalOpen:!1}}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,type:n}=this.props;return r&&n?i.createElement("div",{className:"LiveTVRecord-recordButtonContainer-QBdsKK"},i.createElement(YR,{metadataItemEntityID:r,serverEntityID:e,type:n,onPress:this.onRecordPress}),i.createElement(zR.c,{isOpen:this.state.isSubscribeModalOpen,metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,subscriptionType:n,onModalClose:this.onSubscribeModalClose})):null}}const eN=ZR,tN=(0,s.Ul)((function(){return(0,At.M3)(NO(),((e={})=>{const{entityID:t,type:r}=e;return{metadataItemEntityID:t,type:r}}))}))(eN);var rN=r(78727),nN=r(854);function iN(e){const{className:t,cardClassName:r,serverEntityID:n,providerEntityID:s,metadataItemEntityID:a,metadataKey:o,type:c,disableExpandButton:l,imageWidth:d,imageHeight:u,imageUrl:p,isMusic:m,onExpandPress:h}=e,y=m?"music":o;return i.createElement("div",{className:t,style:{width:d}},i.createElement("div",{className:"MiniPlayerPoster-cardContainer-mj9sr4"},i.createElement(zx,{className:"MiniPlayerPoster-expandButton-FhcQi0 PlayerIconButton-playerButton-zDmEsI IconButton-button-s4bVCh","data-testid":"expandPlayerButton",iconComponent:rN.default,isDisabled:l,title:(0,g.c)("Expand Player"),onPress:h}),i.createElement(nN.c,{cardClassName:r,imageHeight:u,imageUrl:p,imageWidth:d,metadataItemEntityID:a,metadataKey:y,providerEntityID:s,serverEntityID:n,showLinkOnly:!0,showOverlay:!1,type:c})))}iN.defaultProps={className:"MiniPlayerPoster-miniPlayerPoster-E1ScB7",cardClassName:"MiniPlayerPoster-card-y4FtsU MetadataPosterCard-card-NZOemZ"};const sN=iN,aN=parseInt(R.c.playerControlsPosterHeight,10),oN=(0,s.Ul)((function(){return(0,At.M3)(xw(),(e=>{const t=ax.KW,r=(0,OT.c)(null,aN,e.type,e,t);return{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:e.entityID,type:e.type,metadataKey:e.key,imageWidth:r.width,imageHeight:r.height,imageUrl:r.url}}))}),(function(e,{playerType:t}){const r={playerType:t};return{onExpandPress(t){e(Rx.ws(r))}}}))(sN);var cN=r(47456);const lN=(0,At.M3)(Bu.c,(e=>e.find((e=>e.identifier===Oe.Im))));var dN=r(19264),uN=r(15468),pN=r(96048),mN=r(6304);const hN="PlayerAddToWatchlistButton-buttonContainer-yg0lzl";function yN({onPress:e}){return i.createElement("div",{className:hN},i.createElement(Ut.q,{label:(0,g.c)("Add to Watchlist"),size:"s",onPress:e}))}const gN={dispatchToggleWatchlistRequested:pN.c.actions.toggleWatchlistRequested,dispatchSetMetadataItemIsInUniversalWatchlist:cN.EJ},fN=(0,s.Ul)((function(){return(0,At.M3)(sI(),xw(),os.c,lN,dN.c,((e,t,r,n,i)=>({server:r,provider:Oe._u(e.identifier,Oe.Im)?e:n,metadataItem:t,stableUser:i})))}),gN)((function({server:e,provider:t,metadataItem:r,stableUser:n,dispatchToggleWatchlistRequested:s,dispatchSetMetadataItemIsInUniversalWatchlist:a}){const o=(0,mN.c)(r,c.TRAILER),d=(0,i.useCallback)((()=>{var i,c;const d=(0,uN.c)(null==r?void 0:r.addToWatchlistGuid);if(!d)return;const u=(0,Te.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:`/library/metadata/${d}`});o(!0,{page:l.KW}),s({server:e,provider:t,stableUser:n,sourceURI:u,ratingKey:d,added:!0,title:null!=(c=null!=(i=r.grandparentTitle)?i:r.parentTitle)?c:r.title,showToastOnAdded:!0}),a({metadataItemEntityID:r.entityID})}),[a,s,null==r?void 0:r.addToWatchlistGuid,r.entityID,r.grandparentTitle,r.parentTitle,r.title,t,e,n,o]);return i.createElement(yN,{onPress:d})}));var vN=r(95808),bN=r(22509),SN=r(66636),PN=Object.defineProperty,IN=Object.defineProperties,EN=Object.getOwnPropertyDescriptors,wN=Object.getOwnPropertySymbols,CN=Object.prototype.hasOwnProperty,ON=Object.prototype.propertyIsEnumerable,MN=(e,t,r)=>t in e?PN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,TN=(e,t)=>{for(var r in t||(t={}))CN.call(t,r)&&MN(e,r,t[r]);if(wN)for(var r of wN(t))ON.call(t,r)&&MN(e,r,t[r]);return e},DN=(e,t,r)=>(MN(e,"symbol"!=typeof t?t+"":t,r),r);const kN={showDelete:!1,showDeleteVersion:!1,showEdit:!1,showFixMatch:!1,showMarkUnplayed:!1,showMarkPlayed:!1,showMatch:!1,showOptimize:!1,showPlay:!1,showPlayAll:!1,showPlayMusicVideo:!1,showPlayPlexMix:!1,showPlayTrailer:!1,showPlayVersion:!1,showWatchTogether:!1,showQueue:!1,showRefresh:!1,showSelect:!1,showShuffle:!1,showSplitApart:!1,showSyncDownload:!1,showUnmatch:!1};class xN extends i.Component{constructor(e,t){super(e,t),DN(this,"_menuButtonID"),DN(this,"onPress",(()=>{this.setState(((e,t)=>({isMenuOpen:!e.isMenuOpen})),(()=>{this.props.onMenuChange&&this.props.onMenuChange(this.state.isMenuOpen)}))})),DN(this,"onMenuClose",(()=>{this.setState({isMenuOpen:!1},(()=>{this.props.onMenuChange&&this.props.onMenuChange(!1)}))})),this.state={isMenuOpen:!1},this._menuButtonID=(0,tk.c)()}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,metadataActionProps:n,isDisabled:s}=this.props,a=TN(TN({},n),kN),o=Qy().values(a).some((e=>e));return o?i.createElement("span",null,i.createElement(zx,{"data-testid":"moreButton",iconComponent:bN.default,id:this._menuButtonID,isDisabled:s,title:(0,g.c)("More Actions"),onPress:this.onPress}),i.createElement(SN.c,((e,t)=>IN(e,EN(t)))(TN({isOpen:this.state.isMenuOpen,metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,target:this._menuButtonID},kN),{onMenuClose:this.onMenuClose}))):null}}const AN=xN,RN=(0,s.Ul)((function(){return(0,At.M3)((0,vN.c)(),(e=>({metadataActionProps:e})))}))(AN);var NN=r(14004),LN=r(78804),jN=r(33512),UN=r(96196);const FN="deltaX",VN="deltaY",_N=250,WN=.5;function BN(e={}){const{callback:t,axisLockDuration:r=_N,sensitivity:n=WN,maxAbsDelta:i=Number.MAX_SAFE_INTEGER}=e;let s,a;return e=>{e.preventDefault(),(void 0===a||e.timeStamp-a>=r)&&(s=Math.abs(e[FN])>Math.abs(e[VN])?FN:VN,a=e.timeStamp);const o=e[s]*n;if(!o)return;let c=Math.max(0,Math.min(i,Math.abs(o)));c*=o>0?1:-1,c=(e.nativeEvent||e).webkitDirectionInvertedFromDevice?c:-c,t(c)}}var HN=Object.defineProperty,zN=(e,t,r)=>(((e,t,r)=>{t in e?HN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const GN=parseInt(R.c.playerVolumeSliderHeight,10);class qN extends i.Component{constructor(e,t){super(e,t),zN(this,"onWheel"),zN(this,"onWheelDelta",(e=>{this.props.onVolumeChange(e)})),this.onWheel=BN({callback:this.onWheelDelta,maxAbsDelta:GN/10})}render(){const{className:e,volume:t,onPress:r}=this.props;let n=NN.default;return t&&t>60?n=LN.default:t&&t>40?n=jN.default:t&&t>0&&(n=UN.default),i.createElement("span",{onWheel:this.onWheel},i.createElement(zx,{className:e,"data-testid":"volumeButton",iconComponent:n,title:0===t?(0,g.c)("Unmute Volume"):(0,g.c)("Mute Volume"),onPress:r}))}}const KN=qN;var QN=Object.defineProperty,$N=Object.defineProperties,YN=Object.getOwnPropertyDescriptors,XN=Object.getOwnPropertySymbols,JN=Object.prototype.hasOwnProperty,ZN=Object.prototype.propertyIsEnumerable,eL=(e,t,r)=>t in e?QN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function tL(e){return i.createElement(sA.c,((e,t)=>$N(e,YN({isVertical:!0})))(((e,t)=>{for(var r in t||(t={}))JN.call(t,r)&&eL(e,r,t[r]);if(XN)for(var r of XN(t))ZN.call(t,r)&&eL(e,r,t[r]);return e})({},e)))}tL.defaultProps={className:"VerticalSlider-slider-kmawbw Slider-slider-YdLxcK",fillClassName:"VerticalSlider-fill-GREURn Slider-fill-Rq3kSU",thumbClassName:"VerticalSlider-thumb-VpJ1nM Slider-thumb-YPvtji Link-link-SxPFpG",thumbTrackClassName:"VerticalSlider-thumbTrack-IFijMm Slider-thumbTrack-INScRp",trackClassName:"VerticalSlider-track-AuobAj Slider-track-i7q9Yd"};const rL=tL;var nL=Object.defineProperty,iL=(e,t,r)=>(((e,t,r)=>{t in e?nL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const sL=parseInt(R.c.playerVolumeSliderHeight,10);class aL extends i.Component{constructor(e,t){super(e,t),iL(this,"onWheel"),iL(this,"onWheelDelta",(e=>{this.onChange({positionDelta:e})})),iL(this,"onChange",(({positionDelta:e})=>{this.props.onVolumeChange(e)})),this.onWheel=BN({callback:this.onWheelDelta,maxAbsDelta:sL/10})}render(){const{className:e,volume:t}=this.props;return i.createElement(rL,{autoHideThumb:!0,className:e,fillClassName:"VolumeSlider-fill-m0PeVk VerticalSlider-fill-GREURn Slider-fill-Rq3kSU",showFill:!0,stepSize:1,trackClassName:"VolumeSlider-track-P387GN VerticalSlider-track-AuobAj Slider-track-i7q9Yd",value:t,onChange:this.onChange,onWheel:this.onWheel})}}iL(aL,"defaultProps",{className:"VolumeSlider-slider-va1Tu2 VerticalSlider-slider-kmawbw Slider-slider-YdLxcK"});const oL=aL;var cL=r(84780),lL=r(92264);var dL=Object.defineProperty,uL=Object.defineProperties,pL=Object.getOwnPropertyDescriptors,mL=Object.getOwnPropertySymbols,hL=Object.prototype.hasOwnProperty,yL=Object.prototype.propertyIsEnumerable,gL=(e,t,r)=>t in e?dL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const fL=(0,s.Ul)((function(){return(0,At.M3)((0,Nx.c)(),(0,pT.c)(),((e,t)=>{const{title:r,summary:n,originallyAvailableAt:i,addedAt:s}=t;return{title:r,summary:n,index:e.playQueueSelectedItemOffset,size:e.length,dateTaken:i||(0,cL.c)(s,"yyyy-MM-dd")}}))}))((function(e){const{title:t,summary:r,dateTaken:n,index:s,size:a}=e;let o="";n&&(o+=(0,ut.c)(n)),r&&(o+=o?` ${uM.i} ${r}`:` ${r}`);const c=!(!t||!t.length),l=!!o.length,d=!!a;return i.createElement("div",{className:"PhotoMetadataControls-container-EtqMz_ PlayerControlsMetadata-container-aTRKIG"},c?i.createElement(mR.c,{component:lL.c,title:t}):null,l?i.createElement(mR.c,{component:lL.c,isSecondary:c,title:o}):null,d?i.createElement(mR.c,{component:lL.c,isSecondary:c||l,title:(0,g.c)("{currentIndex} of {size}",{currentIndex:s+1,size:a})}):null)}));fL.propTypes=((e,t)=>uL(e,pL(t)))(((e,t)=>{for(var r in t||(t={}))hL.call(t,r)&&gL(e,r,t[r]);if(mL)for(var r of mL(t))yL.call(t,r)&&gL(e,r,t[r]);return e})({},fL.propTypes),{metadataItemEntityID:vw().string.isRequired,playerType:vw().string.isRequired});const vL=fL;function bL(e){const{className:t,durationSeconds:r,hasLiveTVProtocol:n,isMiniPlayer:s,isMusic:a,isVideo:o,metadataItemEntityID:c,playerType:l,positionSeconds:d,providerEntityID:p,serverEntityID:m,volume:h,activateChaptersButton:y,activateLyricsButton:f,activatePhotoInformationButton:v,activatePhotoStripButton:b,activateQueueButton:S,activateRepeatButton:P,activateRepeatOneButton:I,activateSettingsButton:E,activateWatchTogetherParticipantsButton:w,activateShuffleButton:C,disableCloseButton:O,disableLyricsButton:M,disableMenuButton:T,disableNextButton:D,disablePauseButton:k,disablePlayButton:x,disablePreviousButton:A,disableQueueButton:R,disableRepeatButton:N,disableRepeatOneButton:L,disableSettingsButton:j,disableShuffleButton:U,disableSkipBackButton:F,disableSkipForwardButton:V,showChaptersButton:_,showCloseButton:W,showDuration:B,showEditButton:H,showFavoriteButton:z,showLyricsButton:G,showMenuButton:q,showNextButton:K,showPauseButton:Q,showPhotoInformationButton:$,showPhotoStripButton:Y,showPlayButton:X,showPreviousButton:J,showQueueButton:Z,showRecordButton:ee,showRepeatButton:te,showRepeatOneButton:re,showSettingsButton:ne,showWatchTogetherParticipantsButton:ie,showShuffleButton:se,showSkipBackButton:ae,showSkipForwardButton:oe,showUnfavoriteButton:ce,showAddToWatchlistButton:le,showVolume:de,onChaptersPress:ue,onClosePress:pe,onControlsMenuChange:me,onEditPress:he,onFavoritePress:ye,onLyricsPress:ge,onNextPress:fe,onPausePress:ve,onPhotoInformationPress:be,onPhotoStripPress:Se,onPlayPress:Pe,onPreviousPress:Ie,onQueuePress:Ee,onRepeatOnePress:we,onRepeatPress:Ce,onSettingsPress:Oe,onWatchTogetherParticipantsPress:Me,onShufflePress:Te,onSkipBackPress:De,onSkipForwardPress:ke,onUnfavoritePress:xe,onVolumeChange:Ae,onVolumeIconPress:Re}=e;let Ne;Ne=l===u.Ww?vL:n?HR:NR;const Le=de&&null!=h,je=n?null:"PlayerControls-balanceLeft-jE50ih",Ue=o?"PlayerControls-hasLandscapePoster-UYY7sn":"PlayerControls-hasSquarePoster-lzn163";return i.createElement(i.Fragment,null,i.createElement("div",{className:jt()(t,s&&Ue),"data-testid":"playerControlsContainer"},i.createElement("div",{className:"PlayerControls-buttonGroupLeft-M_U9AP PlayerControls-buttonGroup-L3xlI0"},s?i.createElement(oN,{isMusic:a,isVideo:o,playerType:l}):null,i.createElement(Ne,{durationSeconds:r,metadataItemEntityID:c,playerType:l,positionSeconds:d,showDuration:B,showStarRating:a})),i.createElement("div",{className:jt()("PlayerControls-buttonGroupCenter-LDbSmK PlayerControls-buttonGroup-L3xlI0",je)},ee?i.createElement(tN,{"data-testid":"recordButton",playerType:l,positionSeconds:d,providerEntityID:p,serverEntityID:m}):null,J?i.createElement(zx,{"data-testid":"previousButton",iconComponent:QA.default,isDisabled:A,title:(0,g.c)("Previous"),onPress:Ie}):null,ae?i.createElement(zx,{"data-testid":"skipBackButton",iconComponent:$A.default,isDisabled:F,title:(0,g.c)("Skip Back 10 Seconds"),onPress:De}):null,X?i.createElement(zx,{"data-testid":"resumeButton",iconComponent:YA.default,isDisabled:x,isPrimary:!0,title:(0,g.c)("Play"),onPress:Pe}):null,Q?i.createElement(zx,{"data-testid":"pauseButton",iconComponent:XA.default,isDisabled:k,isPrimary:!0,title:(0,g.c)("Pause"),onPress:ve}):null,oe?i.createElement(zx,{"data-testid":"skipForwardButton",iconComponent:JA.default,isDisabled:V,title:(0,g.c)("Skip Forward 30 Seconds"),onPress:ke}):null,K?i.createElement(zx,{"data-testid":"nextButton",iconComponent:ZA.default,isDisabled:D,title:(0,g.c)("Next"),onPress:fe}):null,W?i.createElement(zx,{"data-testid":"closeButton",iconComponent:eR.default,isDisabled:O,title:(0,g.c)("Close Player"),onPress:pe}):null),i.createElement("div",{className:"PlayerControls-buttonGroupRight-Bs12vn PlayerControls-buttonGroup-L3xlI0"},le?i.createElement(fN,{playerType:l}):null,q?i.createElement(RN,{"data-testid":"moreButton",isDisabled:T,metadataItemEntityID:c,providerEntityID:p,serverEntityID:m,onMenuChange:me}):null,te?i.createElement(zx,{"data-testid":"repeatButton",iconComponent:tR.default,isActive:P,isDisabled:N,title:(0,g.c)("Repeat"),onPress:Ce}):null,re?i.createElement(zx,{"data-testid":"repeatOneButton",iconComponent:rR.default,isActive:I,isDisabled:L,title:(0,g.c)("Repeat One"),onPress:we}):null,se?i.createElement(zx,{"data-testid":"shuffleButton",iconComponent:nR.default,isActive:C,isDisabled:U,title:(0,g.c)("Shuffle"),onPress:Te}):null,H?i.createElement(zx,{"data-testid":"playerEditButton",iconComponent:iR.default,title:(0,g.c)("Edit"),onPress:he}):null,z?i.createElement(zx,{"data-testid":"playerFavoriteButton",iconComponent:sR.default,title:(0,g.c)("Add to Favorites"),onPress:ye}):null,ce?i.createElement(zx,{"data-testid":"playerUnfavoriteButton",iconComponent:aR.default,title:(0,g.c)("Remove from Favorites"),onPress:xe}):null,$?i.createElement(zx,{"data-testid":"playerPhotoInfoButton",iconComponent:sv.default,isActive:v,title:(0,g.c)("Information"),onPress:be}):null,Y?i.createElement(zx,{"data-testid":"playerPhotoStripButton",iconComponent:oR.default,isActive:b,title:(0,g.c)("Show Photo Strip"),onPress:Se}):null,G?i.createElement(zx,{"data-testid":"lyricsButton",iconComponent:cR.default,isDisabled:M,isSelected:f,title:(0,g.c)("Lyrics"),onPress:ge}):null,ne?i.createElement(zx,{"data-testid":"videoSettingsButton",iconComponent:lR.default,isActive:E,isDisabled:j,title:(0,g.c)("Settings"),onPress:Oe}):null,_?i.createElement(zx,{"data-testid":"chaptersButton",iconComponent:dR.default,isActive:y,title:(0,g.c)("Chapters"),onPress:ue}):null,Z?i.createElement(zx,{"data-testid":"playQueueButton",iconComponent:uR.default,isActive:S,isDisabled:R,title:(0,g.c)("Play Queue"),onPress:Ee}):null,ie?i.createElement(zx,{"data-testid":"watchTogetherParticipantsButton",iconComponent:pR.default,isActive:w,title:(0,g.c)("Participants"),onPress:Me}):null,Le?i.createElement(KN,{className:"PlayerControls-volumeButton-C1_VCw PlayerIconButton-playerButton-zDmEsI IconButton-button-s4bVCh","data-testid":"volumeButton",volume:h,onPress:Re,onVolumeChange:Ae}):null)),Le?i.createElement(oL,{className:"PlayerControls-volumeSlider-MG9lg2 VolumeSlider-slider-va1Tu2 VerticalSlider-slider-kmawbw Slider-slider-YdLxcK",volume:h,onVolumeChange:Ae}):null)}bL.defaultProps={className:"PlayerControls-controls-PXkgmR",isMusic:!1,isVideo:!1,isPhoto:!1};const SL=bL,PL=[Uw.MOVIE,Uw.M7],IL=(0,s.Ul)((function(){return(0,At.M3)(((e,{isVideo:t})=>t),((e,{isMusic:t})=>t),((e,{isAdVisible:t})=>t),((e,{isWatchTogether:t})=>t),((e,{disableNextButton:t})=>t),((e,{disablePreviousButton:t})=>t),ep.c,(0,Nw.c)(),(0,Sw.c)(),(0,Ow.c)(),sI(),((e,t,r,n,i,s,a,o,c,l,d)=>{const{isPostPlayVisible:u,positionSeconds:p,durationSeconds:m,controllable:h}=o,y=m-p,g=l&&l.chapters&&l.chapters.length>0,f=!r&&e&&!u,v=!!h&&!h.playbackSpeed&&t,b=(0,KA.c)(null==l?void 0:l.addToWatchlistGuid),S=!(!(!a&&l.addToWatchlistGuid&&b&&PL.includes(b)&&l.isInUniversalWatchlistFetched)||l.isInUniversalWatchlist);return{positionSeconds:p,durationSeconds:m,hasLiveTVProtocol:d.protocols.includes("livetv"),disableLyricsButton:!(c.lyricsStreams&&c.lyricsStreams.length||c.hasPremiumLyrics),disableNextButton:r||i,disablePreviousButton:r||s,disableQueueButton:r,disableSettingsButton:v,disableSkipForwardButton:y<=kA.ID,showChaptersButton:e&&!u&&g,showDuration:!u,showLyricsButton:t,showMenuButton:!u,showQueueButton:!n,showSettingsButton:!u,showWatchTogetherParticipantsButton:n,showShuffleButton:!n,showSkipBackButton:f,showSkipForwardButton:f,showAddToWatchlistButton:S}}))}))(SL),EL=IL;var wL=r(23056),CL=r(75004),OL=r(86264);const ML={visibleContainer:"SeekBarThumbnail-visibleContainer-y7xW5Z",hiddenContainer:"SeekBarThumbnail-hiddenContainer-xCB6T6 SeekBarThumbnail-visibleContainer-y7xW5Z",thumbnail:"SeekBarThumbnail-thumbnail-CGCPey",tooltip:"SeekBarThumbnail-tooltip-U02Ful",small:"SeekBarThumbnail-small-q3WQaf",large:"SeekBarThumbnail-large-O3zsmf"};var TL=Object.defineProperty,DL=(e,t,r)=>(((e,t,r)=>{t in e?TL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const kL=parseInt(R.c.seekBarTooltipSmallWidth,10),xL=parseInt(R.c.seekBarTooltipLargeWidth,10),AL={containerWidth:99,containerHeight:99};class RL extends i.Component{constructor(){super(...arguments),DL(this,"_formattedTime"),DL(this,"_imageUrl")}render(){const{tooltipClassName:e,serverEntityID:t,providerEntityID:r,size:n,position:s,hoverValue:a,mediaItems:o,mediaIndex:c,partIndex:l,formatValue:d,isVisible:u}=this.props;null!=a&&(this._formattedTime=d(a));const p=o&&o[c],m=function(e,t){if(!e||null==t)return;const r=(0,CL.c)(e);return null!=r?`/library/parts/${e.id}/indexes/${r}/${1e3*Math.round(t/1e3)}`:void 0}(p&&p.Part[l],a);m&&(this._imageUrl=m);const{containerWidth:h,containerHeight:y}=function(e){const t=(0,OL.c)(e);if(null==t||null==t.width||null==t.height)return AL;const{width:r,height:n}=t;let i=99,s=99;return r>n?i=Math.round(i*(r/n)):s=Math.round(s*(n/r)),{containerWidth:i,containerHeight:s}}(p),g=function(e,t,r){let n=e.x-t/2;return n<0?n=0:n+t>window.innerWidth&&(n=window.innerWidth-t),{left:n,top:e.y-r-10,height:r}}(s,h,y),f=function(e,t,r){const n=r===Pp.OM?xL:kL;let i=t/2-n/2;const s=e.x-t/2;if(s<0){const t=4,r=e.x-n/2;i=Math.max(r,t)}else if(s+t>window.innerWidth){const r=t-n-4,s=t-(window.innerWidth-e.x)-n/2;i=Math.min(s,r)}return{left:i}}(s,h,n);return i.createElement("div",{className:u?ML.visibleContainer:ML.hiddenContainer,style:g},this._imageUrl?i.createElement(fi.c,{className:ML.thumbnail,height:y,providerEntityID:r,serverEntityID:t,url:this._imageUrl,width:h}):null,i.createElement("div",{className:jt()(e,ML[n]),style:f},this._formattedTime))}}DL(RL,"defaultProps",{tooltipClassName:ML.tooltip,size:Pp.wH,formatValue:dM.c});const NL=RL,LL=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),(({Media:e}={})=>e&&e.length?{mediaItems:e}:{}))}))(NL),jL="SeekBar-noFillTransition-aS9G8b";var UL=Object.defineProperty,FL=Object.defineProperties,VL=Object.getOwnPropertyDescriptors,_L=Object.getOwnPropertySymbols,WL=Object.prototype.hasOwnProperty,BL=Object.prototype.propertyIsEnumerable,HL=(e,t,r)=>t in e?UL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zL=(e,t,r)=>(HL(e,"symbol"!=typeof t?t+"":t,r),r);class GL extends i.Component{constructor(e,t){super(e,t),zL(this,"onChange",(({positionValue:e})=>{this.props.onSeek&&this.props.onSeek({playerType:this.props.playerType,positionSeconds:Math.floor(e/1e3)})})),zL(this,"onMove",(({positionValue:e,position:t})=>{this.setState({hoverValue:e,portalPosition:t})})),zL(this,"onMouseLeave",(()=>{this.setState({hoverValue:null})})),this.state={hoverValue:null,portalPosition:{x:0,y:0}}}render(){const e=this.props,{className:t,trackClassName:r,bufferClassName:n,fillClassName:s,canSeek:a,positionMilliseconds:o,offsetMilliseconds:c,durationMilliseconds:l,bufferStartMilliseconds:d,bufferEndMilliseconds:u,showBuffer:p,noFillTransition:m,isDisabled:h,onSeekEnd:y,onSeekStart:g}=e,f=((e,t)=>{var r={};for(var n in e)WL.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&_L)for(var n of _L(e))t.indexOf(n)<0&&BL.call(e,n)&&(r[n]=e[n]);return r})(e,["className","trackClassName","bufferClassName","fillClassName","canSeek","positionMilliseconds","offsetMilliseconds","durationMilliseconds","bufferStartMilliseconds","bufferEndMilliseconds","showBuffer","noFillTransition","isDisabled","onSeekEnd","onSeekStart"]);if(!a)return null;const{hoverValue:v,portalPosition:b}=this.state;return i.createElement("div",{onMouseLeave:this.onMouseLeave},i.createElement(sA.c,{autoHideThumb:!0,className:t,fillClassName:jt()(s,m&&jL),isDisabled:h,max:l,min:c,secondaryFillClassName:jt()(n,m&&jL),secondaryMax:u,secondaryMin:d,showFill:!0,showSecondaryFill:p,trackClassName:r,value:o,onChange:this.onChange,onDragComplete:y,onDragStart:g,onMove:h?null:this.onMove}),i.createElement(Vp.c,null,i.createElement(LL,((e,t)=>FL(e,VL(t)))(((e,t)=>{for(var r in t||(t={}))WL.call(t,r)&&HL(e,r,t[r]);if(_L)for(var r of _L(t))BL.call(t,r)&&HL(e,r,t[r]);return e})({},f),{hoverValue:v,isVisible:null!=v,position:b}))))}}zL(GL,"defaultProps",{className:"SeekBar-seekBar-ULqsSu Slider-slider-YdLxcK",trackClassName:"SeekBar-seekBarTrack-nI_0Xu Slider-track-i7q9Yd",fillClassName:"SeekBar-seekBarFill-TestC_ Slider-fill-Rq3kSU",bufferClassName:"SeekBar-seekBarBuffer-pao2Od Slider-secondaryFill-BduU3_ Slider-fill-Rq3kSU",canSeek:!0,showBuffer:!1,noFillTransition:(0,wL.c)()||(0,yD.c)(),isDisabled:!1});const qL=GL,KL={onSeek:bw.KK},QL=$D(qL),$L=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,Sw.c)(),((e,t)=>{const{serverEntityID:r,providerEntityID:n,positionSeconds:i,durationSeconds:s,mediaIndex:a,partIndex:o,controllable:c}=e,l={serverEntityID:r,providerEntityID:n,metadataItemEntityID:t.metadataItem,canSeek:!!s,positionSeconds:i,durationMilliseconds:1e3*s,mediaIndex:a,partIndex:o};return c&&!c.seekTo&&(l.canSeek=!1),l}))}),KL)(QL);var YL=Object.defineProperty,XL=Object.getOwnPropertySymbols,JL=Object.prototype.hasOwnProperty,ZL=Object.prototype.propertyIsEnumerable,ej=(e,t,r)=>t in e?YL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tj=function(e){const{durationMilliseconds:t}=e;return null!=t?i.createElement(qL,((e,t)=>{for(var r in t||(t={}))JL.call(t,r)&&ej(e,r,t[r]);if(XL)for(var r of XL(t))ZL.call(t,r)&&ej(e,r,t[r]);return e})({fillClassName:"AdSeekBar-seekBarFill-jPOv83 SeekBar-seekBarFill-TestC_ Slider-fill-Rq3kSU",isDisabled:!0},e)):null};function rj(){return(0,At.M3)((0,iI.c)("seekStartSeconds"),(0,iI.c)("seekEndSeconds"),(0,lC.c)(),((e=0,t=0,r)=>{const n=r&&r.captureBuffer;let i=0;return r&&n?(i=n.startedAt,e=n.seekStartSeconds,t=n.seekEndSeconds):r&&(i=r.startedAt),{seekRangeStartedAtSeconds:i,seekStartSeconds:e,seekEndSeconds:t}}))}var nj=r(79196),ij=r(12500),sj=Object.defineProperty,aj=Object.defineProperties,oj=Object.getOwnPropertyDescriptors,cj=Object.getOwnPropertySymbols,lj=Object.prototype.hasOwnProperty,dj=Object.prototype.propertyIsEnumerable,uj=(e,t,r)=>t in e?sj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pj=(e,t)=>{for(var r in t||(t={}))lj.call(t,r)&&uj(e,r,t[r]);if(cj)for(var r of cj(t))dj.call(t,r)&&uj(e,r,t[r]);return e},mj=(e,t)=>aj(e,oj(t)),hj=(e,t,r)=>(uj(e,"symbol"!=typeof t?t+"":t,r),r);class yj extends i.Component{constructor(){super(...arguments),hj(this,"formatCurrentTime"),hj(this,"formatPlayerTime",(e=>{const t=this.props.timeFormat;return(0,cL.c)(e/1e3,t)})),hj(this,"onSeek",(({positionSeconds:e})=>{const{seekRangeStartedAtSeconds:t,seekStartSeconds:r,seekEndSeconds:n}=this.props,i=t+r,s=t+n;e<i?e=i:e>s&&(e=s),this.props.onSeek({playerType:this.props.playerType,seekPosition:e})}))}render(){const e=this.props,{isCloud:t,canSeek:r,currentPosition:n,positionMilliseconds:s,beginsAt:a,endsAt:o,durationSeconds:c,streamStartedAt:l,timeFormat:d,seekRangeStartedAtSeconds:u,seekStartSeconds:p,seekEndSeconds:m}=e,h=((e,t)=>{var r={};for(var n in e)lj.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&cj)for(var n of cj(e))t.indexOf(n)<0&&dj.call(e,n)&&(r[n]=e[n]);return r})(e,["isCloud","canSeek","currentPosition","positionMilliseconds","beginsAt","endsAt","durationSeconds","streamStartedAt","timeFormat","seekRangeStartedAtSeconds","seekStartSeconds","seekEndSeconds"]);if(!r&&!t)return i.createElement(qL,mj(pj({},h),{canSeek:!0,durationMilliseconds:2,formatValue:this.formatCurrentTime,isDisabled:!0,offsetMilliseconds:0,positionMilliseconds:1,showBuffer:!1,size:Pp.OM,onSeek:this.onSeek}));const y=1e3*(u?u+p:n),g=1e3*(u?u+m:n),f=1e3*a,v=1e3*(o-1),b=t?f:Math.max(f,y),S=t?v:Math.min(v,g),P=function(e){const{isCloud:t,isRemotePlayer:r,currentPosition:n,positionMilliseconds:i,streamStartedAt:s,lastSeekPosition:a}=e;return a||r||t?1e3*n:1e3*s+i}(this.props);return i.createElement(qL,mj(pj({},h),{bufferEndMilliseconds:Math.max(S,0),bufferStartMilliseconds:b,canSeek:r||t,durationMilliseconds:v,formatValue:this.formatPlayerTime,isDisabled:!r||t,offsetMilliseconds:f,positionMilliseconds:P,showBuffer:!t,size:Pp.OM,onSeek:this.onSeek}))}}hj(yj,"defaultProps",{beginsAt:0,endsAt:0,streamStartedAt:0,seekRangeStartedAtSeconds:0});const gj=$D(yj),fj=(0,At.M3)(ij.c,(e=>e.replace(":mm",":mm:ss"))),vj={onSeek:aC.KK},bj=(0,s.Ul)((function(){return(0,At.M3)(fj,nj.c,(0,hC.c)(),(0,kw.c)(),(0,lC.c)(),rj(),(0,Nw.c)(),Mw(),((e,t,r={},n={},i,s,a,o)=>{const{beginsAt:c,endsAt:l}=n,{serverEntityID:d,controllable:u,playbackStartTime:p}=a,{isCloud:m}=o,h=l-c,y={serverEntityID:d,metadataItemEntityID:r.entityID,isCloud:m,isRemotePlayer:t,canSeek:!(!h||!i),beginsAt:c,endsAt:l,playbackStartTime:p,durationSeconds:h,timeFormat:e,positionSeconds:a.positionSeconds};return!m&&s&&Object.assign(y,s),u&&!u.seekTo&&(y.canSeek=!1),i&&(y.streamStartedAt=i.startedAt,y.currentPosition=i.currentPosition,y.lastSeekPosition=i.lastSeekPosition),y}))}),vj)(gj);var Sj=Object.defineProperty,Pj=Object.defineProperties,Ij=Object.getOwnPropertyDescriptors,Ej=Object.getOwnPropertySymbols,wj=Object.prototype.hasOwnProperty,Cj=Object.prototype.propertyIsEnumerable,Oj=(e,t,r)=>t in e?Sj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mj=(e,t)=>{for(var r in t||(t={}))wj.call(t,r)&&Oj(e,r,t[r]);if(Ej)for(var r of Ej(t))Cj.call(t,r)&&Oj(e,r,t[r]);return e},Tj=(e,t)=>Pj(e,Ij(t));const Dj=(0,s.Ul)((function(){return(0,At.M3)(sI(),(e=>({hasLiveTVProtocol:e.protocols.includes("livetv")})))}))((function(e){const t=e,{isAdVisible:r,hasLiveTVProtocol:n,adPositionMilliseconds:s,adDurationMilliseconds:a}=t,o=((e,t)=>{var r={};for(var n in e)wj.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ej)for(var n of Ej(e))t.indexOf(n)<0&&Cj.call(e,n)&&(r[n]=e[n]);return r})(t,["isAdVisible","hasLiveTVProtocol","adPositionMilliseconds","adDurationMilliseconds"]);return r?i.createElement(tj,Tj(Mj({},o),{durationMilliseconds:a,positionMilliseconds:s,showBuffer:!1})):n?i.createElement(bj,Mj({},o)):i.createElement($L,Tj(Mj({},o),{showBuffer:!0}))}));var kj=r(61500);const xj=(0,s.Ul)((function(){return(0,At.M3)(kj.c,tO(),rj(),(0,iI.c)("isPaused"),((e,t,r,n)=>{const i=Oe._u(e.identifier,Oe.$9),{disablePreviousButton:s,disableSkipForwardButton:a,disableNextButton:o}=function(e,t){const{seekRangeStartedAtSeconds:r,seekStartSeconds:n,seekEndSeconds:i}=t,s=e-r;return{disablePreviousButton:s<=kA.WM||s-n<=kA.WM,disableSkipForwardButton:i-s<=15,disableNextButton:i-s<=15}}(t,r);return{showRecordButton:!!e.features.subscribe,showRepeatButton:!1,showSettingsButton:!0,showPauseButton:!n&&!i,showPreviousButton:!i,showSkipBackButton:!i,showSkipForwardButton:!i,showNextButton:!i,disablePreviousButton:s,disableSkipForwardButton:a,disableNextButton:o}}))}),(function(e,{playerType:t}){const r={playerType:t};return{onPreviousPress(t){e(aC.oH(r))},onSkipBackPress(t){e(aC.iu(r))},onSkipForwardPress(t){e(aC.EP(r))},onNextPress(t){e(aC.Ax(r))}}}))(SL);var Aj=r(45300);const Rj=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,lC.c)(),((e,t)=>({positionSeconds:e.positionSeconds,channelIdentifier:t.channelIdentifier})))}))((function(e){const{channelIdentifier:t}=e,r=(0,s.w1)(Aj.c),n=(0,i.useMemo)((()=>r.find((e=>e.id===t))),[r,t]);return i.createElement(h.YR,{gap:"xxs",verticalAlign:"center"},n?n.title||n.callSign||(0,g.c)("Unknown"):null)}));var Nj=r(39700),Lj=r(6268),jj=r(18880),Uj=r(91036),Fj=r(22140),Vj=r(34032),_j=r(27272);const Wj=(0,fa.c)((function(e){return(0,At.M3)(Vj.c,(0,_j.c)(e,"liveTVSession"),((e,t)=>e[null!=t?t:""]))}));var Bj=r(22436),Hj=r(14244),zj=r(26376),Gj=r(96743);function qj(){var e,t,r,n;const a=(0,i.useMemo)((()=>(0,_n.WI)("appModel")),[]),[o,c]=(0,i.useState)(!0),l=(0,s.OY)(),[d,u]=(0,_e.c$)(),p=(0,s.w1)(Wj(Gj.K.AudioVideo)),{channelIdentifier:m,currentPosition:h}=p,y=(0,s.w1)(Aj.c),f=(0,i.useMemo)((()=>y.find((e=>e.id===m))),[y,m]),v=(0,s.w1)((0,Hj.c)(null==f?void 0:f.gridKey)),{isPending:b,isPopulated:S}=(0,s.w1)((0,zj.c)(null==f?void 0:f.gridKey)),P=(0,i.useRef)(),I=(0,i.useRef)(),E=(0,s.w1)((0,Fj.c)(null==(t=null==(e=null==P?void 0:P.current)?void 0:e.metadataItem)?void 0:t.sourceURI)),w=(0,s.w1)((0,Fj.c)(null==(n=null==(r=null==I?void 0:I.current)?void 0:r.metadataItem)?void 0:n.sourceURI)),C=(0,i.useMemo)((()=>{if(P.current&&E)return(0,Lj.c)(a,{server:d,provider:u,metadataItem:P.current.metadataItem,metadataItemState:E}).metadataItemModel}),[a,P,E,u,d]),O=(0,i.useMemo)((()=>{if(I.current&&w)return(0,Lj.c)(a,{server:d,provider:u,metadataItem:I.current.metadataItem,metadataItemState:w}).metadataItemModel}),[a,I,w,u,d]);return(0,i.useEffect)((()=>{!o&&P.current&&P.current.endsAt<=h&&c(!0)}),[P,h,o]),(0,i.useEffect)((()=>{o&&!b&&S&&(P.current=v.find((e=>e.beginsAt<=h&&e.endsAt>h)),I.current=v.find((e=>e.beginsAt>h)),c(!P.current||!I.current))}),[b,S,o,c]),(0,i.useEffect)((()=>{l(aC.a2({liveTVSessionEntityID:p.entityID,newAiringMetadataItem:C,newUpNextMetadataItem:O}))}),[C,l,p.entityID,O,u,d]),(0,i.useEffect)((()=>{!y.length||y.length&&!f?l(Bj.cp.actions.guideChannelsFetchRequested({sourceKeys:[{server:d,provider:u}]})):!(null==f?void 0:f.gridKey)||b||S?(null==f?void 0:f.gridKey)&&!I.current&&P.current&&!b&&S&&l(Bj.cp.actions.channelAiringsFetchRequested({server:d,provider:u,channelGridKey:f.gridKey,date:(0,Nj.c)(new Date(1e3*P.current.endsAt)).toString()})):l(Bj.cp.actions.channelAiringsFetchRequested({server:d,provider:u,channelGridKey:f.gridKey,date:(0,Nj.c)(new Date).toString()}))}),[l,y,d,u,v,f,b,S,I,P]),!I.current||I.current.isSynthetic?i.createElement(i.Fragment,null,(0,g.c)("Unknown airing")):I.current.metadataItem.type===Xe.WW.Episode?i.createElement(Uj.c,{metadataItem:I.current.metadataItem}):i.createElement(jj.c,{metadataItem:I.current.metadataItem})}const Kj=(0,s.Ul)((function(){return(0,At.M3)((e=>e.ui.channelGridPage.metadataList),(0,Nw.c)(),((e,t)=>({metadataListEntityID:e,serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID})))}))((function(e){const{playerType:t,metadataListEntityID:r,serverEntityID:n,providerEntityID:s}=e;return i.createElement("div",{className:"LiveTVUpNext-container-H44BOv"},i.createElement("span",{className:"LiveTVUpNext-icon-f6oRwp"},i.createElement(uR.default,null)),i.createElement(wI.c,{message:(0,g.c)("{openSpan}Up Next:{closeSpan} {openTitle}{closeTitle}"),tags:[{open:"openSpan",close:"closeSpan",component:"span",className:"LiveTVUpNext-upNext-_v_JNL"},{open:"openTitle",close:"closeTitle",component:qj,playerType:t,metadataListEntityID:r,serverEntityID:n,providerEntityID:s}]}))})),Qj=function(e){const{playerType:t}=e;return i.createElement(GA,null,i.createElement(Rj,{playerType:t}),i.createElement(Kj,{playerType:t}))},$j=(0,At.M3)(ao,(e=>e.session));var Yj=r(52908);function Xj(e){const t=e["aria-label"],r=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-player-play-560"};s["aria-hidden"]=!t,s.style=n,s.className=Yj.c.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"M168 476V84l336 196z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}Xj.propTypes={"aria-label":vw().string,className:vw().string,style:vw().object};const Jj=Xj;var Zj=Object.defineProperty,eU=Object.getOwnPropertySymbols,tU=Object.prototype.hasOwnProperty,rU=Object.prototype.propertyIsEnumerable,nU=(e,t,r)=>t in e?Zj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function iU(e){const t=e,{className:r,iconComponent:n,title:s}=t,a=((e,t)=>{var r={};for(var n in e)tU.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&eU)for(var n of eU(e))t.indexOf(n)<0&&rU.call(e,n)&&(r[n]=e[n]);return r})(t,["className","iconComponent","title"]);return i.createElement(sw.c,((e,t)=>{for(var r in t||(t={}))tU.call(t,r)&&nU(e,r,t[r]);if(eU)for(var r of eU(t))rU.call(t,r)&&nU(e,r,t[r]);return e})({"aria-label":s,className:r},a),n?i.createElement(n,{className:"WatchTogetherLobbyControlButton-icon-l81zh5"}):null,s)}iU.defaultProps={className:"WatchTogetherLobbyControlButton-button-GXUJJn Button-button-TxWeuE Link-link-SxPFpG"};const sU=iU,aU="WatchTogetherLobbyControls-button-_Uk0Ny WatchTogetherLobbyControlButton-button-GXUJJn Button-button-TxWeuE Link-link-SxPFpG";function oU(e){const{className:t,elapsedSeconds:r,hasLiveTVProtocol:n,isAnyAdPlaying:s,isAnyWatching:a,isMiniPlayer:o,metadataItemEntityID:c,playerType:l,onPlay:d,onCancel:u}=e,p=(0,i.useCallback)((()=>{u({playerType:l})}),[u,l]),m=n?HR:NR;let h,y;return h=s?(0,g.c)("Other viewers are watching ads. Playback will resume automatically when they're done."):a?(0,g.c)("Session started {duration} ago.",{duration:(0,pt.c)(1e3*r)}):(0,g.c)("Playback will start automatically when everyone is ready."),y=s?(0,g.c)("Please Wait"):r>0?(0,g.c)("Resume"):(0,g.c)("Start"),i.createElement("div",{className:jt()(t,o&&"WatchTogetherLobbyControls-hasLandscapePoster-edxok5 PlayerControls-hasLandscapePoster-UYY7sn"),"data-testid":"watchTogetherLobbyControlsContainer"},i.createElement("div",{className:"WatchTogetherLobbyControls-buttonGroupLeft-deoE7U PlayerControls-buttonGroupLeft-M_U9AP PlayerControls-buttonGroup-L3xlI0"},o?i.createElement(oN,{isMusic:!1,isVideo:!0,playerType:l}):null,i.createElement(m,{metadataItemEntityID:c,playerType:l,positionSeconds:r,showDuration:!1})),i.createElement("div",{className:jt()("WatchTogetherLobbyControls-buttonGroupCenter-fPAThf PlayerControls-buttonGroupCenter-LDbSmK PlayerControls-buttonGroup-L3xlI0",!n&&"WatchTogetherLobbyControls-balanceLeft-Wg5Y0c PlayerControls-balanceLeft-jE50ih")},i.createElement(sU,{className:aU,iconComponent:Jj,isDisabled:s,kind:Sg.ac,title:y,onPress:d}),i.createElement(sU,{className:aU,title:(0,g.c)("Cancel"),onPress:p})),i.createElement("div",{className:"WatchTogetherLobbyControls-buttonGroupRight-x9l0T5 PlayerControls-buttonGroupRight-Bs12vn PlayerControls-buttonGroup-L3xlI0"},h))}oU.defaultProps={className:"WatchTogetherLobbyControls-controls-qkNZup PlayerControls-controls-PXkgmR"};const cU=oU,lU={onPlay:no.O2,onCancel:Wn.WS},dU=(0,s.Ul)((function(){return(0,At.M3)($j,(e=>{const{users:t}=e,r=t.filter((e=>e.isWatching));return{elapsedSeconds:r.reduce(((e,t)=>e+t.positionSeconds),0)/r.length||0,isAnyAdPlaying:t.some((e=>e.isAdPlaying)),isAnyWatching:r.length>0}}))}),lU)(cU);function uU(e){const{playerType:t,isAdVisible:r,isMiniPlayer:n,hasLiveTVProtocol:s,isWatchTogetherLobbyVisible:a}=e;return a?null:r?i.createElement(qA,null):n?null:s?i.createElement(Qj,{playerType:t}):null}function pU(e){const{playerType:t,isPostPlayVisible:r,isWatchTogetherLobbyVisible:n,metadataType:s,isVideo:a,isMusic:o,isAdVisible:c,isMiniPlayer:l,isWatchTogether:d,hasLiveTVProtocol:u,seekStartMilliseconds:p,seekEndMilliseconds:m,bufferStartMilliseconds:h,bufferEndMilliseconds:y,adPositionMilliseconds:g,adDurationMilliseconds:f,onControlsMenuChange:v,onSeekBarInteractionStart:b,onSeekBarInteractionEnd:S}=e;let P;return P=n?dU:u?xj:EL,i.createElement(MA,null,uU(e),i.createElement(DA,null,r||n?null:i.createElement(Dj,{adDurationMilliseconds:f,adPositionMilliseconds:g,bufferEndMilliseconds:y,bufferStartMilliseconds:h,isAdVisible:c,playerType:t,seekEndMilliseconds:m,seekStartMilliseconds:p,onSeekEnd:S,onSeekStart:b}),i.createElement(HA,{component:P,hasLiveTVProtocol:u,isAdVisible:c,isMiniPlayer:l,isMusic:o,isVideo:a,isWatchTogether:d,isWatchTogetherLobbyVisible:n,metadataType:s,playerType:t,onControlsMenuChange:v})))}uU.propTypes=pU.propTypes,pU.defaultProps={isMiniPlayer:!1};const mU=pU,hU=90,yU=500,gU=parseInt(R.c.pagePadding,10),fU=2*gU,vU=gU/2;function bU(e,t,r,n,i){let s,a;if(e<t){const t=e-fU-r;s=Math.min(yU,t),a=(0,ox.YF)(s,n,i)}else{const e=t-(fU+hU+r);a=Math.min(yU,e),s=(0,ox.K6)(a,n,i)}return{width:s,height:a}}function SU(e){const{className:t,serverEntityID:r,providerEntityID:n,metadataItemEntityID:s,type:a,subtype:o,context:c,imageUrl:l,bottom:d}=e,u=(0,ER.c)(a,c,{providerEntityID:n,subtype:o});return i.createElement(Fp.c,{className:"AudioVideoFullMusic-measure-FEuSDT"},(({isMeasured:e,width:o,height:p})=>{if(!e)return null;const m=d?d+vU:0,h=bU(o,p,0,a,c);let y;if(m){const e=bU(o,p,m,a,c);y=e.height>0?e.height/h.height:1,y=Math.max(y,.4)}else y=1;return i.createElement("div",{className:t,style:{transform:`translate(-50%, -50%) scale(${y})`}},i.createElement(nN.c,{cardClassName:"AudioVideoFullMusic-card-fQQHI0 MetadataPosterCard-card-NZOemZ",imageHeight:h.height,imageUrl:l,imageWidth:h.width,metadataItemEntityID:s,metadataKey:"music",providerEntityID:n,serverEntityID:r,showLinkOnly:!0,type:a}),i.createElement("div",{className:"AudioVideoFullMusic-titlesContainer-SZZ7aA"},u.map(((e,t)=>i.createElement(mR.c,{key:t,className:t>0?"AudioVideoFullMusic-secondaryTitle-Tkm0IV AudioVideoFullMusic-title-eOsn4e MetadataPosterTitle-title-bvCBDN":"AudioVideoFullMusic-primaryTitle-zQ4iaF AudioVideoFullMusic-title-eOsn4e MetadataPosterTitle-title-bvCBDN",component:e,metadataItemEntityID:s,providerEntityID:n,serverEntityID:r})))))}))}SU.defaultProps={className:"AudioVideoFullMusic-content-FmEa4l"};const PU=SU,IU=(0,s.Ul)((function(){return(0,At.M3)(xw(),(e=>({serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:e.entityID,context:ax.KW,type:e.type,imageUrl:e.parentThumb||e.grandparentThumb})))}))(PU),EU=function(e){const{serverEntityID:t,providerEntityID:r,imageUrl:n,allowBlur:s}=e;return i.createElement("div",{className:"FullPlayerBackground-backgroundContainer-nZwql5"},i.createElement(Ri,{allowBlur:s,providerEntityID:r,serverEntityID:t,url:n}))},wU=(0,s.Ul)((function(){return(0,At.M3)(((e,{isMusic:t})=>t),(0,Nw.c)(),(0,Sw.c)(),mo.c,((e,t,r={},n)=>{const i=n[t.startMetadataItemEntityID||r.metadataItem];let s;return i&&(s=e?i.parentThumb||i.grandparentThumb:i.grandparentArt||i.art),{serverEntityID:t.serverEntityID,imageUrl:s}}))}))(EU);var CU=r(11872),OU=r(28640),MU=r(16116),TU=r(22920),DU=r(76872),kU=r(98288),xU=r(63988),AU=r(62888);function RU(e){const{children:t,className:r}=e;return i.createElement("div",{className:r,"data-testid":"preplay-secondTitle"},t)}RU.defaultProps={className:"PrePlaySecondaryTitle-secondaryTitle-Mncbw7 PrePlayPrimaryTitle-primaryTitle-iRxqZb"};const NU=RU;function LU({className:e,children:t}){return i.createElement("div",{className:e,"data-testid":"preplay-thirdTitle"},t)}LU.defaultProps={className:"PrePlayTertiaryTitle-tertiaryTitle-YG4Kha"};const jU=LU;var UU=r(34228);function FU(e){const t=e["aria-label"],r=e.className,n=e.style,s={strokeLinejoin:"round",strokeMiterlimit:"1.414",viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-marketing-lyrics-560"};s["aria-hidden"]=!t,s.style=n,s.className=Yj.c.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"m152.241 116.673c5.933-65.31 60.918-116.673 127.75-116.673 66.833 0 121.818 51.363 127.75 116.673h12.268c6.44 0 11.672 5.233 11.672 11.672 0 6.441-5.232 11.673-11.672 11.673h-12.25c-3.675 40.285-26.023 75.197-58.293 96.058l-19.827 231.997c-1.908 21.892-17.5 39.06-37.958 43.82v36.452c0 6.44-5.232 11.673-11.672 11.673s-11.673-5.233-11.673-11.673v-36.592c-20.51-4.97-36.102-22.26-38.01-44.24l-19.792-231.437c-32.305-20.86-54.653-55.756-58.293-96.058h-12.25c-6.44 0-11.672-5.233-11.672-11.673 0-6.439 5.232-11.672 11.672-11.672zm154.14 349.387 18.62-217.665c-14.052 5.25-29.172 8.278-45.01 8.278-15.837 0-30.957-3.045-45.01-8.312l18.568 217.139c1.242 13.982 12.722 24.5 26.74 24.5 13.685 0 24.902-10.29 26.092-23.94zm-38.045-151.059c0-6.441 5.233-11.673 11.673-11.673s11.672 5.233 11.672 11.673v46.672c0 6.439-5.232 11.673-11.672 11.673s-11.673-5.234-11.673-11.673zm11.655-81.674c53.918 0 97.93-40.966 103.81-93.326h-207.62c5.88 52.36 49.893 93.326 103.81 93.326zm103.81-116.672c-5.88-52.36-49.892-93.328-103.81-93.328-53.917 0-97.93 40.969-103.81 93.328z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}FU.propTypes={"aria-label":vw().string,className:vw().string,style:vw().object};const VU=FU;var _U=r(44588),WU=r(75156);function BU(e){const t=e["aria-label"],r=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-player-lyrics-timed-560"};s["aria-hidden"]=!t,s.style=n,s.className=Yj.c.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"M364 84h-56v29.989a194.698 194.698 0 0 1 27.951 6.126 194.755 194.755 0 0 1 24.136 8.966 195.787 195.787 0 0 1 27.995 15.427 197.227 197.227 0 0 1 48.25 45.312A196.461 196.461 0 0 1 454 217.748a194.576 194.576 0 0 1 18.374 52.568A196.97 196.97 0 0 1 476 308c0 8.956-.604 17.911-1.818 26.785a194.966 194.966 0 0 1-6.297 29.166 194.724 194.724 0 0 1-10.968 28.456 196.15 196.15 0 0 1-17.784 29.982 197.385 197.385 0 0 1-51.543 49.428 195.734 195.734 0 0 1-31.878 17.002 194.692 194.692 0 0 1-38.028 11.555 196.89 196.89 0 0 1-37.05 3.625 197.07 197.07 0 0 1-37.117-3.394 194.66 194.66 0 0 1-38.126-11.327 195.651 195.651 0 0 1-31.993-16.815 197.378 197.378 0 0 1-51.839-49.12 196.2 196.2 0 0 1-17.96-29.865 194.83 194.83 0 0 1-11.136-28.372 194.809 194.809 0 0 1-6.473-29.101A197.463 197.463 0 0 1 84 308c0-12.028 1.091-24.054 3.283-35.881a194.544 194.544 0 0 1 17.634-52.258 196.423 196.423 0 0 1 17.69-28.628 197.522 197.522 0 0 1 22.193-25.085 197.243 197.243 0 0 1 26.136-20.985 195.922 195.922 0 0 1 28.434-15.838A194.565 194.565 0 0 1 252 113.989V84h-56V56h168v28zm-83.499 70.001h-1.002c-2.814.013-5.626.093-8.435.253-5.511.315-11.005.924-16.45 1.827a152.77 152.77 0 0 0-37.505 11.318 153.954 153.954 0 0 0-22.375 12.375 155.41 155.41 0 0 0-37.024 34.668 154.38 154.38 0 0 0-13.799 21.452 152.504 152.504 0 0 0-14.78 41.055A154.8 154.8 0 0 0 126 308c0 7.212.496 14.425 1.497 21.568a152.888 152.888 0 0 0 4.872 22.397 152.714 152.714 0 0 0 8.601 22.316 154.23 154.23 0 0 0 14.247 23.934 155.398 155.398 0 0 0 18.231 20.92 155.18 155.18 0 0 0 23.616 18.615 153.646 153.646 0 0 0 23.909 12.522 152.648 152.648 0 0 0 29.855 8.97A154.944 154.944 0 0 0 280 462c9.782 0 19.564-.915 29.172-2.758a152.648 152.648 0 0 0 29.855-8.97 153.71 153.71 0 0 0 25.464-13.533 155.34 155.34 0 0 0 40.02-38.15 154.175 154.175 0 0 0 14.519-24.308 152.67 152.67 0 0 0 8.601-22.316 152.86 152.86 0 0 0 4.872-22.397A155.47 155.47 0 0 0 434 308c0-10.421-1.039-20.841-3.131-31.052a152.544 152.544 0 0 0-14.78-41.055 154.43 154.43 0 0 0-14.366-22.185 155.298 155.298 0 0 0-37.231-34.447 153.835 153.835 0 0 0-21.601-11.862 152.77 152.77 0 0 0-37.505-11.318 154.437 154.437 0 0 0-16.45-1.827c-2.809-.16-5.621-.24-8.435-.253zM252 336V185.167c8.998-2.085 18.374-3.167 28-3.167 34.771 0 66.271 14.115 89.078 36.922L252 336z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}BU.propTypes={"aria-label":vw().string,className:vw().string,style:vw().object};const HU=BU,zU="AudioVideoLyrics-measure-wdru1E",GU="AudioVideoLyrics-rightInfo-hV_K_C",qU="AudioVideoLyrics-innerContent-WkAJkP";var KU=Object.defineProperty,QU=(e,t,r)=>(((e,t,r)=>{t in e?KU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class $U extends i.Component{constructor(e,t){super(e,t),QU(this,"lineRef"),QU(this,"setLineRef",(e=>{this.lineRef=e,this.scrollToLine()})),QU(this,"onContentMeasure",(({width:e})=>{this.setState({isMeasured:!0,pageWidth:e})})),QU(this,"onScrollerMeasure",(({height:e})=>{e&&this.setState({isScrollerMeasured:!0,scrollerHeight:e},(()=>{this.scrollToLine()}))})),QU(this,"onScrollPositionChange",(({scrollTop:e})=>{this.setState({scrollTop:e})})),this.state={isMeasured:!1,isScrollerMeasured:!1,pageWidth:0,scrollerHeight:0,scrollTop:0}}UNSAFE_componentWillReceiveProps(e){this.props.lines!==e.lines&&this.setState({scrollTop:0})}scrollToLine(){if(!this.lineRef)return;const{scrollerHeight:e,scrollTop:t}=this.state,{height:r}=this.lineRef.getBoundingClientRect(),n=this.lineRef.offsetTop;(n+r>t+e||n<t)&&this.setState({scrollTop:n})}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,type:n,context:s,columnAdjustment:a,imageUrl:o,positionSeconds:c,lines:l,selectedIndex:d,lyricsStreamsCount:u,hasTimedLyrics:p,isTimedLyricsActive:m,hasLyricsError:h,hasLyricsFeature:y,isLyricFindProvider:f,onPreviousPress:v,onNextPress:b,onTimedLyricsPress:S}=this.props,{isMeasured:P,isScrollerMeasured:I,pageWidth:E,scrollTop:w}=this.state,C=(0,UU.c)(E,a),O=(0,ox.YF)(C,n,s);return y?i.createElement(Fp.c,{className:zU,onMeasure:this.onContentMeasure},P?i.createElement("div",{className:"AudioVideoLyrics-container-vyNHiP"},i.createElement("div",null,i.createElement(nN.c,{cardClassName:"AudioVideoLyrics-card-jNSb1q MetadataPosterCard-card-NZOemZ",imageHeight:O,imageUrl:o,imageWidth:C,metadataItemEntityID:r,metadataKey:"music",providerEntityID:t,serverEntityID:e,showLinkOnly:!0,type:n})),i.createElement("div",{className:"AudioVideoLyrics-content-dWhDDD"},i.createElement("div",{className:"AudioVideoLyrics-titlesContainer-pzRRGf"},i.createElement(xU.c,null,i.createElement(MU.c,{metadataItemEntityID:r,providerEntityID:t,serverEntityID:e})),i.createElement(NU,null,i.createElement(kU.c,null,i.createElement(TU.c,{metadataItemEntityID:r,providerEntityID:t,serverEntityID:e}))),i.createElement(jU,null,i.createElement(kU.c,null,f?(0,g.c)("Powered by {provider}",{provider:"LyricFind"}):null),i.createElement(AU.c,null,i.createElement("span",{className:GU},i.createElement(sh.c,{className:jt()("AudioVideoLyrics-timedLyricsButton-d8RbGL IconButton-button-s4bVCh",m&&"AudioVideoLyrics-isTimedLyricsActive-lE8FqR"),"data-testid":"toggleTimedLyrics",iconComponent:HU,isDisabled:!p,title:(0,g.c)("Timed Lyrics"),onPress:S})),i.createElement("span",{className:GU},(0,g.c)("{selectedIndex} of {lyricsStreamsCount}",{selectedIndex:d+1,lyricsStreamsCount:u})),i.createElement("span",{className:GU},i.createElement(sh.c,{"data-testid":"previousLyricsPage",iconComponent:WU.c,isDisabled:0===d,title:(0,g.c)("Previous"),onPress:v})),i.createElement("span",{className:GU},i.createElement(sh.c,{"data-testid":"nextLyricsPage",iconComponent:_U.c,isDisabled:d===u-1,title:(0,g.c)("Next"),onPress:b}))))),h?i.createElement("div",{className:qU},i.createElement(DU.c,{title:(0,g.c)("There was an error loading the lyrics")})):null,h?null:i.createElement("div",{className:qU},i.createElement(Fp.c,{className:zU,onMeasure:this.onScrollerMeasure},I?i.createElement(Im.c,{className:"AudioVideoLyrics-scroller-OlRs7f Scroller-vertical-nKq0Q8",scrollTop:w,onScrollPositionChange:this.onScrollPositionChange},l.length?l.map((({spans:e,startOffset:t,endOffset:r},n)=>{const s=Math.round(t/1e3),a=Math.round(r/1e3),o=m&&c>=s&&-1!==t&&(c<a||-1===r);return i.createElement("div",{key:n,ref:o?this.setLineRef:null,className:jt()("AudioVideoLyrics-line-BbPBPC",o&&"AudioVideoLyrics-isLineSelected-lyozox")},e.map((({text:e},t)=>i.createElement("span",{key:t},e))),i.createElement(HU,{className:"AudioVideoLyrics-lineTimedIcon-WXd6DQ"}))})):i.createElement(yp.c,{className:"AudioVideoLyrics-spinner-c5_HkU Spinner-spinner-XTaskc spin-spin-H8VRGl"})):null)))):null):i.createElement("div",{className:"AudioVideoLyrics-upsellContainer-nsWjx9"},i.createElement(CU.c,{iconComponent:VU,text:(0,g.c)("Still think Elton is saying Hold me closer, Tony Danza? With a Plex Pass, enjoy timed lyrics (when available) to your favorite songs for the ultimate sing-along with the right words!"),title:(0,g.c)("Song Lyrics")}),i.createElement(OU.c,{modalMetricsProperties:{context:"lyrics"},origin:ef.yi,serverEntityID:e}))}}const YU=$U;var XU=Object.defineProperty,JU=Object.getOwnPropertySymbols,ZU=Object.prototype.hasOwnProperty,eF=Object.prototype.propertyIsEnumerable,tF=(e,t,r)=>t in e?XU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rF=(e,t,r)=>(tF(e,"symbol"!=typeof t?t+"":t,r),r);function nF(e){return!(!e||!e.timed)}const iF={dispatchFetchPlayQueue:oC.wV,dispatchFetchPlayQueueItemLyrics:oC.wD};class sF extends i.Component{constructor(e,t){super(e,t),rF(this,"onPreviousPress",(()=>{this.setState((e=>({selectedLyricsStreamIndex:Math.max(0,e.selectedLyricsStreamIndex-1)})))})),rF(this,"onNextPress",(()=>{this.setState(((e,t)=>({selectedLyricsStreamIndex:Math.min(t.lyricsStreams.length-1,e.selectedLyricsStreamIndex+1)})))})),rF(this,"onTimedLyricsPress",(()=>{this.setState((e=>({isTimedLyricsActive:!e.isTimedLyricsActive})))})),this.state=this.getDefaultState(e)}componentDidMount(){this._populate(),this.props.hasPremiumLyrics&&this.props.hasLyricsFeature&&this.props.dispatchFetchPlayQueue({playerType:this.props.playerType})}UNSAFE_componentWillReceiveProps(e){this.props.lyricsStreams!==e.lyricsStreams&&this.setState(this.getDefaultState(e,this.state.selectedLyricsStreamIndex))}UNSAFE_componentWillUpdate(e,t){if(this.state.selectedLyricsStreamIndex!==t.selectedLyricsStreamIndex){const r=e.lyricsStreams[t.selectedLyricsStreamIndex];this.setState({isTimedLyricsActive:nF(r)})}}componentDidUpdate(e,t){const r=this.props.lyricsStreams[this.state.selectedLyricsStreamIndex];this.props.hasLyricsFeature!==e.hasLyricsFeature&&this.props.dispatchFetchPlayQueue({playerType:this.props.playerType}),!r||r.lyricsError||this.state.selectedLyricsStreamIndex===t.selectedLyricsStreamIndex&&this.props.lyricsStreams===e.lyricsStreams||this._populate()}getDefaultState(e,t=0){const r=e.lyricsStreams.length>0?t:null;return{isTimedLyricsActive:nF(e.lyricsStreams[r]),selectedLyricsStreamIndex:r}}_populate(){const{playerType:e,playQueueItemEntityID:t,lyricsStreams:r}=this.props,{selectedLyricsStreamIndex:n}=this.state;if(null==n)return;const i=r[n];i&&!i.lines.length&&this.props.dispatchFetchPlayQueueItemLyrics({playerType:e,playQueueItemEntityID:t,streamID:i.id})}render(){const e=this.props,{dispatchFetchPlayQueue:t,dispatchFetchPlayQueueItemLyrics:r,lyricsStreams:n}=e,s=((e,t)=>{var r={};for(var n in e)ZU.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&JU)for(var n of JU(e))t.indexOf(n)<0&&eF.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchFetchPlayQueue","dispatchFetchPlayQueueItemLyrics","lyricsStreams"]),{isTimedLyricsActive:a,selectedLyricsStreamIndex:o}=this.state,c=n[o];return i.createElement(YU,((e,t)=>{for(var r in t||(t={}))ZU.call(t,r)&&tF(e,r,t[r]);if(JU)for(var r of JU(t))eF.call(t,r)&&tF(e,r,t[r]);return e})({hasLyricsError:!!c&&!!c.lyricsError,hasTimedLyrics:nF(c),isLyricFindProvider:!!c&&c.provider===Xy.WG,isTimedLyricsActive:a,lines:null!=c?c.lines:[],lyricsStreamsCount:n.length,selectedIndex:o,onNextPress:this.onNextPress,onPreviousPress:this.onPreviousPress,onTimedLyricsPress:this.onTimedLyricsPress},s))}}const aF=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),Mw(),xw(),(0,Sw.c)(),tp.c,((e,t,r,n,i)=>{const s=ax.KW;return{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:r.entityID,playQueueItemEntityID:n.entityID,positionSeconds:e.positionSeconds,context:s,type:r.type,imageUrl:r.parentThumb||r.grandparentThumb,lyricsStreams:n.lyricsStreams,columnAdjustment:i.columnAdjustment,hasLyricsFeature:!!n.lyricsStreams.length||t.ownerFeatures&&t.ownerFeatures.indexOf("lyrics")>-1,hasPremiumLyrics:n.hasPremiumLyrics}}))}),iF)(sF);var oF=r(32208),cF=r(7396);const lF=[.2,.4,.6,.8];function dF(e,t,r,n){if(r+1<n){const n=r-t-e;if(n<lF.length)return lF[n]}return 1}var uF=r(85180);function pF(){return(0,At.M3)(((e,{playQueueItemEntityID:t})=>t),uF.c,((e,t)=>t[e]))}var mF=r(64904),hF=r(13172),yF=r(90424),gF=r(47792),fF=r(75274),vF=r(25812),bF=r(61004),SF=r(67836);function PF(e){const{className:t,playButtonClassName:r,playCircleClassName:n,serverEntityID:s,providerEntityID:a,imageWidth:o,imageHeight:c,imageUrl:l,title:d,isLiveTVItem:u,recordLink:p,onRecordPress:m,onPlayPress:h}=e;return i.createElement(bF.c,{className:t,component:SF.c,height:c,providerEntityID:a,serverEntityID:s,url:l,width:o},u?i.createElement(vF.c,{circleClassName:"MetadataPosterButtonCard-recordCircle-nH4nXf RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v",className:"MetadataPosterButtonCard-recordButton-E5e5v8 RecordIcon-recordIconContainer-iZKuO3","data-testid":"metadataPosterRecordButton",tabIndex:"-1",title:d,to:p,onPress:m}):i.createElement(fF.c,{circleClassName:n,className:r,"data-testid":"metadataPosterPlayButton",tabIndex:"-1",title:d,onPress:h}))}PF.defaultProps={className:"MetadataPosterButtonCard-card-TT2yq7",playButtonClassName:"MetadataPosterButtonCard-playButton-FeLknx PlayButton-playButton-vS1WII",playCircleClassName:"MetadataPosterButtonCard-playCircle-Avpul9 PlayButton-playCircle-fK1f_v",isLiveTVItem:!1};const IF=PF;function EF(e){const{className:t,titlesContainerClassName:r,sourceTextClassName:n,durationContainerClassName:s,serverEntityID:a,providerEntityID:o,metadataItemEntityID:c,type:l,subtype:d,metadataKey:u,title:p,duration:m,isPreview:h,context:y,imageWidth:f,imageHeight:v,imageUrl:b,onPlayPress:S}=e,P=(0,ER.c)(l,y,{providerEntityID:o,subtype:d});let I="";return m&&(I=h?(0,g.c)("Preview"):l===Uw.UJ?(0,dM.c)(m):(0,pt.c)(m)),i.createElement("div",{className:t},i.createElement("div",{className:"AudioVideoPlayerPlayQueueMetadata-cardContainer-YaEwYK"},i.createElement(IF,{className:"AudioVideoPlayerPlayQueueMetadata-card-eFDGn2 MetadataPosterButtonCard-card-TT2yq7",imageHeight:v,imageUrl:b,imageWidth:f,metadataItemEntityID:c,metadataKey:u,providerEntityID:o,serverEntityID:a,title:(0,g.c)("Play {title}",{title:p}),type:l,onPlayPress:S})),i.createElement("div",{className:r,"data-testid":"playQueueTitleContainer"},P.map(((e,t)=>i.createElement(mR.c,{key:t,component:e,isSecondary:t>0,metadataItemEntityID:c,providerEntityID:o,serverEntityID:a})))),i.createElement(gF.c,{metadataItemEntityID:c,serverEntityID:a,textClassName:n}),I?i.createElement("div",{className:s},I):null)}EF.defaultProps={className:"AudioVideoPlayerPlayQueueMetadata-container-a813zv",titlesContainerClassName:"AudioVideoPlayerPlayQueueMetadata-titlesContainer-ndQha4",sourceTextClassName:"AudioVideoPlayerPlayQueueMetadata-sourceText-FWZTXl",durationContainerClassName:"AudioVideoPlayerPlayQueueMetadata-durationContainer-dDrbIT"};const wF=EF;var CF=Object.defineProperty,OF=Object.defineProperties,MF=Object.getOwnPropertyDescriptors,TF=Object.getOwnPropertySymbols,DF=Object.prototype.hasOwnProperty,kF=Object.prototype.propertyIsEnumerable,xF=(e,t,r)=>t in e?CF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,AF=(e,t)=>{for(var r in t||(t={}))DF.call(t,r)&&xF(e,r,t[r]);if(TF)for(var r of TF(t))kF.call(t,r)&&xF(e,r,t[r]);return e};const RF=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),(e=>{const t=ax.wH,r=(0,ox.u2)(e.type,t)===ox.cr?64:36,n=(0,OT.c)(r,null,e.type,e,t);return{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,type:e.type,subtype:e.subtype,metadataKey:e.key,duration:e.duration,title:e.title,isPreview:!!e.preview,context:t,imageWidth:n.width,imageHeight:n.height,imageUrl:n.url}}))}),(function(e,t){const r={playerType:t.playerType};return{onPlayPress(){e((0,oC.oN)(((e,t)=>OF(e,MF(t)))(AF({},r),{index:t.sortIndex}))),t.mediaType===jw.im&&e((0,oC._W)(r))}}}))((function(e){const t=e,{mediaType:r}=t,n=((e,t)=>{var r={};for(var n in e)DF.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&TF)for(var n of TF(e))t.indexOf(n)<0&&kF.call(e,n)&&(r[n]=e[n]);return r})(t,["mediaType"]);return i.createElement(wF,AF({},n))})),NF={.2:"AudioVideoPlayQueueItem-opacity20Percent-xYgIOe",.4:"AudioVideoPlayQueueItem-opacity40Percent-rtxnPq",.6:"AudioVideoPlayQueueItem-opacity60Percent-UEBrQ9",.8:"AudioVideoPlayQueueItem-opacity80Percent-dwpDH0"};function LF(e){const{metadataItemEntityID:t,playerType:r,mediaType:n,sortIndex:s,opacity:a,isCurrentItem:o,isPlayerPaused:c,isItemDragging:l,connectDragSource:d,onRemovePress:u}=e;return i.createElement("div",{className:jt()("AudioVideoPlayQueueItem-container-eFsnAY",l&&"AudioVideoPlayQueueItem-isItemDragging-NgdCJR",o&&"AudioVideoPlayQueueItem-isCurrentItem-d_wel0",null!=a&&NF[a]),"data-testid":"playQueueItem"},i.createElement("div",{className:"AudioVideoPlayQueueItem-leftContainer-KKhwv9"},o?i.createElement(mF.c,{isPaused:c}):null,o?null:d(i.createElement("div",{className:"AudioVideoPlayQueueItem-moveControls-YPFEj8","data-testid":"playQueueReorder"},i.createElement(yF.c,null)))),i.createElement(RF,{className:"AudioVideoPlayQueueItem-metadataContainer-VJuyN1 AudioVideoPlayerPlayQueueMetadata-container-a813zv",durationContainerClassName:"AudioVideoPlayQueueItem-metadataDurationContainer-z89eyc AudioVideoPlayerPlayQueueMetadata-durationContainer-dDrbIT",mediaType:n,metadataItemEntityID:t,playerType:r,sortIndex:s,sourceTextClassName:"AudioVideoPlayQueueItem-sourceText-jLDssz SourceBadge-text-k0_hzv"}),o?null:i.createElement("div",{className:"AudioVideoPlayQueueItem-removeControls-e9A2CD"},i.createElement(sh.c,{className:"AudioVideoPlayQueueItem-removeButton-W30qxb IconButton-button-s4bVCh","data-testid":"playQueueRemove",iconComponent:hF.c,kind:Sg.od,title:(0,g.c)("Remove"),onPress:u})))}LF.defaultProps={opacity:1,isCurrentItem:!1,isPlayerPaused:!1,isItemDragging:!1,connectDragSource:e=>e};const jF=LF,UF=(0,s.Ul)((function(){return(0,At.M3)(pF(),(e=>{const t=(0,Uw.GG)(e.type),r=t&&t.mediaType;return{metadataItemEntityID:e.metadataItem,mediaType:r}}))}),(function(e,t){return{onRemovePress(r){e((0,oC.gN)({playerType:t.playerType,playQueueItemEntityID:t.playQueueItemEntityID}))}}}))(jF),FF=parseInt(R.c.playQueueSidePadding,10);class VF extends i.Component{shouldComponentUpdate(e,t){return(0,cy.c)(this,e,t)}render(){const{playerType:e,item:t,itemType:r,currentOffset:n}=this.props;if(!n||r!==Bp.o1)return null;const{x:s,y:a}=n,o=`translate3d(${s}px, ${a}px, 0)`,c={position:"absolute",WebkitTransform:o,msTransform:o,transform:o,width:window.innerWidth-2*FF+"px"};return i.createElement(Wp.c,null,i.createElement("div",{className:"AudioVideoPlayQueueDragPreview-dragPreview-WFloJC",style:c},i.createElement(UF,{isItemDragging:!0,playQueueItemEntityID:t.playQueueItemEntityID,playerType:e})))}}const _F=(0,_p.y)((function(e){return{item:e.getItem(),itemType:e.getItemType(),currentOffset:e.getSourceClientOffset()}}))(VF);var WF=Object.defineProperty,BF=Object.getOwnPropertySymbols,HF=Object.prototype.hasOwnProperty,zF=Object.prototype.propertyIsEnumerable,GF=(e,t,r)=>t in e?WF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const qF={beginDrag:({playQueueItemEntityID:e})=>({playQueueItemEntityID:e}),endDrag(e,t,r){e.onPlayQueueItemDragEnd(t.getItem(),t.didDrop())}},KF={hover(e,t,r){const n=(0,Yp.findDOMNode)(r).getBoundingClientRect(),i=(n.bottom-n.top)/2,s=t.getClientOffset().y-n.top,a=e.sortIndex,o=s>i?a+1:a;e.onPlayQueueItemDragMove(o)}};class QF extends i.Component{componentDidMount(){this.props.connectDragPreview((0,$p.s)())}shouldComponentUpdate(e,t){return(0,cy.c)(this,e,t)}render(){const e=this.props,{isDragging:t,isDraggingBefore:r,isDraggingAfter:n,isOver:s,connectDropTarget:a,connectDragSource:o}=e,c=((e,t)=>{var r={};for(var n in e)HF.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&BF)for(var n of BF(e))t.indexOf(n)<0&&zF.call(e,n)&&(r[n]=e[n]);return r})(e,["isDragging","isDraggingBefore","isDraggingAfter","isOver","connectDropTarget","connectDragSource"]);return a(i.createElement("div",{className:jt()("AudioVideoPlayQueueItemDragSource-container-QBGSTl",t&&Xp.A$,r&&s&&Xp.Qh,n&&s&&Xp.El)},i.createElement(UF,((e,t)=>{for(var r in t||(t={}))HF.call(t,r)&&GF(e,r,t[r]);if(BF)for(var r of BF(t))zF.call(t,r)&&GF(e,r,t[r]);return e})({connectDragSource:o},c))))}}const $F=(0,Kp.o)(Bp.o1,KF,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((0,Qp.I)(Bp.o1,qF,(function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(QF)),YF=function(e){const{title:t}=e;return i.createElement("div",{className:"AudioVideoFullPlayerContentHeading-heading-ctpALe"},t)},XF=function(e){const{children:t}=e;return i.createElement("div",{className:"AudioVideoFullPlayerContentHeadingContainer-headingContainer-kf2foD"},t,i.createElement("div",{className:"AudioVideoFullPlayerContentHeadingContainer-divider-UdGkrP"}))};var JF=Object.defineProperty,ZF=(e,t,r)=>(((e,t,r)=>{t in e?JF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class eV extends i.Component{constructor(e,t){super(e,t),ZF(this,"onAddToPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0})})),ZF(this,"onAddToPlaylistClose",(()=>{this.setState({isAddToPlaylistModalOpen:!1})})),this.state={isAddToPlaylistModalOpen:!1}}render(){const{serverEntityID:e,providerEntityID:t,playQueueID:r,playQueueItemEntityIDs:n,playQueueSelectedItemOffset:s,playQueueLength:a,playerType:o,currentIndex:c,moveIndex:l,scrollTop:d,isPlayerPaused:u,showAddToPlaylist:p,onPlayQueueItemDragMove:m,onPlayQueueItemDragEnd:h}=this.props,{isAddToPlaylistModalOpen:y}=this.state,f=s-c,v=f+n.length-1;return i.createElement("div",{className:"AudioVideoPlayQueue-container-EEXkSe"},i.createElement(XF,null,i.createElement(YF,{title:(0,g.c)("Play Queue")}),i.createElement("div",{className:"AudioVideoPlayQueue-topContainer-LUFN0l"},i.createElement("div",{className:"AudioVideoPlayQueue-topLeft-lNQ5jF"},i.createElement("span",{className:"AudioVideoPlayQueue-count-QTkd3b"},1===a?(0,g.c)("{itemCount} item",{itemCount:a}):(0,g.c)("{itemCount} items",{itemCount:a}))),i.createElement("div",{className:"AudioVideoPlayQueue-topRight-Jgi_Vk"},p?i.createElement(rd.o,{tooltip:(0,g.c)("Add to Playlist"),zIndex:1115},i.createElement(Ut.wP,{accessibilityLabel:(0,g.c)("Add to Playlist"),icon:oF.default,iconSize:"l",size:"s",testID:"queueAddPlaylist",transparent:!0,onPress:this.onAddToPlaylistPress})):null))),i.createElement(Im.c,{autoScroll:!0,className:"AudioVideoPlayQueue-content-qs6dmY Scroller-vertical-nKq0Q8",scrollTop:d,smoothScroll:!1},n.map(((e,t)=>{const r=null!=l,n=c===t,s=r&&l===t,d=r&&l===t+1;return i.createElement($F,{key:e,isCurrentItem:n,isDraggingAfter:d,isDraggingBefore:s,isPlayerPaused:u,opacity:dF(t,f,v,a),playQueueItemEntityID:e,playerType:o,sortIndex:t,onPlayQueueItemDragEnd:h,onPlayQueueItemDragMove:m})}))),i.createElement(_F,{playerType:o}),p?i.createElement(cF.c,{isOpen:y,playQueueID:r,providerEntityID:t,serverEntityID:e,onModalClose:this.onAddToPlaylistClose}):null)}}const tV=eV;var rV=Object.defineProperty,nV=Object.defineProperties,iV=Object.getOwnPropertyDescriptors,sV=Object.getOwnPropertySymbols,aV=Object.prototype.hasOwnProperty,oV=Object.prototype.propertyIsEnumerable,cV=(e,t,r)=>t in e?rV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lV=(e,t)=>{for(var r in t||(t={}))aV.call(t,r)&&cV(e,r,t[r]);if(sV)for(var r of sV(t))oV.call(t,r)&&cV(e,r,t[r]);return e},dV=(e,t,r)=>(cV(e,"symbol"!=typeof t?t+"":t,r),r);const uV=parseInt(R.c.playQueueItemHeight,10),pV=(0,At.M3)((e=>e.ui.audioVideoPlayer),Mw(),sI(),((e,t,r)=>{const n=e.playQueue,i=Oe._u(r.identifier,Oe.Qh),s=!n.isLocal&&i;return{serverEntityID:t.entityID,providerEntityID:r.entityID,playQueueID:n.playQueueID,isQueueRepeated:n.repeat,isQueueShuffled:n.playQueueShuffled,isPlayerPaused:e.isPaused,isUpdatePending:n.isUpdatePending,playQueueItemEntityIDs:n.playQueueItems,playQueueSelectedItemOffset:n.playQueueSelectedItemOffset,playQueueLength:n.length,currentIndex:n.currentIndex,showAddToPlaylist:s}})),mV={dispatchMovePlayQueueItem:oC.cg};class hV extends i.Component{constructor(e,t){super(e,t),dV(this,"shouldUpdateScrollTop"),dV(this,"onPlayQueueItemDragMove",(e=>{e!==this.state.moveIndex&&this.setState({moveIndex:e})})),dV(this,"onPlayQueueItemDragEnd",((e,t)=>{const{playerType:r}=this.props,{moveIndex:n}=this.state;t&&null!=n&&(0,hv.SS)((()=>{this.props.dispatchMovePlayQueueItem(((e,t)=>nV(e,iV(t)))(lV({playerType:r},e),{moveIndex:n}))})),this.setState({moveIndex:null})})),dV(this,"onScrollPositionChange",(({scrollTop:e})=>{this.setState({scrollTop:e})})),this.shouldUpdateScrollTop=!1,this.state={moveIndex:null,scrollTop:uV*e.currentIndex}}UNSAFE_componentWillReceiveProps(e){this.props.isQueueRepeated===e.isQueueRepeated&&this.props.isQueueShuffled===e.isQueueShuffled||(this.shouldUpdateScrollTop=!0),this.shouldUpdateScrollTop&&this.props.currentIndex!==e.currentIndex&&this.setState({scrollTop:uV*e.currentIndex}),this.props.isUpdatePending&&!e.isUpdatePending&&(this.shouldUpdateScrollTop=!1)}render(){const e=this.props,{dispatchMovePlayQueueItem:t}=e,r=((e,t)=>{var r={};for(var n in e)aV.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&sV)for(var n of sV(e))t.indexOf(n)<0&&oV.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchMovePlayQueueItem"]),{moveIndex:n,scrollTop:s}=this.state;return i.createElement(tV,lV({moveIndex:n,scrollTop:s,onPlayQueueItemDragEnd:this.onPlayQueueItemDragEnd,onPlayQueueItemDragMove:this.onPlayQueueItemDragMove,onScrollPositionChange:this.onScrollPositionChange},r))}}const yV=(0,s.Ul)(pV,mV)(hV);var gV=r(40236);const fV=(0,At.M3)(gV.c,(e=>e.hubs));function vV(){return(0,At.M3)(((e,{hubEntityID:t})=>t),fV,((e,t)=>t[e]))}var bV=r(15072),SV=r(46800);var PV=r(56068),IV=r(49579);const EV=vw().shape({key:vw().string,hubKey:vw().string,title:vw().string,icon:vw().string,type:vw().string,subtype:vw().string,agent:vw().string,updatedAt:vw().number,scannedAt:vw().number,context:vw().string});var wV=r(77388),CV=r(13796),OV=Object.defineProperty,MV=Object.defineProperties,TV=Object.getOwnPropertyDescriptors,DV=Object.getOwnPropertySymbols,kV=Object.prototype.hasOwnProperty,xV=Object.prototype.propertyIsEnumerable,AV=(e,t,r)=>t in e?OV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RV=(e,t)=>{for(var r in t||(t={}))kV.call(t,r)&&AV(e,r,t[r]);if(DV)for(var r of DV(t))xV.call(t,r)&&AV(e,r,t[r]);return e},NV=(e,t)=>MV(e,TV(t));const LV={};function jV(e,t,r=0,n=0){const i=e+t+r+n;if(LV.hasOwnProperty(i))return LV[i];const s=(0,ox.u2)(e,t),{titleHeight:a,minCellWidth:o,preferredCellWidth:c,minColumns:l,maxColumns:d}=(0,CV.c)({type:e,aspectRatio:s,titleCount:n,context:t}),u=(0,nx.cp)({direction:nx.uw,rows:1,overscan:0,innerHorizontalPadding:30,innerVerticalPadding:30,outerPaddingTop:10,outerPaddingRight:5,outerPaddingBottom:5,outerPaddingLeft:5,getCellWidth:e=>(0,sx.c)(NV(RV({},e),{preferredCellWidth:c,minCellWidth:o,minColumns:l,maxColumns:d,columnAdjustment:r})),getCellHeight:e=>(0,ix.c)(NV(RV({},e),{aspectRatio:s,titleHeight:a}))});return u.cellOptions={preferredCellWidth:c,minCellWidth:o,minColumns:l,maxColumns:d,columnAdjustment:r,aspectRatio:s,titleHeight:a},LV[i]=u,u}var UV=r(11928),FV=Object.defineProperty,VV=Object.defineProperties,_V=Object.getOwnPropertyDescriptors,WV=Object.getOwnPropertySymbols,BV=Object.prototype.hasOwnProperty,HV=Object.prototype.propertyIsEnumerable,zV=(e,t,r)=>t in e?FV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const GV=function(e){const t=e,{metadataListEntityID:r,metadataItemEntityIDs:n,metricsContext:s,containerKey:a,listType:o,listSubtype:c,listContext:l,columnAdjustment:d,populatedRange:u,displayFieldDefinitions:p,displayFields:m}=t,h=((e,t)=>{var r={};for(var n in e)BV.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&WV)for(var n of WV(e))t.indexOf(n)<0&&HV.call(e,n)&&(r[n]=e[n]);return r})(t,["metadataListEntityID","metadataItemEntityIDs","metricsContext","containerKey","listType","listSubtype","listContext","columnAdjustment","populatedRange","displayFieldDefinitions","displayFields"]),{serverEntityID:y,providerEntityID:g,hubIdentifier:f}=h,v=(0,ER.c)(o,l,{providerEntityID:g,subtype:c,isExternal:f.indexOf("external")>-1,displayFields:m}),b=jV(o,l,d,v.length);return i.createElement(Yk,((e,t)=>VV(e,_V(t)))(((e,t)=>{for(var r in t||(t={}))BV.call(t,r)&&zV(e,r,t[r]);if(WV)for(var r of WV(t))HV.call(t,r)&&zV(e,r,t[r]);return e})({},h),{cellRenderer:(0,Px.c)({serverEntityID:y,providerEntityID:g,metadataListEntityID:r,containerKey:a,listType:o,listSubtype:c,listContext:l,titleComponents:v,displayFieldDefinitions:p,displayFields:m,isCondensed:!0,metricsContext:s},UV.c),containerKey:a,items:n,itemsOffset:u.start,keyPropName:"metadataItemEntityID",layout:b}))};var qV=r(97192),KV=Object.defineProperty,QV=Object.defineProperties,$V=Object.getOwnPropertyDescriptors,YV=Object.getOwnPropertySymbols,XV=Object.prototype.hasOwnProperty,JV=Object.prototype.propertyIsEnumerable,ZV=(e,t,r)=>t in e?KV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const e_=(0,th.c)((function(){return(0,At.M3)(((e,{listContext:t})=>t),((e,{allowSourceTitle:t})=>t),((e,{metricsPage:t})=>t),(0,Ih.c)(),(0,SV.c)(),vV(),(0,At.M3)((0,bV.c)((0,SV.c)(),["identifier","title","sourceTitle"]),(0,bV.c)((0,Ih.c)(),["friendlyName","sourceTitle"]),((e,t)=>function(e={},t={}){const{identifier:r,title:n,sourceTitle:i}=e,{friendlyName:s,sourceTitle:a}=t;let o;return Oe._u(r,Oe.Qh)?o=a||s:n&&(o=i?`${n}  ${i}`:n),o}(e,t))),((e,t,r,n,i,s,a)=>{var o;const c=s.hubIdentifier.indexOf("music.video")>-1?IV.kN:s.type,l=e||function(e,t=ax.Qh){switch(e){case"home.continue":return ax.Su;case"home.recommended":return ax._2;case"home.watchTogether":return ax.s5;default:return t}}(s.hubIdentifier),d=(0,PV.c)(r,s.context||s.hubIdentifier);let u;if(s.key&&l!==ax.Su){const e={key:s.key,title:s.title,pageType:Fm._K,context:d};u=s.source?(0,qa.c)(s.source,e):(0,wV.c)(n,i,e)}const p={component:GV,metadataListEntityID:s.metadataList,metricsContext:d,hubIdentifier:s.hubIdentifier,title:s.title,sourceTitle:t?a:null,attribution:s.attribution,route:u,style:s.style,size:s.size,more:s.more,random:s.random,autoAdvanceDelayMs:s.autoAdvanceDelayMs,displayFieldDefinitions:null==(o=s.Meta)?void 0:o.DisplayFields,containerKey:s.key,listType:c,listSubtype:s.subtype,listContext:l};if(s.source){const{serverEntityID:e,providerEntityID:t}=function(e){if(!e)return;let t,r;const n=e.match(/^server:\/\/(.*)\/(.*)/);if(n)t=n[1],r=n[2];else{const n=e.match(/^provider:\/\/(.*)/);if(!n)return;t=Me.A,r=n[1]}const i=(0,By.c)(Hy.qe,t);return{serverEntityID:i,providerEntityID:(0,By.c)(Hy.SF,r,i)}}(s.source);p.serverEntityID=e,p.providerEntityID=t}return p}))}))(qV.c);e_.propTypes=((e,t)=>QV(e,$V(t)))(((e,t)=>{for(var r in t||(t={}))XV.call(t,r)&&ZV(e,r,t[r]);if(YV)for(var r of YV(t))JV.call(t,r)&&ZV(e,r,t[r]);return e})({},e_.propTypes),{providerEntityID:vw().string.isRequired,serverEntityID:vw().string.isRequired,hubEntityID:vw().string.isRequired,sourceDirectory:EV,allowSourceTitle:vw().bool});const t_=e_;var r_=Object.defineProperty,n_=(e,t,r)=>(((e,t,r)=>{t in e?r_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const i_={opacity:0,pointerEvents:"none"},s_={opacity:1,pointerEvents:"auto"};class a_ extends i.Component{constructor(e,t){super(e,t),n_(this,"_initialCount"),n_(this,"_readyCount"),n_(this,"onListReady",(()=>{++this._readyCount===this._initialCount&&this.setState({isReady:!0})})),this.state={isReady:!1},this._readyCount=0}UNSAFE_componentWillMount(){this._initialCount=this.props.hubEntityIDs.length}UNSAFE_componentWillReceiveProps(e){const t=e.hubEntityIDs.length,r=this.props.hubEntityIDs.length;this.state.isReady||t===r||(this._initialCount=t,this._readyCount===t&&this.setState({isReady:!0}))}shouldComponentUpdate(e,t){return(0,cy.c)(this,e,t)}render(){const{allowHomeHubIndicator:e,allowPersistentHomeHubStatus:t,allowToggleHomeHub:r,allowSourceTitle:n,className:s,serverEntityID:a,providerEntityID:o,directoryKey:c,hubEntityIDs:l,sourceDirectory:d,columnAdjustment:u,listContext:p}=this.props,{isReady:m}=this.state;return i.createElement("div",{className:s,style:m?s_:i_},l.map((s=>i.createElement(t_,{key:s,allowHomeHubIndicator:e,allowPersistentHomeHubStatus:t,allowSourceTitle:n,allowToggleHomeHub:r,columnAdjustment:u,directoryKey:c,hubEntityID:s,listContext:p,providerEntityID:o,serverEntityID:a,sourceDirectory:d,onListReady:this.onListReady}))))}}const o_=a_;var c_=r(45080),l_=r(13704),d_=r(76492);const u_=function(e){const{title:t,summary:r}=e;return i.createElement(i.Fragment,null,i.createElement(c_.c,null,i.createElement(xU.c,null,i.createElement(kU.c,null,t))),i.createElement(l_.c,null),i.createElement(c_.c,null,i.createElement(d_.c,null,r)))};var p_=r(60680),m_=r(78143),h_=r(36940);const y_={attributionLogo:"PrePlayAttributionLogo-attributionLogo-ZJc7rR"};var g_=Object.defineProperty,f_=Object.getOwnPropertySymbols,v_=Object.prototype.hasOwnProperty,b_=Object.prototype.propertyIsEnumerable,S_=(e,t,r)=>t in e?g_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P_=(e,t)=>{for(var r in t||(t={}))v_.call(t,r)&&S_(e,r,t[r]);if(f_)for(var r of f_(t))b_.call(t,r)&&S_(e,r,t[r]);return e};function I_(e){return i.createElement("div",{className:y_.attributionLogo},i.createElement(h_.c,P_({},e)))}var E_=r(5648),w_=r(49256);function C_(){return(0,At.M3)((0,E_.c)(),(0,pT.c)(),((e,t)=>{if(t)return(0,w_.c)(e,t.librarySectionID)}))}var O_=r(85328);function M_(e){const{className:t,linkClassName:r,server:n,provider:s,sourceDirectory:a,fallbackFilterKey:o,type:c,tags:l,limit:d}=e;if(!l||!l.length)return null;const u=c&&(0,Uw.GG)(c);return i.createElement("span",{className:t},l.map(((e,t)=>{if(t>=d)return;let c;if(e.directory&&e.key&&a)c=(0,Wm.c)(n,s,a,{key:e.key,title:e.tag});else if((e.filter||e.id)&&a){const t={filters:e.filter,filterLabel:e.tag};!t.filter&&o&&e.id&&(t.filters=`${o}=${e.id}`),u&&(t.type=u.id),e.context&&(t.context=e.context),c=function(e,t,r,n={},i){if(r){const e=r.pivots.find((({key:e})=>e.includes(r.key)));n.key=t.identifier===Oe.Qh?e.key:r.key}return(0,Wm.c)(e,t,r,n,i)}(n,s,a,t)}return i.createElement("span",{key:t},i.createElement(bp.c,{className:r,isDisabled:!c,to:c},e.tag),t+1<d&&t+1<l.length?", ":null)})))}M_.defaultProps={linkClassName:"PrePlayTagList-tagsListLink-STf9ew Link-link-SxPFpG",limit:1/0};const T_=M_;var D_=r(77292),k_=r(41380);function x_(e){const{children:t,server:r,provider:n,sourceDirectory:s,type:a,Director:o,Writer:c,Studio:l,studio:d,isLibraryProvider:u}=e;return t||o.length||c.length||d||l.length?i.createElement(D_.c,null,t,o.length?i.createElement(k_.c,{label:(0,g.c)("Directed by")},i.createElement(T_,{fallbackFilterKey:"director",provider:n,server:r,sourceDirectory:s,tags:o,type:a})):null,c.length?i.createElement(k_.c,{label:(0,g.c)("Written by")},i.createElement(T_,{fallbackFilterKey:"writer",provider:n,server:r,sourceDirectory:s,tags:c,type:a})):null,l.length?i.createElement(k_.c,{label:(0,g.c)("Studio")},i.createElement(T_,{fallbackFilterKey:"studio",provider:n,server:r,sourceDirectory:s,tags:l,type:a})):null,d&&!l.length?i.createElement(k_.c,{label:(0,g.c)("Studio")},i.createElement(T_,{provider:n,server:r,sourceDirectory:s,tags:[{filter:u?`studio=${encodeURIComponent(encodeURIComponent(d))}`:null,tag:d}],type:a})):null):null}x_.defaultProps={Director:[],Writer:[]};const A_=x_,R_=(0,s.Ul)((function(){return(0,At.M3)(O_.c,kj.c,C_(),(0,pT.c)(),((e,t,r,n={})=>({server:e,provider:t,isLibraryProvider:Oe._u(t.identifier,Oe.Qh),sourceDirectory:r,Director:n.Director,Writer:n.Writer,Studio:n.Studio,studio:n.studio})))}))(A_);function N_(e,t,r){return!!(e.ownerFeatures&&e.ownerFeatures.indexOf(p._w)>-1&&t&&t.isLibraryItem&&!t.isExtra&&function(e){return!e||e.protocol===rI.y||parseInt(e.protocolVersion,10)>=3}(r))}var L_=r(99516);function j_(e,t,r){return!(!(e.ownerFeatures&&e.ownerFeatures.indexOf(p.wt)>-1)||e.isShared||!t||!t.isLibraryItem||t.isExtra||!function(e){return!e||e.protocol===rI.y||parseInt(e.protocolVersion,10)>=3}(r))}var U_=r(99567),F_=r(45020),V_=r(27904),__=r(46820),W_=Object.defineProperty;class B_ extends i.Component{constructor(){super(...arguments),((e,t,r)=>{((e,t,r)=>{t in e?W_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"onPress",(e=>{this.props.onStreamSelect(this.props.stream.id),this.props.onMenuClose()}))}render(){const{className:e,children:t,stream:r}=this.props;return i.createElement(cA.c,{className:e,isSelected:!!r.selected,onPress:this.onPress},t)}}const H_=B_,z_=function(e){const{target:t,isOpen:r,serverEntityID:n,audioStreams:s,onMenuClose:a,onStreamSelect:o}=e;return i.createElement(go.c,{isOpen:r,size:Pp.OM,target:t,onMenuClose:a},s.map((e=>i.createElement(H_,{key:e.id,stream:e,onMenuClose:a,onStreamSelect:o},i.createElement(__.c,{serverEntityID:n,stream:e,type:"audio"}),e.title?i.createElement("span",{className:"AudioStreamMenu-extendedTitle-nR1Kdl"},e.title):null))))};var G_=r(54392),q_=r(2952);var K_=Object.defineProperty,Q_=(e,t,r)=>(((e,t,r)=>{t in e?K_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class $_ extends i.Component{constructor(e,t){super(e,t),Q_(this,"onDeletePress",(()=>{this.setState({isConfirmDeleteModalOpen:!0})})),Q_(this,"onDeleteConfirm",(()=>{const{subtitlesStream:e,onStreamDelete:t}=this.props;this.setState({isConfirmDeleteModalOpen:!1}),t(e.key),this.props.onMenuClose()})),Q_(this,"onDeleteCancel",(()=>{this.setState({isConfirmDeleteModalOpen:!1})})),this.state={isConfirmDeleteModalOpen:!1}}render(){const{serverEntityID:e,subtitlesStream:t,isStreamDeleteInProgress:r,hasExternalSubtitlesStreams:n,canShowDeleteSubtitlesAction:s,onMenuClose:a,onStreamSelect:o}=this.props,c=!!t.key&&s;return i.createElement("div",{className:"SubtitlesStreamMenuItem-stream-qxOC_K"},i.createElement(H_,{className:n?"SubtitlesStreamMenuItem-menuItemContainer-zPREKN SelectedMenuItem-menuItemContainer-PNDPtO":void 0,stream:t,onMenuClose:a,onStreamSelect:o},i.createElement(__.c,{serverEntityID:e,stream:t,type:"subtitles"}),t.title?i.createElement("span",{className:"SubtitlesStreamMenuItem-extendedTitle-Ug5ZYY"},t.title):null),c?i.createElement(i.Fragment,null,i.createElement("div",{className:"SubtitlesStreamMenuItem-deleteContainer-bHro2M"},i.createElement(sh.c,{ariaLabel:(0,g.c)("Delete Subtitle"),className:"SubtitlesStreamMenuItem-deleteButton-k95vLC IconButton-button-s4bVCh",iconComponent:hF.c,onPress:this.onDeletePress})),i.createElement(JO.c,{confirmLabel:(0,g.c)("Delete"),isConfirmButtonSpinning:r,isOpen:this.state.isConfirmDeleteModalOpen,kind:Sg.od,message:(0,g.c)("Are you sure you want to delete this subtitle file?"),metricsPage:l.cd,title:(0,g.c)("Delete Subtitle File"),onCancel:this.onDeleteCancel,onConfirm:this.onDeleteConfirm})):null)}}const Y_=$_;var X_=Object.defineProperty,J_=(e,t,r)=>(((e,t,r)=>{t in e?X_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Z_ extends i.Component{constructor(e,t){super(e,t),J_(this,"onMoreSubtitlesPress",(()=>{this.setState({isSubtitlesModalOpen:!0})})),J_(this,"onSubtitlesModalClose",(()=>{this.setState({isSubtitlesModalOpen:!1})})),J_(this,"onUploadSubtitlesPress",(()=>{this.setState({isSubtitlesUploadModalOpen:!0})})),J_(this,"onSubtitlesUploadModalClose",(()=>{this.setState({isSubtitlesUploadModalOpen:!1})})),this.state={isSubtitlesModalOpen:!1,isSubtitlesUploadModalOpen:!1}}render(){const{target:e,isOpen:t,serverEntityID:r,metadataItemEntityID:n,subtitlesStreams:s,isStreamDeleteInProgress:a,canShowDeleteSubtitlesAction:o,canShowMoreSubtitlesAction:c,canShowUploadSubtitlesAction:l,onMenuClose:d,onStreamSelect:u,onStreamDelete:p}=this.props,{isSubtitlesModalOpen:m,isSubtitlesUploadModalOpen:h}=this.state,y=s.some((e=>!!e.key));return i.createElement(i.Fragment,null,i.createElement(go.c,{isOpen:t,size:Pp.OM,target:e,onMenuClose:d},s.map((e=>i.createElement(Y_,{key:e.id,canShowDeleteSubtitlesAction:o,hasExternalSubtitlesStreams:y,isStreamDeleteInProgress:a,serverEntityID:r,subtitlesStream:e,onMenuClose:d,onStreamDelete:p,onStreamSelect:u}))),c?i.createElement(fo.c,{onPress:this.onMoreSubtitlesPress},(0,g.c)("Search...")):null,l?i.createElement(fo.c,{onPress:this.onUploadSubtitlesPress},(0,g.c)("Upload...")):null),i.createElement(G_.c,{isOpen:m,metadataItemEntityID:n,onModalClose:this.onSubtitlesModalClose}),i.createElement(q_.c,{isOpen:h,metadataItemEntityID:n,onModalClose:this.onSubtitlesUploadModalClose}))}}const eW=Z_,tW="PrePlayDetailsStreamsGroup-loadingMessage-_goxEi";var rW=Object.defineProperty,nW=(e,t,r)=>(((e,t,r)=>{t in e?rW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class iW extends i.Component{constructor(e,t){super(e,t),nW(this,"_audioStreamMenuButtonID"),nW(this,"_subtitlesStreamMenuButtonID"),nW(this,"onAudioStreamMenuButtonPress",(e=>{this.setState({isAudioStreamMenuOpen:!this.state.isAudioStreamMenuOpen})})),nW(this,"onAudioStreamMenuClose",(()=>{this.setState({isAudioStreamMenuOpen:!1})})),nW(this,"onSubtitlesStreamMenuButtonPress",(e=>{this.setState({isSubtitlesStreamMenuOpen:!this.state.isSubtitlesStreamMenuOpen})})),nW(this,"onSubtitlesStreamMenuClose",(()=>{this.setState({isSubtitlesStreamMenuOpen:!1})})),this.state={isAudioStreamMenuOpen:!1,isSubtitlesStreamMenuOpen:!1},this._audioStreamMenuButtonID=(0,tk.c)(),this._subtitlesStreamMenuButtonID=(0,tk.c)()}render(){const{serverEntityID:e,metadataItemEntityID:t,mediaItem:r,isStreamDeleteInProgress:n,canShowDeleteSubtitlesAction:s,canShowMoreSubtitlesAction:a,canShowUploadSubtitlesAction:o,onAudioStreamSelect:c,onSubtitlesStreamSelect:l,onSubtitlesStreamDelete:d}=this.props,{isAudioStreamMenuOpen:u,isSubtitlesStreamMenuOpen:p}=this.state;if(!r)return i.createElement(D_.c,null,i.createElement(k_.c,{label:(0,g.c)("Video")},i.createElement("span",{className:tW},(0,g.c)("Loading..."))),i.createElement(k_.c,{label:(0,g.c)("Audio")},i.createElement("span",{className:tW},(0,g.c)("Loading..."))),i.createElement(k_.c,{label:(0,g.c)("Subtitles")},i.createElement("span",{className:tW},(0,g.c)("Loading..."))));const m=dC.c.get("audio").id,h=(0,V_.c)(r,{streamType:m}),y=(0,U_.c)(r),f=dC.c.get("subtitles").id,v=(0,V_.c)(r,{streamType:f}),b=(0,F_.c)(r),S=a||v.length>1,P=i.createElement(__.c,{serverEntityID:e,stream:y,type:"audio"}),I=i.createElement(__.c,{serverEntityID:e,stream:b,type:"subtitles"});return i.createElement(D_.c,null,i.createElement(k_.c,{label:(0,g.c)("Video")},i.createElement(__.c,{mediaItem:r,serverEntityID:e,type:"video"})),i.createElement(k_.c,{label:(0,g.c)("Audio")},h.length>1?i.createElement(aA.c,{direction:u?oA.UP:oA.aK,id:this._audioStreamMenuButtonID,onPress:this.onAudioStreamMenuButtonPress},P):P),i.createElement(k_.c,{label:(0,g.c)("Subtitles")},S?i.createElement(aA.c,{direction:p?oA.UP:oA.aK,id:this._subtitlesStreamMenuButtonID,onPress:this.onSubtitlesStreamMenuButtonPress},I):I),i.createElement(z_,{audioStreams:h,isOpen:u,serverEntityID:e,target:this._audioStreamMenuButtonID,onMenuClose:this.onAudioStreamMenuClose,onStreamSelect:c}),i.createElement(eW,{canShowDeleteSubtitlesAction:s,canShowMoreSubtitlesAction:a,canShowUploadSubtitlesAction:o,isOpen:p,isStreamDeleteInProgress:n,metadataItemEntityID:t,serverEntityID:e,subtitlesStreams:v,target:this._subtitlesStreamMenuButtonID,onMenuClose:this.onSubtitlesStreamMenuClose,onStreamDelete:d,onStreamSelect:l}))}}const sW=iW;var aW=Object.defineProperty,oW=Object.defineProperties,cW=Object.getOwnPropertyDescriptors,lW=Object.getOwnPropertySymbols,dW=Object.prototype.hasOwnProperty,uW=Object.prototype.propertyIsEnumerable,pW=(e,t,r)=>t in e?aW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mW=(e,t,r)=>(pW(e,"symbol"!=typeof t?t+"":t,r),r);const hW={dispatchMakePrePlayVideoDecision:L_.cH,dispatchDeleteMetadataItemStream:cN.fw,dispatchSelectMetadataItemStream:cN.Sg};class yW extends i.Component{constructor(){super(...arguments),mW(this,"onAudioStreamSelect",(e=>{this.props.dispatchSelectMetadataItemStream({metadataItemEntityID:this.props.metadataItemEntityID,streamTypeString:"audio",streamID:e,allParts:!0,metricsPage:this.props.metricsPage})})),mW(this,"onSubtitlesStreamSelect",(e=>{this.props.dispatchSelectMetadataItemStream({metadataItemEntityID:this.props.metadataItemEntityID,streamTypeString:"subtitles",streamID:e,allParts:!0,metricsPage:this.props.metricsPage})})),mW(this,"onSubtitlesStreamDelete",(e=>{this.props.dispatchDeleteMetadataItemStream({metadataItemEntityID:this.props.metadataItemEntityID,streamKey:e,metricsPage:this.props.metricsPage})}))}componentDidMount(){this.props.dispatchMakePrePlayVideoDecision()}componentDidUpdate(e){e.mediaItems!==this.props.mediaItems&&e.dispatchMakePrePlayVideoDecision()}render(){const e=this.props,{metricsPage:t,dispatchMakePrePlayVideoDecision:r,dispatchSelectMetadataItemStream:n}=e,s=((e,t)=>{var r={};for(var n in e)dW.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&lW)for(var n of lW(e))t.indexOf(n)<0&&uW.call(e,n)&&(r[n]=e[n]);return r})(e,["metricsPage","dispatchMakePrePlayVideoDecision","dispatchSelectMetadataItemStream"]);return i.createElement(sW,((e,t)=>oW(e,cW(t)))(((e,t)=>{for(var r in t||(t={}))dW.call(t,r)&&pW(e,r,t[r]);if(lW)for(var r of lW(t))uW.call(t,r)&&pW(e,r,t[r]);return e})({},s),{onAudioStreamSelect:this.onAudioStreamSelect,onSubtitlesStreamDelete:this.onSubtitlesStreamDelete,onSubtitlesStreamSelect:this.onSubtitlesStreamSelect}))}}const gW=(0,th.c)((function(){return(0,At.M3)((e=>e.ui.prePlayPage.decisionMediaItem),O_.c,(0,pT.c)(),(0,At.M3)((0,Ih.c)(),(0,pT.c)(),((e,t)=>N_(e,t))),(0,At.M3)((0,Ih.c)(),(0,pT.c)(),((e,t)=>j_(e,t))),((e,t,r,n,i)=>({mediaItem:e,mediaItems:r.Media,isStreamDeleteInProgress:r.isStreamDeleteInProgress,canShowDeleteSubtitlesAction:t.isFullOwnedServer,canShowMoreSubtitlesAction:n,canShowUploadSubtitlesAction:i})))}),hW)(yW);var fW=r(24264),vW=r(74556);const bW=function({className:e,duration:t,viewOffset:r}){let n;if(t&&r){const e=(t-r)/1e3;e>0&&(n=(0,lM.c)(e))}return i.createElement("span",{className:e},n)};function SW({className:e,separator:t}){return i.createElement("span",{className:e},t)}SW.defaultProps={className:"PrePlayDashSeparator-separator-qqfE7b",separator:""};const PW=SW;var IW=r(59372);const EW=function(e){const{contentRating:t}=e;return t?i.createElement(IW.c,{className:"PrePlayContentRating-badge-A0NOzC Badge-badge-GPVVZ0"},(0,ht.c)(t)):null};var wW=r(76485),CW=Object.defineProperty,OW=Object.getOwnPropertySymbols,MW=Object.prototype.hasOwnProperty,TW=Object.prototype.propertyIsEnumerable,DW=(e,t,r)=>t in e?CW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function kW(e){return i.createElement(sw.c,((e,t)=>{for(var r in t||(t={}))MW.call(t,r)&&DW(e,r,t[r]);if(OW)for(var r of OW(t))TW.call(t,r)&&DW(e,r,t[r]);return e})({},e))}kW.defaultProps={className:"PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M",size:Pp.wH};const xW=kW,AW="PrePlayRecordingStatusButton-partialButton-v28BxI PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M",RW=function(e){const{mediaGrabError:t,mediaGrabPartialRecordingReason:r,onPress:n}=e;return t?i.createElement(xW,{className:"PrePlayRecordingStatusButton-failedButton-wWzlVk PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M",title:t,onPress:n},(0,g.c)("Failed Recording")):r?i.createElement(wW.c,{"aria-label":r,className:AW,component:xW,tooltip:r,onPress:n},(0,g.c)("Partial Recording")):i.createElement(xW,{className:AW,onPress:n},(0,g.c)("Partial Recording"))};function NW({className:e,children:t}){return i.createElement("span",{className:e},t)}NW.defaultProps={className:"PrePlayTertiaryTitleSpacer-tertiaryTitleSpacer-YwzbVu"};const LW=NW;function jW({className:e,onPress:t}){return i.createElement(xW,{className:e,onPress:t},(0,g.c)("Unavailable"))}jW.defaultProps={className:"PrePlayUnavailableButton-unavailableButton-x8LI6X PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M"};const UW=jW;var FW=Object.defineProperty,VW=Object.getOwnPropertySymbols,_W=Object.prototype.hasOwnProperty,WW=Object.prototype.propertyIsEnumerable,BW=(e,t,r)=>t in e?FW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const HW=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),(0,At.M3)((0,pT.c)(),((e={})=>{const t={isPartialMediaGrab:!1,mediaGrabError:null},r=e.Media;if(!r||!r.length)return t;for(let e=0;e<r.length;e++){const n=r[e],{mediaGrabPartialRecording:i,mediaGrabError:s,mediaGrabPartialRecordingReason:a}=n;i&&(t.isPartialMediaGrab=!0),s&&(t.mediaGrabError=n.mediaGrabError),a&&(t.mediaGrabPartialRecordingReason=a)}return t})),(0,At.M3)((e=>e.ui.prePlayPage),(0,pT.c)(),((e,t={})=>{if(e.isFileUnavailable)return!0;const r=t.Media;if(!r||!r.length)return!1;for(let e=0,t=r.length;e<t;e++){const t=r[e].Part;if(t&&t.length)for(let e=0,r=t.length;e<r;e++){const r=t[e];if(!1===r.exists||!1===r.accessible)return!0}}return!1})),((e={},t,r)=>((e,t)=>{for(var r in t||(t={}))_W.call(t,r)&&BW(e,r,t[r]);if(VW)for(var r of VW(t))WW.call(t,r)&&BW(e,r,t[r]);return e})({duration:e.duration,contentRating:e.contentRating,saved:e.saved,viewCount:e.viewCount,viewOffset:e.viewOffset,type:e.type,subtype:e.subtype,isFileUnavailable:r},t)))}),(function(e,t){return{onGetInfoPress(r){e((0,xA.GW)({metadataItemEntityID:t.metadataItemEntityID}))}}}))((function(e){const{type:t,duration:r,saved:n,contentRating:s,viewCount:a,viewOffset:o,isFileUnavailable:c,isPartialMediaGrab:l,mediaGrabError:d,mediaGrabPartialRecordingReason:u,onGetInfoPress:p}=e,m=!a&&!o,h=!!o&&o<r,y=!!r||m||h,f=m&&(null==n||null!=n&&n),v=t===Uw.UJ?(0,g.c)("Unplayed"):(0,g.c)("Unwatched");return i.createElement(kU.c,null,y?i.createElement(LW,null,i.createElement(vW.c,{duration:r}),m||h?i.createElement(i.Fragment,null,r&&(f||h)?i.createElement(PW,null):null,f?v:null,h?i.createElement(bW,{duration:r,viewOffset:o}):null):null):null,i.createElement(EW,{contentRating:s}),c?i.createElement(UW,{onPress:p}):null,!c&&(l||d||u)?i.createElement(RW,{mediaGrabError:d,mediaGrabPartialRecordingReason:u,onPress:p}):null)}));var zW=r(30004),GW=r(41548),qW=r(6252);const KW=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),((e={})=>({originallyAvailableAt:e.originallyAvailableAt})))}))((function({originallyAvailableAt:e}){return i.createElement(AU.c,null,e?(0,g.c)("{monthName} {day}, {year}",{monthName:(0,qW.c)((0,zW.c)((0,GW.c)(e))),day:(0,ut.c)(e,"d"),year:(0,ut.c)(e,"yyyy")}):null)}));function QW(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,type:s,attributionLogo:a,summary:o,showStreams:c}=e;return i.createElement(i.Fragment,null,i.createElement(c_.c,null,i.createElement(xU.c,null,i.createElement(kU.c,null,i.createElement(p_.c,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(AU.c,null,i.createElement(I_,{attributionLogo:a}))),i.createElement(NU,null,i.createElement(kU.c,null,i.createElement(m_.c,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(fW.c,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(jU,null,i.createElement(HW,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}),i.createElement(KW,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}))),i.createElement(l_.c,null),i.createElement(c_.c,null,i.createElement(R_,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,type:s}),c?i.createElement(gW,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}):null,i.createElement(d_.c,null,o)))}QW.defaultProps={showStreams:!0};const $W=QW,YW=function(e){const{server:t,provider:r,sourceDirectory:n,type:s,Genre:a}=e;return i.createElement(T_,{fallbackFilterKey:"genre",limit:2,provider:r,server:t,sourceDirectory:n,tags:a,type:s})},XW=(0,s.Ul)((function(){return(0,At.M3)(O_.c,kj.c,C_(),(0,pT.c)(),((e,t,r,n={})=>({server:e,provider:t,sourceDirectory:r,Genre:n.Genre})))}))((function(e){const{server:t,provider:r,sourceDirectory:n,Genre:s}=e,a=!(!s||!s.length);return i.createElement(AU.c,null,a?i.createElement(YW,{Genre:s,provider:r,server:t,sourceDirectory:n}):null)}));function JW(e){const t=e["aria-label"],r=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-watchlist-badge-560"};s["aria-hidden"]=!t,s.style=n,s.className=Yj.c.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"M73 88.729C73 72.31 86.37 59 102.918 59h356.164C475.606 59 489 72.025 489 88.729v427.508c0 16.419-10.6 21.534-23.456 11.598L304.456 403.32c-12.954-10.014-34.057-9.937-46.912 0L96.456 527.835C83.502 537.849 73 532.94 73 516.237V88.729z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}JW.propTypes={"aria-label":vw().string,className:vw().string,style:vw().object};const ZW=JW,eB=function(e){const{watchlistedAt:t}=e;return t?i.createElement(IW.c,{className:"PrePlayInWatchlist-badge-MvPUwG Badge-badge-GPVVZ0"},i.createElement(ZW,{className:"PrePlayInWatchlist-icon-JLoFoX"})," ",(0,g.c)("In your Watchlist")):null};function tB(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,title:s,year:a,summary:o,watchlistedAt:c,attributionLogo:l,showGenres:d,showStreams:u}=e;return i.createElement(i.Fragment,null,i.createElement(c_.c,null,i.createElement(xU.c,null,i.createElement(kU.c,null,s),i.createElement(AU.c,null,i.createElement(I_,{attributionLogo:l}),i.createElement(eB,{watchlistedAt:c}))),i.createElement(NU,null,i.createElement(kU.c,null,a),i.createElement(fW.c,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(jU,null,i.createElement(HW,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}),d?i.createElement(XW,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}):null)),i.createElement(l_.c,null),i.createElement(c_.c,null,i.createElement(R_,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}),u?i.createElement(gW,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}):null,i.createElement(d_.c,null,o)))}tB.defaultProps={showGenres:!0,showStreams:!0};const rB=tB;var nB=Object.defineProperty,iB=Object.getOwnPropertySymbols,sB=Object.prototype.hasOwnProperty,aB=Object.prototype.propertyIsEnumerable,oB=(e,t,r)=>t in e?nB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const cB=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),((e={})=>({type:e.type,title:e.title,year:e.year,summary:e.summary,attributionLogo:e.attributionLogo})))}))((function(e){const t=function(e){switch(e){case Uw.EPISODE:return $W;case Uw.MOVIE:return rB;case Uw.YH:return u_}return u_}(e.type);return i.createElement(t,((e,t)=>{for(var r in t||(t={}))sB.call(t,r)&&oB(e,r,t[r]);if(iB)for(var r of iB(t))aB.call(t,r)&&oB(e,r,t[r]);return e})({},e))}));var lB=r(18720),dB=r(93952);var uB=Object.defineProperty,pB=(e,t,r)=>(((e,t,r)=>{t in e?uB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const mB=parseInt(R.c.postPlayPosterWidth,10),hB=parseInt(R.c.postPlayTitleHeight,10)+parseInt(R.c.postPlayAutoPlayHeight,10);class yB extends i.Component{constructor(e,t){super(e,t),pB(this,"_tickIntervalID"),pB(this,"onContentMeasure",(({height:e})=>{const t=Math.min((0,ox.YF)(mB,this.props.type,ax.I9),e-hB),r=(0,ox.K6)(t,this.props.type,ax.I9);this.setState({isMeasured:!0,width:r,height:t})})),pB(this,"onCountdown",(()=>{const e=this.state.secondsLeft-1;e<=0?this.props.onPlay():this.setState({secondsLeft:e})})),this.state={isMeasured:!1,width:0,height:0,secondsLeft:10}}componentDidMount(){this.props.autoPlayEnabled&&(this._tickIntervalID=window.setInterval(this.onCountdown,1e3))}UNSAFE_componentWillReceiveProps(e){this.props.autoPlayEnabled&&!e.autoPlayEnabled&&(window.clearInterval(this._tickIntervalID),this.setState({secondsLeft:10})),!this.props.autoPlayEnabled&&e.autoPlayEnabled&&(this._tickIntervalID=window.setInterval(this.onCountdown,1e3))}componentWillUnmount(){window.clearInterval(this._tickIntervalID)}render(){const{serverEntityID:e,providerEntityID:t,type:r,posterUrl:n,autoPlayEnabled:s,onToggleAutoPlay:a,onPlay:o}=this.props,{isMeasured:c,width:l,height:d,secondsLeft:u}=this.state,p=(10-u)/9*100;return i.createElement(Fp.c,{className:"AudioVideoUpNext-container-v2AA00",onMeasure:this.onContentMeasure},i.createElement("div",{className:"AudioVideoUpNext-title-MjhGym"},(0,g.c)("Playing Next")),c?i.createElement("div",{className:"AudioVideoUpNext-poster-25d1RI",style:{width:l,height:d}},i.createElement(SF.c,{height:d,providerEntityID:t,serverEntityID:e,type:r,url:n,width:l}),s?i.createElement("div",{className:"AudioVideoUpNext-progress-Nz7PoB"},i.createElement(QR.c,{easing:"linear",lineWidth:3,progress:p,showProgressText:!1,size:l/4}),i.createElement("span",{className:"AudioVideoUpNext-timeLeft-UIkIaF"},u)):null,i.createElement(fF.c,{"aria-label":(0,g.c)("Play Next"),circleClassName:"AudioVideoUpNext-playCircle-MX3Ftl PlayButton-playCircle-fK1f_v",className:"AudioVideoUpNext-playButton-Q8zgTo PlayButton-playButton-vS1WII",onPress:o})):null,i.createElement(dB.c,{checkboxText:s?(0,g.c)("Auto Play On"):(0,g.c)("Auto Play Off"),className:s?"AudioVideoUpNext-autoPlayOn-FMTHL1 AudioVideoUpNext-autoPlay-gIaWNg":"AudioVideoUpNext-autoPlayOff-dme5Le AudioVideoUpNext-autoPlay-gIaWNg",name:"autoPlayCheck",value:s,onChange:a}))}}const gB=yB,fB=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,pT.c)(),tp.c,((e,t={},r)=>({type:t.type,posterUrl:t.thumb,autoPlayEnabled:r.autoPlay})))}),(function(e,{playerType:t}){return{onToggleAutoPlay(){e((0,lB.sh)({playerType:t}))},onPlay(){e((0,bw.Eb)({playerType:t}))}}}))(gB),vB=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,Sw.c)(),(0,Sw.c)(1),((e,t,r)=>r?{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:r.metadataItem,hubEntityIDs:t.postPlay}:{}))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,hubEntityIDs:s,playerType:a}=e;return i.createElement("div",{className:"AudioVideoPostPlay-container-yOHe11"},i.createElement("div",{className:"AudioVideoPostPlay-poster-hlr_lP"},i.createElement(fB,{metadataItemEntityID:n,playerType:a,providerEntityID:r,serverEntityID:t})),i.createElement(Im.c,{autoScroll:!0,className:"AudioVideoPostPlay-details-axmbOT",smoothScroll:!1},i.createElement(cB,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,showStreams:!1}),i.createElement(c_.c,null,s&&s.length>0?i.createElement(o_,{columnAdjustment:1,hubEntityIDs:s,providerEntityID:r,serverEntityID:t}):null)))})),bB=(0,hp.c)(bk.c.defaultSpeed),SB={enter:{opacity:1,duration:bB},exit:{opacity:0,duration:bB,delay:4e3}};function PB(e){const{className:t,isToastVisible:r,isControlsVisible:n,metadataItemEntityID:s,playerType:a}=e;return n?null:i.createElement(mp.Iz,null,r?i.createElement(mp.q4.div,{key:"toast",animate:"enter",className:t,exit:"exit",initial:"exit",variants:SB},i.createElement(NR,{className:"AudioVideoToast-metadataContainer-Zg4teh",metadataItemEntityID:s,playerType:a})):null)}PB.defaultProps={className:"AudioVideoToast-toast-LpKcMe"};const IB=PB,EB=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,Sw.c)(),((e,{isControlsVisible:t})=>t),((e,t,r)=>{if(!t)return{isToastVisible:!1};const{positionSeconds:n,durationSeconds:i}=e,s=i-n,a=t.type===Uw.YH&&t.subtype===IC.k;return{isToastVisible:!r&&a&&(1===n||5===s),metadataItemEntityID:t.metadataItem}}))}),(function(e,t){return{}}))(IB),wB=EB,CB="SubtitlesOffsetSettings-button-iez08b Button-button-TxWeuE Link-link-SxPFpG";var OB=Object.defineProperty,MB=(e,t,r)=>(((e,t,r)=>{t in e?OB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class TB extends i.Component{constructor(){super(...arguments),MB(this,"onDecreasePress",(()=>{const{offset:e,dispatchChangeSubtitleOffset:t}=this.props;t(e-50)})),MB(this,"onIncreasePress",(()=>{const{offset:e,dispatchChangeSubtitleOffset:t}=this.props;t(e+50)})),MB(this,"onResetPress",(()=>{const{dispatchChangeSubtitleOffset:e}=this.props;e(0)}))}render(){const{offset:e,bottom:t,dispatchCloseSubtitlesOffset:r,onDimensionsChange:n}=this.props;return i.createElement(tx,{bottom:t,className:"SubtitlesOffsetSettings-container-SYt9nV AudioVideoStripeContainer-container-Pz3oFW",onDimensionsChange:n},i.createElement(bp.c,{className:"SubtitlesOffsetSettings-closeButton-l1bRd4 Link-link-SxPFpG",onPress:r},i.createElement(hF.c,null)),i.createElement("div",{className:"SubtitlesOffsetSettings-title-gUQSzk"},(0,g.c)("Subtitle Offset: {offset}",{offset:`${e} ms`})),i.createElement("div",{className:"SubtitlesOffsetSettings-buttonContainer-uF9iON"},i.createElement(sw.c,{className:CB,kind:Sg.ac,size:Pp.wH,onPress:this.onDecreasePress},"-",50," ms"),i.createElement(sw.c,{className:CB,kind:Sg.ac,size:Pp.wH,onPress:this.onIncreasePress},"+",50," ms"),i.createElement(sw.c,{className:CB,kind:Sg.ac,size:Pp.wH,onPress:this.onResetPress},(0,g.c)("Reset"))))}}MB(TB,"defaultProps",{offset:0});const DB=TB,kB=(0,s.Ul)((function(){return(0,At.M3)(mC(),(e=>e.selectedSubtitlesStream))}),(function(e,t){return{dispatchChangeSubtitleOffset(r){e((0,bw.sb)({playerType:t.playerType,subtitleOffset:r}))},dispatchCloseSubtitlesOffset(){e((0,bw.Yh)({playerType:t.playerType}))}}}))(DB);var xB=r(99052);var AB=r(96736),RB=r(23880);function NB(e){return e>2560?"8K":e>1100?"4K":e>576?"HD":""}function LB(e,t){return e<=576||e>1100||!t||t<=2e3?"":t<=3e3?(0,g.c)("Medium"):t<=4e3?(0,g.c)("High"):t<=8e3||t<=1e4?"":t<=12e3?(0,g.c)("Medium"):(0,g.c)("High")}var jB=r(26684);function UB(e){const{availableQualities:t,transcodeServer:r,currentDecision:n,currentBandwidth:i,mediaItem:s,canPlayAdaptiveBitrate:a}=e;if(!s)return[];const o=[],{maxUploadBitrate:c}=r,{bitrate:l}=s,d=!c||l&&c>l,u=n&&n.canPlayOriginalQuality;return d&&u&&o.push(function(e){const t=_B(VB(e.width,e.height,e.bitrate));return{index:jB.c.ORIGINAL,explicitQuality:!1,conversionDescriptionSummary:HB([(0,g.c)("Original"),BB(t)]),conversionDescription:(0,g.c)("Play Original Quality"),conversionDescriptionExtra:t}}(s)),a&&o.push(function(e,t){const r={index:jB.c.CONVERT_AUTOMATICALLY,explicitQuality:!1,conversionDescription:(0,g.c)("Convert Automatically")};if(e&&e.qualityIndex===jB.c.CONVERT_AUTOMATICALLY&&t){const e=_B({bitrate:(0,AB.c)(t.bandwidth),resolution:t.resolution});r.conversionDescriptionSummary=(0,g.c)("Auto (Now: {bitrateWithResolution})",{bitrateWithResolution:e}),r.conversionDescriptionExtra=(0,g.c)("Now: {bitrateWithResolution}",{bitrateWithResolution:e})}else r.conversionDescriptionSummary=(0,g.c)("Convert Automatically");return r}(n,i)),d&&!u&&o.push(function(e){const t=VB(e.width,e.height,e.bitrate),r=WB(t),n=r?(0,g.c)("Convert to"):(0,g.c)("Convert");return{index:jB.c.ORIGINAL,explicitQuality:!1,conversionDescriptionSummary:(0,g.c)("Convert (Maximum)"),conversionDescription:HB([n,r,BB((0,g.c)("Maximum"))]),conversionDescriptionExtra:t.bitrate}}(s)),o.push(...t.map(FB).reverse()),o}function FB(e){const t=e.videoResolution.split("x"),r=VB(t[0],t[1],e.bitrate),n=_B(r),i=WB(r);return{index:e.index,explicitQuality:!0,conversionDescriptionSummary:HB([(0,g.c)("Convert"),BB(n)]),conversionDescription:HB([(0,g.c)("Convert to"),i]),conversionDescriptionExtra:r.bitrate}}function VB(e,t,r){const n=function(e,t,r){if(!e&&!t)return{resolution:"",description:"",descriptionExtra:""};const n=(0,RB.c)(e,t);return{resolution:n+"p",description:NB(n),descriptionExtra:LB(n,r)}}(e,t,r);return{bitrate:(0,AB.c)(r),resolution:n.resolution,resolutionDescription:n.description,resolutionDescriptionExtra:BB(n.descriptionExtra)}}function _B(e){const t=HB([e.resolution,e.resolutionDescription]);return e.bitrate?HB([e.bitrate,t],", "):t}function WB(e){return HB([e.resolution,e.resolutionDescription,e.resolutionDescriptionExtra])}function BB(e){return e&&0!==e.length?"("+e+")":""}function HB(e,t=" "){return e.filter((e=>e)).join(t)}var zB=r(80472);var GB=Object.defineProperty;class qB extends i.Component{constructor(){super(...arguments),((e,t,r)=>{((e,t,r)=>{t in e?GB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"onPress",(e=>{this.props.onQualitySelect(this.props.conversionQualityIndex)}))}render(){const{conversionQualityIndex:e,conversionQuality:t,isSelected:r,isHidden:n}=this.props;return i.createElement(cA.c,{key:e,isHidden:n,isSelected:r,onPress:this.onPress},t.conversionDescription,t.conversionDescriptionExtra?i.createElement("span",{className:"AudioVideoQualityMenuItem-itemExtraDetail-ZNLbav","data-testid":"playbackBitrateQuality"},t.conversionDescriptionExtra):null)}}const KB=qB;var QB=Object.defineProperty,$B=(e,t,r)=>(((e,t,r)=>{t in e?QB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const YB="toggleShowAll",XB={placement:"top-start"};class JB extends i.Component{constructor(e,t){super(e,t),$B(this,"_menuInputButtonID"),$B(this,"onToggleMenuPress",(e=>{this.setState({isMenuOpen:!this.state.isMenuOpen})})),$B(this,"onMenuClose",(e=>{this.setState({isMenuOpen:!1})})),$B(this,"onQualitySelect",(e=>{e!==YB?(this.setState({isMenuOpen:!1}),this.props.onQualityChange(e)):this.setState({showAll:!0,qualities:this._getQualityMenuValues(this.props.availableQualities,this.props.qualityIndex,!0)})}));const r=!this._canToggleShowAll(e.availableQualities);this.state={isMenuOpen:!1,showAll:r,qualities:this._getQualityMenuValues(e.availableQualities,e.qualityIndex,r)},this._menuInputButtonID=(0,tk.c)()}UNSAFE_componentWillReceiveProps(e){const t=e.qualityIndex!==this.props.qualityIndex,r=e.availableQualities!==this.props.availableQualities;if(t||r){let t=this.state.showAll;!r||t||this._canToggleShowAll(e.availableQualities)||(t=!0),this.setState({showAll:t,qualities:this._getQualityMenuValues(e.availableQualities,e.qualityIndex,t)})}}_canToggleShowAll(e){const t=e.some((e=>!0===e.explicitQuality)),r=!!Qy().findWhere(e,{index:gC.c.CONVERT_AUTOMATICALLY});return t&&r}_getQualityMenuValues(e,t,r){const n=e.filter((e=>r||!e.explicitQuality||e.index===t));return n.push({index:YB,conversionDescription:(0,g.c)("Show all")}),n}render(){const e=this.props.qualityIndex,t=this.state.qualities,r=t.find((t=>t.index===e));return i.createElement(aA.c,{"data-testid":"videoQuality",direction:this.state.isMenuOpen?oA.UP:oA.aK,id:this._menuInputButtonID,size:Pp.IF,onPress:this.onToggleMenuPress},r.conversionDescriptionSummary,i.createElement(go.c,{className:"AudioVideoQualityMenuInput-menu-U7W64o Menu-menu-OCzudL",isOpen:this.state.isMenuOpen,options:XB,target:this._menuInputButtonID,onMenuClose:this.onMenuClose},t.map((t=>i.createElement(KB,{key:t.index,conversionQuality:t,conversionQualityIndex:t.index,isHidden:this.state.showAll&&t.index===YB,isSelected:t.index===e,onQualitySelect:this.onQualitySelect})))))}}const ZB=JB;var eH=r(73788);const tH=(0,s.Ul)((function(){return(0,At.Ex)({signalStrength:(0,At.M3)((0,lC.c)(),(0,eH.c)(),((e,t)=>{if(!e)return;const r=t.find((t=>t.uuid===e.activityUUID));return r?r.Context&&r.Context.signalStrength:void 0}))})}))((function(e){const{signalStrength:t}=e;return null==t?null:i.createElement(bA,{label:(0,g.c)("Antenna Signal Strength")},t,"%")}));var rH=r(90936);const nH=function(e){const{offset:t,isDisabled:r,onPress:n}=e;return i.createElement(bp.c,{isDisabled:r,isSelected:!r,onPress:n},t||0," ms ",i.createElement(rH.c,{className:"SubtitlesOffsetSettingsValue-icon-ukJr6Q"}))},iH="VideoSettings-extendedTitle-DhNr6a";var sH=Object.defineProperty,aH=(e,t,r)=>(((e,t,r)=>{t in e?sH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const oH="more",cH="upload";class lH extends i.Component{constructor(e,t){super(e,t),aH(this,"onSubtitleStreamChange",(e=>{e===oH?this.onMoreSubtitlesPress():e===cH?this.onUploadSubtitlesPress():this.props.onSubtitleStreamChange(e)})),aH(this,"onMoreSubtitlesPress",(()=>{this.setState({isSubtitlesModalOpen:!0})})),aH(this,"onSubtitlesModalClose",(()=>{this.setState({isSubtitlesModalOpen:!1})})),aH(this,"onUploadSubtitlesPress",(()=>{this.setState({isSubtitlesUploadModalOpen:!0})})),aH(this,"onSubtitlesUploadModalClose",(()=>{this.setState({isSubtitlesUploadModalOpen:!1})})),this.state={isSubtitlesModalOpen:!1,isSubtitlesUploadModalOpen:!1}}render(){const{bottom:e,serverEntityID:t,metadataItemEntityID:r,playerType:n,availableQualities:s,audioDevices:a,audioStreams:o,selectedAudioStream:c,selectedAudioDevice:l,subtitlesStreams:d,selectedSubtitlesStream:u,selectedSubtitlesColor:p,selectedSubtitlesPosition:m,selectedSubtitlesSize:h,autoPlay:y,qualityIndex:f,canSetVideoQuality:v,canSetAudioStream:b,canSetSubtitleStream:S,canSetSubtitleColor:P,canSetSubtitlePosition:I,canSetSubtitleSize:E,canSetSubtitleOffset:w,canSetAutoPlay:C,canShowMoreSubtitlesAction:O,canShowUploadSubtitlesAction:M,canShowLiveTVSignalStrength:T,onQualityChange:D,onAudioDeviceChange:k,onAudioStreamChange:x,onSubtitleColorChange:A,onSubtitlePositionChange:R,onSubtitleSizeChange:N,onAutoPlayChange:L,onSubtitleOffsetPress:j}=this.props,{isSubtitlesModalOpen:U,isSubtitlesUploadModalOpen:F}=this.state,V=S&&(O||M||d.length>1),_=V&&P,W=V&&I,B=V&&E,H=V&&w,z=v&&!!s.length&&null!=f&&s.findIndex((e=>e.index===f))>-1,G=!!u&&u.id!==bC.K&&!(0,zB.c)(u.codec),q=B&&G,K=_&&G,Q=W&&G,$=H&&G&&!!u&&!!u.key;let Y;return V&&(Y=d.map((e=>{const r=i.createElement(i.Fragment,null,i.createElement(__.c,{serverEntityID:t,stream:e,type:"subtitles"}),e.title?i.createElement("span",{className:iH},e.title):null);return{[e.id]:r}})),O&&Y.push({[oH]:(0,g.c)("Search...")}),M&&Y.push({[cH]:(0,g.c)("Upload...")})),i.createElement(i.Fragment,null,i.createElement(fA,{bottom:e},z?i.createElement(bA,{label:(0,g.c)("Quality")},i.createElement(ZB,{availableQualities:s,qualityIndex:f,onQualityChange:D})):null,i.createElement(bA,{label:(0,g.c)("Audio Stream")},b&&o.length>1?i.createElement(gA,{name:"audioStream",overrideSelectedValue:i.createElement(__.c,{serverEntityID:t,stream:c,type:"audio"}),size:Pp.IF,value:`${c.id}`,values:o.map((e=>{const r=i.createElement(i.Fragment,null,i.createElement(__.c,{serverEntityID:t,stream:e,type:"audio"}),e.title?i.createElement("span",{className:iH},e.title):null);return{[e.id]:r}})),onChange:x}):i.createElement(__.c,{serverEntityID:t,stream:c,type:"audio"})),a&&a.length>1?i.createElement(bA,{label:(0,g.c)("Audio Device")},i.createElement(gA,{name:"audioDevice",size:Pp.IF,value:l.name,values:a.map((e=>({[e.name]:(0,iA.c)(e)}))),onChange:k})):null,i.createElement(bA,{label:(0,g.c)("Subtitles")},V?i.createElement(gA,{name:"subtitleStream",overrideSelectedValue:i.createElement(__.c,{serverEntityID:t,stream:u,type:"subtitles"}),size:Pp.IF,value:`${u.id}`,values:Y,onChange:this.onSubtitleStreamChange}):i.createElement(__.c,{serverEntityID:t,stream:u,type:"subtitles"})),_?i.createElement(bA,{isDisabled:!K,label:(0,g.c)("Subtitle Color")},i.createElement(gA,{name:"subtitleColor",size:Pp.IF,value:p,values:JD.c.settings.map((e=>({[e.value]:e.title}))),onChange:A})):null,W?i.createElement(bA,{isDisabled:!Q,label:(0,g.c)("Subtitle Position")},i.createElement(gA,{name:"subtitlePosition",size:Pp.IF,value:m,values:ZD.c.settings.map((e=>({[e.value]:e.title}))),onChange:R})):null,B?i.createElement(bA,{isDisabled:!q,label:(0,g.c)("Subtitle Size")},i.createElement(gA,{name:"subtitleSize",size:Pp.IF,value:h.toString(),values:ek.c.settings.map((e=>({[e.value]:e.title}))),onChange:N})):null,H?i.createElement(bA,{isDisabled:!$,label:(0,g.c)("Subtitles Offset")},i.createElement(nH,{isDisabled:!$,offset:u.offset,onPress:j})):null,C?i.createElement(bA,{label:(0,g.c)("Auto Play")},i.createElement(dB.c,{name:"autoPlay",size:Pp.wH,value:y,onChange:L})):null,T?i.createElement(tH,{playerType:n,serverEntityID:t}):null),i.createElement(G_.c,{isOpen:U,metadataItemEntityID:r,onModalClose:this.onSubtitlesModalClose}),i.createElement(q_.c,{isOpen:F,metadataItemEntityID:r,onModalClose:this.onSubtitlesUploadModalClose}))}}const dH=lH;var uH=Object.defineProperty,pH=Object.defineProperties,mH=Object.getOwnPropertyDescriptors,hH=Object.getOwnPropertySymbols,yH=Object.prototype.hasOwnProperty,gH=Object.prototype.propertyIsEnumerable,fH=(e,t,r)=>t in e?uH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vH=(e,t,r)=>(fH(e,"symbol"!=typeof t?t+"":t,r),r);const bH={dispatchChangeQualityIndex:bw.E5,dispatchChangeStream:bw.Os,dispatchChangeSubtitleColor:bw.WG,dispatchChangeSubtitlePosition:bw.mN,dispatchChangeSubtitleSize:bw.mk,dispatchSelectAudioDevice:f.gj,dispatchSetAutoPlay:oC.So,dispatchTogglePlayerSubtitlesOffsetState:bw.Yh};class SH extends i.Component{constructor(){super(...arguments),vH(this,"onQualityChange",(e=>{const{playerType:t,dispatchChangeQualityIndex:r}=this.props;r({playerType:t,qualityIndex:parseInt(e,10)})})),vH(this,"onAudioStreamChange",(e=>{const{playerType:t,dispatchChangeStream:r}=this.props;r({playerType:t,streamTypeString:"audio",streamID:e})})),vH(this,"onAudioDeviceChange",(e=>{const{dispatchSelectAudioDevice:t}=this.props;t({deviceName:e})})),vH(this,"onSubtitleStreamChange",(e=>{const{playerType:t,dispatchChangeStream:r}=this.props;r({playerType:t,streamTypeString:"subtitles",streamID:e})})),vH(this,"onSubtitleColorChange",(e=>{const{playerType:t,dispatchChangeSubtitleColor:r}=this.props;r({playerType:t,subtitleColor:e})})),vH(this,"onSubtitlePositionChange",(e=>{const{playerType:t,dispatchChangeSubtitlePosition:r}=this.props;r({playerType:t,subtitlePosition:e})})),vH(this,"onSubtitleSizeChange",(e=>{const{playerType:t,dispatchChangeSubtitleSize:r}=this.props;r({playerType:t,subtitleSize:parseInt(e,10)})})),vH(this,"onAutoPlayChange",(e=>{const{playerType:t,dispatchSetAutoPlay:r}=this.props;r({playerType:t,autoPlay:e})})),vH(this,"onSubtitleOffsetPress",(()=>{const{playerType:e,dispatchTogglePlayerSubtitlesOffsetState:t}=this.props;t({playerType:e})}))}render(){const e=this.props,{dispatchChangeQualityIndex:t,dispatchChangeStream:r,dispatchChangeSubtitleSize:n,dispatchSetAutoPlay:s}=e,a=((e,t)=>{var r={};for(var n in e)yH.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&hH)for(var n of hH(e))t.indexOf(n)<0&&gH.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchChangeQualityIndex","dispatchChangeStream","dispatchChangeSubtitleSize","dispatchSetAutoPlay"]);return i.createElement(dH,((e,t)=>pH(e,mH(t)))(((e,t)=>{for(var r in t||(t={}))yH.call(t,r)&&fH(e,r,t[r]);if(hH)for(var r of hH(t))gH.call(t,r)&&fH(e,r,t[r]);return e})({},a),{onAudioDeviceChange:this.onAudioDeviceChange,onAudioStreamChange:this.onAudioStreamChange,onAutoPlayChange:this.onAutoPlayChange,onQualityChange:this.onQualityChange,onSubtitleColorChange:this.onSubtitleColorChange,onSubtitleOffsetPress:this.onSubtitleOffsetPress,onSubtitlePositionChange:this.onSubtitlePositionChange,onSubtitleSizeChange:this.onSubtitleSizeChange,onSubtitleStreamChange:this.onSubtitleStreamChange}))}}const PH=(0,s.Ul)((function(){return(0,At.M3)(((e,{isWatchTogether:t})=>t),(0,iI.c)("controllable"),(0,At.M3)((0,At.Ex)({availableQualities:(0,iI.c)("availableQualities"),transcodeServer:fC(),currentDecision:Pw(),currentBandwidth:(0,At.M3)((0,rO.c)(["bandwidthTimeline","positionSeconds"]),Pw(),((e,t)=>{const r=e.bandwidthTimeline;if(!(t&&r&&r.bandwidths&&r.transcodeSessionID&&r.transcodeSessionID===t.transcodeSessionID))return null;const n=1e3*e.positionSeconds,i=r.bandwidths.filter((e=>parseInt(e.time,10)<=n));return 0===i.length?null:Qy().max(i,(e=>parseInt(e.time,10)))})),mediaItem:uC(),canPlayAdaptiveBitrate:(0,At.M3)(nj.c,fC(),(0,lC.c)(),((e,t,r)=>(0,xB.c)()&&t.hasAdaptiveBitrate&&!e&&!r))}),UB),mC(),fC(),(0,iI.c)("qualityIndex"),(0,iI.c)("serverEntityID"),sI(),Mw(),xw(),(0,At.M3)(XP.c,Mw(),xw(),((e,t,r)=>N_(t,r,e))),(0,At.M3)(XP.c,Mw(),xw(),((e,t,r)=>j_(t,r,e))),Pw(),tp.c,rA,nA,((e,t,r,n,i,s,a,o,c,l,d,u,p,m,h,y)=>{const g=o.protocols.includes(Lw.W),f=!g&&(!(!p||!p.subtitlesUrl)||(0,yD.c)()),v=n.selectedSubtitlesStream;return{serverEntityID:a,metadataItemEntityID:l?l.entityID:null,availableQualities:r,audioDevices:h,audioStreams:n.audioStreams,selectedAudioStream:n.selectedAudioStream,selectedAudioDevice:y,subtitlesStreams:n.subtitlesStreams,selectedSubtitlesStream:v,selectedSubtitlesColor:m.subtitleColor,selectedSubtitlesPosition:m.subtitlePosition,selectedSubtitlesSize:m.subtitleSize,autoPlay:m.autoPlay,canSetVideoQuality:t?!!t.quality:!!i.transcoderVideo&&!i.transcoderVideoRemuxOnly,canSetAudioStream:!t||!!t.audioStream,canSetSubtitleStream:!t||!!t.subtitleStream,canSetSubtitleColor:t?!!t.subtitleColor:f,canSetSubtitlePosition:t?!!t.subtitlePosition:f,canSetSubtitleSize:t?!!t.subtitleSize:!g&&!(!v||!v.id),canSetSubtitleOffset:t?!!t.subtitleOffset:f,canSetAutoPlay:t?!!t.autoPlay:!g&&!e,canShowMoreSubtitlesAction:d,canShowUploadSubtitlesAction:u,canShowLiveTVSignalStrength:g&&!c.isCloud,qualityIndex:s}}))}),bH)(SH),IH=parseInt(R.c.watchTogetherLobbyPosterWidth,10),EH=parseInt(R.c.watchTogetherLobbyTitleHeight,10);function wH(){return{isMeasured:!1,width:0,height:0}}const CH=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),((e={})=>({type:e.type,subtype:e.subtype,posterUrl:e.thumb})))}))((function(e){const{serverEntityID:t,providerEntityID:r,type:n,posterUrl:s}=e,[a,o]=(0,i.useState)(null),[c,l]=(0,i.useState)(wH);return(0,i.useEffect)((()=>{let e=null;if(c.isMeasured){const t=Math.min((0,ox.YF)(IH,n,ax.gr),c.height-EH);e={height:t,width:(0,ox.K6)(t,n,ax.gr)}}o(e)}),[c,n]),i.createElement(Fp.c,{className:"WatchTogetherLobbyMetadataPoster-container-QFTaCB",onMeasure:l},i.createElement("div",{className:"WatchTogetherLobbyMetadataPoster-title-ARdGfh"},(0,g.c)("Watch Together")),null!=a?i.createElement("div",{style:a},i.createElement(SF.c,{height:a.height,providerEntityID:r,serverEntityID:t,type:n,url:s,width:a.width})):null)})),OH=function({adDisplayIndex:e,adDisplayTotal:t,className:r,isAdPlaying:n,isPresent:s,isReady:a,isWatching:o}){let c;return c=n?t>1?(0,g.c)("Playing ad {index} of {total}",{index:e,total:t}):(0,g.c)("Playing ad"):o?(0,g.c)("Watching"):a?(0,g.c)("Ready"):s?(0,g.c)("Buffering..."):(0,g.c)("Invited"),i.createElement("div",{className:r,title:c},c)},MH=function({className:e,title:t}){return i.createElement("div",{className:e,title:t},t)};var TH=r(16332);const DH=(0,i.memo)((function(e){const{serverEntityID:t,watchTogetherRoomEntityID:r,cellWidth:n}=e,s=(0,rx.c)(e),a=(0,_t.y)();return i.createElement("div",{className:"WatchTogetherInviteParticipantCell-container-E1fJnt",style:s.style},i.createElement(Se.mw,{posterStyle:"circle",width:n},i.createElement(h.ye,{align:"center",height:"100%",verticalAlign:"center",width:"100%"},i.createElement(uy.default,{size:"xxl"})),i.createElement(Se.u6,{posterStyle:"circle",onPress:a.onOpen})),i.createElement("div",{className:"WatchTogetherInviteParticipantCell-titleContainer-urHa9v WatchTogetherParticipantCell-titleContainer-4jUYA1"},i.createElement(mR.c,{component:MH,isSecondary:!1,title:(0,g.c)("Invite...")})),i.createElement(TH.c,{modalState:a,serverEntityID:t,watchTogetherRoomEntityID:r}))}));var kH=r(36340),xH=r(47148),AH=r(54492),RH=r(29524),NH=r(3408);const LH=function(e){const{serverEntityID:t,providerEntityID:r,isOffscreen:n,tagType:s,librarySectionType:a,title:o,url:c,width:l,height:d,transitionProps:u,onLoad:p,onError:m}=e;if(n)return null;if(c)return i.createElement(RH.c,{backgroundPosition:"center center",height:d,providerEntityID:r,serverEntityID:t,transitionProps:u,url:c,width:l,onError:m,onLoad:p});const h=kH.c.get(s);if(h&&h.isPerson)return i.createElement(AH.c,{height:d,name:o,width:l});const y=xH.cp.get(a),g=function(e){return"artist"===e?"track":e}(y&&y.typeString);return i.createElement(NH.c,{height:d,type:g,width:l})};var jH=Object.defineProperty,UH=Object.getOwnPropertySymbols,FH=Object.prototype.hasOwnProperty,VH=Object.prototype.propertyIsEnumerable,_H=(e,t,r)=>t in e?jH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function WH(e){const t=e,{className:r,imageWidth:n,imageHeight:s,imageUrl:a,tag:o,tagType:c}=t,l=((e,t)=>{var r={};for(var n in e)FH.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&UH)for(var n of UH(e))t.indexOf(n)<0&&VH.call(e,n)&&(r[n]=e[n]);return r})(t,["className","imageWidth","imageHeight","imageUrl","tag","tagType"]),d=kH.c.get(c),u=!!d&&d.isPerson;return i.createElement(bF.c,((e,t)=>{for(var r in t||(t={}))FH.call(t,r)&&_H(e,r,t[r]);if(UH)for(var r of UH(t))VH.call(t,r)&&_H(e,r,t[r]);return e})({key:o,className:jt()(r,u&&"TagPosterCard-isPerson-Xz0HH4"),component:LH,height:s,tagType:c,url:a,width:n},l))}WH.defaultProps={className:"TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t"};const BH=WH,HH=(0,i.memo)((function(e){const{serverEntityID:t,providerEntityID:r,titleComponents:n,listType:s,cellWidth:a,thumb:o,title:c,adDisplayIndex:l,adDisplayTotal:d,isAdPlaying:u,isWatching:p,isPresent:m,isReady:h}=e,y=(0,rx.c)(e);return i.createElement("div",{style:y.style},i.createElement("span",{className:"WatchTogetherParticipantCell-posterCardContainer-YfhetL"},i.createElement(BH,{className:"WatchTogetherParticipantCell-card-xDhcs0 TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t TagPosterCard-isPerson-Xz0HH4",imageHeight:a,imageUrl:o,imageWidth:a,providerEntityID:r,serverEntityID:t,tagType:s})),i.createElement("div",{className:"WatchTogetherParticipantCell-titleContainer-4jUYA1"},n.map(((e,t)=>i.createElement(mR.c,{key:t,adDisplayIndex:l,adDisplayTotal:d,component:e,isAdPlaying:u,isPresent:m,isReady:h,isSecondary:t>0,isWatching:p,title:c})))))}));var zH=Object.defineProperty,GH=Object.getOwnPropertySymbols,qH=Object.prototype.hasOwnProperty,KH=Object.prototype.propertyIsEnumerable,QH=(e,t,r)=>t in e?zH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$H=(e,t)=>{for(var r in t||(t={}))qH.call(t,r)&&QH(e,r,t[r]);if(GH)for(var r of GH(t))KH.call(t,r)&&QH(e,r,t[r]);return e};const YH={isInviteUser:!0};function XH(e){const{className:t,serverEntityID:r,providerEntityID:n,watchTogetherRoomEntityID:s,users:a,shouldShowInviteUsers:o,listContext:c}=e,l=ax.gr==ax.gr?[MH,OH]:[],d="participant",u=o?[...a,YH]:a;return i.createElement(Yk,{cellRenderer:(p={serverEntityID:r,providerEntityID:n,watchTogetherRoomEntityID:s,titleComponents:l,listType:d},e=>{const t=e.isInviteUser?DH:HH;return i.createElement(t,$H($H({},p),e))}),className:t,columnAdjustment:1,hubIdentifier:"watchTogetherParticipants",items:u,keyPropName:"userKey",layout:jV(d,c,1,l.length),listContext:c,listType:d,size:u.length,title:(0,g.c)("Participants")});var p}XH.defaultProps={className:"WatchTogetherParticipantsHubCell-hubCell-lOTxEJ HubCell-hubCell-bbBxQT"};const JH=XH;var ZH=Object.defineProperty,ez=Object.defineProperties,tz=Object.getOwnPropertyDescriptors,rz=Object.getOwnPropertySymbols,nz=Object.prototype.hasOwnProperty,iz=Object.prototype.propertyIsEnumerable,sz=(e,t,r)=>t in e?ZH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,az=(e,t)=>{for(var r in t||(t={}))nz.call(t,r)&&sz(e,r,t[r]);if(rz)for(var r of rz(t))iz.call(t,r)&&sz(e,r,t[r]);return e},oz=(e,t)=>ez(e,tz(t));function cz(e,t){var r,n;const i=(null==(r=e.title)?void 0:r.toLowerCase())||"",s=(null==(n=t.title)?void 0:n.toLowerCase())||"";return i&&!s?-1:!i&&s||i>s?1:i<s?-1:0}const lz=(0,At.M3)(ao,oo,((e,t)=>t.find((t=>{var r;return t.id===(null==(r=e.session)?void 0:r.roomID)})))),dz=(0,s.Ul)((function(){return(0,At.M3)((0,iI.c)("providerEntityID"),(0,iI.c)("serverEntityID"),(0,At.M3)($j,lz,((e,t)=>{const r=t?t.users.filter((t=>!e.users.find((e=>e.id===t.id)))):[],n=e.users.map((t=>{const r=e.users.filter((e=>e.id===t.id)).length>1,n=t.title||(0,g.c)("Unknown");return oz(az({},t),{title:r||!t.title?`${n} (${t.deviceName})`:n})}));return r.concat(n).sort(cz).map((e=>oz(az({},e),{userKey:e.deviceIdentifier||e.id})))})),lz,((e,t,r,n)=>({providerEntityID:e,serverEntityID:t,shouldShowInviteUsers:!!n,watchTogetherRoomEntityID:null==n?void 0:n.entityID,users:r})))}))(JH),uz=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,Sw.c)(),((e,t)=>({serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:t.metadataItem})))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,playerType:s}=e;return i.createElement("div",{className:"WatchTogetherLobby-container-yp7zps"},i.createElement("div",{className:"WatchTogetherLobby-row-wfluDR"},i.createElement("div",{className:"WatchTogetherLobby-poster-ZUhRdx"},i.createElement(CH,{metadataItemEntityID:n,playerType:s,providerEntityID:r,serverEntityID:t})),i.createElement(Im.c,{autoScroll:!0,className:"WatchTogetherLobby-details-nBtgK3",smoothScroll:!1},i.createElement(cB,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,showStreams:!1}))),i.createElement(dz,{className:"WatchTogetherLobby-hubCell-dQyTQl WatchTogetherParticipantsHubCell-hubCell-lOTxEJ HubCell-hubCell-bbBxQT",listContext:ax.gr,playerType:s}))})),pz=function(e){const{bottom:t,playerType:r,onDimensionsChange:n}=e;return i.createElement(tx,{bottom:t,className:"WatchTogetherPlayerParticipants-container-JgvsFx AudioVideoStripeContainer-container-Pz3oFW",onDimensionsChange:n},i.createElement(dz,{listContext:ax.KW,playerType:r}))};var mz=r(87800);const hz="WatchTogetherRoomEventToastContent-posterCardContainer-rHAvx7",yz="WatchTogetherRoomEventToastContent-card-c2u79g TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t TagPosterCard-isPerson-Xz0HH4",gz="WatchTogetherRoomEventToastContent-username-Qhlk8X",fz=function(e){const{serverEntityID:t,providerEntityID:r,notification:n,user:s,onRemoveToast:a}=e;return(0,i.useEffect)((()=>{const e=n.timestamp+3e3-Date.now(),t=()=>{a({uid:n.uid})};let r;return e>0?r=window.setTimeout(t,e):t(),()=>{r&&(r=window.clearTimeout(r))}}),[a,n]),i.createElement(i.Fragment,null,i.createElement("div",{className:hz},i.createElement(BH,{className:yz,imageHeight:30,imageUrl:s.thumb,imageWidth:30,providerEntityID:r,serverEntityID:t,tagType:"participant"})),function(e,t){const r=t.title||(0,g.c)("Unknown");let n;switch(e){case mz.Qb:n=(0,g.c)("{openSpan}{username}{closeSpan} joined",{username:r});break;case mz.Ir:n=(0,g.c)("{openSpan}{username}{closeSpan} left",{username:r});break;case mz.qc:n=(0,g.c)("{openSpan}{username}{closeSpan} paused",{username:r});break;case mz.gT:n=(0,g.c)("{openSpan}{username}{closeSpan} resumed",{username:r});break;case mz.GU:n=(0,g.c)("{openSpan}{username}{closeSpan} seeked",{username:r})}return n?i.createElement(wI.c,{message:n,tags:[{open:"openSpan",close:"closeSpan",component:"span",className:gz}]}):void 0}(n.type,s))},vz=(0,hp.c)(bk.c.slowSpeed),bz={enter:{opacity:1,duration:vz},exit:{opacity:0,duration:vz}};function Sz(e){const{className:t,serverEntityID:r,providerEntityID:n,notifications:s,users:a,isControlsVisible:o,onRemoveToast:c}=e;return o?null:i.createElement("div",{className:"WatchTogetherRoomEventToasts-container-uDQgiD"},i.createElement(mp.Iz,null,s.map((e=>i.createElement(mp.q4.div,{key:e.uid,animate:"enter",className:t,exit:"exit",initial:"exit",variants:bz},i.createElement(fz,{notification:e,providerEntityID:n,serverEntityID:r,user:a.find((t=>t.id===e.userID)),onRemoveToast:c}))))))}Sz.defaultProps={className:"WatchTogetherRoomEventToasts-toast-cj1Kq5"};const Pz=Sz,Iz={onRemoveToast:no.ai},Ez=(0,s.Ul)((function(){return(0,At.M3)($j,(0,iI.c)("serverEntityID"),(0,iI.c)("providerEntityID"),((e,t,r)=>({notifications:e.notifications,providerEntityID:r,serverEntityID:t,users:e.users})))}),Iz)(Pz),wz="AudioVideoFullPlayer-overlayButton-D2xSex Button-button-TxWeuE Link-link-SxPFpG";var Cz=Object.defineProperty,Oz=(e,t,r)=>(((e,t,r)=>{t in e?Cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const Mz=parseInt(R.c.playerControlsHeight,10),Tz=parseInt(R.c.playerControlsNarrowHeight,10),Dz=parseInt(R.c.playerInfoBarHeight,10),kz=parseInt(R.c.playerOverlayActionEdgeGutter,10);function xz(e,t){return e.isRemotePlayer||e.isMusic||e.isSettingsVisible||e.isChaptersVisible||e.isSubtitlesOffsetSettingsVisible||e.isWatchTogetherParticipantsVisible||e.isPlayQueueVisible||e.isPostPlayVisible||e.isWatchTogetherLobbyVisible||t.isControlsMenuOpen||t.isCastMenuOpen||t.disableInteractionTimer}function Az({bottom:e,children:t}){return i.createElement("div",{className:"AudioVideoFullPlayer-content-Jl7XEK",style:{bottom:e}},t)}class Rz extends i.Component{constructor(e,t){super(e,t),Oz(this,"_bodyCursorStyleAtMount"),Oz(this,"_interactionTimeoutID"),Oz(this,"onInteraction",(e=>{const{keyCode:t}=e;t!==mD.qI&&t!==mD.Oq&&(xz(this.props,this.state)||(this.state.hideControls&&this.setState({hideControls:!1}),this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID),this._interactionTimeoutID=window.setTimeout(this.onInteractionTimeout,2e3)))})),Oz(this,"onInteractionTimeout",(()=>{this.setState((({hideControlsCount:e})=>({hideControls:!0,hideControlsCount:e+1}))),this._interactionTimeoutID&&(window.clearTimeout(this._interactionTimeoutID),this._interactionTimeoutID=null)})),Oz(this,"onMouseLeave",(e=>{this.setState({disableInteractionTimer:!1},(()=>{xz(this.props,this.state)||this.onInteractionTimeout()}))})),Oz(this,"onControlsMouseEnter",(e=>{this.setState({disableInteractionTimer:!0})})),Oz(this,"onControlsMouseLeave",(e=>{this.setState({disableInteractionTimer:!1})})),Oz(this,"onControlsMenuChange",(e=>{this.setState({isControlsMenuOpen:e})})),Oz(this,"onCastMenuChange",(e=>{this.setState({isCastMenuOpen:e})})),Oz(this,"onAudioSettingsDimensionsChange",(({scrollHeight:e})=>{this.setState({audioSettingsHeight:e})})),this.state={hideControls:!1,hideControlsCount:0,isControlsMenuOpen:!1,isCastMenuOpen:!1,disableInteractionTimer:!1}}componentDidMount(){document.addEventListener("keyup",this.onInteraction),document.addEventListener("mousemove",this.onInteraction),document.addEventListener("mousedown",this.onInteraction),document.addEventListener("touchstart",this.onInteraction),document.addEventListener("touchend",this.onInteraction),document.addEventListener("mouseleave",this.onMouseLeave),this._bodyCursorStyleAtMount=document.body.style.cursor,xz(this.props,this.state)||this._startInteractionTimer()}UNSAFE_componentWillReceiveProps(e){xz(e,this.state)&&this.state.hideControls&&this.setState({hideControls:!1}),hD(e.marker)!==hD(this.props.marker)&&this.setState({hideControlsCount:0}),this.props.isFullscreen!==e.isFullscreen&&this.state.disableInteractionTimer&&this.setState({disableInteractionTimer:!1})}componentDidUpdate(e,t){xz(e,t)&&!xz(this.props,this.state)&&this._startInteractionTimer(),!xz(e,t)&&xz(this.props,this.state)&&this._stopInteractionTimer(),this.state.hideControls!==t.hideControls&&(document.body.style.cursor=this.state.hideControls?"none":this._bodyCursorStyleAtMount)}componentWillUnmount(){document.removeEventListener("keyup",this.onInteraction),document.removeEventListener("mousemove",this.onInteraction),document.removeEventListener("mousedown",this.onInteraction),document.removeEventListener("touchstart",this.onInteraction),document.removeEventListener("touchend",this.onInteraction),document.removeEventListener("mouseleave",this.onMouseLeave),document.body.style.cursor=this._bodyCursorStyleAtMount,this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID)}_startInteractionTimer(){this._stopInteractionTimer(),this._interactionTimeoutID=window.setTimeout(this.onInteractionTimeout,2e3)}_stopInteractionTimer(){this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID)}render(){const{playerType:e,hasFullscreen:t,isRemotePlayer:r,isPlayQueueLoading:n,isMediaLoading:s,isPostPlayLoading:a,isBuffering:o,isFullscreen:c,isSettingsVisible:l,isChaptersVisible:d,isSubtitlesOffsetSettingsVisible:u,isWatchTogetherParticipantsVisible:p,isPlayQueueVisible:m,isLyricsVisible:h,isPostPlayVisible:y,isWatchTogetherLobbyVisible:f,isAdVisible:v,metadataType:b,isVideo:S,isMusic:P,isNarrowLayout:I,hasLiveTVProtocol:E,hasMediaOverlays:w,isWatchTogether:C,seekStartMilliseconds:O,seekEndMilliseconds:M,bufferStartMilliseconds:T,bufferEndMilliseconds:D,adPositionMilliseconds:k,adDurationMilliseconds:x,ad:A,marker:R,onEnterFullscreenPress:N,onExitFullscreenPress:L,onToggleFullscreen:j,onSeekBarInteractionStart:U,onSeekBarInteractionEnd:F}=this.props,{hideControls:V,hideControlsCount:_,audioSettingsHeight:W}=this.state,B=(n||a||S&&!v&&(s||o))&&!y&&!f,H=!n&&l&&!d&&!m,z=H&&P,G=H&&S,q=!n&&!l&&d&&!m,K=!n&&m&&!l&&!d,Q=S&&!n&&!a&&!m&&!y&&!f,$=!(0,yD.c)()&&Q&&!v&&!s,Y=f||(!v||m)&&(r||P||s||m||a||y),X=I?Tz:Mz,J=f||!E&&!v?X:X+Dz,Z=V?null:`translateY(${-J}px)`,ee=!(!A||!A.click),te=!(!A||!A.clicksThrough),re={bottom:`${J+kz}px`,right:`${kz}px`};return i.createElement(i.Fragment,null,w&&Q&&!v?i.createElement(WD,{playerType:e}):null,Y?i.createElement(wU,{allowBlur:P||m||y||f,isMusic:P,isVideo:S,playerType:e}):null,!m&&B?i.createElement("div",{className:"AudioVideoFullPlayer-spinnerContainer-qhmt1c"},i.createElement(yp.c,{size:Pp.OM})):null,$?i.createElement(vk,{heightOffset:V?0:J,playerType:e}):null,!Q||v&&te?null:i.createElement(Jx,{isCursorHidden:V,playerType:e,onToggleFullscreen:j}),v&&ee&&!f?i.createElement(sw.c,{className:wz,size:Pp.OM,style:re,onPress:A.click},(0,g.c)("Learn more")):null,Q&&!v?i.createElement(Fk,{className:wz,isHidden:V&&_>1,isHiddenPolite:V,marker:R,playerType:e,size:Pp.OM,style:re}):null,n?null:i.createElement("div",{className:jt()("AudioVideoFullPlayer-topBar-Cv6J6C AudioVideoFullPlayer-bar-ka0DgM",V&&"AudioVideoFullPlayer-topBarHidden-Ep8XXa",S&&"AudioVideoFullPlayer-videoTopBar-SPrEoI",m&&"AudioVideoFullPlayer-playQueueTopBar-iHXpjH"),onMouseEnter:this.onControlsMouseEnter,onMouseLeave:this.onControlsMouseLeave},i.createElement(Kx,{hasFullscreen:t,isFullscreen:c,playerType:e,onCastMenuChange:this.onCastMenuChange,onEnterFullscreenPress:N,onExitFullscreenPress:L})),n||m||h||!P?null:i.createElement(Az,{bottom:J},i.createElement(IU,{bottom:z?W:null,playerType:e})),!n&&!m&&h&&P?i.createElement(Az,{bottom:J},i.createElement(aF,{playerType:e})):null,z?i.createElement(CA,{bottom:J,playerType:e,onDimensionsChange:this.onAudioSettingsDimensionsChange}):null,G?i.createElement(PH,{bottom:J,isWatchTogether:C,playerType:e}):null,u?i.createElement(kB,{bottom:J,playerType:e}):null,p?i.createElement(pz,{bottom:J,playerType:e}):null,q?i.createElement(Ax,{bottom:J,playerType:e}):null,K?i.createElement(Az,{bottom:J},i.createElement(yV,{isMusic:P,isVideo:S,playerType:e})):null,n||!y||m?null:i.createElement(Az,{bottom:J},i.createElement(vB,{playerType:e})),!n&&f?i.createElement(Az,{bottom:J},i.createElement(uz,{playerType:e})):null,i.createElement(wB,{isControlsVisible:!V,playerType:e}),C&&!f?i.createElement(Ez,{isControlsVisible:!V,playerType:e}):null,n?null:i.createElement("div",{className:jt()("AudioVideoFullPlayer-bottomBar-h224iE AudioVideoFullPlayer-bar-ka0DgM",V&&"AudioVideoFullPlayer-bottomBarHidden-cXfDeS"),style:{bottom:-J,height:J,transform:Z},onMouseEnter:this.onControlsMouseEnter,onMouseLeave:this.onControlsMouseLeave},i.createElement(mU,{adDurationMilliseconds:x,adPositionMilliseconds:k,bufferEndMilliseconds:D,bufferStartMilliseconds:T,hasLiveTVProtocol:E,isAdVisible:v,isMusic:P,isPostPlayVisible:y,isVideo:S,isWatchTogether:C,isWatchTogetherLobbyVisible:f,metadataType:b,playerType:e,seekEndMilliseconds:M,seekStartMilliseconds:O,onControlsMenuChange:this.onControlsMenuChange,onSeekBarInteractionEnd:F,onSeekBarInteractionStart:U})))}}const Nz=Rz,Lz=function(e){const{className:t,children:r,isPlayQueueLoading:n}=e;return i.createElement("div",{className:jt()(t,n&&"MiniPlayerContainer-playQueueIsLoading-CFoqg6")},n?i.createElement(yp.c,null):r)};var jz=Object.defineProperty,Uz=Object.getOwnPropertySymbols,Fz=Object.prototype.hasOwnProperty,Vz=Object.prototype.propertyIsEnumerable,_z=(e,t,r)=>t in e?jz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Wz=function(e){return i.createElement(Lz,{isPlayQueueLoading:e.isPlayQueueLoading},i.createElement(mU,((e,t)=>{for(var r in t||(t={}))Fz.call(t,r)&&_z(e,r,t[r]);if(Uz)for(var r of Uz(t))Vz.call(t,r)&&_z(e,r,t[r]);return e})({},e)))};var Bz=Object.defineProperty,Hz=Object.defineProperties,zz=Object.getOwnPropertyDescriptors,Gz=Object.getOwnPropertySymbols,qz=Object.prototype.hasOwnProperty,Kz=Object.prototype.propertyIsEnumerable,Qz=(e,t,r)=>t in e?Bz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $z=Object.defineProperty,Yz=Object.defineProperties,Xz=Object.getOwnPropertyDescriptors,Jz=Object.getOwnPropertySymbols,Zz=Object.prototype.hasOwnProperty,eG=Object.prototype.propertyIsEnumerable,tG=(e,t,r)=>t in e?$z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rG=(e,t)=>{for(var r in t||(t={}))Zz.call(t,r)&&tG(e,r,t[r]);if(Jz)for(var r of Jz(t))eG.call(t,r)&&tG(e,r,t[r]);return e},nG=(e,t)=>Yz(e,Xz(t));const iG=(0,s.Ul)((function(){return(0,At.M3)(((e,{isMiniPlayer:t})=>t),(0,Nw.c)(),Pw(),(0,Sw.c)(),sI(),(0,At.M3)((0,Iw.c)((0,At.M3)((0,Ow.c)(),(0,At.M3)((0,Ow.c)(),(e=>{var t;return null!=(t=null==e?void 0:e.Marker)?t:[]})),(0,mv.c)(p.MX),(0,mv.c)(p.xm),(0,mv.c)(p.uW),((e,t,r,n,i)=>t.filter((t=>r&&t.type===Ew||n&&t.type===Cw||"addToWatchlist"===t.type||(e.isLibraryItem&&i||!e.isLibraryItem)&&t.type===ww)))),(e=>e)),(0,iI.c)("positionSeconds"),((e,t)=>{const r=1e3*t;return e.find((e=>e.startTimeOffset<=r&&e.endTimeOffset>r))})),(0,At.M3)((0,Ow.c)(),ss.c,mI.c,((e,t,r)=>{let n,i;if(e){const s=r[e.serverEntityID],a=t[e.providerEntityID];n=null==s?void 0:s.machineIdentifier,i=null==a?void 0:a.identifier}return{machineIdentifier:n,providerIdentifier:i}})),Rw(),(0,At.M3)(Dw,Mw(),(0,Sw.c)(),((e,t,r)=>{const n=null==r?void 0:r.vast;if(n)return n.internal?De.c.join(n.url,{"X-Plex-Token":t.accessToken,debug:e===Tw.c.VAST?1:void 0}):n.url})),((e,t,r,n,i,s,a,o,c)=>{var l;let d,u;if(n){const e=(0,Uw.GG)(n.type);d=e&&e.mediaType,u=null==e?void 0:e.typeString}const p=d===jw.KI,m=d===jw.im,{machineIdentifier:h,providerIdentifier:y}=a;return{marker:s,isMusic:p,isVideo:m,metadataType:u,isPlayQueueLoading:t.isPlayQueueLoading,isMediaLoading:t.isMediaLoading,isPostPlayLoading:t.isPostPlayLoading,isBuffering:t.isBuffering,isWatchTogether:t.isWatchTogether,isSettingsVisible:t.isSettingsVisible,isChaptersVisible:t.isChaptersVisible,isSubtitlesOffsetSettingsVisible:t.isSubtitlesOffsetSettingsVisible,isWatchTogetherParticipantsVisible:t.isWatchTogetherParticipantsVisible,isPlayQueueVisible:t.isPlayQueueVisible,isLyricsVisible:t.isLyricsVisible,isPostPlayVisible:t.isPostPlayVisible,isWatchTogetherLobbyVisible:t.isWatchTogetherLobbyVisible,hasError:t.hasError,hasConflicts:t.hasConflicts,hasMediaOverlays:!!(null==(l=null==o?void 0:o.Overlay)?void 0:l.length),confirmLiveTVPlayback:t.confirmLiveTVPlayback,hasLiveTVProtocol:!!i&&i.protocols.includes(Lw.W),showBackgroundVideoPlayer:!(!c&&!r||e),currentMediaType:d,confirmPlaybackPayload:t.confirmPlaybackPayload,confirmOffsetPayload:t.confirmOffsetPayload,advertisingNoticePayload:t.advertisingNoticePayload,confirmRemoteToLocal:t.confirmRemoteToLocal,confirmLocalToRemote:t.confirmLocalToRemote,adState:t.adState,adPositionSeconds:t.adPositionSeconds,adDurationSeconds:t.adDurationSeconds,adDisplayIndex:t.adDisplayIndex,adDisplayTotal:t.adDisplayTotal,vastUrl:c,bufferedRanges:t.bufferedRanges,machineIdentifier:h,providerIdentifier:y}}))}),(function(e,t){const{playerType:r}=t;return{onUpdateBufferedRanges(t){e(bw.So({playerType:r,bufferedRanges:t}))},onUpdateCurrentAd(t){e(Wn.G(nG(rG({},t),{playerType:r})))}}}))((function(e){return i.createElement(pD,((e,t)=>Hz(e,zz(t)))(((e,t)=>{for(var r in t||(t={}))qz.call(t,r)&&Qz(e,r,t[r]);if(Gz)for(var r of Gz(t))Kz.call(t,r)&&Qz(e,r,t[r]);return e})({},e),{mediaComponent:e.isMusic?eO:KT,playerComponent:e.isMiniPlayer?Wz:Nz,playerType:u.k9}))}));iG.propTypes=nG(rG({},iG.propTypes),{isMiniPlayer:vw().bool,playerType:vw().string.isRequired});const sG=iG;var aG=Object.defineProperty,oG=Object.defineProperties,cG=Object.getOwnPropertyDescriptors,lG=Object.getOwnPropertySymbols,dG=Object.prototype.hasOwnProperty,uG=Object.prototype.propertyIsEnumerable,pG=(e,t,r)=>t in e?aG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mG=(e,t,r)=>(pG(e,"symbol"!=typeof t?t+"":t,r),r);const hG={dispatchRestorePlayQueue:oC.sH,dispatchEndPlayback:Wn.WS,dispatchUpdatePlayerError:bw._6};class yG extends i.Component{constructor(){super(...arguments),mG(this,"onEnterFullscreen",(()=>{(0,_n.WI)("fullscreenManager").enter()})),mG(this,"onExitFullscreen",(()=>{(0,_n.WI)("fullscreenManager").exit()})),mG(this,"onToggleFullscreen",(()=>{this.props.isFullscreen?this.onExitFullscreen():this.onEnterFullscreen()}))}componentDidMount(){this._restorePlayQueue(),this.props.isServerlessPlayer&&this.props.dispatchEndPlayback({playerType:this.props.playerType})}componentWillUnmount(){this.props.isOpen&&this.props.dispatchEndPlayback({playerType:this.props.playerType,isForced:!0})}componentDidUpdate(e){const{dispatchEndPlayback:t,isFullscreen:r,isMiniPlayer:n,isOpen:i,isServerlessPlayer:s,playerType:a}=this.props;this._restorePlayQueue(),s&&!e.isServerlessPlayer&&t({playerType:a});const o=(0,_n.WI)("fullscreenManager"),c=!i&&e.isOpen,l=n&&!e.isMiniPlayer;r&&(c||l)&&o.shouldExitOnPlayerClose&&this.onExitFullscreen()}componentDidCatch(e,t){cu.c.error(e),this.props.dispatchEndPlayback({playerType:this.props.playerType}),this.props.dispatchUpdatePlayerError({playerType:this.props.playerType,errorMessage:(0,g.c)("There was an unexpected error during playback. Please visit our forums if you continue to experience problems.")})}_restorePlayQueue(){const{playerType:e,isOpen:t,restorePlayQueuePayload:r,dispatchRestorePlayQueue:n}=this.props;(0,a.ot)(Pg.c.location.pathname,{path:Zr.c.watchNow,exact:!0})||t||!r||e===(0,u.Qb)(r.playQueueType)&&n(r)}render(){const e=this.props,{component:t,isServerlessPlayer:r,restorePlayQueuePayload:n,dispatchRestorePlayQueue:s,dispatchEndPlayback:a,dispatchUpdatePlayerError:o}=e,c=((e,t)=>{var r={};for(var n in e)dG.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&lG)for(var n of lG(e))t.indexOf(n)<0&&uG.call(e,n)&&(r[n]=e[n]);return r})(e,["component","isServerlessPlayer","restorePlayQueuePayload","dispatchRestorePlayQueue","dispatchEndPlayback","dispatchUpdatePlayerError"]);return r?null:i.createElement(t,((e,t)=>oG(e,cG(t)))(((e,t)=>{for(var r in t||(t={}))dG.call(t,r)&&pG(e,r,t[r]);if(lG)for(var r of lG(t))uG.call(t,r)&&pG(e,r,t[r]);return e})({},c),{onEnterFullscreenPress:this.onEnterFullscreen,onExitFullscreenPress:this.onExitFullscreen,onToggleFullscreen:this.onToggleFullscreen}))}}const gG=(0,s.Ul)((function(){return(0,At.M3)(nj.c,(e=>e.isFullscreen),(0,Nw.c)(),Mw(),sI(),(0,At.M3)((e=>e.user.id),(0,_n.WI)("selectRestorePlayQueue"),ss.c,mI.c,((e,t,r,n)=>{let i;t&&t[e]&&(i=t[e]);const s=i&&r[i.providerEntityID],a=i&&n[i.serverEntityID];if(i&&i.playQueueID&&a&&a.isConnected&&s&&s.isPopulated)return i})),((e,t,r,n,i,s)=>{const{confirmPlayerUpsellPayload:a,isOpen:o,openState:c}=r;return{confirmPlayerUpsellPayload:a,isOpen:o,isServerlessPlayer:o&&(!n||!i),isMiniPlayer:c===iC.C,isRemotePlayer:e,isFullscreen:t,hasFullscreen:(0,_n.WI)("fullscreenManager").hasFullscreen,restorePlayQueuePayload:s}}))}),hG)(yG);var fG=r(83095),vG=r(65348),bG=r(51988),SG=Object.defineProperty,PG=Object.defineProperties,IG=Object.getOwnPropertyDescriptors,EG=Object.getOwnPropertySymbols,wG=Object.prototype.hasOwnProperty,CG=Object.prototype.propertyIsEnumerable,OG=(e,t,r)=>t in e?SG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function MG(e){return(0,At.M3)((0,pT.c)(),vG.c,fG.c,dN.c,((t,r,n,i)=>e({server:r,provider:n,stableUser:i,metadataItem:t})))}const TG=(0,s.Ul)((function(){return(0,At.M3)((0,Sw.c)(),MG(bG.EH),MG(bG.Q$),MG(bG.Qt),((e,{isVideo:t})=>t),((e,t,r,n,i)=>e?{playQueueItemEntityID:e.entityID,showEditButton:t,showFavoriteButton:r,showMenuButton:!0,showShuffleButton:!0,showUnfavoriteButton:n,showVolume:i}:{}))}))(SL);TG.propTypes=((e,t)=>PG(e,IG(t)))(((e,t)=>{for(var r in t||(t={}))wG.call(t,r)&&OG(e,r,t[r]);if(EG)for(var r of EG(t))CG.call(t,r)&&OG(e,r,t[r]);return e})({},TG.propTypes),{providerEntityID:vw().string.isRequired,metadataItemEntityID:vw().string.isRequired,serverEntityID:vw().string.isRequired,playerType:vw().string.isRequired});const DG=TG;var kG=Object.defineProperty,xG=Object.getOwnPropertySymbols,AG=Object.prototype.hasOwnProperty,RG=Object.prototype.propertyIsEnumerable,NG=(e,t,r)=>t in e?kG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const LG=function(e){const t=e,{playerType:r,bufferStartMilliseconds:n,bufferEndMilliseconds:s,positionMilliseconds:a}=t,o=((e,t)=>{var r={};for(var n in e)AG.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&xG)for(var n of xG(e))t.indexOf(n)<0&&RG.call(e,n)&&(r[n]=e[n]);return r})(t,["playerType","bufferStartMilliseconds","bufferEndMilliseconds","positionMilliseconds"]);return i.createElement(MA,null,i.createElement(DA,null,i.createElement($L,{bufferEndMilliseconds:s,bufferStartMilliseconds:n,playerType:r,positionMilliseconds:a,showBuffer:!0}),i.createElement(HA,((e,t)=>{for(var r in t||(t={}))AG.call(t,r)&&NG(e,r,t[r]);if(xG)for(var r of xG(t))RG.call(t,r)&&NG(e,r,t[r]);return e})({component:DG,playerType:r},o))))},jG=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),(0,Sw.c)(),mo.c,((e,t={},r)=>{const n=t.metadataItem,{serverEntityID:i,providerEntityID:s,type:a,Media:[o]}=r[n],c=a===Uw.YH,l=o&&o.Part&&o.Part[0],d=l&&l.key;return{serverEntityID:i,providerEntityID:s,imageUrl:c?null:d,allowBlur:!0}}))}))(EU),UG=function(e){const{items:t,currentItem:r,size:n,firstIndex:s,renderSlide:a,width:o,height:c}=e;if(!t||!t.length)return null;const l=t.indexOf(r),d=Qy().range(Math.max(0,l-1),Math.min(n,l+1+1));return i.createElement("div",{className:"Carousel-magazine-Ic9QJT"},d.map((e=>{const r=l===e,n=e+s,d=t[e],u={position:"absolute",width:o,height:c,transform:`translate3d(${(e-l)*o}px, 0, 0)`};return i.createElement("div",{key:n,className:r?"Carousel-currentSlide-jOOrQK Carousel-slide-YK9hE2":"Carousel-slide-YK9hE2",style:u},d?a(d):null)})))};var FG=r(77224);var VG=Object.defineProperty,_G=(e,t,r)=>(((e,t,r)=>{t in e?VG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const WG={width:"100%",height:"100%"};class BG extends i.Component{constructor(){super(),_G(this,"onLoad",(()=>{this.setState({loading:!1})})),_G(this,"onError",(()=>{this.setState({error:!0})})),this.state={loading:!0,error:!1}}render(){const{serverEntityID:e,providerEntityID:t,url:r,maxWidth:n,maxHeight:s}=this.props,{width:a,height:o}=function(e,t,r=2073600){const n=e*t,i=r/Math.pow((0,FG.c)(),2),s=Math.sqrt(Math.max(n/i,1));return{width:Math.round(e/s),height:Math.round(t/s)}}(n,s),{loading:c,error:l}=this.state;return i.createElement("div",{className:"SlideImg-slideContainer-g5yxFU"},i.createElement("div",{className:"SlideImg-statusContainer-NqqQfD fadeIn-fadeIn-TL5Fh3"},c&&!l?i.createElement(yp.c,null):null,l?i.createElement("div",null,(0,g.c)("Unable to load photo")):null),i.createElement(fi.c,{key:r,backgroundSize:"contain",component:si.c,containerStyle:WG,height:o,providerEntityID:t,serverEntityID:e,url:r,width:a,onError:this.onError,onLoad:this.onLoad}))}}const HG=BG;var zG=Object.defineProperty,GG=Object.getOwnPropertySymbols,qG=Object.prototype.hasOwnProperty,KG=Object.prototype.propertyIsEnumerable,QG=(e,t,r)=>t in e?zG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const $G=(0,s.Ul)((function(){return(0,At.M3)((0,pT.c)(),(0,At.M3)((0,pT.c)(),(e=>{if(!e||!e.Media)return{};const{type:t,thumb:r,Media:[n]}=e,i="clip"===t,s=n&&n.Part&&n.Part[0],a=s&&s.key;return i||!a?r:a})),((e,t)=>{if(!t||!Object.keys(t).length)return{isLoading:!0};const{serverEntityID:r,providerEntityID:n}=e;return{serverEntityID:r,providerEntityID:n,isLoading:!1,url:t}}))}))((function(e){return e.isLoading?i.createElement(yp.c,null):i.createElement(HG,((e,t)=>{for(var r in t||(t={}))qG.call(t,r)&&QG(e,r,t[r]);if(GG)for(var r of GG(t))KG.call(t,r)&&QG(e,r,t[r]);return e})({},e))}));var YG=Object.defineProperty,XG=Object.getOwnPropertySymbols,JG=Object.prototype.hasOwnProperty,ZG=Object.prototype.propertyIsEnumerable,eq=(e,t,r)=>t in e?YG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tq=(0,s.Ul)((function(){return(0,At.M3)(pF(),(e=>({playQueueItem:e})))}))((function(e){const{playQueueItem:t}=e;return t&&t.type===Uw.Ww?i.createElement($G,((e,t)=>{for(var r in t||(t={}))JG.call(t,r)&&eq(e,r,t[r]);if(XG)for(var r of XG(t))ZG.call(t,r)&&eq(e,r,t[r]);return e})({metadataItemEntityID:t.metadataItem},e)):null}));var rq=Object.defineProperty;class nq extends i.Component{constructor(){super(...arguments),((e,t,r)=>{((e,t,r)=>{t in e?rq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"renderSlide",(e=>{const{playQueueItemEntityID:t,width:r,height:n}=this.props,s=t===e;return i.createElement(tq,{isCurrent:s,maxHeight:n,maxWidth:r,playQueueItemEntityID:e})}))}render(){const{playQueueItemEntityIDs:e,playQueueItemEntityID:t,size:r,firstIndex:n,errorMessage:s,width:a,height:o}=this.props;return i.createElement("div",{className:"PhotoCarousel-carousel-_qAadT"},s?i.createElement("div",{className:"PhotoCarousel-message-f87_Cx"},i.createElement("span",null,s)):null,a&&o&&e&&!s?i.createElement(UG,{currentItem:t,firstIndex:n,height:o,items:e,renderSlide:this.renderSlide,size:r,width:a}):null)}}const iq=nq;function sq(e){const{hideOverlays:t,canSkipPrevious:r,canSkipNext:n,hasFullscreen:s,isFullscreen:a,isPhoto:o,onPlayNextItem:c,onPlayPreviousItem:l,onCastMenuChange:d,onEnterFullscreenPress:p,onExitFullscreenPress:m,onToggleFullscreen:h}=e;return i.createElement("div",{className:t?"PhotoFullPlayerOverlays-hideOverlays-oLryF1":void 0},o?null:i.createElement(Jx,{className:"PhotoFullPlayerOverlays-playButton-VNnVhr",isFullscreen:a,playerType:u.Ww,onEnterFullscreenPress:p,onExitFullscreenPress:m,onToggleFullscreen:h}),i.createElement("div",{className:"PhotoFullPlayerOverlays-topBar-XUszO4"},i.createElement(Kx,{hasFullscreen:s,isFullscreen:a,playerType:u.Ww,onCastMenuChange:d,onEnterFullscreenPress:p,onExitFullscreenPress:m})),i.createElement(sh.c,{className:"PhotoFullPlayerOverlays-leftButton-MBKgf6 PhotoFullPlayerOverlays-button-UhgcHY",iconComponent:Xh.default,isDisabled:!r,title:(0,g.c)("Previous Photo"),onPress:l}),i.createElement(sh.c,{className:"PhotoFullPlayerOverlays-rightButton-eOMXj_ PhotoFullPlayerOverlays-button-UhgcHY",iconComponent:Yh.default,isDisabled:!n,title:(0,g.c)("Next Photo"),onPress:c}))}sq.defaultProps={hideOverlays:!1};const aq=sq;var oq=r(95140),cq=r(69820),lq=r(96588);function dq(e){const t=e["aria-label"],r=e.className,n=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-tag-auto-560"};s["aria-hidden"]=!t,s.style=n,s.className=Yj.c.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"m287.75.983c-28.03 2.775-53.66 11.968-70.36 28.646-.014.014-201.52 201.63-201.52 201.63-19.19 19.2-19.18 50.3-.007 69.48l145.92 145.99c14.328 14.336 35.21 17.958 52.735 11.06l-170.85-170.94c-20.817-20.828.024-41.68.024-41.68 27.762-27.819 244.06-244.19 244.06-244.19",transform:"translate(1 50)"}].concat([])),i.createElement.apply(i,["path",{d:"m559.45 149.47l-.27-83.68c.237-16.899-5.994-33.8-18.799-46.612-12.806-12.813-29.697-19.05-46.48-18.7l-81.41-.293c-38.15-1.625-75.78 7.347-97.84 29.371-.014.014-201.52 201.63-201.52 201.63-19.19 19.2-19.18 50.3-.007 69.48l145.92 145.99c19.233 19.243 50.27 19.18 69.45-.007l201.48-201.59c21.605-21.658 30.65-58.23 29.482-95.6m-63.51-117.95c8.434-.788 17.14 2.048 23.599 8.509 6.438 6.441 9.275 15.12 8.511 23.534l-.136 109.96c-.777 20.799-8.03 39.93-22.269 54.18-.707.707-1.426 1.398-2.157 2.071-.424.482-.866.954-1.326 1.414l-187.55 187.65c-11.515 11.522-30.19 11.519-41.627.074l-132.12-132.19c-11.475-11.481-11.506-30.06.074-41.649l187.55-187.65c.458-.459.928-.899 1.408-1.321.674-.733 1.366-1.455 2.075-2.164 15.795-15.803 37.594-23 61.13-22.19l102.84-.222",transform:"translate(1 50)"}].concat([])),i.createElement.apply(i,["path",{d:"m435.92 172.81c-27.13 0-49.12-22-49.12-49.15 0-27.14 21.993-49.15 49.12-49.15 27.13 0 49.12 22 49.12 49.15 0 27.14-21.993 49.15-49.12 49.15",transform:"translate(1 50)"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}dq.propTypes={"aria-label":vw().string,className:vw().string,style:vw().object};const uq=dq,pq=function(e){return i.createElement(fi.c,{component:si.c,height:110,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,url:e.url,width:110})},mq=function(e){const{serverEntityID:t,providerEntityID:r,summary:n,totalSize:s,url:a,icon:o,onPress:c}=e;return i.createElement("div",{className:"PhotoHub-hub-YAsslv","data-testid":"relatedPhotoItem"},i.createElement(bp.c,{onPress:c},i.createElement("div",{className:"PhotoHub-container-LbDG6e"},i.createElement("div",{className:"PhotoHub-overlay-kxXaE7"},i.createElement("div",{className:"PhotoHub-title-olhRWE","data-testid":"relatedPhotoName"},n),i.createElement("div",{className:"PhotoHub-count-u8lDLY","data-testid":"relatedPhotoCount"},o?i.createElement(fi.c,{className:"PhotoHub-icon-m_1Lxr",height:14,providerEntityID:r,serverEntityID:t,url:o,width:14}):i.createElement(uq,null),i.createElement("span",null," ",s))),i.createElement("div",{className:"PhotoHub-body-vgYnGt"},i.createElement(pq,{serverEntityID:t,url:a})))))};var hq=Object.defineProperty,yq=Object.getOwnPropertySymbols,gq=Object.prototype.hasOwnProperty,fq=Object.prototype.propertyIsEnumerable,vq=(e,t,r)=>t in e?hq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class bq extends i.Component{constructor(){super(...arguments),((e,t,r)=>{vq(this,t+"",r)})(0,"onPress",(()=>{window.location.href=this.props.hubLink,this.props.endPlayback({playerType:u.Ww})}))}render(){return i.createElement(mq,((e,t)=>{for(var r in t||(t={}))gq.call(t,r)&&vq(e,r,t[r]);if(yq)for(var r of yq(t))fq.call(t,r)&&vq(e,r,t[r]);return e})({onPress:this.onPress},this.props))}}const Sq=(0,s.Ul)((function(){return(0,At.M3)(((e,{librarySectionKey:t})=>t),(0,Ih.c)(),(0,SV.c)(),(0,E_.c)(),vV(),((e,t,r,n,i)=>({hubLink:(0,wV.c)(t,r,{key:i.key,title:i.title}),summary:i.summary,totalSize:i.totalSize,url:i.thumb,icon:i.icon})))}),{endPlayback:Wn.WS})(bq),Pq=function(e){const{serverEntityID:t,providerEntityID:r,librarySectionKey:n,hubEntityIDs:s}=e;return s&&s.length?i.createElement("div",{className:"PhotoHubList-container-EZmHhJ","data-testid":"relatedPhotosContainer"},i.createElement("div",{className:"PhotoHubList-title-RKkP0c"},(0,g.c)("Related Photos")),i.createElement("div",{className:"PhotoHubList-list-bJ_QV1"},s.map((e=>i.createElement(Sq,{key:e,hubEntityID:e,librarySectionKey:n,providerEntityID:r,serverEntityID:t}))))):i.createElement("div",null)};var Iq=r(98832);var Eq=Object.defineProperty,wq=Object.defineProperties,Cq=Object.getOwnPropertyDescriptors,Oq=Object.getOwnPropertySymbols,Mq=Object.prototype.hasOwnProperty,Tq=Object.prototype.propertyIsEnumerable,Dq=(e,t,r)=>t in e?Eq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kq=(e,t)=>{for(var r in t||(t={}))Mq.call(t,r)&&Dq(e,r,t[r]);if(Oq)for(var r of Oq(t))Tq.call(t,r)&&Dq(e,r,t[r]);return e},xq=(e,t)=>wq(e,Cq(t));const Aq=function(e){const{className:t,latitude:r,longitude:n}=e,[s,a]=(0,i.useState)(!0),[o,c]=(0,i.useState)(!1),l=(0,i.useCallback)((()=>a(!1)),[]),d=(0,i.useCallback)((()=>c(!0)),[]),u=`https://www.google.com/maps/search/?api=1&query=${r},${n}`,p={key:"59a999cb8f28fb0a54eb",center:`${r},${n}`,markers:`size:small|color:orange|{${r},${n}`},m=(0,FG.c)();return i.createElement("div",{className:t},i.createElement(Fp.c,{className:"PhotoMap-map-LcSABQ"},(({width:e,height:t})=>i.createElement(i.Fragment,null,i.createElement("div",{className:"PhotoMap-underlay-btSXwh"},s?i.createElement(yp.c,null):null,o?i.createElement("span",{className:"PhotoMap-error-cG_5oa"},(0,g.c)("Unable to load map.")):null),i.createElement(bp.c,{"aria-label":(0,g.c)("Open map in new window"),target:"_blank",to:u},i.createElement(Iq.c,{component:si.c,height:t,src:De.c.join("https://maps.locationiq.com/v2/staticmap",xq(kq({},p),{size:`${e*m}x${t*m}`})),width:e,onError:d,onLoad:l}))))))},Rq="PhotoInformation-line-moBlxi",Nq=function(e){const{className:t,serverEntityID:r,providerEntityID:n,librarySectionKey:s,hubEntityIDs:a,type:o,model:c,width:l,height:d,container:u,iso:p,aperture:m,exposure:h,size:y,hasGeolocation:f,latitude:v,longitude:b}=e;return i.createElement("div",{className:jt()(t,"PhotoInformation-photoInformation-iCA1Es")},i.createElement(Im.c,{autoScroll:!0,className:"PhotoInformation-scroller-d6Q6yT Scroller-vertical-nKq0Q8"},i.createElement("div",{className:"PhotoInformation-exif-FuZeM_"},i.createElement("div",{className:Rq},c?i.createElement("div",null,c):i.createElement("div",null,"clip"===o?(0,g.c)("Video"):(0,g.c)("Photo")),i.createElement(cq.default,null)),i.createElement("div",{className:Rq},l&&d?i.createElement("div",null,l,"  ",d):null,y?i.createElement("div",null,(0,lq.c)(y)):null,u?i.createElement("div",{className:"PhotoInformation-format-QNA0kt"},u):null),p?i.createElement("div",{className:Rq},i.createElement("div",null,(0,g.c)("ISO")," ",p),i.createElement("div",null,m),i.createElement("div",null,h)):null),i.createElement(Pq,{hubEntityIDs:a,librarySectionKey:s,providerEntityID:n,serverEntityID:r})),f?i.createElement(Aq,{className:"PhotoInformation-map-qjiT91",latitude:v,longitude:b}):null)};var Lq=Object.defineProperty,jq=Object.getOwnPropertySymbols,Uq=Object.prototype.hasOwnProperty,Fq=Object.prototype.propertyIsEnumerable,Vq=(e,t,r)=>t in e?Lq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _q={dispatchFetchRelatedPhotos:oq.UF};class Wq extends i.Component{componentDidMount(){this.props.dispatchFetchRelatedPhotos()}componentDidUpdate(e){e.metadataItemEntityID!==this.props.metadataItemEntityID&&this.props.dispatchFetchRelatedPhotos()}render(){const e=this.props,{dispatchFetchRelatedPhotos:t}=e,r=((e,t)=>{var r={};for(var n in e)Uq.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&jq)for(var n of jq(e))t.indexOf(n)<0&&Fq.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchFetchRelatedPhotos"]);return i.createElement(Nq,((e,t)=>{for(var r in t||(t={}))Uq.call(t,r)&&Vq(e,r,t[r]);if(jq)for(var r of jq(t))Fq.call(t,r)&&Vq(e,r,t[r]);return e})({},r))}}const Bq=(0,s.Ul)((function(){return(0,At.M3)((0,Nw.c)(),xw(),((e,t)=>{const{Media:r=[],Geolocation:n={},type:i}=t,s=n.Coordinates,a={serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,librarySectionKey:t.librarySectionKey,metadataItemEntityID:t.entityID,hubEntityIDs:e.relatedHubs||[],type:i,hasGeolocation:!!s};if(s&&(a.latitude=parseFloat(s.latitude),a.longitude=parseFloat(s.longitude)),r.length){const e=r[0],t=e.Part;a.size=t&&t[0].size,a.aperture=e.aperture,a.exposure=e.exposure,a.iso=e.iso,a.model=e.model,a.width=e.width,a.height=e.height,a.container=e.container}return a}))}),_q)(Wq);var Hq=Object.defineProperty;const zq={width:"100%",height:"100%",top:0,position:"absolute",zIndex:0};class Gq extends i.Component{constructor(){super(...arguments),((e,t,r)=>{((e,t,r)=>{t in e?Hq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"onPlayPress",(()=>{this.props.onPlayPress&&this.props.onPlayPress(this.props.index)}))}render(){const{className:e,serverEntityID:t,providerEntityID:r,url:n,dimension:s,onPlayPress:a}=this.props;return n?i.createElement(bp.c,{className:e,isDisabled:!a,onPress:this.onPlayPress},i.createElement(fi.c,{component:si.c,height:s,providerEntityID:r,serverEntityID:t,style:zq,url:n,width:s})):null}}const qq=Gq,Kq=(0,s.Ul)((function(){return(0,At.M3)((0,At.M3)((0,pT.c)(),(e=>{if(!e)return{};const{serverEntityID:t,providerEntityID:r,entityID:n,type:i,thumb:s}=e;return{serverEntityID:t,providerEntityID:r,entityID:n,url:s,isVideo:"clip"===i}})),(({serverEntityID:e,providerEntityID:t,url:r})=>({serverEntityID:e,providerEntityID:t,url:r})))}))(qq),Qq=(0,s.Ul)((function(){return(0,At.M3)(pF(),(e=>({metadataItemEntityID:e.metadataItem})))}))(Kq);var $q=Object.defineProperty;class Yq extends i.Component{constructor(e,t){super(e,t),((e,t,r)=>{((e,t,r)=>{t in e?$q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"onMeasure",(({width:e,height:t})=>{this.setState({isMeasured:!0,width:e,height:t})})),this.state={isMeasured:!1,width:null,height:null}}render(){const{className:e,playQueueItemEntityIDs:t,playQueueItemEntityID:r,firstIndex:n,size:s,onPhotoPress:a}=this.props,{isMeasured:o,width:c,height:l}=this.state,d=t.indexOf(r)+n;let u=[],p=[],m=0;if(o){m=Math.ceil(l);const e=Math.ceil(c/m),t=function({index:e,length:t,renderableWindow:r=t,cellPadding:n=0,cellWidth:i,width:s}){const a=t*i+(t-1)*n;let o=e*(i+n)-(s/2-i/2);a>s&&(o=Math.min(Math.max(o,0),a-s));const c=[],l=Math.max(0,e-r),d=Math.min(t-1,e+r);for(let e=l;e<=d;e++)c[e]=e*(i+n)-o;return{renderStartIndex:l,renderEndIndex:d,positions:c}}({index:d,renderableWindow:e,length:s,cellPadding:2,cellWidth:m,width:c});p=Qy().range(t.renderStartIndex,t.renderEndIndex+1),u=t.positions}return i.createElement("div",{className:jt()(e,"PhotoStrip-strip-Od2AKS"),"data-testid":"photoStripContainer"},i.createElement(Fp.c,{className:"PhotoStrip-thumbs-YENVnw",onMeasure:this.onMeasure},o?p.map((e=>{const r=u[e],s=d===e,o=t[e-n],c={position:"absolute",width:m,height:m,transform:`translate3d(${r}px, 0, 0)`};return i.createElement("div",{key:e,className:"PhotoStrip-cell-pVHa1M",style:c},i.createElement("div",{className:jt()("PhotoStrip-thumbContainer-l5DhFb",s&&"PhotoStrip-isSelected-SO2S1Z"),"data-testid":"photoStripItem"},o?i.createElement(Qq,{className:"PhotoStrip-thumb-dgjmv2",dimension:m-4,index:e-n,playQueueItemEntityID:o,onPlayPress:a}):null))})):null))}}const Xq=Yq;var Jq=Object.defineProperty,Zq=(e,t,r)=>(((e,t,r)=>{t in e?Jq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const eK=parseInt(R.c.playerControlsHeight,10),tK=parseInt(R.c.playerControlsNarrowHeight,10);class rK extends i.Component{constructor(e,t){super(e,t),Zq(this,"_interactionTimeoutID"),Zq(this,"onPhotoStripTogglePress",(e=>{this.setState({isPhotoStripOpen:!this.state.isPhotoStripOpen})})),Zq(this,"onPhotoInformationTogglePress",(e=>{this.setState({isInformationOpen:!this.state.isInformationOpen})})),Zq(this,"onInteraction",(e=>{this.setState({hadRecentInteraction:!0}),this._startInteractionTimer()})),Zq(this,"onInteractionTimeout",(()=>{this.setState({hadRecentInteraction:!1}),this._stopInteractionTimer()})),Zq(this,"onContentMeasure",(e=>{this.props.onPlaybackDimensionsChange(e)})),Zq(this,"onControlsMenuChange",(e=>{this.setState({isControlsMenuOpen:e})})),Zq(this,"onCastMenuChange",(e=>{this.setState({isCastMenuOpen:e})})),Zq(this,"onControlsMouseEnter",(e=>{this.setState({disableInteractionTimer:!0})})),Zq(this,"onControlsMouseLeave",(e=>{this.setState({disableInteractionTimer:!1})})),this.state={disableInteractionTimer:!1,isPhotoStripOpen:!1,isInformationOpen:!1,isControlsMenuOpen:!1,isCastMenuOpen:!1,hadRecentInteraction:!1}}componentDidMount(){this._startInteractionTimer()}componentDidUpdate(e,t){const{disableInteractionTimer:r}=this.state,{disableInteractionTimer:n}=t,i=!n&&r;n&&!r?this._startInteractionTimer():i&&this._stopInteractionTimer()}componentWillUnmount(){this._stopInteractionTimer()}_startInteractionTimer(){this.state.disableInteractionTimer||(this._stopInteractionTimer(),this._interactionTimeoutID=window.setTimeout(this.onInteractionTimeout,2e3))}_stopInteractionTimer(){this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID)}render(){const{isPhotoStripOpen:e,isInformationOpen:t,hadRecentInteraction:r}=this.state,{playQueueItemEntityIDs:n,playQueueItemEntityID:s,isPlayQueueLoading:a,isVideo:o,isPhoto:c,size:l,firstIndex:d,width:u,height:p,canSkipPrevious:m,canSkipNext:h,errorMessage:y,positionMilliseconds:g,bufferStartMilliseconds:f,bufferEndMilliseconds:v,hasFullscreen:b,isFullscreen:S,isMediaLoading:P,isBuffering:I,isNarrowLayout:E,playerType:w,onExitFullscreenPress:C,onEnterFullscreenPress:O,onToggleFullscreen:M,onPlayNextItem:T,onPlayPreviousItem:D,onPlayItem:k}=this.props,{isControlsMenuOpen:x,isCastMenuOpen:A}=this.state,R=e||t,N=!(R||r||x||A),L=!r&&!A,j=R,U=!c&&(P||I),F=E?tK:eK,V=N?null:`translateY(${-F}px)`;return i.createElement("div",{className:jt()("PhotoFullPlayer-fullPlayer-fcxlis",N&&"PhotoFullPlayer-hideControls-AsiFhi",j&&"PhotoFullPlayer-dockControls-ACNCHJ"),"data-testid":"photoPlayerContainer",onMouseDown:this.onInteraction,onMouseMove:this.onInteraction,onTouchEnd:this.onInteraction,onTouchStart:this.onInteraction},c?i.createElement(jG,{playQueueItemEntityID:s,playerType:w}):null,i.createElement("div",{className:"PhotoFullPlayer-player-AHMvpD"},i.createElement("div",{className:"PhotoFullPlayer-main-qXaGZ5"},i.createElement(Fp.c,{className:"PhotoFullPlayer-content-ZR2Qpi",onMeasure:this.onContentMeasure},U?i.createElement("div",{className:"PhotoFullPlayer-spinner-M5sZ6y"},i.createElement(yp.c,{size:Pp.OM})):null,i.createElement(iq,{errorMessage:y,firstIndex:d,height:p,playQueueItemEntityID:s,playQueueItemEntityIDs:n,size:l,width:u}),a?null:i.createElement(aq,{canSkipNext:h,canSkipPrevious:m,hasFullscreen:b,hideOverlays:L,isFullscreen:S,isPhoto:c,onCastMenuChange:this.onCastMenuChange,onEnterFullscreenPress:O,onExitFullscreenPress:C,onPlayNextItem:T,onPlayPreviousItem:D,onToggleFullscreen:M})),e?i.createElement(Xq,{className:"PhotoFullPlayer-mainFooter-oPipVN",firstIndex:d,playQueueItemEntityID:s,playQueueItemEntityIDs:n,size:l,onPhotoPress:k}):null),t?i.createElement(Bq,{className:"PhotoFullPlayer-aside-WlQHKx",playerType:w}):null),a?null:i.createElement("div",{className:"PhotoFullPlayer-bottomBar-DABJzn PhotoFullPlayer-bar-YN4PKF",style:{bottom:-F,height:F,transform:V,transform:V,transform:V},onMouseEnter:this.onControlsMouseEnter,onMouseLeave:this.onControlsMouseLeave},i.createElement(LG,{activatePhotoInformationButton:t,activatePhotoStripButton:e,bufferEndMilliseconds:v,bufferStartMilliseconds:f,isPhoto:c,isVideo:o,playerType:w,positionMilliseconds:g,showPhotoInformationButton:!0,showPhotoStripButton:!0,onControlsMenuChange:this.onControlsMenuChange,onPhotoInformationPress:this.onPhotoInformationTogglePress,onPhotoStripPress:this.onPhotoStripTogglePress})))}}const nK=rK;var iK=Object.defineProperty,sK=Object.getOwnPropertySymbols,aK=Object.prototype.hasOwnProperty,oK=Object.prototype.propertyIsEnumerable,cK=(e,t,r)=>t in e?iK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const lK=function(e){return i.createElement(Lz,{isPlayQueueLoading:e.isPlayQueueLoading},i.createElement(LG,((e,t)=>{for(var r in t||(t={}))aK.call(t,r)&&cK(e,r,t[r]);if(sK)for(var r of sK(t))oK.call(t,r)&&cK(e,r,t[r]);return e})({},e)))};var dK=Object.defineProperty,uK=Object.defineProperties,pK=Object.getOwnPropertyDescriptors,mK=Object.getOwnPropertySymbols,hK=Object.prototype.hasOwnProperty,yK=Object.prototype.propertyIsEnumerable,gK=(e,t,r)=>t in e?dK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fK=(e,t,r)=>(gK(e,"symbol"!=typeof t?t+"":t,r),r);function vK(e){return!!e.playQueueItemEntityID&&!e.isPaused&&!e.isRemotePlayer&&e.isPhoto}class bK extends i.Component{constructor(e,t){super(e,t),fK(this,"_playerTimer"),fK(this,"_slideshowTimer"),fK(this,"onSlideShowAdvance",(()=>{this.props.onPlayNextItem({autoPlay:!0})})),fK(this,"onPlaybackDimensionsChange",(({width:e,height:t})=>{this.setState({mediaWidth:e,mediaHeight:t})})),this.state={mediaHeight:0,mediaWidth:0}}componentDidMount(){vK(this.props)&&this._startSlideshow()}componentDidUpdate(e){const t=vK(e),r=vK(this.props),n=r!==t,i=this.props.playQueueItemEntityID!==e.playQueueItemEntityID;(n||i)&&(r?e.isPaused?this.props.onPlayNextItem({autoPlay:!0}):this._startSlideshow():this._stopSlideshow())}componentWillUnmount(){this._stopSlideshow(),this._playerTimer=window.clearTimeout(this._playerTimer)}_startSlideshow(){this._stopSlideshow(),this._slideshowTimer=window.setTimeout(this.onSlideShowAdvance,5e3)}_stopSlideshow(){this._slideshowTimer&&(this._slideshowTimer=window.clearTimeout(this._slideshowTimer))}render(){const{isMiniPlayer:e,isRemotePlayer:t}=this.props,{mediaWidth:r,mediaHeight:n}=this.state;return i.createElement(pD,((e,t)=>uK(e,pK(t)))(((e,t)=>{for(var r in t||(t={}))hK.call(t,r)&&gK(e,r,t[r]);if(mK)for(var r of mK(t))yK.call(t,r)&&gK(e,r,t[r]);return e})({},this.props),{hasConflicts:!1,isPostPlayVisible:!1,isRemotePlayer:t,mediaComponent:KT,mediaHeight:n,mediaWidth:r,playerComponent:e?lK:nK,playerType:u.Ww,onPlaybackDimensionsChange:this.onPlaybackDimensionsChange}))}}const SK=bK;var PK=Object.defineProperty,IK=Object.defineProperties,EK=Object.getOwnPropertyDescriptors,wK=Object.getOwnPropertySymbols,CK=Object.prototype.hasOwnProperty,OK=Object.prototype.propertyIsEnumerable,MK=(e,t,r)=>t in e?PK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const TK=(0,s.Ul)((function(){return(0,At.M3)(((e,{isMiniPlayer:t})=>t),(0,Nw.c)(),Pw(),(0,Sw.c)(),((e,t,r,n)=>{const i={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,confirmPlaybackPayload:t.confirmPlaybackPayload,confirmOffsetPayload:t.confirmOffsetPayload,confirmRemoteToLocal:t.confirmRemoteToLocal,confirmLocalToRemote:t.confirmLocalToRemote,isPlayQueueLoading:t.isPlayQueueLoading,isMediaLoading:t.isMediaLoading,isPaused:t.isPaused,isBuffering:t.isBuffering,hasError:t.hasError,errorMessage:t.errorMessage,showBackgroundVideoPlayer:!!r&&!e},s=t.playQueue;if(s&&n){const e=s.currentIndex;i.playQueueItemEntityIDs=s.playQueueItems,i.playQueueItemEntityID=n.entityID,i.canSkipPrevious=e>0,i.canSkipNext=e<s.playQueueItems.length-1,i.size=s.length,i.firstIndex=s.playQueueSelectedItemOffset-e,i.currentMediaType=(0,Uw.GG)(n.type).mediaType,i.currentMediaSubtype=n.subtype}return i.isVideo=i.currentMediaType===jw.im,i.isPhoto=i.currentMediaType===jw.Ww,i}))}),(function(e,t){const{playerType:r}=t;return{onPlayPreviousItem(){e(oC.oH({playerType:r}))},onPlayNextItem(t={}){e(oC.Ax({playerType:r,autoPlay:t.autoPlay}))},onPlayItem(t){e(oC.oN({playerType:r,index:t}))},onTogglePlayPause(){e(bw.Cu({playerType:r}))}}}))(SK);TK.propTypes=((e,t)=>IK(e,EK(t)))(((e,t)=>{for(var r in t||(t={}))CK.call(t,r)&&MK(e,r,t[r]);if(wK)for(var r of wK(t))OK.call(t,r)&&MK(e,r,t[r]);return e})({},TK.propTypes),{playerType:vw().string.isRequired});const DK=TK;var kK=r(84536),xK=r(27248),AK=r(1676);const RK=new Date(864e13),NK={modalContainer:"LibraryUpgradeReminder-modalContainer-vdxK8L Modal-modalContainer-iz5oBP",checkInputGroup:"LibraryUpgradeReminder-checkInputGroup-qRoU1B",banner:"LibraryUpgradeReminder-banner-mfmZC9",strong:"LibraryUpgradeReminder-strong-_D9EH4",form:"LibraryUpgradeReminder-form-sfRzEH"};function LK(e){const t=(0,s.OY)(),r=(0,_t.y)();(0,Ge.c)({page:l.c5});const{onDismiss:n}=e,a=(0,i.useCallback)((()=>{r.onClose(),n()}),[r,n]),o=(0,s.w1)(lE.c),c=(0,i.useCallback)((e=>{a(),(0,xK.Q)(t,o,e)}),[o,t,a]);return(0,i.useEffect)((()=>{r.onOpen()}),[r]),i.createElement(au.wJ,{isOpen:r.isOpen,onOpenChange:a},i.createElement(au.EX,{closeButtonAccessibilityLabel:(0,g.c)("Close"),header:(0,g.c)("Turbocharge Your Metadata"),onClose:a},i.createElement(kK.cp,{className:NK.form,onSubmit:c},i.createElement(CI.c,null,i.createElement("div",{className:NK.banner}),i.createElement(h.ye,{gap:"m"},i.createElement(wI.c,{className:NK.strong,component:"div",message:(0,g.c)("Upgrade your Movie and TV libraries to {openLink}the new improved metadata agents today{closeLink}!"),tags:[{open:"openLink",close:"closeLink",component:bp.c,kind:Sg.ac,target:"_blank",to:Rb.Y}]}),i.createElement("ul",null,i.createElement("li",null,i.createElement(Ye.a,null,(0,g.c)("Much faster, more accurate matching"))),i.createElement("li",null,i.createElement(Ye.a,null,(0,g.c)("The best blend of artwork, summaries, ratings, and more from all your favorite sources"))),i.createElement("li",null,i.createElement(Ye.a,null,(0,g.c)("Automatic collections from The Movie Database"))),i.createElement("li",null,i.createElement(Ye.a,null,(0,g.c)("More control over TV season titles, episode ordering, and extras")))),i.createElement(Ye.a,{color:"muted"},(0,g.c)("You can review servers and libraries available for upgrade in server settings. The agent these libraries use will eventually stop receiving updates and you shouldnt encounter any problems upgrading the libraries.")),i.createElement(Ye.a,{color:"muted"},(0,g.c)('Note: Existing items in your libraries will not be affected until they are refreshed. You can refresh them individually or upgrade all existing items with "Refresh All Metadata".')))),i.createElement(au._A,null,i.createElement(nl.c,{checkboxText:(0,g.c)("Refresh all metadata"),formGroupClassName:NK.checkInputGroup,initialValue:!0,name:"refreshMetadata",size:Pp.wH}),i.createElement(au.YB,null,i.createElement(Ut.q,{label:(0,g.c)("Not now"),onPress:a}),i.createElement(Ut.q,{color:"accent",label:(0,g.c)("Upgrade Libraries"),type:"submit"}))))))}function jK(){const e=(0,s.w1)(lE.c),{isExpired:t,onDismiss:r}=function(e,{key:t,remindAfter:r}){const n=(0,s.OY)(),a=(0,s.w1)((0,ec.c)("reminders")),o=(0,DM.c)(e,t),c=a.find((e=>e.id===o)),l=(0,i.useCallback)((()=>{n((0,np.Kc)({id:o,remindAfter:r}))}),[n,o,r]);return{isExpired:!c||(0,AK.c)(c.remindAfter),onDismiss:l}}(TM.c.LibraryUpgrade,{key:"",remindAfter:RK});return e.length&&t?i.createElement(LK,{onDismiss:r}):i.createElement(i.Fragment,null)}var UK=Object.defineProperty,FK=Object.getOwnPropertySymbols,VK=Object.prototype.hasOwnProperty,_K=Object.prototype.propertyIsEnumerable,WK=(e,t,r)=>t in e?UK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,BK=(e,t)=>{for(var r in t||(t={}))VK.call(t,r)&&WK(e,r,t[r]);if(FK)for(var r of FK(t))_K.call(t,r)&&WK(e,r,t[r]);return e};const HK=i.lazy((()=>r.e(5364).then(r.bind(r,75364)))),zK=i.lazy((()=>Promise.all([r.e(3424),r.e(6128),r.e(7896),r.e(3584)]).then(r.bind(r,70444)))),GK=i.lazy((()=>r.e(3884).then(r.bind(r,23884)))),qK=i.lazy((()=>r.e(7132).then(r.bind(r,87132)))),KK=i.lazy((()=>r.e(160).then(r.bind(r,50160)))),QK=i.lazy((()=>Promise.all([r.e(8192),r.e(7700),r.e(6128),r.e(7896),r.e(7808)]).then(r.bind(r,47808)))),$K=i.lazy((()=>r.e(3824).then(r.bind(r,53824)))),YK=i.lazy((()=>r.e(824).then(r.bind(r,90824)))),XK=i.lazy((()=>Promise.all([r.e(3424),r.e(2496),r.e(5800)]).then(r.bind(r,48884)))),JK=i.lazy((()=>Promise.all([r.e(3424),r.e(2496),r.e(9544)]).then(r.bind(r,78868)))),ZK=i.lazy((()=>Promise.all([r.e(5944),r.e(6128),r.e(1912)]).then(r.bind(r,10740)))),eQ=i.lazy((()=>r.e(840).then(r.bind(r,80840)))),tQ=i.lazy((()=>r.e(7592).then(r.bind(r,65212)))),rQ=i.lazy((()=>r.e(460).then(r.bind(r,20460)))),nQ=i.lazy((()=>Promise.all([r.e(8192),r.e(7568),r.e(5824)]).then(r.bind(r,10344)))),iQ=i.lazy((()=>r.e(7252).then(r.bind(r,77252)))),sQ="scroll-container dark-scrollbar";function aQ(){(function(){const{addToast:e,toasts:t}=(0,Pe.Wo)(),r=(0,i.useRef)(t);(0,i.useEffect)((()=>{r.current=t}),[t]);const n=(0,i.useCallback)((t=>{const n=function(e){return"string"==typeof e?{color:"default",description:e}:{color:zf(e.type),description:e.message}}(t);r.current.every((e=>e.description!==n.description))&&e(n)}),[e]);(0,i.useEffect)((()=>(ou.c.on("show:alert",n),()=>{ou.c.off("show:alert",n)})),[n])})(),function(){const e=(0,s.OY)(),t=(0,a.IT)();(0,i.useEffect)((()=>{e((0,Ie.Ml)())}),[t,e])}(),function(){const e=(0,s.OY)(),t=(0,a.Uz)();(0,i.useEffect)((()=>(e((0,f.Aj)({location:{pathname:t.location.pathname,search:t.location.search}})),t.listen((t=>{e((0,f.Aj)({location:{pathname:t.pathname,search:t.search}}))})))),[e,t])}(),function(){const{authToken:e}=(0,s.w1)(Q.c),{communityProvider:t}=(0,s.w1)(K.c);(0,i.useEffect)((()=>{re.mk.enhanceEndpoints({endpoints:{GetActivityFeed:{keepUnusedDataFor:600,providesTags:(e,t,r)=>[{type:$.MB.GetActivityFeed,id:JSON.stringify(r)}]},GetActivityById:{providesTags:(e,t,r)=>[{type:$.MB.GetActivityById,id:r.id}]}}}),ce.mk.enhanceEndpoints({endpoints:{GetUserDetails:{providesTags:(e,t,r)=>[{type:X.gK.GetUserDetails,id:r.uuid}]},GetWatchHistoryHub:{keepUnusedDataFor:600,providesTags:(e,t,r)=>[{type:X.gK.GetWatchHistoryHub,id:JSON.stringify(r)}]},GetRatingsHub:{keepUnusedDataFor:600,providesTags:(e,t,r)=>[{type:X.gK.GetRatingsHub,id:JSON.stringify(r)}]},GetUserStats:{providesTags:(e,t,r)=>[{type:X.gK.GetUserStatistics,id:r.uuid}]},GetWatchlistHub:{keepUnusedDataFor:600}}}),oe.mk.enhanceEndpoints({endpoints:{friendRequests:{providesTags:(e,t,r)=>r?[{type:r.type===te.gV.Received?G.O.ReceivedFriendsRequests:G.O.SentFriendsRequests,id:JSON.stringify(r)}]:[]},friendSuggestions:{providesTags:[G.O.FriendSuggestions]},GetFriends:{providesTags:(e,t,r)=>r?[{type:G.O.GetFriends,id:JSON.stringify(r)}]:[]},GetPendingRequestsCount:{providesTags:(e,t,r)=>r?[r.type===te.gV.Received?G.O.ReceivedFriendRequestCount:G.O.SentFriendRequestCount]:[]}}}),ue.mk.enhanceEndpoints({endpoints:{UserSearch:{providesTags:(e,t,r)=>r?[{type:ee.J.UserSearch,id:JSON.stringify(r)}]:[]}}}),le.mk.enhanceEndpoints({endpoints:{getMutedUsers:{providesTags:[Z._.MutedUsers]},getBlockedUsers:{providesTags:[Z._.BlockedUsers]}}}),ie.enhanceEndpoints({endpoints:{getActivityComments:{keepUnusedDataFor:300,providesTags:(e,t,r)=>r?[{type:Y.E.GetComments,id:JSON.stringify(r)}]:[]}}}),de.mk.enhanceEndpoints({endpoints:{reportComments:{keepUnusedDataFor:300,providesTags:(e,t,r)=>r?[{type:J.B.GetReportComments,id:JSON.stringify(r)}]:[]},getReportedIssues:{keepUnusedDataFor:600,providesTags:(e,t,r)=>r?[{type:J.B.GetReportedIssues,id:JSON.stringify(r)}]:[]}}})}),[]),(0,i.useEffect)((()=>{q.k$.setHeader("x-plex-token",e)}),[e]),(0,i.useEffect)((()=>{t&&q.k$.setEndpoint(t)}),[t])}();const e=(0,bb.c)(),t=(0,s.w1)(ye.c),r=(0,s.w1)(ge.c),n=(0,s.w1)((0,he.c)(p.KY)),h=r===fe.Z9.Locked,y=function(e){var t,r;const n=(0,s.OY)(),a=(0,_t.y)(),o=(0,s.w1)(Yf),c=(0,yl.c)(!!o),l=(0,s.w1)(Wt.c),d=(0,s.w1)(ye.c),u=(0,Xf.c)(),{viewStateSync:{isPopulated:p,isPending:m,consent:h,error:y}}=(0,s.w1)(Je.c);return(0,i.useEffect)((()=>{!m&&!p&&!y&&l.isConnected&&e&&d&&n(cl.c.actions.fetchViewStateSync({server:l}))}),[l,n,y,m,p,d,e]),(0,i.useEffect)((()=>{o&&!c&&u&&"notSet"===h&&a.onOpen()}),[u,a,c,o,h]),(0,i.useEffect)((()=>{c&&!a.isOpen&&n(cl.c.actions.showViewStateSyncPrompt({viewStateSyncConfig:void 0}))}),[n,a.isOpen,c]),(0,i.useEffect)((()=>{c&&!o&&a.onClose()}),[a,c,o]),{modalState:a,origin:null!=(t=null==o?void 0:o.origin)?t:"",page:null!=(r=null==o?void 0:o.page)?r:fe.sF.Default}}(e),g=(0,pe.c)(),v=(0,m.c)(g.legacy),b=(0,i.useCallback)((e=>e.match.params.id?i.createElement(gn,null):i.createElement(a.YJ,{to:(0,a.Yz)(Zr.c.discoverPivot,{pivot:d.gz})})),[]);return i.createElement(i.Fragment,null,h?null:i.createElement(_i,null),e&&t?i.createElement(i.Fragment,null,i.createElement($f.c,BK({},y)),i.createElement($v,null),i.createElement(Sv,null),i.createElement(vb,null),n?i.createElement(uu,null):null):null,i.createElement(me.c,null,i.createElement(i.Suspense,{fallback:i.createElement(Wu.c,null,i.createElement(E.c,null,i.createElement(O.c,null)))},i.createElement(a.Wk,null,i.createElement(a.kX,{component:qK,exact:!0,path:Zr.c.firstRunExperience}),i.createElement(a.kX,{component:Hf,exact:!0,path:Zr.c.serverSetup}),i.createElement(a.kX,{component:iv,exact:!0,path:Zr.c.watchNow}),i.createElement(a.kX,null,i.createElement("div",null,i.createElement(rw,null)),i.createElement("div",{className:sQ},i.createElement(me.c,null,i.createElement(i.Suspense,{fallback:i.createElement(Wu.c,null,i.createElement(E.c,null,i.createElement(O.c,null)))},i.createElement(a.Wk,null,i.createElement(a.kX,{component:Wy,exact:!0,path:Zr.c.serverAwait}),i.createElement(a.kX,{exact:!0,path:Zr.c.logout},i.createElement(Wu.c,null,i.createElement(gw,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.login},i.createElement(Wu.c,null,i.createElement(iw,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.signUp},i.createElement(Wu.c,null,i.createElement(Xg,{signUp:!0}))),i.createElement(a.kX,{component:HK,exact:!0,path:Zr.c.announcements}),i.createElement(a.kX,{component:KK,exact:!0,path:Zr.c.info}),i.createElement(a.kX,{component:$K,exact:!0,path:Zr.c.logs}),i.createElement(a.kX,{component:nQ,path:Zr.Y}),i.createElement(a.kX,null,i.createElement(Wu.c,null,i.createElement(_u.c,null,i.createElement(jK,null),i.createElement(_y,null),i.createElement(me.c,null,i.createElement(i.Suspense,{fallback:i.createElement(I.c,null,i.createElement(Pb,null),i.createElement(E.c,null,i.createElement(O.c,null)))},i.createElement(a.Wk,null,o.c.allowSyncDownload?i.createElement(a.kX,{component:GK,exact:!0,path:Zr.c.downloads}):null,i.createElement(a.kX,{exact:!0,path:Zr.c.home},i.createElement(fc,null)),i.createElement(a.kX,{component:QK,exact:!0,path:Zr.c.hybridGuide}),i.createElement(a.kX,{component:zK,exact:!0,path:Zr.c.media}),i.createElement(a.kX,{component:YK,exact:!0,path:Zr.c.playHistory}),i.createElement(a.kX,{component:XK,exact:!0,path:Zr.c.playlist}),i.createElement(a.kX,{component:v?JK:ZK,exact:!0,path:Zr.c.prePlay}),i.createElement(a.kX,{exact:!0,path:Zr.c.prePlayCredits},i.createElement(el,null)),i.createElement(a.kX,{component:eQ,exact:!0,path:Zr.c.providerSettings}),i.createElement(a.kX,{component:tQ,exact:!0,path:Zr.c.search}),i.createElement(a.kX,{component:lw,exact:!0,path:Zr.c.serverDownloadMessage}),i.createElement(a.kX,{component:rQ,exact:!0,path:Zr.c.serverUpdate}),i.createElement(a.YJ,{exact:!0,path:Zr.c.watchlist,to:Zr.c.discoverWatchlist}),i.createElement(a.kX,{exact:!0,path:Zr.c.profile},i.createElement(S.cp,{metricsPage:l.W4},i.createElement(uc.c,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.editProfile},i.createElement(S.cp,{metricsPage:l.Kg},i.createElement(Rl,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.userProfile},i.createElement(S.cp,{metricsPage:l.W4},i.createElement(uc.c,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.friends},i.createElement(S.cp,{metricsContextParam:c.SELF,metricsPage:l.kR},i.createElement(tu.c,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.userFriends},i.createElement(S.cp,{metricsPage:l.kR},i.createElement(z,null))),i.createElement(a.kX,{exact:!0,path:Zr.c.prePlayActivityFeed},i.createElement(ZK,{page:Vn})),i.createElement(a.kX,{exact:!0,path:Zr.c.activity,render:b}),i.createElement(a.kX,{exact:!0,path:Zr.c.report},i.createElement(gn,{isReport:!0})),i.createElement(a.kX,{exact:!0,path:Zr.c.profileWatchlist},i.createElement(S.cp,{metricsPage:l.wL},i.createElement(eu,{page:Jd}))),i.createElement(a.kX,{exact:!0,path:Zr.c.profileRatings},i.createElement(S.cp,{metricsPage:l.kX},i.createElement(eu,{page:Zl}))),i.createElement(a.kX,{exact:!0,path:Zr.c.profileWatchHistory},i.createElement(S.cp,{metricsPage:l.wB},i.createElement(eu,{page:Bd}))),i.createElement(a.kX,{exact:!0,path:Zr.c.reports},i.createElement(S.cp,{metricsPage:l.yG},i.createElement(Uu,null))),i.createElement(a.kX,{component:Zc.c}))))))))))))))),h?i.createElement(Qf,null):null,e?i.createElement(i.Fragment,null,i.createElement(bc,null,i.createElement(gG,{component:sG,playerType:u.k9})),i.createElement(bc,null,i.createElement(gG,{component:DK,playerType:u.Ww}))):null,o.c.allowSyncDownload?i.createElement(i.Suspense,{fallback:null},i.createElement(iQ,null)):null)}},59380:(e,t,r)=>{"use strict";r.d(t,{_:()=>o,o:()=>a});var n=r(24348),i=r(35624),s=r(56632);const a={[s.It.Poster]:{width:168,height:252},[s.It.Landscape]:{width:parseInt(i.c.cardWidth,10),height:346}},o={[s.y4.MetadataMessage]:n.CC,[s.y4.Rating]:n.yW,[s.y4.WatchHistory]:n.Ih,[s.y4.Watchlist]:n.aA,[s.y4.Post]:n.Uh,[s.y4.WatchRating]:n.ug,[s.y4.WatchSession]:n._Y,Report:n.G_}},24660:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});const n="continueWatching"},64224:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});const n=250},37048:(e,t,r)=>{"use strict";r.d(t,{c3:()=>n,iZ:()=>c,iw:()=>o,kb:()=>a,kv:()=>s,s5:()=>i});const n=5,i="quickSearchInput",s=30,a=10,o=500,c="  "},35770:(e,t,r)=>{"use strict";r.d(t,{c:()=>x});var n=r(11504),i=r(27876),s=r(3008),a=r(41744),o=r(42152),c=r(77072),l=r(66780),d=r(29164),u=r(23300),p=r(94840),m=r(46896),h=r(8684),y=r(46572),g=r(65144),f=r(98260),v=r(97884),b=r(49828);const S={row:"UserRowFriendshipActions-row-bECJGY",alternateRow:"UserRowFriendshipActions-alternateRow-MPRv5D UserRowFriendshipActions-row-bECJGY ListRow-alternateRow-VySkqw ListRow-row-oh5MTV"};var P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&M(e,r,t[r]);if(w)for(var r of w(t))O.call(t,r)&&M(e,r,t[r]);return e},D=(e,t)=>I(e,E(t)),k=(e,t)=>{var r={};for(var n in e)C.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))t.indexOf(n)<0&&O.call(e,n)&&(r[n]=e[n]);return r};function x(e){var t=e,{highlightedIndex:r,isHoverable:P=!1,updateFriendStatus:I,getItemProps:E,onPress:w}=t,C=k(t,["highlightedIndex","isHoverable","updateFriendStatus","getItemProps","onPress"]);const{item:O,cellIndex:M}=C,x=(0,h.c)(),A=(0,m.c)(C),R=O?null==E?void 0:E({style:A.style,index:C.cellIndex,item:O}):void 0,N=(0,i.w1)(d.c),{details:{uuid:L}}=(0,i.w1)(y.c),[j,U]=(0,n.useState)(!1),F=(0,n.useCallback)((()=>{null==w||w(),x({action:l.iw})}),[w,x]);if(!O)return null;const V=O.id===L,_=V?(0,v.c)("profile"):(0,v.c)("userProfile",{id:O.id}),W=r===C.cellIndex;return n.createElement("div",D(T({},R),{style:A.style}),n.createElement(p.c,{alternateClassName:S.alternateRow,className:S.row,isAlternate:!(R||M%2),isHovered:!!P&&W},n.createElement(s.ye,{align:"space-between",height:"100%",orientation:"horizontal",paddingX:"m",verticalAlign:"center",width:"100%"},n.createElement(s.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},n.createElement(o.mw,{posterStyle:"circle",width:(0,b.c)("xxl")},n.createElement(u.c,{server:N,size:(0,b.c)("xxl"),url:O.avatar}),n.createElement(o.ic,{href:_,posterStyle:"circle",onPress:F})),n.createElement(s.ye,{shrink:!0},n.createElement(c.a,{color:"primary",font:"body-2",numberOfLines:1},n.createElement(a.c,{href:_,onPress:F},O.displayName||O.username)),O.displayName?n.createElement(c.a,{color:"default",font:"body-3",numberOfLines:1},O.username):null,V?null:n.createElement(f.c,{mutualFriends:O.mutualFriends}))),!V&&(!P||P&&W||j)?n.createElement(s.ye,{shrink:!1,verticalAlign:"center"},n.createElement(g.c,{setIsWaiting:U,updateFriendStatus:I,user:O})):null)))}},34708:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(44212),i=r(45372);const s=(0,n.is)({name:"friends",initialState:{communityFriends:{error:null,friends:[],isPending:!1,isPopulated:!1},receivedFriendRequests:{staleId:""},sentFriendRequests:{staleId:""},isSendingHomeUserInvite:!1,error:null},reducers:{fetchCommunityFriends(e,t){(0,i.G8)(e.communityFriends)},fetchCommunityFriendsSucceeded(e,{payload:t}){(0,i.mM)(e.communityFriends),e.communityFriends.friends=t.friends},fetchCommunityFriendsFailed(e,{payload:t}){(0,i.C)(e.communityFriends,t.error)},clearError(e,t){e.error=null},sendHomeUserInvite(e,t){e.error=null,e.isSendingHomeUserInvite=!0},sendHomeUserInviteSucceeded(e,t){e.isSendingHomeUserInvite=!1},sendHomeUserInviteFailed(e,{payload:t}){e.isSendingHomeUserInvite=!1,e.error=t.error},staleReceivedFriendRequests(e,{payload:t}){e.receivedFriendRequests.staleId=t.id},staleSentFriendRequests(e,{payload:t}){e.sentFriendRequests.staleId=t.id},clearSentFriendRequests(e,t){e.sentFriendRequests.staleId=""},clearReceivedFriendRequests(e,t){e.receivedFriendRequests.staleId=""}}})},3972:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var n=(e=>(e.ReceivedFriendsRequests="ReceivedFriendsRequests",e.SentFriendsRequests="SentFriendsRequests",e.FriendSuggestions="FriendSuggestions",e.GetFriends="GetFriends",e.ReceivedFriendRequestCount="ReceivedFriendRequestCount",e.SentFriendRequestCount="SentFriendRequestCount",e))(n||{})},23852:(e,t,r)=>{"use strict";function n(e){return{data:e.friendRequests.nodes,hasNextPage:e.friendRequests.pageInfo.hasNextPage,endCursor:e.friendRequests.pageInfo.endCursor}}r.d(t,{c:()=>n})},20916:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(27876),s=r(92432),a=r(34708),o=r(3972),c=r(57864),l=r(30708);const d=(0,c.M3)(l.c,(e=>{var t;return null!=(t=e.GetFriends)?t:{}}));var u=r(56784),p=r(5784);const m=(0,c.M3)(l.c,(e=>{var t;return null!=(t=e.FriendSuggestions)?t:{}})),h=(0,c.M3)(l.c,(e=>{var t;return null!=(t=e.UserSearch)?t:{}}));var y=r(31760);var g=r(21796),f=r(36048),v=r(45692),b=r(28636),S=r(39864),P=r(11528);function I(e,t=!1){const{addToast:r}=(0,s.Wo)(),c=(0,i.OY)(),{updateFriendStatus:l}=function(){const{updateFriendStatus:e}=function(){const e=(0,i.OY)(),t=(0,i.w1)(h);return{updateFriendStatus:(0,n.useCallback)(((r,n)=>{Object.keys(t).forEach((t=>{e(y.mk.util.updateQueryData("UserSearch",JSON.parse(t),(e=>{e&&(e.searchUsers=e.searchUsers.map((e=>(e.id===r&&(e.friendStatus=n),e))))})))}))}),[e,t])}}(),{updateFriendStatus:t}=function(){const e=(0,i.OY)(),t=(0,i.w1)(m);return{updateFriendStatus:(0,n.useCallback)(((r,n)=>{Object.keys(t).forEach((()=>{e(u.mk.util.updateQueryData("friendSuggestions",void 0,(e=>{e&&(e.suggestedUsers=e.suggestedUsers.map((e=>(e.id===r&&(e.friendStatus=n),e))))})))}))}),[e,t])}}(),{updateFriendStatus:r}=function(){const e=(0,i.OY)(),t=(0,i.w1)(d);return{updateFriendStatus:(0,n.useCallback)(((r,n)=>{Object.keys(t).forEach((t=>{e(u.mk.util.updateQueryData("GetFriends",JSON.parse(t),(e=>{e&&(e.user.friends.nodes=e.user.friends.nodes.map((e=>(e.id===r&&(e.friendStatus=n),e))))})))}))}),[e,t])}}(),{updateFriendStatus:s}=(0,p.c)();return{updateFriendStatus:(0,n.useCallback)(((n,i)=>{e(n,i),r(n,i),t(n,i),s(n,i)}),[s,t,r,e])}}(),{remove:I}=(0,g.c)(S.gV.Received),{remove:E}=(0,g.c)(S.gV.Sent),[w,{error:C,isLoading:O,isSuccess:M,reset:T}]=e();(0,n.useEffect)((()=>{M&&T()}),[c,M,T]);const D=(0,n.useCallback)(((r,n,i)=>{w({input:{user:r}}).unwrap().then((()=>{l(r,n),c(P.mk.util.invalidateTags([{type:f.gK.GetUserDetails,id:r}])),e===u.C2&&(c(u.mk.util.invalidateTags([{type:o.O.SentFriendsRequests,id:JSON.stringify((0,v.c)(S.gV.Sent))}])),c(u.mk.util.invalidateTags([o.O.SentFriendRequestCount]))),(i===S.Ky.Friends&&e===u.ug||e===u.k1)&&c(u.mk.util.invalidateTags([{type:o.O.GetFriends,id:JSON.stringify((0,b.c)({id:r}))}])),t&&c(a.c.actions.fetchCommunityFriends());let s=I(r);s&&c(a.c.actions.staleReceivedFriendRequests({id:r})),s=E(r),s&&c(a.c.actions.staleSentFriendRequests({id:r}))}))}),[c,w,t,I,E,l,e]);return(0,n.useEffect)((()=>{(null==C?void 0:C.message)&&(r({color:"alert",description:C.message,type:"foreground"}),T())}),[r,null==C?void 0:C.message,T]),{action:D,isSuccess:M,error:C,isLoading:O}}},54008:(e,t,r)=>{"use strict";function n(e){return"displayName"in e}r.d(t,{c:()=>n})},86636:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(83672);function s(e){return(0,n.M3)(i.c,(t=>t.communityFriends.friends.find((t=>t.id===e))))}},19388:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.friends.communityFriends))},83672:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.friends))},3276:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.friends.receivedFriendRequests.staleId))},63480:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.friends.sentFriendRequests.staleId))},96732:(e,t,r)=>{"use strict";r.d(t,{CM:()=>l,Wi:()=>c,k$:()=>o});var n=r(83896),i=r(63772),s=r(76220),a=r(9248);const o=new n.GraphQLClient(a.G.Production);function c(e){return e.set("X-Plex-Client-Identifier",s.c.prop("X-Plex-Client-Identifier")),e.set("X-Plex-Version",s.c.prop("X-Plex-Version")),e.set("X-Plex-Platform",s.c.prop("X-Plex-Platform")),e.set("X-Plex-Product",s.c.prop("X-Plex-Product")),e}function*l(e,t,r){const n=new Headers;return c(n),yield(0,i.iQ)(o,"request",[{document:e,variables:t,requestHeaders:n,signal:r}])}},36624:(e,t,r)=>{"use strict";r.d(t,{c:()=>zt});var n=r(11504),i=r(27876),s=r(35860),a=r(42728),o=r(90220),c=r(3008),l=r(42152),d=r(9868),u=r(19204),p=r(69452),m=r(93808),h=r(4388),y=r(6400),g=r(85712),f=r(37984),v=r(64156),b=r(624),S=r(80280),P=r(76772),I=r(2024),E=r(46896),w=r(29208),C=r(35768),O=r(50704),M=r(49828),T=r(95156),D=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&L(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&L(e,r,t[r]);return e},U=(e,t)=>k(e,x(t));const F=parseInt(T.c.v4PagePadding,10),V=(0,P.c)({columnWidth:100,aspectRatio:h.eg,innerHorizontalPadding:(0,M.c)("m"),titleHeight:0,outerPaddingRight:F,outerPaddingLeft:F});function _({item:e,posterSize:t}){const{metricsContextTuple:r}=(0,w.e0)(),[i,s,a]=(0,f.c$)(),o=(0,v.cp)({server:i,provider:s,width:t,height:t,url:e.thumb}),c=(0,u.c)(i,s,a,{pageType:e.type===m.WW.Directory?g.Qf.List:g.Qf.Hub,key:e.key,context:(0,w.QN)(r)});return n.createElement(l.mw,{posterStyle:"square",width:t},o?n.createElement(I.c,{fit:I.A.Cover,height:t,src:o,width:t}):null,c?n.createElement(l.ic,{href:c,posterStyle:"square"}):null)}function W(e){const t=(0,E.c)(e),r=(0,d.y)();return n.createElement("div",{ref:t.cellRef,style:t.style},n.createElement(l.mw,{posterStyle:"square",width:e.cellWidth},n.createElement(c.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(o.default,{size:"xxl"})),n.createElement(O.c,{isOpen:r.isOpen,onClose:r.onClose},n.createElement(l.u6,{posterStyle:"square",onPress:r.onOpen}))))}const B=n.forwardRef(((e,t)=>{var r=e,{item:i}=r,s=((e,t)=>{var r={};for(var n in e)R.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&A)for(var n of A(e))t.indexOf(n)<0&&N.call(e,n)&&(r[n]=e[n]);return r})(r,["item"]);const a=(0,E.c)(s),o=(0,n.useMemo)((()=>(0,y.c)({height:s.cellHeight,aspectRatio:h.eg})),[s.cellHeight]);return n.createElement("div",{ref:(0,C.c)(t,a.cellRef),style:a.style},i?n.createElement(_,{item:i,posterSize:s.cellWidth}):n.createElement(p.c,{index:s.cellIndex,style:o}))}));function H({hub:e,items:t,totalSize:r,onPageRequest:i}){const s=(0,n.useMemo)((()=>e=>{var t;return(null==(t=e.item)?void 0:t.type)===m.WW.Setting?n.createElement(W,j({},e)):n.createElement(w.cp,{key:e.key,column:e.cellIndex},n.createElement(B,U(j({},e),{item:e.item})))}),[]);return n.createElement(S.c,{cellComponentFactory:s,hub:e,hubTitleComponent:b.c,items:t,layout:V,totalSize:null!=r?r:3,onPageRequest:i})}var z=r(80784),G=r(84144),q=r(17068),K=r(67484),Q=r(18880),$=r(77092),Y=r(98676),X=r(61676),J=r(72772),Z=r(49124),ee=r(51304),te=r(11164);const re={container:"MetadataWidePosterListItem-container-wLrKqv",card:"MetadataWidePosterListItem-card-s6Wl1l PosterCard-card-BRB1k_",placeholderCard:"MetadataWidePosterListItem-placeholderCard-OyuhTQ MetadataPosterCardPlaceholder-placeholder-i9YsQa PosterCard-card-BRB1k_",placeholderTitle:"MetadataWidePosterListItem-placeholderTitle-Poyjp5",placeholderSubtitle:"MetadataWidePosterListItem-placeholderSubtitle-lnmzlj MetadataWidePosterListItem-placeholderTitle-Poyjp5",titlesContainer:"MetadataWidePosterListItem-titlesContainer-IwpdVP",title:"MetadataWidePosterListItem-title-i8xTCr",doubleTitle:"MetadataWidePosterListItem-doubleTitle-uY1YP6 MetadataWidePosterListItem-title-i8xTCr",subtitle:"MetadataWidePosterListItem-subtitle-iu5GJm MetadataWidePosterListItem-title-i8xTCr",cardShimmer:"MetadataWidePosterListItem-cardShimmer-HH0n_P"};var ne=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ae=(e,t)=>{var r={};for(var n in e)ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ne)for(var n of ne(e))t.indexOf(n)<0&&se.call(e,n)&&(r[n]=e[n]);return r};function oe(e){var t=e,{item:r}=t,i=ae(t,["item"]);const{containerType:s,containerSubtype:a,listStyle:o}=(0,ee.qy)(),c=(0,J.c)(null==r?void 0:r.sourceURI),l=(0,Z.c)(null==r?void 0:r.sourceURI),d=(0,E.c)(i),u=(0,n.useMemo)((()=>(0,h.cp)(s,a,{listStyle:o})),[a,s,o]),m=(0,n.useMemo)((()=>(0,y.c)({height:i.cellHeight,aspectRatio:u})),[u,i.cellHeight]);return r?n.createElement(K.c,{metadataItem:r,metadataItemState:c},n.createElement("div",{className:re.container,style:d.style},n.createElement(te.c,{aspectRatio:u,className:re.card,height:m.height,metadataItem:r,metadataItemState:c,metadataTimelineState:l,width:m.width}),n.createElement("div",{className:re.titlesContainer},n.createElement(Q.c,{className:re.doubleTitle,metadataItem:r}),n.createElement("div",{className:re.subtitle},n.createElement(X.c,{metadataItem:r}),r.leafCount?n.createElement(n.Fragment,null,n.createElement(q.c,{separator:""}),n.createElement(Y.c,{metadataItem:r})):null,r.duration?n.createElement(n.Fragment,null,n.createElement(q.c,{separator:""}),n.createElement($.c,{metadataItem:r})):null)))):n.createElement("div",{className:re.container,style:d.style},n.createElement(p.c,{className:re.placeholderCard,index:i.cellIndex,style:m}),n.createElement("div",{className:re.titlesContainer},n.createElement("div",{className:re.placeholderTitle}),n.createElement("div",{className:re.placeholderSubtitle})))}var ce=r(67532),le=r(67604),de=r(29412),ue=Object.defineProperty,pe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,ye=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ge=(e,t)=>{for(var r in t||(t={}))me.call(t,r)&&ye(e,r,t[r]);if(pe)for(var r of pe(t))he.call(t,r)&&ye(e,r,t[r]);return e},fe=(e,t)=>{var r={};for(var n in e)me.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&pe)for(var n of pe(e))t.indexOf(n)<0&&he.call(e,n)&&(r[n]=e[n]);return r};const ve=parseInt(T.c.v4PagePadding,10),be=parseInt(T.c.v4CardShadowSize,10),Se=parseInt(T.c.gapMedium,10);var Pe=r(82598),Ie=r(50536),Ee=Object.defineProperty,we=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&Me(e,r,t[r]);if(we)for(var r of we(t))Oe.call(t,r)&&Me(e,r,t[r]);return e};function De({hub:e,hubTitleComponent:t,items:r,titleCount:s,totalSize:a,onPageRequest:o}){const{type:c,subtype:l,style:d=ce.y.Shelf}=e,u=(0,i.w1)(Ie.c),{containerMeta:p}=(0,ee.qy)(),y=(0,n.useMemo)((()=>d===ce.y.WideShelf?function(e){var t=e,{type:r,subtype:n,columnWidth:i}=t,s=fe(t,["type","subtype","columnWidth"]);const a=(0,h.cp)(r,n,{listStyle:ce.y.WideShelf});return(0,de.c)(ge({columnWidth:3*i+Se,rowHeight:Math.floor(i/a),aspectRatio:a,innerHorizontalPadding:Se,outerPaddingTop:be,outerPaddingRight:ve,outerPaddingBottom:be,outerPaddingLeft:ve},s))}({type:c,subtype:l,columnWidth:u}):(0,le.c)({listType:c,subtype:l,listStyle:d,columnWidth:u,displayFields:null==p?void 0:p.DisplayFields,displayImages:null==p?void 0:p.DisplayImage,titleCount:s})),[d,c,l,u,null==p?void 0:p.DisplayFields,null==p?void 0:p.DisplayImage,s]),g=(0,n.useMemo)((()=>r.reduce(((e,t,r)=>((null==t?void 0:t.type)===m.WW.UnresolvedAd&&e.push(r),e)),[])),[r]),f=(0,n.useCallback)((e=>{var t;if((null==(t=e.item)?void 0:t.type)===m.WW.UnresolvedAd)return n.createElement(n.Fragment,null);let r;return r=(0,Pe.c)(c)?z.c:d===ce.y.WideShelf?oe:G.c,n.createElement(w.cp,{key:e.key,column:e.cellIndex},n.createElement(r,Te({},e)))}),[d,c]);return n.createElement(S.c,{cellComponentFactory:f,emptyIndices:g,hub:e,hubTitleComponent:t,items:r,keyPropName:"listItemKey",layout:y,totalSize:a,onPageRequest:o})}var ke=r(1124);const xe=function(e,t){return e-t*Math.floor(e/t)};var Ae=r(75696),Re=r(10376),Ne=r(51660),Le=r(27256);const je=function(e,t){const r=e.match(/^#([0-9|a-f]{2})([0-9|a-f]{2})([0-9|a-f]{2})$/i);if(!r)throw new Error("invalid hex color pattern");const[,n,i,s]=r;return`rgba(${parseInt(n,16)}, ${parseInt(i,16)}, ${parseInt(s,16)}, ${t})`};var Ue=r(98476),Fe=r(90068),Ve=r(22916),_e=r(36940);const We={card:"SpotlightHubCard-card-nT0JEA",hoveredCard:"SpotlightHubCard-hoveredCard-EK_8uC SpotlightHubCard-card-nT0JEA",link:"SpotlightHubCard-link-S0Oi9B",colorGradient:"SpotlightHubCard-colorGradient-_CrMXo",image:"SpotlightHubCard-image-AcBtsb",attributionLogo:"SpotlightHubCard-attributionLogo-mtweRx",copyOverlay:"SpotlightHubCard-copyOverlay-Skh1dQ",title:"SpotlightHubCard-title-jaxMDr",summary:"SpotlightHubCard-summary-g4KmLh",action:"SpotlightHubCard-action-QDPxM0"};function Be({isSelected:e,metadataItem:t}){const[r,i]=(0,f.c$)(),s=(0,Fe.c)(t,"key"),a=je(t.backgroundColor,0),o=je(t.backgroundColor,1),[c,l]=(0,Re.c)(),d=(0,n.useMemo)((()=>({backgroundColor:o})),[o]),u=(0,n.useMemo)((()=>({backgroundImage:`linear-gradient(to left, ${a}, ${o} 400px)`})),[a,o]),p=(0,v.cp)({server:r,provider:i,size:Ue.kb,url:t.art});return n.createElement("div",{ref:l,className:c?We.hoveredCard:We.card,style:d},n.createElement("div",{className:We.colorGradient,style:u}),n.createElement("img",{className:We.image,src:p}),n.createElement("div",{className:We.copyOverlay},n.createElement("div",{className:We.title},t.title),n.createElement("div",{className:We.summary},t.summary),n.createElement("div",{className:We.action},t.action)),n.createElement("div",{className:We.attributionLogo},n.createElement(_e.c,{attributionLogo:t.attributionLogo})),n.createElement(Ve.c,{className:We.link,tabIndex:e?void 0:-1,title:t.title,to:s}))}var He=r(99192);const ze={dotButton:"SpotlightHubDot-dotButton-q3IRu0 Button-button-Eu0WcX Link-link-vSsQW1",dot:"SpotlightHubDot-dot-yMkjuT",dotIsSelected:"SpotlightHubDot-dotIsSelected-We_bDM SpotlightHubDot-dot-yMkjuT"};function Ge({index:e,selectedIndex:t,metadataItem:r,onPress:i}){const s=(0,n.useCallback)((()=>{i(e)}),[e,i]);return n.createElement(He.c,{className:ze.dotButton,title:r.title,onPress:s},n.createElement("span",{className:e===t?ze.dotIsSelected:ze.dot}))}const qe={cell:"SpotlightHubScroller-cell-QwzhEE",hub:"SpotlightHubScroller-hub-eHU2wc VirtualHubScroller-hub-EpgwMo",hubScroller:"SpotlightHubScroller-hubScroller-zNleOl VirtualHubScroller-hubScroller-gv2_Qy VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",hubScrollerControlledScroll:"SpotlightHubScroller-hubScrollerControlledScroll-xv1kix SpotlightHubScroller-hubScroller-zNleOl VirtualHubScroller-hubScroller-gv2_Qy VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",dots:"SpotlightHubScroller-dots-ZdgAoP"};function Ke(e,t){return t*(e||0)}function Qe({hub:e,items:t}){const[r,{width:i}]=(0,Ne.c)(),s=(0,n.useCallback)((e=>{u(Ke(i,e))}),[i]),[a,o]=(0,n.useState)(0),c=(0,n.useCallback)((({scrollLeft:e})=>{o(e)}),[]),l=function(e,t,r){return e?(0,ke.c)(Math.floor((r-e/2)/e)+1,0,t-1):0}(i,t.length,a),[d,u]=(0,n.useState)(),[p,m,h]=(0,Ae.c)(),[y,g]=(0,Re.c)(),[f,v]=(0,n.useState)(0);return(0,n.useEffect)((()=>{v(Date.now())}),[a]),(0,n.useEffect)((()=>{if(a===d)return void u(void 0);const r=Date.now()-f,n=p||y||!e.autoAdvanceDelayMs?null:window.setTimeout((()=>{u(Ke(i,xe(l+1,t.length)))}),r>e.autoAdvanceDelayMs?500:e.autoAdvanceDelayMs-r),s=window.setTimeout((()=>{const e=Ke(i,l);e!==a&&u(e)}),1e3);return()=>{n&&window.clearTimeout(n),s&&window.clearTimeout(s)}}),[i,e.autoAdvanceDelayMs,p,y,t.length,f,l,a,d]),0===t.length?null:n.createElement("div",{ref:(0,C.c)(r,g),className:qe.hub,onBlur:h,onFocus:m},n.createElement(Le.c,{className:void 0===d?qe.hubScroller:qe.hubScrollerControlledScroll,scrollDirection:Le.y.Horizontal,smoothScroll:!0,targetScrollLeft:d,onScrollPositionChange:c},t.map(((e,t)=>n.createElement("div",{key:t,className:qe.cell},n.createElement(w.cp,{column:t},n.createElement(Be,{isSelected:t===l,metadataItem:e})))))),t.length>1?n.createElement("div",{className:qe.dots},t.map(((e,t)=>n.createElement(Ge,{key:t,index:t,metadataItem:e,selectedIndex:l,onPress:s})))):null)}var $e=r(58660),Ye=r(77072),Xe=r(66780),Je=r(17268),Ze=r(59396),et=r(81764),tt=r(8684),rt=r(43196),nt=r(576),it=r(56972),st=r(25760),at=r(48708);const ot={container:"StreamingServicesUpsellHub-container-rhMuZF",content:"StreamingServicesUpsellHub-content-MGxdgZ",text:"StreamingServicesUpsellHub-text-Ympb98"};function ct(){const e=(0,i.OY)(),[t,r]=(0,f.c$)(),a=(0,tt.c)({pane:"streamingServicesBanner"}),o=(0,d.y)(),{services:l,isPopulated:u,isPending:p,error:m}=(0,i.w1)((0,st.c)(r)),{platforms:h,isPending:y,isPopulated:g,error:v}=(0,i.w1)((0,it.c)(r)),b=(0,i.w1)((0,rt.c)("dismissedUpsellModals")).includes(Je.STREAMING_SERVICES),S=(0,nt.c)();(0,n.useEffect)((()=>{!S||b||p||u||m||e(at.cp.actions.preferredServicesFetchRequested({server:t,provider:r}))}),[e,S,b,p,u,m,r,t]),(0,n.useEffect)((()=>{!S||b||y||g||v||e(at.cp.actions.availabilityPlatformsFetchRequested({server:t,provider:r}))}),[v,e,S,b,y,g,r,t]);const P=(0,n.useCallback)((()=>{a({action:Xe.ii}),o.onOpen()}),[o,a]),I=(0,n.useCallback)((()=>{e((0,et.Kg)({dismissedModal:Je.STREAMING_SERVICES}))}),[e]);return!S||b||p||y||(null==l?void 0:l.length)||!(null==h?void 0:h.length)||!s._u(r.identifier,s.Im)?null:n.createElement("div",{className:ot.container},n.createElement("div",{className:ot.content},n.createElement(c.YR,{align:"center",gap:"xxl",verticalAlign:"center",width:"100%"},n.createElement(c.ye,{gap:"xs"},n.createElement(Ye.a,{color:"primary",font:"heading-2"},(0,Ze.c)("Find What To Watch, Anywhere!")),n.createElement("div",{className:ot.text},n.createElement(Ye.a,{color:"muted",font:"body-2"},(0,Ze.c)("With Plex, youre just one click away from streaming virtually any movie or TV show, no matter where it lives. Just tell us your favorite streaming services and well take care of the rest.")))),n.createElement(c.ye,{align:"center",gap:"m",shrink:!1},n.createElement(O.c,{isOpen:o.isOpen,onClose:o.onClose},n.createElement($e.q,{label:(0,Ze.c)("Select My Streaming Services"),size:"l",onPress:P})),n.createElement($e.c,{color:"muted",font:"button-2",onPress:I},(0,Ze.c)("Don't show this again"))))))}var lt=r(16852);const dt={container:"TidalUpsellHub-container-ZOahCq",text:"TidalUpsellHub-text-QS3GEG",logo:"TidalUpsellHub-logo-dusTRa",body:"TidalUpsellHub-body-MGXQQi",link:"TidalUpsellHub-link-vPNE3g Link-link-vSsQW1"};function ut(){const[,e]=(0,f.c$)(),t=(0,tt.c)({pane:"tidalBanner"}),r=(0,n.useCallback)((()=>{t({action:Xe.q0})}),[t]);return s._u(e.identifier,s.y6)?n.createElement("div",{className:dt.container},n.createElement("div",{className:dt.text},n.createElement("div",{"aria-label":"Tidal",className:dt.logo}),n.createElement("div",{className:dt.body},(0,Ze.c)("Preview 60 million streaming tracks, thousands of music videos and more.")," ",n.createElement(Ve.c,{className:dt.link,rel:"noopener noreferrer",target:"_blank",to:lt.ii,onPress:r},(0,Ze.c)("Get started at plex.tv"))))):null}var pt=r(11822),mt=r(2708),ht=r(17260),yt=r(87980),gt=r(55932);const ft=parseInt(T.c.listButtonHeight,10);var vt=r(36820),bt=Object.defineProperty,St=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,It=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,Ct=(e,t,r)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ot=(e,t)=>{for(var r in t||(t={}))Et.call(t,r)&&Ct(e,r,t[r]);if(It)for(var r of It(t))wt.call(t,r)&&Ct(e,r,t[r]);return e},Mt=(e,t)=>St(e,Pt(t)),Tt=(e,t)=>{var r={};for(var n in e)Et.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&It)for(var n of It(e))t.indexOf(n)<0&&wt.call(e,n)&&(r[n]=e[n]);return r};const Dt=parseInt(T.c.v4PagePadding,10),kt=parseInt(T.c.listButtonHeight,10),xt=n.forwardRef(((e,t)=>{var r=e,{item:i,onMeasure:s}=r,a=Tt(r,["item","onMeasure"]);const{metricsContextTuple:o}=(0,w.e0)(),c=(0,E.c)(a),[l,{width:d}]=(0,ht.c)(),[p,h,y]=(0,f.c$)(),{onPlayPress:v}=(0,yt.c)(i),b=(0,n.useMemo)((()=>i.type===m.WW.Hub||i.type===m.WW.Directory?(0,u.c)(p,h,y,{key:i.key,pageType:i.type===m.WW.Hub?g.Qf.Hub:g.Qf.List,context:(0,w.QN)(o)}):null),[i,p,h,y,o]);return(0,n.useEffect)((()=>{d&&s(a.cellIndex,d)}),[s,a.cellIndex,d]),n.createElement("div",{ref:(0,C.c)(t,c.cellRef),style:c.style},b?n.createElement($e.mq,{ref:l,href:b,label:i.title}):n.createElement($e.q,{ref:l,label:i.title,onPress:v}))}));function At({hub:e,items:t,totalSize:r,onPageRequest:i}){const[s,a]=(0,n.useState)([]),o=(0,n.useMemo)((()=>function(e){const{innerPaddingRight:t=0,outerPaddingLeft:r=0,outerPaddingRight:n=0,getEstimatedCellWidth:i,cellWidths:s,height:a}=e;let o,c;function l(e){const t=c.findIndex((t=>t>e)),r=c.length-1;return-1===t?r:Math.min(Math.max(0,t-1),r)}return{rowHeight:ft,getListMeasurements(e,l){c=[],o=[];const d=(e.viewportWidth||0)-n-r;for(let e=0;e<l;e++)o[e]=(s[e]||i(e))+t;let u=r;return o.forEach((e=>{c.push(u),u+=e})),{width:o.reduce(((e,t)=>e+t),0)+r+n,height:a,outerPaddingTop:0,outerPaddingRight:n,outerPaddingBottom:0,outerPaddingLeft:r,listTop:e.listTop,listLeft:e.listLeft,viewportWidth:d,viewportHeight:e.viewportHeight}},getPositionForIndex:e=>({row:1,column:e,cellX:(null==c?void 0:c[e])||0,cellY:0,cellWidth:(null==o?void 0:o[e])||0,cellHeight:a}),getRangesForPosition(e,t,r,n){const i=t+n.viewportWidth,s=l(t),a=l(t),o=l(i)+1,c=l(i)+1;return{visibleStartIndex:(0,gt.c)(a,r),visibleEndIndex:(0,gt.c)(o,r),renderStartIndex:(0,gt.c)(s,r),renderEndIndex:(0,gt.c)(c,r)}}}}({getEstimatedCellWidth:e=>{var r;const n=t[e];return(null==(r=null==n?void 0:n.title)?void 0:r.length)?10*n.title.length:0},innerPaddingRight:(0,M.c)("m"),outerPaddingRight:Dt,outerPaddingLeft:Dt,cellWidths:s,height:kt})),[s,t]),c=(0,n.useCallback)(((e,t)=>{a((r=>{const n=[...r];return n[e]=t,n}))}),[]),l=(0,n.useMemo)((()=>e=>{const t=e,{item:r}=t,i=Tt(t,["item"]);return r?n.createElement(vt.c,{key:i.key,metadataItem:r},n.createElement(w.cp,{column:i.cellIndex},n.createElement(xt,Mt(Ot({},i),{item:r,onMeasure:c})))):n.createElement(n.Fragment,null)}),[c]);return n.createElement(S.c,{cellComponentFactory:l,hub:e,items:t,layout:o,totalSize:r,onPageRequest:i})}var Rt=r(99372),Nt=r(640),Lt=Object.defineProperty,jt=Object.defineProperties,Ut=Object.getOwnPropertyDescriptors,Ft=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?Lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bt=(e,t)=>{for(var r in t||(t={}))Vt.call(t,r)&&Wt(e,r,t[r]);if(Ft)for(var r of Ft(t))_t.call(t,r)&&Wt(e,r,t[r]);return e},Ht=(e,t)=>jt(e,Ut(t));function zt({hub:e,hubTitleComponent:t,titleCount:r}){const{sourceURI:o,key:c,type:l,subtype:d,random:u,Meta:p,style:m=ce.y.Shelf,isStale:h}=e,y=(0,i.OY)(),[g,v]=(0,f.c$)(),b=(0,Rt.i)(a.gP),S=(0,Rt.i)(a.Go),P=(0,n.useMemo)((()=>s._u(v.identifier,s.Im)&&b||s._u(v.identifier,[s.$9,s._0])&&S?"7.0":void 0),[v,S,b]),I=(0,n.useMemo)((()=>(0,mt.c)(o)),[o]),E=(0,i.w1)(I);(0,n.useEffect)((()=>{h&&!u&&l!==ce.a.Station&&y(pt.c.actions.throttledRepopulateRequested({server:g,provider:v,sourceURI:o,providerVersionOverride:P}))}),[y,h,v,P,u,g,o,l]);const w=(0,n.useCallback)((e=>{y(pt.c.actions.fetchRangeRequested(Ht(Bt({},e),{server:g,provider:v,sourceURI:o,providerVersionOverride:P,params:{includeMeta:1}})))}),[y,v,P,g,o]);if(!E)return null;const C=function(e,t,r){if(t===ce.y.Upsell){if(s._u(r,s.y6))return ut;if(s._u(r,s.Im))return ct}return t===ce.y.Spotlight?Qe:t===ce.y.Button||e===ce.a.Station?At:t===ce.y.AvailabilityPlatforms?H:De}(l,m,v.identifier);return n.createElement(ee.cp,{containerKey:c,containerMeta:p,containerProvider:v,containerServer:g,containerSourceURI:E.sourceURI,containerSubtype:d,containerType:l,listStyle:m},n.createElement(Nt.cp,{items:E.items},n.createElement(C,{hub:e,hubTitleComponent:t,items:E.items,titleCount:r,totalSize:E.totalSize,onPageRequest:w})))}},20436:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(2536),s=r(3008),a=r(87564),o=r(81808),c=r(41260);const l={[c.i.Tidal]:a.default,[c.i.WatchTogether]:o.default};function d({attribution:e}){const t=l[e];return t?n.createElement(t,{size:"l"}):null}var u=r(624);function p({children:e,href:t,hub:r}){return n.createElement(s.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},r.attribution?n.createElement(d,{attribution:r.attribution}):null,n.createElement(u.c,{href:t},e),r.badgeTitle?n.createElement(i.k,{accessibilityLabel:r.badgeTitle,color:"accent",label:r.badgeTitle}):null)}},41260:(e,t,r)=>{"use strict";r.d(t,{G:()=>n,i:()=>i});var n=(e=>(e.ContinueWatching="home.continue",e.MergedContinueWatching="continueWatching",e.OnDeck="home.ondeck",e.OtherEditions="movie.editions",e.PersonKnownFor="person_known_for",e.PlexCredits="plexCredits",e.StreamingServicesUpsell="streamingServicesUpsell",e.VodContinueWatching="movies.continueWatching",e.WatchlistContinueWatching="watchlist.continueWatching",e.Watchlist="home.watchlist",e))(n||{}),i=(e=>(e.Plex="com.plex",e.Tidal="com.tidal",e.WatchTogether="com.watchtogether",e))(i||{})},7148:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(67532);function i({items:e,key:t="",type:r=n.a.Mixed,title:i=""}){return{type:r,more:!1,initialSize:e.length,isStale:!1,key:t,hubIdentifier:"",source:"",sourceURI:"",title:i}}},11096:(e,t,r)=>{"use strict";r.d(t,{AB:()=>i,Mv:()=>o,OQ:()=>c,W4:()=>s,mE:()=>n,sV:()=>a});var n=(e=>(e.String="string",e.Integer="integer",e.Boolean="boolean",e))(n||{}),i=(e=>(e.Ascending="asc",e.Descending="desc",e))(i||{}),s=(e=>(e.Year="year",e.Decade="decade",e.Duration="duration",e.Rating="rating",e.HDR="hdr",e.FleSize="fileSize",e.Bitrate="bitrate",e))(s||{}),a=(e=>(e.Tag="tag",e.String="string",e.Integer="integer",e.Boolean="boolean",e.Date="date",e.SubtitleLanguage="subtitleLanguage",e.AudioLanguage="audioLanguage",e.Resolution="resolution",e))(a||{}),o=(e=>(e.AddedAt="addedAt",e.AddedAtGrandparentTitle="addedAtGrandparentTitle",e.AirsAt="airsAt",e.AttributionLogo="attributionLogo",e.AudienceRating="audienceRating",e.ChildCount="childCount",e.ContentRating="contentRating",e.Duration="duration",e.EpisodeIdentifier="episodeIdentifier",e.EpisodeTitleAndIdentifier="episodeTitleAndIdentifier",e.GrandparentTitle="grandparentTitle",e.LastRatedAt="lastRatedAt",e.LastViewedAt="lastViewedAt",e.LeafCount="leafCount",e.MediaBitrate="mediaBitrate",e.OriginallyAvailableAt="originallyAvailableAt",e.OriginalTitle="originalTitle",e.ParentTitle="parentTitle",e.PlayableUntil="playableUntil",e.Rating="rating",e.SourceTitle="sourceTitle",e.Title="title",e.TitleAttributed="titleAttributed",e.UnviewedLeafCount="unviewedLeafCount",e.UserRating="userRating",e.ActivityRating="activityRating",e.VideoResolution="videoResolution",e.ViewCount="viewCount",e.ViewOffset="viewOffset",e.Year="year",e.YearAndEdition="yearAndEdition",e))(o||{}),c=(e=>(e.Attribution="attribution",e.Avatar="avatar",e.Background="background",e.Banner="banner",e.Clear="clear",e.CoverArt="coverArt",e.CoverPoster="coverPoster",e.CoverSquare="coverSquare",e.Snapshot="snapshot",e))(c||{})},48140:(e,t,r)=>{"use strict";r.d(t,{CS:()=>s,cp:()=>a});var n=r(11504);const i=(0,n.createContext)({getTracked:()=>!1,setTracked:()=>{}});function s(){return(0,n.useContext)(i)}function a({children:e}){const[t,r]=(0,n.useState)([]),s=(0,n.useCallback)((e=>e.every((e=>t.includes(e)))),[t]),a=(0,n.useCallback)((e=>{r((t=>[...t,...e]))}),[]),o=(0,n.useMemo)((()=>({getTracked:s,setTracked:a})),[s,a]);return n.createElement(i.Provider,{value:o},e)}},67484:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(69956),a=r(51304),o=r(11822),c=r(37984),l=r(36820);function d({children:e,metadataItem:t,metadataItemState:r}){const d=(0,i.OY)(),{containerServer:u,containerProvider:p,containerSourceURI:m}=(0,a.qy)(),h=(0,n.useMemo)((()=>t.source?(0,s.c)(t.source):null),[t.source]),y=!!h&&(h.serverIdentifier!==u.machineIdentifier||h.providerIdentifier!==p.identifier);return(0,n.useEffect)((()=>{(r.isStale||r.isDeleted)&&m&&d(o.c.actions.throttledRepopulateRequested({server:u,provider:p,sourceURI:m}))}),[p,u,m,d,r.isDeleted,r.isStale]),h&&y?n.createElement(l.c,{metadataItem:t},n.createElement(c.cp,{machineIdentifier:h.serverIdentifier,providerIdentifier:h.providerIdentifier},e)):n.createElement(l.c,{metadataItem:t},e)}},84084:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(11504),i=r(72772),s=r(87980),a=r(26044),o=r(10986),c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t)),f=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r};function v(e){var t,r=e,{metadataItem:c,isVisible:l}=r,d=f(r,["metadataItem","isVisible"]);const u=(0,i.c)(null==(t=c.onDeck)?void 0:t.sourceURI),p=(0,i.c)(c.sourceURI),{onPlayPress:m,playModal:h}=(0,s.c)(c);return n.createElement(n.Fragment,null,l?n.createElement(o.c,g(y({},d),{"aria-label":(0,a.c)(c,p,u),onPress:m})):null,h)}},80784:(e,t,r)=>{"use strict";r.d(t,{c:()=>L});var n=r(11504),i=r(19204),s=r(67484),a=r(69452),o=r(72772),c=r(93808),l=r(9088),d=r(4388),u=r(6400),p=r(51304),m=r(67532),h=r(85712),y=r(37984),g=r(64156),f=r(22916),v=r(84184),b=r(1432),S=r(10376),P=r(2024),I=r(46896),E=r(29208),w=r(35768);const C="MetadataDirectoryListItem-posterTitleContainer-qAyWmT",O="MetadataDirectoryListItem-posterTitle-Na8TeT MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu";var M=Object.defineProperty,T=Object.defineProperties,D=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&R(e,r,t[r]);if(k)for(var r of k(t))A.call(t,r)&&R(e,r,t[r]);return e};const L=n.forwardRef(((e,t)=>{var r=e,{item:M}=r,R=((e,t)=>{var r={};for(var n in e)x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&k)for(var n of k(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r})(r,["item"]);const{metricsContextTuple:L}=(0,E.e0)(),[j,U,F]=(0,y.c$)(),{containerType:V,containerSubtype:_,listStyle:W}=(0,p.qy)(),B=(0,o.c)(null==M?void 0:M.sourceURI),[H,z]=(0,S.c)(),G=(0,I.c)(R),q=(0,n.useMemo)((()=>(0,d.cp)(V,_,{listStyle:W})),[_,V,W]),K=(0,n.useMemo)((()=>(0,u.c)({width:R.cellWidth,aspectRatio:q})),[q,R.cellWidth]),Q=(0,g.cp)(($=N({},K),Y={server:j,provider:U,url:(null==M?void 0:M.icon)||(null==M?void 0:M.thumb)},T($,D(Y))));var $,Y;if(!M)return n.createElement("div",{ref:(0,w.c)(t,G.cellRef),style:G.style},n.createElement(a.c,{index:R.cellIndex,style:K}));const X=(0,i.c)(j,U,F,{pageType:M.type===c.WW.Hub?h.Qf.Hub:h.Qf.List,key:M.key,context:(0,E.QN)(L)}),J=M.type===c.WW.Directory&&(W===m.y.Shelf||W===m.y.Grid);return n.createElement(s.c,{metadataItem:M,metadataItemState:B},n.createElement("div",{ref:(0,w.c)(t,G.cellRef),style:G.style},n.createElement(v.c,{ref:z,style:K},n.createElement(P.c,N({className:"MetadataDirectoryListItem-image-p9Cu_j",fit:M.icon?P.A.Contain:P.A.Cover,src:Q},K)),n.createElement(b.c,{"aria-label":(0,l.c)(M),isHovered:H,to:X}),J?n.createElement("div",{className:"MetadataDirectoryListItem-overlayTitleContainer-eYKtTZ"},n.createElement("span",{className:"MetadataDirectoryListItem-overlayTitle-K8g25Y"},M.title)):null),X&&!J?n.createElement("div",{className:C},n.createElement(f.c,{className:O,"data-testid":"directoryTitleLink",title:M.title,to:X},M.title)):null,X||J?null:n.createElement("div",{className:C},n.createElement("span",{className:O},M.title))))}))},41128:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(11504),i=r(11096),s=r(4388),a=r(6400),o=r(77404),c=r(37984),l=r(64156),d=r(84184),u=r(2024),p=r(3852),m=r(54492);var h=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const P=(0,n.memo)((function({metadataItem:e,width:t,height:r}){const[h,P]=(0,c.c$)();(0,p.c)("number"==typeof t||"number"==typeof r,"`MetadataPersonPosterCard` requires either a `width` or `height, or both");const I=(0,n.useMemo)((()=>null!=t&&null!=r?{width:t,height:r}:t?(0,a.c)({width:t,aspectRatio:s.Aj}):r?(0,a.c)({height:r,aspectRatio:s.Aj}):{width:0,height:0}),[r,t]),E=.5*I.width,w=(0,l.cp)((C=((e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e})({},I),O={server:h,provider:P,url:(0,o.c)(e,{aspectRatio:s.Aj,displayImageType:i.OQ.CoverPoster})},y(C,g(O))));var C,O;return n.createElement(d.c,{className:w?void 0:"MetadataPersonPosterCard-fallbackCard-zP8vuS MetadataSimplePosterCard-fallbackCard-dIP7aK MetadataSimplePosterCard-card-baQSyw PosterCard-card-BRB1k_",style:I},w?n.createElement(u.c,{className:"MetadataPersonPosterCard-image-Vt6PJb MetadataSimplePosterCard-image-x27yrl",fit:u.A.Cover,height:I.height,src:w,width:I.width}):n.createElement(m.c,{className:"MetadataPersonPosterCard-anagram-yHXO4u Anagram-anagram-H5cIHF",height:E,name:e.title,width:E}))}))},11164:(e,t,r)=>{"use strict";r.d(t,{c:()=>ze});var n=r(11504),i=r(94512),s=r(63900),a=r(13968),o=r(83216),c=r(90220),l=r(88208),d=r(60952),u=r(77072),p=r(42728),m=r(59396),h=r(93808),y=r(51304),g=r(22968),f=r(99372);const v=function(e){const t=(0,g.c)(),{containerServer:r,containerKey:n}=(0,y.qy)(),i=!(r.isCloud||!(null==n?void 0:n.startsWith("/hubs/home/recentlyAdded")));return!(0,f.i)(p.o5)||t||i&&(e.type===h.WW.Season||e.type===h.WW.Episode)};var b=r(12624);var S=r(19776),P=r(37984),I=r(2536),E=r(53480);const w="ActivityPlayedBadge-badge-v6xG79";function C({viewedAt:e}){const t=(0,n.useMemo)((()=>(0,E.S)(e)),[e]),r=(0,f.i)(p.o5);return n.createElement("div",{className:w},n.createElement(I.k,{accessibilityLabel:(0,m.c)("Watched at {timeAgo}",{timeAgo:t}),icon:r?l.default:d.y,label:t}))}var O=r(29532),M=r(38652);const T="MetadataPosterCardBadge-badgeBackground-wP_E27",D="MetadataPosterCardBadge-topRightBadge-JfhWWc MetadataPosterCardBadge-badge-APg5ma",k=function({metadataItem:e,metadataItemState:t,animationDuration:r,isPlayedStatusHidden:i,isAd:s}){const[a,o]=(0,P.c$)(),[y]=(0,M.Q5)(),I=(0,g.c)(),E=(0,f.i)(p.aQ),w=(0,f.i)(p.o5),k=function(e,t){const r=v(e);return(0,b.c)(e,t)&&r}(e,t),x=function(e,t){const r=v(e),n=(0,f.i)(p.o5),i=n?e.type===h.WW.Season:e.type===h.WW.Show||e.type===h.WW.Season,s=n?t.viewCount&&t.unviewedLeafCount:t.unviewedLeafCount;return!!(i&&s&&r)}(e,t);return s?n.createElement("div",{className:D,style:{animationDuration:r}},n.createElement("span",{className:"MetadataPosterCardBadge-adBadgeBackground-nVwzz9 MetadataPosterCardBadge-badgeBackground-wP_E27"},n.createElement(u.a,{font:"caption"},(0,m.c)("Ad")))):(null==y?void 0:y.viewedAt)?n.createElement("div",{className:"MetadataPosterCardBadge-legacyTopRightBadge-kKwWNI MetadataPosterCardBadge-badge-APg5ma",style:{animationDuration:r}},n.createElement(C,{viewedAt:null==y?void 0:y.viewedAt})):a.isCloud&&!I?null:e.smart&&!e.radio?n.createElement("div",{className:D,style:{animationDuration:r}},n.createElement("span",{className:"MetadataPosterCardBadge-smartBadgeBackground-WubGBf MetadataPosterCardBadge-badgeBackground-wP_E27"},n.createElement(c.default,{color:"inherit",size:"m"}))):!(null==y?void 0:y.viewedAt)&&E&&!i&&k?n.createElement("div",{className:D,style:{animationDuration:r}},n.createElement("span",{className:T},w?n.createElement(l.default,{size:"m"}):n.createElement(d.y,{size:"m"}))):E||!(0,S.c)(e,t,o)||t.viewOffset||t.viewCount||!k?t.grandparentSubscriptionType||t.subscriptionType?n.createElement("div",{className:D},n.createElement("span",{className:T},n.createElement(O.c,{size:"m",subscriptionType:t.grandparentSubscriptionType||t.subscriptionType}))):x?n.createElement("div",{className:D,style:{animationDuration:r}},n.createElement("span",{className:T},n.createElement(u.a,{color:"primary",font:"caption"},t.unviewedLeafCount))):null:n.createElement("div",{className:"MetadataPosterCardBadge-legacyUnwatchedTagMask-IilkzW"},n.createElement("div",{className:"MetadataPosterCardBadge-legacyUnwatchedTag-qmh3Qh"}))};var x=r(74388),A=r(70564),R=r(24992),N=r(90068),L=r(9088),j=r(68260),U=r(1432),F=r(21772),V=r(36820),_=r(89080),W=r.n(_),B=r(27876),H=r(19264),z=r(66780),G=r(35860),q=r(30388),K=r(84084),Q=r(52008),$=r(77192),Y=r(87096),X=r(62592),J=r(22916),Z=r(13876),ee=r(71604),te=r(6536),re=r(66472),ne=r(90424);const ie="MetadataPosterCardActions-playButton-tT8c2I PlayButton-playButton-vS1WII MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",se="MetadataPosterCardActions-playCoverButton-UfPjfq PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1 MetadataPosterCardActions-playButton-tT8c2I PlayButton-playButton-vS1WII MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",ae="MetadataPosterCardActions-playCircle-rOnuVA PlayButton-playCircle-fK1f_v MetadataPosterCardCircle-cardCircle-gBHNQG",oe="MetadataPosterCardActions-editButton-XbdZgx MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",ce="MetadataPosterCardActions-selectButton-ysaoZ5 SelectButton-selectButton-SvPc9f Link-link-vSsQW1 MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",le="MetadataPosterCardActions-moreButton-kNJ7sJ MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",de="MetadataPosterCardActions-reorderButton-AQqjiz MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",ue="MetadataPosterCardActions-isHidden-TxYAU9";var pe=Object.defineProperty,me=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ge=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t)=>{for(var r in t||(t={}))he.call(t,r)&&ge(e,r,t[r]);if(me)for(var r of me(t))ye.call(t,r)&&ge(e,r,t[r]);return e};function ve({playCircleClassName:e=ae,metadataItem:t,metadataItemState:r,isHovered:i,actionsMenuButtonID:s,isActionsPending:a,isActionsVisible:o,isActionsMenuOpen:c,isActionsMenuClosing:l,isSelectHidden:d,isSelected:u,isInSelectionRange:p,isSelectionActive:h,isPlayButtonCard:y,isSortable:g,onActionsMenuClose:f,onActionsMenuCloseComplete:v,onActionsMenuItemPress:b,onActionsMenuToggle:S,onSelectPress:I}){const[E,w]=(0,P.c$)(),{items:C}=(0,V.Q)(),O=C.length>0,M=(0,B.w1)(H.c),T=O&&(0,Y.gR)({server:E,provider:w,stableUser:M,metadataItem:t,metadataItemState:r})&&(i||c&&!r.isPending),D=(0,Y.EH)({server:E,provider:w,stableUser:M,metadataItem:t,metadataItemState:r}),k=G._u(w.identifier,G.Im)?{isShuffleVisible:O,isQueueVisible:O,isWatchTogetherVisible:O}:{},x=(0,$.m)({server:E,provider:w,metadataItem:t,metadataItemState:r}),A=(0,ee.c)(t),R=(0,n.useCallback)((()=>{A({action:z.SU}),x((0,q.W_)())}),[x,A]),N=(0,n.useCallback)((e=>{e.preventDefault()}),[]);return n.createElement(n.Fragment,null,n.createElement(K.c,{circleClassName:e,className:W()(y?se:ie,!i&&l&&ue),isVisible:!h&&o&&T,metadataItem:t,tabIndex:-1}),(0,te.c)(w)&&!t.radio&&!d&&(u||p||o)?n.createElement(Z.c,{className:W()(ce,!i&&l&&ue),isInSelectionRange:p,isSelected:u,tabIndex:-1,title:(0,L.c)(t),onPress:I}):null,!h&&o&&g?n.createElement(J.c,{className:W()(de,!i&&l&&ue),tabIndex:-1,title:(0,m.c)("Reorder"),onPress:N},n.createElement(ne.c,null)):null,!h&&o&&!y&&D?n.createElement(J.c,{"aria-label":(0,m.c)("Edit"),className:W()(oe,!i&&l&&ue),tabIndex:-1,onPress:R},n.createElement(re.c,null)):null,h||!o||y?null:n.createElement(X.c,{className:W()(le,!i&&l&&ue),id:s,isPending:a,tabIndex:-1,onPress:S}),n.createElement(Q.c,{actionsOverride:fe({isPlayVisible:!1,isEditVisible:!1},k),isOpen:c,metadataItem:t,target:s,onActionPress:b,onMenuClose:f,onMenuCloseComplete:v}))}const be="MetadataPosterCardProgressBar-progress-GougiZ",Se="MetadataPosterCardProgressBar-track-DUIwTi",Pe="MetadataPosterCardProgressBar-bar-xA7ztj";var Ie=Object.defineProperty,Ee=Object.defineProperties,we=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Te=(e,t,r)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,De=(e,t)=>{for(var r in t||(t={}))Oe.call(t,r)&&Te(e,r,t[r]);if(Ce)for(var r of Ce(t))Me.call(t,r)&&Te(e,r,t[r]);return e};function ke({className:e=be,trackClassName:t=Se,barClassName:r=Pe,style:i,barStyle:s,progress:a}){return n.createElement("div",{className:e,style:i},n.createElement("div",{className:t}),n.createElement("div",{className:r,style:(o=De({},s),c={transform:`translate3d(-${100-a}%, 0, 0)`},Ee(o,we(c)))}));var o,c}var xe=r(65600),Ae=r(76780),Re=r(23748),Ne=r(89960),Le=r(77740),je=r(44916);const Ue={cardCircle:"MetadataPosterCardCircle-cardCircle-gBHNQG"};function Fe({children:e,className:t=Ue.cardCircle}){return n.createElement("div",{className:t},e)}const Ve={statusContainer:"MetadataPosterCardScanStatus-statusContainer-hVFEIF",spinnerContainer:"MetadataPosterCardScanStatus-spinnerContainer-uR562u",spinner:"MetadataPosterCardScanStatus-spinner-Ed9WNT Spinner-spinner-Q4B7Qw spin-spin-H8VRGl",trashCircle:"MetadataPosterCardScanStatus-trashCircle-sAIYem MetadataPosterCardCircle-cardCircle-gBHNQG"};function _e({children:e}){return n.createElement("div",{className:Ve.statusContainer},e)}function We({children:e}){return n.createElement(_e,null,n.createElement("div",{className:Ve.spinnerContainer},n.createElement(Re.c,{className:Ve.spinner})),n.createElement(Fe,null,e))}function Be({metadataItemState:e,metadataTimelineState:t}){return t.metadataState===Ae.A.Matching?n.createElement(We,null,n.createElement(Le.c,{"aria-label":(0,m.c)("Matching")})):t.metadataState===Ae.A.Processing||t.metadataState===Ae.A.Loading?n.createElement(We,null,n.createElement(je.c,{"aria-label":(0,m.c)("Downloading Metadata")})):t.mediaState?n.createElement(We,null,n.createElement(Ne.c,{"aria-label":(0,m.c)("Analyzing")})):e.deletedAt?n.createElement(_e,null,n.createElement(Fe,{className:Ve.trashCircle},n.createElement(xe.default,{accessibilityLabel:(0,m.c)("In Trash")}))):null}const He=(0,a.c)(o.c.slowSpeed),ze=(0,n.memo)((function({className:e,playCircleClassName:t,metadataItem:r,metadataItemState:a,metadataTimelineState:c,width:l,height:d,aspectRatio:u,displayImageType:p,routeKey:m="key",isAd:h,isPlayButtonCard:y,isPlayedStatusHidden:g,isProgressBarHidden:f,isSelectHidden:v,isSelectionActive:b,isSelected:S,isInSelectionRange:I,isSortable:E,onHover:w,onPress:C,onToggleSelect:O}){var M;const[T,D]=(0,P.c$)(),_=(0,A.c)({metadataItem:r,aspectRatio:u,width:l,height:d}),{hoverRef:W,isHovered:B,actionsMenuButtonID:H,isActionsPending:z,isActionsVisible:G,isActionsMenuOpen:q,isActionsMenuClosing:K,onActionsMenuClose:Q,onActionsMenuCloseComplete:$,onActionsMenuToggle:Y}=(0,R.c)({server:T,provider:D,metadataItem:r,metadataItemState:a}),X=(0,N.c)(r,m),J=y||!X&&!r.isLiveTVChannel,Z=null!=(M=a.viewOffset)?M:0,ee=(0,n.useRef)(!1),te=ee.current?o.c.slowSpeed:"0s",re=!v&&b,ne=(0,n.useCallback)((()=>{null==O||O()}),[O]);return(0,n.useEffect)((()=>{null==w||w(B)}),[B,w]),(0,n.useEffect)((()=>{const e=window.setTimeout((()=>{ee.current=!0}),He);return()=>{window.clearTimeout(e)}}),[]),n.createElement(x.c,{ref:W,aspectRatio:u,className:e,displayImageType:p,height:d,metadataItem:r,width:l},r.radio?n.createElement(j.c,{height:_.height,width:_.width},n.createElement(i.default,null)):null,B||q?null:n.createElement(Be,{metadataItemState:a,metadataTimelineState:c}),r.userState&&Z>0&&!f?n.createElement(ke,{barClassName:"MetadataPosterCard-progressBar-JUqKYS MetadataPosterCardProgressBar-bar-xA7ztj",barStyle:{animationDuration:te},className:"MetadataPosterCard-progress-EXxFw9 MetadataPosterCardProgressBar-progress-GougiZ",progress:(0,s.c)(Z,r.duration),style:{opacity:B||q?0:1,animationDuration:te}}):null,re?n.createElement(U.c,{"aria-label":(0,L.c)(r),className:S?"MetadataPosterCard-selectedLink-KExzo5 PosterCardLink-link-LozvMm Link-link-vSsQW1":void 0,hoverClassName:S?"MetadataPosterCard-hoveredSelectedLink-bBEzML PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1":void 0,isHovered:I||B,onPress:ne}):n.createElement(U.c,{"aria-label":(0,L.c)(r),isHovered:B||q,to:X,onPress:C}),B||q?null:n.createElement(F.c,{className:"MetadataPosterCard-bottomRightBadge-Y6Ry2h",isShadowVisible:!0,metadataItem:r}),n.createElement(V.c,{metadataItem:r},n.createElement(ve,{actionsMenuButtonID:H,isActionsMenuClosing:K,isActionsMenuOpen:q,isActionsPending:z,isActionsVisible:G,isHovered:B,isInSelectionRange:I,isPlayButtonCard:J,isSelectHidden:v,isSelected:S,isSelectionActive:re,isSortable:E,metadataItem:r,metadataItemState:a,playCircleClassName:t,onActionsMenuClose:Q,onActionsMenuCloseComplete:$,onActionsMenuItemPress:C,onActionsMenuToggle:Y,onSelectPress:ne})),n.createElement(k,{animationDuration:te,isAd:h,isPlayedStatusHidden:g,metadataItem:r,metadataItemState:a}))}))},69452:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(84184);const s={placeholder:"MetadataPosterCardPlaceholder-placeholder-i9YsQa PosterCard-card-BRB1k_",cardShimmer:"MetadataPosterCardPlaceholder-cardShimmer-XExjTF"};var a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e};function p({className:e=s.placeholder,style:t,index:r}){return n.createElement(i.c,{className:e,style:u({animationDelay:r%12*200+"ms"},t)})}},57244:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(89080),i=r.n(n),s=r(11504);const a={title:"MetadataPosterCardTitle-title-ImAmGu",singleLineTitle:"MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",centeredSingleLineTitle:"MetadataPosterCardTitle-centeredSingleLineTitle-EuZHlc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",doubleLineTitle:"MetadataPosterCardTitle-doubleLineTitle-VC1Wuk MetadataPosterCardTitle-title-ImAmGu"};function o({metadataItem:e,mergedResult:t,component:r,allowLink:n,isDoubleLine:o,onPress:c}){return s.createElement(r,{allowLink:n,className:i()(o?a.doubleLineTitle:a.centeredSingleLineTitle),mergedResult:t,metadataItem:e,tabIndex:-1,onPress:c})}},84144:(e,t,r)=>{"use strict";r.d(t,{c:()=>U});var n=r(11504),i=r(27876),s=r(19264),a=r(67484),o=r(69452),c=r(53812),l=r(17524),d=r(48140),u=r(44688);var p=r(72772),m=r(49124),h=r(93808),y=r(4388),g=r(6400),f=r(14400),v=r(51304),b=r(67532),S=r(37984),P=r(46896),I=r(35768),E=r(57864),w=r(45480);var C=r(63152),O=r(22732),M=r(29956),T=r(25848),D=r(66992),k=r(53753),x=r(11164),A=r(57244);var R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;const j=n.forwardRef(((e,t)=>{var r=e,{item:j,mergedResult:U,routeKey:F,isSortable:V,isFallbackSupported:_,isPlayButtonCard:W,onPress:B}=r,H=((e,t)=>{var r={};for(var n in e)N.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&R)for(var n of R(e))t.indexOf(n)<0&&L.call(e,n)&&(r[n]=e[n]);return r})(r,["item","mergedResult","routeKey","isSortable","isFallbackSupported","isPlayButtonCard","onPress"]);const z=(0,i.w1)(s.c),G=(0,i.w1)(c.I),[q,K]=(0,S.c$)(),{containerKey:Q,containerType:$,containerSubtype:Y,containerMeta:X,listStyle:J}=(0,v.qy)(),Z=(0,i.w1)((Se=Q,(0,E.M3)(w.c,(e=>e.hubs.find((e=>e.key===Se)))))),ee=(0,n.useMemo)((()=>(0,C.c)(Q)),[Q]),te=(0,i.w1)(ee),re=(0,p.c)(null==j?void 0:j.sourceURI),ne=(0,m.c)(null==j?void 0:j.sourceURI),{ref:ie,onPress:se}=function(e){const t=(0,i.OY)(),[r,s]=(0,l.cD)(),{getTracked:a,setTracked:o}=(0,d.CS)(),c=(0,n.useCallback)((()=>{(null==e?void 0:e.clickTrackers)&&t(u.c.actions.adTileTrackerRequests({trackers:e.clickTrackers}))}),[t,null==e?void 0:e.clickTrackers]);return(0,n.useEffect)((()=>{s&&(null==e?void 0:e.impressionTrackers)&&!a(e.impressionTrackers)&&(t(u.c.actions.adTileTrackerRequests({trackers:e.impressionTrackers})),o(e.impressionTrackers))}),[t,a,s,null==e?void 0:e.impressionTrackers,o]),{ref:r,onPress:c}}(j),[ae,oe]=(0,n.useState)(!1),{isSelectionActive:ce,isSelected:le,isInSelectionRange:de,onToggleSelect:ue}=(0,M.c)({isHovered:ae,metadataItem:j,metadataItemState:re}),pe=(0,n.useMemo)((()=>!!(null==Z?void 0:Z.placeholderIndexes)&&Z.placeholderIndexes.includes(H.cellIndex)),[null==Z?void 0:Z.placeholderIndexes,H.cellIndex]),me=(0,n.useMemo)((()=>{if(!j)return!0;const e=(0,T.cp)([{metadataItem:j,metadataItemState:re,server:q,provider:K}],z,G);return(0,O.E)(e)}),[G,j,re,K,q,z]),he=(0,P.c)(H),ye=(0,n.useMemo)((()=>{var e;return null!=(e=null==j?void 0:j.displayImage)?e:(0,k.c)($,Y,null==X?void 0:X.DisplayImage)}),[null==X?void 0:X.DisplayImage,Y,$,null==j?void 0:j.displayImage]),ge=(0,n.useMemo)((()=>(0,y.cp)($,Y,{listStyle:J,displayImageType:ye,isLiveTVChannel:null==j?void 0:j.isLiveTVChannel})),[Y,$,ye,J,null==j?void 0:j.isLiveTVChannel]),fe=(0,n.useMemo)((()=>(0,g.c)({width:H.cellWidth,aspectRatio:ge})),[ge,H.cellWidth]),ve=(0,n.useMemo)((()=>{if(!j)return[];const e=$===b.a.Collection||j.type!==h.WW.Collection&&$!==b.a.Mixed;return(0,f.cp)(e?$:j.type,e?Y:j.subtype,{activeFilterRules:null==te?void 0:te.filterRules,listStyle:J,displayFieldNames:j.displayFields||(0,D.c)(j.type,j.subtype,null==X?void 0:X.DisplayFields),isLiveTVChannel:j.isLiveTVChannel})}),[null==te?void 0:te.filterRules,null==X?void 0:X.DisplayFields,Y,$,J,j]),be=(0,n.useCallback)((()=>{se(),null==B||B()}),[se,B]);var Se;return j?n.createElement(a.c,{metadataItem:j,metadataItemState:re},n.createElement("div",{ref:(0,I.c)(t,he.cellRef,ie),"data-testid":"cellItem",style:he.style},n.createElement(x.c,{aspectRatio:ge,className:"MetadataPosterListItem-card-BfbXw7 PosterCard-card-BRB1k_",displayImageType:ye,height:fe.height,isAd:pe,isFallbackSupported:_,isInSelectionRange:de,isPlayButtonCard:W,isSelectHidden:me,isSelected:le,isSelectionActive:ce,isSortable:V,metadataItem:j,metadataItemState:re,metadataTimelineState:ne,routeKey:F,width:fe.width,onHover:oe,onPress:be,onToggleSelect:ue}),ve.map(((e,t)=>{if(null==e)return null;const r=(0,f.mQ)(e);return n.createElement(A.c,{key:t,allowLink:r.allowLink,component:r.component,isDoubleLine:r.isDoubleLine,mergedResult:U,metadataItem:j,onPress:be})})))):n.createElement("div",{ref:(0,I.c)(t,he.cellRef),style:he.style},n.createElement(o.c,{index:H.cellIndex,style:fe}))}));j.displayName="MetadataPosterListItem";const U=j},74388:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(89080),i=r.n(n),s=r(11504),a=r(3008),o=r(77072),c=r(672),l=r(59396),d=r(70564),u=r(93808),p=r(77404),m=r(51304),h=r(67532),y=r(37984),g=r(64156),f=r(84184),v=r(2024),b=r(49828),S=r(17544);const P=s.forwardRef((({aspectRatio:e,children:t,className:r,displayImageType:n,height:P,metadataItem:I,width:E,isFallbackSupported:w},C)=>{const[O,M]=(0,y.c$)(),{listStyle:T}=(0,m.qy)(),D=(0,d.c)({metadataItem:I,aspectRatio:e,width:E,height:P}),k=(0,s.useMemo)((()=>I.isLiveTVChannel?{width:D.width-2*(0,b.c)("m"),height:D.height-2*(0,b.c)("m")}:{width:D.width,height:D.height}),[D.height,D.width,I.isLiveTVChannel]),x=(0,g.cp)({server:O,provider:M,width:k.width,height:k.height,url:(0,p.c)(I,{aspectRatio:D.aspectRatio,displayImageType:n})});let A=v.A.Cover;I.isLiveTVChannel&&(A=v.A.Contain);const R=I.type===u.WW.Episode&&I.isUnreleased,N=R&&(T===h.y.PrePlayGrid||T===h.y.ShowTracking);return s.createElement(f.c,{ref:C,className:i()(r,R?"MetadataSimplePosterCard-fallbackCard-dIP7aK MetadataSimplePosterCard-card-baQSyw PosterCard-card-BRB1k_":"MetadataSimplePosterCard-card-baQSyw PosterCard-card-BRB1k_"),style:{height:D.height,width:D.width}},N?s.createElement(o.a,{color:"muted",font:"inherit"},I.originallyAvailableAt?(0,l.c)("Releasing on {date}",{date:(0,c.c)(I.originallyAvailableAt)}):(0,l.c)("Unannounced Release Date")):null,x&&!N?s.createElement(v.c,{className:"MetadataSimplePosterCard-image-x27yrl",fit:A,height:k.height,src:x,width:k.width}):null,x||N||!w?null:s.createElement(a.ye,{align:"center",height:"100%",padding:"m",verticalAlign:"center"},s.createElement(o.a,{align:"center",numberOfLines:2},(0,S.c)(I))),t)}))},54744:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(96096),s=r(67520),a=r(5776),o=r(3520),c=r(69820),l=r(65988),d=r(32360),u=r(32096),p=r(92336),m=r(93808);function h({type:e}){switch(e){case m.WW.Movie:return n.createElement(i.default,null);case m.WW.Show:case m.WW.Season:case m.WW.Episode:return n.createElement(s.default,null);case m.WW.Artist:return n.createElement(a.default,null);case m.WW.Album:case m.WW.Track:return n.createElement(o.default,null);case m.WW.Photo:case m.WW.PhotoAlbum:return n.createElement(c.default,null);case m.WW.Clip:return n.createElement(l.default,null);case m.WW.Playlist:return n.createElement(d.default,null);case m.WW.Author:case m.WW.Audiobook:case m.WW.Chapter:return n.createElement(u.default,null);default:return n.createElement(p.default,null)}}},53812:(e,t,r)=>{"use strict";r.d(t,{I:()=>v,c:()=>S});var n=r(11504),i=r(27876),s=r(57864),a=r(92076),o=r(13148),c=r(35860),l=r(42728),d=r(59396),u=r(54872),p=r(36728),m=r(64388),h=r(93268),y=r(93808),g=r(31636),f=r(4668);const v=(0,s.M3)(o.c,a.c,((e,t)=>e.filter((e=>{var t;return e.isFullOwnedServer&&e.isConnected&&!e.isOutOfDate&&(null==(t=e.ownerFeatures)?void 0:t.includes(l.sv))})).reduce(((e,r)=>{var n;const i=r.providers.map((e=>t[e])).find((e=>e.identifier===c.Qh));if(!i)return e;const s=(0,h.c)(i),a=null!=(n=null==s?void 0:s.directories)?n:[],o={machineIdentifier:r.machineIdentifier,providerIdentifier:i.identifier,serverFriendlyName:r.friendlyName,targetLibraries:[]};return a.forEach((e=>{e.type===y.WW.Artist&&o.targetLibraries.push({libraryTitle:e.title,libraryType:e.type,librarySectionID:e.id})}),[]),o.targetLibraries.length&&e.push(o),e}),[])));function b({children:e,targetMachineIdentifier:t,targetProviderIdentifier:r,targetLibrary:s,onAddToLibrary:a}){const o=(0,i.w1)((0,f.c)(t)),c=(0,i.w1)((0,g.c)(t,r)),l=(0,n.useCallback)((()=>{a({targetServer:o,targetProvider:c,targetLibrarySectionID:s.librarySectionID,targetLibraryType:s.libraryType})}),[a,s,c,o]);return n.createElement(p.c,{onPress:l},e)}function S({onAddToLibrary:e}){const t=(0,i.w1)(v);if(!t.length)return null;if(1===t.length&&1===t[0].targetLibraries.length){const r=t[0];return n.createElement(b,{targetLibrary:r.targetLibraries[0],targetMachineIdentifier:r.machineIdentifier,targetProviderIdentifier:r.providerIdentifier,onAddToLibrary:e},(0,d.c)("Add to {serverName}",{serverName:r.serverFriendlyName}))}return n.createElement(m.c,{label:(0,d.c)("Add to Library")},t.map((t=>n.createElement(n.Fragment,{key:`${t.machineIdentifier}:${t.providerIdentifier}`},n.createElement(u.c,null,t.serverFriendlyName),t.targetLibraries.map((r=>n.createElement(b,{key:r.librarySectionID,targetLibrary:r,targetMachineIdentifier:t.machineIdentifier,targetProviderIdentifier:t.providerIdentifier,onAddToLibrary:e},(0,d.c)("Add to {libraryName}",{libraryName:r.libraryTitle}))))))))}},52008:(e,t,r)=>{"use strict";r.d(t,{c:()=>Qt});var n=r(11504),i=r(27876),s=r(9868),a=r(47456),o=r(35688),c=r(19264),l=r(66780),d=r(84508),u=r(56960),p=r(85976),m=r(59396),h=r(1868),y=r(17068),g=r(24752),f=r(36728),v=r(77584),b=r(64388),S=r(55588),P=r(24808),I=r(30388),E=r(53812),w=r(96504),C=r(87440),O=r(37984),M=r(51012);function T({metadataItem:e,downloadIFrameName:t,onMenuClose:r,onDownloadVersionPress:i,onDownloadFilePress:s}){var a;const[o]=(0,O.c$)(),c=(0,C.c)(),l=1===(null==(a=e.Media)?void 0:a.length)?function(e,t){var r;if(!(null==(r=t.Part)?void 0:r.length))return;const n=t.Part[0];return w.c.join([e.uri,n.key],{download:1,"X-Plex-Token":e.accessToken})}(o,e.Media[0]):null,d=(0,n.useCallback)((()=>{l?(null==s||s(),r()):i()}),[l,s,i,r]);return n.createElement(n.Fragment,null,n.createElement(f.c,{target:t||c,to:l,onPress:d},(0,m.c)("Save File")),t?null:n.createElement(M.c,null,n.createElement("iframe",{name:c,style:{display:"none"}})))}var D=r(77460),k=r(33632),x=r(70460),A=r(16712);function R({isOpen:e,mediaItems:t,onSelect:r,onCancel:i}){return n.createElement(x.c,{isOpen:e,metricsPage:u.K6,title:(0,m.c)("Play Version"),onCancel:i,onItemSelect:r},t.map(((e,t)=>{const{title:r,info:i}=(0,k.c)(e),s=!!r,a=!!(null==i?void 0:i.length);return n.createElement(A.c,{key:t,value:t},s?e.title:null,s&&a?n.createElement(y.c,null):null,a?i:null,s||a?null:(0,m.c)("Unknown"))})))}var N=r(37864),L=r(72772),j=r(49124),U=r(87980),F=r(77192),V=r(66136),_=r(15788),W=r(58636),B=r(16332),H=Object.defineProperty,z=Object.defineProperties,G=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&$(e,r,t[r]);if(q)for(var r of q(t))Q.call(t,r)&&$(e,r,t[r]);return e},X=(e,t)=>z(e,G(t)),J=r(17884),Z=r(93808),ee=r(61511),te=r(75188);function re(e){switch(e){case Z.WW.Track:return Z.WW.Artist;case Z.WW.Episode:return Z.WW.Show}}function ne(e){switch(e){case Z.WW.Track:return Z.WW.Album;case Z.WW.Album:return Z.WW.Artist;case Z.WW.Episode:return Z.WW.Season;case Z.WW.Season:return Z.WW.Show}}var ie=r(3188),se=r(26044);const ae=function(e,t,r){var n,i;if(e.type===Z.WW.Channel)return r?(0,m.c)("Remove from favorites"):(0,m.c)("Add to favorites");const s=null!=(i=null==(n=t.title.match(/\(([^)]+)\)/))?void 0:n[1])?i:t.title.split(/\s(.+)/)[1];return r?(0,m.c)("Remove {channelTitle} from favorites",{channelTitle:s}):(0,m.c)("Add {channelTitle} to favorites",{channelTitle:s})};var oe=r(63856),ce=r(92756),le=r(7060),de=r(98348),ue=r(54060),pe=r(67980),me=Object.defineProperty,he=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,be=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Se=function(e){var t;const r=(0,pe.c)();if(!(0,le.c)(e))return;let n=e;(null==(t=null==r?void 0:r.items)?void 0:t.length)&&(n=r.items[0]);const i=(0,de.c)(n.Media);if(!(i&&i.channelIdentifier&&i.channelThumb&&i.channelTitle&&i.channelVcn))return;const s={id:i.channelIdentifier,thumb:i.channelThumb,title:i.channelTitle,vcn:i.channelVcn,isHd:!1};var a,o;return s?(a=((e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&be(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&be(e,r,t[r]);return e})({},s),o={source:n.source,uid:(0,ue.c)(s,n.source)},he(a,ye(o))):void 0};var Pe=r(96048),Ie=r(51304),Ee=r(39604),we=r(81180),Ce=r(29208),Oe=r(8684),Me=r(71604),Te=r(38652),De=r(900),ke=r(71928),xe=r(70736),Ae=r(49140),Re=r(16304),Ne=r(66480),Le=r(11884);function je({metadataItem:e,onMenuClose:t}){const r=(0,n.useCallback)(((e,t,r)=>n.createElement(f.c,{isDisabled:t,onPress:r},e?(0,m.c)("Delete Download"):(0,m.c)("Download"))),[]);return n.createElement(Le.c,{metadataItem:e,render:r,onClose:t})}var Ue=r(42940),Fe=r(81564),Ve=r(57864),_e=r(95788),We=Object.defineProperty,Be=Object.defineProperties,He=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,Ke=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qe=(e,t)=>{for(var r in t||(t={}))Ge.call(t,r)&&Ke(e,r,t[r]);if(ze)for(var r of ze(t))qe.call(t,r)&&Ke(e,r,t[r]);return e};const $e={hub:{promotedToRecommended:!1,promotedToOwnHome:!1,promotedToSharedHome:!1},isPending:!1,isPopulated:!0,isUpdating:!1,error:null},Ye=function(e){return(0,Ve.M3)(_e.c,(t=>{var r;const n=t.publishedItems[e];return i=Qe(Qe({},$e),n),s={hub:null!=(r=null==n?void 0:n.hub)?r:$e.hub},Be(i,He(s));var i,s}))};var Xe=r(33316),Je=Object.defineProperty,Ze=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,rt=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nt=(e,t)=>{for(var r in t||(t={}))et.call(t,r)&&rt(e,r,t[r]);if(Ze)for(var r of Ze(t))tt.call(t,r)&&rt(e,r,t[r]);return e};function it({sourceURI:e,onMenuClose:t}){var r,s,a;const[o,,c]=(0,O.c$)(),l=(0,i.OY)(),d=(0,i.w1)(Ye(e));(0,n.useEffect)((()=>{c&&l(Fe.c.actions.publishedFetchRequested({server:o,sourceURI:e,contentDirectoryID:c.id}))}),[c,l,o,e]);const u=(0,n.useCallback)((r=>{c&&(l(Fe.c.actions.publishedUpdateRequested({server:o,sourceURI:e,contentDirectoryID:c.id,hub:nt(nt({},d.hub),r)})),t())}),[c,l,t,d.hub,o,e]),p=(0,n.useCallback)((()=>{d.hub&&u({promotedToRecommended:!d.hub.promotedToRecommended})}),[d.hub,u]),h=(0,n.useCallback)((()=>{d.hub&&u({promotedToOwnHome:!d.hub.promotedToOwnHome})}),[d.hub,u]),y=(0,n.useCallback)((()=>{d.hub&&u({promotedToSharedHome:!d.hub.promotedToSharedHome})}),[d.hub,u]);return n.createElement(n.Fragment,null,n.createElement(Xe.c,{isDisabled:d.isUpdating,isSelected:null==(r=d.hub)?void 0:r.promotedToRecommended,onPress:p},(0,m.c)("Library")),n.createElement(Xe.c,{isDisabled:d.isUpdating,isSelected:null==(s=d.hub)?void 0:s.promotedToOwnHome,onPress:h},(0,m.c)("Home")),n.createElement(Xe.c,{isDisabled:d.isUpdating,isSelected:null==(a=d.hub)?void 0:a.promotedToSharedHome,onPress:y},(0,m.c)("Friends' Home")))}var st=r(55116),at=r(63136),ot=r(92432),ct=r(91320),lt=r(46572),dt=r(58660),ut=r(59320),pt=r(3008),mt=r(64776),ht=r(77072),yt=r(29164),gt=r(99558),ft=r(23300);const vt={avatar:"ItemSingleRecipientModal-avatar-bXvCz7",checkmark:"ItemSingleRecipientModal-checkmark-DFL08U"},bt=60,St=300;function Pt({type:e,modalState:t,subject:r,isPending:s,title:a,children:o,placeholder:c,isSuccess:d,error:u,send:p,reset:h}){const{addToast:y}=(0,ot.Wo)(),g=(0,Oe.c)(),f=(0,i.w1)(yt.c),[v,b]=(0,n.useState)(""),S=(0,n.useRef)(null);(0,n.useEffect)((()=>{t.isOpen||(h(),b(""))}),[t.isOpen,h]),(0,n.useEffect)((()=>{d&&!u&&t.onClose()}),[u,d,t]),(0,n.useEffect)((()=>{u&&(t.onClose(),y({color:"alert",description:(0,m.c)("An error has occurred, please try again later."),type:"foreground",testID:"error"}))}),[y,u,t]);const P=(0,n.useCallback)((e=>{b(e.target.value)}),[]),I=(0,n.useCallback)((()=>{p(v),g({action:l.G6,type:e,recipients:1,messageAttached:!!v})}),[v,p,g,e]),E=(0,n.useCallback)((()=>{t.onClose(),g({action:l.i0,type:e})}),[t,g,e]);return n.createElement(mt.wJ,{isOpen:t.isOpen,onClose:E},n.createElement(mt.Qn,null,o),n.createElement(mt.EX,{closeButtonAccessibilityLabel:(0,m.c)("Close"),header:a,size:"s",onClose:t.onClose},n.createElement(mt.aU,null,n.createElement(pt.ye,{gap:"s"},n.createElement("div",{className:vt.avatar},n.createElement(ft.c,{server:f,size:bt,url:r.thumb}),n.createElement("div",{className:vt.checkmark},n.createElement(ut.default,null))),n.createElement(ht.a,{color:"inherit",font:"body-3",testID:"messageTo"},(0,m.c)("To: {name}",{name:r.friendlyName||r.username})),n.createElement(gt.c,{ref:S,maxHeight:St,name:"message",placeholder:c,value:v,onChange:P}))),n.createElement(mt._A,null,n.createElement(mt.YB,null,n.createElement(dt.q,{label:(0,m.c)("Cancel"),onPress:E}),n.createElement(dt.q,{color:"accent",label:(0,m.c)("Send"),testID:"sendMessage",waiting:s,onPress:I})))))}var It=r(5808),Et=r(19732);function wt({metadataServer:e,children:t,modalState:r,title:s,sourceURI:a,type:o}){var c;const l=(0,i.w1)((0,It.c)(null!=(c=e.ownerId)?c:-1)),[d,{isLoading:u,isSuccess:p,error:h,reset:y}]=(0,Et.o4)(),{addToast:g}=(0,ot.Wo)(),{details:f}=(0,i.w1)(lt.c),v=e.isShared&&l?{friendlyName:l.user.title,username:l.user.username,thumb:l.user.thumb,uuid:l.user.uuid}:f;(0,ct.c)({type:o},r.isOpen);const b=(0,n.useCallback)((e=>{d({input:{message:e,url:a,recipient:v.uuid}})}),[d,a,v.uuid]),S=(0,n.useMemo)((()=>(0,m.c)("Report Issue with {title}",{title:s})),[s]);return e.isShared&&!l?(g({color:"alert",description:(0,m.c)("Error while fetching user details."),type:"foreground",testID:"error"}),null):n.createElement(Pt,{error:h,isPending:u,isSuccess:p,modalState:r,placeholder:(0,m.c)("Describe the problem"),reset:y,send:b,sourceURI:a,subject:v,title:S,type:o},t)}var Ct=r(112),Ot=r(97884),Mt=r(53036),Tt=r(8674),Dt=r(78112),kt=r(17544),xt=r(51792),At=r(59740),Rt=r(43908),Nt=r(37492),Lt=r(77792);const jt={menuItem:"CopyMetadataKeyFromGuidMenuItem-menuItem-SIhf2A"};function Ut({title:e,type:t,guid:r,onMenuClose:s}){const a=(0,i.OY)(),{copyToClipboard:o,copyState:c}=(0,Lt.c)((0,Nt.c)(r));return(0,n.useEffect)((()=>{c&&(a((0,At._K)(c===Lt.z.Done?{type:Rt.I,message:`Copied the key of the ${t} "${e}" to the clipboard.`}:{type:Rt._,message:`Failed to copy the key of the ${t} "${e}".`})),s())}),[c,a,s,e,t]),r&&t&&e?n.createElement(f.c,{className:jt.menuItem,onPress:o},` Copy ${t} key`):null}var Ft=Object.defineProperty,Vt=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Bt=(e,t,r)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ht=(e,t)=>{for(var r in t||(t={}))_t.call(t,r)&&Bt(e,r,t[r]);if(Vt)for(var r of Vt(t))Wt.call(t,r)&&Bt(e,r,t[r]);return e};const zt=["isPlayVisible","isWatchTogetherVisible","isPlayVersionVisible","isPlayAllVisible","isShuffleVisible","isQueueVisible","isPlayTrailerVisible","isPlayMusicVideoVisible","isAddToPlaylistVisible","isAddToLibraryVisible","isShareVisible"],Gt=["isEditVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSettingsVisible","isRefreshVisible","isAnalyzeVisible","isFixMatchVisible","isMatchVisible","isUnmatchVisible","isSplitApartVisible","isSyncDownloadVisible","isOptimizeVisible","isDownloadFileVisible","isGrantAccessVisible","isDeleteVisible","isDeleteVersionVisible","isViewPlayHistoryVisible","isGetInfoVisible","isReportVisible","isCopyMetadataKeyVisible"];function qt(e){const t=(0,n.useRef)(!1);return e.isOpen&&(t.current=!0),t.current}function Kt({actions:e,server:t,provider:r,stableUser:s,metadataItem:c,metadataItemState:d,channel:u,containerSourceURI:y,containerKey:g,containerType:w,allowRedirectOnDelete:C,playVersionModalState:O,confirmMarkPlayedModalState:M,confirmMarkUnplayedModalState:D,settingsModalState:k,addToCollectionModalState:x,addToPlaylistModalState:A,shareModalState:R,mediaSubscriptionModalState:N,shareItemModalState:U,reportItemModalState:F,watchTogetherMenuItem:V,isFavoriteChannel:W,onActionPress:B,onLegacyAction:H,onLegacyPlay:z,onMenuClose:G,onAddToWatchlistPress:q,onRemoveFromWatchlistPress:K,onAddToFavoriteChannelsPress:Q,onRemoveFromFavoriteChannelsPress:$,onAddToQueuePress:Y,onPlayNextPress:X,onPlayPress:J,onShufflePress:de}){var ue;const pe=(0,i.OY)(),me=(0,Oe.c)(),he=(0,L.c)(null==(ue=c.onDeck)?void 0:ue.sourceURI),ye=(0,j.c)(c.sourceURI),[,ge]=(0,Te.Q5)(),{onRemoveFromContinueWatchingPress:fe}=(0,_.c)(),ve=!!ye.metadataState,be=!!ye.mediaState,Se=zt.some((t=>e[t])),Ie=Gt.some((t=>e[t])),we=Se&&Ie,Ce=(0,Me.c)(c),xe=(0,n.useMemo)((()=>!!g&&/continueWatching/.test(g)),[g]),Re=(0,ke.c)(t,r,c),Le=Re?(0,Ot.c)(...Re):void 0,Ue=(0,n.useCallback)((()=>{J(),G()}),[G,J]),Fe=(0,n.useCallback)((()=>{Ce({action:l.So}),z(o.gD())}),[z,Ce]),Ve=(0,n.useCallback)((()=>{Ce({action:l.Sg}),z(o.M7())}),[z,Ce]),_e=(0,n.useCallback)((()=>{Ce({action:l.IL}),z(o.Gm({playlistType:h.KI}))}),[z,Ce]),We=(0,n.useCallback)((()=>{Ce({action:l.aq}),z(o.Gm({playlistType:h.im}))}),[z,Ce]),Be=(0,n.useCallback)((()=>{H((0,a.Ap)())}),[H]),He=(0,n.useCallback)((({targetServer:e,targetProvider:n,targetLibrarySectionID:i,targetLibraryType:s})=>{Ce({action:l.sv}),pe(Pe.c.actions.addToLibraryRequested({targetServer:e,targetProvider:n,targetLibrarySectionID:i,targetLibraryType:s,server:t,provider:r,metadataItem:c})),null==B||B(),G()}),[pe,c,B,G,r,t,Ce]),ze=(0,n.useCallback)((e=>{Ce({action:e?l.EV:l.Qt});const n=c.key,i=c.ratingKey,a=(0,p.c)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier,key:n});pe(Pe.c.actions.toggleSavedRequested({server:t,provider:r,stableUser:s,sourceURI:a,ratingKey:i,saved:e})),null==B||B(),G()}),[pe,c.key,c.ratingKey,B,G,r,t,s,Ce]),Ge=(0,n.useCallback)((()=>{ze(!0)}),[ze]),qe=(0,n.useCallback)((()=>{ze(!1)}),[ze]),Ke=(0,n.useCallback)((()=>{Ce({action:l.e2}),fe({metadataItem:c,server:t,provider:r}),null==B||B(),G()}),[c,B,G,fe,r,t,Ce]),Qe=(0,n.useCallback)((()=>{q(),null==B||B(),G()}),[B,q,G]),$e=(0,n.useCallback)((()=>{K(),null==B||B(),G()}),[B,G,K]),Ye=(0,n.useCallback)((()=>{Q(),null==B||B(),G()}),[B,Q,G]),Xe=(0,n.useCallback)((()=>{$(),null==B||B(),G()}),[B,G,$]),Je=(0,n.useCallback)((()=>{Ce({action:l.kL}),null==B||B(),x.onOpen()}),[x,B,Ce]),Ze=(0,n.useCallback)((()=>{Ce({action:l.io}),null==B||B(),A.onOpen()}),[A,B,Ce]),et=(0,n.useCallback)((()=>{null==B||B(),Ce({action:l.kL,mode:"shortcut"})}),[B,Ce]),tt=(0,n.useCallback)((()=>{null==B||B(),Ce({action:l.io,mode:"shortcut"})}),[B,Ce]),rt=(0,n.useCallback)((()=>{Ce({action:w===Z.WW.Collection?l.gV:l.cD}),g&&y&&pe(Ne.c.actions.removeItemRequested({server:t,provider:r,containerKey:g,sourceURI:c.sourceURI,ratingKey:c.ratingKey})),null==B||B(),G()}),[g,y,w,pe,c.ratingKey,c.sourceURI,B,G,r,t,Ce]),nt=(0,n.useCallback)((()=>{Ce({action:l.SU}),H(I.W_())}),[H,Ce]),st=(0,n.useCallback)((()=>{Ce({action:l.s5}),Le||pe(De.c.actions.editFiltersRequested({server:t,provider:r,key:c.key})),null==B||B(),G()}),[pe,Le,c.key,B,G,r,t,Ce]),at=(0,n.useCallback)((()=>{k.onOpen(),null==B||B(),G()}),[B,G,k]),ot=(0,n.useCallback)((()=>{Ce({action:l.i8}),pe(Ee.c.actions.metadataRefreshRequested({server:t,provider:r,sourceURI:c.sourceURI})),null==B||B(),G()}),[pe,c.sourceURI,B,G,r,t,Ce]),ct=(0,n.useCallback)((()=>{Ce({action:l.cJ}),pe(Ee.c.actions.mediaAnalysisRequested({server:t,provider:r,sourceURI:c.sourceURI,hasChildren:!!(0,ie.u)(c.type,c.subtype)})),null==B||B(),G()}),[pe,c.sourceURI,c.subtype,c.type,B,G,r,t,Ce]),lt=(0,n.useCallback)((()=>{Ce({action:l.Qh}),H(I.eu())}),[H,Ce]),dt=(0,n.useCallback)((()=>{Ce({action:l.wp}),H(I.MR())}),[H,Ce]),ut=(0,n.useCallback)((()=>{Ce({action:l.Ce}),H(I.Q3())}),[H,Ce]),pt=(0,n.useCallback)((()=>{Ce({action:l.Ge}),H(I.AL())}),[H,Ce]),mt=(0,n.useCallback)((()=>{Ce({action:l.Qv}),null==B||B()}),[B,Ce]),ht=(0,n.useCallback)((()=>{Ce({action:l.Qv}),H(I.m9())}),[H,Ce]),yt=(0,n.useCallback)((()=>{Ce({action:l.gB}),R.onOpen(),null==B||B(),G()}),[B,G,R,Ce]),gt=(0,n.useCallback)((()=>{Ce({action:l.G0}),H(I.SW({options:{skipRedirect:!C}}))}),[C,H,Ce]),ft=(0,n.useCallback)((()=>{Ce({action:l.G0}),H(I.qK())}),[H,Ce]),vt=(0,n.useCallback)((()=>{Ce({action:l.yO}),H(I.GW())}),[H,Ce]),bt=(0,n.useCallback)((()=>{U.onOpen(),null==B||B(),G(),me({contextTuple:void 0,action:l.wx})}),[B,G,U,me]),St=(0,n.useCallback)((()=>{F.onOpen(),null==B||B(),G(),me({action:l.oN})}),[B,G,F,me]);return n.createElement(n.Fragment,null,e.isPlayVisible?n.createElement(f.c,{onPress:(0,le.c)(c)?Ue:J},(0,se.c)(c,d,he)):null,e.isAddToWatchlistVisible?n.createElement(f.c,{onPress:Qe},(0,ce.c)(c.type)):null,e.isRemoveFromWatchlistVisible?n.createElement(f.c,{onPress:$e},(0,ce.c)(c.type,!0)):null,e.isAddToFavoriteChannelsVisible&&u&&!W?n.createElement(f.c,{onPress:Ye},ae(c,u)):null,e.isRemoveFromFavoriteChannelsVisible&&u&&W?n.createElement(f.c,{onPress:Xe},ae(c,u,!0)):null,e.isWatchTogetherVisible?V:null,e.isShareVisible?n.createElement(f.c,{onPress:bt},(0,m.c)("Share...")):null,e.isPlayVersionVisible?n.createElement(f.c,{onPress:(0,S.c)(O.onOpen,G)},(0,m.c)("Play Version...")):null,e.isPlayAllVisible?n.createElement(f.c,{onPress:Fe},(0,m.c)("Play All")):null,e.isShuffleVisible?n.createElement(f.c,{onPress:de},(0,m.c)("Shuffle")):null,e.isPlayRadioVisible?n.createElement(f.c,{onPress:_e},(0,m.c)("Play Radio")):null,e.isPlayArtistTVVisible?n.createElement(f.c,{onPress:We},(0,m.c)("Play Artist TV")):null,e.isQueueVisible?n.createElement(f.c,{onPress:X},(0,m.c)("Play Next")):null,e.isQueueVisible?n.createElement(f.c,{onPress:Y},(0,m.c)("Add to Queue")):null,e.isPlayTrailerVisible?n.createElement(f.c,{onPress:Ve},(0,m.c)("Play Trailer")):null,e.isPlayMusicVideoVisible?n.createElement(f.c,{onPress:Ve},(0,m.c)("Play Music Video")):null,e.isAddToPlaylistVisible||e.isAddToCollectionVisible?n.createElement(b.c,{label:(0,m.c)("Add to"),onMenuClose:G},n.createElement(Ae.c,{contentDirectoryID:c.librarySectionID,mediaType:(0,te.c)(c.type,c.subtype),metadataType:c.type,provider:r,server:t,sourceURI:c.sourceURI,onAddToCollectionPress:e.isAddToCollectionVisible?Je:void 0,onAddToPlaylistPress:e.isAddToPlaylistVisible?Ze:void 0,onMenuClose:G,onSaveCollectionPress:et,onSavePlaylistPress:tt})):null,e.isRemoveFromCuratedListVisible?n.createElement(f.c,{onPress:rt},w===Z.WW.Collection?(0,m.c)("Remove from Collection"):(0,m.c)("Remove from Playlist")):null,e.isAddToSavedVisible?n.createElement(f.c,{onPress:Ge},(0,ee.c)(d.saved)):null,e.isRemoveFromSavedVisible?n.createElement(f.c,{onPress:qe},(0,ee.c)(d.saved)):null,e.isAddToPicksVisible?n.createElement(f.c,{onPress:Be},d.picked?(0,m.c)("Remove from Plex Picks"):(0,m.c)("Add to Plex Picks")):null,e.isAddToLibraryVisible?n.createElement(E.c,{onAddToLibrary:He}):null,e.isPublishVisible?n.createElement(b.c,{label:(0,m.c)("Visible on"),onMenuClose:G},n.createElement(it,{sourceURI:c.sourceURI,onMenuClose:G})):null,we?n.createElement(v.c,null):null,e.isEditVisible?n.createElement(f.c,{onPress:nt},(0,m.c)("Edit")):null,e.isEditFiltersVisible?n.createElement(f.c,{to:Le,onPress:st},(0,m.c)("Edit Filters")):null,e.isSettingsVisible?n.createElement(f.c,{onPress:at},(0,m.c)("Settings")):null,e.isMarkPlayedVisible?n.createElement(f.c,{onPress:M.onOpen},(0,oe.c)(c.type)):null,e.isMarkUnplayedVisible?n.createElement(f.c,{onPress:D.onOpen},(0,oe.c)(c.type,!0)):null,xe&&e.isRemoveFromContinueWatchingVisible?n.createElement(f.c,{onPress:Ke},(0,m.c)("Remove from Continue Watching")):null,e.isRefreshVisible?n.createElement(f.c,{isDisabled:ve,onPress:ot},(0,m.c)("Refresh Metadata")):null,e.isAnalyzeVisible?n.createElement(f.c,{isDisabled:be,onPress:ct},(0,m.c)("Analyze")):null,e.isFixMatchVisible?n.createElement(f.c,{onPress:lt},(0,m.c)("Fix Match...")):null,e.isMatchVisible?n.createElement(f.c,{onPress:lt},(0,m.c)("Match...")):null,e.isUnmatchVisible?n.createElement(f.c,{onPress:dt},(0,m.c)("Unmatch")):null,e.isSplitApartVisible?n.createElement(f.c,{onPress:ut},(0,m.c)("Split Apart")):null,e.isSyncDownloadVisible?n.createElement(je,{metadataItem:c,onMenuClose:G}):null,e.isRecordVisible?n.createElement(f.c,{onPress:N.onOpen},null==d.grandparentSubscriptionID&&null==d.subscriptionID?(0,m.c)("Record"):(0,m.c)("Modify Recording")):null,e.isOptimizeVisible?n.createElement(f.c,{onPress:pt},(0,m.c)("Optimize...")):null,e.isDownloadFileVisible?n.createElement(T,{downloadIFrameName:"downloadFileFrame",metadataItem:c,onDownloadFilePress:mt,onDownloadVersionPress:ht,onMenuClose:G}):null,e.isGrantAccessVisible?n.createElement(f.c,{onPress:yt},(0,m.c)("Grant Access")):null,e.isDeleteVisible?n.createElement(f.c,{kind:c.remoteMedia?void 0:P.od,onPress:gt},c.remoteMedia?(0,m.c)("Remove"):(0,m.c)("Delete")):null,e.isDeleteVersionVisible?n.createElement(f.c,{kind:P.od,onPress:ft},(0,m.c)("Delete Version")):null,e.isViewPlayHistoryVisible?n.createElement(f.c,{to:(0,xt.c)(t.machineIdentifier,c),onPress:(0,S.c)(B,G)},(0,m.c)("View Play History")):null,e.isReportVisible?n.createElement(f.c,{onPress:St},(0,m.c)("Report Issue...")):null,e.isGetInfoVisible?n.createElement(f.c,{onPress:vt},(0,m.c)("Get Info")):null,e.isCopyMetadataKeyVisible?n.createElement(Ut,{guid:c.guid,title:c.title,type:c.type,onMenuClose:(0,S.c)(B,G)}):null,e.isCopyMetadataParentKeyVisible?n.createElement(Ut,{guid:c.parentGuid,title:c.parentTitle,type:ne(c.type),onMenuClose:(0,S.c)(B,G)}):null,e.isCopyMetadataGrandparentKeyVisible?n.createElement(Ut,{guid:c.grandparentGuid,title:c.grandparentTitle,type:re(c.type),onMenuClose:(0,S.c)(B,G)}):null,ge?n.createElement(n.Fragment,null,n.createElement(v.c,null),ge.removeActivity?n.createElement(f.c,{key:"removeFromWatchHistory",onPress:(0,S.c)(B,G,ge.removeActivity.callback)},ge.removeActivity.title):null,ge.editActivity?n.createElement(f.c,{key:"editActivity",onPress:(0,S.c)(B,G,ge.editActivity.callback)},ge.editActivity.title):null):null)}function Qt({className:e,target:t,isOpen:r,actionsOverride:a,metadataItem:p,allowRedirectOnDelete:h,onActionPress:v,onMenuClose:b,onMenuCloseComplete:P}){var I;const E=(0,i.OY)(),[w,C]=(0,O.c$)(),{metricsPage:M,metricsContextTuple:T}=(0,Ce.e0)(),{containerServer:k,containerProvider:x,containerSourceURI:A,containerKey:j,containerType:_}=(0,Ie.qy)(),H=(0,L.c)(p.sourceURI),z=(0,s.y)(),G=qt(z),q=(0,s.y)(),K=qt(q),Q=(0,s.y)(),$=qt(Q),Z=(0,i.w1)(c.c),ee=(0,N.c)(p),re=Ht(Ht({},ee),a),ne=(0,we.c)(),ie=qt(ne),se=(0,we.c)(),ae=qt(se),oe=(0,we.c)(),ce=qt(oe),le=(0,we.c)(),de=qt(le),ue=(0,we.c)(),pe=qt(ue),me=(0,we.c)(),he=qt(me),ye=(0,we.c)(),ge=qt(ye),fe=(0,U.c)(p),{watchTogetherMenuItem:ve,watchTogetherModal:be}=function(e,t,r){const i=(0,s.y)(),[a,o]=(0,n.useState)(),{playModal:c,onSelectItemPress:l}=(0,U.c)(e,o),d=(0,L.c)(null==a?void 0:a.sourceURI),u=(0,n.useMemo)((()=>X(Y({},i),{onClose(){o(void 0),i.onClose()}})),[i]),p=(0,n.useCallback)((()=>{o(void 0),l(),null==r||r(),t()}),[r,t,l]),h=(0,n.useCallback)((()=>{o(void 0),u.onClose()}),[u]);return(0,W.c)(a),(0,n.useEffect)((()=>{a&&(null==d?void 0:d.isPopulated)&&u.onOpen()}),[a,null==d?void 0:d.isPopulated,u]),{watchTogetherMenuItem:n.createElement(f.c,{onPress:p},(0,m.c)("Watch Together...")),watchTogetherModal:n.createElement(n.Fragment,null,c,a&&d?n.createElement(D.c,{metadataItem:a,metadataItemState:d},(({serverEntityID:e,metadataItemEntityID:t})=>n.createElement(B.c,{metadataItemEntityID:t,modalState:u,serverEntityID:e,onInviteCompleted:h}))):null)}}(p,b,v),{onAddToWatchlistPress:Ee,onRemoveFromWatchlistPress:Oe,showTrackingModal:Te}=(0,J.c)(p,d.CONTEXT_MENU),De=Se(p),{onAddToFavoriteChannelsPress:ke,onRemoveFromFavoriteChannelsPress:Ae,isFavorite:Ne}=(0,st.c)({channel:De,onMenuClose:b}),Le=(0,F.m)({server:w,provider:C,metadataItem:p,metadataItemState:H}),je=(0,V.i)({containerServer:k,containerProvider:x,server:w,provider:C,metadataItem:p,metadataItemState:H,metricsPage:M,metricsContextTuple:T}),Fe=(0,Me.c)(p),Ve=(0,n.useMemo)((()=>({page:M,contextTuple:T})),[T,M]),_e=(0,n.useCallback)((e=>{Le(e),null==v||v(),b()}),[v,b,Le]),We=(0,n.useCallback)((e=>{je(e),null==v||v(),b()}),[v,b,je]),Be=(0,n.useCallback)((e=>{var t;Fe({action:l.K6}),We(o.wb({confirmOffset:!0,startOffsetMilliseconds:null!=(t=H.viewOffset)?t:0,startMediaIndex:e,options:{containerKey:j,listType:_}})),ne.onClose()}),[j,_,H.viewOffset,We,ne,Fe]),He=(0,n.useCallback)((e=>{Fe({action:e?l.Mp:l.Yj}),E(Pe.c.actions.playedStatusUpdateRequested({server:w,provider:C,stableUser:Z,sourceURI:p.sourceURI,ratingKey:p.ratingKey,guid:p.guid,played:e})),null==v||v(),b()}),[E,p.guid,p.ratingKey,p.sourceURI,v,b,C,w,Z,Fe]),ze=(0,n.useCallback)((()=>{He(!0),se.onClose()}),[se,He]),Ge=(0,n.useCallback)((()=>{He(!1),oe.onClose()}),[oe,He]),qe=(0,n.useCallback)((()=>{E(Pe.c.actions.repopulateRequested({sourceURI:p.sourceURI})),Fe({action:l.kL,mode:"shortcut"}),null==v||v()}),[E,p.sourceURI,Fe,v]),Ke=(0,n.useCallback)((()=>{fe.onAddToQueuePress(),null==v||v(),b()}),[v,b,fe]),Qe=(0,n.useCallback)((()=>{fe.onPlayNextPress(),null==v||v(),b()}),[v,b,fe]),$e=(0,n.useCallback)((()=>{fe.onPlayPress(),null==v||v(),b()}),[v,b,fe]),Ye=(0,n.useCallback)((()=>{fe.onShufflePress(),null==v||v(),b()}),[v,b,fe]),Xe=(0,n.useCallback)((()=>{null==v||v(),Fe({action:l.io,mode:"shortcut"})}),[v,Fe]);return n.createElement(n.Fragment,null,n.createElement(g.c,{className:e,isOpen:r,target:t,onMenuClose:b,onMenuCloseComplete:P},n.createElement(Kt,{actions:re,addToCollectionModalState:me,addToPlaylistModalState:ue,allowRedirectOnDelete:h,channel:De,confirmMarkPlayedModalState:se,confirmMarkUnplayedModalState:oe,containerKey:j,containerSourceURI:A,containerType:_,isFavoriteChannel:Ne,mediaSubscriptionModalState:ye,metadataItem:p,metadataItemState:H,playVersionModalState:ne,provider:C,reportItemModalState:q,server:w,settingsModalState:le,shareItemModalState:z,shareModalState:Q,stableUser:Z,watchTogetherMenuItem:ve,onActionPress:v,onAddToFavoriteChannelsPress:ke,onAddToQueuePress:Ke,onAddToWatchlistPress:Ee,onLegacyAction:_e,onLegacyPlay:We,onMenuClose:b,onPlayNextPress:Qe,onPlayPress:$e,onRemoveFromFavoriteChannelsPress:Ae,onRemoveFromWatchlistPress:Oe,onShufflePress:Ye})),fe.playModal,be,ie?n.createElement(R,{isOpen:ne.isOpen,mediaItems:null!=(I=p.Media)?I:[],onCancel:ne.onClose,onSelect:Be}):null,ae||ce?n.createElement(Mt.c,{isOpen:se.isOpen||oe.isOpen,leafCount:se.isOpen?H.unviewedLeafCount:H.viewedLeafCount,markUnplayed:oe.isOpen,subtype:p.subtype,title:p.title,type:p.type,onCancel:se.isOpen?se.onClose:oe.onClose,onConfirm:se.isOpen?ze:Ge}):null,he&&p.librarySectionID?n.createElement(xe.c,{contentDirectoryID:p.librarySectionID,defaultTitle:p.title,isOpen:me.isOpen,metadataType:p.type,sourceURI:p.sourceURI,onModalClose:me.onClose,onSaveSuccess:qe}):null,pe?n.createElement(Re.c,{defaultDestinationSource:p.source,defaultTitle:p.title,isOpen:ue.isOpen,mediaType:(0,te.c)(p.type,p.subtype),sourceURI:p.sourceURI,onModalClose:ue.onClose,onSaveSuccess:Xe}):null,$?n.createElement(at.c,{isExternallyTriggered:!0,listType:["PlexAccounts","HomeUsers"],metadataItem:p,modalState:Q,type:"ShareLibrary"}):null,G&&p.guid&&re.isShareVisible?n.createElement(Ct.c,{children:null,item:p,modalState:z}):null,K&&re.isReportVisible?n.createElement(Ce.cp,{metricsContextParam:d.REPORT,metricsPage:u.eI},n.createElement(wt,{children:null,metadataServer:w,modalState:q,sourceURI:p.sourceURI,title:(0,kt.c)(p,y.i),type:p.type})):null,de?n.createElement(D.c,{metadataItem:p,metadataItemState:H},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,onMarkStale:i})=>n.createElement(Tt.c,{isOpen:le.isOpen,metadataItemEntityID:r,metricsProperties:Ve,providerEntityID:t,serverEntityID:e,onModalClose:(0,S.c)(i,le.onClose)}))):null,ge?n.createElement(D.c,{metadataItem:p,metadataItemState:H},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,onMarkStale:i})=>{const s=H.grandparentSubscriptionType||H.subscriptionType||p.type;return n.createElement(Dt.c,{isOpen:ye.isOpen,metadataItemEntityID:r,metricsProperties:Ve,providerEntityID:t,serverEntityID:e,subscriptionType:s,onModalClose:(0,S.c)(i,ye.onClose)})})):null,re.isSyncDownloadVisible?n.createElement(Ue.c,{metadataItem:p}):null,re.isAddToWatchlistVisible||re.isRemoveFromWatchlistVisible?Te:null)}},79296:(e,t,r)=>{"use strict";r.d(t,{C:()=>u,c:()=>p});var n=r(11504),i=r(3008),s=r(77072),a=r(35624),o=r(4388),c=r(6400),l=r(49828);const d=parseInt(a.c.chooseItemModalPosterWidth,10),u=(0,c.c)({width:d,aspectRatio:o.Aj}).height+2*(0,l.c)("s");function p({primaryTitle:e,secondaryTitle:t,tertiaryTitle:r,poster:a,children:o}){return n.createElement(i.ye,{gap:"m",height:u,orientation:"horizontal",verticalAlign:"center",width:"100%"},a,n.createElement(i.ye,{align:"space-between",gap:"xxs",grow:!0,orientation:"horizontal"},n.createElement(i.ye,{gap:"none",grow:!0,verticalAlign:"center"},n.createElement(s.a,{font:"heading-3",numberOfLines:1,shrink:!1},e),t?n.createElement(s.a,{font:"body-2",numberOfLines:1,shrink:!1},t):null,r?n.createElement(s.a,{font:"body-2",numberOfLines:1,shrink:!1},r):null)),o)}},94192:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(69956),s=r(35624),a=r(37984),o=r(63008);const c={container:"ChooseItemModalHeader-container-Z1dRoi"},l=parseInt(s.c.chooseItemModalPosterWidth,10);function d({metadataItem:e}){const t=(0,i.c)(e.source);return n.createElement("div",{className:c.container},n.createElement(a.cp,{machineIdentifier:t.serverIdentifier,providerIdentifier:t.providerIdentifier},n.createElement(o.W,{metadataItem:e,posterWidth:l})))}},24908:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(26848),s=r(3008),a=r(42152),o=r(35860),c=r(69956),l=r(59396),d=r(79296),u=r(62276),p=r(37984),m=r(61252),h=r(36180),y=r(95156);const g=parseInt(y.c.resultSelectIconSize,10);function f({item:e}){var t;const[r,y]=(0,p.c$)(),f=(0,n.useMemo)((()=>r.isCloud?n.createElement(a.mw,{posterStyle:"circle",width:g},n.createElement(s.ye,{align:"center",gap:"s",height:"100%",verticalAlign:"center"},n.createElement(i.default,null))):n.createElement(m.c,{server:r,size:g})),[r]),v=(0,n.useMemo)((()=>{if(!r.isCloud)return(0,h.c)(r);const t=y.identifier||(0,c.c)(e.sourceURI).providerIdentifier;return o._u(t,o.Sg)?e.rentalPrice?(0,l.c)("Available to Rent"):(0,l.c)("Free on Demand"):""}),[e.rentalPrice,e.sourceURI,y.identifier,r]),b=(0,n.useMemo)((()=>{if(!r.isCloud)return e.librarySectionTitle&&e.editionTitle?`${e.librarySectionTitle}  ${e.editionTitle}`:e.librarySectionTitle||e.editionTitle}),[e,r.isCloud]),S=(0,u.c)(r,null==(t=e.Media)?void 0:t[0]);return n.createElement(d.c,{poster:f,primaryTitle:v,secondaryTitle:b,tertiaryTitle:S})}},77460:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(27876),s=r(14224),a=r(99028),o=r(59501),c=r(55340),l=r(69956),d=r(6084),u=r(89448),p=r(77192),m=r(96048);function h({metadataItem:e,metadataItemState:t,children:r}){const h=(0,i.OY)(),y=(0,p.m)({metadataItem:e,metadataItemState:t}),{serverIdentifier:g,providerIdentifier:f}=(0,l.c)(e.sourceURI),v=(0,o.S8)({machineIdentifier:g}),b=(0,a.y)({identifier:f,serverEntityID:v}),S=(0,s.y)({key:e.key,source:e.sourceURI,machineIdentifier:g}),P=(0,i.w1)((e=>e.entities[d.Qv][S])),I=(0,n.useMemo)((()=>(0,c.c)(`${S}_NO_OP`)),[S]),[E,w]=(0,n.useState)(!1),C=(0,n.useCallback)((()=>{h(m.c.actions.repopulateRequested({sourceURI:e.sourceURI}))}),[h,e.sourceURI]);return(0,n.useEffect)((()=>{(0,u.SS)((()=>{y(I())})),w(!0)}),[y,I]),n.createElement(n.Fragment,null,E&&P?r({serverEntityID:v,providerEntityID:b,metadataItemEntityID:S,onMarkStale:C}):null)}},18880:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(59396),s=r(90068),a=r(22916);function o({className:e,tabIndex:t,allowLink:r=!0,metadataItem:o,onPress:c}){const l=(0,s.c)(o,"key");let d=o.title;return o.isUnreleased&&!d&&(d=(0,i.c)("To Be Announced")),d?r&&l?n.createElement(a.c,{className:e,"data-testid":"metadataTitleLink",tabIndex:t,title:d,to:l,onPress:c},d):n.createElement("span",{className:e,title:d},d):null}},74316:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(3592);function s({className:e,metadataItem:t}){const{addedAt:r}=t;return n.createElement(i.c,{className:e,timestamp:r})}},23256:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(27876),s=r(80935),a=r(98348),o=r(32136),c=r(43196);function l({className:e,metadataItem:t}){const r=(0,i.w1)((0,c.c)("timeFormat")),l=(0,o.c)(),d=(0,a.c)(t.Media),{beginsAt:u,endsAt:p}=null!=d?d:{},m=null!=u&&null!=p?(0,s.c)({now:l,beginsAt:u,endsAt:p,timeFormat:r}):null;return m?n.createElement("span",{className:e,title:m},m):null}},7652:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(672);function s({className:e,metadataItem:t}){const{originallyAvailableAt:r}=t;return r?n.createElement("span",{className:e},(0,i.c)(r)):null}},7932:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(63188),s=r(96736),a=r(93808),o=r(75188);function c({className:e,metadataItem:t}){var r;const c=(0,o.c)(t.type,t.subtype),l=null==(r=t.Media)?void 0:r[0];return null==(null==l?void 0:l.bitrate)?null:n.createElement("span",{className:e},c===a.QT.Video?(0,s.c)(l.bitrate):(0,i.c)(l.bitrate))}},8044:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(59396),s=r(93808),a=r(31912);function o({className:e,metadataItem:t}){if(t.skipChildren)return n.createElement(a.c,{className:e,metadataItem:t});const r=t.childCount;if(null==r)return null;switch(t.type){case s.WW.Show:return n.createElement("span",{className:e},1===r?(0,i.c)("{seasonCount} season",{seasonCount:r}):(0,i.c)("{seasonCount} seasons",{seasonCount:r}));case s.WW.Season:return n.createElement("span",{className:e},1===r?(0,i.c)("{episodeCount} episode",{episodeCount:r}):(0,i.c)("{episodeCount} episodes",{episodeCount:r}));case s.WW.Artist:return n.createElement("span",{className:e},1===r?(0,i.c)("{albumCount} album",{albumCount:r}):(0,i.c)("{albumCount} albums",{albumCount:r}));case s.WW.Album:return n.createElement("span",{className:e},1===r?(0,i.c)("{trackCount} track",{trackCount:r}):(0,i.c)("{trackCount} tracks",{trackCount:r}))}return n.createElement("span",{className:e},1===t.childCount?(0,i.c)("{itemCount} item",{itemCount:r}):(0,i.c)("{itemCount} items",{itemCount:r}))}},32140:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(42592);function s({className:e,metadataItem:t}){return null==t.contentRating?null:n.createElement("span",{className:e},(0,i.c)(t.contentRating))}},13100:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(9968);function s({className:e,metadataItem:t,preferRatingType:r}){const{rating:s,ratingImage:a,audienceRating:o,audienceRatingImage:c}=t;return s||o?n.createElement("span",{className:e},n.createElement(i.c,{audienceRating:o,audienceRatingImage:c,preferRTRatingType:r,rating:s,ratingImage:a})):null}},77092:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(69604);function s({className:e,metadataItem:t}){return null==t.duration?null:n.createElement("span",{className:e},(0,i.c)(t.duration))}},89084:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(59396);function s({className:e,metadataItem:t}){return null==t.leafCount?null:n.createElement("span",{className:e},1===t.leafCount?(0,i.c)("{episodeCount} episode",{episodeCount:t.leafCount}):(0,i.c)("{episodeCount} episodes",{episodeCount:t.leafCount}))}},91036:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(90068),s=r(22916);function a({className:e,tabIndex:t,allowLink:r=!0,metadataItem:a}){const o=(0,i.c)(a,"grandparentKey");return a.grandparentTitle?r&&o?n.createElement(s.c,{className:e,tabIndex:t,title:a.grandparentTitle,to:o},a.grandparentTitle):n.createElement("span",{className:e,title:a.grandparentTitle},a.grandparentTitle):null}},98676:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(59396);function s({className:e,metadataItem:t}){return null==t.leafCount?null:n.createElement("span",{className:e},1===t.leafCount?(0,i.c)("{itemCount} item",{itemCount:t.leafCount}):(0,i.c)("{itemCount} items",{itemCount:t.leafCount}))}},13420:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(72772),s=r(3592);function a({className:e,metadataItem:t}){const r=(0,i.c)(t.sourceURI),{lastRatedAt:a}=r;return n.createElement(s.c,{className:e,timestamp:a})}},78192:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(59396),s=r(72772),a=r(3592);function o({className:e,metadataItem:t}){const r=(0,s.c)(t.sourceURI),{lastViewedAt:o}=r;return o?n.createElement(a.c,{className:e,timestamp:o}):n.createElement("span",{className:e},(0,i.c)("Unplayed"))}},31912:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(59396),s=r(93808);function a({className:e,metadataItem:t}){const r=t.leafCount;if(null==r)return null;switch(t.type){case s.WW.Show:return n.createElement("span",{className:e},1===r?(0,i.c)("{episodeCount} episode",{episodeCount:r}):(0,i.c)("{episodeCount} episodes",{episodeCount:r}));case s.WW.Artist:return n.createElement("span",{className:e},1===r?(0,i.c)("{trackCount} track",{trackCount:r}):(0,i.c)("{trackCount} tracks",{trackCount:r}))}return n.createElement("span",{className:e},1===r?(0,i.c)("{itemCount} item",{itemCount:r}):(0,i.c)("{itemCount} items",{itemCount:r}))}},21372:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(46308),s=r(72772);function a({className:e,metadataItem:t}){const r=(0,s.c)(t.sourceURI);if(null==t.duration||null==r.viewOffset)return null;const a=(t.duration-r.viewOffset)/1e3;return n.createElement("span",{className:e},(0,i.c)(a))}},61676:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(90068),s=r(22916);function a({className:e,tabIndex:t,allowLink:r=!0,metadataItem:a}){const o=(0,i.c)(a,"parentKey");return a.parentTitle?r&&o?n.createElement(s.c,{className:e,tabIndex:t,title:a.parentTitle,to:o},a.parentTitle):n.createElement("span",{className:e,title:a.parentTitle},a.parentTitle):null}},20792:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(59396),s=r(72772);function a({className:e,metadataItem:t}){var r;const a=null!=(r=(0,s.c)(t.sourceURI).viewCount)?r:0;return n.createElement("span",{className:e},1===a?(0,i.c)("{playCount} play",{playCount:a}):(0,i.c)("{playCount} plays",{playCount:a}))}},44604:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(59396),s=r(89084);function a({className:e,metadataItem:t}){return t.skipChildren?n.createElement(s.c,{className:e,metadataItem:t}):null==t.childCount?null:n.createElement("span",{className:e},1===t.childCount?(0,i.c)("{seasonCount} season",{seasonCount:t.childCount}):(0,i.c)("{seasonCount} seasons",{seasonCount:t.childCount}))}},86068:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(87416),s=r(37156),a=r(17068),o=r(90068),c=r(22916);function l({className:e,tabIndex:t,allowLink:r=!0,metadataItem:l}){const d=(0,o.c)(l,"key"),u=(0,o.c)(l,"parentKey"),p=(0,s.c)({seasonIndex:l.parentIndex,noLeadingZero:!0}),m=(0,i.c)({episodeIndex:l.index,date:l.originallyAvailableAt,noLeadingZero:!0});return r&&d&&u?n.createElement("span",{className:e},l.index&&p?n.createElement(c.c,{tabIndex:t,title:l.parentTitle,to:u},p):null,l.index&&p?n.createElement(a.c,{separator:""}):null,n.createElement(c.c,{tabIndex:t,title:l.title,to:d},m)):n.createElement("span",{className:e},l.index&&p?n.createElement("span",{title:l.parentTitle},p):null,l.index&&p?n.createElement(a.c,{separator:""}):null,n.createElement("span",{title:l.title},m))}},20900:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(87416);function s({className:e,metadataItem:t}){const r=(0,i.c)({useLongName:!1,episodeIndex:t.index,date:t.originallyAvailableAt,noLeadingZero:!0});return n.createElement("span",{className:e},n.createElement("span",{title:t.title},r))}},38320:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(27876),s=r(76032),a=r(19264),o=r(66780),c=r(84508),l=r(59396),d=r(72772),u=r(96048),p=r(37984),m=r(29208),h=r(71604);function y({className:e,metadataItem:t,disabled:r}){const y=(0,i.OY)(),[g,f]=(0,p.c$)(),[v,b]=(0,n.useState)(-1),S=(0,d.c)(t.sourceURI),P=(0,h.c)(t),I=(0,i.w1)(a.c);(0,n.useEffect)((()=>{var e;S.isPending||b(null!=(e=S.userRating)?e:0)}),[S.isPending,S.userRating]);const E=(0,n.useCallback)((e=>{const r=0===e||e===v?-1:e;P(r<1?{action:o.qc,guid:t.guid}:{action:o.c7,rating:r,guid:t.guid,contextTuple:(0,m.Ej)(0===v?c.INITIAL:c.UPDATE)}),b(r),y(u.c.actions.rateRequested({server:g,provider:f,stableUser:I,sourceURI:t.sourceURI,ratingKey:t.ratingKey,rating:r,type:t.type}))}),[y,t.guid,t.ratingKey,t.sourceURI,t.type,f,g,I,P,v]);return n.createElement("div",{className:e},n.createElement(s.Q,{accessibilityLabel:(0,l.c)("Rate"),disabled:r||!S.isPopulated,value:v,onChange:E}))}},3416:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(71264);function s({className:e,metadataItem:t}){var r;const s=null==(r=t.Media)?void 0:r[0];return null==(null==s?void 0:s.videoResolution)?null:n.createElement("span",{className:e},(0,i.c)(s.videoResolution))}},25564:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i({className:e,metadataItem:t}){return t.year?n.createElement("span",{className:e},t.year):null}},63700:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(27876),i=r(19264),s=r(72772),a=r(87096),o=r(37984);function c(e){const[t,r]=(0,o.c$)(),c=(0,n.w1)(i.c),l=(0,s.c)(null==e?void 0:e.sourceURI);return(0,a.yS)({server:t,provider:r,stableUser:c,metadataItem:e,metadataItemState:l})}},53588:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(72772),s=r(82296);function a(e){const t=(0,n.useMemo)((()=>(0,s.c)(e)),[e]);return{discoverProviderSourceURI:t,discoverProviderItemState:(0,i.c)(t)}}},58636:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(27876),s=r(69956),a=r(72772),o=r(96048),c=r(74364),l=r(31636),d=r(4668);function u(e){const t=(0,i.OY)(),r=(null==e?void 0:e.sourceURI)?(0,s.c)(e.sourceURI):{serverIdentifier:"",providerIdentifier:""},u=(0,i.w1)((0,d.c)(r.serverIdentifier)),p=(0,i.w1)((0,l.c)(r.serverIdentifier,r.providerIdentifier)),m=(0,a.c)(null==e?void 0:e.sourceURI),h=(0,c.c)({type:null==e?void 0:e.type,sourceURI:null==e?void 0:e.sourceURI,primaryGuid:null==e?void 0:e.primaryGuid,metadataItemState:m});(0,n.useEffect)((()=>{(null==e?void 0:e.key)&&h&&p.isPopulated&&t(o.c.actions.fetchRequested({server:u,provider:p,metadataItem:e}))}),[t,e,p,u,h])}},37864:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(27876),i=r(13671),s=r(19264),a=r(35860),o=r(53812),c=r(53588),l=r(72772),d=r(87096),u=r(51304),p=r(17464),m=r(37984);function h(e){const[t,r]=(0,m.c$)(),h=(0,n.w1)(s.c),y=(0,l.c)(e.sourceURI),g=a.SI(r.identifier),f=(0,n.w1)((0,p.c)(a.Im,g)),v=(0,n.w1)(i.c),b=(0,n.w1)(o.I),{containerType:S,containerSubtype:P}=(0,u.qy)(),{discoverProviderItemState:I}=(0,c.c)(e);return(0,d.cp)({server:t,provider:r,discoverProvider:(null==f?void 0:f.isPopulated)?f:void 0,discoverProviderItemState:I.isPopulated?I:void 0,stableUser:h,containerType:S,containerSubtype:P,metadataItem:e,metadataItemState:y,deviceSettings:v,addToLibraryTargets:b})}},70564:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(79268),s=r(4388),a=r(6400);const o=function({metadataItem:e,aspectRatio:t,height:r,width:o}){const c=(0,n.useMemo)((()=>t||(0,s.cp)(e.type,e.subtype)),[t,e.subtype,e.type]);(0,i.c)("number"==typeof o||"number"==typeof r,"`MetadataPosterCard` requires either a `width` or `height, or both");const l=(0,n.useMemo)((()=>null!=o&&null!=r?{width:o,height:r}:o?(0,a.c)({width:o,aspectRatio:c}):r?(0,a.c)({height:r,aspectRatio:c}):{width:0,height:0}),[c,r,o]);return{aspectRatio:c,height:l.height,width:l.width}}},72772:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(27876),s=r(22140);function a(e){const t=(0,n.useMemo)((()=>(0,s.c)(e)),[e]);return(0,i.w1)(t)}},24992:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(27876),s=r(14252),a=r(35860),o=r(87440),c=r(53588),l=r(37864),d=r(44688),u=r(7060),p=r(96048),m=r(70944),h=r(74364),y=r(17464),g=r(10376),f=r(22436),v=r(90296),b=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},M=(e,t)=>S(e,P(t));function T({server:e,provider:t,metadataItem:r,metadataItemState:b}){const S=(0,i.OY)(),[P,I]=(0,g.c)(),[E,w]=(0,n.useState)(!1),[C,T]=(0,n.useState)(!1),D=(0,i.w1)(s.c),k=a.SI(t.identifier),x=(0,i.w1)((0,y.c)(a.Im,k)),{favoriteChannels:A}=(0,i.w1)(v.c),{discoverProviderSourceURI:R,discoverProviderItemState:N}=(0,c.c)(r),L=(0,l.c)(r),j=Object.values(L).includes(!0),U=(0,n.useMemo)((()=>(0,h.c)({type:r.type,sourceURI:r.sourceURI,primaryGuid:r.primaryGuid,metadataItemState:b})),[r,b]),F=(0,n.useMemo)((()=>(0,m.c)({server:e,type:r.type,sourceURI:R,primaryGuid:r.primaryGuid,metadataItemState:N})),[N,R,r.primaryGuid,r.type,e]),V=(0,n.useMemo)((()=>(0,u.c)(r)&&!A.isPending&&!A.isPopulated&&!A.error),[A.error,A.isPending,A.isPopulated,r]),_=(0,n.useCallback)((()=>{T(!1),w(!0),U&&S(p.c.actions.fetchRequested({server:e,provider:t,metadataItem:r})),x&&R&&F&&S(p.c.actions.fetchRequested({server:D,provider:x,metadataItem:M(O({},r),{sourceURI:R})})),V&&S(f.cp.actions.favoriteChannelsFetchRequested({cloudServer:D}))}),[D,x,R,S,r,t,e,F,V,U]),W=(0,n.useCallback)((()=>{T(!0),w(!1),b.isPending&&!b.isStale&&S(p.c.actions.fetchCancelled({sourceURI:r.sourceURI})),!e.isCloud&&x&&R&&(null==N?void 0:N.isPending)&&!(null==N?void 0:N.isStale)&&S(p.c.actions.fetchCancelled({sourceURI:R}))}),[x,null==N?void 0:N.isPending,null==N?void 0:N.isStale,R,S,r.sourceURI,b.isPending,b.isStale,e.isCloud]),B=(0,n.useCallback)((()=>{T(!1)}),[]),H=(0,n.useCallback)((()=>{E?W():_()}),[E,W,_]);(0,n.useEffect)((()=>{b.isStale&&(e.isCloud?S(p.c.actions.fetchRequested({server:e,provider:t,metadataItem:r})):S(d.c.actions.fetchMetadataItem({server:e,provider:t,key:r.key})))}),[S,r,b.isStale,t,e]),(0,n.useEffect)((()=>{!e.isCloud&&x&&R&&(null==N?void 0:N.isStale)&&S(p.c.actions.fetchRequested({server:D,provider:x,metadataItem:M(O({},r),{sourceURI:R})}))}),[D,x,null==N?void 0:N.isStale,R,S,r,e.isCloud]);const z=b.isPending||b.isStale||(null==N?void 0:N.isStale)||(null==N?void 0:N.isPending)||V&&A.isPending,G=E&&!z&&!U&&!F&&!V;return{hoverRef:I,isHovered:P,isActionsPending:z,isActionsVisible:(j||z)&&(P||E||C),actionsMenuButtonID:(0,o.c)(),isActionsMenuOpen:G,isActionsMenuClosing:C,onActionsMenuOpen:_,onActionsMenuClose:W,onActionsMenuCloseComplete:B,onActionsMenuToggle:H}}},49124:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(27876),s=r(57864),a=r(42452);const o=function(e){return(0,s.M3)(a.c,(t=>e&&t.metadataTimelineState[e]||{}))};function c(e){const t=(0,n.useMemo)((()=>o(e)),[e]);return(0,i.w1)(t)}},87980:(e,t,r)=>{"use strict";r.d(t,{c:()=>W});var n=r(11504),i=r(27876),s=r(9868),a=r(52180),o=r(84360),c=r(35688),l=r(66780),d=r(40832),u=r(83052),p=r(69956),m=r(59396),h=r(40604),y=r(30388),g=r(3008),f=r(64776),v=r(7988),b=r(94192),S=r(24908),P=r(37984),I=r(36820);function E({metadataItem:e,onChooseItem:t}){return n.createElement(f.G4,{key:e.sourceURI,item:e,onChooseItem:t},n.createElement(S.c,{item:e}))}function w({metadataItem:e,modalState:t,onChooseItem:r}){const{items:i}=(0,I.Q)();return n.createElement(f.wJ,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(f.EX,{closeButtonAccessibilityLabel:(0,m.c)("Close Choose Source Modal"),header:(0,m.c)("Choose Source"),size:"s"},n.createElement(f.oh,null,n.createElement(b.c,{metadataItem:e}),n.createElement(v.aS,null,n.createElement(g.ye,{paddingBottom:"l",paddingX:"l"},i.map((e=>{const{serverIdentifier:t,providerIdentifier:i}=(0,p.c)(e.sourceURI);return n.createElement(P.cp,{key:e.sourceURI,machineIdentifier:t,providerIdentifier:i},n.createElement(E,{metadataItem:e,onChooseItem:r}))})))))))}var C=r(58636),O=r(72772),M=r(93808),T=r(98348),D=r(16816),k=r(7060),x=r(51304),A=r(31636),R=r(4668),N=r(29208),L=r(83056),j=r(46212),U=r(67388);function F(e){switch(e.type){case M.WW.Season:return`${e.parentTitle} - ${e.title}`;case M.WW.Episode:return`${e.grandparentTitle} - ${(0,u.c)({date:e.originallyAvailableAt,episodeIndex:e.index,seasonIndex:e.parentIndex,noLeadingZero:!0,separator:"  ",includeSpecials:!0})}`;default:return e.title}}function V(e){switch(e){case"addToQueue":return{action:l.ER};case"autoPlay":return{action:l.OI,setting:d.K};case"play":return{action:l.OI};case"playNext":return{action:l.GE};case"shuffle":return{action:l.mg}}}function _(e,t){return(0,D.c)(e,t)&&!t.redeemedAt}function W(e,t){var r;const l=(0,i.OY)(),{containerServer:d,containerProvider:u,containerKey:g,containerType:f}=(0,x.qy)(),{metricsPage:v,metricsContextTuple:b}=(0,N.e0)(),[S,P]=(0,n.useState)(),[E,D]=(0,n.useState)(),[W,B]=(0,n.useState)(!1),{items:H}=(0,I.Q)(),z=(null==S?void 0:S.sourceURI)?(0,p.c)(S.sourceURI):{serverIdentifier:"",providerIdentifier:""},G=(0,i.w1)((0,R.c)(z.serverIdentifier)),q=(0,i.w1)((0,A.c)(z.serverIdentifier,z.providerIdentifier)),K=!(null==q?void 0:q.entityID)||!(null==q?void 0:q.isPopulated),Q=(0,O.c)(null==S?void 0:S.sourceURI),$=(0,s.y)(),Y=(0,s.y)(),X=(0,s.y)(),J=function(e){const{metricsPage:t,metricsContextTuple:r}=(0,N.e0)();return(0,n.useCallback)((({action:n,setting:i})=>{if(!e)return;const{providerIdentifier:s}=(0,p.c)(e.sourceURI),o={action:n,setting:i,page:t,contextTuple:r,identifier:s,type:e.type,metadataItem:(0,L.c)(e)};(0,a.WI)("metrics").trackClick(o)}),[e,r,t])}(S),Z=(0,n.useCallback)((()=>{P(void 0),D(void 0),$.onClose(),Y.onClose()}),[Y,$]),ee=(0,n.useCallback)((e=>{l((0,y.wZ)({server:d,provider:u,itemServer:G,itemProvider:q,metadataItem:S,metadataItemState:Q,metricsPage:v,metricsProperties:{contextTuple:b},legacyAction:e})),Z()}),[u,d,l,Q,b,v,S,q,Z,G]),te=(0,n.useCallback)((()=>{E&&"select"!==E&&(J(V(E)),ee(c.wb({options:{containerKey:g,listType:f}})))}),[g,f,E,ee,J]),re=(0,n.useCallback)((()=>{if(!S||!E||"select"===E)return;const e=(0,T.c)(S.Media);e&&(J(V(E)),ee(o.Ky({options:{containerKey:g,containerType:f,type:h.im,identifier:e.channelIdentifier}})))}),[g,f,S,E,ee,J]),ne=(0,n.useCallback)((()=>{J(V("shuffle")),ee(c.WI())}),[ee,J]),ie=(0,n.useCallback)((()=>{J(V("addToQueue")),ee(c.gV({options:{playAll:!0,next:!1}}))}),[ee,J]),se=(0,n.useCallback)((()=>{J(V("playNext")),ee(c.gV({options:{playAll:!0,next:!0}}))}),[ee,J]),ae=(0,n.useCallback)((()=>{S&&(null==t||t(S),Z())}),[t,S,Z]),oe=(0,n.useMemo)((()=>S&&"select"!==E?(0,k.c)(S)?re:S.type===M.WW.Artist?ne:te:void 0),[S,E,re,ne,te]),ce=(0,n.useMemo)((()=>({addToQueue:ie,autoPlay:oe,play:oe,playNext:se,select:ae,shuffle:ne})),[ie,oe,se,ae,ne]),le=(0,n.useCallback)((e=>{1===H.length?P(H[0]):(P(void 0),Y.onOpen()),D(e)}),[Y,H]),de=(0,n.useCallback)((()=>{te()}),[te]),ue=(0,n.useCallback)((()=>{le("play")}),[le]),pe=(0,n.useCallback)((()=>{P(H[0]),D("autoPlay")}),[H]),me=(0,n.useCallback)((()=>{le("shuffle")}),[le]),he=(0,n.useCallback)((()=>{le("addToQueue")}),[le]),ye=(0,n.useCallback)((()=>{le("playNext")}),[le]),ge=(0,n.useCallback)((()=>{le("select")}),[le]),fe=(0,n.useCallback)((()=>{var e;(null==(e=null==S?void 0:S.Media)?void 0:e.length)||B(!0)}),[null==(r=null==S?void 0:S.Media)?void 0:r.length]),ve=(0,n.useMemo)((()=>S?K?n.createElement(U.c,{modalState:X,providerIdentifier:z.providerIdentifier,title:(0,m.c)("Watch {title}",{title:F(S)}),onOptInStarted:fe}):_(S,Q)?n.createElement(j.c,{confirmLabel:(0,m.c)("Watch Now"),declineLabel:(0,m.c)("Later"),description:(0,m.c)('Do you want to start watching "{title}" now? You will have {viewableDuration} hours to finish watching the rental.',{title:S.title,viewableDuration:S.viewableDuration||48}),isWaiting:!1,modalState:$,title:(0,m.c)("Play Rental"),onSuccess:de}):void 0:n.createElement(w,{metadataItem:e,modalState:Y,onChooseItem:P})),[Y,$,z.providerIdentifier,K,Q,de,fe,S,X,e]);return(0,C.c)(S),(0,n.useEffect)((()=>{if(K)return;const e=H.find((e=>e.key&&(0,p.c)(e.sourceURI).providerIdentifier===z.providerIdentifier));e&&(P(e),B(!1))}),[z.providerIdentifier,K,H,S]),(0,n.useEffect)((()=>{X.isOpen||P(void 0)}),[X.isOpen]),(0,n.useEffect)((()=>{$.isOpen||(P(void 0),D(void 0))}),[$.isOpen]),(0,n.useEffect)((()=>{var e;S&&!Q.isPending&&E&&(K?X.onOpen():_(S,Q)?$.onOpen():W||null==(e=ce[E])||e.call(ce))}),[ce,$,K,W,Q,E,S,X]),{playModal:ve,onAddToQueuePress:he,onAutoPlay:pe,onPlayNextPress:ye,onPlayPress:ue,onSelectItemPress:ge,onShufflePress:me}}},90068:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(27876),i=r(35860),s=r(42728),a=r(37492),o=r(93808),c=r(50696),l=r(15468),d=r(53800),u=r(17464),p=r(48800),m=r(37984),h=r(63756),y=r(29208),g=r(684),f=r(99372),v=r(39172);const b=function(e,t){const[r,b]=(0,m.c$)(),{metricsContextTuple:S}=(0,y.e0)(),P=(0,n.w1)((0,u.c)(i.Im,i.SI(b.identifier))),I=(0,f.i)(s.Go)&&(0,d.c)(e,b),E=I?P:b;if(!e||!E)return;const w=(0,l.c)(null==e?void 0:e.primaryGuid);if(e.isExtra&&w)return(0,g.c)(r.machineIdentifier,E.identifier,{key:`/library/metadata/${w}`});const C=I?`/library/metadata/${(0,a.c)(e.guid)}`:(0,c.c)(e,t);return r!==h.c&&E!==p.c&&C?(0,v.c)(r,E,C,{context:(0,y.QN)(S),legacy:e.type===o.WW.PhotoAlbum?1:void 0},e.playlistType):void 0}},77192:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var n=r(11504),i=r(27876),s=r(30388);function a({server:e,provider:t,metadataItem:r,metadataItemState:a}){const o=(0,i.OY)();return(0,n.useCallback)((n=>{o((0,s.wZ)({server:e,provider:t,metadataItem:r,metadataItemState:a,legacyAction:n}))}),[o,r,a,t,e])}},66136:(e,t,r)=>{"use strict";r.d(t,{i:()=>a});var n=r(11504),i=r(27876),s=r(30388);function a({containerServer:e,containerProvider:t,server:r,provider:a,metadataItem:o,metadataItemState:c,metricsPage:l,metricsContextTuple:d}){const u=(0,i.OY)();return(0,n.useCallback)((n=>{u((0,s.wZ)({server:e,provider:t,itemServer:r,itemProvider:a,metadataItem:o,metadataItemState:c,metricsPage:l,metricsProperties:{contextTuple:d},legacyAction:n}))}),[t,e,u,o,c,d,l,a,r])}},15788:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(27876),s=r(14252),a=r(19264),o=r(35860),c=r(89448),l=r(24660),d=r(96048),u=r(51304),p=r(87616),m=r(57864),h=r(41260),y=r(3088),g=r(84796),f=r(42768);const v=(0,m.M3)(g.c,f.c,y.c,((e,t,r)=>{const n=e.find((({source:e})=>e.includes(o.Im)));if(!n)return[];const i=t[n.key];if(!(null==i?void 0:i.isPopulated))return[];const s=i.hubs.find((({hubIdentifier:e})=>e===h.G.WatchlistContinueWatching));return s?r[s.sourceURI].items:[]})),b=function(){const e=(0,i.OY)(),{containerKey:t}=(0,u.qy)(),r=(0,i.w1)(a.c),m=(0,i.w1)(s.c),h=(0,i.w1)(p.c),y=(0,i.w1)(v);return{onRemoveFromContinueWatchingPress:(0,n.useCallback)((({metadataItem:n,server:i,provider:s})=>{(0,c.SS)((()=>{if(e(d.c.actions.removeFromContinueWatchingRequested({server:i,provider:s,stableUser:r,sourceURI:n.sourceURI,ratingKey:n.ratingKey})),h&&!o._u(s.identifier,o.Im)&&t===l.G){const t=y.find((({grandparentGuid:e})=>e===n.grandparentGuid));t&&e(d.c.actions.removeFromContinueWatchingRequested({server:m,provider:h,stableUser:r,sourceURI:t.sourceURI,ratingKey:t.ratingKey}))}}))}),[m,t,h,e,r,y])}}},17884:(e,t,r)=>{"use strict";r.d(t,{c:()=>We});var n=r(11504),i=r(27876),s=r(9868),a=r(14252),o=r(19264),c=r(35860),l=r(42728),d=r(85976),u=r(69956),p=r(53588),m=r(72772),h=r(93808),y=r(47140),g=r(69592),f=r(96048),v=r(17464),b=r(37984),S=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&O(e,r,t[r]);return e},T=(e,t)=>P(e,I(t)),D=r(6304),k=r(3008),x=r(64776),A=r(34632),R=r(77072),N=r(92432),L=r(59396),j=r(49792),U=Object.defineProperty,F=Object.defineProperties,V=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&H(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&H(e,r,t[r]);return e},G=(e,t)=>F(e,V(t));const q=(0,n.createContext)(void 0);function K(){const e=(0,n.useContext)(q);if(!e)throw new Error("useShowTrackingModalContext must be used within a ShowTrackingModalContextProvider");return e}function Q({children:e,seasons:t}){const[r,i]=(0,n.useState)(t.reduce(((e,t)=>(e[t.index]={episodes:{}},e)),{})),s=(0,n.useCallback)((e=>r[e.index]),[r]),a=(0,n.useCallback)((e=>{var t;return null==(t=r[e.parentIndex])?void 0:t.episodes[e.index]}),[r]),o=(0,n.useCallback)(((e,t)=>{i((r=>G(z({},r),{[e.index]:G(z({},r[e.index]),{watched:t,episodes:Object.keys(r[e.index].episodes).reduce(((e,r)=>(e[r]={watched:t},e)),{})})})))}),[]),c=(0,n.useCallback)(((e,t)=>{i((r=>{const n=G(z({},r[e.parentIndex].episodes),{[e.index]:G(z({},r[e.parentIndex].episodes[e.index]),{watched:t})}),i=Object.values(n).every((e=>e.watched));return G(z({},r),{[e.parentIndex]:G(z({},r[e.index]),{watched:i,episodes:n})})}))}),[]);return n.createElement(q.Provider,{value:{getSeason:s,getEpisode:a,toggleSeason:o,toggleEpisode:c}},e)}var $=r(89080),Y=r.n($),X=r(58660),J=r(12624),Z=r(87416),ee=r(35624),te=r(74388),re=r(4388),ne=r(6400);const ie=function({children:e}){return n.createElement("div",{className:"ShowTrackingModalSeasonEpisodeContainer-container-GSJaTu"},e)};var se=r(87396),ae=r(60952),oe=r(1480),ce=r(96856),le=r(63856),de=r(49828);const ue=function({metadataItem:e,onToggle:t}){const{getSeason:r,getEpisode:i}=K(),s=(0,m.c)(e.sourceURI),a=(0,n.useMemo)((()=>{if(s.isPending||s.error)return!1;if(e.type===h.WW.Episode){const t=i(e);return null==t?void 0:t.watched}const t=r(e);return null==t?void 0:t.watched}),[s.isPending,s.error,e,r,i]),o=(0,n.useMemo)((()=>{if(s.isPending)return n.createElement(A.c,{size:"s"});if(s.error){const t=e.type===h.WW.Season?(0,L.c)("There was an error loading the played state for this season."):(0,L.c)("There was an error loading the played state for this episode.");return n.createElement(ce.o,{tooltip:t},n.createElement(X.wP,{accessibilityLabel:t,icon:se.default,iconSize:"xl",insetFocus:!0,transparent:!0}))}return n.createElement(X.wP,{accessibilityLabel:(0,le.c)(e.type,a),icon:a?ae.y:oe.default,iconSize:"xl",insetFocus:!0,transparent:!0,onPress:t})}),[e.type,s.error,s.isPending,t,a]);return n.createElement(k.ye,{align:"center",width:(0,de.c)("xl")},o)};var pe=r(28220);var me=Object.defineProperty,he=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,be=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Se=parseInt(ee.c.showTrackingPosterHeight,10),Pe=function({episode:e,season:t}){const{getSeason:r,getEpisode:i,toggleEpisode:s}=K(),a=(0,m.c)(e.sourceURI),o=(0,ne.c)({height:Se,aspectRatio:re.cr}),c=(0,n.useCallback)((()=>{const t=i(e);t&&s(e,!t.watched)}),[e,i,s]);return(0,n.useEffect)((()=>{const n=r(t),o=i(e);if(!a.isPending&&!a.error&&!o){const t=(0,J.c)(e,a),r=null==n?void 0:n.watched;s(e,null!=r?r:t)}}),[e,i,r,a,t,s]),n.createElement(ie,null,n.createElement(k.ye,{align:"space-between",gap:"m",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(k.ye,{gap:"m",grow:!0,orientation:"horizontal",verticalAlign:"center"},n.createElement(te.c,(l=((e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&be(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&be(e,r,t[r]);return e})({},o),d={aspectRatio:re.cr,metadataItem:e},he(l,ye(d))),n.createElement("div",{className:"ShowTrackingModalSeasonEpisode-badge-ALenTB"},n.createElement(R.a,{color:"muted",font:"body-3"},(0,Z.c)({episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0})))),n.createElement(k.ye,{gap:"none",verticalAlign:"center"},n.createElement(R.a,{font:"heading-3"},e.title),n.createElement(R.a,{color:"muted",font:"body-3"},n.createElement(pe.c,{originallyAvailableAt:e.originallyAvailableAt})))),n.createElement(k.ye,{paddingRight:"m"},n.createElement(ue,{metadataItem:e,onToggle:c}))));var l,d};var Ie=r(69452),Ee=Object.defineProperty,we=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&Me(e,r,t[r]);if(we)for(var r of we(t))Oe.call(t,r)&&Me(e,r,t[r]);return e};const De=parseInt(ee.c.showTrackingPosterHeight,10),ke=function({index:e}){const t=(0,ne.c)({height:De,aspectRatio:re.cr});return n.createElement(ie,null,n.createElement(Ie.c,{index:e,style:Te({},t)}))};var xe=r(57864),Ae=r(2100);const Re=(0,xe.M3)(Ae.c,(e=>e.showTracking)),Ne=Re;var Le=r(77560);const je=function({season:e}){var t;const[r,s]=(0,b.c$)(),{getSeason:a,toggleSeason:o}=K(),c=(0,i.OY)(),[l,d]=(0,n.useState)(!1),u=(0,n.useRef)(null),p=(0,n.useRef)(null),h=(0,n.useRef)(null),[y,g]=(0,n.useState)(),{isPending:f,isPopulated:v,error:S,episodes:P}=(0,i.w1)((O=e.index,(0,xe.M3)(Ne,(({isPopulated:e,seasons:t})=>{if(!e)return Le.E;const r=t[O];return r?r.seasonEpisodes:Le.E})))),I=(0,m.c)(e.sourceURI),E=(0,n.useMemo)((()=>{const t=a(e),r=Object.values((null==t?void 0:t.episodes)||{});return(null==t?void 0:t.watched)?e.leafCount:r.length?r.filter((e=>e.watched)).length:I.viewedLeafCount}),[a,I.viewedLeafCount,e]),w=(0,n.useCallback)((()=>{const t=a(e);t&&o(e,!t.watched)}),[a,e,o]),C=(0,n.useCallback)((()=>{var e;d(!l),g(l||null==(e=h.current)?void 0:e.offsetHeight)}),[l]);var O;return(0,n.useEffect)((()=>{if(!l)return;const e=window.requestAnimationFrame((()=>{const e=p.current,t=u.current;e&&t&&g(t.offsetHeight+e.offsetHeight)}));return()=>{window.cancelAnimationFrame(e)}}),[S,l,v]),(0,n.useEffect)((()=>{!l||v||f||S||c(Le.c.actions.seasonEpisodesFetchRequested({server:r,provider:s,seasonIndex:e.index,metadataKey:e.key}))}),[c,S,f,v,l,r,s,e.index,e.key]),(0,n.useEffect)((()=>{if(I.isPending||I.error)return;const t=(0,J.c)(e,I),r=a(e);t&&void 0===(null==r?void 0:r.watched)&&o(e,t)}),[a,I,e,o]),n.createElement("div",{ref:h,className:"ShowTrackingModalSeason-container-FRWV9t",style:{maxHeight:l?y:null==(t=p.current)?void 0:t.offsetHeight}},n.createElement("div",{ref:p,className:Y()("ShowTrackingModalSeason-heading-woa7ze",l&&"ShowTrackingModalSeason-expanded-mal4UY")},n.createElement(X._M,{font:"button-1",isOpen:l,onPress:C},e.title),n.createElement(k.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},I.isPopulated?n.createElement(R.a,{font:"body-3"},E,"/",e.leafCount):null,n.createElement(ue,{metadataItem:e,onToggle:w}))),l?n.createElement(k.ye,{ref:u,gap:"none"},v?P.map((t=>n.createElement(Pe,{key:t.key,episode:t,season:e}))):Array.from({length:e.leafCount}).map(((e,t)=>n.createElement(ke,{key:t,index:t})))):null)},Ue=(0,xe.M3)(Ne,(({isPopulated:e,seasons:t})=>e?Object.values(t).map((({season:e})=>e)):[]));var Fe=r(21040);const Ve=function({metadataItem:e,modalState:t}){const[,r]=(0,b.c$)(),s=(0,i.OY)(),{addToast:o}=(0,N.Wo)(),l=(0,Fe.c)(t.isOpen),d=(0,i.w1)(a.c),u=(0,i.w1)((0,v.c)(c.Im,c.SI(r.identifier))),{isPending:p,isPopulated:m,error:h}=(0,i.w1)(Ne),y=(0,i.w1)(Ue);return(0,n.useEffect)((()=>{!u||!t.isOpen||m||p||h||s(Le.c.actions.seasonsFetchRequested({server:d,provider:u,metadataKey:`/library/metadata/${(0,j.c)(e)}`}))}),[d,u,s,h,p,m,e,t.isOpen]),(0,n.useEffect)((()=>{!t.isOpen&&l&&s(Le.c.actions.reset())}),[s,t.isOpen,l]),(0,n.useEffect)((()=>{t.isOpen&&h&&(t.onClose(),o({color:"alert",description:(0,L.c)("Unable to start show tracking flow."),type:"foreground"}))}),[o,h,t]),u?n.createElement(x.wJ,{isDismissible:!0,isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(x.EX,{closeButtonAccessibilityLabel:(0,L.c)("Close Modal"),header:e.title},n.createElement(x.kP,null,n.createElement(R.a,{color:"muted"},(0,L.c)("Select the last episode you've watched to track your progress. You can find your next unwatched episode in Continue Watching."))),n.createElement(x.aU,null,p?n.createElement(k.ye,{align:"center",height:"100%",verticalAlign:"center",width:"100%"},p?n.createElement(A.c,null):null):null,m&&(null==y?void 0:y.length)?n.createElement(Q,{seasons:y},n.createElement(k.ye,{gap:"none"},y.map((e=>n.createElement(b.cp,{key:e.index,machineIdentifier:d.machineIdentifier,providerIdentifier:u.identifier},n.createElement(je,{key:e.index,season:e})))))):null))):null};var _e=r(99372);function We(e,t){const[r,S]=(0,b.c$)(),P=(0,i.OY)(),I=(0,_e.i)(l.Af),E=c.SI(S.identifier),w=(0,i.w1)(o.c),C=(0,i.w1)(a.c),O=(0,i.w1)((0,v.c)(c.Im,E)),k=(0,s.y)(),x=(0,D.c)(e,t),A=(0,y._)(e),R=(0,g.c)(e),N=(0,n.useMemo)((()=>{if(!R)return;const{serverIdentifier:t,providerIdentifier:r}=(0,u.c)(R);return(0,d.c)({serverIdentifier:t,providerIdentifier:r,key:e.key})}),[e.key,R]),L=e.type===h.WW.Season?N:void 0,j=e.type===h.WW.Episode?N:void 0,U=(0,n.useCallback)((({added:t,showToastOnAdded:n=!1})=>{O&&R&&A&&(x(t),t&&I&&e.type===h.WW.Show&&k.onOpen(),P(f.c.actions.toggleWatchlistRequested({server:r.isCloud?r:C,provider:r.isCloud?S:O,stableUser:w,sourceURI:R,childSourceURI:L,grandchildSourceURI:j,ratingKey:A,added:t,showToastOnAdded:n})))}),[L,C,O,P,j,I,e.type,S,A,r,k,R,w,x]),F=(0,n.useMemo)((()=>I?n.createElement(Ve,{metadataItem:e,modalState:k}):null),[I,e,k]),V=(0,n.useCallback)((()=>{U({added:!0})}),[U]),_=(0,n.useCallback)((()=>{U({added:!1})}),[U]);return function(e){const[t,r]=(0,b.c$)(),s=(0,i.OY)(),o=(0,i.w1)(a.c),l=c.SI(r.identifier),d=(0,i.w1)((0,v.c)(c.Im,l)),{discoverProviderSourceURI:u,discoverProviderItemState:S}=(0,p.c)(e),P=e.type===h.WW.Season||e.type===h.WW.Episode,I=(0,y._)(e),E=(0,g.c)(e),w=(0,m.c)(e.sourceURI),C=(0,m.c)(E),O=S||w,D=(0,n.useMemo)((()=>{const t=e.type===h.WW.Episode?O.grandparentWatchlistedAt:O.parentWatchlistedAt;return P&&(null==O?void 0:O.isPopulated)&&(null==C?void 0:C.isPopulated)&&0===Object.keys(C.tempState).length&&t!==C.watchlistedAt}),[O,P,e.type,C]),k=(0,n.useMemo)((()=>P&&(null==O?void 0:O.isPopulated)&&C.isStale),[null==O?void 0:O.isPopulated,P,C.isStale]);(0,n.useEffect)((()=>{k&&d&&I&&E&&s(f.c.actions.fetchRequested({server:t.isCloud?t:o,provider:t.isCloud?r:d,metadataItem:T(M({},e),{guid:e.type===h.WW.Season?e.parentGuid:e.grandparentGuid,sourceURI:E})}))}),[o,d,s,e,r,t,k,I,E]),(0,n.useEffect)((()=>{D&&d&&u&&s(f.c.actions.fetchRequested({server:t.isCloud?t:o,provider:t.isCloud?r:d,metadataItem:T(M({},e),{sourceURI:u})}))}),[o,d,s,u,e,r,t,D])}(e),{onToggleWatchlist:U,onAddToWatchlistPress:V,onRemoveFromWatchlistPress:_,showTrackingModal:F}}},44688:(e,t,r)=>{"use strict";r.d(t,{C:()=>h,c:()=>y});var n=r(44212),i=r(68536),s=r(45372),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e};const h={item:m({},i.c),error:null,isPending:!1,isPopulated:!1},y=(0,n.is)({name:"metadataItemSlice",initialState:{},reducers:{fetchMetadataItem(e,{payload:t}){var r,n;e[t.key]||(e[t.key]=(r=m({},h),n={item:m({},i.c)},o(r,c(n)))),(0,s.G8)(e[t.key])},fetchMetadataItemSucceeded(e,{payload:t}){(0,s.mM)(e[t.key]),e[t.key].item=t.metadataItem},fetchMetadataItemFailed(e,{payload:{error:t,key:r}}){(0,s.C)(e[r],t)},adTileTrackerRequests(e,t){}}})},36364:(e,t,r)=>{"use strict";function n(e){return"tags"in e&&void 0!==e.tags}function i(e){return"item"in e&&void 0!==e.item}function s(e){return"Metadata"in e[0]&&void 0!==e[0].Metadata}r.d(t,{SE:()=>n,U1:()=>s,c$:()=>i})},93808:(e,t,r)=>{"use strict";r.d(t,{Cu:()=>h,GO:()=>s,I1:()=>d,QT:()=>o,SY:()=>c,WW:()=>n,Yr:()=>a,eO:()=>u,i_:()=>m,k3:()=>i,k5:()=>l,ys:()=>p});var n=(e=>(e.Movie="movie",e.Show="show",e.Season="season",e.Episode="episode",e.Person="person",e.Artist="artist",e.Album="album",e.Track="track",e.Clip="clip",e.Photo="photo",e.PhotoAlbum="photoalbum",e.Placeholder="placeholder",e.UnresolvedAd="unresolvedAd",e.Playlist="playlist",e.Collection="collection",e.Directory="directory",e.Channel="channel",e.Hub="hub",e.Setting="setting",e.List="list",e.Author="author",e.Audiobook="audiobook",e.Chapter="chapter",e))(n||{}),i=(e=>(e[e.Movie=1]="Movie",e[e.Show=2]="Show",e[e.Season=3]="Season",e[e.Episode=4]="Episode",e[e.Person=7]="Person",e[e.Artist=8]="Artist",e[e.Album=9]="Album",e[e.Track=10]="Track",e[e.Clip=12]="Clip",e[e.Photo=13]="Photo",e[e.PhotoAlbum=14]="PhotoAlbum",e[e.Playlist=15]="Playlist",e[e.Collection=18]="Collection",e[e.Author=20]="Author",e[e.Audiobook=21]="Audiobook",e[e.Chapter=22]="Chapter",e))(i||{}),s=(e=>(e.Movie="movie",e.Show="show",e.Season="season",e.Episode="episode",e.Artist="artist",e.Album="album",e.Track="track",e.Trailer="trailer",e.DeletedScene="deletedScene",e.Interview="interview",e.MusicVideo="musicVideo",e.BehindTheScenes="behindTheScenes",e.SceneOrSample="sceneOrSample",e.LiveMusicVideo="liveMusicVideo",e.LyricMusicVideo="lyricMusicVideo",e.Concert="concert",e.Featurette="featurette",e.Short="short",e.Other="other",e.Photo="photo",e.Clip="clip",e.Author="author",e.Audiobook="audiobook",e.Chapter="chapter",e))(s||{}),a=(e=>(e[e.Trailer=1]="Trailer",e[e.DeletedScene=2]="DeletedScene",e[e.Interview=3]="Interview",e[e.MusicVideo=4]="MusicVideo",e[e.BehindTheScenes=5]="BehindTheScenes",e[e.SceneOrSample=6]="SceneOrSample",e[e.LiveMusicVideo=7]="LiveMusicVideo",e[e.LyricMusicVideo=8]="LyricMusicVideo",e[e.Concert=9]="Concert",e[e.Featurette=10]="Featurette",e[e.Short=11]="Short",e[e.Other=12]="Other",e))(a||{}),o=(e=>(e.Video="video",e.Audio="audio",e.Photo="photo",e))(o||{}),c=(e=>(e.Gracenote="gracenote:/",e.Imdb="imdb:/",e.Iva="iva:/",e.Plex="plex:/",e.Tmdb="tmdb:/",e.Tvdb="tvdb:/",e.RottenTomatoes="rottentomatoes:/",e.Unknown="",e))(c||{}),l=(e=>(e.Facebook="facebook",e.Instagram="instagram",e.Twitter="twitter",e))(l||{}),d=(e=>(e[e.Video=1]="Video",e[e.Audio=2]="Audio",e[e.Subtitles=3]="Subtitles",e[e.Lyrics=4]="Lyrics",e))(d||{}),u=(e=>(e.Video="videoStreamID",e.Audio="audioStreamID",e.Subtitles="subtitleStreamID",e.Lyrics="lyricStreamID",e))(u||{}),p=(e=>(e[e.Generic=0]="Generic",e[e.Genre=1]="Genre",e[e.Collection=2]="Collection",e[e.Director=4]="Director",e[e.Writer=5]="Writer",e[e.Actor=6]="Actor",e[e.Producer=7]="Producer",e[e.Marker=12]="Marker",e[e.PhotoAutotag=207]="PhotoAutotag",e[e.Channel=310]="Channel",e[e.AvailabilityPlatform=321]="AvailabilityPlatform",e[e.Place=400]="Place",e))(p||{}),m=(e=>(e.Generic="generic",e.Genre="genre",e.Collection="collection",e.Director="director",e.Writer="writer",e.Actor="actor",e.Marker="marker",e.PhotoAutotag="photoAutotag",e.Channel="channel",e.AvailabilityPlatform="availabilityPlatform",e.Place="place",e))(m||{}),h=(e=>(e.Actor="actor",e.Appeared="appeared",e.Director="director",e.Editor="editor",e.Music="music",e.Other="other",e.Producer="producer",e.Writer="writer",e))(h||{})},3544:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(44688),s=r(42452);const a=function(e){return(0,n.M3)(s.c,(t=>{var r;return null!=(r=t.metadataItem[e])?r:i.C}))}},61511:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(59396);function i(e){return e?(0,n.c)("Remove from My TIDAL"):(0,n.c)("Add to My TIDAL")}},80935:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(34516),i=r(72052),s=r(69604),a=r(46308),o=r(6396),c=r(70184),l=r(82220),d=r(59396);const u=6e4;function p({now:e=Date.now(),beginsAt:t,endsAt:r,channel:p,showFullTime:m,timeFormat:h}){if(!t)return(0,d.c)("No upcoming airings");if((0,l.c)(t,r)){const t=r-e/1e3;return t<=60?(0,d.c)("About to end"):(0,a.c)(t)}if((0,o.c)(t)&&(0,c.c)(t,{minutes:60})){const r=1e3*t-e;if(r<=u)return p?(0,d.c)("Starting now on {channel}",{channel:p}):(0,d.c)("Starting now");const n=(0,s.c)(r);return p?(0,d.c)("Starting in {duration} on {channel}",{duration:n,channel:p}):(0,d.c)("Starting in {duration}",{duration:n})}return(m?n.c:i.c)(t,p,{timeFormat:h})}},82296:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(89064),s=r(85976),a=r(69956),o=r(49792);function c(e){if(!e)return;const t=(0,o.c)(e);if(!t)return;const{providerIdentifier:r}=(0,a.c)(e.sourceURI),c=n.SI(r);let l=n.Im;return n.QJ(c)||(l+=`-${c}`),(0,s.c)({serverIdentifier:i.A,providerIdentifier:l,key:`/library/metadata/${t}`})}},47604:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e){return e&&Object.values(n.SY).find((t=>e.startsWith(t)))||n.SY.Unknown}},38192:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(93808);function s(e,t){return(Array.isArray(e)?e:[e]).every((e=>e===i.WW.Track))?1===t?(0,n.c)("Are you sure you want to mark this item as unplayed?"):(0,n.c)("Are you sure you want to mark these {selectedItemsCount} items as unplayed?",{selectedItemsCount:t}):1===t?(0,n.c)("Are you sure you want to mark this item as unwatched?"):(0,n.c)("Are you sure you want to mark these {selectedItemsCount} items as unwatched?",{selectedItemsCount:t})}},85476:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(93808);function s(e,t){return(Array.isArray(e)?e:[e]).every((e=>e===i.WW.Track))?1===t?(0,n.c)("Are you sure you want to mark this item as played?"):(0,n.c)("Are you sure you want to mark these {selectedItemsCount} items as played?",{selectedItemsCount:t}):1===t?(0,n.c)("Are you sure you want to mark this item as watched?"):(0,n.c)("Are you sure you want to mark these {selectedItemsCount} items as watched?",{selectedItemsCount:t})}},62276:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(93808),i=r(79456);function s(e,t){var r,s,a;if(!t)return"";const o=null==(r=t.Part)?void 0:r[0],c=o?(0,i.c)([],o,n.I1.Video):void 0;if(e.isCloud)return(null==c?void 0:c.displayTitle)||"";const l=null!=(a=null==(s=null==c?void 0:c.scanType)?void 0:s[0])?a:"p";if(t.videoResolution){const e=/^[0-9]+$/.test(t.videoResolution),r=parseInt(t.videoResolution,10);return e?4===r||8===r?`${r}K`:`${r}${l}`:t.videoResolution.toLocaleUpperCase()}return c&&c.height&&c.width?c.height>2e3||c.width>3700?"4K":c.height>900||c.width>1800?"1080"+l:c.height>600||c.width>1100?"720"+l:"":""}},79288:(e,t,r)=>{"use strict";function n(e,t){const r=e.Stream;return r?r.filter((e=>e.streamType===t)):[]}r.d(t,{c:()=>n})},75188:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e,t){switch(e){case n.WW.Movie:case n.WW.Show:case n.WW.Season:case n.WW.Episode:case n.WW.Clip:return n.QT.Video;case n.WW.Artist:case n.WW.Album:case n.WW.Author:case n.WW.Audiobook:case n.WW.Chapter:case n.WW.Track:return n.QT.Audio;case n.WW.PhotoAlbum:case n.WW.Photo:return n.QT.Photo;case n.WW.Collection:switch(t){case n.GO.Movie:case n.GO.Show:case n.GO.Season:case n.GO.Episode:return n.QT.Video;case n.GO.Artist:case n.GO.Album:case n.GO.Track:return n.QT.Audio}}!function(e){throw new Error(`"${e}" is not mapped to a media type`)}(e)}},33632:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(86264),i=r(71264),s=r(96736);const a=function(e){const t=[];if(e.bitrate&&t.push((0,s.c)(e.bitrate)),e.videoResolution){const r=(0,n.c)(e),s=r?r.scanType:null;t.push((0,i.c)(e.videoResolution,s))}return{title:e.title,info:t.join(", ")}}},9088:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(83052),i=r(93808),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e},m=(e,t)=>a(e,o(t));function h(e){return function(e){const{type:t,title:r,parentTitle:s,grandparentTitle:a}=e;let o;switch(t){case i.WW.Movie:return[r,e.year];case i.WW.Season:return[s,r];case i.WW.Episode:return o={episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0,useLongName:!0},[a,(0,n.c)(m(p({},o),{seasonIndex:e.parentIndex})),r];case i.WW.Album:return[s,r];case i.WW.Track:return[a,r];default:return[r]}}(e).filter((e=>0===e||e)).join(", ")}},87096:(e,t,r)=>{"use strict";r.d(t,{ec:()=>H,GS:()=>Y,QP:()=>B,O:()=>q,Ar:()=>oe,EX:()=>de,EH:()=>se,S_:()=>re,AP:()=>ne,qC:()=>le,gR:()=>_,yS:()=>Z,uU:()=>J,Qb:()=>ae,Ah:()=>Q,_0:()=>K,c$:()=>ee,y0:()=>G,cp:()=>pe});var n=r(84392),i=r(99112),s=r(74964),a=r(35860),o=r(42728),c=r(64620),l=r(37492),d=r(79084),u=r(12612),p=r(27816),m=r(93808),h=r(47604);function y(e,t){switch(e.type){case m.WW.Episode:return t.grandparentWatchlistedAt;case m.WW.Season:return t.parentWatchlistedAt;default:return t.watchlistedAt}}var g=r(16816),f=r(7060),v=r(85712),b=r(33204),S=r(4644),P=r(78168),I=r(50032),E=r(63160),w=r(69956);const C=["movie","show","season","episode"];var O=Object.defineProperty,M=Object.defineProperties,T=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e},N=(e,t)=>M(e,T(t));const L={[m.WW.Movie]:["isAddToCollectionVisible","isAddToFavoriteChannelsVisible","isAddToPlaylistVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVersionVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isFixMatchVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isMatchVisible","isOptimizeVisible","isPlayTrailerVisible","isPlayVersionVisible","isPlayVisible","isQueueVisible","isRateVisible","isRecordVisible","isRefreshVisible","isRemoveFromContinueWatchingVisible","isRemoveFromCuratedListVisible","isRemoveFromFavoriteChannelsVisible","isRemoveFromWatchlistVisible","isRentVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isWatchTogetherVisible","isShareVisible","isReportVisible","isCopyMetadataKeyVisible"],[m.WW.Show]:["isAddToCollectionVisible","isAddToFavoriteChannelsVisible","isAddToPicksVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isMatchVisible","isOptimizeVisible","isPlayAllVisible","isPlayTrailerVisible","isPlayVisible","isQueueVisible","isRateVisible","isRecordVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromFavoriteChannelsVisible","isRemoveFromSavedVisible","isRemoveFromWatchlistVisible","isSettingsVisible","isGrantAccessVisible","isShuffleVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isShareVisible","isReportVisible","isCopyMetadataKeyVisible"],[m.WW.Season]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isOptimizeVisible","isPlayAllVisible","isPlayVisible","isQueueVisible","isRateVisible","isRemoveFromCuratedListVisible","isRemoveFromWatchlistVisible","isGrantAccessVisible","isShuffleVisible","isSyncDownloadVisible","isViewPlayHistoryVisible","isShareVisible","isReportVisible","isCopyMetadataKeyVisible","isCopyMetadataParentKeyVisible"],[m.WW.Episode]:["isAddToCollectionVisible","isAddToFavoriteChannelsVisible","isAddToPlaylistVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVersionVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isOptimizeVisible","isPlayVersionVisible","isPlayVisible","isQueueVisible","isRateVisible","isRecordVisible","isRefreshVisible","isRemoveFromContinueWatchingVisible","isRemoveFromCuratedListVisible","isRemoveFromFavoriteChannelsVisible","isRemoveFromWatchlistVisible","isGrantAccessVisible","isSyncDownloadVisible","isViewPlayHistoryVisible","isWatchTogetherVisible","isShareVisible","isReportVisible","isCopyMetadataKeyVisible","isCopyMetadataParentKeyVisible","isCopyMetadataGrandparentKeyVisible"],[m.WW.Artist]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayAllVisible","isPlayArtistTVVisible","isPlayRadioVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isCopyMetadataKeyVisible"],[m.WW.Album]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPicksVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isShuffleVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isCopyMetadataKeyVisible","isCopyMetadataParentKeyVisible"],[m.WW.Track]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isPlayMusicVideoVisible","isPlayVisible","isQueueVisible","isRateVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSyncDownloadVisible","isViewPlayHistoryVisible","isCopyMetadataKeyVisible","isCopyMetadataParentKeyVisible","isCopyMetadataGrandparentKeyVisible"],[m.WW.Author]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayAllVisible","isPlayArtistTVVisible","isPlayRadioVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible"],[m.WW.Audiobook]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPicksVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isShuffleVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible"],[m.WW.Chapter]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isPlayMusicVideoVisible","isPlayVisible","isQueueVisible","isRateVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSyncDownloadVisible","isViewPlayHistoryVisible"],[m.WW.PhotoAlbum]:["isAddToPlaylistVisible","isAnalyzeVisible","isEditVisible","isPlayVisible","isGrantAccessVisible","isShuffleVisible"],[m.WW.Photo]:["isAddToPlaylistVisible","isAnalyzeVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isFavoriteVisible","isGetInfoVisible","isPlayVisible","isGrantAccessVisible","isUnfavoriteVisible"],[m.WW.Clip]:["isAddToPlaylistVisible","isAddToSavedVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVersionVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isFixMatchVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isMatchVisible","isOptimizeVisible","isPlayTrailerVisible","isPlayVersionVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromSavedVisible","isRemoveFromWatchlistVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isWatchTogetherVisible"],[m.WW.Playlist]:["isAddToSavedVisible","isDeleteVisible","isEditFiltersVisible","isEditVisible","isPlayVisible","isQueueVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isShuffleVisible","isSyncDownloadVisible"],[m.WW.Collection]:["isAddToPlaylistVisible","isDeleteVisible","isEditFiltersVisible","isEditVisible","isPlayVisible","isPublishVisible","isQueueVisible","isRateVisible","isShuffleVisible"]};function j(e,t){return!!(0,S.c)(e,t)}function U(e,t,r){const n=(0,b.c)(e,t,r);return!(!n||!(0,p._)(r,n))}function F(e){var t;return null!=(t=null==e?void 0:e.isExtra)&&t&&function(e){const t=e.Media;return!!(null==t?void 0:t.some((e=>e.premium)))}(e)}function V(e,t){return!F(e)&&!t.isEmbedded}const _=({server:e,provider:t,stableUser:r,metadataItem:i,metadataItemState:s})=>function(e,t,r,i,s){const{isFolder:c,Media:l}=i;if(e.isCloud&&i.isAdult)return!1;if(a._u(t.identifier,a.Im)&&!(null==l?void 0:l.length))return!(!i.playableKey||!n.Statsig.checkGate(E.iQ.DiscoverVODUnification));if(i.rentalPrice)return!!r.features[o.NI]&&(0,g.c)(i,s);if((0,S.c)(t,v.Aj.PlayQueue))return!c;const d=!!r.features[o.WC];return!(!t.protocols.includes(v.QJ.LiveTV)||!(e.livetv&&4===e.livetv||d)||!(null==l?void 0:l.length))}(e,t,r,i,s),W=({metadataItem:e})=>!!e.primaryExtraKey,B=({server:e,provider:t,stableUser:r,metadataItem:n})=>{if(!t)return!1;const i=(0,S.c)(t,v.Aj.Playlist);return!(!i||!(0,p._)(r,i))&&V(n,e)},H=({server:e,provider:t,metadataItem:r})=>!(!j(t,v.Aj.Collection)||!j(t,v.Aj.Manage))&&!!r.librarySectionID&&V(r,e),z=({provider:e,stableUser:t})=>U(e,v.IL.Save,t)&&(0,p._)(t,{requires:c.W}),G=({stableUser:e,metadataItem:t,provider:r,containerSubtype:n,discoverProvider:i})=>{const s=(0,h.c)(t.guid||t.primaryGuid);return!(!t||s!==m.SY.Plex||(0,P.c)(r)||t.type===m.WW.Clip&&n===m.GO.Trailer)&&(i&&U(i,v.IL.AddToWatchlist,e)||U(r,v.IL.AddToWatchlist,e))},q=e=>{const t=e.discoverProviderItemState||e.metadataItemState;return!y(e.metadataItem,t)&&G(N(R({},e),{metadataItemState:t}))},K=e=>{const t=e.discoverProviderItemState||e.metadataItemState;return!!y(e.metadataItem,t)&&G(N(R({},e),{metadataItemState:t}))},Q=e=>U(e.provider,v.IL.RemoveFromContinueWatching,e.stableUser),$=({provider:e})=>(0,P.c)(e),Y=({provider:e,stableUser:t,metadataItem:r,addToLibraryTargets:n})=>{if(!e)return!1;const i=r.type===m.WW.Track||r.type===m.WW.Album||r.type===m.WW.Artist,s=a._u(e.identifier,a.y6),l=!!t.features[o.sv],d=(0,p._)(t,{requires:c.W});return!!(i&&s&&l&&d&&(null==n?void 0:n.length))};function X({provider:e,metadataItem:t,stableUser:r}){return!(!U(e,v.IL.Rate,r)||(0,u.ue)(t.type)||t.isFolder)}const J=({provider:e,metadataItem:t})=>{const r=(0,S.c)(e,v.Aj.Subscribe);return(0,f.c)(t)&&!!r},Z=({server:e,provider:t,metadataItem:r,stableUser:n})=>U(t,v.IL.Rate,n)&&!r.isFolder&&(!e.isCloud||r.type!==m.WW.Collection)&&!e.isEmbedded,ee=({server:e,metadataItem:t,stableUser:r})=>function(e,t,r){var n;return!(!(r.isFullUser&&!r.anonymous&&t.guid&&(null==(n=t.guid)?void 0:n.indexOf("plex://"))>-1&&C.includes(t.type))||e.isCloud&&!t.publicPagesURL)}(e,t,r),te=({provider:e,metadataItem:t,stableUser:r})=>{const n=(0,b.c)(e,v.IL.Scrobble,r);return!!(null==n?void 0:n.key)&&!t.isExtra&&t.type!==m.WW.Collection&&t.type!==m.WW.Playlist&&!e.protocols.includes(v.QJ.LiveTV)},re=e=>{const{metadataItem:t,metadataItemState:r}=e;return!(!te(e)||null!=r.saved&&!r.saved&&!r.viewOffset)&&((0,u.Av)(t.type)?void 0!==r.viewedLeafCount&&void 0!==t.leafCount&&r.viewedLeafCount<t.leafCount:!r.viewCount||!!r.viewOffset)},ne=e=>{const{metadataItem:t,metadataItemState:r}=e;return!(!te(e)||null!=r.saved&&!r.saved)&&((0,u.Av)(t.type)?!!r.viewedLeafCount&&r.viewedLeafCount>0:!!r.viewCount||!!r.viewOffset)},ie=({server:e,provider:t,metadataItem:r})=>{const{isExtra:n,isFolder:i,radio:s,readOnly:a}=r,o=!(e.isEmbedded||n||i||s);return r.isPlaylist?!a:j(t,v.Aj.Manage)&&o},se=({server:e,provider:t,metadataItem:r})=>ie({server:e,provider:t,metadataItem:r}),ae=({server:e,provider:t,metadataItem:r})=>!e.isCloud&&ie({server:e,provider:t,metadataItem:r}),oe=({server:e,provider:t,metadataItem:r})=>!e.isCloud&&!r.indirect&&!r.remoteMedia&&ie({server:e,provider:t,metadataItem:r}),ce=({server:e,provider:t,metadataItem:r})=>!!ie({server:e,provider:t,metadataItem:r})&&!(!r.guid||/(local|none):\/\//.test(r.guid)),le=({server:e,provider:t,metadataItem:r})=>!!ie({server:e,provider:t,metadataItem:r})&&!(r.remoteMedia||!e.transcoderVideo||!e.backgroundProcessing),de=({server:e,provider:t,metadataItem:r})=>!!ie({server:e,provider:t,metadataItem:r})&&!!(r.isPlaylist||r.type===m.WW.Collection||r.remoteMedia||e.allowMediaDeletion),ue={isAddToCollectionVisible:H,isAddToFavoriteChannelsVisible:$,isAddToLibraryVisible:Y,isAddToPicksVisible:({provider:e,stableUser:t})=>U(e,v.IL.Pick,t),isAddToPlaylistVisible:B,isAddToSavedVisible:e=>z(e)&&!1===e.metadataItemState.saved,isAddToWatchlistVisible:q,isAnalyzeVisible:oe,isDeleteVersionVisible:({server:e,provider:t,metadataItem:r})=>{var n;if(!ie({server:e,provider:t,metadataItem:r}))return!1;if(!e.allowMediaDeletion)return!1;const i=null==(n=r.Media)?void 0:n.filter((e=>!!e.proxyType));return!!(null==i?void 0:i.length)},isDeleteVisible:de,isDownloadFileVisible:({provider:e,metadataItem:t})=>!(!i.c.allowDirectDownload||!e.protocols.includes(v.QJ.Download)||t.isExtra||t.remoteMedia),isEditFiltersVisible:({server:e,provider:t,metadataItem:r})=>!!ie({server:e,provider:t,metadataItem:r})&&!!r.smart,isEditVisible:se,isFavoriteVisible:({provider:e,stableUser:t,metadataItem:r,metadataItemState:n})=>X({provider:e,stableUser:t,metadataItem:r})&&!(0,d.cp)(n),isFixMatchVisible:({server:e,provider:t,metadataItem:r})=>ce({server:e,provider:t,metadataItem:r}),isGetInfoVisible:({provider:e,metadataItem:t})=>!!e&&(0,I.c)(e)&&!t.isExtra&&!t.indirect,isMarkPlayedVisible:re,isMarkUnplayedVisible:ne,isShareVisible:ee,isReportVisible:({metadataItem:e,stableUser:t})=>function(e,t){const r=(0,w.c)(e.source);return t.isFullUser&&!t.anonymous&&r.isServer}(e,t),isMatchVisible:({server:e,provider:t,metadataItem:r})=>!!ie({server:e,provider:t,metadataItem:r})&&!!r.guid&&!ce({server:e,provider:t,metadataItem:r}),isOptimizeVisible:le,isPlayAllVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>!(!_({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})||n.type!==m.WW.Artist&&(!n.onDeck||!i.viewedLeafCount)),isPlayArtistTVVisible:({metadataItem:e})=>function(e){return!!e.stations&&e.stations.some((e=>e.playlistType===m.QT.Video))}(e),isPlayMusicVideoVisible:W,isPlayRadioVisible:({metadataItem:e})=>function(e){return!!e.stations&&e.stations.some((e=>e.playlistType===m.QT.Audio))}(e),isPlayTrailerVisible:W,isPlayVersionVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>!!_({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})&&(0,I.c)(t)&&!!n.Media&&n.Media.length>1,isPlayVisible:_,isPublishVisible:({server:e,provider:t})=>{var r;return!!(null==(r=e.ownerFeatures)?void 0:r.includes(o.Q7))&&j(t,v.Aj.Manage)},isQueueVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>{const s=!F(n)&&!n.rentalPrice;return _({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})&&j(t,v.Aj.PlayQueue)&&s},isRateVisible:Z,isRecordVisible:J,isRefreshVisible:ae,isRemoveFromContinueWatchingVisible:Q,isRemoveFromCuratedListVisible:({provider:e,containerType:t})=>!(!j(e,v.Aj.Collection)||!j(e,v.Aj.Manage))&&t===m.WW.Collection,isRemoveFromFavoriteChannelsVisible:$,isRemoveFromSavedVisible:e=>z(e)&&!0===e.metadataItemState.saved,isRemoveFromWatchlistVisible:K,isRentVisible:e=>!(a._u(e.provider.identifier,a.Im)||(0,g.c)(e.metadataItem,e.metadataItemState)||!e.stableUser.features[o._6]||!e.metadataItem.rentalPrice),isSettingsVisible:({provider:e,metadataItemState:t})=>!j(e,v.Aj.Manage)&&null!=t.preferences,isGrantAccessVisible:({server:e,provider:t,metadataItem:r})=>(0,I.c)(t)&&e.isFullOwnedServer&&!r.isExtra&&!r.remoteMedia,isShuffleVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>!n.radio&&_({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})&&j(t,v.Aj.PlayQueue),isSplitApartVisible:({server:e,provider:t,metadataItem:r})=>{var n;if(!ie({server:e,provider:t,metadataItem:r}))return!1;let i;return i=(0,u.Av)(r.type)?r.Location:null==(n=r.Media)?void 0:n.filter((e=>!e.proxyType)),!!i&&i.length>1},isSyncDownloadVisible:({server:e,provider:t,metadataItem:r})=>{if(!i.c.allowSyncDownload)return!1;if(!t)return!1;if(!a.y2.includes(t.identifier))return!1;if(r.isPlaylist&&r.playlistType===m.QT.Photo)return!1;if(!r.hasOwnProperty("guid"))return!1;if(r.remoteMedia)return!1;const n=(0,S.c)(t,v.Aj.Subscribe),o=(null==n?void 0:n.flavor)===s.Qv;return(0,I.c)(t)?e.allowSync&&o:o},isUnfavoriteVisible:({provider:e,stableUser:t,metadataItem:r,metadataItemState:n})=>X({provider:e,stableUser:t,metadataItem:r})&&(0,d.cp)(n),isUnmatchVisible:({server:e,provider:t,metadataItem:r})=>ce({server:e,provider:t,metadataItem:r}),isViewPlayHistoryVisible:({server:e,provider:t,metadataItem:r})=>(0,I.c)(t)&&e.isFullOwnedServer&&!e.isEmbedded&&!r.isExtra,isWatchTogetherVisible:({provider:e,stableUser:t,metadataItem:r})=>{const i=!!t.features[o.s5],s=a._u(e.identifier,[a.Qh,a.Sg]),c=!r.rentalPrice&&!r.isExtra,l=n.Statsig.checkGate(E.iQ.DiscoverVODUnification)&&a._u(e.identifier,a.Im)&&!!r.playableKey;return i&&(s&&c||l)},isCopyMetadataKeyVisible:({metadataItem:e,deviceSettings:t})=>!(!(null==t?void 0:t.showMetadataCopyKeyAction)||!(0,l.c)(e.guid)),isCopyMetadataParentKeyVisible:({metadataItem:e,deviceSettings:t})=>!(!(null==t?void 0:t.showMetadataCopyKeyAction)||!(0,l.c)(e.parentGuid)),isCopyMetadataGrandparentKeyVisible:({metadataItem:e,deviceSettings:t})=>!(!(null==t?void 0:t.showMetadataCopyKeyAction)||!(0,l.c)(e.grandparentGuid))};function pe({server:e,provider:t,discoverProvider:r,discoverProviderItemState:n,stableUser:i,containerType:s,containerSubtype:a,metadataItem:o,metadataItemState:c,deviceSettings:l,addToLibraryTargets:d}){const u=L[o.type];return u?u.reduce(((u,p)=>{const m=ue[p];return u[p]=!!(e&&t&&o)&&m({server:e,provider:t,discoverProvider:r,discoverProviderItemState:n,stableUser:i,containerType:s,containerSubtype:a,metadataItem:o,metadataItemState:c,deviceSettings:l,addToLibraryTargets:d}),u}),{}):{}}},26647:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e){return`${n.SY.Plex}/${e.type}/${e.ratingKey}`}},50696:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);const i=function(e,t){if("key"!==t||!(e.skipDetails||e.type===n.WW.Track||e.type===n.WW.Photo||e.subtype===n.GO.Photo||e.isExtra||e.isLiveTVChannel||e.radio))return e[t]}},86244:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e){switch(e){case n.WW.Movie:return n.k3.Movie;case n.WW.Show:return n.k3.Show;case n.WW.Season:return n.k3.Season;case n.WW.Episode:return n.k3.Episode;case n.WW.Person:return n.k3.Person;case n.WW.Artist:return n.k3.Artist;case n.WW.Album:return n.k3.Album;case n.WW.Track:return n.k3.Track;case n.WW.Clip:return n.k3.Clip;case n.WW.Photo:return n.k3.Photo;case n.WW.PhotoAlbum:return n.k3.PhotoAlbum;case n.WW.Playlist:return n.k3.Playlist;case n.WW.Collection:return n.k3.Collection;case n.WW.Author:return n.k3.Author;case n.WW.Audiobook:return n.k3.Audiobook;case n.WW.Chapter:return n.k3.Chapter}!function(e){throw new Error(`"${e}" is not mapped to a numeric type`)}(e)}},4388:(e,t,r)=>{"use strict";r.d(t,{Aj:()=>a,cp:()=>d,cr:()=>c,eg:()=>o});var n=r(11096),i=r(93808),s=r(67532);const a=1/1.5,o=1,c=16/9,l=5.4;function d(e,t,r){if(null==r?void 0:r.isLiveTVChannel)return o;const d=null==r?void 0:r.listStyle,u=null==r?void 0:r.displayImageType;if(u)return function(e){switch(e){case n.OQ.Avatar:return o;case n.OQ.Background:return c;case n.OQ.Banner:return l;case n.OQ.Clear:return o;case n.OQ.CoverArt:return c;case n.OQ.CoverPoster:return a;case n.OQ.CoverSquare:return o;case n.OQ.Snapshot:return c}!function(e){throw new Error(`"${e}" is not mapped to an aspect ratio`)}(e)}(u);if(d)switch(d){case s.y.Hero:return c;case s.y.Grid:case s.y.Shelf:switch(e){case s.a.Channels:case s.a.Author:case s.a.Audiobook:return o;case i.WW.Episode:return a;case i.WW.Collection:switch(t){case i.GO.Artist:case i.GO.Album:case i.GO.Track:return o;default:return a}}break;case s.y.PrePlayGrid:if(e===i.WW.Collection&&t===i.GO.Episode)return c;break;case s.y.Search:switch(e){case i.WW.Clip:case i.WW.Movie:case i.WW.Episode:return a;case s.a.Channels:return c}}if(t===i.GO.Clip&&e===i.WW.Movie)return c;switch(e){case i.WW.Movie:case i.WW.Show:case i.WW.Season:return a;case i.WW.Episode:return c;case i.WW.Audiobook:case i.WW.Author:case i.WW.Artist:case i.WW.Album:case i.WW.Track:case i.WW.Person:case i.WW.Photo:case i.WW.PhotoAlbum:case i.WW.Playlist:return o;case i.WW.Clip:return c;case i.WW.Collection:switch(t){case i.GO.Artist:case i.GO.Album:case i.GO.Track:return o;default:return a}case s.a.Directory:return c;case s.a.Content:case s.a.Channel:case s.a.Folder:case s.a.Station:case i.WW.Hub:case i.WW.List:return o;case s.a.Mixed:return a;default:return c}}},6400:(e,t,r)=>{"use strict";function n(e){const{width:t,height:r,aspectRatio:n}=e;if(t)return{width:t,height:Math.floor(t/n)};if(r)return{width:Math.floor(r*n),height:r};throw new Error("`getMetadataPosterDimensions` requires either a `width` or `height`")}r.d(t,{c:()=>n})},14400:(e,t,r)=>{"use strict";r.d(t,{cp:()=>Et,mQ:()=>It,SI:()=>St});var n=r(42728),i=r(11096),s=r(11504),a=r(52240),o=r(59396),c=r(38652);function l({className:e}){var t;const[r]=(0,c.Q5)(),n=null!=(t=null==r?void 0:r.rating)?t:0;return s.createElement("span",{className:e},s.createElement(a.M,{accessibilityLabel:(0,o.c)("Rating"),iconSize:"m",value:n}))}var d=r(18880),u=r(74316),p=r(23256),m=r(48168),h=r(90068),y=r(22916);const g={badge:"MetadataTitleAttributed-badge-qiBr8A"};function f({className:e,tabIndex:t,allowLink:r=!0,metadataItem:n}){const i=(0,h.c)(n,"key");if(!n.title)return null;const a=s.createElement(s.Fragment,null,n.attribution?s.createElement(m.c,{attribution:n.attribution,className:g.badge}):null,n.title);return r&&i?s.createElement(y.c,{className:e,tabIndex:t,title:n.title,to:i},a):s.createElement("span",{className:e,title:n.title},a)}const v={img:"MetadataTitleAttributionLogo-img-A4jLQd"};function b({className:e,metadataItem:t}){return t.attributionLogo?s.createElement("span",{className:e},s.createElement("img",{className:v.img,src:t.attributionLogo})):null}var S=r(13100),P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&M(e,r,t[r]);if(w)for(var r of w(t))O.call(t,r)&&M(e,r,t[r]);return e},D=(e,t)=>I(e,E(t));function k(e){return s.createElement(S.c,D(T({},e),{preferRatingType:"audience"}))}var x=r(7652),A=r(7932),R=r(8044),N=r(93808);function L({className:e,metadataItem:t}){if(null==t.childCount)return null;const r=1===t.childCount,n={itemCount:t.childCount};let i;return i=t.subtype===N.GO.Movie?r?(0,o.c)("{itemCount} movie",n):(0,o.c)("{itemCount} movies",n):t.subtype===N.GO.Show?r?(0,o.c)("{itemCount} show",n):(0,o.c)("{itemCount} shows",n):t.subtype===N.GO.Season?r?(0,o.c)("{itemCount} season",n):(0,o.c)("{itemCount} seasons",n):t.subtype===N.GO.Episode?r?(0,o.c)("{itemCount} episode",n):(0,o.c)("{itemCount} episodes",n):t.subtype===N.GO.Artist?r?(0,o.c)("{itemCount} artist",n):(0,o.c)("{itemCount} artists",n):t.subtype===N.GO.Album?r?(0,o.c)("{itemCount} album",n):(0,o.c)("{itemCount} albums",n):t.subtype===N.GO.Track?r?(0,o.c)("{itemCount} track",n):(0,o.c)("{itemCount} tracks",n):r?(0,o.c)("{itemCount} item",n):(0,o.c)("{itemCount} items",n),s.createElement("span",{className:e},i)}var j=r(32140),U=r(27876),F=r(36364),V=r(26647),_=r(60872),W=Object.defineProperty,B=Object.defineProperties,H=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))G.call(t,r)&&K(e,r,t[r]);if(z)for(var r of z(t))q.call(t,r)&&K(e,r,t[r]);return e},$=(e,t)=>B(e,H(t));function Y(e){switch(e){case N.Cu.Actor:return 0;case N.Cu.Director:return 1;case N.Cu.Writer:return 2;case N.Cu.Producer:return 3;default:return 4}}function X({className:e,metadataItem:t}){const{credits:r}=(0,U.w1)(_.c),n=function(e,t){if(!e||!t)return;const r=[];for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.credits.length;e++){const n=i.credits[e];(0,F.c$)(n)&&(0,V.c)(n.item)===t&&r.push($(Q({},n),{groupType:i.type,groupTitle:i.title}))}}return r.length?(r.sort(((e,t)=>e.groupType===N.Cu.Actor&&e.order>=5&&(t.groupType!==N.Cu.Actor||e.order>t.order)?-1:e.order&&t.order&&e.order!==t.order?e.order-t.order:e.order===t.order?Y(e.groupType)-Y(t.groupType):0)),r.map((e=>{var t;return null!=(t=e.role)?t:e.groupTitle})).join(" / ")):void 0}(null==r?void 0:r.groups,t.guid);return n?s.createElement("span",{className:e,title:n},n):null}var J=r(9868),Z=r(69956),ee=r(3008),te=r(64776),re=r(7988),ne=r(13778),ie=r(94192),se=r(24908),ae=r(37984),oe=r(684);function ce({source:e}){const t=(0,U.OY)(),r=(0,s.useCallback)((e=>{const r=(0,Z.c)(e.source),n=(0,oe.c)(r.serverIdentifier,r.providerIdentifier,{key:e.key});n&&t((0,ne.IB)({pathname:n}))}),[t]);return s.createElement(te.G4,{item:e,onChooseItem:r},s.createElement(se.c,{item:e}))}function le({modalState:e,items:t}){return s.createElement(te.wJ,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},s.createElement(te.EX,{closeButtonAccessibilityLabel:(0,o.c)("Close Choose Source Modal"),header:(0,o.c)("Choose Source"),size:"s"},s.createElement(te.oh,null,s.createElement(ie.c,{metadataItem:t[0]}),s.createElement(re.aS,null,s.createElement(ee.ye,{paddingBottom:"l",paddingX:"l"},t.map((e=>{const t=(0,Z.c)(e.source);return s.createElement(ae.cp,{key:e.sourceURI,machineIdentifier:t.serverIdentifier,providerIdentifier:t.providerIdentifier},s.createElement(ce,{source:e}))})))))))}var de=r(58660),ue=r(41744),pe=r(77072);const me={container:"MetadataTitleSourcesContent-container-snwOOB MetadataPosterCardTitle-title-ImAmGu",sourceButtonContainer:"MetadataTitleSourcesContent-sourceButtonContainer-CaSrYB MetadataTitleSourcesContent-container-snwOOB MetadataPosterCardTitle-title-ImAmGu"};function he({firstSourceTitle:e,firstSourceRoute:t,sourcesLength:r,onMoreSourcesPress:n}){const i=r>1?"+"+(r-1):null;return i?s.createElement("span",{className:me.container},s.createElement(de.c,{color:"accent",font:"inherit",onPress:n},`${e} ${i}`)):t?s.createElement("span",{className:me.container},s.createElement(ue.c,{color:"accent",font:"inherit",href:t},e)):s.createElement("span",{className:me.container},s.createElement(pe.a,{color:"accent",font:"inherit"},e))}var ye=r(4668),ge=r(57864),fe=r(6476);const ve=(0,r(87512).c)((function(e){return(0,ge.M3)(_.c,(t=>{const r=(e?t.creditSources.sourcesByGUID[e]:null)||[],n=t.metadata.metadataItem;return n?(0,fe.c)(n,r):[]}))}));function be({metadataItem:e}){const t=(0,J.y)(),r=(0,U.w1)(ve(e.guid)),n=(0,Z.c)(r[0].source),i=(0,U.w1)((0,ye.c)(n.serverIdentifier));return r.length?s.createElement(s.Fragment,null,s.createElement(he,{firstSourceRoute:(0,oe.c)(n.serverIdentifier,n.providerIdentifier,{key:r[0].key}),firstSourceTitle:i.friendlyName,sourcesLength:r.length,onMoreSourcesPress:t.onOpen}),s.createElement(le,{items:r,modalState:t})):null}var Se=Object.defineProperty,Pe=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Oe=(e,t,r)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Me=(e,t)=>{for(var r in t||(t={}))we.call(t,r)&&Oe(e,r,t[r]);if(Ee)for(var r of Ee(t))Ce.call(t,r)&&Oe(e,r,t[r]);return e},Te=(e,t)=>Pe(e,Ie(t));function De(e){return s.createElement(S.c,Te(Me({},e),{preferRatingType:"critic"}))}var ke=r(77092),xe=r(89084),Ae=r(87416);function Re({className:e,tabIndex:t,metadataItem:r}){const n=(0,h.c)(r,"key"),i=(0,Ae.c)({useLongName:!0,episodeIndex:r.index,date:r.originallyAvailableAt,noLeadingZero:!0});return n?s.createElement("span",{className:e},s.createElement(y.c,{tabIndex:t,title:r.title,to:n},i)):s.createElement("span",{className:e},s.createElement("span",{title:r.title},i))}var Ne=r(86068);const Le={ellipsis:"MetadataTitleEpisodeTitleAndIdentifier-ellipsis-Lsorf0"};function je({className:e,metadataItem:t}){return s.createElement("div",{className:e},s.createElement(ee.ye,{gap:"xs",orientation:"horizontal"},s.createElement(Ne.c,{metadataItem:t}),"-",s.createElement(d.c,{className:Le.ellipsis,metadataItem:t})))}var Ue=r(56276),Fe=r(72772);function Ve({className:e,metadataItem:t}){const r=(0,Fe.c)(t.sourceURI);return(null==r?void 0:r.playableUntil)?s.createElement("span",{className:e},(0,Ue.c)(r.playableUntil)):null}function _e({className:e,metadataItem:t}){const{sourceTitle:r}=t;return r?s.createElement("span",{className:e,title:r},(0,o.c)("from {sourceTitle}",{sourceTitle:r})):null}function We({className:e,metadataItem:t}){const r=function(e){switch(e){case N.GO.Trailer:return(0,o.c)("Trailer");case N.GO.DeletedScene:return(0,o.c)("Deleted Scene");case N.GO.Interview:return(0,o.c)("Interview");case N.GO.MusicVideo:return(0,o.c)("Music Video");case N.GO.BehindTheScenes:return(0,o.c)("Behind the Scenes");case N.GO.SceneOrSample:return(0,o.c)("Scene");case N.GO.LiveMusicVideo:return(0,o.c)("Live Music Video");case N.GO.LyricMusicVideo:return(0,o.c)("Lyric Music Video");case N.GO.Concert:return(0,o.c)("Concert");case N.GO.Featurette:return(0,o.c)("Featurette");case N.GO.Short:return(0,o.c)("Short");case N.GO.Other:return(0,o.c)("Other")}}(t.subtype);return r?s.createElement("span",{className:e,title:r},r):null}var Be=r(91036),He=r(3592);function ze({className:e,tabIndex:t,allowLink:r,metadataItem:n}){return null!=n.addedAt||n.grandparentTitle?s.createElement("span",{className:e},s.createElement(He.c,{timestamp:n.addedAt}),null!=n.addedAt&&n.grandparentTitle?"  ":null,s.createElement(Be.c,{allowLink:r,metadataItem:n,tabIndex:t})):null}var Ge=r(13420),qe=r(78192),Ke=r(31912),Qe=r(17068);function $e({className:e,metadataItem:t}){return t.year||t.editionTitle?s.createElement("div",{className:e},t.year?s.createElement("span",null,t.year):null,t.year&&t.editionTitle?s.createElement(Qe.c,{separator:""}):null,t.editionTitle?s.createElement("span",null,t.editionTitle):null):null}var Ye=r(61676),Xe=r(20792),Je=r(64824),Ze=r(98676);function et({className:e,metadataItem:t}){return t.playlistType===Je.Ww?s.createElement(Ze.c,{className:e,metadataItem:t}):s.createElement(ke.c,{className:e,metadataItem:t})}var tt=r(44604);function rt({className:e,metadataItem:t}){const r=(0,Fe.c)(t.sourceURI);if(!r.unviewedLeafCount||!r.viewedLeafCount)return null;const n=r.unviewedLeafCount;return s.createElement("span",{className:e},t.type===N.WW.Track?(0,o.c)("{unplayedCount} unplayed",{unplayedCount:n}):(0,o.c)("{unwatchedCount} unwatched",{unwatchedCount:n}))}var nt=r(38320),it=r(3416),st=r(86740);function at({className:e,metadataItem:t}){const r=(0,Fe.c)(t.sourceURI),n=(0,st.c)(t,r);return n?s.createElement("span",{className:e},n):null}var ot=r(25564);function ct({className:e,displayFieldName:t}){return null}var lt=Object.defineProperty,dt=Object.defineProperties,ut=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,yt=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gt=(e,t)=>{for(var r in t||(t={}))mt.call(t,r)&&yt(e,r,t[r]);if(pt)for(var r of pt(t))ht.call(t,r)&&yt(e,r,t[r]);return e},ft=(e,t)=>dt(e,ut(t)),vt=r(67532),bt=r(99372);function St(e){var t;return!!e&&null!=(t=e.isDoubleLine)&&t}function Pt(e){switch(e){case i.Mv.AddedAt:return u.c;case i.Mv.AddedAtGrandparentTitle:return ze;case i.Mv.AirsAt:return p.c;case i.Mv.AttributionLogo:return b;case i.Mv.AudienceRating:return k;case i.Mv.ChildCount:return R.c;case i.Mv.ContentRating:return j.c;case i.Mv.Duration:return ke.c;case i.Mv.EpisodeIdentifier:return Ne.c;case i.Mv.GrandparentTitle:return Be.c;case i.Mv.LastRatedAt:return Ge.c;case i.Mv.LastViewedAt:return qe.c;case i.Mv.LeafCount:return Ke.c;case i.Mv.MediaBitrate:return A.c;case i.Mv.VideoResolution:return it.c;case i.Mv.OriginallyAvailableAt:return x.c;case i.Mv.ParentTitle:return Ye.c;case i.Mv.PlayableUntil:return Ve;case i.Mv.Rating:return De;case i.Mv.SourceTitle:return _e;case i.Mv.Title:return d.c;case i.Mv.TitleAttributed:return f;case i.Mv.UnviewedLeafCount:return rt;case i.Mv.UserRating:return nt.c;case i.Mv.ActivityRating:return l;case i.Mv.ViewCount:return Xe.c;case i.Mv.ViewOffset:return at;case i.Mv.Year:return ot.c;case i.Mv.EpisodeTitleAndIdentifier:return je;case i.Mv.YearAndEdition:return $e;default:return function(e){return t=>s.createElement(ct,ft(gt({},t),{displayFieldName:e}))}(e)}}function It(e){return"component"in e?e:{component:e}}function Et(e,t,r){var i;if(null==r?void 0:r.isLiveTVChannel)return[Be.c,d.c,p.c];if((0,bt.i)(n.o5)&&(null==(i=null==r?void 0:r.activeFilterRules)?void 0:i.find((e=>"unwatchedLeaves"===e.filter.filter&&!0===e.value))))return[d.c,xe.c,rt];const s=null==r?void 0:r.displayFieldNames;if(s)return s.map(Pt);const a=null==r?void 0:r.listStyle;if(e===vt.a.Mixed)return[null,null,null];switch(a){case vt.y.CreditSource:return[d.c,X,be];case vt.y.PrePlayGrid:switch(e){case N.WW.Season:return[d.c,xe.c];case N.WW.Episode:return[d.c,Re];case N.WW.Album:return[f,ot.c];case N.WW.Collection:switch(t){case N.GO.Movie:return[d.c,$e];case N.GO.Show:return[d.c,tt.c];case N.GO.Season:return[Ye.c,d.c];case N.GO.Episode:return[Be.c,d.c,Ne.c];case N.GO.Artist:return[d.c];case N.GO.Album:return[Ye.c,d.c]}}}switch(t){case N.GO.Trailer:case N.GO.DeletedScene:case N.GO.Interview:case N.GO.MusicVideo:case N.GO.BehindTheScenes:case N.GO.SceneOrSample:case N.GO.LiveMusicVideo:case N.GO.LyricMusicVideo:case N.GO.Concert:case N.GO.Featurette:case N.GO.Short:case N.GO.Other:if(e===N.WW.Clip)return[{component:d.c,allowLink:!1},We]}switch(e){case N.WW.Movie:return[d.c,$e];case N.WW.Show:return[d.c,tt.c];case N.WW.Season:return[Ye.c,d.c];case N.WW.Episode:return[Be.c,d.c,Ne.c];case N.WW.Artist:return[d.c];case N.WW.Album:return[Ye.c,d.c];case N.WW.Track:return[Be.c,d.c];case N.WW.Photo:return[{component:d.c}];case N.WW.PhotoAlbum:case N.WW.Clip:return[d.c];case N.WW.Playlist:return[d.c,et];case N.WW.Collection:return[d.c,L];case N.WW.Directory:case N.WW.Channel:case vt.a.Content:return[];case vt.a.Channels:return[Be.c,d.c,p.c];case vt.a.Photo:return[d.c]}return[{component:d.c,allowLink:!1}]}},21940:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(42728),i=r(14400),s=r(67532),a=r(5396),o=r(66992),c=r(99372);function l(e,t,r){var l;const d=(0,a.c)(e),u=null==r?void 0:r.activeFilterRules,p=null==r?void 0:r.displayFields,m=(0,c.i)(n.o5),h=null==(l=null==r?void 0:r.activeFilterRules)?void 0:l.find((e=>"unwatchedLeaves"===e.filter.filter&&!0===e.value));if(p&&(!m||!h)){if(e===s.a.Mixed)return p.reduce(((e,t)=>Math.max(e,t.fields.length)),0);{const e=(0,o.c)(d,t,p);if(e)return e.length}}return(0,i.cp)(null!=d?d:e,t,{activeFilterRules:u,listStyle:null==r?void 0:r.listStyle}).reduce(((e,t)=>null!=t&&(0,i.SI)(t)?e+2:e+1),0)}},77404:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(93808),i=r(4388);function s(e,t={}){var r;const{aspectRatio:s,displayImageType:a}=t,{type:o,subtype:c,thumb:l,parentThumb:d,grandparentThumb:u,art:p,parentArt:m,grandparentArt:h,composite:y,liveTVChannel:g}=e;if(a){const t=null==(r=e.Image)?void 0:r.find((e=>e.type===a));return null==t?void 0:t.url}if(g)return g.thumb;switch(s){case i.cr:switch(o){case n.WW.Movie:return c===n.GO.Clip?l:p;case n.WW.Show:return p;case n.WW.Season:return p||m;case n.WW.Episode:return e.isUnreleased?h:l;default:return l}case i.Aj:switch(o){case n.WW.Season:return l||d;case n.WW.Episode:return u;default:return l}case i.eg:switch(o){case n.WW.Album:return l;case n.WW.Track:return l||d;case n.WW.Playlist:return l||y;default:return l}}return l}},61636:(e,t,r)=>{"use strict";function n(e){const t=null==e?void 0:e.match(/^plex:\/\/(\w+)\/\w+/);return(null==t?void 0:t[1])?t[1]:void 0}r.d(t,{c:()=>n})},3188:(e,t,r)=>{"use strict";r.d(t,{S:()=>s,u:()=>i});var n=r(93808);function i(e,t){switch(e){case n.WW.Show:return n.WW.Season;case n.WW.Season:return n.WW.Episode;case n.WW.Artist:return n.WW.Album;case n.WW.Author:return n.WW.Audiobook;case n.WW.Audiobook:return n.WW.Chapter;case n.WW.Album:return n.WW.Track;case n.WW.PhotoAlbum:return n.WW.Photo;case n.WW.Collection:switch(t){case n.GO.Movie:return n.WW.Movie;case n.GO.Show:return n.WW.Show;case n.GO.Season:return n.WW.Season;case n.GO.Episode:return n.WW.Episode;case n.GO.Artist:return n.WW.Artist;case n.GO.Album:return n.WW.Album;case n.GO.Track:return n.WW.Track;case n.GO.Author:return n.WW.Author;case n.GO.Audiobook:return n.WW.Audiobook;case n.GO.Chapter:return n.WW.Chapter}}}function s(e,t){switch(e){case n.WW.Show:case n.WW.Season:return n.WW.Episode;case n.WW.Author:case n.WW.Audiobook:return n.WW.Chapter;case n.WW.Artist:case n.WW.Album:return n.WW.Track;case n.WW.PhotoAlbum:return n.WW.Photo;case n.WW.Collection:switch(t){case n.GO.Movie:return n.WW.Movie;case n.GO.Show:case n.GO.Season:case n.GO.Episode:return n.WW.Episode;case n.GO.Artist:case n.GO.Album:case n.GO.Track:return n.WW.Track}}}},61924:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(93808);const s=function({metadataType:e,metadataSubtype:t,isPlural:r=!1,isEPG:s=!1}){switch(e){case i.WW.Movie:return t===i.GO.Clip?r?(0,n.c)("Videos"):(0,n.c)("Video"):s?r?(0,n.c)("Live TV Movies"):(0,n.c)("Live TV Movie"):r?(0,n.c)("Movies"):(0,n.c)("Movie");case i.WW.Show:return s?r?(0,n.c)("Live TV Shows"):(0,n.c)("Live TV Show"):r?(0,n.c)("Shows"):(0,n.c)("Show");case i.WW.Season:return s?r?(0,n.c)("Live TV Seasons"):(0,n.c)("Live TV Season"):r?(0,n.c)("Seasons"):(0,n.c)("Season");case i.WW.Episode:return s?r?(0,n.c)("Live TV Episodes"):(0,n.c)("Live TV Episode"):r?(0,n.c)("Episodes"):(0,n.c)("Episode");case i.WW.Artist:return r?(0,n.c)("Artists"):(0,n.c)("Artist");case i.WW.Album:return r?(0,n.c)("Albums"):(0,n.c)("Album");case i.WW.Track:return r?(0,n.c)("Tracks"):(0,n.c)("Track");case i.WW.Photo:return r?(0,n.c)("Photos"):(0,n.c)("Photo");case i.WW.PhotoAlbum:return r?(0,n.c)("Photo Albums"):(0,n.c)("Photo Album");case i.WW.Person:return r?(0,n.c)("People"):(0,n.c)("Person");case i.WW.Clip:return r?(0,n.c)("Videos"):(0,n.c)("Video");case i.WW.Collection:return r?(0,n.c)("Collections"):(0,n.c)("Collection");case i.WW.Playlist:return r?(0,n.c)("Playlists"):(0,n.c)("Playlist");case i.WW.Author:return r?"Authors":"Author";case i.WW.Audiobook:return r?"Audiobooks":"Audiobook";case i.WW.Chapter:return r?"Chapters":"Chapter"}!function(e){throw new Error(`"${e}" is not mapped to a title`)}(e)}},98348:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(1232),i=r.n(n),s=r(6396),a=r(70184),o=r(33040),c=(e=>(e.s="seconds",e.m="minutes",e.h="hours",e.d="days",e.w="weeks",e.M="months",e.y="years",e))(c||{});function l(e){if("now"===e)return{};const t=e.match(/([-+]?\d+)([smhdwMy])/);if(t){const[,e,r]=t;if(function(e){if(!(e in c))throw Error("Unknown unit: "+e)}(r),e&&r)return{[c[r]]:parseInt(e,10)}}else{const t=parseInt(e,10);if("number"==typeof t)return t}return{}}function d(e,t){return"object"==typeof t?(0,s.c)(e,t):e>=t}function u(e,t){return"object"==typeof t?(0,a.c)(e,t):e<=t}function p(e,t){if(!(null==e?void 0:e.length))return;const r=function(e){if(!e)return;const[,t]=e.split("?");return t?o.c.parseQueryString(t):void 0}(t),n=i()(e,"endsAt"),s=Date.now()/1e3;for(let e=0,t=n.length;e<t;e++){const t=n[e];if(r){const e=r["beginsAt>"],n=r["beginsAt<"],i=r["endsAt>"],s=r["endsAt<"];if(e&&t.beginsAt){const r=l(e);if(u(t.beginsAt,r))continue}if(n&&t.beginsAt){const e=l(n);if(d(t.beginsAt,e))continue}if(i&&t.endsAt){const e=l(i);if(u(t.endsAt,e))continue}if(s&&t.endsAt){const e=l(s);if(d(t.endsAt,e))continue}}if(t.endsAt&&t.endsAt>s)return t}return n[0]}},26044:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(69956),s=r(59396),a=r(98348),o=r(7060);function c(e,t,r){var c;if((0,o.c)(e)){const{beginsAt:t,endsAt:r}=null!=(c=(0,a.c)(e.Media))?c:{},n=Math.floor(Date.now()/1e3);return t&&r&&n>=t&&n<r?(0,s.c)("Watch Now"):(0,s.c)("Watch Channel")}const{providerIdentifier:l}=(0,i.c)(e.sourceURI),d=n._u(l,n.Im);return d||!t.viewOffset&&!(null==r?void 0:r.viewOffset)?!d&&e.onDeck&&t.viewedLeafCount&&t.unviewedLeafCount?(0,s.c)("Next Episode"):(0,s.c)("Play"):(0,s.c)("Resume")}},49792:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37492),i=r(15468);function s(e){var t,r;return null!=(r=null!=(t=(0,i.c)(e.primaryGuid))?t:(0,n.c)(e.guid))?r:e.ratingKey}},15468:(e,t,r)=>{"use strict";function n(e){var t;return null==(t=null==e?void 0:e.match(/^plex:\/\/\w+\/(\w+)/))?void 0:t[1]}r.d(t,{c:()=>n})},79456:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(93808),i=r(79288);function s(e,t,r){const s=(0,i.c)(t,r);return r===n.I1.Video?s[0]:s.find((t=>null==e?void 0:e.find((e=>e.id===t.id&&e.streamType===t.streamType))))}},62128:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e){switch(e){case n.ys.Generic:return n.i_.Generic;case n.ys.Genre:return n.i_.Genre;case n.ys.Collection:return n.i_.Collection;case n.ys.Director:return n.i_.Director;case n.ys.Writer:return n.i_.Writer;case n.ys.Actor:return n.i_.Actor;case n.ys.Marker:return n.i_.Marker;case n.ys.PhotoAutotag:return n.i_.PhotoAutotag;case n.ys.Channel:return n.i_.Channel;case n.ys.Place:return n.i_.Place;case n.ys.AvailabilityPlatform:return n.i_.AvailabilityPlatform;default:throw new Error(`"${e}" is not mapped to a tagType`)}}},50236:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(93808);const s=function(e,t=!1){switch(e){case i.i_.Generic:return t?(0,n.c)("Tags"):(0,n.c)("Tag");case i.i_.Genre:return t?(0,n.c)("Genres"):(0,n.c)("Genre");case i.i_.Collection:return t?(0,n.c)("Collections"):(0,n.c)("Collection");case i.i_.Director:return t?(0,n.c)("Directors"):(0,n.c)("Director");case i.i_.Writer:return t?(0,n.c)("Writers"):(0,n.c)("Writer");case i.i_.Actor:return t?(0,n.c)("Actors"):(0,n.c)("Actor");case i.i_.Marker:return t?(0,n.c)("Markers"):(0,n.c)("Marker");case i.i_.PhotoAutotag:return t?(0,n.c)("Autotags"):(0,n.c)("Autotag");case i.i_.Channel:return t?(0,n.c)("Channels"):(0,n.c)("Channel");case i.i_.Place:return t?(0,n.c)("Places"):(0,n.c)("Place");case i.i_.AvailabilityPlatform:return t?(0,n.c)("Services"):(0,n.c)("Service");default:throw new Error(`"${e}" is not mapped to a title`)}}},86740:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(69604),i=r(59396);function s(e,t){if(e.duration&&t.viewOffset)return(0,i.c)("{timeRemaining} left",{timeRemaining:(0,n.c)(e.duration-t.viewOffset)})}},63856:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(93808);function s(e,t){return(Array.isArray(e)?e:[e]).every((e=>e===i.WW.Track))?t?(0,n.c)("Mark as Unplayed"):(0,n.c)("Mark as Played"):t?(0,n.c)("Mark as Unwatched"):(0,n.c)("Mark as Watched")}},92756:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(59396),i=r(93808);function s(e,t){return(Array.isArray(e)?e:[e]).every((e=>e===i.WW.Episode||e===i.WW.Season))?t?(0,n.c)("Remove Show from Watchlist"):(0,n.c)("Add Show to Watchlist"):t?(0,n.c)("Remove from Watchlist"):(0,n.c)("Add to Watchlist")}},47140:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var n=r(37492),i=r(93808),s=r(49792);function a(e){return e.type!==i.WW.Season&&e.type!==i.WW.Episode?(0,s.c)(e):e.type===i.WW.Season?(0,n.c)(e.parentGuid):(0,n.c)(e.grandparentGuid)}},69592:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(89064),s=r(85976),a=r(69956),o=r(47140);function c(e){if(!e.sourceURI)return"";const{providerIdentifier:t,isServer:r}=(0,a.c)(e.sourceURI),c=n.SI(t);let l=n.Im;return n.QJ(c)||(l+=`-${c}`),(0,s.c)({serverIdentifier:i.A,providerIdentifier:r?l:t,key:`/library/metadata/${(0,o._)(e)}`})}},53800:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(35860),i=r(37492),s=r(78168);function a(e,t){return!(!(0,s.c)(t)||!e.guid)&&(n._u(t.identifier,n.$9)?(0,i.c)(e.guid)!==e.ratingKey:encodeURIComponent(e.guid)!==e.ratingKey)}},19776:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(93808),i=r(7060),s=r(35860),a=r(30496);function o(e,t,r){return!function(e){return s._u((0,a.c)(e.identifier,e.providerIdentifier),s.Sg)}(r)&&!(0,i.c)(e)&&(e.type===n.WW.Movie||e.type===n.WW.Episode)&&t.isPopulated&&!1!==t.saved}},16816:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(6396);function i(e,t){return!!e.rentalPrice&&!!(null==t?void 0:t.playableUntil)&&(0,n.c)(t.playableUntil)}},3396:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(69956);function s(e){const{providerIdentifier:t}=(0,i.c)(e.sourceURI);return n._u(t,n.Im)}},7060:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(69956);function s(e){const{providerIdentifier:t}=(0,i.c)(e.sourceURI);return n._u(t,[n._0,n.$9])}},36248:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e){return!!e&&(e===n.ys.Actor||e===n.ys.Director||e===n.ys.Producer||e===n.ys.Writer)}},12624:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);function i(e,t){const{type:r}=e,{viewOffset:i,viewCount:s,viewedLeafCount:a,unviewedLeafCount:o,isPopulated:c}=t,l=o&&o>0;return!(r!==n.WW.Movie&&r!==n.WW.Show&&r!==n.WW.Season&&r!==n.WW.Episode&&r!==n.WW.Track||!c||i||!(s&&!a&&!l||a&&!l))}},38392:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(98348);const i=function(e,t){if(!e||!t)return 0;const r=(0,n.c)(e),i=(0,n.c)(t);if(!(null==r?void 0:r.beginsAt)||!(null==i?void 0:i.beginsAt))return 0;if((null==r?void 0:r.onAir)&&(null==i?void 0:i.onAir)){const e=Date.now();return Math.abs(e-r.beginsAt)>Math.abs(e-i.beginsAt)?1:-1}return(null==r?void 0:r.onAir)&&!(null==i?void 0:i.onAir)?-1:!(null==r?void 0:r.onAir)&&(null==i?void 0:i.onAir)||r.beginsAt>i.beginsAt?1:-1}},68536:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={isAdult:!1,isExtra:!1,isFolder:!1,isLiveTVChannel:!1,isPlaylist:!1,isUnreleased:!1,key:"",listItemKey:"",ratingKey:"",source:"",sourceURI:"",title:"",type:r(93808).WW.Movie,userState:!0,Autotag:[],Channel:[],Collection:[],Country:[],Director:[],Genre:[],Image:[],Label:[],Location:[],Media:[],Mood:[],Producer:[],Review:[],Role:[],Studio:[],Style:[],Tag:[],Writer:[]}},96048:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(44212),i=(e=>(e.Error="error",e.IsPending="isPending",e.IsPopulated="isPopulated",e.IsStale="isStale",e.TempState="tempState",e.Stream="Stream",e))(i||{}),s=r(11822),a=r(12396),o=r(45372),c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t));const f={error:null,isPending:!1,isStale:!1,isPopulated:!1,tempState:{}};function v(e,t){if(t)return e[t]||(e[t]=g(y({},f),{tempState:{}})),e[t]}function b(e,t){Object.keys(e).forEach((r=>{[i.Error,i.IsPending,i.IsPopulated,i.IsStale,i.Stream].includes(r)||t.hasOwnProperty(r)||delete e[r]}))}function S(e,t){for(const[r,n]of Object.entries(t)){if(!n)continue;const t=e[r];t?(Object.assign(t,n),b(t,n)):e[r]=n}}function P(e,t){var r;const n=null!=(r=e[t])?r:y({},f);(0,o.G8)(n),e[t]=n}function I(e,t,r){const n=e[t];n&&(Object.assign(n,r),b(n,r),(0,o.mM)(n),n.isStale=!1)}function E(e,t,r){const n=e[t];n&&(0,o.C)(n,r)}function w(e,t){const r=e[t];r&&(0,o.U1)(r)}const C=(0,n.is)({name:"metadataItemState",initialState:{},reducers:{metadataItemStatesNormalized(e,{payload:t}){Object.assign(e,t.metadataItemStates)},playedStatusUpdateRequested(e,{payload:t}){e[t.sourceURI]||(e[t.sourceURI]=g(y({},f),{tempState:{}}));const{sourceURI:r,played:n}=t,i=e[r];if(i){const{viewedLeafCount:e,unviewedLeafCount:t,viewCount:r,viewOffset:s,tempState:a}=i;a.viewedLeafCount=e,a.unviewedLeafCount=t,a.viewCount=r,a.viewOffset=s,null!=t&&null!=e?(i.viewedLeafCount=n?t+e:0,i.unviewedLeafCount=n?0:t+e):(i.viewCount=n?(i.viewCount||0)+1:0,i.viewOffset=0)}},playedStatusUpdateSucceeded(e,{payload:t}){const{sourceURI:r}=t,n=e[r];if(n){const{tempState:e}=n;e.viewedLeafCount=void 0,e.unviewedLeafCount=void 0,e.viewCount=void 0,e.viewOffset=void 0,n.isStale=!0}},playedStatusUpdateFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.viewedLeafCount=e.viewedLeafCount,e.viewedLeafCount=void 0,r.unviewedLeafCount=e.unviewedLeafCount,e.unviewedLeafCount=void 0,r.viewCount=e.viewCount,e.viewCount=void 0,r.viewOffset=e.viewOffset,e.viewOffset=void 0}},rateRequested(e,{payload:t}){const r=e[t.sourceURI];if(r){const{lastRatedAt:e,userRating:n,tempState:i}=r,s=-1===t.rating;i.lastRatedAt=e,i.userRating=n,r.lastRatedAt=s?void 0:Date.now(),r.userRating=s?void 0:t.rating}},rateSucceeded(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;e.lastRatedAt=void 0,e.userRating=void 0}},rateFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.lastRatedAt=e.lastRatedAt,e.lastRatedAt=void 0,r.userRating=e.userRating,e.userRating=void 0}},toggleWatchlistRequested(e,{payload:t}){const r=v(e,t.sourceURI),n=v(e,t.childSourceURI),i=v(e,t.grandchildSourceURI);if(r){const{watchlistedAt:e,tempState:n}=r;n.watchlistedAt=e,r.watchlistedAt=t.added?Date.now():void 0}if(n){const{parentWatchlistedAt:e,tempState:r}=n;r.parentWatchlistedAt=e,n.parentWatchlistedAt=t.added?Date.now():void 0}if(i){const{grandparentWatchlistedAt:e,tempState:r}=i;r.grandparentWatchlistedAt=e,i.grandparentWatchlistedAt=t.added?Date.now():void 0}},toggleWatchlistSucceeded(e,{payload:t}){const r=v(e,t.sourceURI),n=v(e,t.childSourceURI),i=v(e,t.grandchildSourceURI);if(r){const{tempState:e}=r;e.watchlistedAt=void 0,r.isStale=!0}if(n){const{tempState:e}=n;e.parentWatchlistedAt=void 0,n.isStale=!0}if(i){const{tempState:e}=i;e.grandparentWatchlistedAt=void 0,i.isStale=!0}},toggleWatchlistFailed(e,{payload:t}){const r=v(e,t.sourceURI),n=v(e,t.childSourceURI),i=v(e,t.grandchildSourceURI);if(r){const{tempState:e}=r;r.watchlistedAt=e.watchlistedAt,e.watchlistedAt=void 0}if(n){const{tempState:e}=n;n.parentWatchlistedAt=e.parentWatchlistedAt,e.parentWatchlistedAt=void 0}if(i){const{tempState:e}=i;i.grandparentWatchlistedAt=e.grandparentWatchlistedAt,e.grandparentWatchlistedAt=void 0}},toggleSavedRequested(e,{payload:t}){const r=e[t.sourceURI];if(r){const{saved:e,tempState:n}=r;n.saved=e,r.saved=t.saved}},toggleSavedSucceeded(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;e.saved=void 0,r.isStale=!0}},toggleSavedFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.saved=e.saved,e.saved=void 0}},streamSelectRequested(e,t){},streamSelectSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},streamSelectFailed(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},streamDeleteRequested(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStreamDeletePending=!0)},streamDeleteSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStreamDeletePending=!1,r.isStale=!0)},streamDeleteFailed(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStreamDeletePending=!1)},metadataProcessed(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},fetchRequested(e,{payload:t}){P(e,t.metadataItem.sourceURI)},fetchSucceeded(e,{payload:t}){I(e,t.sourceURI,t.metadataItemState)},fetchFailed(e,{payload:t}){E(e,t.sourceURI,t.error)},fetchCancelled(e,{payload:t}){w(e,t.sourceURI)},batchFetchRequested(e,{payload:t}){for(const r of t.metadataItems)P(e,r.sourceURI)},batchFetchSucceeded(e,{payload:t}){for(const r of Object.keys(t.metadataItemStatePerSourceResponse)){const n=t.metadataItemStatePerSourceResponse[r];n&&I(e,r,n)}},batchFetchFailed(e,{payload:t}){for(const r of Object.keys(t.metadataItemStatePerSourceError))E(e,r,t.metadataItemStatePerSourceError[r])},batchFetchCancelled(e,{payload:t}){for(const r of t.sourceURIs)w(e,r)},repopulateRequested(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},repopulateCanceled(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!1)},created(e,t){},deleted(e,{payload:t}){const r=e[t.sourceURI];r&&(r.deletedAt=Date.now(),r.isDeleted=!0)},preferenceChanged(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},addToLibraryRequested(e,t){},removeFromContinueWatchingRequested(e,t){},removeFromContinueWatchingSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)}},extraReducers:e=>{e.addCase(s.c.actions.added,((e,{payload:t})=>{S(e,t.metadataItemStates)})),e.addCase(s.c.actions.fetchRangeSucceeded,((e,{payload:t})=>{S(e,t.data.metadataItemStates)})),e.addCase(s.c.actions.fetchAllSucceeded,((e,{payload:t})=>{S(e,t.data.metadataItemStates)})),e.addCase(s.c.actions.repopulateRangeSucceeded,((e,{payload:t})=>{S(e,t.data.metadataItemStates)})),e.addCase(a.c.actions.removeViewsSucceeded,(e=>{Object.keys(e).forEach((t=>{const r=e[t];r&&(r.isStale=!0)}))}))}})},22140:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(91360);const s=function(e){return(0,n.M3)(i.c,(t=>(e?t[e]:null)||{tempState:{},isStale:!1,isPending:!1,isPopulated:!1,error:null}))}},91360:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.metadataItemState))},70944:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(93808),i=r(61636),s=r(74364),a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r};const d=[n.WW.Movie,n.WW.Show,n.WW.Episode,n.WW.Season];function u(e){var t,r=e,{server:n}=r,a=l(r,["server"]);if(!a.type)return!1;const o=d.includes(null!=(t=(0,i.c)(a.primaryGuid))?t:a.type);return!n.isCloud&&o&&(0,s.c)(a)}},74364:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(69956),i=r(93808),s=r(61636);const a=[i.WW.Movie,i.WW.Show,i.WW.Episode,i.WW.Season,i.WW.Artist,i.WW.Album,i.WW.Track];function o({type:e,sourceURI:t,primaryGuid:r,metadataItemState:i}){var o;if(!e||!t)return!1;const{isServer:c}=(0,n.c)(t),l=a.includes(null!=(o=(0,s.c)(r))?o:e);return!(c||!l||!1!==(null==i?void 0:i.isPending)||null!==(null==i?void 0:i.error)||!1!==(null==i?void 0:i.isPopulated)&&!(null==i?void 0:i.isStale))}},51304:(e,t,r)=>{"use strict";r.d(t,{cp:()=>d,qy:()=>l});var n=r(11504),i=r(69956),s=r(67532),a=r(48800),o=r(63756);const c=(0,n.createContext)({containerServer:o.c,containerProvider:a.c,containerSourceURI:"",containerKey:"",containerType:s.a.Mixed});function l(){return(0,n.useContext)(c)}function d({children:e,containerServer:t,containerProvider:r,containerSourceURI:s,containerKey:a,containerType:o,containerSubtype:l,containerMeta:d,listStyle:u}){const p=(0,n.useMemo)((()=>{let e=a;if(!e&&s){const{key:t}=(0,i.c)(s);e=t}return{containerServer:t,containerProvider:r,containerSourceURI:s,containerKey:e,containerType:o,containerSubtype:l,containerMeta:d,listStyle:u}}),[a,r,t,s,l,o,d,u]);return n.createElement(c.Provider,{value:p},e)}},6900:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(58660),s=r(88348),a=r(85868),o=r(76856),c=r(3008),l=r(59396),d=r(24752),u=r(87440),p=r(27876),m=r(72528),h=r(43196),y=r(29016);function g({className:e}){const t=(0,p.OY)(),r=(0,p.w1)((0,h.c)("columnWidthMultiplier")),[i,s]=(0,n.useState)(r),a=(0,n.useCallback)((({positionValue:e})=>{s(e)}),[]);return(0,n.useEffect)((()=>{const e=Math.round(10*i)/10;let n;return i!==r&&(n=window.setTimeout((()=>{t((0,m.SI)({columnWidthMultiplier:e}))}),100)),()=>window.clearTimeout(n)}),[r,t,i]),n.createElement(y.c,{className:e,label:(0,l.c)("Poster Size"),max:2,min:1,value:i,onChange:a})}var f=r(67532),v=r(81180),b=r(47036),S=r(33316);const P={empty:"MetadataListStylesMenu-empty-i9NJTz",slider:"MetadataListStylesMenu-slider-K6skGT Slider-slider-YdLxcK",stylesButton:"MetadataListStylesMenu-stylesButton-Biby3V Link-link-vSsQW1",stylesButtonWithArrow:"MetadataListStylesMenu-stylesButtonWithArrow-aIWTpL MetadataListStylesMenu-stylesButton-Biby3V Link-link-vSsQW1",stylesIcon:"MetadataListStylesMenu-stylesIcon-WDclrW"};function I({listStyles:e,selectedListStyle:t,onListStyleSelect:r}){const p=(0,v.c)(),m=(0,u.c)(),h=(0,n.useCallback)((e=>{p.onClose(),null==r||r(e)}),[p,r]),y=e.length>1,I=t===f.y.Grid||t===f.y.PrePlayGrid||t===f.y.Search,E=function(e){switch(e){case f.y.Details:case f.y.SimpleDetails:return s.default;case f.y.Table:return a.default;default:return o.default}}(t);return I||y?n.createElement(c.ye,{gap:"m",orientation:"horizontal",paddingLeft:"m",paddingRight:"s",shrink:!1,verticalAlign:"center"},I?n.createElement(g,{className:P.slider}):null,n.createElement(c.ye,{align:"left",minWidth:46,orientation:"horizontal",shrink:!1},y?n.createElement(n.Fragment,null,n.createElement(i._M,{accessibilityLabel:(0,l.c)("Show List Styles"),id:m,isOpen:p.isOpen,testID:"toolbarView",onPress:p.onToggle},n.createElement(E,{size:b.y.iconSize})),n.createElement(d.c,{isOpen:p.isOpen,target:m,onMenuClose:p.onClose},e.map((e=>{const r=function(e){switch(e){case f.y.Grid:case f.y.PrePlayGrid:return(0,l.c)("Grid View");case f.y.Details:case f.y.SimpleDetails:return(0,l.c)("Detail View");case f.y.Table:return(0,l.c)("Table View");default:return}}(e);return r?n.createElement(S.c,{key:e,isSelected:t===e,title:r,value:e,onSelect:h},r):null})))):n.createElement(E,{size:b.y.iconSize}))):n.createElement("div",{className:P.empty})}},11822:(e,t,r)=>{"use strict";r.d(t,{c:()=>O,y:()=>E});var n=r(44212),i=r(4992),s=r(50632),a=r(93808),o=r(67532),c=r(85712),l=r(31932),d=r(99356),u=r(16768),p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var y=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&P(e,r,t[r]);if(v)for(var r of v(t))S.call(t,r)&&P(e,r,t[r]);return e};const E=(0,s.c)(((e,t)=>e[t.sourceURI]),(({server:e,provider:t,data:r})=>{var n,i,s,y,g;const f=null!=(n=null==r?void 0:r.MediaContainer)?n:{},{Metadata:v=[],Directory:b}=f,S=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(f,["Metadata","Directory"]),P=t?(0,l.c)(t,String(S.librarySectionID)):void 0;null==(s=null==(i=null==S?void 0:S.Meta)?void 0:i.Type)||s.forEach((e=>{e.type===o.a.Movie&&(null==P?void 0:P.agent)===c.wz.None&&null==e.subtype&&(e.subtype=a.GO.Clip)}));const{metadataItems:I,metadataItemStates:E}=(0,u.c)({server:e,provider:t,data:null!=b?b:v,container:S});return{items:I,totalSize:null!=(y=null==S?void 0:S.totalSize)?y:0,size:null==S?void 0:S.size,offset:null!=(g=null==S?void 0:S.offset)?g:0,meta:(0,d.c)(null==S?void 0:S.Meta),title:null==S?void 0:S.title,metadataItemStates:E}}));var w,C;const O=(0,n.is)({name:"metadataLists",initialState:{},reducers:(w=I({},E.reducers),C={added(e,{payload:t}){t.metadataLists.forEach((t=>{e[t.sourceURI]&&e[t.sourceURI].isPopulated||(e[t.sourceURI]=I(I({},E.getDefaultPaginatedState()),t))}))},throttledRepopulateRequested(e,t){}},g(w,f(C))),extraReducers(e){e.addCase(i.c.actions.resetHubs,((e,{payload:t})=>{const{sourceURI:r}=t;Object.keys(e).forEach((t=>{t.startsWith(r)&&delete e[t]}))}))}})},67532:(e,t,r)=>{"use strict";r.d(t,{a:()=>n,y:()=>i});var n=(e=>(e.Album="album",e.Artist="artist",e.Author="author",e.Audiobook="audiobook",e.Availability="availability",e.Channel="channel",e.Channels="channels",e.Chapter="chapter",e.Content="content",e.Clip="clip",e.Collection="collection",e.Directory="directory",e.Episode="episode",e.Extra="extra",e.Folder="folder",e.Hub="hub",e.Mixed="mixed",e.Movie="movie",e.MusicVideo="musicVideo",e.Person="person",e.Photo="photo",e.PhotoAlbum="photoalbum",e.Playlist="playlist",e.Season="season",e.Show="show",e.Station="station",e.Track="track",e))(n||{}),i=(e=>(e.AvailabilityPlatforms="availabilityPlatforms",e.Button="button",e.CreditSource="creditSource",e.Details="details",e.Folder="folder",e.Grid="grid",e.Hero="hero",e.List="list",e.PrePlayGrid="prePlayGrid",e.Search="search",e.SharedItems="sharedItems",e.Shelf="shelf",e.ShowTracking="showTracking",e.SimpleDetails="simpleDetails",e.Spotlight="spotlight",e.Table="table",e.TrackDetails="trackDetails",e.Upsell="upsell",e.WideShelf="wideShelf",e))(i||{})},2708:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=function(e){return(0,n.M3)(i.c,(t=>t.metadataLists[e]))}},3088:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.metadataLists))},12696:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(4388),i=r(21940),s=r(7268),a=r(53753),o=r(95156),c=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r};const y=parseInt(o.c.v4PagePadding,10),g=parseInt(o.c.v4CardTitleHeight,10),f=parseInt(o.c.v4CardTitleGap,10),v=parseInt(o.c.gapMedium,10);function b(e){var t=e,{listType:r,subtype:o,listStyle:c,displayFields:l,displayImages:d,columnWidth:u,activeFilterRules:p}=t,b=h(t,["listType","subtype","listStyle","displayFields","displayImages","columnWidth","activeFilterRules"]);const S=(0,a.c)(r,o,d),P=(0,n.cp)(r,o,{listStyle:c,displayImageType:S}),I=b.titleCount?b.titleCount:(0,i.c)(r,o,{activeFilterRules:p,listStyle:c,displayFields:l}),E=I?g*I+f:0,w=P===n.cr?2*u+v:u,C=Math.floor(w/P+E);return(0,s.c)(m({direction:s.S.Vertical,getCellWidth:()=>w,getCellHeight:()=>C,innerHorizontalPadding:v,innerVerticalPadding:v,overscan:1,outerPaddingRight:y,outerPaddingLeft:y},b))}},67604:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(4388),i=r(21940),s=r(76772),a=r(53753),o=r(95156),c=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r};const y=parseInt(o.c.v4PagePadding,10),g=parseInt(o.c.v4CardTitleHeight,10),f=parseInt(o.c.v4CardTitleGap,10),v=parseInt(o.c.v4CardShadowSize,10),b=parseInt(o.c.gapMedium,10);function S(e){var t=e,{listType:r,subtype:o,listStyle:c,displayFields:l,displayImages:d,columnWidth:u}=t,p=h(t,["listType","subtype","listStyle","displayFields","displayImages","columnWidth"]);const S=(0,a.c)(r,o,d),P=(0,n.cp)(r,o,{listStyle:c,displayImageType:S}),I=p.titleCount?p.titleCount:(0,i.c)(r,o,{listStyle:c,displayFields:l});let E=u;P===n.cr&&(E=2*u+b);const w=0!==I?g*I+f:0;return(0,s.c)(m({columnWidth:E,aspectRatio:P,titleHeight:w,innerHorizontalPadding:b,outerPaddingTop:v,outerPaddingRight:y,outerPaddingBottom:v,outerPaddingLeft:y},p))}},5396:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(93808),i=r(40376);const s=function(e){const t=(0,i.uw)(n.WW).find((([,t])=>t===e));return t?n.WW[t[0]]:void 0}},82598:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(67532);const i=function(e){switch(e){case n.a.Hub:case n.a.Directory:case n.a.Content:case n.a.Channel:return!0;default:return!1}}},39604:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(76780);function s(e,t){let r=e[t];return r||(r={},e[t]=r),r}const a=(0,n.is)({name:"metadataTimelineState",initialState:{},reducers:{metadataRefreshRequested(e,{payload:t}){const r=s(e,t.sourceURI);r.metadataState||(r.metadataState=i.A.Queued)},metadataRefreshFailed(e,{payload:t}){const r=s(e,t.sourceURI);(null==r?void 0:r.mediaState)?r.metadataState=void 0:delete e[t.sourceURI]},mediaAnalysisRequested(e,{payload:t}){if(!t.hasChildren){const r=s(e,t.sourceURI);r.mediaState||(r.mediaState=i.K.Analyzing)}},mediaAnalysisFailed(e,{payload:t}){const r=s(e,t.sourceURI);(null==r?void 0:r.metadataState)?r.mediaState=void 0:delete e[t.sourceURI]},timelineStatesChanged(e,{payload:t}){const r=s(e,t.sourceURI);t.metadataState||t.mediaState?(r.metadataState=t.metadataState,r.mediaState=t.mediaState):delete e[t.sourceURI]}}})},76780:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,K:()=>i});var n=(e=>(e.Queued="queued",e.Matching="matching",e.Processing="processing",e.Loading="loading",e))(n||{}),i=(e=>(e.Analyzing="analyzing",e.Thumbnailing="thumbnailing",e))(i||{})},39460:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(27876),i=r(9248),s=r(35860),a=r(34992);const o=function(){const{communityProvider:e}=(0,n.w1)(a.c);let t=s.tE.Production;return e===i.G.Development?t=s.tE.Development:e===i.G.Staging&&(t=s.tE.Staging),t}},85712:(e,t,r)=>{"use strict";r.d(t,{Aj:()=>i,Cg:()=>s,IL:()=>a,M$:()=>u,OG:()=>c,QJ:()=>n,Qf:()=>o,Y1:()=>d,kF:()=>p,wz:()=>l});var n=(e=>(e.Download="download",e.LiveTV="livetv",e.Stream="stream",e))(n||{}),i=(e=>(e.Action="action",e.Actions="actions",e.Collection="collection",e.Content="content",e.ContinueWatching="continuewatching",e.Grid="grid",e.ImageTranscoder="imagetranscoder",e.Integrations="integrations",e.Lineups="lineups",e.Location="location",e.Manage="manage",e.Match="match",e.Metadata="metadata",e.Playlist="playlist",e.PlayQueue="playqueue",e.Promoted="promoted",e.QueryParser="queryParser",e.Rate="rate",e.Search="search",e.Settings="settings",e.Subscribe="subscribe",e.Timeline="timeline",e.Universal="universal",e.UniversalSearch="universalsearch",e.ZeroState="zeroState",e))(i||{}),s=(e=>(e.Download="download",e.Record="record",e.Universal="universal",e))(s||{}),a=(e=>(e.AddToWatchlist="addToWatchlist",e.Pick="pick",e.Rate="rate",e.RemoveFromContinueWatching="removeFromContinueWatching",e.RemoveViews="removeViews",e.Save="save",e.Scrobble="scrobble",e))(a||{}),o=(e=>(e.Hub="hub",e.List="list",e.View="view",e))(o||{}),c=(e=>(e.Home="view://home",e.HomeTrending="view://home/trending",e.HomeActivity="view://home/activity",e.HomeFindFriends="view://home/find-friends",e.HomeProfile="view://home/profile",e.RecordingSchedule="view://dvr/recording-schedule",e.Guide="view://dvr/guide",e.Timeline="view://photo/timeline",e.SharedItems="view://shared-items",e.HomeRecommended="view://home/recommended",e.HomeWatchlist="view://home/watchlist",e.DiscoverFriends="view://discover/friends",e.DiscoverProfile="view://discover/profile",e.DiscoverActivity="view://discover/activity",e.DiscoverPeople="view://discover/people",e))(c||{}),l=(e=>(e.Freebase="com.plexapp.agents.freebase",e.IMDB="com.plexapp.agents.imdb",e.LastFM="com.plexapp.agents.lastfm",e.Lyricfind="com.plexapp.agents.lyricfind",e.None="com.plexapp.agents.none",e.PlexMovie="tv.plex.agents.movie",e.PlexMusic="tv.plex.agents.music",e.PlexPremiumMusic="com.plexapp.agents.plexmusic",e.TheMovieDB="com.plexapp.agents.themoviedb",e.TheTVDB="com.plexapp.agents.thetvdb",e))(l||{}),d=(e=>(e.Home="home",e.Movies="movies",e))(d||{}),u=(e=>(e.IncludeMetadataInSearch="includeMetadataInSearch",e))(u||{}),p=(e=>(e.Search="search",e.Watchlist="watchlist",e))(p||{})},17464:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(35860),s=r(27884);const a=(0,r(87512).c)((function(e,t){return(0,n.M3)(s.c,(r=>r.find((r=>i._u(r.identifier,e,t)))))}))},80948:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(85712),s=r(4644),a=r(87512),o=r(31636);const c=(0,a.c)((function(e,t){return(0,n.M3)((0,o.c)(e,t),(e=>{var t;const r=(0,s.c)(e,i.Aj.Content);return null!=(t=null==r?void 0:r.directories)?t:[]}))}))},8396:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(87512),s=r(80948);const a=(0,i.c)((function(e,t,r){return(0,n.M3)((0,s.c)(e,t),(e=>e.find((e=>r===e.id))))}))},31636:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(92076),s=r(29632),a=r(48800),o=r(46248);const c=(0,r(87512).c)((function(e,t){return(0,n.M3)(i.c,(0,o.c)(e),(0,s.c)("providers"),((e,r,n)=>{const i=(!r||r.isCloud?n:r.providers).find((r=>e[r].identifier===t));return i?e[i]:a.c}))}))},5632:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(46028),s=r(27884);const a=(0,n.M3)(s.c,(e=>e.map((e=>e.identifier)).sort())),o=(0,i.c)(a,(e=>e))},27884:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(92076),s=r(8436);const a=(0,n.M3)(s.c,(e=>e.providers)),o=(0,n.M3)(a,i.c,((e,t)=>e.map((e=>t[e]))))},87616:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(35860),s=r(27884);const a=(0,n.M3)(s.c,(e=>e.find((e=>e.identifier===i.Im))))},72139:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(37660),i=r(35860),s=r(93808),a=r(85712),o=r(31932),c=r(4644);function l({provider:e,librarySectionID:t,librarySectionKey:r,isPlaylist:l}){var d,u;const p=(0,c.c)(e,a.Aj.Content);if(!p)return;return(0,o.c)(e,t)||(i._u(e.identifier,i.Im)?(0,o.c)(e,n.qU):e.protocols.includes(a.QJ.LiveTV)?null==(d=p.directories)?void 0:d.find((e=>r?e.key===r:e.hubKey&&!e.key)):l?null==(u=p.directories)?void 0:u.find((e=>e.type===s.WW.Playlist)):void 0)}},31932:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85712),i=r(4644);function s(e,t){var r;const s=(0,i.c)(e,n.Aj.Content);if(s&&t)return null==(r=s.directories)?void 0:r.find((e=>(null==e?void 0:e.id)===t))}},33204:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(42728),i=r(85712);function s(e,t,r){var s,a;if(t===i.IL.Pick&&!r.features[n.w5])return;if(t===i.IL.RemoveFromContinueWatching&&!r.features[n.jQ])return;const o=null==(s=e.features)?void 0:s.find((e=>e.type===i.Aj.Actions));return null==(a=null==o?void 0:o.actions)?void 0:a.find((e=>e.id===t))}},4644:(e,t,r)=>{"use strict";function n(e,t,r){return e.features.find((e=>e.type===t&&(!r||e.flavor===r)))}r.d(t,{c:()=>n})},78168:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(30496);function s(e){return n._u((0,i.c)(e.identifier,e.providerIdentifier),[n.$9,n._0])}},50032:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(30496);function s(e){return n._u((0,i.c)(e.identifier,e.providerIdentifier),n.Qh)}},48800:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={entityID:"",identifier:"",metricsIdentifier:"",title:"",features:[],protocols:[],isPending:!1,isPopulated:!1,error:null}},66576:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(16512),s=r(27876),a=r(21040);function o(){return{cursor:(0,n.useRef)(),hasNextPage:(0,n.useRef)(!1),state:(0,n.useState)()}}function c(e){return e.reduce(((e,t)=>t?e+1:e),0)}var l=r(97776),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function f(e,{key:t,skip:r,args:d,totalSize:u,fetchSize:p=15,scrollBehavior:m="Down",selector:h=(()=>({isLoading:!1,isUninitialized:!1})),transformResponse:f}){const v=(0,n.useRef)(f),b=(0,n.useRef)(d),S=(0,n.useRef)(!1),[P,I]=(0,n.useState)(u?new Array(u):void 0),{cursor:E,hasNextPage:w}=o(),{cursor:C,hasNextPage:O}=o(),[M,T]=(0,n.useState)(m),D=(0,a.c)(M),[k,{error:x,isFetching:A,originalArgs:R}]=e.useLazyQuery(),[N,L]=function(e){const[t,r]=(0,n.useState)(!1),{isUninitialized:i,fulfilledTimeStamp:o,isLoading:c,data:l}=(0,s.w1)(e),d=(0,n.useRef)(!1),u=(0,a.c)(i);return(0,n.useEffect)((()=>{void 0!==u&&!u&&i&&r(!0)}),[i,u]),(0,n.useEffect)((()=>{o&&c&&(d.current=!0)}),[o,c]),(0,n.useEffect)((()=>{l&&d.current&&!c&&(r(!0),d.current=!1)}),[l,c]),[t,(0,n.useCallback)((()=>{r(!1)}),[])]}(h),{isWaitingToRestoreItems:j,itemsCount:U,onItemsChange:F}=function({key:e,skip:t}){const r=(0,l.c)(e),s=(0,n.useRef)(null),[a,o]=(0,n.useState)(!t&&!!i.c.get(r)),[c,d]=(0,n.useState)(),u=(0,n.useCallback)((e=>{s.current=e}),[]),p=(0,n.useCallback)((e=>{t||(s.current=e,d(e))}),[t]);return(0,n.useEffect)((()=>(a&&d(i.c.get(r)),()=>{const e=s.current;s.current=null,e&&!t&&i.c.set(r,e)})),[a,t,r]),(0,n.useEffect)((()=>{void 0!==c&&o(!1)}),[c]),{isWaitingToRestoreItems:a,itemsCount:null!=c?c:0,onItemsChange:u,onImmediateItemsChange:p}}({key:null!=t?t:"",skip:!t}),V=(0,n.useCallback)((e=>"Up"===M?{last:p,before:e}:{first:p,after:e}),[p,M]),_=(0,n.useCallback)(((e=!0)=>g(this,null,(function*(){const r=new Array(null!=u?u:0);let n,s=0,a=!0;const o=Date.now();for(;a;){const{data:c,fulfilledTimeStamp:l}=yield k(y(y({},V(n)),b.current),e);if(!c)return void(a=!1);const{data:d,endCursor:u,hasPreviousPage:m,hasNextPage:h,startCursor:g}=v.current(c);"Up"===M?(n=g,O.current=!!m):(w.current=!!h,n=u),r.splice("Up"===M?r.length-d.length-s:s,d.length,...d),s+=d.length,e&&!(l&&o>l)&&t&&U>s+p&&(a=!1,i.c.set(t,0)),(!("Up"===M?O.current:w.current)||s>=U)&&(a=!1)}"Up"===M?C.current=n:E.current=n,I(r),S.current=!0}))),[E,k,p,V,w,O,U,t,M,C,u]),W="Up"===M?O.current:w.current,B=(0,n.useCallback)((()=>{!A&&W&&k(y(y({},V("Up"===M?C.current:E.current)),b.current),!0).then((({data:e})=>{if(!e)return;const{data:t,endCursor:r,startCursor:n,hasNextPage:i,hasPreviousPage:s}=v.current(e);"Up"===M?(C.current=n,O.current=!!s):(w.current=!!i,E.current=r),I((e=>{if(!e)return t;const r=c(e),n=[...e];return n.splice("Up"===M?n.length-t.length-r:r,t.length,...t),n}))}))}),[E,k,V,w,O,A,M,C,W]),H=(0,n.useCallback)(((e,t)=>{I((r=>null==r?void 0:r.filter((r=>t(r)!==e))))}),[]),z=(0,n.useCallback)((e=>{I((t=>[...null!=t?t:[],e]))}),[]),G=(0,n.useCallback)(((e,t,r)=>{I((n=>{const i=null==n?void 0:n.findIndex((t=>r(t)===e));return n&&i&&i>=-1&&(n[i]=t),n}))}),[]),q=(0,n.useCallback)(((e,t)=>{var r;t&&(w.current=t.hasNextPage,E.current=null!=(r=t.endCursor)?r:void 0),I(e)}),[E,w]),K=(0,n.useCallback)((()=>{_(!1)}),[_]),Q=(0,n.useMemo)((()=>u?P?c(P):0:P?P.length+Number(w.current):0),[w,P,u]);return(0,n.useEffect)((()=>{S.current||j||r||(E.current=void 0,C.current=void 0,_())}),[E,_,S,j,r,C]),(0,n.useEffect)((()=>{P&&F(c(P))}),[P,F]),(0,n.useEffect)((()=>{N&&(E.current=void 0,C.current=void 0,_(),L())}),[E,_,N,L,C]),(0,n.useEffect)((()=>{T(m)}),[m]),(0,n.useEffect)((()=>{D&&D!==M&&(I(new Array(u)),_(!1))}),[u,M,D,_]),{data:P,isLoading:!P&&A,isPopulated:!!P,totalSize:Q,error:x,scrollBehavior:M,isNextPageAvailable:W,cursor:"Up"===M?null==R?void 0:R.before:null==R?void 0:R.after,update:G,insert:z,remove:H,replace:q,getNextPage:B,refetch:K,setScrollerBehavior:T}}},57512:(e,t,r)=>{"use strict";r.d(t,{m:()=>m});var n=r(65392),i=r(42368),s=r(3972),a=r(96732),o=r(56632),c=r(54952),l=r(36048),d=r(97503),u=r(53636),p=r(42836);const m=(0,n.KS)({reducerPath:"query",tagTypes:[o.MB.GetActivityFeed,o.MB.GetActivityById,o.MB.RefreshGetActivityFeed,l.gK.GetWatchHistoryHub,l.gK.GetUserDetails,l.gK.GetRatingsHub,l.gK.GetUserStatistics,s.O.ReceivedFriendsRequests,s.O.SentFriendsRequests,s.O.FriendSuggestions,s.O.GetFriends,s.O.ReceivedFriendRequestCount,s.O.SentFriendRequestCount,p.J.UserSearch,u._.MutedUsers,u._.BlockedUsers,c.E.GetComments,d.B.GetReportedIssues,d.B.GetReportComments],baseQuery:(0,i.K)({client:a.k$,prepareHeaders:a.Wi,customErrors:e=>{return{message:null!=(i=null!=(n=(t=e).response.error)?n:null==(r=t.response.errors)?void 0:r[0].message)?i:t.message,name:t.name,stack:t.stack};var t,r,n,i}}),endpoints:()=>({})})},30708:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(57512);const s=(0,n.M3)((function(e){return function(e){return!!e.v4}(e)?e.v4[i.m.reducerPath]:e[i.m.reducerPath]}),(e=>e.provided))},42452:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(93564);const s=(0,n.M3)(i.c,(e=>e.core))},41267:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>t.serverAccounts[e]))}))},96744:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(44212),i=r(59936),s=r(45372),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u={accounts:[],isPending:!1,isPopulated:!1,error:null},p=(0,n.is)({name:"serverAccounts",initialState:{},reducers:{populateRequested(e,t){},fetchRequested(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.G8)(r)},fetchSucceeded(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.mM)(r),r.accounts=t.data},fetchFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.C)(r,t.error)}},extraReducers:e=>{e.addCase(i.c.actions.connectionChanged,((e,{payload:t})=>{const{server:r}=t;r.isConnected&&!e[r.machineIdentifier]&&(e[r.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},u))}))}})},41284:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(27876),s=r(88116);function a(e,t){const r=(0,n.useMemo)((()=>t?(0,s.c)(e,t):()=>{}),[t,e]);return!!(0,i.w1)(r)||!!(null==t?void 0:t.refreshing)}},15252:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(66308),s=r(26932);const a=function(e,t){return(0,n.M3)((0,s.c)(e),(e=>e.find((e=>e.type===i.K&&e.Context.identifier===t.identifier))))}},88116:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(66308),s=r(26932);const a=function(e,t){return(0,n.M3)((0,s.c)(e),(e=>e.find((e=>e.type===i.Q9&&e.Context.librarySectionID===t.id))))}},26932:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(46248);const s=(0,r(87512).c)((function(e){return(0,n.M3)((0,i.c)(e.machineIdentifier),(e=>{var t,r;return null!=(r=null==(t=null==e?void 0:e.desktop)?void 0:t.activities)?r:[]}))}))},81996:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(44212),i=r(59936);const s=(0,n.is)({name:"serverActivities",initialState:{},reducers:{activityStarted(e,t){},activityUpdated(e,t){},activityFinished(e,t){}},extraReducers:e=>{e.addCase(i.c.actions.connectionChanged,((e,{payload:t})=>{const{server:r}=t;r.isConnected&&!e[r.machineIdentifier]&&(e[r.machineIdentifier]=[])}))}})},74904:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var n=(e=>(e.BackupDatabase="general.db.backup",e.CleanBundles="general.bundle.clean",e.GrabberGrab="grabber.grab",e.GrabberAssimilate="grabber.assimilate",e.LibraryDelete="library.delete",e.LibraryUpdateSection="library.update.section",e.LibraryRefreshItems="library.refresh.items",e.MediaGenerateBIF="media.generate.bif",e.MediaGenerateChapterThumbs="media.generate.chapter.thumbs",e.MediaGenerateIntros="media.generate.intros",e.MediaGenerateLoudness="media.generate.loudness",e.OptimizeDatabase="general.db.optimize",e.ProviderDeviceChannelScan="provider.device.channelscan",e.ProviderEpgLineupScan="provider.epg.lineupscan",e.ProviderEpgLoad="provider.epg.load",e.ProviderSubscriptionsProcess="provider.subscriptions.process",e.ProviderSubscriptionRefresh="provider.subscription.refresh",e.SubtitleDownload="subtitle.download",e))(n||{})},64752:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(44212),i=r(45372),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};const u={isPending:!1,isPopulated:!1,error:null,isSharing:!1,inviteToken:""},p=(0,n.is)({name:"serverDetails",initialState:{},reducers:{fetchServerDetails(e,{payload:t}){e[t.machineIdentifier]||(e[t.machineIdentifier]=d({},u)),(0,i.G8)(e[t.machineIdentifier])},fetchServerDetailsSucceeded(e,{payload:t}){(0,i.mM)(e[t.machineIdentifier]),e[t.machineIdentifier].detail=t.details},fetchServerDetailsFailed(e,{payload:t}){(0,i.C)(e[t.machineIdentifier],t.error)},shareLibraries(e,{payload:t}){e[t.machineIdentifier].isSharing=!0,e[t.machineIdentifier].error=null,e[t.machineIdentifier].inviteToken=""},shareLibrariesSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].inviteToken=t.inviteToken},shareLibrariesFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error},updateLibraries(e,{payload:t}){e[t.machineIdentifier].isSharing=!0,e[t.machineIdentifier].error=null,e[t.machineIdentifier].inviteToken=""},updateLibrariesSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1},updateLibrariesFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error},deleteSharedServer(e,{payload:t}){e[t.machineIdentifier]||(e[t.machineIdentifier]=d({},u)),e[t.machineIdentifier].isSharing=!0,e[t.machineIdentifier].error=null,e[t.machineIdentifier].inviteToken=""},deleteSharedServerSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1},deleteSharedServerFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error},shareItemSource(e,{payload:t}){e[t.machineIdentifier]||(e[t.machineIdentifier]=d({},u)),e[t.machineIdentifier].error=null,e[t.machineIdentifier].isSharing=!0},shareItemSourceSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].inviteToken=t.inviteToken},shareItemSourceFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error},clearErrors(e,{payload:t}){t.identifiers.forEach((t=>{e[t].error=null}))}}})},66844:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>t.serverDevices[e]))}))},31004:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(44212),i=r(59936),s=r(45372),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u={devices:[],isPending:!1,isPopulated:!1,error:null},p=(0,n.is)({name:"serverDevices",initialState:{},reducers:{populateRequested(e,t){},fetchRequested(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.G8)(r)},fetchSucceeded(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.mM)(r),r.devices=t.data},fetchFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.C)(r,t.error)}},extraReducers:e=>{e.addCase(i.c.actions.connectionChanged,((e,{payload:t})=>{const{server:r}=t;r.isConnected&&!e[r.machineIdentifier]&&(e[r.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},u))}))}})},90368:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>t.serverNowPlayingSessions[e]))}))},34956:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(44212),i=r(58938),s=r(38828),a=r(59936),o=r(45372),c=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e,t){const{isCloud:r,isConnected:n,isEmbedded:a,isFullOwnedServer:o,isFullServer:c,isUnauthorized:l,isUnavailable:d}=t,u={extra:{isCloud:r,isConnected:n,isEmbedded:a,isFullOwnedServer:o,isFullServer:c,isUnauthorized:l,isUnavailable:d}},p=new Error(e);s.c.error(p,u.extra),i.wx(p,u)}const h={sessionKeys:[],sessionsByKey:{},isPending:!1,isPopulated:!1,error:null,stopSessionError:null},y=(0,n.is)({name:"serverNowPlayingSessions",initialState:{},reducers:{fetchRequested(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(0,o.G8)(r)},fetchSucceeded(e,{payload:t}){const r=e[t.server.machineIdentifier];if(!r)return;const{sessionKeys:n,sessionsByKey:i}=t.data.reduce(((e,t)=>(e.sessionKeys.push(t.sessionKey),e.sessionsByKey[t.sessionKey]=t,e)),{sessionKeys:[],sessionsByKey:{}});(0,o.mM)(r),r.sessionKeys=n,r.sessionsByKey=i},fetchFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(0,o.C)(r,t.error)},sessionChanged(e,{payload:t}){const{server:r,message:n}=t,i=e[r.machineIdentifier];if(!i)return void m("Session changed without serverState",r);const s=i.sessionsByKey[n.sessionKey];s&&s.key===n.key&&(s.viewOffset=n.viewOffset,s.Player.state=n.state)},sessionStopped(e,{payload:t}){const{server:r,sessionKey:n}=t,i=e[r.machineIdentifier];i?i.sessionsByKey[n]&&(delete i.sessionsByKey[n],i.sessionKeys.splice(i.sessionKeys.indexOf(n),1)):m("Session stopped without serverState",r)},stopRequested(e,t){},stopFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(r.stopSessionError=t.error)},stopErrorDismissed(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(r.stopSessionError=null)}},extraReducers:e=>{e.addCase(a.c.actions.connectionChanged,((e,{payload:t})=>{const{server:r}=t;r.isConnected&&!e[r.machineIdentifier]&&(e[r.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},h))}))}})},52513:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(42452),s=r(54192),a=r(73980);const o=(0,r(87512).c)((function(e,t){const r=t?(0,a.c)(e,t):"";return(0,n.M3)(i.c,(e=>e.serverSections[r]||s.oH))}))},54192:(e,t,r)=>{"use strict";r.d(t,{cp:()=>p,oH:()=>u});var n=r(44212),i=r(73980),s=r(45372),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u={isPending:!1,isPopulated:!1,error:null,settings:[]},p=(0,n.is)({name:"serverSections",initialState:{},reducers:{fetchServerSectionSettings(e,{payload:t}){const r=(0,i.c)(t.server.machineIdentifier,t.librarySectionID);e[r]||(e[r]=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},u)),(0,s.G8)(e[r])},fetchServerSectionSettingsSucceeded(e,{payload:t}){const r=(0,i.c)(t.machineIdentifier,t.librarySectionID);(0,s.mM)(e[r]),e[r].settings=t.settings},fetchServerSectionSettingsFailed(e,{payload:t}){const r=(0,i.c)(t.machineIdentifier,t.librarySectionID);(0,s.C)(e[r],t.error)}}})},73980:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t){return`${e}-${t}`}},37984:(e,t,r)=>{"use strict";r.d(t,{c$:()=>u,cp:()=>p});var n=r(11504),i=r(27876),s=r(8396),a=r(31636),o=r(48800),c=r(4668),l=r(63756);const d=(0,n.createContext)([l.c,o.c,void 0,void 0]);function u(){return(0,n.useContext)(d)}function p({machineIdentifier:e,providerIdentifier:t,contentDirectoryID:r,selectedPivot:o,children:l}){const u=(0,i.w1)((0,c.c)(e)),p=(0,i.w1)((0,a.c)(e,t)),m=(0,i.w1)((0,s.c)(e,t,r)),h=(0,n.useMemo)((()=>[u,p,m,o]),[u,p,m,o]);return n.createElement(d.Provider,{value:h},l)}},64156:(e,t,r)=>{"use strict";r.d(t,{cp:()=>U,kV:()=>j,A7:()=>L});var n=r(27876),i=r(77224),s=r(98476),a=r(96504),o=r(57864),c=r(44768),l=r(85712),d=r(31636),u=r(4644),p=r(46248),m=r(4668),h=r(87512),y=Object.defineProperty,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const S=(0,h.c)((function(e,t,r,n){return r?(0,o.M3)((0,m.c)(e),function(e){return(0,o.M3)((0,p.c)(e),(e=>{var t;return null==(t=null==e?void 0:e.activeConnection)?void 0:t.uri}))}(e),(0,d.c)(e,t),((e,t,i)=>{var s;let o,d,p="/photo/:/transcode",m=!1,h=!1;if(!t)return;if(i){const e=(0,u.c)(i,l.Aj.ImageTranscoder);(null==e?void 0:e.key)&&(p=e.key,m=(0,c.c)(p),h=!!e.public)}if(o=m?null!=(s=i.baseURL)?s:t:"",(0,c.c)(r))d=r;else{const t=((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e})({"X-Plex-Token":e.accessToken},n);d=a.c.join([o,r],t)}const y=m?p:[t,p];return a.c.join(y,{url:d,"X-Plex-Token":h?void 0:e.accessToken})})):()=>{}}));var P=r(3852),I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&T(e,r,t[r]);if(C)for(var r of C(t))M.call(t,r)&&T(e,r,t[r]);return e},k=(e,t)=>E(e,w(t)),x=(e,t)=>{var r={};for(var n in e)O.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&C)for(var n of C(e))t.indexOf(n)<0&&M.call(e,n)&&(r[n]=e[n]);return r};const A={},R={},N=[s.es,s._A,s.sZ,s.WC,s.io,s.kb,s.Oi,s.CM].sort(((e,t)=>L(e)-L(t)));function L(e){if(R.hasOwnProperty(e))return R[e];const t=parseInt(e.split("-")[1],10);return R[e]=t,t}function j(e){if(A.hasOwnProperty(e))return A[e];const t=N.find((t=>L(t)>=e))||N[N.length-1];return A[e]=t,t}function U(e){var t=e,{server:r,provider:s,url:o}=t,c=x(t,["server","provider","url"]);return function(e,t){if(!e)return;const r=Object.assign(function(e){const{allowPixelRatioSize:t=!0,minSize:r=!0,upscale:n=!0}=e,s=t?(0,i.c)():1,a="size"in e?e.size:j(e.width);if(e.supportsSize)return{size:a,scale:Math.ceil(s)};{(0,P.c)(!("size"in e)&&null!=e.height,"Both width and height required");const t=L(a),i=e.height/e.width;return{width:Math.ceil(t*s),height:Math.ceil(i*t*s),minSize:r?1:void 0,upscale:n?1:void 0}}}(t),t.filters);t.format&&(r.format=t.format),t.quality&&(r.quality=t.quality);const n=e.indexOf("?");let s=e;return n>-1?(s=a.c.join(e.substring(0,n),r),s+=-1===s.indexOf("?")?"?":"&",s+=e.substring(n+1)):s=a.c.join(s,r),s}((0,n.w1)(S(r.machineIdentifier,null==s?void 0:s.identifier,o)),k(D({},c),{supportsSize:r.isCloud&&!!s}))}},43964:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(70068),s=r(4668),a=r(33176);const o=function(e){return(0,n.M3)((0,s.c)(e),a.c,i.c,((t,{users:r},n)=>{if(!t.isShared)return n.thumb;let i;return Object.keys(r).forEach((t=>{r[t].sharedServers.find((t=>t.machineIdentifier===e))&&(i=r[t].user.thumb)})),i}))}},4668:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(12488),s=r(63756),a=r(87512),o=r(66912);const c=(0,a.c)((function(e){return(0,i.c)((0,n.M3)(o.c,(t=>t.find((t=>t.machineIdentifier===e))||s.c)),(e=>e))}))},46248:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(13148),s=r(63756);const a=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>t.find((t=>t.machineIdentifier===e))||s.c))}))},34908:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(46028),s=r(66912);const a=(0,i.c)((0,n.M3)(s.c,(e=>e.filter((e=>e.version&&(e.isFullOwnedServer||e.isShared))))),(e=>e))},29164:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(89064);const i=(0,r(4668).c)(n.A)},66912:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(12488),s=r(13148),a=r(11695);const o=(0,i.c)((0,n.M3)(s.c,(e=>e.map(a.c))),(e=>e))},59936:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(44212).is)({name:"servers",initialState:{},reducers:{connectionChanged(e,t){},libraryScanUpdated(e,t){}}})},15892:(e,t,r)=>{"use strict";r.d(t,{a:()=>i,y:()=>n});var n=(e=>(e.Windows="Windows",e.Android="Android",e.Linux="Linux",e.FreeBSD="FreeBSD",e.MacOSX="MacOSX",e.IOS="iOS",e))(n||{}),i=(e=>(e.Pending="pending",e.Connected="connected",e.Unavailable="unavailable",e.Unauthorized="unauthorized",e))(i||{})},11695:(e,t,r)=>{"use strict";function n(e){return{entityID:e.entityID,machineIdentifier:e.machineIdentifier,accessToken:e.accessToken,uri:e.activeConnection?e.activeConnection.uri:void 0,version:e.version,platform:e.platform,friendlyName:e.friendlyName,sourceTitle:e.sourceTitle,countryCode:e.countryCode,allowSync:e.allowSync,allowMediaDeletion:e.allowMediaDeletion,backgroundProcessing:e.backgroundProcessing,transcoderVideo:e.transcoderVideo,isCloud:e.isCloud,isEmbedded:e.isEmbedded,isFullServer:e.isFullServer,isFullOwnedServer:e.isFullOwnedServer,isOutOfDate:e.isOutOfDate,isShared:e.isShared,isUnavailable:e.isUnavailable,isUnauthorized:e.isUnauthorized,isConnected:e.isConnected,livetv:e.livetv,connectionTestResult:e.connectionTestResult,ownerId:e.ownerId,ownerFeatures:e.ownerFeatures,isBlockingUI:e.isBlockingUI}}r.d(t,{c:()=>n})},63756:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={entityID:"",machineIdentifier:"",friendlyName:"Unknown",allowSync:!1,allowMediaDeletion:!1,backgroundProcessing:!1,transcoderVideo:!1,isCloud:!1,isEmbedded:!1,isFullServer:!1,isFullOwnedServer:!1,isOutOfDate:!1,isShared:!1,isUnavailable:!1,isUnauthorized:!1,isConnected:!1,connectionTestResult:r(15892).a.Pending,ownerFeatures:[],providers:[]}},34044:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(85976),s=r(23888);const a=(0,r(87512).c)((function(e,t,r){return(0,n.M3)(s.c,(n=>{const s=r?(0,i.c)({serverIdentifier:e,providerIdentifier:t,key:r}):void 0;return s?n[s]:void 0}))}))},34992:(e,t,r)=>{"use strict";function n(e){return e.deviceSettings}r.d(t,{c:()=>n})},25248:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(57864),i=r(43196),s=r(63524),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=(0,n.M3)((0,i.c)("recentSearches"),(e=>e.map((e=>{return t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={searchType:s.Sw.RecentSearch},o(t,c(r));var t,r}))))},23888:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(43196).c)("savedDirectoryListKeys")},58896:(e,t,r)=>{"use strict";r.d(t,{W8:()=>s,aM:()=>n,gT:()=>i});var n=(e=>(e.IncludeAdultContent="includeAdultContent",e.Hidden="hidden",e))(n||{}),i=(e=>(e.Int="int",e.Text="text",e.Bool="bool",e.Enum="enum",e.Double="double",e))(i||{}),s=(e=>(e[e.Include=0]="Include",e[e.ExcludeFromHome=1]="ExcludeFromHome",e[e.ExcludeFromHomeAndSearch=2]="ExcludeFromHomeAndSearch",e))(s||{})},87940:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(31080);const s=(0,n.M3)(i.c,(({ownedInvites:e})=>e))},57516:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(31080);const s=(0,n.M3)(i.c,(({receivedInvites:e})=>e))},31080:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.sharedItemSources))},95944:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(44212),i=r(45372);const s=(0,n.is)({name:"sourcesInvites",initialState:{receivedInvites:{error:null,isPending:!1,isPopulated:!1,invites:[]},ownedInvites:{error:null,isPending:!1,isPopulated:!1,invites:[]},ownedSources:{error:null,isPending:!1,isPopulated:!1,sources:[]},receivedSources:{error:null,isPending:!1,isPopulated:!1,sources:[]}},reducers:{fetchReceivedInvites(e,t){(0,i.G8)(e.receivedInvites)},fetchReceivedInvitesSucceeded(e,{payload:t}){(0,i.mM)(e.receivedInvites),e.receivedInvites.invites=t.invites},fetchReceivedInvitesFailed(e,{payload:t}){(0,i.C)(e.receivedInvites,t.error)},fetchOwnedInvites(e,t){(0,i.G8)(e.ownedInvites)},fetchOwnedInvitesSucceeded(e,{payload:t}){(0,i.mM)(e.ownedInvites),e.ownedInvites.invites=t.invites},fetchOwnedInvitesFailed(e,{payload:t}){(0,i.C)(e.ownedInvites,t.error)},fetchSources(e,t){(0,i.G8)(e.receivedSources),(0,i.G8)(e.ownedSources)},fetchReceivedSources(e,t){(0,i.G8)(e.receivedSources)},fetchReceivedSourcesSucceeded(e,{payload:t}){e.receivedSources.sources=t.sources,(0,i.mM)(e.receivedSources)},fetchReceivedSourcesFailed(e,{payload:t}){(0,i.C)(e.receivedSources,t.error)},fetchOwnedSources(e,t){(0,i.G8)(e.ownedSources)},fetchOwnedSourcesSucceeded(e,{payload:t}){e.ownedSources.sources=t.sources,(0,i.mM)(e.ownedSources)},fetchOwnedSourcesFailed(e,{payload:t}){(0,i.C)(e.ownedSources,t.error)},respondToInvite(e,{payload:t}){"cancel"===t.action?(0,i.G8)(e.ownedInvites):(0,i.G8)(e.receivedInvites)},respondToInviteSucceeded(e,{payload:t}){"cancel"===t.action?((0,i.Cm)(e.ownedInvites),e.ownedInvites.invites=t.invites):((0,i.Cm)(e.receivedInvites),e.receivedInvites.invites=t.invites)},respondToInviteFailed(e,{payload:t}){"cancel"===t.action?(0,i.C)(e.ownedInvites,t.error):(0,i.C)(e.receivedInvites,t.error)}}})},50772:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(88888);const s=(0,n.M3)(i.c,(({ownedInvites:e})=>e))},17807:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(88888);const s=(0,n.M3)(i.c,(({receivedInvites:e})=>e))},88888:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.sharedServers))},86960:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(44212),i=r(45372);const s=(0,n.is)({name:"sharedServers",initialState:{receivedInvites:{error:null,isPending:!1,isPopulated:!1,invites:[]},ownedInvites:{error:null,isPending:!1,isPopulated:!1,invites:[]},acceptedReceivedInvites:{error:null,isPending:!1,isPopulated:!1,servers:[]},acceptedOwnedInvites:{error:null,isPending:!1,isPopulated:!1,servers:[]}},reducers:{fetchReceivedInvites(e,t){(0,i.G8)(e.receivedInvites)},fetchReceivedInvitesSucceeded(e,{payload:t}){(0,i.mM)(e.receivedInvites),e.receivedInvites.invites=t.invites},fetchReceivedInvitesFailed(e,{payload:t}){(0,i.C)(e.receivedInvites,t.error)},fetchOwnedInvites(e,t){(0,i.G8)(e.ownedInvites)},fetchOwnedInvitesSucceeded(e,{payload:t}){(0,i.mM)(e.ownedInvites),e.ownedInvites.invites=t.invites},fetchOwnedInvitesFailed(e,{payload:t}){(0,i.C)(e.ownedInvites,t.error)},fetchAcceptedInvites(e,t){(0,i.G8)(e.acceptedReceivedInvites),(0,i.G8)(e.acceptedOwnedInvites)},fetchAcceptedReceivedInvites(e,t){(0,i.G8)(e.acceptedReceivedInvites)},fetchAcceptedReceivedInvitesSucceeded(e,{payload:t}){e.acceptedReceivedInvites.servers=t.servers,(0,i.mM)(e.acceptedReceivedInvites)},fetchAcceptedReceivedInvitesFailed(e,{payload:t}){(0,i.C)(e.acceptedReceivedInvites,t.error)},fetchAcceptedOwnedInvites(e,t){(0,i.G8)(e.acceptedOwnedInvites)},fetchAcceptedOwnedInvitesSucceeded(e,{payload:t}){e.acceptedOwnedInvites.servers=t.servers,(0,i.mM)(e.acceptedOwnedInvites)},fetchAcceptedOwnedInvitesFailed(e,{payload:t}){(0,i.C)(e.acceptedOwnedInvites,t.error)},respondToInvite(e,{payload:t}){"cancel"===t.action?(0,i.G8)(e.ownedInvites):(0,i.G8)(e.receivedInvites)},respondToInviteSucceeded(e,{payload:t}){"cancel"===t.action?((0,i.Cm)(e.ownedInvites),e.ownedInvites.invites=t.invites):((0,i.Cm)(e.receivedInvites),e.receivedInvites.invites=t.invites)},respondToInviteFailed(e,{payload:t}){"cancel"===t.action?(0,i.C)(e.ownedInvites,t.error):(0,i.C)(e.receivedInvites,t.error)}}})},29532:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(21228),s=r(6744),a=r(93808),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e},m=(e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r};function h(e){var t=e,{subscriptionType:r}=t,o=m(t,["subscriptionType"]);return r===a.WW.Show?n.createElement(i.default,p({},o)):n.createElement(s.default,p({},o))}},1872:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(58660),s=r(96856),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,c(t)),y=(e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r};function g(e){var t=e,{isDisabled:r,isLabeled:a,isPrimary:o,isWaiting:c,size:l="m",tooltipPlacement:d="top",title:u}=t,p=y(t,["isDisabled","isLabeled","isPrimary","isWaiting","size","tooltipPlacement","title"]);const g=o?"accent":"action",f="m"===l?"l":void 0;return a?n.createElement(i.wP,h(m({},p),{color:g,disabled:r,iconSize:f,label:u,size:l,waiting:c})):n.createElement(s.o,{placement:d,tooltip:u},n.createElement(i.wP,h(m({},p),{accessibilityLabel:u,color:g,disabled:r,iconSize:f,size:l,waiting:c})))}},62592:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(11504),i=r(59396),s=r(22916),a=r(23748),o=r(42784),c=r(54505);const l={spinnerContainer:"ActionsLink-spinnerContainer-w6FXch",icon:"ActionsLink-icon-_FWtPQ"};var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>u(e,p(t)),b=(e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r};function S(e){var t=e,{id:r,className:d,tabIndex:u,isPending:p,icon:m,label:h}=t,y=b(t,["id","className","tabIndex","isPending","icon","label"]);return n.createElement(s.c,v(f({},y),{"aria-haspopup":!0,"aria-label":h||(0,i.c)("More Actions"),className:d,id:r,tabIndex:u}),p?n.createElement("div",{className:l.spinnerContainer},n.createElement(a.c,{size:o.c.Small})):n.createElement("div",{className:l.icon},m||n.createElement(c.c,null)))}},99192:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(89080),i=r.n(n),s=r(11504),a=r(24252),o=r(42784),c=r(22916);const l={button:"Button-button-Eu0WcX Link-link-vSsQW1",default:"Button-default-Gv9rfY",primary:"Button-primary-cMdkLb",success:"Button-success-pNPr_i",danger:"Button-danger-JEdFuj",small:"Button-small-wOhG_q",medium:"Button-medium-TeIU23",large:"Button-large-UojFUh"};var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>u(e,p(t)),b=(e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r};function S(e){var t=e,{className:r=l.button,kind:n=a.c.Default,size:d=o.c.Medium}=t,u=b(t,["className","kind","size"]);return s.createElement(c.c,v(f({},u),{className:i()(r,l.button,l[n],l[d])}))}},89520:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(89080),i=r.n(n),s=r(11504),a=r(97164),o=r(22916),c=r(46860),l=r(42784);const d={disclosureArrowLink:"DisclosureArrowLink-disclosureArrowLink-BTB_kg Link-link-vSsQW1",isSelected:"DisclosureArrowLink-isSelected-eCg9T3",small:"DisclosureArrowLink-small-u3pwLr",medium:"DisclosureArrowLink-medium-LUbLdY",large:"DisclosureArrowLink-large-lhfNZ4",disclosureArrow:"DisclosureArrowLink-disclosureArrow-atQpNC DisclosureArrow-disclosureArrow-NTDkGd",down:"DisclosureArrowLink-down-vIVrIa",left:"DisclosureArrowLink-left-F_lnXi",up:"DisclosureArrowLink-up-qY_ulP",right:"DisclosureArrowLink-right-TzCLgd"};var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r};function v(e){var t=e,{className:r=d.disclosureArrowLink,arrowClassName:n=d.disclosureArrow,direction:u=c.c.Down,size:p=l.c.Large,kind:m,children:h}=t,y=f(t,["className","arrowClassName","direction","size","kind","children"]);return s.createElement(o.c,g({"aria-haspopup":!0,className:i()(r,d[p]),kind:m,size:p},y),h,s.createElement(a.c,{className:i()(n,d[u],d[p]),direction:u,kind:m,size:p}))}},20904:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(89080),i=r.n(n),s=r(11504),a=r(22916);const o={iconButton:"IconButton-iconButton-ebkqws Link-link-vSsQW1",isDisabled:"IconButton-isDisabled-q14m5C",isActive:"IconButton-isActive-t7vuCA"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t)),f=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r};function v(e){var t=e,{children:r,className:n=o.iconButton,activeClassName:c=o.isActive,disabledClassName:l=o.isDisabled,iconClassName:d,iconComponent:u,isDisabled:p=!1,isActive:m=!1,title:h,ariaLabel:v}=t,b=f(t,["children","className","activeClassName","disabledClassName","iconClassName","iconComponent","isDisabled","isActive","title","ariaLabel"]);const S=v||h;return s.createElement(a.c,g(y({},b),{"aria-label":S,className:i()(n,p&&l,m&&c),isDisabled:p,title:h}),s.createElement(u,{className:d}),r)}},22916:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(89080),i=r.n(n),s=r(11504),a=r(50388),o=r(24252);const c={link:"Link-link-vSsQW1",isHrefLink:"Link-isHrefLink-nk7Aiq",default:"Link-default-bdWb1S",primary:"Link-primary-EIacsP",success:"Link-success-aljeIE",danger:"Link-danger-rd0xpb",small:"Link-small-fpOghg",medium:"Link-medium-zmherO",large:"Link-large-XEu5GO"};var l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>d(e,u(t));function v(e){var t=e,{forwardedRef:r,children:n,to:l,component:d=(l?"a":"button"),type:u=("button"===d||"input"===d?"button":void 0),role:y=(l?"link":"button"),className:v=c.link,kind:b=o.c.Default,size:S,isDisabled:P=!1,onPress:I,onTouchStart:E,onTouchMove:w,onTouchEnd:C,onTouchCancel:O,onMouseDown:M,onMouseUp:T,onMouseLeave:D,onClick:k,onFocus:x,onBlur:A}=t,R=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","children","to","component","type","role","className","kind","size","isDisabled","onPress","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onMouseDown","onMouseUp","onMouseLeave","onClick","onFocus","onBlur"]);const[N,L]=(0,s.useState)(!1),[j,U]=(0,s.useState)(!1),F=(0,s.useRef)(!1),V=(0,s.useRef)(!1),_=(0,s.useRef)(!1),W=(0,s.useCallback)((e=>{F.current=!0,V.current=!0,1===e.touches.length&&(_.current=!0,L(!0)),null==E||E(e)}),[E]),B=(0,s.useCallback)((e=>{_.current=!1,L(!1),null==w||w(e)}),[w]),H=(0,s.useCallback)((e=>{L(!1),_.current&&(_.current=!1,null==I||I(e)),null==C||C(e)}),[I,C]),z=(0,s.useCallback)((e=>{F.current=!1,V.current=!1,_.current=!1,L(!1),null==O||O(e)}),[O]),G=(0,s.useCallback)((e=>{F.current=!0,L(!0),null==M||M(e)}),[M]),q=(0,s.useCallback)((e=>{L(!1),null==T||T(e)}),[T]),K=(0,s.useCallback)((e=>{F.current=!1,L(!1),null==D||D(e)}),[D]),Q=(0,s.useCallback)((e=>{F.current?F.current=!1:(U(!0),null==x||x(e))}),[x]),$=(0,s.useCallback)((e=>{F.current=!1,U(!1),null==A||A(e)}),[A]),Y=(0,s.useCallback)((e=>{F.current=!1,L(!1),V.current?V.current=!1:(null==I||I(e),null==k||k(e))}),[I,k]),X=(0,s.useCallback)((()=>{U(!1)}),[]);(0,s.useEffect)((()=>(j&&window.addEventListener("mousemove",X),()=>{j&&window.removeEventListener("mousemove",X)})),[j,X]);const J=P?{}:{onTouchStart:W,onTouchMove:B,onTouchEnd:H,onTouchCancel:z,onMouseDown:G,onMouseUp:q,onMouseLeave:K,onFocus:Q,onBlur:$,onClick:Y};return s.createElement(d,f(g(g({},R),J),{ref:r,children:n,type:u,href:l,role:y,className:i()(v,c[b],S&&c[S],l&&c.isHrefLink,N&&a.y0,j&&a.o1,P&&a.EP),disabled:P}))}const b=s.forwardRef(((e,t)=>s.createElement(v,f(g({},e),{forwardedRef:t}))))},10986:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(22916),s=r(57392);const a={playButton:"PlayButton-playButton-HS0MKv Link-link-vSsQW1",playCircle:"PlayButton-playCircle-mkZ5qi"};var o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>c(e,l(t)),g=(e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r};function f(e){var t=e,{className:r=a.playButton,circleClassName:o=a.playCircle}=t,c=g(t,["className","circleClassName"]);return n.createElement(i.c,y(h({},c),{className:r,isDisabled:c.isDisabled}),n.createElement(s.c,{className:o}))}},13876:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(59396),s=r(22916),a=r(74672);const o={selectButton:"SelectButton-selectButton-SvPc9f Link-link-vSsQW1",selectCircle:"SelectButton-selectCircle-Tj9knz",selectedIcon:"SelectButton-selectedIcon-KUmzEU",unselectedCircle:"SelectButton-unselectedCircle-sJ8Nx0 SelectButton-selectCircle-Tj9knz",selectedCircle:"SelectButton-selectedCircle-KhRAK2 SelectButton-selectCircle-Tj9knz",rangeCircle:"SelectButton-rangeCircle-AbePGy SelectButton-selectCircle-Tj9knz"};var c=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r};function y(e){var t=e,{className:r=o.selectButton,selectedCircleClassName:c=o.selectedCircle,rangeCircleClassName:l=o.rangeCircle,selectCircleClassName:d=o.unselectedCircle,iconClassName:u=o.selectedIcon,title:p,isSelected:y,isInSelectionRange:g}=t,f=h(t,["className","selectedCircleClassName","rangeCircleClassName","selectCircleClassName","iconClassName","title","isSelected","isInSelectionRange"]);const v=(0,n.useMemo)((()=>y?c:g?l:d),[g,y,l,d,c]);return n.createElement(s.c,m({"aria-label":y?(0,i.c)("Deselect {title}",{title:p}):(0,i.c)("Select {title}",{title:p}),className:r},f),n.createElement("div",{className:v,"data-testid":"multipleSelectButton"},y||g?n.createElement(a.c,{className:u}):null))}},5806:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(99192),o=r(23748),c=r(42784);const l={button:"SpinnerButton-button-brFEgo Button-button-Eu0WcX Link-link-vSsQW1",spinnerContainer:"SpinnerButton-spinnerContainer-elrbH2",spinner:"SpinnerButton-spinner-xCEwPQ Spinner-spinner-Q4B7Qw spin-spin-H8VRGl",label:"SpinnerButton-label-G7f8t9",isSpinning:"SpinnerButton-isSpinning-2fpfsm"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r};function f(e){var t=e,{className:r=l.button,spinnerSize:n=c.c.Small,isDisabled:d=!1,isSpinning:u=!1,children:p}=t,m=g(t,["className","spinnerSize","isDisabled","isSpinning","children"]);return s.createElement(a.c,y({className:i()(r,u&&l.isSpinning),isDisabled:d||u},m),s.createElement("span",{className:l.spinnerContainer},s.createElement(o.c,{className:l.spinner,size:n})),s.createElement("span",{className:l.label},p))}},70216:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(89080),i=r.n(n),s=r(11504),a=r(99192),o=r(42784);const c={button:"TabButton-button-KPkGEB Button-button-Eu0WcX Link-link-vSsQW1",selected:"TabButton-selected-wnNjlr",secondary:"TabButton-secondary-qrXAf0"};var l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r};function g(e){var t=e,{isSelected:r,isSecondary:n,children:l}=t,d=y(t,["isSelected","isSecondary","children"]);return s.createElement(a.c,h({className:i()(c.button,r&&c.selected,n&&c.secondary),size:o.c.Small},d),l)}},84184:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504);var i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u({forwardedRef:e,className:t="PosterCard-card-BRB1k_",style:r,children:i}){return n.createElement("div",{ref:e,className:t,style:r},i)}const p=n.forwardRef(((e,t)=>{return n.createElement(u,(r=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},e),s(r,a({forwardedRef:t}))));var r}))},68260:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);const i={container:"PosterCardIcon-container-ZQcJrO"};function s({className:e=i.container,width:t,height:r,children:s}){const a=(0,n.useMemo)((()=>({width:`${t}px`,height:`${r}px`,fontSize:Math.max(14,Math.min(Math.round(t/4),42)),lineHeight:`${r}px`})),[r,t]);return n.createElement("div",{className:e,style:a},s)}},1432:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(22916);const s={link:"PosterCardLink-link-LozvMm Link-link-vSsQW1",hoveredLink:"PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1"};var a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e},p=(e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r};function m(e){var t=e,{className:r=s.link,hoverClassName:a=s.hoveredLink,isHovered:o}=t,c=p(t,["className","hoverClassName","isHovered"]);return n.createElement(i.c,u({className:o?a:r},c))}},3592:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(96388),i=r(11504),s=r(672),a=r(50684);function o(e){return null!=e?(0,s.c)((0,n.c)(e)):""}function c({className:e,timestamp:t}){const[r,n]=(0,i.useState)((0,a.c)(t));return(0,i.useEffect)((()=>{if(null==t)return;const e=function(e,t){const r=Math.abs(Date.now()-1e3*e),n=36e5,i=24*n;return r<n?window.setTimeout(t,6e4):r<i?window.setTimeout(t,n):window.setTimeout(t,i)}(t,(()=>{n((0,a.c)(t))}));return()=>{window.clearTimeout(e)}}),[t]),r?i.createElement("span",{className:e,title:o(t)},r):null}},16932:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(42784);const o={input:"Checkbox-input-L3AVrU",small:"Checkbox-small-g9HAwD",medium:"Checkbox-medium-xMqpii",large:"Checkbox-large-iky9yh",isDisabled:"Checkbox-isDisabled-tIVZI3",hasError:"Checkbox-hasError-yF8Sjx"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function g(e){var t=e,{forwardedRef:r,className:n=o.input,errorClassName:c=o.hasError,disabledClassName:l=o.isDisabled,isDisabled:d=!1,hasError:h=!1,name:g,size:f=a.c.Medium}=t,v=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","errorClassName","disabledClassName","isDisabled","hasError","name","size"]);return s.createElement("input",y({ref:r,className:i()(n,o[f],d&&l,h&&c),disabled:d,id:g,name:g,type:"checkbox"},v))}const f=s.forwardRef(((e,t)=>{return s.createElement(g,(r=y({},e),l(r,d({forwardedRef:t}))));var r}))},36708:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(89080),i=r.n(n),s=r(11504);const a={label:"FormLabel-label-jjY3xI",hasError:"FormLabel-hasError-qH12mx"};var o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e},m=(e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r};function h(e){var t=e,{className:r=a.label,errorClassName:n=a.hasError,children:o,name:c,hasError:l}=t,d=m(t,["className","errorClassName","children","name","hasError"]);return s.createElement("label",p({className:i()(r,l&&n),htmlFor:c},d),o)}},58196:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(42784);const o={input:"Select-input-HK74_E",select:"Select-select-cgne0H",small:"Select-small-bbFmhL",medium:"Select-medium-EZuYid",large:"Select-large-onfncC",isDisabled:"Select-isDisabled-v1reUK",hasError:"Select-hasError-dh3WW1"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function g(e){var t=e,{forwardedRef:r,className:n=o.input,selectClassName:c=o.select,errorClassName:l=o.hasError,disabledClassName:d=o.isDisabled,isDisabled:h=!1,hasError:g=!1,name:f,size:v=a.c.Medium,children:b}=t,S=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","selectClassName","errorClassName","disabledClassName","isDisabled","hasError","name","size","children"]);return s.createElement("span",{className:i()(n,o[v],h&&d,g&&l)},s.createElement("select",y({ref:r,className:c,disabled:h,name:f},S),b))}const f=s.forwardRef(((e,t)=>{return s.createElement(g,(r=y({},e),l(r,d({forwardedRef:t}))));var r}))},99558:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(89080),i=r.n(n),s=r(11504),a=r(17524),o=r(77072),c=r(8844);function l(e){return null!==e&&"current"in e}const d={textArea:"TextArea-textArea-kgu_gw",counter:"TextArea-counter-DQAJtl",container:"TextArea-container-yZWVWF",valid:"TextArea-valid-Xh_SsJ"};var u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e};const b=28,S=e=>{var t=e,{forwardedRef:r,className:n=d.textArea,autoFocus:u=!1,value:p,maxHeight:m,lineHeight:f=b,onSubmit:S}=t,P=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","autoFocus","value","maxHeight","lineHeight","onSubmit"]);const[I,E]=(0,s.useState)(!1),[w,C]=(0,a.cD)({fallbackInView:!0,initialInView:!1,threshold:1}),O=(0,s.useCallback)((e=>{if(!S)return;const t="OSX"===c.c.platform;(e.metaKey&&t||!t&&e.ctrlKey)&&"Enter"===e.key&&S()}),[S]),M=(0,s.useCallback)((e=>{l(r)&&e.target!==r.current&&e.preventDefault()}),[r]),T=(0,s.useCallback)((()=>{l(r)&&r.current.focus()}),[r]);(0,s.useEffect)((()=>{u&&C&&T()}),[u,T,C]);const D=(0,s.useCallback)((()=>{const e=l(r)?r.current:void 0;e&&(!m||e.scrollHeight<m?e.style.overflow="hidden":m&&(e.style.overflow="auto",e.scrollTop=e.scrollHeight),e.style.height="auto",e.style.height=`${e.scrollHeight}px`,E(e.scrollHeight>2*f))}),[r,f,m]);return s.createElement("div",{ref:w,className:i()(d.container,p&&d.valid),onClick:T,onMouseDown:M},s.createElement("textarea",v({ref:r,className:n,maxLength:300,rows:1,style:{lineHeight:`${f}px`,maxHeight:m},onInput:D,onKeyDown:O},P)),I?s.createElement("div",{className:d.counter},s.createElement(o.a,{color:"inherit",font:"caption"},`${null==p?void 0:p.toString().length} / 300`)):null)},P=s.forwardRef(((e,t)=>{return s.createElement(S,(r=v({},e),p(r,m({forwardedRef:t}))));var r}))},45400:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(42784);const o={input:"TextInput-input-vbygwE",small:"TextInput-small-DPQwcl",medium:"TextInput-medium-PnJxKX",large:"TextInput-large-vwRwxv",isDisabled:"TextInput-isDisabled-qHSDpU",hasError:"TextInput-hasError-aNMtIS"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function g(e){var t=e,{forwardedRef:r,className:n=o.input,errorClassName:c=o.hasError,disabledClassName:l=o.isDisabled,isDisabled:d=!1,hasFocusOnMount:h=!1,hasError:g=!1,name:f,size:v=a.c.Medium,onFocus:b}=t,S=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","errorClassName","disabledClassName","isDisabled","hasFocusOnMount","hasError","name","size","onFocus"]);return s.createElement("input",y({ref:r,autoFocus:h,className:i()(n,o[v],d&&l,g&&c),disabled:d,name:f,onFocus:b},S))}const f=s.forwardRef(((e,t)=>{return s.createElement(g,(r=y({},e),l(r,d({forwardedRef:t}))));var r}))},74076:(e,t,r)=>{"use strict";r.d(t,{c:()=>J});var n=r(11504),i=r(27876),s=r(58660),a=r(22509),o=r(3008),c=r(77072),l=r(96856),d=r(15364),u=r(37660),p=r(35860),m=r(54073),h=r(69956),y=r(62288),g=r(59396),f=r(1904),v=r(96504),b=r(90012),S=r(17068),P=r(92572),I=r(87440),E=r(19204),w=r(2708),C=r(85712),O=r(4644),M=r(37984),T=r(81180),D=r(39968),k=r(47036),x=r(43196),A=r(43168),R=r(85420),N=r(3028),L=r(35060),j=r(97884),U=r(35740),F=r(42176),V=r(11724),_=r(47748),W=r(38356);const B={container:"CurrentSourceBreadcrumb-container-pHbzRn",menuContainer:"CurrentSourceBreadcrumb-menuContainer-Cpjb3x"};var H=Object.defineProperty,z=Object.defineProperties,G=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&$(e,r,t[r]);if(q)for(var r of q(t))Q.call(t,r)&&$(e,r,t[r]);return e},X=(e,t)=>z(e,G(t));function J({hubsListSourceURI:e,metadataListSourceURI:t}){var r,H;const[z,G,q,K]=(0,M.c$)(),Q=(0,L.c)(b.s.IncludeDiscoverSource),{title:$,source:J,key:Z}=(0,D.c)(),{title:ee,hubsList:{sourceURI:te,isPopulated:re}}=(0,i.w1)(A.c),ne=(0,i.w1)((0,w.c)(null!=t?t:"")),ie=null==(H=null==(r=v.c.parseUri(String(Z)))?void 0:r.params)?void 0:H.contentDirectoryID,se=(0,i.w1)((0,x.c)("allSavedPivotParams")),ae=(0,i.w1)((0,R.c)(J)),oe=!Q&&(null==q?void 0:q.id)!==u._w&&p._u(G.identifier,p.Im),ce=(0,n.useMemo)((()=>oe?void 0:q),[q,oe]),le=(0,f.c)(G,ce),de=ce?(0,y.c)({sourceType:le?le.key:null,sourceServer:z,sourceProvider:G,sourceDirectory:ce}):void 0,ue=(null==de?void 0:de.sourceType)===_.M.Dvr,pe=(0,n.useMemo)((()=>{if(!oe)return ae||(ue?(0,g.c)("Live TV"):z.isEmbedded?(0,g.c)("Downloads"):ce?ce.title:z.isCloud?G.title:(0,P.c)(z))}),[ce,ue,G.title,z,oe,ae]),me=(0,n.useMemo)((()=>ue?(0,N.c)(z,G):(0,_.c)(de,z)),[ue,G,z,de]),he=(0,n.useMemo)((()=>{if((null==K?void 0:K.type)===C.Qf.View)return null;if($)return String($);if(ne)return ne.title;const{serverIdentifier:e,providerIdentifier:t}=te?(0,h.c)(te):{serverIdentifier:"",providerIdentifier:""};return re&&e===z.machineIdentifier&&p._u(t,G.identifier)?ee:null}),[te,re,ne,G.identifier,null==K?void 0:K.type,z.machineIdentifier,ee,$]),ye=(0,n.useMemo)((()=>ue?(0,j.c)("hybridGuide",{machineIdentifier:z.machineIdentifier,providerIdentifier:G.identifier}):ie?(0,E.c)(z,G,{id:ie}):ce||!z.isCloud?z.isEmbedded?(0,W.c)(null==se?void 0:se.downloads):(0,E.c)(z,G,ce,ce?void 0:{key:m.u,pageType:d.oB}):void 0),[null==se?void 0:se.downloads,ce,ie,ue,G,z]),ge=!!(0,O.c)(G,C.Aj.Manage),fe=(0,I.c)(),ve=(0,T.c)(),be=(0,n.useMemo)((()=>{var e;if(ue||!ce&&!ge)return;const r=t?(0,h.c)(t):void 0,n=r?v.c.parseUri(r.key):void 0;return!n||(null==(e=null==ce?void 0:ce.pivots)?void 0:e.some((e=>n.pathname===v.c.parseUri(e.key).pathname)))}),[t,ce,ge,ue]);return n.createElement("div",{className:B.container},ye?n.createElement(o.ye,{gap:"xxs",orientation:"horizontal",verticalAlign:"center"},n.createElement(U.c,{detail:me,route:ye,title:pe}),he?n.createElement(n.Fragment,null,n.createElement(c.a,{color:"muted"},n.createElement(S.c,{separator:""})),n.createElement(c.a,{color:"muted"},he)):null):null,be?n.createElement("div",{className:B.menuContainer,id:fe},n.createElement(l.o,{tooltip:(0,g.c)("Actions")},n.createElement(s.wP,X(Y({},k.y),{accessibilityLabel:(0,g.c)("Actions"),icon:a.default,onPress:ve.onToggle}))),ce?n.createElement(F.c,{hubsListSourceURI:e,isOverflowMenuOpen:ve.isOpen,providerEntityID:G.entityID,serverEntityID:z.entityID,source:de,target:fe,onOverflowMenuClose:ve.onClose}):n.createElement(V.c,{isOverflowMenuOpen:ve.isOpen,machineIdentifier:z.machineIdentifier,overflowMenuButtonID:fe,serverEntityID:z.entityID,onOverflowMenuClose:ve.onClose})):null)}},31920:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var n=r(11504),i=r(87592);function s(){return n.createElement(i.c,{height:"70%",orientation:"vertical",size:"s"})}},77792:(e,t,r)=>{"use strict";r.d(t,{c:()=>a,z:()=>s});var n=r(11504),i=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())})),s=(e=>(e.Done="done",e.Error="error",e))(s||{});function a(e){const[t,r]=(0,n.useState)();return{copyToClipboard:(0,n.useCallback)((()=>i(this,null,(function*(){if(e){r(void 0);try{yield window.navigator.clipboard.writeText(e),r("done")}catch(e){r("error")}}}))),[e]),copyState:t,resetCopyState:(0,n.useCallback)((()=>{r(void 0)}),[])}}},32136:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e=60){const t=1e3*e,[r,i]=(0,n.useState)(Date.now());return(0,n.useEffect)((()=>{const e=window.setTimeout((()=>{i(Date.now())}),t-r%t);return()=>{window.clearTimeout(e)}}),[r,t]),r}},81180:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>t(!0)),[]),i=(0,n.useCallback)((()=>t(!1)),[]),s=(0,n.useCallback)((()=>t(!e)),[e]);return(0,n.useMemo)((()=>({isOpen:e,onOpen:r,onClose:i,onToggle:s})),[e,i,r,s])}},75696:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useRef)(void 0),i=(0,n.useRef)(null),s=(0,n.useCallback)((e=>{window.clearTimeout(r.current),i.current=e.currentTarget,t(!0)}),[]),a=(0,n.useCallback)((()=>{r.current=window.setTimeout((()=>{i.current=null,t(!1)}))}),[]);return(0,n.useEffect)((()=>{function e(e){const r=e.currentTarget;t(r instanceof HTMLElement&&r.contains(i.current))}return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),[e,s,a]}},10376:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useRef)(null),i=(0,n.useCallback)((()=>t(!0)),[]),s=(0,n.useCallback)((()=>t(!1)),[]);return(0,n.useEffect)((()=>{const e=r.current;return e&&(e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s)),()=>{e&&(e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s))}}),[i,s]),[e,r]}},39968:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(85448),s=r(96504);const a=function(){const e=(0,i.IT)().search;return(0,n.useMemo)((()=>{const{params:t}=s.c.parseUri(e);return t}),[e])}},51660:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(17260),i=r(55156),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=window.ResizeObserver||i.Q,u=function(e){return(0,n.c)(((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({polyfill:d},e))}},54348:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(96504);const s=function(){const e=window.location.hash.replace("#!","");return(0,n.useMemo)((()=>{const{params:t}=i.c.parseUri(e);return t}),[e])}},18140:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function(){return(0,n.useCallback)((e=>{const t=e.target;t&&t.select()}),[])}},47284:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(21040);const s=Symbol("NO_VALUE"),a=function(e,t,r=500){const[a,o]=(0,n.useState)(s),c=(0,i.c)(e),l=(0,n.useRef)(0);return e===t&&c!==t&&l.current++,(0,n.useEffect)((()=>{const e=window.setTimeout((()=>{o(s)}),r);return o(t),()=>{window.clearTimeout(e)}}),[l.current,t,r]),a===s?e:a}},624:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(41744),s=r(77072);function a({href:e,children:t,onPress:r}){return e?n.createElement(i.c,{color:"inherit",font:"inherit",href:e,insetFocus:!0,onPress:r},t):n.createElement(n.Fragment,null,t)}function o({children:e,href:t,onPress:r}){return n.createElement(s.a,{as:"h2",color:"primary",font:"heading-2",numberOfLines:1,testID:"hubTitle"},n.createElement(a,{href:t,onPress:r},e))}},92700:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(29208);function s({className:e,hubs:t,hubComponent:r,hubTitleComponent:s,metricsRowOffset:a=0}){let o=a;return n.createElement("div",{className:e},t.map(((e,t)=>n.createElement(i.cp,{key:t,name:e.context,row:e.initialSize||e.more?o++:void 0},n.createElement(r,{hub:e,hubTitleComponent:s})))))}},48996:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(76856),s=r(3008),a=r(42152),o=r(77072),c=r(59396),l=r(46896),d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r};function h(e){var t=e,{title:r=(0,c.c)("View All"),Icon:d=i.default,href:u,posterStyle:p="circle",onPress:h}=t,y=m(t,["title","Icon","href","posterStyle","onPress"]);const g=(0,l.c)(y);return n.createElement("div",{key:"view-more",style:g.style},n.createElement(a.mw,{posterStyle:p,width:y.cellWidth},n.createElement(s.ye,{align:"center",gap:"s",height:"100%",verticalAlign:"center",width:"100%"},n.createElement(d,{size:"xl"}),n.createElement(o.a,{color:"primary",font:"caption"},r)),u?n.createElement(a.ic,{href:u,posterStyle:p,onPress:h}):null,h&&!u?n.createElement(a.u6,{posterStyle:p,onPress:h}):null))}},80280:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(17524),s=r(68392),a=r(26080),o=r(59396),c=r(20904),l=r(624),d=r(42668),u=r(27256),p=r(94644);const m={hub:"VirtualHubScroller-hub-EpgwMo",hubHeader:"VirtualHubScroller-hubHeader-vSW06t",hubActions:"VirtualHubScroller-hubActions-rWTnSS",hubScrollButton:"VirtualHubScroller-hubScrollButton-X674uJ IconButton-iconButton-ebkqws Link-link-vSsQW1",hubScroller:"VirtualHubScroller-hubScroller-gv2_Qy VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"},h=1e4;function y({className:e=m.hub,hubHeaderClassName:t=m.hubHeader,hub:r,hubTitleComponent:y,keyPropName:g,items:f,totalSize:v,initialPageSize:b=24,emptyIndices:S,layout:P,scrollerKey:I,storageKey:E,cellComponentFactory:w,shouldCenterScrollIndex:C,onPageRequest:O}){const{title:M,initialSize:T,random:D}=r,k=(0,n.useRef)(null),[x,A]=(0,n.useState)(!1),[R,N]=(0,n.useState)(!1),[L,j]=(0,n.useState)(!1),[U,F]=(0,n.useState)(),[V,_]=function(e){const t=(0,i.cD)({triggerOnce:!0});return void 0===window.IntersectionObserver?[void 0,!0]:t}(),W=null==v||D?T:v,B=Math.min(h,null!=W?W:0),H=(0,n.useCallback)((()=>{A(!0)}),[]),z=(0,n.useCallback)((e=>{const{visibleStartIndex:t,visibleEndIndex:r}=e;k.current=e,N(t>0),j(B>r+1)}),[B]),G=(0,n.useCallback)((()=>{const e=k.current;if(e){const t=e.visibleEndIndex-e.visibleStartIndex;F(Math.max(e.visibleStartIndex-t-1,0))}}),[]),q=(0,n.useCallback)((()=>{const e=k.current;e&&F(e.visibleEndIndex+1)}),[]),{isPlaceholder:K,placeholderItems:Q}=(0,d.c)({hub:r,size:f.length,totalSize:v,initialPageSize:b,isVisible:_,onPageRequest:O});return(0,n.useEffect)((()=>{null!=U&&F(void 0)}),[U]),K||B?n.createElement("div",{ref:V,className:e},n.createElement("div",{className:t,style:x?void 0:{visibility:"hidden"}},y?n.createElement(y,{hub:r,items:f},M):n.createElement(l.c,null,M),K||!R&&!L?null:n.createElement("div",{className:m.hubActions},n.createElement(c.c,{className:m.hubScrollButton,iconComponent:s.default,isDisabled:!R,title:(0,o.c)("Previous Page"),onPress:G}),n.createElement(c.c,{className:m.hubScrollButton,iconComponent:a.default,isDisabled:!L,title:(0,o.c)("Next Page"),onPress:q}))),n.createElement("div",{style:x?void 0:{height:P.rowHeight}},n.createElement(p.c,{autoScroll:!1,cellComponentFactory:w,className:m.hubScroller,emptyIndices:S,items:K?Q:f,keyPropName:g,layout:P,scrollDirection:u.y.Horizontal,scrollerKey:null!=I?I:r.sourceURI,shouldCenterScrollIndex:C,storageKey:E,targetScrollIndex:U,totalSize:K?Q.length:B,onListReady:H,onListUpdate:z,onPageRequest:K||!_?void 0:O}))):null}},42668:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i({hub:e,size:t,totalSize:r,initialPageSize:i,isVisible:s=!0,onPageRequest:a}){const o=!(!e.placeholder||!e.more||t||null!=r),c=(0,n.useMemo)((()=>{const e=[];return e.length=i,e}),[i]);return(0,n.useEffect)((()=>{var t;!s&&o||!e.more||null!=r||null==a||a({startIndex:null!=(t=e.initialSize)?t:0,size:i})}),[e.initialSize,e.more,o,s,a,r,i]),{isPlaceholder:o,placeholderItems:c}}},76772:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(29412),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e},d=(e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r};function u(e){var t=e,{columnWidth:r,aspectRatio:i,titleHeight:s,innerHorizontalPadding:a}=t,o=d(t,["columnWidth","aspectRatio","titleHeight","innerHorizontalPadding"]);return(0,n.c)(l({columnWidth:r,rowHeight:Math.floor(r/i+s),innerHorizontalPadding:a},o))}},63848:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(89080),i=r.n(n),s=r(11504);const a={icon:"IconPublic-icon-soxZig",accent:"IconPublic-accent-Gfrtlp"};function o({color:e}){return s.createElement("div",{className:i()(a.icon,"accent"===e&&a.accent)})}},46204:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(42152);const s={iconContainer:"PosterIcon-iconContainer-k0hL5C"},a=88;function o({icon:e,size:t=a,iconSize:r="xl",posterStyle:o="circle",color:c="default",backgroundColor:l}){return n.createElement(i.mw,{posterStyle:o,width:t},n.createElement("div",{className:s.iconContainer,style:{backgroundColor:l}},n.createElement(e,{color:c,size:r})))}},23300:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(35860),a=r(17464),o=r(37984),c=r(83660),l=r(12064);function d({server:e,url:t,size:r}){const[,d]=(0,o.c$)(),u=d.identifier?s.SI(d.identifier):s.tE.Production,p=(0,i.w1)((0,a.c)(s.Im,u));return n.createElement(c.S,{height:r,posterStyle:"circle",provider:p,server:e,url:(0,l.c)(t,r),width:r})}},2024:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,c:()=>c});var n=r(11504),i=r(13968),s=r(83216);const a=(0,i.c)(s.c.slowSpeed);var o=(e=>(e.Fill="fill",e.Contain="contain",e.Cover="cover",e.ScaleDown="scale-down",e.None="none",e))(o||{});const c=(0,n.memo)((function({className:e,src:t,alt:r,width:i,height:s,fit:o,durationMilliseconds:c=a}){const l=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{const e=l.current;if(!e||!t)return;const n=document.createElement("img");r&&(n.alt=r),Object.assign(n.style,{position:"absolute",width:"100%",height:"100%",objectFit:o,opacity:"0"}),e.appendChild(n),n.onload=()=>{const t=Date.now()-i,r=s||t<50,a=e.childNodes.length>1;if("function"!=typeof n.animate||r&&!a)n.style.opacity="1";else{const t=n.animate([{opacity:0},{opacity:1}],c);t.onfinish=t.oncancel=()=>{for(n.style.opacity="1";e.childNodes.length>1;)e.removeChild(e.childNodes[0])}}},n.onerror=()=>{for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])},n.src=t;const i=Date.now(),s=n.complete;return()=>{n.onload=n.onerror=null}}),[t,r,o,c]),n.createElement("div",{ref:l,className:e,style:{position:"relative",overflow:"hidden",width:i,height:s}})}))},83660:(e,t,r)=>{"use strict";r.d(t,{S:()=>o});var n=r(11504),i=r(42152),s=r(64156),a=r(2024);const o=({url:e,height:t,width:r,server:o,provider:c,fit:l,posterStyle:d})=>{const u=(0,s.cp)({server:o,width:r,height:t,url:e,provider:c});return n.createElement(i.mw,{posterStyle:d,width:r},n.createElement(a.c,{className:"ImagePoster-flex-Ry0HC5",durationMilliseconds:0,fit:l,src:u,width:r}))}},61252:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(27876),s=r(43964),a=r(23300);function o({server:e,size:t}){const r=(0,i.w1)((0,s.c)(e.machineIdentifier));return n.createElement(a.c,{server:e,size:t,url:null!=r?r:""})}},94840:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(89080),i=r.n(n),s=r(11504);const a=s.forwardRef((({className:e="ListRow-row-oh5MTV",alternateClassName:t="ListRow-alternateRow-VySkqw ListRow-row-oh5MTV",hoveredClassName:r="ListRow-isHovered-xjtD7Z",tabIndex:n,style:a={},isAlternate:o=!1,isHovered:c=!1,children:l,onFocus:d,onBlur:u},p)=>s.createElement("div",{ref:p,className:i()(o?t:e,c&&r),style:a,tabIndex:n,onBlur:u,onFocus:d},l)))},46016:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(94840);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};const u=n.forwardRef((({className:e="ListRowPlaceholder-placeholder-g75gnX",style:t,index:r},s)=>n.createElement(i.c,{ref:s,className:e,style:d({animationDelay:r%12*200+"ms"},t)})))},28988:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(13436),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};const u=function({keyPropName:e,items:t,totalSize:r,layout:s,measurements:a,renderStartIndex:o,renderEndIndex:c,visibleStartIndex:l,visibleEndIndex:u,cellComponentFactory:p,minPageCount:m,minPageSize:h,pageRequestDelay:y,emptyIndices:g=[],onPageRequest:f,onListUpdate:v}){const b=(0,i.c)(o),S=(0,n.useRef)(!1);return o!==b&&(S.current=null!=b&&o<b),(0,n.useEffect)((()=>{let e;if(f&&m&&h){const n=S.current,i=c-o+1,s=Math.max(i*m,h);let a,l=!1;if(n){const e=Math.max(c-s+1,0);for(a=c;a>=e;){if(null==t[a]){l=!0;break}a--}}else{const e=Math.min(o+s-1,r-1);for(a=o;a<=e;){if(null==t[a]){l=!0;break}a++}}l&&(e=window.setTimeout((()=>{f({startIndex:a,size:s,isPrepend:n})}),y))}return()=>window.clearTimeout(e)}),[t,m,h,f,y,b,c,o,r]),(0,n.useEffect)((()=>{v&&v({renderStartIndex:o,renderEndIndex:c,visibleStartIndex:l,visibleEndIndex:u})}),[v,c,o,u,l]),(0,n.useMemo)((()=>{const r=[],n=[...g];for(let i=o;i<=c;i++){const o=t[i],c=i>=l&&i<=u,m=null==n?void 0:n.find((e=>i>e)),h=g.length-n.length,y=s.getPositionForIndex(null!=m?m-h:i-h,a);null!=m&&n.splice(n.indexOf(m),1),r.push(p(d({key:String(o&&e?o[e]:i),isVirtual:!0,isVisible:c,cellIndex:i,item:o},y)))}return r}),[p,g,t,e,s,a,c,o,u,l])};var p=r(26780);function m({className:e,children:t,emptyIndices:r=[],keyPropName:i,items:s,totalSize:a,layout:o,cellComponentFactory:c,viewportWidth:l,viewportHeight:d,listTop:m=0,listLeft:h=0,scrollTop:y,scrollLeft:g,isWaitingToRestoreScrollPosition:f=!1,minPageCount:v=3,minPageSize:b=24,pageRequestDelay:S=p.O,onPageRequest:P,onListReady:I,onListUpdate:E}){const w=(0,n.useMemo)((()=>o.getListMeasurements({viewportWidth:l,viewportHeight:d,listTop:m,listLeft:h},a-r.length)),[o,l,d,m,h,a,r.length]),{renderStartIndex:C,renderEndIndex:O,visibleStartIndex:M,visibleEndIndex:T}=(0,n.useMemo)((()=>o.getRangesForPosition(y,g,a,w)),[o,w,g,y,a]),D=u({keyPropName:i,items:s,emptyIndices:r,totalSize:a,layout:o,measurements:w,renderStartIndex:C,renderEndIndex:O,visibleStartIndex:M,visibleEndIndex:T,cellComponentFactory:c,minPageCount:v,minPageSize:b,pageRequestDelay:S,onPageRequest:P,onListUpdate:E});return(0,n.useEffect)((()=>{I&&I(w)}),[w,I]),n.createElement("div",{className:e,style:{width:w.width,height:w.height,position:"relative"}},f||!w.height?null:D,t)}},61969:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(16512);const s="!";function a({key:e}){const t=`${e}${s}cellHeights`,r=(0,n.useRef)(null),[a,o]=(0,n.useState)(!!i.c.get(t)),[c,l]=(0,n.useState)([]),d=(0,n.useCallback)((e=>{r.current=e}),[]);return(0,n.useEffect)((()=>(a&&l(i.c.get(t)),()=>{const e=r.current;r.current=null,e&&i.c.set(t,e)})),[a,t]),(0,n.useEffect)((()=>{void 0!==c&&o(!1)}),[c]),{isWaitingToRestore:a,cellHeights:c,onCellHeightsChange:d}}},46844:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504);const i=({target:e,callback:t})=>{const r=(0,n.useMemo)((()=>new MutationObserver(((e,r)=>{null==t||t(e,r)}))),[t]);(0,n.useEffect)((()=>(e&&r.observe(e,{attributes:!0,subtree:!0}),()=>r.disconnect())),[e,r])};var s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r};function l(e){var t=e,{onCellHeightChange:r}=t,s=c(t,["onCellHeightChange"]);const a=(0,n.useRef)(null),[o,l]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>{var e,t;l(!0),r(s.cellIndex,null!=(t=null==(e=a.current)?void 0:e.children[0].clientHeight)?t:s.cellHeight)}),[s.cellHeight,s.cellIndex,r]);return(0,n.useEffect)((()=>{a.current&&d()}),[d]),i({target:a.current,callback:d}),[a,o]}},46896:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(21040),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};function u(e){const{style:t,moveDurationMilliseconds:r=200,isVirtual:s,isVisible:a,cellIndex:o,cellX:c,cellY:l,cellWidth:u,cellHeight:p}=e,m=(0,n.useRef)(null),h=(0,i.c)(o),y=(0,i.c)(c),g=(0,i.c)(l),f=null!=h&&o!==h,v=(0,n.useRef)(!0);s&&!a||(v.current=!1);const b=(0,n.useMemo)((()=>d(s?{willChange:"transform",position:"absolute",width:u,height:p,top:l,left:c}:{position:"relative"},t)),[c,l,u,p,t,s]);return(0,n.useLayoutEffect)((()=>{const e=m.current;if(!e||null==y||null==g||null==c||null==l)return;let t;f&&"function"==typeof e.animate&&(e.style.zIndex="1",e.style.pointerEvents="none",t=e.animate([{transform:`translate(${y-c}px, ${g-l}px)`},{transform:"none"}],r),t.oncancel=t.onfinish=()=>{e.style.zIndex="0",e.style.pointerEvents="unset"})}),[c,l,f,r,y,g]),{cellRef:m,style:b,isOffscreenPlaceholder:v.current}}},44696:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(55932);function i(e){const{innerPaddingBottom:t=0,outerPaddingBottom:r=0,overscan:i=0,getEstimatedCellHeight:s,cellHeights:a,width:o}=e;let c,l;function d(e){const t=l.findIndex((t=>t>e)),r=l.length-1;return-1===t?r:Math.min(Math.max(0,t-1),r)}return{getListMeasurements(e,n){const{viewportWidth:i,viewportHeight:d}=e;l=[],c=[];for(let e=0;e<n;e++)c[e]=(a[e]||s(e))+t;let u=0;c.forEach((e=>{l.push(u),u+=e}));const p=c.reduce(((e,t)=>e+t),0)+r;return{width:o,height:p,outerPaddingTop:0,outerPaddingRight:0,outerPaddingBottom:0,outerPaddingLeft:0,listTop:e.listTop,listLeft:e.listLeft,viewportWidth:i,viewportHeight:d}},getListHeight(e){c=[],l=[];for(let r=0;r<e;r++)c[r]=(a[r]||s(r))+t;let r=0;return c.forEach((e=>{l.push(r),r+=e})),c.reduce(((e,t)=>e+t),0)},getPositionForIndex:e=>({column:1,row:e,cellX:0,cellY:(null==l?void 0:l[e])||0,cellWidth:o,cellHeight:(null==c?void 0:c[e])||0}),getRangesForPosition(e,t,r,s){const{viewportHeight:a}=s,o=e+a-1,c=d(e-i*a),l=d(e),u=d(o),p=d(o+i*a);return{visibleStartIndex:(0,n.c)(l,r),visibleEndIndex:(0,n.c)(u,r),renderStartIndex:(0,n.c)(c,r),renderEndIndex:(0,n.c)(p,r)}}}}},7268:(e,t,r)=>{"use strict";r.d(t,{S:()=>i,c:()=>s}),r(79268);var n=r(55932),i=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e))(i||{});function s({direction:e="vertical",rows:t,columns:r,overscan:i=0,innerHorizontalPadding:s=0,innerVerticalPadding:a=0,outerPaddingTop:o=0,outerPaddingRight:c=0,outerPaddingBottom:l=0,outerPaddingLeft:d=0,getCellWidth:u,getCellHeight:p}){return{getListMeasurements(n,i){const m=n.listTop,h=n.listLeft;let y=(n.viewportWidth||0)-c-d,g=(n.viewportHeight||0)-o-l;"vertical"===e?y-=h:g-=m,y=Math.max(0,y),g=Math.max(0,g);const f=u({innerViewportWidth:y,innerViewportHeight:g,innerHorizontalPadding:s,innerVerticalPadding:a}),v=p({cellWidth:f,innerViewportWidth:y,innerViewportHeight:g,innerHorizontalPadding:s,innerVerticalPadding:a}),b=Math.max(1,t||Math.floor((g+a)/(v+a))),S=Math.max(1,r||Math.floor((y+s)/(f+s))),P=S*b;let I=0,E=0;return"vertical"===e&&S?(I=S*(f+s)-s,E=Math.ceil(i/S)*(v+a)-a):"horizontal"===e&&b&&(I=Math.ceil(i/b)*(f+s)-s,E=b*(v+a)-a),{width:I+c+d,height:E+o+l,outerPaddingTop:o,outerPaddingRight:c,outerPaddingBottom:l,outerPaddingLeft:d,listTop:m,listLeft:h,cellWidth:f,cellHeight:v,cellsPerColumn:b,cellsPerRow:S,cellsPerPage:P}},getPositionForIndex(t,r){const{listTop:n,listLeft:i,cellWidth:c,cellHeight:l}=r,u=function(t,r){return"vertical"===e?t%r.cellsPerRow:Math.floor(t/r.cellsPerColumn)}(t,r),p=function(t,r){return"vertical"===e?Math.floor(t/r.cellsPerRow):t%r.cellsPerColumn}(t,r);return{column:u,row:p,cellX:u*(c+s)+i+d,cellY:p*(l+a)+n+o,cellWidth:c,cellHeight:l}},getRangesForPosition(t,r,o,c){const{listTop:l,listLeft:d,cellWidth:u,cellHeight:p,cellsPerColumn:m,cellsPerRow:h,cellsPerPage:y}=c,g="vertical"===e?h:m,f="vertical"===e?(t-l)/(p+a):(r-d)/(u+s),v=y+2*g+i*g*2,b=Math.ceil(f)*g,S=b+y-1;let P=b-g*i;const I=(0,n.c)(P,o)+v-1;return I>=o&&(P=o-v),{visibleStartIndex:(0,n.c)(b,o),visibleEndIndex:(0,n.c)(S,o),renderStartIndex:(0,n.c)(P,o),renderEndIndex:(0,n.c)(I,o)}}}}},29412:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(7268),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e},d=(e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r};function u(e){var t=e,{columnWidth:r,rowHeight:i}=t,s=d(t,["columnWidth","rowHeight"]);return l({rowHeight:i},(0,n.c)(l({direction:n.S.Horizontal,rows:1,getCellWidth:()=>r,getCellHeight:()=>i,overscan:4},s)))}},82228:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(7268),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e},d=(e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r};function u(e){var t=e,{rowHeight:r,rowWidth:i=0}=t,s=d(t,["rowHeight","rowWidth"]);return(0,n.c)(l({direction:n.S.Vertical,columns:1,getCellWidth:e=>Math.max(i,e.innerViewportWidth),getCellHeight:()=>r},s))}},26780:(e,t,r)=>{"use strict";r.d(t,{O:()=>a,RI:()=>s,cn:()=>i,kH:()=>n});const n=12,i=200,s=400,a=200},29208:(e,t,r)=>{"use strict";r.d(t,{Ej:()=>u,QN:()=>d,_Q:()=>s,_i:()=>p,cp:()=>m,e0:()=>l});var n=r(11504),i=r(56960);const s=Symbol(void 0),a=Symbol(void 0),o=[s,s,s],c=(0,n.createContext)({metricsPage:i.Eq,metricsContextTuple:o});function l(){return(0,n.useContext)(c)}function d([e,t,r]){if(e!==s)return[e,t===s||t===a?"":t,r===s||r===a?"":r].join("~").replace(/~+$/,"")}function u(e){if(!e)return o;const[t,r,n]=e.split("~");return t?[t,r?parseInt(r,10):a,n?parseInt(n,10):a]:o}function p([e,t,r]){if(e!==s)return{context:e,row:t===a||t===s?void 0:t,col:r===a||r===s?void 0:r}}function m({children:e,metricsPage:t,metricsContextParam:r,metricsOrigin:i,metricsPane:a,name:o,row:d=s,column:p=s,extendParentContextProviders:m=!1,experimentName:h}){const{metricsPage:y,metricsContextTuple:g}=l(),f=(0,n.useMemo)((()=>{const[e,n,i]=g;return r?u(r):o?[`${y}:${o}`,d,p]:e!==s?[e,n===s?d:n,i===s?p:i]:t&&t!==y||m?g:void 0}),[g,r,o,t,y,m,d,p]),v=(0,n.useMemo)((()=>f?{metricsPage:t||y,metricsContextTuple:f,metricsOrigin:i,metricsPane:a,experimentName:h}:void 0),[f,t,y,i,a,h]);return v?n.createElement(c.Provider,{value:v},e):e}},8684:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(52180),s=r(29208),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e};function p(e){const{metricsPage:t,metricsContextTuple:r,metricsPane:a,experimentName:o}=(0,s.e0)();return(0,n.useCallback)((n=>{const s=u(u({page:t,contextTuple:r,pane:a,experimentName:o},e),n);(0,i.WI)("metrics").trackClick(s)}),[JSON.stringify(e),r,t])}},71604:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(37984),i=r(8684),s=r(83056);function a(e){const[,t]=(0,n.c$)();return(0,i.c)({identifier:e.title?void 0:t.metricsIdentifier,type:e.type,metadataItem:(0,s.c)(e)})}},91320:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(52180),s=r(24952),a=r(29208),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>c(e,l(t));function g(e,t=!0,r){const{metricsPage:o,metricsPane:c,metricsContextTuple:l}=(0,a.e0)();(0,n.useEffect)((()=>{t?(0,i.WI)("metrics").trackView(h(y(h({},r?{}:e),{page:o,pane:c,contextTuple:l}),r?e:{})):s.cp.startPeriod(`client:view:${o}`)}),[t,l,o,JSON.stringify(e)])}},29704:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(27876),s=r(52180),a=r(95188),o=r(56960),c=r(29208),l=r(72916),d=r(63524);function u(e){switch(e){case d.Gk.TopResults:return d.ct.TopResults;case d.Gk.LiveTV:return d.ct.LiveTV;case d.Gk.MoviesTV:return d.ct.MoviesTV;case d.Gk.Music:return d.ct.Music;case d.Gk.OtherVideos:return d.ct.OtherVideos;case d.Gk.People:return d.ct.People;case d.Gk.Photos:return d.ct.Photos;case d.Gk.AvailabilityPlatforms:return d.ct.AvailabilityPlatforms;case d.Gk.Movies:return d.ct.Movies;case d.Gk.Shows:return d.ct.Shows;case d.Gk.Episodes:return d.ct.Episodes;case d.Gk.Artists:return d.ct.Artists;case d.Gk.Albums:return d.ct.Albums;case d.Gk.Tracks:return d.ct.Tracks}}function p(){const{metricsPage:e,metricsContextTuple:t}=(0,c.e0)(),{query:r,pivot:d}=(0,i.w1)(l.c);return(0,n.useCallback)((n=>{(0,s.WI)("metrics").trackEvent({event:a.qM,page:e===o.Eq?o.bv:e,pane:u(d),interaction:!0,properties:{value:r,contextTuple:t[0]!==c._Q?t:[n.context,n.row,null]}})}),[t,e,d,r])}},59956:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(52180),s=r(29208),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e};function p(e){const{metricsPage:t,metricsContextTuple:r}=(0,s.e0)();return(0,n.useCallback)((n=>{const s=u(u({page:t,contextTuple:r},e),n);(0,i.WI)("metrics").trackView(s)}),[JSON.stringify(e),r,t])}},6304:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(52180),s=r(66780),a=r(69956),o=r(93808),c=r(29208),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};function y(e,t){const{isServer:r}=e.sourceURI?(0,a.c)(e.sourceURI):{isServer:!1},{metricsPage:l,metricsContextTuple:d,metricsPane:u}=(0,c.e0)();return(0,n.useCallback)(((...[n,a])=>{const p=e.extraType===o.Yr.Trailer?e.primaryGuid:e.guid,m=h({action:n?s.iy:s.fE,page:l,contextTuple:[null!=t?t:d[0],c._Q,c._Q],pane:u,guid:r?void 0:p},a);(0,i.WI)("metrics").trackClick(m)}),[e.extraType,e.primaryGuid,e.guid,l,t,d,u,r])}},83056:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(69956);const s=function(e){var t,r;if(!(null==e?void 0:e.source)||(0,i.c)(e.source).isServer)return;const{providerIdentifier:s}=(0,i.c)(e.source);let a;return n._u(s,n.Sg)&&(a=e.rentalPrice?"tvod":"avod"),{type:e.type,id:e.guid,title:e.title,genre:null==(r=null==(t=e.Genre)?void 0:t[0])?void 0:r.tag,provider:e.title?void 0:s,releaseDate:e.originallyAvailableAt,parentId:e.parentGuid,parentTitle:e.parentTitle,grandparentId:e.grandparentGuid,grandparentTitle:e.grandparentTitle,source:a,rentalPrice:e.rentalPrice}}},46212:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(58660),s=r(64776),a=r(77072),o=r(59396);function c({children:e,title:t,description:r,isWaiting:c,modalState:l,confirmColor:d="accent",confirmLabel:u=(0,o.c)("Yes"),declineLabel:p=(0,o.c)("No"),onClose:m,onSuccess:h,zIndex:y}){const g=(0,n.useCallback)((()=>{h()}),[h]);return n.createElement(s.wJ,{isOpen:l.isOpen,onOpenChange:l.onOpenChange},e?n.createElement(s.Qn,null,e):null,n.createElement(s.EX,{closeButtonAccessibilityLabel:(0,o.c)("Close Modal"),header:t,size:"s",zIndex:y,onClose:m},n.createElement(s.aU,null,n.createElement(a.a,{color:"primary"},r)),n.createElement(s._A,null,n.createElement(s.YB,null,n.createElement(s.cT,null,n.createElement(i.q,{label:p,onPress:m})),n.createElement(i.q,{color:d,label:u,waiting:c,onPress:g})))))}},23208:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(42476),i=r(11504),s=r(97104),a=r(6968),o=r(32036),c=r(93980),l=r(83216),d=r(37365),u=r(52180),p=r(66780),m=r(13436),h=r(29208),y=r(91320),g=r(51012),f=r(42784);const v={modalContainer:"Modal-modalContainer-E0ECbh",modalBackdrop:"Modal-modalBackdrop-B7kPM7",modal:"Modal-modal-SlW5fl",small:"Modal-small-QidBqi Modal-modal-SlW5fl",medium:"Modal-medium-tDj6qd Modal-modal-SlW5fl",large:"Modal-large-aLJPzk Modal-modal-SlW5fl"},b=(0,o.c)(l.c.modalSpeed),S=1e3*b,P={ease:"easeOut",duration:b},I={ease:d.c.motionEasing,duration:b},E={opacity:P},w={enter:{opacity:1,transition:E},exit:{opacity:0,transition:E}},C={scale:I,opacity:P},O={enter:{opacity:1,scale:1,transition:C},exit:{opacity:0,scale:.95,transition:C}};function M(e,t){const r=function(e){if(function(e){return e.nativeEvent instanceof MouseEvent}(e))return e.target;const t=e.changedTouches;if(1===t.length){const e=t[0];return document.elementFromPoint(e.clientX,e.clientY)}return null}(e);if(r){const e=s.findDOMNode(t);return!e||!e.contains(r)}return!1}function T({children:e,className:t,backdropClassName:r=v.modalBackdrop,containerClassName:o=v.modalContainer,size:l=f.c.Medium,isOpen:d,shouldTrackOnClose:b=!1,preventCloseOnBackdropPress:P=!1,onModalClose:I}){const E=(0,i.useRef)(null),C=(0,i.useRef)(!1),T=(0,i.useCallback)((e=>{C.current=M(e,E.current)}),[]),D=(0,i.useCallback)((e=>{!P&&C.current&&M(e,E.current)&&I(),C.current=!1}),[I,P]),k=(0,i.useCallback)((e=>{C.current=!1}),[]),x=(0,i.useCallback)((e=>{C.current=!1}),[]),A=(0,i.useCallback)((e=>{const t=e.keyCode;t===a.k0?c.yE(e):t===a.UX&&(e.preventDefault(),e.stopPropagation(),I(),c.yQ())}),[I]),R=(0,i.useCallback)((e=>{E.current=e,e&&c.kV(s.findDOMNode(e))}),[]);return(0,y.c)({},d),function(e,t=!1){const{metricsPage:r}=(0,h.e0)(),n=(0,m.c)(e);(0,i.useEffect)((()=>{n&&!e&&t&&(0,u.WI)("metrics").trackView({page:r,action:p.Ke})}),[e,n,t,r])}(d,b),(0,i.useEffect)((()=>{let e;return d&&(e=window.setTimeout(c.GC,S),document.addEventListener("keydown",A)),()=>{e&&window.clearTimeout(e),d&&document.removeEventListener("keydown",A)}}),[d,A]),i.createElement(g.c,{className:o,closeDelayMilliseconds:S,isOpen:d},i.createElement(n.Iz,null,d?i.createElement(n.q4.div,{key:"backdrop",animate:"enter",className:r,exit:"exit",initial:"exit",variants:w,onMouseDown:T,onMouseUp:D,onTouchCancel:x,onTouchEnd:D,onTouchMove:k,onTouchStart:T},i.createElement(n.q4.div,{key:"modal",ref:R,animate:"enter",className:t||v[l],exit:"exit",initial:"exit",variants:O},e)):void 0))}},79240:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(27256);const s={modalBody:"ModalBody-modalBody-_vZ7B0",modalScroller:"ModalBody-modalScroller-W8q7m0 ModalBody-modalBody-_vZ7B0",innerModalBody:"ModalBody-innerModalBody-P8kk_7"};var a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=n.forwardRef(((e,t)=>{var r=e,{children:a,className:m,innerClassName:h=s.innerModalBody}=r,y=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(r,["children","className","innerClassName"]);const g=y.scrollDirection!==i.y.None;return m||(m=g?s.modalScroller:s.modalBody),n.createElement(i.c,(f=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({ref:t},y),o(f,c({className:m}))),g?n.createElement("div",{className:h},a):a);var f}))},37768:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(22916),s=r(13172);const a={modalContent:"ModalContent-modalContent-EmjBoq",closeButton:"ModalContent-closeButton-GoBA4S Link-link-vSsQW1"};function o({children:e,className:t=a.modalContent,onModalClose:r}){return n.createElement("div",{className:t},n.createElement(i.c,{className:a.closeButton,onPress:r},n.createElement(s.c,null)),e)}},58724:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(52612);const s={container:"ModalError-container-_5URJn",icon:"ModalError-icon-nlZ6Vx",message:"ModalError-message-fo2iPU"};function a({message:e}){return n.createElement("div",{className:s.container},n.createElement(i.c,{className:s.icon}),n.createElement("div",{className:s.message},e))}},16648:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);const i={modalFooter:"ModalFooter-modalFooter-LfeJsh",button:"ModalFooter-button-EeWRSk Button-button-TxWeuE Link-link-SxPFpG",splitButton:"ModalFooter-splitButton-t8hk65 ModalFooter-button-EeWRSk Button-button-TxWeuE Link-link-SxPFpG"};function s({children:e,className:t=i.modalFooter}){return n.createElement("div",{className:t},e)}},84480:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);const i={buttonBar:"ModalFooterButtonBar-buttonBar-xxZyHc"};function s({children:e,className:t=i.buttonBar}){return n.createElement("div",{className:t},e)}},58176:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var n=r(11504),i=r(3008),s=r(64776);function a({leftButton:e,primaryButton:t,rightButton:r}){return n.createElement(s.YB,null,n.createElement(i.ye,{align:["stretch",e?"space-between":"right"],gap:"m",grow:!0,orientation:"horizontal"},e,r),t)}},72840:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);const i={modalHeader:"ModalHeader-modalHeader-NxmPxS"};function s({children:e,className:t=i.modalHeader}){return n.createElement("div",{className:t},e)}},87960:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);const i={modalSubheader:"ModalSubheader-modalSubheader-HDOykp"};function s({children:e,className:t=i.modalSubheader}){return n.createElement("div",{className:t},e)}},77892:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(77072);const s={header:"SectionHeader-header-kxLnYk"};function a({title:e}){return n.createElement("div",{className:s.header},n.createElement(i.a,{color:"muted",font:"body-1"},e))}},55202:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(58660),s=r(99724),a=r(64776),o=r(7988),c=r(59396);const l={modalContainer:"UpsellModal-modalContainer-qch6zo",backgroundContainer:"UpsellModal-backgroundContainer-RikWr2",closeButtonContainer:"UpsellModal-closeButtonContainer-qehKWE"};function d({children:e,backgroundClassName:t=l.backgroundContainer,backgroundSrc:r,backgroundColor:d,header:u,isDismissible:p=!1,isOpen:m,onClose:h}){return n.createElement(a.wJ,{isDismissible:p,isOpen:m,onClose:h},n.createElement(a.mt,{header:u},n.createElement("div",{className:l.modalContainer},p?n.createElement("div",{className:l.closeButtonContainer},n.createElement(i.wP,{accessibilityLabel:(0,c.c)("Close"),icon:s.default,iconSize:"xl",insetFocus:!0,transparent:!0,onPress:h})):null,n.createElement("div",{className:t,style:{backgroundColor:d}},r?n.createElement("img",{key:r,height:"100%",src:r,width:"100%"}):null),n.createElement(o.aS,null,e))))}},72080:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(58938),s=r(38828);class a extends n.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e,t){super(e,t),this.state={hasError:!1}}componentDidCatch(e,t){s.c.error(e);const r={extra:{componentStack:t.componentStack}};i.wx(e,r)}render(){const{children:e,errorComponent:t}=this.props;return this.state.hasError?n.createElement(t,null):n.createElement(n.Fragment,null,e)}}const o=a},66984:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(11504),i=r(27256),s=r(58224),a=r(70684);const o={pageScroller:"Page-pageScroller-b8QY9N Scroller-scroller-S6_dko"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t)=>l(e,d(t)),f=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r};function v(e){var t=e,{className:r=o.pageScroller,skipScrollRestore:c=!1,onScrollPositionChange:l}=t,d=f(t,["className","skipScrollRestore","onScrollPositionChange"]);const u=(0,s.c)({key:"Page",shouldRestoreImmediately:!0,onScrollPositionChange:l}),p=c?{onScrollPositionChange:l}:u.scrollRestoreProps;return n.createElement(a.c,null,n.createElement(i.c,g(y(y({},d),p),{className:r})))}},1256:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(27256),s=r(58224);const a={pageContentScroller:"PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"};var o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};const y=n.forwardRef(((e,t)=>{var r=e,{className:o=a.pageContentScroller,skipScrollRestore:m=!1,onScrollPositionChange:y}=r,g=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(r,["className","skipScrollRestore","onScrollPositionChange"]);const f=(0,s.c)({key:"PageContent",shouldRestoreImmediately:!0,onScrollPositionChange:y}),v=m?{onScrollPositionChange:y}:f.scrollRestoreProps;return n.createElement(i.c,(b=h(h({ref:t},g),v),c(b,l({className:o}))));var b}))},70684:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(72080),s=r(77872);function a({children:e}){return n.createElement(i.c,{errorComponent:s.c},e)}},16416:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(27256);const s={emptyPageContentScroller:"EmptyPageContent-emptyPageContentScroller-GSNujz PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko",content:"EmptyPageContent-content-soks97",icon:"EmptyPageContent-icon-F09nMX",imgIcon:"EmptyPageContent-imgIcon-WJ9xbo",title:"EmptyPageContent-title-ep4YLZ",description:"EmptyPageContent-description-_nthc5",footer:"EmptyPageContent-footer-mx9XBB"};var a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e},p=(e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r};function m(e){var t=e,{children:r,className:a=s.emptyPageContentScroller,contentClassName:o=s.content,icon:c,iconSrc:l,iconClassName:d=s.icon,titleClassName:m=s.title,title:h,descriptionClassName:y=s.description,description:g,footerClassName:f=s.footer,footer:v}=t,b=p(t,["children","className","contentClassName","icon","iconSrc","iconClassName","titleClassName","title","descriptionClassName","description","footerClassName","footer"]);return n.createElement(i.c,u({className:a},b),n.createElement("div",{className:o},c?n.createElement("span",{className:d},c):null,l?n.createElement("img",{className:s.imgIcon,src:l}):null,h?n.createElement("div",{className:m},h):null,g?n.createElement("div",{className:y},g):null,r),v?n.createElement("div",{className:f},v):null)}},97308:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(52612),s=r(16416),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e};function p(e){return n.createElement(s.c,u({icon:n.createElement(i.c,null)},e))}},86672:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(59396),s=r(99192),a=r(97308);function o({className:e}){return n.createElement(a.c,{className:e,description:(0,i.c)("We're having trouble finding this page. It might have been deleted"),title:(0,i.c)("Not found")},n.createElement(s.c,{to:"#"},(0,i.c)("Go Home")))}},77872:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(59396),s=r(97308);function a({children:e}){return n.createElement(s.c,{description:(0,i.c)("An unexpected error occurred."),title:(0,i.c)("Something went wrong")},e)}},50536:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(43196);const s=(0,n.M3)((0,i.c)("columnWidthMultiplier"),(e=>Math.floor(70*(e-1)+130)))},27272:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(87512),s=r(96743);const a=(0,i.c)((function(e){return t=>e===s.K.Photo?t.ui.photoPlayer:t.ui.audioVideoPlayer})),o=(0,i.c)((function(e,t){return(0,n.M3)(a(e),(e=>e[t]))}))},51012:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(97104),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p({className:e,style:t,children:r,forwardedRef:s,isOpen:a=!0,closeDelayMilliseconds:o=0,allowInteractionEventBubbling:c=!1,onOpen:l,onClose:d}){const[u,p]=(0,n.useState)(a),m=(0,n.useCallback)((e=>{c||e.stopPropagation()}),[c]);return(0,n.useEffect)((()=>{let e;return a?(p(!0),null==l||l()):e=window.setTimeout((()=>{p(!1),null==d||d()}),o),()=>{e&&window.clearTimeout(e)}}),[o,a,d,l]),u?i.createPortal(n.createElement("div",{ref:s,className:e,style:t,onBlur:m,onClick:m,onFocus:m,onMouseDown:m,onMouseUp:m,onTouchCancel:m,onTouchEnd:m,onTouchMove:m,onTouchStart:m},r),document.body):null}const m=n.forwardRef(((e,t)=>{return n.createElement(p,(r=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(r,o({forwardedRef:t}))));var r}))},27256:(e,t,r)=>{"use strict";r.d(t,{y:()=>y,c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=(r(67200),r(35768));const o={scroller:"Scroller-scroller-S6_dko",none:"Scroller-none-nCSoNb",vertical:"Scroller-vertical-n45J8D",auto:"Scroller-auto-gN2JNU",horizontal:"Scroller-horizontal-KIzIP3",omni:"Scroller-omni-bAqZII"};var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e=>(e.None="none",e.Vertical="vertical",e.Horizontal="horizontal",e.Omni="omni",e))(y||{});function g({forwardedRef:e,className:t=o.scroller,style:r,children:n,scrollDirection:c="vertical",autoScroll:l=!0,smoothScroll:d=!1,targetScrollTop:u,targetScrollLeft:p,onScrollPositionChange:m}){const h=(0,s.useRef)(null),y=(0,s.useCallback)((e=>{m&&null!=h.current&&h.current===e.target&&m({scrollTop:h.current.scrollTop,scrollLeft:h.current.scrollLeft})}),[h,m]);return(0,s.useEffect)((()=>{null==h.current||null==u&&null==p||h.current.scrollTo({top:u,left:p,behavior:d?"smooth":"auto"})}),[h,u,p,d]),s.createElement("div",{ref:(0,a.c)(e,h),className:i()(t,o[c],l&&o.auto),style:r,onScroll:y},n)}const f=s.forwardRef(((e,t)=>{return s.createElement(g,(r=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},e),l(r,d({forwardedRef:t}))));var r}))},94644:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(55156);const s=window.ResizeObserver||i.Q,a=function(e){const t=(0,n.useRef)(null),r=(0,n.useRef)(null);return(0,n.useEffect)((()=>(t.current&&(r.current=new s(e),r.current.observe(t.current)),()=>{var e;null==(e=r.current)||e.disconnect(),r.current=null})),[e]),t};var o=r(28988),c=r(58224),l=r(27256);const d={scroller:"VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"};var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r};function v(e,t){if(t.shouldCenterCell){const r=(t.viewportDimension-t.cellDimension)/2,n=Math.round(e-r);return Math.max(n,0)}return e-(t.offset||0)}function b(e){var t=e,{className:r=d.scroller,scrollerKey:i="VirtualListScroller",storageKey:s,scrollerStyle:u,virtualListClassName:p,layout:m,keyPropName:h,resizeTimeout:y,scrollDirection:b=l.y.Vertical,emptyIndices:S,targetScrollIndex:P,shouldCenterScrollIndex:I=!1,autoScroll:E=!0,smoothScroll:w=!0,renderAboveList:C,renderBelowList:O,renderRightList:M,onListReady:T,onScrollPositionChange:D}=t,k=f(t,["className","scrollerKey","storageKey","scrollerStyle","virtualListClassName","layout","keyPropName","resizeTimeout","scrollDirection","emptyIndices","targetScrollIndex","shouldCenterScrollIndex","autoScroll","smoothScroll","renderAboveList","renderBelowList","renderRightList","onListReady","onScrollPositionChange"]);const[x,A]=(0,n.useState)({scrollTop:0,scrollLeft:0}),[R,N]=(0,n.useState)({width:0,height:0}),L=!(!R.width&&!R.height),[j,U]=(0,n.useState)(void 0),F=(0,n.useCallback)((([e])=>{N({width:e.target.clientWidth,height:e.target.clientHeight})}),[]),V=a(F),_=(0,n.useMemo)((()=>m.getListHeight?m.getListHeight(k.totalSize):R.height),[m,R.height,k.totalSize]),W=(0,n.useMemo)((()=>{if(!j||!R||null==P)return;const e=m.getPositionForIndex(Math.max(P,0),j);return function(e,t,r){const{shouldCenterCell:n,measurements:i,listMeasurements:s}=r;return{scrollTop:e===l.y.Vertical||e===l.y.Omni?v(t.cellY,{shouldCenterCell:n,viewportDimension:i.height,offset:s.outerPaddingTop,cellDimension:t.cellHeight}):0,scrollLeft:e===l.y.Horizontal||e===l.y.Omni?v(t.cellX,{shouldCenterCell:n,viewportDimension:i.width,offset:s.outerPaddingLeft,cellDimension:t.cellWidth}):0}}(b,e,{shouldCenterCell:I,measurements:R,listMeasurements:j})}),[m,j,R,b,I,P]);let B,H;W&&(B=W.scrollTop,H=W.scrollLeft);const z=(0,n.useCallback)((({scrollLeft:e,scrollTop:t})=>{A({scrollTop:t,scrollLeft:e}),D&&D({scrollLeft:e,scrollTop:t})}),[D]),{isWaitingToRestoreScrollPosition:G,scrollRestoreProps:q,onScrollPositionReady:K}=(0,c.c)({key:i,storageKey:s,onScrollPositionChange:z}),Q=(0,n.useCallback)((e=>{U(e),K(),T&&T(e)}),[T,K]);return n.createElement(l.c,g({ref:V,autoScroll:E,className:r,scrollDirection:b,smoothScroll:w,style:u,targetScrollLeft:H,targetScrollTop:B},q),C&&!G?C(R):null,L?n.createElement(o.c,g({className:p,emptyIndices:S,isWaitingToRestoreScrollPosition:G,keyPropName:h,layout:m,scrollLeft:x.scrollLeft,scrollTop:x.scrollTop,viewportHeight:R.height,viewportWidth:R.width,onListReady:Q},k)):null,M&&!G?M(R.height,_):null,O&&!G?O(R):null)}},58224:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(16512);function s({key:e,storageKey:t,shouldRestoreImmediately:r=!1,onScrollPositionChange:s}){const a=null!=t?t:i.c.getKey(`${e}!scrollPosition`),o=(0,n.useRef)(null),[c,l]=(0,n.useState)(!!i.c.get(a)),[d,u]=(0,n.useState)(void 0),[p,m]=(0,n.useState)(void 0),h=(0,n.useCallback)((()=>{const e=i.c.get(a);e&&(u(e.scrollTop),m(e.scrollLeft))}),[a]),y=(0,n.useCallback)((e=>{o.current=e,s&&s(e)}),[s]);return(0,n.useEffect)((()=>{const e=i.c.get(a);return e&&(l(!0),r&&(u(e.scrollTop),m(e.scrollLeft))),()=>{const e=o.current;o.current=null,e&&(e.scrollTop||e.scrollLeft)?i.c.set(a,e):i.c.remove(a)}}),[r,a]),(0,n.useEffect)((()=>{(d||p)&&(l(!1),u(void 0),m(void 0))}),[p,d]),{isWaitingToRestoreScrollPosition:c,scrollRestoreProps:c?{targetScrollTop:d,targetScrollLeft:p,smoothScroll:!1,onScrollPositionChange:y}:{onScrollPositionChange:y},onScrollPositionReady:h}}},23748:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(89080),i=r.n(n),s=r(11504),a=r(59396),o=r(42784);const c={spinner:"Spinner-spinner-Q4B7Qw spin-spin-H8VRGl",tiny:"Spinner-tiny-RnnyAv",small:"Spinner-small-vM7K9W",medium:"Spinner-medium-kbQH5J",large:"Spinner-large-l5wVYN"};function l({className:e=c.spinner,size:t=o.c.Medium}){return s.createElement("div",{"aria-label":(0,a.c)("Loading"),className:i()(e,c[t])})}},47036:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});const n={iconSize:"l",insetFocus:!0,size:"m",transparent:!0}},46860:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=(e=>(e.Up="up",e.Right="right",e.Down="down",e.Left="left",e))(n||{});const i=n},24252:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=(e=>(e.Default="default",e.Primary="primary",e.Success="success",e.Danger="danger",e))(n||{});const i=n},42784:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=(e=>(e.Tiny="tiny",e.Small="small",e.Medium="medium",e.Large="large",e))(n||{});const i=n},35768:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}},87464:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(27876),s=r(50660),a=r(81764),o=r(34708),c=r(19388),l=r(8436),d=r(58980);function u(e="",t=!1,r=!0){const u=(0,i.OY)(),{uuid:p}=(0,i.w1)(l.c),m=(0,i.w1)(s.c),{friends:h,isPopulated:y}=(0,d.c)(c.c,o.c.actions.fetchCommunityFriends);return(0,n.useEffect)((()=>{u((0,a.QD)()),u((0,a.A$)())}),[u]),(0,n.useMemo)((()=>{if(!y)return[];const n=[];Object.keys(m).map((e=>{n.push(m[e])}));let i=n;const s=n.find((e=>e.uuid===p));(null==s?void 0:s.admin)||r||(i=n.filter((e=>!e.restricted)));const a=e.toLowerCase();return i.filter((e=>e.uuid!==p&&(e.title.toLowerCase().includes(a)||e.username.toLowerCase().includes(a))&&(t||!h.find((t=>t.username===e.username)))))}),[h,m,t,r,y,e,p])}},24180:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(27876),s=r(46572),a=r(32380),o=r(58980),c=r(56784);function l(e,t=!0){const r=(0,i.OY)(),{details:{anonymous:l,isFullUser:d},isPopulated:u}=(0,o.c)(s.c,a.c.actions.fetchUserDetails,!t),[p,m]=(0,n.useState)(),{data:h}=(0,i.w1)(c.mk.endpoints.GetPendingRequestsCount.select({type:e}));return(0,n.useEffect)((()=>{var e;h&&m(null!=(e=h.friendRequestsCount)?e:0)}),[h]),(0,n.useEffect)((()=>{if(void 0!==p||!t||l||!d||!u)return;const n=r(c.mk.endpoints.GetPendingRequestsCount.initiate({type:e}));return()=>{n&&"unsubscribe"in n&&n.unsubscribe()}}),[p,r,l,d,u,t,e]),{count:null!=p?p:0,isPopulated:void 0!==p}}},19768:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(27876),s=r(57864),a=r(90156);const o=(0,s.M3)(a.c,(e=>e.announcements)),c=(0,s.M3)(o,(e=>e.filter((e=>!e.read))));var l=r(81764),d=r(29164),u=r(57516),p=r(95944),m=r(17807),h=r(86960),y=r(24180),g=r(86148),f=r(82420),v=r(39864),b=r(58980),S=r(17920),P=r(19732);function I(){var e;const t=(0,i.OY)(),r=(0,i.w1)(d.c),s=(0,S.c)(),a=(0,i.w1)(f.c),o=(0,i.w1)(c),I=(0,g.c)(),{data:E,isSuccess:w}=(0,P.Jk)(void 0,{skip:!I}),{count:C,isPopulated:O}=(0,y.c)(v.gV.Received,s),{invites:M,isPopulated:T}=(0,b.c)(u.c,p.c.actions.fetchReceivedInvites,!s),{invites:D,isPopulated:k}=(0,b.c)(m.c,h.c.actions.fetchReceivedInvites,!s);return(0,n.useEffect)((()=>{s&&t((0,l.UJ)())}),[t,s,r]),{friendInvites:C,homeInvites:a.length,serverInvites:M.length+D.length,unreadAnnouncements:o.length,unreadReports:null!=(e=null==E?void 0:E.reportsUnreadCount)?e:0,isPopulated:T&&k&&O&&(!I||w)}}},86148:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(27876),i=r(34908),s=r(10868);function a(){const e=(0,s.c)(),t=(0,n.w1)(i.c);return e&&t.length>0}},43196:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(32516);const s=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>t[e]))}))},34328:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(36856);const s=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>!!t[e]))}))},68684:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(8436);const s=(0,n.M3)(i.c,(e=>!e.isFullUser))},70456:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(8436);const s=(0,n.M3)(i.c,(e=>e.isSignedIn))},82420:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(66028);const s=(0,n.M3)(i.c,(({invites:e})=>e.filter((e=>e.home))))},8436:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=e=>e.user},46572:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(93564);const s=(0,n.M3)(i.c,(e=>e.core.user))},66028:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(57864),i=r(70068),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=(0,n.M3)(i.c,(e=>((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({},e.desktop)))},48112:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(8436);const s=(0,n.M3)(i.c,(e=>e.lockState))},32380:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(44212),i=r(44500),s=r(35860),a=r(69956),o=r(93808),c=r(96048),l=r(1692),d=r(87220),u=r(45372),p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e};function v(e,t,r){s._u(t,[s.Sg,s.Qh,s.Im])&&(e.showViewStateSyncPrompt={page:l.sF.Default,origin:r})}const b=(0,n.is)({name:"user",initialState:{isPopulated:!1,isPending:!1,isUpdating:!1,isDeleting:!1,error:null,isNewUser:!1,details:{id:-1,uuid:"",thumb:"",friendlyName:"",email:"",username:"",anonymous:!0,isFullUser:!1},invite:{error:null,isPending:!1,isPopulated:!1},viewStateSync:{error:null,isPending:!1,isPopulated:!1}},reducers:{fetchUserDetails(e,t){(0,u.G8)(e)},fetchUserDetailsSucceeded(e,{payload:t}){(0,u.mM)(e),e.details=t.details},fetchUserDetailsFailed(e,{payload:t}){(0,u.C)(e,t.error)},fetchViewStateSync(e,t){(0,u.G8)(e.viewStateSync)},fetchViewStateSucceeded(e,{payload:t}){(0,u.mM)(e.viewStateSync),null===t.consent?e.viewStateSync.consent="notSet":e.viewStateSync.consent=t.consent?"given":"denied"},fetchViewStateSyncFailed(e,{payload:t}){(0,u.C)(e.viewStateSync,t.error)},setIsNewUser(e){e.isNewUser=!0},updateUserDetails(e,t){e.isUpdating=!0},updateUserDetailsSucceeded(e,{payload:t}){e.isUpdating=!1,e.details=f(f({},e.details),t.details)},updateUserDetailsFailed(e,{payload:t}){(0,u.C)(e,t.error),e.isUpdating=!1},deleteUserAvatar(e,t){e.error=null,e.isDeleting=!0},deleteUserAvatarSucceeded(e){e.isDeleting=!1},deleteUserAvatarFailed(e,{payload:t}){(0,u.C)(e,t.error),e.isDeleting=!1},updateViewStateSyncConsent(e,t){e.isUpdating=!0},updateViewStateSyncSucceeded(e,{payload:t}){e.viewStateSync.consent=t.consent?"given":"denied",e.isUpdating=!1},clearError(e,t){e.error=null},showViewStateSyncPrompt(e,{payload:t}){e.showViewStateSyncPrompt=t.viewStateSyncConfig},getInviteUrl(e){(0,u.G8)(e.invite)},getInviteUrlSucceeded(e,{payload:t}){(0,u.mM)(e.invite),e.invite.url=t.url},getInviteUrlFailed(e,{payload:t}){(0,u.C)(e.invite,t.error)},languageChanged(){}},extraReducers:e=>{e.addCase(c.c.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{v(e,t.provider.identifier,i.Ih)})),e.addCase(c.c.actions.rateSucceeded,((e,{payload:t})=>{t.type!==o.WW.Show&&t.type!==o.WW.Season&&t.type!==o.WW.Episode&&t.type!==o.WW.Movie||v(e,t.provider.identifier,i.yW)})),e.addCase(d.c.actions.ended,((e,{payload:t})=>{if(t.metadataType===o.WW.Movie||t.metadataType===o.WW.Episode){const{providerIdentifier:r}=(0,a.c)(t.source);v(e,r,i.gZ)}}))}})},1692:(e,t,r)=>{"use strict";r.d(t,{Z9:()=>n,gd:()=>i,sF:()=>s});var n=(e=>(e.Pending="pending",e.Locked="locked",e.Unlocked="unlocked",e))(n||{}),i=(e=>(e.Empty="",e.Unsubscribed="unsubscribed",e.Active="active",e.Error="error",e.Removed="removed",e))(i||{}),s=(e=>(e.Default="default",e.LearnMore="learnMore",e))(s||{})},86196:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(45944),i=r(59396);function s(e,t){var r,s;if(!e)return"";if(null==(s=null==(r=null==e?void 0:e.data)?void 0:r.errors)?void 0:s[0]){const r=(0,n.M)(e.data.errors[0],t);if(r)return r}return e.message?e.message:(0,i.c)("Something went wrong. Please try again in a few minutes.")}},6156:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n=["free"];function i(e,t){if(!t)return!0;const r=e.find((e=>e.id===t));return!(!r||r.subscriptionType&&n.includes(r.subscriptionType))}},12396:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(44212).is)({name:"metadataItemSlice",initialState:{error:null,isDeleting:!1,isDeleted:!1},reducers:{removeViews(e,t){e.isDeleted=!1,e.isDeleting=!0,e.error=null},removeViewsSucceeded(e){e.isDeleted=!0,e.isDeleting=!1,e.error=null},removeViewsFailed(e,{payload:{error:t}}){e.isDeleted=!1,e.isDeleting=!1,e.error=t},clear(e){e.error=null,e.isDeleted=!1,e.isDeleting=!1}}})},59382:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(44212),i=r(35860),s=r(96048),a=r(36048);const o=(0,n.is)({name:"activity",initialState:{staleMetadataItems:[],staleProfileHubs:[],comments:{}},reducers:{markProfileHubPopulated(e,{payload:t}){e.staleProfileHubs=e.staleProfileHubs.filter((e=>e!==t.hub))},staleProfileHub(e,{payload:t}){e.staleProfileHubs.push(t.hub)},createComment(e,{payload:t}){e.comments[t.activity]={comment:t.comment}},clearComment(e,{payload:t}){e.comments[t.activity].comment=void 0}},extraReducers:e=>{e.addCase(s.c.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{t.guid&&!i._u(t.provider.identifier,[i.Im])&&e.staleMetadataItems.push(t.guid),e.staleProfileHubs.push(a.kH.WatchHistory),t.played&&e.staleProfileHubs.push(a.kH.Watchlist)})),e.addCase(s.c.actions.fetchSucceeded,((e,{payload:t})=>{t.guid&&i._u(t.providerIdentifier,i.Im)&&(e.staleMetadataItems=e.staleMetadataItems.filter((e=>e!==t.guid)))})),e.addCase(s.c.actions.toggleWatchlistSucceeded,(e=>{e.staleProfileHubs.push(a.kH.Watchlist)})),e.addCase(s.c.actions.rateSucceeded,(e=>{e.staleProfileHubs.push(a.kH.Ratings)}))}})},56632:(e,t,r)=>{"use strict";r.d(t,{It:()=>a,MB:()=>o,fX:()=>s,y4:()=>i,yi:()=>c});var n=r(39864),i=(e=>(e.Watchlist="ActivityWatchlist",e.MetadataMessage="ActivityMetadataMessage",e.Rating="ActivityRating",e.WatchHistory="ActivityWatchHistory",e.Post="ActivityPost",e.WatchRating="ActivityWatchRating",e.WatchSession="ActivityWatchSession",e))(i||{});const s={ActivityWatchlist:n.IL.Watchlist,ActivityMetadataMessage:n.IL.MetadataMessage,ActivityRating:n.IL.Rating,ActivityWatchHistory:n.IL.WatchHistory,ActivityPost:n.IL.Post,ActivityWatchRating:n.IL.WatchRating,ActivityWatchSession:n.IL.WatchSession};var a=(e=>(e.Poster="portrait",e.Landscape="landscape",e))(a||{});n.QN.Movie;var o=(e=>(e.GetActivityFeed="GetActivityFeed",e.GetActivityById="GetActivityById",e.RefreshGetActivityFeed="RefreshGetActivityFeed",e))(o||{});const c="activityDetailCard"},32956:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(35860),a=r(87616),o=r(37984),c=r(29164);const l={card:"ActivityCard-card-QdH_ft"};function d({children:e,server:t,provider:r}){const[,d]=(0,o.c$)(),u=s._u(d.identifier,s.Im),p=(0,i.w1)(c.c),m=(0,i.w1)(a.c),h=(0,n.useMemo)((()=>u||r||t||!m?d:m),[m,u,r,t,d]);return n.createElement(o.cp,{machineIdentifier:(null==t?void 0:t.machineIdentifier)||p.machineIdentifier,providerIdentifier:r?null==r?void 0:r.identifier:h.identifier},n.createElement("div",{className:l.card},e))}},16160:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(89080),i=r.n(n),s=r(11504),a=r(3008),o=r(42152),c=r(66780),l=r(59380),d=r(90068),u=r(37984),p=r(64156),m=r(2024),h=r(8684),y=r(56632),g=r(36350),f=r(34008),v=r(45376),b=r(60344),S=r(25576);const P={body:"ActivityCardBody-body-T0Y7e8",poster:"ActivityCardBody-poster-uZDK9s",coverPoster:"ActivityCardBody-coverPoster-aTxkTN",children:"ActivityCardBody-children-HwB4tO"};function I({activity:e,imageSrc:t,imageType:r,metadataItem:n,isPrimary:I,children:E}){const w=(0,h.c)(),[C,O]=(0,u.c$)(),M=(0,f.c)(),T=(0,v.c)(n),D=(0,b.c)(),k=(0,S.c)(),x=D||k,A="ActivityWatchSession"===e.__typename,R=(0,d.c)(n,"key"),N=(0,d.c)(n,"grandparentKey"),L=r===y.It.Landscape?"landscape":"portrait",j=!M&&!x||T&&I,U=(0,s.useCallback)((()=>{w({action:c.I9})}),[w]),F=(0,p.cp)({width:l.o[r].width,height:l.o[r].height,server:C,provider:O,url:t,format:"webp"}),V=(0,s.useMemo)((()=>({children:e})=>e?s.createElement("div",{className:P.children},e):null),[]);return s.createElement("div",{className:P.body},s.createElement(a.ye,null,j?s.createElement("div",{className:i()(P.poster,r===y.It.Poster&&P.coverPoster)},s.createElement(o.mw,{posterStyle:L,width:l.o[r].width},s.createElement(m.c,{className:P.poster,durationMilliseconds:0,fit:m.A.Contain,height:l.o[r].height,src:F,width:l.o[r].width}),x||"ActivityWatchSession"!==e.__typename?null:s.createElement(g.c,{activity:e}),R&&!A?s.createElement(o.ic,{href:R,posterStyle:L,onPress:U}):null,N&&A?s.createElement(o.ic,{href:N,posterStyle:L,onPress:U}):null)):null,s.createElement(V,null,E)))}},19880:(e,t,r)=>{"use strict";r.d(t,{c:()=>re});var n=r(11504),i=r(27876),s=r(58660),a=r(32500),o=r(92456),c=r(3728),l=r(53848),d=r(1480),u=r(3008),p=r(41744),m=r(77072),h=r(96856),y=r(9868),g=r(14252),f=r(19264),v=r(66780),b=r(44500),S=r(35860),P=r(59396),I=r(72772),E=r(17884),w=r(93808),C=r(87096),O=r(63856),M=r(92756),T=r(69592),D=r(96048),k=r(74364),x=r(87616),A=r(37984),R=r(8684),N=r(46212),L=r(34008),j=r(60344),U=r(25576),F=r(57864),V=r(2100);const _=(0,F.M3)(V.c,(e=>e.activity.staleMetadataItems)),W=function(e){return(0,F.M3)(_,(t=>!!e&&t.includes(e)))};var B=r(97008),H=r(97884),z=r(21040),G=r(11528);const q={footer:"ActivityCardFooter-footer-TxzXSG"};var K=Object.defineProperty,Q=Object.defineProperties,$=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&Z(e,r,t[r]);if(Y)for(var r of Y(t))J.call(t,r)&&Z(e,r,t[r]);return e},te=(e,t)=>Q(e,$(t));function re({activity:e,metadataItem:t,isDisabled:r,userState:F,commentCount:V}){const _=(0,i.OY)(),K=(0,R.c)(),[Q,$]=(0,A.c$)(),Y=(0,i.w1)(x.c),X=S._u($.identifier,S.Im),J=X?$:Y,Z=(0,i.w1)(g.c),re="ActivityWatchSession"===e.__typename,ne="Report"===e.__typename,ie=ne?e.user:e.userV2,se=(0,y.y)(),ae=(0,y.y)(),oe=(0,i.w1)(f.c),ce=(0,i.w1)(W(t.guid)),le=(0,I.c)(t.sourceURI),de=(0,z.c)(le.isStale),ue=(0,n.useRef)(),pe=(0,n.useRef)(!1),me=(0,n.useRef)(!1),[he,ye]=(0,n.useState)(!1),[ge,fe]=(0,n.useState)(!1),{data:ve}=(0,i.w1)(G.mk.endpoints.GetUserDetails.select({uuid:ie.id})),be=(0,L.c)(),Se=(0,j.c)(),Pe=(0,U.c)(),Ie=Se||Pe,Ee=ve?ve.user.isBlocked:ie.isBlocked,{onToggleWatchlist:we}=(0,E.c)(t),Ce=(0,T.c)(t),Oe=(0,I.c)(Ce),Me=(0,n.useMemo)((()=>te(ee({},F),{error:null,isPending:!1,isPopulated:!0,tempState:{}})),[F]),Te=le.isPopulated?le:Me,De=(0,n.useMemo)((()=>J&&!(0,C.S_)({server:Z,metadataItem:t,metadataItemState:Te,provider:J,stableUser:oe})),[t,Te,J,Z,oe]),ke=(0,n.useMemo)((()=>J&&(0,C._0)({server:Z,metadataItem:t,metadataItemState:Te,provider:J,stableUser:oe})),[t,Te,J,Z,oe]),xe=(0,n.useCallback)((()=>{J&&we({added:!ke})}),[ke,we,J]),Ae=(0,n.useCallback)((()=>{J&&(ye(!0),_(D.c.actions.playedStatusUpdateRequested({server:Z,provider:J,stableUser:oe,sourceURI:t.sourceURI,ratingKey:t.ratingKey,guid:t.guid,played:!De})),K({action:De?v.Yj:v.Mp}))}),[J,_,Z,oe,t.sourceURI,t.ratingKey,t.guid,De,K]),Re=(0,n.useCallback)((()=>{K({action:v.mG,origin:b.cl})}),[K]),Ne=(0,n.useCallback)((()=>{le.isPopulated?xe():(ye(!0),fe(!0),me.current=!0)}),[le.isPopulated,xe]),Le=(0,n.useCallback)((()=>{if(!le.isPopulated)return fe(!0),void(pe.current=!0);le.unviewedLeafCount||le.viewedLeafCount?(ue.current=De?le.viewedLeafCount:le.unviewedLeafCount,(De?ae:se).onOpen()):Ae()}),[se,ae,De,le.isPopulated,le.unviewedLeafCount,le.viewedLeafCount,Ae]);(0,n.useEffect)((()=>{if(t.type===w.WW.Season||t.type===w.WW.Episode){const e=t.type===w.WW.Episode?Te.grandparentWatchlistedAt:Te.parentWatchlistedAt,r=!!(Te.isPopulated&&Te.isStale||(null==Oe?void 0:Oe.isPopulated)&&(null==Oe?void 0:Oe.isStale)),n=Te.isPopulated&&Oe.isPopulated&&0===Object.keys(Oe.tempState).length&&e!==Oe.watchlistedAt;fe(!ne&&(r||n))}else fe(!ne&&!!Te.isStale&&(0,k.c)({type:t.type,sourceURI:t.sourceURI,metadataItemState:Te}))}),[ne,t.sourceURI,t.type,Te,Oe.isPopulated,null==Oe?void 0:Oe.isStale,Oe.tempState,Oe.watchlistedAt]),(0,n.useEffect)((()=>{(ge||ce)&&J&&!r&&_(D.c.actions.fetchRequested({server:Z,metadataItem:t,provider:J}))}),[_,r,ce,t,J,Z,ge]),(0,n.useEffect)((()=>{de&&!le.isStale&&(ye(!1),se.onClose(),ae.onClose())}),[se,ae,le.isPopulated,le.isStale,de]),(0,n.useEffect)((()=>{le.isPopulated&&(pe.current?(Le(),pe.current=!1):me.current&&(xe(),me.current=!1))}),[le.isPopulated,xe,Le]);const je=V&&V>1?(0,P.c)("comments"):(0,P.c)("comment"),Ue="ActivityWatchHistory"===e.__typename&&!!e.watchSession,Fe=!be||!Ue,Ve=(0,O.c)(t.type,De),_e=(0,M.c)(t.type,ke),We=(0,H.c)(ne?"report":"activity",{id:(0,B.c)(e),providerIdentifier:J&&X&&!S.QJ(J.identifier)?J.identifier:void 0});return!Q.isConnected||Ie||Ee||ne&&!t.key?null:n.createElement("div",{className:q.footer},n.createElement(u.ye,{align:"space-between",height:"100%",orientation:"horizontal",verticalAlign:"center",wrap:!1},Ie?null:n.createElement(u.ye,{gap:"s",orientation:"horizontal",paddingX:"m",verticalAlign:"center"},n.createElement(p.c,{href:We},n.createElement(s.c,{accessibilityLabel:(0,P.c)("Comments"),onPress:Re},n.createElement(a.default,{align:"baseline",size:"l"}))),Fe&&V?n.createElement(m.a,{color:"primary",font:"body-3"},n.createElement(p.c,{href:We,onPress:Re},(0,P.c)("{count} {label}",{count:V,label:je}))):null,Fe?null:n.createElement(m.a,{color:"primary",font:"body-3"},n.createElement(p.c,{href:We,onPress:Re},(0,P.c)("View comments")))),n.createElement(u.ye,{orientation:"horizontal",verticalAlign:"center"},ne||be||Ie?null:n.createElement(n.Fragment,null,n.createElement(h.o,{tooltip:n.createElement(m.a,{color:"muted",font:"body-3"},_e)},n.createElement(s.wP,{accessibilityLabel:_e,disabled:r||he,icon:ke?o.default:c.default,iconSize:"l",size:"xs",transparent:!0,onPress:Ne})),re?null:n.createElement(h.o,{tooltip:n.createElement(m.a,{color:"muted",font:"body-3"},Ve)},n.createElement(s.wP,{accessibilityLabel:Ve,disabled:r||he,icon:De?l.default:d.default,iconSize:"l",size:"xs",transparent:!0,waiting:pe.current,onPress:Le}))))),n.createElement(N.c,{children:null,description:(0,P.c)('Are you sure you want to mark {count} episodes in "{title}" as watched?',{count:ue.current,title:t.title}),isWaiting:he,modalState:se,title:(0,O.c)(t.type),onSuccess:Ae}),n.createElement(N.c,{children:null,description:(0,P.c)('Are you sure you want to mark {count} episodes in "{title}" as unwatched?',{count:ue.current,title:t.title}),isWaiting:he,modalState:ae,title:(0,O.c)(t.type,!0),onSuccess:Ae}))}},99524:(e,t,r)=>{"use strict";r.d(t,{X:()=>se,c:()=>ae});var n=r(11504),i=r(27876),s=r(88208),a=r(60952),o=r(92456),c=r(3008),l=r(41744),d=r(42152),u=r(77072),p=r(92432),m=r(13778),h=r(66780),y=r(44500),g=r(85052),f=r(35860),v=r(42728),b=r(87416),S=r(37156),P=r(59396),I=r(75560),E=r(86636),w=r(90068),C=r(93808),O=r(37984),M=r(29164),T=r(46204),D=r(23300),k=r(8684),x=r(46572),A=r(56632),R=r(58660),N=r(22509),L=r(93036),j=r(9868),U=r(38652),F=r(92784);const V=({activity:e,friend:t})=>{var r,i,s,a;const o=(0,k.c)(),[,c]=(0,U.Q5)(),l=(0,j.y)(),d="Report"===e.__typename?e.user:e.userV2,{details:{isBlocked:u,isMuted:p}={}}=(0,F.c)(d.id,!l.isOpen),m=null!=p?p:!!d.isMuted,y=null!=u?u:!!d.isBlocked,g=d.displayName||d.username,f="ActivityMetadataMessage"===e.__typename,v=(0,n.useCallback)((()=>{var e;null==(e=null==c?void 0:c.muteUser)||e.callback(),o({action:m?h.AZ:h.SG})}),[m,null==c?void 0:c.muteUser,o]),b=(0,n.useCallback)((()=>{var e;null==(e=null==c?void 0:c.blockUser)||e.callback(),o({action:y?h.x6:h.SE})}),[y,null==c?void 0:c.blockUser,o]);return c?n.createElement(L.iS,{isOpen:l.isOpen,onOpenChange:l.onOpenChange},n.createElement(L.Eq,null,n.createElement(R.wP,{accessibilityLabel:(0,P.c)("More actions"),icon:N.default,iconSize:"l",size:"xs",testID:"moreActionsButton",transparent:!0,type:"button"})),n.createElement(L.wz,{width:"100%"},(null==c?void 0:c.shareActivity)?n.createElement(L.qS,{onPress:null==(r=c.shareActivity)?void 0:r.callback},c.shareActivity.title):null,(null==c?void 0:c.muteActivity)?n.createElement(L.qS,{onPress:null==(i=c.muteActivity)?void 0:i.callback},c.muteActivity.title):null,(null==c?void 0:c.removeActivity)?n.createElement(L.qS,{onPress:null==(s=c.removeActivity)?void 0:s.callback},c.removeActivity.title):null,(null==c?void 0:c.editActivity)?n.createElement(L.qS,{onPress:null==(a=c.editActivity)?void 0:a.callback},c.editActivity.title):null,t&&(null==c?void 0:c.blockUser)&&(null==c?void 0:c.muteUser)?n.createElement(n.Fragment,null,f?null:n.createElement(L.qS,{onPress:v},m?(0,P.c)("Unmute {name}",{name:g}):(0,P.c)("Mute {name}",{name:g})),n.createElement(L.qS,{onPress:b},y?(0,P.c)("Unblock {name}",{name:g}):(0,P.c)("Block {name}",{name:g}))):null)):null};var _=r(62656),W=r(96856),B=r(60080),H=r(53480),z=r(39864),G=r(11528);const q={date:"ActivityHeaderDate-date-RgzpvR",noLineHeight:"ActivityHeaderDate-noLineHeight-F7RHUJ"},K=(e,t)=>{switch(t){case"ActivityRating":case"ActivityWatchRating":return e.ratings;case"ActivityWatchlist":return e.watchlist;case"ActivityWatchHistory":case"ActivityWatchSession":return e.watchHistory;default:return z.oL.Private}};function Q({activity:e,href:t}){const{details:r}=(0,i.w1)(x.c),{data:s}=(0,i.w1)(G.mk.endpoints.GetUserPrivacy.select()),a="Report"===e.__typename?e.user:e.userV2,o=(0,n.useMemo)((()=>{if("Report"!==e.__typename)return s?K(s.userPrivacy,e.__typename):e.privacy}),[e,s]),l=r.uuid===a.id,d=(0,B.c)(new Date(e.date),"LLLL dd, yyyy"),p=(0,n.useMemo)((()=>(0,H.S)(e.date)),[e.date]),m=(0,n.useMemo)((()=>({isTooltip:e})=>n.createElement("span",{"aria-label":d,className:q.date},n.createElement(u.a,{color:"muted",font:"body-3"},n.createElement(se,{color:"muted",href:t,showTitle:e,title:p})))),[d,t,p]),h=l&&("ActivityRating"===e.__typename||"ActivityWatchHistory"===e.__typename||"ActivityWatchlist"===e.__typename||"ActivityWatchSession"===e.__typename||"ActivityWatchRating"===e.__typename)&&o===z.oL.Private;return n.createElement(c.YR,{gap:"xxs",shrink:!1,verticalAlign:"center"},d!==p?n.createElement(W.o,{tooltip:n.createElement(u.a,{color:"muted",font:"body-3"},d)},n.createElement("span",null,n.createElement(m,{isTooltip:!0}))):n.createElement(m,null),h?n.createElement(n.Fragment,null,n.createElement(u.a,{color:"muted",font:"heading-2"},""),n.createElement(W.o,{tooltip:(0,P.c)("Private")},n.createElement("span",{className:q.noLineHeight},n.createElement(_.default,{color:"muted"})))):null)}const $={preserveSpaces:"ActivityHeaderTitle-preserveSpaces-onOxrJ",noLineHeight:"ActivityHeaderTitle-noLineHeight-Da9l2m",link:"ActivityHeaderTitle-link-dF47XE"};function Y({activity:e,href:t}){const r=(0,k.c)(),{details:s}=(0,i.w1)(x.c),a="Report"===e.__typename?e.user:e.userV2,o=s.uuid===a.id,d=a.displayName||a.username,p=(0,n.useCallback)((()=>{r({action:h.mG,origin:y.QH})}),[r]),m=(0,n.useMemo)((()=>{switch(e.__typename){case A.y4.Post:case A.y4.MetadataMessage:return o?(0,P.c)("You shared"):(0,P.c)("{friendName} shared",{friendName:""});case"Report":return o?(0,P.c)("You reported"):(0,P.c)("{friendName} reported",{friendName:""});case A.y4.Rating:return o?(0,P.c)("You rated"):(0,P.c)("{friendName} rated",{friendName:""});case A.y4.WatchHistory:case A.y4.WatchSession:case A.y4.WatchRating:return o?(0,P.c)("You watched"):(0,P.c)("{friendName} watched",{friendName:""});case A.y4.Watchlist:return o?(0,P.c)("You watchlisted"):(0,P.c)("{friendName} watchlisted",{friendName:""});default:return""}}),[e.__typename,o]),g=(0,n.useMemo)((()=>({children:e})=>t?n.createElement("div",{className:$.link},n.createElement(l.c,{font:"inherit",href:t,onPress:p},e)):n.createElement(n.Fragment,null,e)),[t,p]);return n.createElement(c.YR,{gap:"xs",verticalAlign:"center"},n.createElement(g,null,n.createElement(c.YR,null,o?null:n.createElement(u.a,{color:"inherit",font:"inherit",numberOfLines:1},d),n.createElement(u.a,{color:"inherit",font:"inherit",shrink:!1,title:m},n.createElement("span",{className:$.preserveSpaces},m)))))}var X=r(60344),J=r(25576),Z=r(97008),ee=r(97884),te=r(99372);const re={header:"ActivityCardHeader-header-Ff9Qps"},ne=40,ie=20;function se({href:e,title:t,showTitle:r,color:i="default"}){return e?n.createElement(l.c,{color:i,font:"inherit",href:e,title:r?"":t},t):n.createElement(n.Fragment,null,t)}function ae({metadataItem:e,activity:t}){const r=(0,k.c)(),l=(0,i.OY)(),{addToast:R}=(0,p.Wo)(),[N,L]=(0,O.c$)(),j=(0,i.w1)(M.c),U="Report"===t.__typename,F=U?t.user:t.userV2,{data:_}=(0,i.w1)(G.mk.endpoints.GetUserDetails.select({uuid:F.id})),W=(0,te.i)(v.o5),B=(0,X.c)(),H=(0,J.c)(),z=B||H,q=_?_.user.isBlocked:F.isBlocked,K=_?_.user.isMuted:F.isMuted,$="ActivityMetadataMessage"===t.__typename;(0,n.useEffect)((()=>{B&&(q||K&&!$)&&(l((0,m.IB)({pathname:(0,ee.c)("discoverPivot",{pivot:g.gz}),replace:!0})),R({color:"default",description:(0,P.c)("You blocked this user"),type:"foreground"}))}),[R,l,B,q,$,K]);const ae=(0,w.c)(e,"key"),oe=(0,w.c)(e,"parentKey"),ce=(0,w.c)(e,"grandparentKey"),le=(0,i.w1)((0,E.c)(F.id)),{details:de}=(0,i.w1)(x.c),ue=F.username===de.username,{grandparentTitle:pe,parentTitle:me,title:he,parentIndex:ye,index:ge,type:fe,originallyAvailableAt:ve}=e,be=(0,n.useMemo)((()=>{let e,r;switch(t.__typename){case A.y4.WatchHistory:case A.y4.WatchRating:case A.y4.WatchSession:e=W?s.default:a.y,r="inherit";break;case A.y4.Watchlist:e=o.default,r="accent";break;default:return null}return n.createElement(T.c,{backgroundColor:"var(--color-surface-background-80)",color:r,icon:e,iconSize:"m",posterStyle:"square",size:ie})}),[t.__typename,W]),Se=(0,n.useMemo)((()=>{if(z||!N.isConnected||q||U&&!e.key)return;const r=f._u(L.identifier,f.Im);return(0,ee.c)("Report"===t.__typename?"report":"activity",{id:(0,Z.c)(t),providerIdentifier:r&&!f.QJ(L.identifier)?L.identifier:void 0})}),[t,q,z,U,e.key,L.identifier,N.isConnected]),Pe=(0,n.useMemo)((()=>{if(!N.isConnected||U&&!e.key)return(0,P.c)("An item on {serverName}",{serverName:N.friendlyName});const r=fe===C.WW.Episode,i=fe===C.WW.Season;if(r){const e=0===ye,r=(0,S.c)({seasonIndex:ye,noLeadingZero:!0}),i=e&&he?he:(0,b.c)({useLongName:!1,episodeIndex:ge,date:ve,noLeadingZero:!0});return"ActivityWatchSession"===t.__typename?n.createElement(se,{href:ce,title:pe}):n.createElement(c.ye,{gap:"xxs",orientation:"horizontal"},n.createElement(se,{href:ce,title:pe}),"-",n.createElement(se,{href:oe,title:r}),"",n.createElement(se,{href:ae,title:i}),U?n.createElement(u.a,{font:"inherit"},(0,P.c)("on {serverName}",{serverName:N.friendlyName})):null)}if(i){const e=(0,S.c)({seasonIndex:ge,noLeadingZero:!0});return n.createElement(c.ye,{gap:"xxs",orientation:"horizontal"},n.createElement(se,{href:oe,title:me}),"-",n.createElement(se,{href:ae,title:e}),U?n.createElement(u.a,{font:"inherit"},(0,P.c)("on {serverName}",{serverName:N.friendlyName})):null)}return n.createElement(c.ye,{gap:"xxs",orientation:"horizontal"},n.createElement(se,{href:ae,title:he}),U?n.createElement(u.a,{font:"inherit"},(0,P.c)("on {serverName}",{serverName:N.friendlyName})):null)}),[t.__typename,ce,pe,ge,U,he,e.key,ve,ye,oe,me,ae,N.friendlyName,N.isConnected,fe]),Ie=(0,n.useMemo)((()=>ue?(0,ee.c)("profile"):`${(0,ee.c)("userProfile",{id:F.id})}`),[F.id,ue]),Ee=(0,n.useCallback)((()=>{l((0,I.mY)({origin:"Report"===t.__typename?y.WX:y.Cc})),r({action:h.EN})}),[t.__typename,l,r]);return n.createElement("div",{className:re.header},n.createElement(c.ye,{align:"space-between",gap:"s",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(c.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(d.mw,{posterStyle:"circle",width:ne},n.createElement(D.c,{server:j,size:ne,url:Ie?F.avatar:""}),Ie?n.createElement(d.ic,{href:Ie,posterStyle:"circle",onPress:Ee}):null),n.createElement(c.ye,null,n.createElement(c.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(u.a,{font:"body-2",numberOfLines:1},n.createElement(Y,{activity:t,href:Se})),be),n.createElement(u.a,{color:"muted",font:"body-3",numberOfLines:1},Pe),n.createElement(Q,{activity:t,href:Se}))),n.createElement(V,{activity:t,friend:le})))}},912:(e,t,r)=>{"use strict";r.d(t,{c:()=>V});var n=r(11504),i=r(27876),s=r(9868),a=r(59396),o=r(59380),c=r(34708),l=r(86636),d=r(29208),u=r(46572),p=r(56632),m=r(38652),h=r(5784),y=r(73384),g=r(34008),f=r(45376),v=r(92432);const b=r(57512).m.injectEndpoints({endpoints:e=>({muteActivity:e.mutation({query:e=>({document:"\n    mutation muteActivity($input: MuteActivityInput!) {\n  muteActivity(input: $input)\n}\n    ",variables:e})}),unmuteActivity:e.mutation({query:e=>({document:"\n    mutation unmuteActivity($input: MuteActivityInput!) {\n  unmuteActivity(input: $input)\n}\n    ",variables:e})})})}),{useMuteActivityMutation:S,useUnmuteActivityMutation:P}=b;var I=r(93808),E=r(24972),w=r(33484),C=r(62348),O=r(96304),M=r(112),T=r(39864),D=r(11528),k=Object.defineProperty,x=Object.defineProperties,A=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&j(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&j(e,r,t[r]);return e},F=(e,t)=>x(e,A(t));function V({item:e,children:t,insertActivity:r,removeActivity:b,removeUserActivities:k}){const x=(0,i.OY)(),A=(0,s.y)(),R=(0,s.y)(),N=(0,s.y)(),L=(0,s.y)(),j=(0,s.y)(),{removeActivity:V,insertItemByDate:_}=(0,h.c)(),[W,B]=(0,D.U_)(),[H,z]=(0,D.i4)(),{title:G,onChangeActivityNotifications:q}=function(e,t){const[r,i]=(0,n.useState)(t),{updateIsMuted:s}=(0,h.c)(),{addToast:o}=(0,v.Wo)(),[c,{isError:l,isSuccess:d,reset:u}]=S(),[p,{isError:m,isSuccess:y,reset:g}]=P();return(0,n.useEffect)((()=>{(d||y)&&(u(),g(),s(e,r))}),[e,d,r,y,u,g,s]),(0,n.useEffect)((()=>{(l||m)&&(i((e=>!e)),u(),g(),o({color:"alert",description:l?(0,a.c)("Error while muting activity"):(0,a.c)("Error while unmuting activity"),type:"foreground"}))}),[o,l,m,u,g]),{onChangeActivityNotifications:(0,n.useCallback)((()=>{const t=r?p:c;i(!r),t({input:{activity:e}})}),[e,r,c,p]),title:r?(0,a.c)("Receive new comment notifications"):(0,a.c)("Mute comment notifications")}}(e.id,e.isMuted),K=(0,n.useRef)(),Q=(0,i.w1)((0,l.c)(e.userV2.id)),{details:{uuid:$}}=(0,i.w1)(u.c),{metadataItem:Y}=(0,y.c)(e),X=(0,f.c)(Y),J=(0,g.c)(),Z="ActivityWatchSession"===e.__typename,ee="ActivityWatchRating"===e.__typename,te=e.__typename?o._[e.__typename]:"",re=(0,n.useCallback)((()=>{(null==e?void 0:e.id)&&W({input:{id:null==e?void 0:e.id,type:p.fX[e.__typename]}})}),[e.__typename,null==e?void 0:e.id,W]),ne=(0,n.useCallback)((t=>{(null==e?void 0:e.id)&&(K.current=t.toISOString(),H({id:e.id,input:{date:t}}))}),[H,null==e?void 0:e.id]),ie=(0,n.useCallback)((()=>{(null==e?void 0:e.id)&&(null==b||b(e.id),V(e.id))}),[V,e.id,b]),se=(0,n.useCallback)((()=>{null==b||b(e.id);const t=F(U({},e),{date:K.current||e.date}),n=_(t);n>-1&&!J&&(null==r||r(t,n));const i=_(t,Y.ratingKey);i>-1&&J&&(null==r||r(t,i))}),[r,_,e,Y.ratingKey,J,b]),ae=(0,n.useCallback)((t=>{t&&(null==k||k(e.userV2.id),x(c.c.actions.fetchCommunityFriends()))}),[x,e.userV2.id,k]),oe=(0,n.useCallback)((t=>{t&&(null==k||k(e.userV2.id,!0))}),[e.userV2.id,k]),ce=$===(null==e?void 0:e.userV2.id),le=ce,de=ce&&e.__typename===p.y4.WatchHistory,ue=!!Y.guid&&(!J||X),pe=(0,n.useMemo)((()=>Z&&Y.grandparentGuid&&Y.grandparentType&&Y.grandparentTitle?F(U({},Y),{guid:Y.grandparentGuid,type:Y.grandparentType,title:Y.grandparentTitle}):Y),[Z,Y]),me=(0,n.useMemo)((()=>{const t={};var r;return t.muteActivity={title:G,callback:q},le&&(t.removeActivity={callback:A.onOpen,title:(0,a.c)("Remove Activity")}),de&&(t.editActivity={callback:R.onOpen,title:(0,a.c)("Edit Watched Date")}),ue&&(t.shareActivity={callback:N.onOpen,title:(0,a.c)("Share this {type}",{type:(r=pe.type,r===I.WW.Movie?(0,a.c)("Movie"):r===I.WW.Season?(0,a.c)("Season"):r===I.WW.Episode?(0,a.c)("Episode"):r===I.WW.Show?(0,a.c)("Show"):"")})}),!ce&&e.userV2.friendStatus===T.Ky.Friends&&Q&&(t.muteUser={callback:L.onOpen,title:(0,a.c)("Mute User")},t.blockUser={callback:j.onOpen,title:(0,a.c)("Block User")}),Object.keys(t).length?t:void 0}),[j.onOpen,de,le,ue,q,R.onOpen,Q,ce,e.userV2.friendStatus,G,L.onOpen,A.onOpen,N.onOpen,pe.type]);return n.createElement(d.cp,{metricsPane:o._[e.__typename]},n.createElement(m.cp,{metadataActions:me},le?n.createElement(w.c,{body:Z||ee?(0,a.c)("This activity and all associated watch history entries will no longer appear in your Activity Feed or Profile."):(0,a.c)("This activity will no longer appear in your Activity feed or Profile unless you repeat the activity"),modalState:A,mutationState:U({},B),pane:te,title:(0,a.c)("Remove Activity"),onRemoveActivity:re,onSuccess:ie}):null,de?n.createElement(E.c,{date:null==e?void 0:e.date,error:z.error,isEditing:z.isLoading,modalState:R,onEditDate:ne,onSuccess:se}):null,ue?n.createElement(M.c,{children:null,item:pe,modalState:N}):null,n.createElement(O.c,{modalState:L,user:e.userV2,onSuccess:oe}),n.createElement(C.c,{modalState:j,user:U({},e.userV2),onSuccess:ae}),t))}},38652:(e,t,r)=>{"use strict";r.d(t,{Q5:()=>s,cp:()=>a});var n=r(11504);const i=(0,n.createContext)([void 0,void 0]);function s(){return(0,n.useContext)(i)}function a({metadataActions:e,activity:t,children:r}){const s=(0,n.useMemo)((()=>[t,e]),[t,e]);return n.createElement(i.Provider,{value:s},r)}},59248:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(89080),i=r.n(n),s=r(11504),a=r(3008),o=r(77072);const c={container:"ActivityMetadataText-container-WcomEb",center:"ActivityMetadataText-center-oaUQ8U"},l=100;function d({message:e}){const t=e.length<=l;return s.createElement("div",{className:i()(c.container,t&&c.center)},s.createElement(a.QZ,{alignItems:"flex-start",grow:!0,height:t?"auto":"100%",justifyContent:"center",orientation:"vertical"},s.createElement(o.a,{align:"left",font:"body-1",whiteSpace:"preserve-breaks"},e)))}},16556:(e,t,r)=>{"use strict";r.d(t,{c:()=>st});var n=r(11504),i=r(27876),s=r(92432),a=r(13778),o=r(35860),c=r(13436),l=r(34708),d=r(83672),u=r(39460),p=r(37984),m=r(59956),h=r(16416),y=r(23748),g=r(89080),f=r.n(g),v=r(3008),b=r(35624),S=r(61969),P=r(44696),I=r(66984),E=r(94644),w=r(46844),C=r(46896),O=r(912),M=Object.defineProperty,T=Object.defineProperties,D=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&R(e,r,t[r]);if(k)for(var r of k(t))A.call(t,r)&&R(e,r,t[r]);return e},L=(e,t)=>T(e,D(t)),j=(e,t)=>{var r={};for(var n in e)x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&k)for(var n of k(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r};function U(e){var t=e,{item:r,children:i,onCellHeightChange:s,insertActivity:a,removeActivity:o,removeUserActivities:c}=t,l=j(t,["item","children","onCellHeightChange","insertActivity","removeActivity","removeUserActivities"]);const d=(0,C.c)(l),[u,p]=(0,w.c)(N({onCellHeightChange:s},l));return r?n.createElement("div",{key:l.key,ref:u,style:L(N({},d.style),{visibility:p?"visible":"hidden"})},n.createElement(O.c,{insertActivity:a,item:r,removeActivity:o,removeUserActivities:c},i)):null}var F=r(77072),V=r(59396),_=r(41744),W=r(42152),B=r(11096),H=r(66436),z=r(50696);const G=function(e,t){const[r,i]=(0,p.c$)(),[s,a]=(0,n.useState)("");return(0,n.useEffect)((()=>{const n=(0,z.c)(e,t);if(!r||!i||!n)return;const s=(0,H.c)(r,i),o=encodeURIComponent(n);a(`#!${s}/activity?key=${o}`)}),[t,e,i,r]),s};var q=r(90068),K=r(29164),Q=r(83660),$=r(17544);const Y=288,X=160;function J({item:e,userCount:t}){var r,s;const a=(0,i.w1)(K.c),o=(0,q.c)(e,"key"),c=G(e,"key"),l=(null==(s=null==(r=null==e?void 0:e.Image)?void 0:r.find((({type:e})=>e===B.OQ.CoverArt)))?void 0:s.url)||"";return n.createElement(v.ye,{gap:"xxs"},n.createElement(W.mw,{posterStyle:"landscape",width:Y},n.createElement(Q.S,{height:X,posterStyle:"landscape",server:a,url:l,width:Y}),o?n.createElement(W.ic,{href:o,posterStyle:"landscape"}):null),n.createElement(v.ye,{width:Y},o?n.createElement(_.c,{font:"body-2",href:o},(0,$.c)(e)):n.createElement(F.a,{font:"body-2"},(0,$.c)(e)),n.createElement(_.c,{color:"muted",font:"body-3",href:c},(0,V.c)("Trending with {userCount} of your friends",{userCount:t}))))}var Z=r(90588),ee=r(57512),te=r(32512);const re=`\n    query Trending($skipUserState: Boolean = false) {\n  trendingContent {\n    userCount\n    item {\n      __typename\n      ...itemFields\n    }\n  }\n}\n    ${te.Y5}`,ne=ee.m.injectEndpoints({endpoints:e=>({Trending:e.query({query:e=>({document:re,variables:e})})})}),{useTrendingQuery:ie,useLazyTrendingQuery:se}=ne,ae={container:"PopularThisWeek-container-TzWOJ5",wrapper:"PopularThisWeek-wrapper-G89oML"},oe=250;function ce({feedHeight:e,scrollHeight:t}){const r=(0,n.useRef)(null),{data:i,error:s}=ie(),a=(0,n.useMemo)((()=>Math.floor(e/oe)),[e]);return!i||0===i.trendingContent.length||s?null:n.createElement("div",{ref:r,className:ae.container,style:{height:t}},n.createElement("div",{className:ae.wrapper},n.createElement(v.ye,{gap:"s"},n.createElement(F.a,{font:"heading-3"},(0,V.c)("Popular With Your Friends")),n.createElement(v.ye,{gap:"l"},i.trendingContent.slice(0,a).map((e=>n.createElement(J,{key:e.item.id,item:(0,Z.c)(e.item,o.Im,!0),userCount:e.userCount})))))))}var le=r(34008),de=r(86200),ue=r(49720),pe=r(49828),me=r(21040);const he={feed:"ActivityFeed-feed-ODFjad",scroller:"ActivityFeed-scroller-L0u7Bj VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",center:"ActivityFeed-center-ZAndu1"};var ye=Object.defineProperty,ge=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ie=(e,t)=>{for(var r in t||(t={}))be.call(t,r)&&Pe(e,r,t[r]);if(ve)for(var r of ve(t))Se.call(t,r)&&Pe(e,r,t[r]);return e},Ee=(e,t)=>ge(e,fe(t));function we({activities:e,isReplacing:t,storageKey:r,totalSize:i,fetchMore:s,insertActivity:a,removeActivity:o,removeUserActivities:c}){const[l,d]=(0,n.useState)(),[u,p]=(0,n.useState)([]),m=(0,le.c)(),h=(0,me.c)(t),{cellHeights:g,isWaitingToRestore:w,onCellHeightsChange:C}=(0,S.c)({key:r});(0,n.useEffect)((()=>{t&&void 0===l&&d(0)}),[e,t,l]),(0,n.useEffect)((()=>{h&&!t&&d(void 0)}),[h,t]),(0,n.useEffect)((()=>{g.length&&p(g)}),[g]);const O=(0,n.useCallback)(((e,t)=>{p((r=>(r[e]=t,C(r),[...r])))}),[C]),M=(0,n.useMemo)((()=>(0,P.c)({getEstimatedCellHeight:t=>{const r=e[t];return(0,ue.c)(r)?(0,de.c)(r,m):0},cellHeights:u,innerPaddingBottom:(0,pe.c)("m"),width:parseInt(b.c.cardWidth,10),overscan:2})),[e,u,m]),T=(0,n.useCallback)((e=>{const{item:t}=e,r=(0,ue.c)(t);return r?n.createElement(U,Ee(Ie({},e),{insertActivity:a,removeActivity:o,removeUserActivities:c,onCellHeightChange:O}),r):n.createElement(n.Fragment,null)}),[a,O,o,c]),D=(0,n.useCallback)(((e,t)=>m?null:n.createElement(ce,{feedHeight:e,scrollHeight:t})),[m]);return 0===e.length||w?n.createElement(I.c,null,n.createElement(v.QZ,{alignItems:"center",height:"100%",justifyContent:"center"},n.createElement(y.c,null))):n.createElement(I.c,{className:he.feed},n.createElement(E.c,{autoScroll:!1,cellComponentFactory:T,className:f()(he.scroller,!m&&he.center),items:e,keyPropName:"id",layout:M,renderRightList:D,smoothScroll:!1,storageKey:r,targetScrollIndex:l,totalSize:i,onPageRequest:s}))}var Ce=r(85448),Oe=r(58660),Me=r(3728),Te=r(59320),De=r(6240),ke=r(66780),xe=r(44500),Ae=r(85052),Re=r(96504),Ne=r(46204),Le=r(8684),je=r(1256),Ue=r(97884),Fe=r(95460);const Ve={icon:"EmptyActivityPage-icon-ExXRCy",page:"EmptyActivityPage-page-Fkul47"};function _e(e){return n.createElement("div",{className:Ve.icon},n.createElement(Ne.c,{icon:e.icon}))}function We(){const e=(0,Le.c)(),t=(0,Ce.Uz)(),r=(0,n.useCallback)((()=>{e({action:ke.kB})}),[e]),i=(0,n.useCallback)((()=>{r();const{pathname:e,search:n}=Re.c.parseUri((0,Ce.Yz)(Fe.c.discoverPivot,{pivot:Ae.ik}));t.push({pathname:e,search:n,state:{origin:xe.K2}})}),[t,r]);return n.createElement(je.c,{className:Ve.page},n.createElement(v.ye,{align:"center",gap:"m"},n.createElement(v.ye,{orientation:"horizontal"},n.createElement(_e,{icon:Me.default}),n.createElement(_e,{icon:Te.default}),n.createElement(_e,{icon:De.default})),n.createElement(v.ye,{align:"center",gap:"s",width:"35%"},n.createElement(F.a,{color:"inherit",font:"heading-2"},(0,V.c)("Welcome to your new Activity Feed")),n.createElement(F.a,{color:"inherit"},(0,V.c)("Once you add some friends on Plex, you can keep up with what theyre watching, liking (or hating), and planning to stream next."))),n.createElement(Oe.mq,{color:"accent",href:(0,Ue.c)("discoverPivot",{pivot:Ae.ik}),label:(0,V.c)("Invite friends to Plex"),onPress:i})))}var Be=r(99192);const He={popup:"RecentActivityNotification-popup-jnkqOe"};function ze({onClick:e}){return n.createElement(Be.c,{className:He.popup,onPress:e},n.createElement(v.YR,{align:"center",gap:"xs",height:"100%",verticalAlign:"center",width:"100%"},n.createElement(F.a,{color:"inherit"},(0,V.c)("New activity"))))}var Ge=r(84392),qe=r(42728),Ke=r(66576),Qe=r(34328),$e=r(5784),Ye=r(11320),Xe=r(63160),Je=r(86552);const Ze=24,et=6e4,tt="!";var rt=r(86728),nt=r(60344);const it=24;function st({id:e}){const t=(0,i.OY)(),[,r]=(0,p.c$)(),o=(0,u.c)(),{addToast:g,toasts:f}=(0,s.Wo)(),v=(0,m.c)(),{data:b,isLoading:S,hasNewer:P,isReplacing:I,error:E,storageKey:w,totalSize:C,fetchMore:O,fetchNewer:M,insert:T,remove:D,removeUserActivities:k}=function(e,t=Ze){const r=(0,i.OY)(),s=(0,i.w1)((0,Qe.c)(qe._i)),{removeActivity:a}=(0,$e.c)(),o=(0,Ge.useGate)(Xe.iQ.CommunityFeedAutoRefresh),c=!o.isLoading&&o.value,l=(0,n.useMemo)((()=>e?`${e}${tt}activityFeed`:"activityFeed"),[e]),{data:d,error:u,totalSize:p,isPopulated:m,remove:h,replace:y,getNextPage:g}=(0,Ke.c)(te.mk.endpoints.GetActivityFeed,{key:l,fetchSize:t,args:{types:s?Ye.s:Ye.i,includeDescendants:!0,metadataID:e,skipUserState:!!e,skipWatchSession:!e},transformResponse:e=>({data:e.activityFeed.nodes,endCursor:e.activityFeed.pageInfo.endCursor,hasNextPage:e.activityFeed.pageInfo.hasNextPage})}),f=(0,Je.c)(!d||!m||!c,c?et:0),[v,b]=(0,n.useState)(!1),[S,P]=(0,n.useState)(!1),{data:I,refetch:E,isFetching:w}=(0,te.ML)({first:t,types:s?Ye.s:Ye.i,includeDescendants:!0,metadataID:e,skipUserState:!!e,skipWatchSession:!e},{pollingInterval:c?et:0,skip:f}),C=(0,n.useRef)(!1);(0,n.useEffect)((()=>{var e;const t=null==I?void 0:I.activityFeed.nodes;b(m&&!!t&&!C.current&&!w&&t.length>0&&t[0].id!==(null==(e=null==d?void 0:d[0])?void 0:e.id))}),[w,m,d,I]),(0,n.useEffect)((()=>{w&&C.current&&(C.current=!1)}),[w]),(0,n.useEffect)((()=>{(null==d?void 0:d.length)&&S&&P(!1)}),[S,null==d?void 0:d.length]);const O=(0,n.useCallback)((()=>{C.current=!0,E()}),[E]),M=(0,n.useCallback)((e=>{O(),h(e,(e=>e.id)),a(e)}),[a,h,O]),T=(0,n.useCallback)(((e,t)=>{O();const r=[...(null==d?void 0:d.filter((({id:t})=>t!==e.id)))||[]];r.splice(t,0,e),y(r)}),[d,y,O]),D=(0,n.useCallback)((()=>{I&&(P(!0),y(I.activityFeed.nodes,I.activityFeed.pageInfo),b(!1),r(te.mk.util.updateQueryData("GetActivityFeed",{types:s?Ye.s:Ye.i,includeDescendants:!0,metadataID:e,skipUserState:!!e,first:t},(()=>I))))}),[r,s,e,I,y,t]),k=(0,n.useCallback)((()=>{S||g()}),[g,S]),x=(0,n.useCallback)(((e,t=!1)=>{d&&(O(),y(null==d?void 0:d.filter((r=>{const n="ActivityMetadataMessage"===r.__typename;return r.userV2.id!==e||t&&n}))))}),[d,y,O]);return{data:d,isLoading:!m,error:u,hasNewer:v,totalSize:p,isReplacing:S,storageKey:l,fetchMore:k,remove:M,insert:T,removeUserActivities:x,fetchNewer:D}}(e,it),{communityFriends:{error:x,isPending:A,isPopulated:R}}=(0,i.w1)(d.c),N=(0,le.c)(),L=!(0,nt.c)()&&!N,j=(0,c.c)(null==b?void 0:b.length),U=(0,rt.c)(r,null==b?void 0:b[0]);return(0,n.useEffect)((()=>{}),[g,o,r.identifier]),(0,n.useEffect)((()=>{x||A||R||t(l.c.actions.fetchCommunityFriends())}),[t,x,A,R]),(0,n.useEffect)((()=>{N&&1===j&&!(null==b?void 0:b.length)&&t((0,a.IB)(U))}),[t,U,N,b,j]),(0,n.useEffect)((()=>{(null==b?void 0:b.length)&&v({itemsLoaded:b.length,pagesLoaded:Math.ceil(b.length/it)})}),[null==b?void 0:b.length,v]),(0,n.useEffect)((()=>{(null==E?void 0:E.message)&&0===f.length&&g({color:"alert",description:E.message,type:"foreground",testID:"error"})}),[E,g,f.length]),!b||S?n.createElement(h.c,null,n.createElement(y.c,null)):n.createElement(n.Fragment,null,P?n.createElement(ze,{onClick:M}):null,b.length>0?n.createElement(we,{activities:b,fetchMore:O,insertActivity:T,isReplacing:I,removeActivity:D,removeUserActivities:k,storageKey:w,totalSize:C}):null,0===b.length&&!S&&L?n.createElement(We,null):null)}},36350:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(77072),s=r(83052),a=r(59396);const o={relative:"ActivityWatchSessionPlaceholder-relative-bvPGa1",bottom:"ActivityWatchSessionPlaceholder-bottom-d17jOf"};function c({activity:e}){const{metadataItem:{index:t,parent:r}}=e,c=null==r?void 0:r.index,l=e.episodeCount-1,d=(0,s.c)({seasonIndex:c,episodeIndex:t,separator:"  ",noLeadingZero:!0,includeSpecials:!0});return n.createElement("div",{className:o.relative},n.createElement("div",{className:o.bottom},n.createElement(i.a,{align:"center",color:"primary",font:"display-copy",numberOfLines:1},l>1?(0,a.c)("{seasonEpisode} and {episodeCount} other episodes",{episodeCount:l,seasonEpisode:d}):(0,a.c)("{seasonEpisode} and 1 other episode",{seasonEpisode:d}))))}},45920:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(3008),a=r(29164),o=r(23300),c=r(49828);const l={avatar:"AvatarGroup-avatar-xJBRfR"};function d({avatars:e,avatarSize:t=(0,c.c)("xl"),limit:r=3}){const d=(0,i.w1)(a.c);return n.createElement(n.Fragment,null,e.length>0?n.createElement(s.ye,{orientation:"horizontal",shrink:!1},e.slice(0,r).map((e=>n.createElement("div",{key:e,className:l.avatar},n.createElement(o.c,{server:d,size:t,url:e}))))):null)}},81568:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(26080),s=r(3008),a=r(77072),o=r(99192),c=r(45920);const l={button:"SocialActivityButton-button-VMf3g4 Link-link-vSsQW1",container:"SocialActivityButton-container-HrD3jL"},d=40;function u({avatars:e,isDisabled:t,label:r,numberOfLines:u,arrow:p=!1,avatarSize:m=d,onPress:h}){return n.createElement(o.c,{className:l.button,isDisabled:t,onPress:h},n.createElement("div",{className:l.container},n.createElement(s.ye,{align:"space-between",gap:"xxs",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(s.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(c.c,{avatarSize:m,avatars:e}),n.createElement(a.a,{color:"inherit",font:"body-2",numberOfLines:u,testID:"activityByText"},r)),p?n.createElement(i.default,null):null)))}},86728:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(89064),s=r(69956),a=r(684);function o(e,t){const[r,o]=(0,n.useState)();return(0,n.useEffect)((()=>{t&&("Report"===t.__typename?o((0,s.c)(t.url)):e&&o({isServer:!1,serverIdentifier:i.A,providerIdentifier:e.identifier,key:t.metadataItem.key,ratingKey:t.metadataItem.key}))}),[t,e]),(0,n.useMemo)((()=>r?(0,a.c)(r.serverIdentifier,r.providerIdentifier,{key:r.key}):""),[r])}},5784:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(27876),s=r(16512),a=r(57864),o=r(30708);const c=(0,a.M3)(o.c,(e=>{var t;return null!=(t=e.GetActivityById)?t:{}})),l=(0,a.M3)(o.c,(e=>{var t;return null!=(t=e.GetActivityFeed)?t:{}}));var d=r(97776),u=r(32512);function p(){const e=(0,i.OY)(),t=(0,i.w1)(l),r=(0,i.w1)(c);return{removeUserActivities:(0,n.useCallback)(((r,n=!1)=>{let i=0;Object.keys(t).forEach((t=>{e(u.mk.util.updateQueryData("GetActivityFeed",JSON.parse(t),(e=>{e.activityFeed.nodes=e.activityFeed.nodes.filter((e=>{const t="ActivityMetadataMessage"===e.__typename;return e.userV2.id!==r||n&&t})),i+=e.activityFeed.nodes.length})))})),s.c.set((0,d.c)("activityFeed"),i)}),[e,t]),removeActivity:(0,n.useCallback)((r=>{Object.keys(t).forEach((t=>{e(u.mk.util.updateQueryData("GetActivityFeed",JSON.parse(t),(e=>{e.activityFeed.nodes=e.activityFeed.nodes.filter((e=>e.id!==r))})))})),e(u.mk.util.updateQueryData("GetActivityById",{id:r},(e=>{e.activityByID=null})))}),[e,t]),insertItemByDate:(0,n.useCallback)(((r,n)=>{const i=new Date(r.date);let s,a=0,o="",c=!1,l=-1;return Object.keys(t).forEach((t=>{const d=JSON.parse(t);n!==d.metadataID||l>=0||(o=t,e(u.mk.util.updateQueryData("GetActivityFeed",JSON.parse(t),(e=>{for(let t=0;t<e.activityFeed.nodes.length;t++){const n=e.activityFeed.nodes[t],o=new Date(n.date);if((!s||s>i)&&i>=o&&(l=a),l>-1){e.activityFeed.nodes.splice(t,0,r);break}s=o,a++,c=!!e.activityFeed.pageInfo.hasNextPage}}))))})),o&&l<0&&!c&&e(u.mk.util.updateQueryData("GetActivityFeed",JSON.parse(o),(e=>{e.activityFeed.nodes=[...e.activityFeed.nodes,r],l=a}))),l}),[e,t]),updateCommentCount:(0,n.useCallback)(((r,n)=>{Object.keys(t).forEach((t=>{e(u.mk.util.updateQueryData("GetActivityFeed",JSON.parse(t),(e=>{e.activityFeed.nodes.map(((t,i)=>{t.id===r&&(e.activityFeed.nodes[i].commentCount+=n)}))})))})),e(u.mk.util.updateQueryData("GetActivityById",{id:r},(e=>{e.activityByID&&(e.activityByID.commentCount+=n)})))}),[e,t]),updateFriendStatus:(0,n.useCallback)(((t,n)=>{Object.keys(r).forEach((r=>{e(u.mk.util.updateQueryData("GetActivityById",{id:r},(e=>{e.activityByID&&"otherRecipientsV2"in e.activityByID&&e.activityByID.otherRecipientsV2.map((e=>{e.id===t&&(e.friendStatus=n)}))})))}))}),[r,e]),updateIsMuted:(0,n.useCallback)(((r,n)=>{Object.keys(t).forEach((t=>{e(u.mk.util.updateQueryData("GetActivityFeed",JSON.parse(t),(e=>{e.activityFeed.nodes.forEach((e=>{e.id!==r||(e.isMuted=n)}))})))})),e(u.mk.util.updateQueryData("GetActivityById",{id:r},(e=>{e.activityByID&&(e.activityByID.isMuted=n)})))}),[e,t])}}},73384:(e,t,r)=>{"use strict";r.d(t,{c:()=>E});var n=r(11504),i=r(27876),s=r(89064),a=r(69956),o=r(44688),c=r(3544),l=r(31636),d=r(37984),u=r(4668),p=r(39532),m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e},P=(e,t)=>h(e,y(t));const I={isServer:!1,key:"",providerIdentifier:"",ratingKey:"",serverIdentifier:""};function E(e){const t=(0,i.OY)(),[,r]=(0,d.c$)(),m=(0,p.c)(e),h="Report"===e.__typename,[y]=(0,n.useState)(h?h&&(0,a.c)(e.url):P(S({},I),{serverIdentifier:s.A,providerIdentifier:r.identifier})),g=(0,i.w1)((0,u.c)(y.serverIdentifier)),f=(0,i.w1)((0,l.c)(y.serverIdentifier,y.providerIdentifier)),{item:v,error:b,isPopulated:E}=(0,i.w1)((0,c.c)(y.key));return(0,n.useEffect)((()=>{y.isServer&&t(o.c.actions.fetchMetadataItem({server:g,key:y.key,provider:f}))}),[t,y,f,g]),{metadataItem:!b&&E?v:m,isPopulated:y.isServer?E:!!m.guid,error:b,server:g,provider:f,isServer:y.isServer}}},34008:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85448),i=r(95460);function s(){const e=(0,n.IT)();return!!(0,n.ot)(e.pathname,i.c.prePlayActivityFeed)&&!(0,n.ot)(e.pathname,i.c.activity)}},45376:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(27876),i=r(60872);function s(e){const{metadata:{metadataItem:t}}=(0,n.w1)(i.c);return(null==t?void 0:t.guid)!==e.guid}},60344:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85448),i=r(95460);function s(){const e=(0,n.IT)();return!!(0,n.ot)(e.pathname,i.c.activity)}},25576:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85448),i=r(95460);function s(){const e=(0,n.IT)();return!!(0,n.ot)(e.pathname,i.c.report)}},39532:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(68536),s=r(37984),a=r(90588);function o(e){const[,t]=(0,s.c$)();return(0,n.useMemo)((()=>"Report"===e.__typename?i.c:(0,a.c)(e.metadataItem,t.identifier)),[e,t.identifier])}},32512:(e,t,r)=>{"use strict";r.d(t,{ML:()=>m,Uf:()=>y,Y5:()=>i,gH:()=>f,mk:()=>d});var n=r(57512);const i="\n    fragment itemFields on MetadataItem {\n  id\n  images {\n    coverArt\n    coverPoster\n    thumbnail\n    art\n  }\n  userState @skip(if: $skipUserState) {\n    viewCount\n    viewedLeafCount\n    watchlistedAt\n  }\n  title\n  key\n  type\n  index\n  publicPagesURL\n  parent {\n    ...parentFields\n  }\n  grandparent {\n    ...parentFields\n  }\n  publishedAt\n  leafCount\n  year\n  originallyAvailableAt\n  childCount\n}\n    \n    fragment parentFields on MetadataItem {\n  index\n  title\n  publishedAt\n  key\n  type\n  images {\n    coverArt\n    coverPoster\n    thumbnail\n    art\n  }\n  userState @skip(if: $skipUserState) {\n    viewCount\n    viewedLeafCount\n    watchlistedAt\n  }\n}\n    ",s="\n    fragment userSimpleFields on UserSimple {\n  id\n  username\n  displayName\n  avatar\n  friendStatus\n  isMuted\n  isBlocked\n  mutualFriends {\n    count\n    friends {\n      avatar\n      displayName\n      id\n      username\n    }\n  }\n}\n    ",a=`\n    fragment activityFeed on ActivityConnection {\n  nodes {\n    __typename\n    id\n    date\n    isPrimary\n    commentCount\n    privacy\n    isMuted\n    metadataItem {\n      ...itemFields\n    }\n    userV2 {\n      ...userSimpleFields\n    }\n    ... on ActivityMetadataMessage {\n      message\n      otherRecipientsV2 {\n        ...userSimpleFields\n      }\n    }\n    ... on ActivityMetadataReport {\n      message\n      otherRecipientsV2 {\n        ...userSimpleFields\n      }\n    }\n    ... on ActivityRating {\n      rating\n    }\n    ... on ActivityPost {\n      message\n    }\n    ... on ActivityWatchHistory {\n      watchSession @skip(if: $skipWatchSession)\n    }\n    ... on ActivityWatchSession {\n      episodeCount\n    }\n    ... on ActivityWatchRating {\n      rating\n    }\n  }\n  pageInfo {\n    endCursor\n    hasNextPage\n  }\n}\n    ${i}\n${s}`,o=`\n    query GetActivityFeed($first: PaginationInt!, $after: String, $metadataID: ID, $types: [ActivityType!]!, $skipUserState: Boolean = false, $includeDescendants: Boolean = false, $skipWatchSession: Boolean = true) {\n  activityFeed(\n    first: $first\n    after: $after\n    metadataID: $metadataID\n    types: $types\n    includeDescendants: $includeDescendants\n  ) {\n    ...activityFeed\n  }\n}\n    ${a}`,c=`\n    query RefreshActivityFeed($first: PaginationInt!, $metadataID: ID, $types: [ActivityType!]!, $skipUserState: Boolean = false, $includeDescendants: Boolean = false, $skipWatchSession: Boolean = true) {\n  activityFeed(\n    first: $first\n    metadataID: $metadataID\n    types: $types\n    includeDescendants: $includeDescendants\n  ) {\n    ...activityFeed\n  }\n}\n    ${a}`,l=`\n    query GetActivityById($id: ID!, $skipUserState: Boolean = false) {\n  activityByID(id: $id) {\n    __typename\n    id\n    date\n    commentCount\n    privacy\n    isMuted\n    metadataItem {\n      __typename\n      ...itemFields\n    }\n    userV2 {\n      ...userSimpleFields\n    }\n    ... on ActivityMetadataMessage {\n      message\n      otherRecipientsV2 {\n        ...userSimpleFields\n      }\n    }\n    ... on ActivityMetadataReport {\n      message\n      otherRecipientsV2 {\n        ...userSimpleFields\n      }\n    }\n    ... on ActivityRating {\n      rating\n    }\n    ... on ActivityPost {\n      message\n    }\n    ... on ActivityWatchSession {\n      episodeCount\n    }\n    ... on ActivityWatchRating {\n      rating\n    }\n  }\n}\n    ${i}\n${s}`,d=n.m.injectEndpoints({endpoints:e=>({GetActivityFeed:e.query({query:e=>({document:o,variables:e})}),RefreshActivityFeed:e.query({query:e=>({document:c,variables:e})}),GetActivityById:e.query({query:e=>({document:l,variables:e})}),getActivityMentions:e.query({query:e=>({document:"\n    query getActivityMentions($metadataID: ID!, $types: [ActivityType!]!, $includeDescendants: Boolean = false) {\n  activityMentions(\n    metadataID: $metadataID\n    types: $types\n    includeDescendants: $includeDescendants\n  ) {\n    recentUsers {\n      id\n      username\n      displayName\n      avatar\n      friendStatus\n      isMuted\n      isBlocked\n    }\n    plexStats {\n      watchedAmount\n      watchedSuffix\n    }\n    uniqueUsersCount\n  }\n}\n    ",variables:e})})})}),{useGetActivityFeedQuery:u,useLazyGetActivityFeedQuery:p,useRefreshActivityFeedQuery:m,useLazyRefreshActivityFeedQuery:h,useGetActivityByIdQuery:y,useLazyGetActivityByIdQuery:g,useGetActivityMentionsQuery:f,useLazyGetActivityMentionsQuery:v}=d},46136:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=function(e){return(0,n.M3)(i.c,(t=>t.activity.staleProfileHubs.includes(e)))}},86200:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(59380),i=r(56632),s=r(26623),a=r(39864);const o=16,c=50,l=60,d=40,u=128;function p(e,t){let r=0,p=0;if(t)p=u;else{const{type:t}=(0,s.c)(e);switch(t){case i.It.Landscape:p=n.o.landscape.height;break;case i.It.Poster:p=n.o.portrait.height}}return!function(e){return(null==e?void 0:e.__typename)===a.IL.MetadataMessage}(e)?function(e){return(null==e?void 0:e.__typename)===a.IL.Post}(e)&&(r=e.message.length/c*o+l*(t?2:1)):r=e.message.length/c*o+l*(t?2:1)+(e.otherRecipientsV2.length?d:0),Math.max(r,p)}},49720:(e,t,r)=>{"use strict";r.d(t,{c:()=>ie});var n=r(11504),i=r(56632),s=r(32956),a=r(16160),o=r(19880),c=r(99524),l=r(39532),d=r(26623),u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e};function f(e){return Math.floor(new Date(e).getTime()/1e3)}function v(e){var t,r,n,i;if(!e.metadataItem.userState)return;const s=g({},e.metadataItem.userState);return e.metadataItem.userState.watchlistedAt&&(s.watchlistedAt=f(e.metadataItem.userState.watchlistedAt)),(null==(r=null==(t=e.metadataItem.parent)?void 0:t.userState)?void 0:r.watchlistedAt)&&(s.parentWatchlistedAt=f(e.metadataItem.parent.userState.watchlistedAt)),(null==(i=null==(n=e.metadataItem.grandparent)?void 0:n.userState)?void 0:i.watchlistedAt)&&(s.grandparentWatchlistedAt=f(e.metadataItem.grandparent.userState.watchlistedAt)),s}function b({activity:e}){const{src:t,type:r}=(0,n.useMemo)((()=>(0,d.c)(e)),[e]),i=(0,l.c)(e),u=v(e);return n.createElement(s.c,null,n.createElement(c.c,{activity:e,metadataItem:i}),n.createElement(a.c,{activity:e,imageSrc:t,imageType:r,isPrimary:e.isPrimary,metadataItem:i}),n.createElement(o.c,{activity:e,commentCount:e.commentCount,metadataItem:i,userState:u}))}var S=r(27876),P=r(3008),I=r(9868),E=r(66780),w=r(8684),C=r(46572),O=r(59248),M=r(81568),T=r(58660),D=r(64776),k=r(44500),x=r(56960),A=r(59396),R=r(75560),N=r(35770),L=r(82228),j=r(29208),U=r(27256),F=r(94644),V=r(49828),_=Object.defineProperty,W=Object.defineProperties,B=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&q(e,r,t[r]);if(H)for(var r of H(t))G.call(t,r)&&q(e,r,t[r]);return e},Q=(e,t)=>W(e,B(t));const $=(0,L.c)({rowHeight:(0,V.c)("xxxl"),innerVerticalPadding:(0,V.c)("xs")});function Y({modalState:e,recipients:t}){const r=(0,S.OY)(),i=(0,n.useCallback)((()=>{r((0,R.mY)({origin:k._k}))}),[r]),s=(0,n.useMemo)((()=>e=>n.createElement(N.c,Q(K({},e),{onPress:i}))),[i]);return n.createElement(j.cp,{metricsPage:x._k},n.createElement(D.wJ,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},n.createElement(D.EX,{closeButtonAccessibilityLabel:(0,A.c)("Close"),header:(0,A.c)("Shared with")},n.createElement(D.aU,null,n.createElement(F.c,{cellComponentFactory:s,items:t,keyPropName:"id",layout:$,scrollDirection:U.y.Vertical,totalSize:t.length})),n.createElement(D._A,null,n.createElement(D.YB,null,n.createElement(T.q,{label:(0,A.c)("Done"),onPress:e.onClose}))))))}var X=r(39864);function J(e,t,r,n){var i,s,a;const o=t.displayName||t.username;return 0===r.length?e.type===X.QN.Season?(0,A.c)("{name} shared {season} of {item} with you.",{name:o,season:e.title,item:null==(i=e.parent)?void 0:i.title}):(0,A.c)("{name} shared {item} with you.",{name:o,item:e.title}):n?e.type===X.QN.Season?(0,A.c)("You shared {season} of {item}.",{season:e.title,item:null==(s=e.parent)?void 0:s.title}):(0,A.c)("You shared {item}.",{item:e.title}):e.type===X.QN.Season?(0,A.c)("{name} shared {season} of {item}.",{name:o,season:e.title,item:null==(a=e.parent)?void 0:a.title}):(0,A.c)("{name} shared {item}.",{name:o,item:e.title})}function Z({activity:e}){const t=(0,w.c)(),r=(0,I.y)(),{details:i}=(0,S.w1)(C.c),u=i.uuid===e.userV2.id,p=(0,n.useCallback)((()=>{t({action:E.yz}),r.onOpen()}),[r,t]),m=(0,n.useMemo)((()=>{const t=function(e,t){const r=e.length;if(!r)return(0,A.c)("Shared with you");if(t){const t=e[0].displayName||e[0].username;return 1===r?(0,A.c)("Shared with {other}",{other:t}):2===r?(0,A.c)("Shared with {firstRecipient} and {count} other",{count:r-1,firstRecipient:t}):(0,A.c)("Shared with {firstRecipient} and {count} others",{count:r-1,firstRecipient:t})}return 1===r?(0,A.c)("Shared with you and 1 other"):(0,A.c)("Shared with you and {count} others",{count:r})}(e.otherRecipientsV2,u);return t}),[e.otherRecipientsV2,u]),{src:h,type:y}=(0,n.useMemo)((()=>(0,d.c)(e)),[e]),g=(0,n.useMemo)((()=>{const t=e.otherRecipientsV2.map((e=>e));return u||t.push({avatar:i.thumb,displayName:i.friendlyName,id:i.uuid,username:i.username,isBlocked:!1,isMuted:!1}),t}),[e.otherRecipientsV2,u,i.friendlyName,i.thumb,i.username,i.uuid]),f=(0,l.c)(e),b=v(e);return n.createElement(s.c,null,n.createElement(c.c,{activity:e,metadataItem:f}),n.createElement(a.c,{activity:e,imageSrc:h,imageType:y,isPrimary:e.isPrimary,metadataItem:f},n.createElement(P.ye,{align:"left",gap:"m",width:"100%"},n.createElement(O.c,{message:e.message||J(e.metadataItem,e.userV2,e.otherRecipientsV2,u)}),g.length>0?n.createElement(M.c,{arrow:!0,avatars:g.map((e=>e.avatar)),label:m,onPress:p}):null)),n.createElement(o.c,{activity:e,commentCount:e.commentCount,metadataItem:f,userState:b}),g.length>0?n.createElement(Y,{modalState:r,recipients:g}):null)}function ee({activity:e}){const{src:t,type:r}=(0,n.useMemo)((()=>(0,d.c)(e)),[e]),i=(0,l.c)(e),u=v(e);return n.createElement(s.c,null,n.createElement(c.c,{activity:e,metadataItem:i}),n.createElement(a.c,{activity:e,imageSrc:t,imageType:r,isPrimary:e.isPrimary,metadataItem:i},n.createElement(P.ye,{align:"left",gap:"m",width:"100%"},n.createElement(O.c,{message:e.message}))),n.createElement(o.c,{activity:e,commentCount:e.commentCount,metadataItem:i,userState:u}))}var te=r(52240);function re({activity:e}){const{src:t,type:r}=(0,n.useMemo)((()=>(0,d.c)(e)),[e]),i=(0,l.c)(e),u=v(e);return n.createElement(s.c,null,n.createElement(c.c,{activity:e,metadataItem:i}),n.createElement(a.c,{activity:e,imageSrc:t,imageType:r,isPrimary:e.isPrimary,metadataItem:i},n.createElement(P.QZ,{alignItems:"center",gap:"s",justifyContent:"center",orientation:"vertical",width:"100%"},n.createElement(P.QZ,{alignItems:"center",height:"100%",justifyContent:"center"},n.createElement(te.M,{accessibilityLabel:(0,A.c)("Rating"),iconSize:"xl",value:e.rating})))),n.createElement(o.c,{activity:e,commentCount:e.commentCount,metadataItem:i,userState:u}))}function ne({activity:e}){const{src:t,type:r}=(0,n.useMemo)((()=>(0,d.c)(e)),[e]),i=(0,l.c)(e),u=v(e);return n.createElement(s.c,null,n.createElement(c.c,{activity:e,metadataItem:i}),n.createElement(a.c,{activity:e,imageSrc:t,imageType:r,isPrimary:e.isPrimary,metadataItem:i}),n.createElement(o.c,{activity:e,commentCount:e.commentCount,metadataItem:i,userState:u}))}function ie(e){switch(null==e?void 0:e.__typename){case i.y4.MetadataMessage:return n.createElement(Z,{activity:e});case i.y4.Rating:return n.createElement(re,{activity:e});case i.y4.Watchlist:case i.y4.WatchHistory:return n.createElement(b,{activity:e});case i.y4.Post:return n.createElement(ee,{activity:e});case i.y4.WatchSession:return n.createElement(ne,{activity:e});case i.y4.WatchRating:return n.createElement(re,{activity:e});default:return null}}},26623:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(56632),i=r(39864);function s(e){if(!("metadataItem"in e))return{src:"",type:n.It.Landscape};const{metadataItem:t}=e;let r;return"ActivityWatchSession"===e.__typename?function(e){var t,r,i,s,a,o;const c=(null==(r=null==(t=e.grandparent)?void 0:t.images)?void 0:r.coverArt)||(null==(s=null==(i=e.grandparent)?void 0:i.images)?void 0:s.art);return c?{src:c,type:n.It.Landscape}:{src:(null==(o=null==(a=e.grandparent)?void 0:a.images)?void 0:o.thumbnail)||"",type:n.It.Poster}}(t):(r=t.type===i.QN.Episode?function(e){var t,r,i,s,a,o,c,l,d,u,p,m,h;const y=(null==(t=e.images)?void 0:t.thumbnail)||(null==(i=null==(r=e.parent)?void 0:r.images)?void 0:i.art)||(null==(a=null==(s=e.parent)?void 0:s.images)?void 0:a.coverArt)||(null==(c=null==(o=e.grandparent)?void 0:o.images)?void 0:c.art)||(null==(d=null==(l=e.grandparent)?void 0:l.images)?void 0:d.coverArt)||(null==(p=null==(u=e.parent)?void 0:u.images)?void 0:p.thumbnail)||(null==(h=null==(m=e.grandparent)?void 0:m.images)?void 0:h.thumbnail);if(y)return{src:y,type:n.It.Landscape}}(t):t.type===i.QN.Season?function(e){var t,r,i,s;const a=(null==(t=e.images)?void 0:t.coverArt)||(null==(r=e.images)?void 0:r.thumbnail)||(null==(s=null==(i=e.parent)?void 0:i.images)?void 0:s.thumbnail);if(a)return{src:a,type:n.It.Landscape}}(t):function(e){var t,r;const i=(null==(t=e.images)?void 0:t.coverArt)||(null==(r=e.images)?void 0:r.thumbnail);if(i)return{src:i,type:n.It.Landscape}}(t),r||function(e){var t,r,i,s,a;const o=(null==(t=e.images)?void 0:t.coverPoster)||(null==(i=null==(r=e.parent)?void 0:r.images)?void 0:i.coverPoster)||(null==(a=null==(s=e.grandparent)?void 0:s.images)?void 0:a.coverPoster);if(o)return{src:o,type:n.It.Poster}}(t)||{src:"",type:n.It.Landscape})}},53480:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(30004),i=r(64792);function s(e){return e<7}function a(e){return e?(0,i.c)((0,n.c)(new Date(e)),{limit:"past",includeAgoSuffix:!1,isRelativeTime:s,shorthand:!0,roundDays:"floor"}):""}},97008:(e,t,r)=>{"use strict";function n(e){return"watchSession"in e&&e.watchSession?e.watchSession:e.id}r.d(t,{c:()=>n})},11320:(e,t,r)=>{"use strict";r.d(t,{i:()=>i,s:()=>s});var n=r(39864);const i=[n.IL.MetadataMessage,n.IL.Rating,n.IL.WatchHistory,n.IL.Watchlist,n.IL.Post],s=[...i,n.IL.WatchSession,n.IL.WatchRating]},97776:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n="!";function i(e){return`${e}${n}itemsCount`}},90588:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(89064),i=r(85976),s=r(93808),a=r(68536),o=r(11096),c=r(39864);function l(e,t=!1){var r,n,i,s,a,l,d,u,p,m,h,y,g,f,v,b,S,P,I,E,w,C,O,M;const T=[],D=(null==(r=e.images)?void 0:r.thumbnail)||(null==(i=null==(n=e.parent)?void 0:n.images)?void 0:i.art)||(null==(a=null==(s=e.grandparent)?void 0:s.images)?void 0:a.art)||"",k=t?(null==(l=e.images)?void 0:l.coverArt)||(null==(d=e.images)?void 0:d.art)||(null==(p=null==(u=e.parent)?void 0:u.images)?void 0:p.art)||"":(null==(m=e.images)?void 0:m.art)||(null==(h=e.images)?void 0:h.coverArt)||(null==(g=null==(y=e.parent)?void 0:y.images)?void 0:g.art)||"",x=(null==(v=null==(f=e.parent)?void 0:f.images)?void 0:v.thumbnail)||(null==(S=null==(b=e.grandparent)?void 0:b.images)?void 0:S.thumbnail)||(null==(P=e.images)?void 0:P.coverPoster)||"",A=(null==(I=e.images)?void 0:I.thumbnail)||(null==(E=e.images)?void 0:E.coverPoster)||(null==(C=null==(w=e.parent)?void 0:w.images)?void 0:C.thumbnail)||(null==(M=null==(O=e.parent)?void 0:O.images)?void 0:M.coverPoster)||"";return e.type===c.QN.Episode?T.push({alt:e.title,type:o.OQ.CoverPoster,url:x},{alt:e.title,type:o.OQ.CoverArt,url:D}):T.push({alt:e.title,type:o.OQ.CoverPoster,url:A},{alt:e.title,type:o.OQ.CoverArt,url:k}),T}var d=r(99356),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e},b=(e,t)=>p(e,m(t));function S(e){switch(e){case c.QN.Episode:return s.WW.Episode;case c.QN.Movie:return s.WW.Movie;case c.QN.Season:return s.WW.Season;case c.QN.Show:return s.WW.Show}}function P(e){return e.split("/").pop()}function I(e,t,r=!1){var o,c,u,p,m,h,y,g,f,I,E,w,C,O,M,T,D,k,x,A,R;const N=S(e.type),L=(null==(o=e.grandparent)?void 0:o.type)?S(e.grandparent.type):void 0;let j;return N===s.WW.Episode?j=s.WW.Season:N===s.WW.Season&&(j=s.WW.Show),b(v({},a.c),{id:e.id,childCount:null!=(c=e.childCount)?c:void 0,listItemKey:e.id,grandparentTitle:null==(u=e.grandparent)?void 0:u.title,guid:`${s.SY.Plex}/${N}/${e.id}`,parentGuid:j&&(null==(p=e.parent)?void 0:p.key)?`${s.SY.Plex}/${j}/${P(e.parent.key)}`:void 0,grandparentGuid:L&&(null==(m=e.grandparent)?void 0:m.key)?`${s.SY.Plex}/${L}/${P(e.grandparent.key)}`:void 0,grandparentType:L,index:null!=(h=e.index)?h:void 0,key:e.key,parentKey:null==(y=e.parent)?void 0:y.key,grandparentKey:null==(g=e.grandparent)?void 0:g.key,ratingKey:e.id,sourceURI:(0,i.c)({key:e.key,serverIdentifier:n.A,providerIdentifier:t}),source:(0,i.c)({serverIdentifier:n.A,providerIdentifier:t}),year:null!=(f=e.year)?f:void 0,originallyAvailableAt:null!=(I=e.originallyAvailableAt)?I:void 0,thumb:null!=(w=null==(E=e.images)?void 0:E.thumbnail)?w:"",parentThumb:null!=(O=null==(C=e.images)?void 0:C.thumbnail)?O:"",grandparentThumb:null!=(T=null==(M=e.images)?void 0:M.thumbnail)?T:"",leafCount:null!=(D=e.leafCount)?D:void 0,parentIndex:null!=(x=null==(k=e.parent)?void 0:k.index)?x:void 0,parentTitle:null==(A=e.parent)?void 0:A.title,publicPagesURL:null!=(R=e.publicPagesURL)?R:"",title:e.title,type:N,displayFields:(0,d.Q)(N),userState:!!e.userState,Image:l(e,r)})}},900:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={queryParse:{query:void 0,isPending:!1,isPopulated:!1,error:null},curatedItem:{item:void 0,isPending:!1,isPopulated:!1,error:null},filterOptions:{}},a=(0,n.is)({name:"advancedFilters",initialState:s,reducers:{reset:()=>s,updateQuery(e,{payload:t}){e.queryParse.query&&(e.queryParse.query.Rule=t.rules)},fetchQueryRequested(e,t){(0,i.G8)(e.queryParse)},fetchQuerySucceeded(e,{payload:t}){(0,i.mM)(e.queryParse),e.queryParse.query=t.query},fetchQueryFailed(e,{payload:t}){(0,i.C)(e.queryParse,t.error)},fetchFilterOptionsRequested(e,{payload:t}){const r=t.filter;e.filterOptions[r.key]||(e.filterOptions[r.key]={isPending:!1,isPopulated:!1,error:null,options:[]}),(0,i.G8)(e.filterOptions[r.key])},fetchFilterOptionsSucceeded(e,{payload:t}){const r=t.filter;(0,i.mM)(e.filterOptions[r.key]),e.filterOptions[r.key].options=t.filterOptions},fetchFilterOptionsFailed(e,{payload:t}){const r=t.filter;(0,i.C)(e.filterOptions[r.key],t.error)},fetchCuratedRequested(e,t){(0,i.G8)(e.curatedItem)},fetchCuratedSucceeded(e,{payload:t}){e.curatedItem.item=t.curatedItem,(0,i.mM)(e.curatedItem)},fetchCuratedFailed(e,{payload:t}){(0,i.C)(e.curatedItem,t.error)},editFiltersRequested(e,t){}}})},37076:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n=(e=>(e.Or="or",e.And="and",e))(n||{})},25684:(e,t,r)=>{"use strict";r.d(t,{G3:()=>y,ug:()=>h});var n=r(37076),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e},p=(e,t)=>s(e,a(t));function m(e,t=[]){return{type:"composite",operator:e,Rule:t}}function h(e,t=m(n.C.And)){return p(u({},t),{Rule:[...t.Rule,...e]})}function y(e,t=m(n.C.Or)){return p(u({},t),{Rule:[...t.Rule,...e]})}},71928:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(31932);function i(e,t,r){var i;if(!r.content)return;const s=(r.isPlaylist?decodeURIComponent(r.content):r.content).match(/\/library\/sections\/(\w+)\/.*/);if(!s)return;const[a,o]=s,c=(0,n.c)(t,o);if(!c||!c.pivots)return;const l=c.pivots.find((e=>"library"===e.id||c.key&&e.key.includes(c.key)));return l?["media",{machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier},{source:c.id,pivot:null!=(i=l.id)?i:l.key,key:a,curatedKey:r.key,advancedFilters:1}]:void 0}},2968:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(37076);function i(e,t=!1){const r=[];if("composite"===e.type){const s=e.Rule;for(let e=0,t=s.length;e<t;e++){const t=s[e];(t.type||""!==t.value)&&(i(t,!0).length&&r.push(i(t,!0)))}const a=r.length;let o=a-1;for(;o>0;)r.splice(o,0,`${e.operator}=1`),o-=1;r.length&&(t||a>1&&e.operator===n.C.Or)&&(r.unshift("push=1"),r.push("pop=1"))}else{if(""===e.value)throw new Error("Tried to encode an empty value");const t=e.operator.slice(0,-1);r.push(`${e.field}${encodeURIComponent(t)}=${e.value}`)}return r.flat(2)}function s(e){return i(e).join("&")}},54952:(e,t,r)=>{"use strict";r.d(t,{E:()=>n,a:()=>i});var n=(e=>(e.GetComments="GetComments",e))(n||{});const i=25},70736:(e,t,r)=>{"use strict";r.d(t,{c:()=>D});var n=r(11504),i=r(54444),s=r(27876),a=r(56960),o=r(89448),c=r(59396),l=r(37984),d=r(5806),u=r(45400),p=r(18140),m=r(29208),h=r(23208),y=r(37768),g=r(58724),f=r(16648),v=r(72840),b=r(87960),S=r(24252),P=r(42784),I=r(59204),E=r(66480),w=r(74976),C=r(21104),O=r(86552),M=r(21040),T=r(73560);function D({isOpen:e,sourceURI:t,defaultTitle:r,metadataType:D,contentDirectoryID:k,isSmart:x=!1,onModalClose:A,onSaveSuccess:R}){var N,L;const j=(0,s.OY)(),[U,F]=(0,l.c$)(),V=(0,n.useMemo)((()=>(0,C.c)(t)),[t]),_=(0,s.w1)(V),W=null!=(N=null==_?void 0:_.isSaving)&&N,B=(0,M.c)(W),[H,z]=(0,n.useState)(""),G=(0,O.c)(H,250),q=(0,w.c)({server:U,provider:F,contentDirectoryID:k,metadataType:D,title:G.length?G:void 0}),{register:K,handleSubmit:Q,errors:$}=(0,i.aS)(),Y="required"===(null==(L=$.title)?void 0:L.type),X=(0,n.useCallback)((e=>{z(e.target.value)}),[]),J=Q((({title:e})=>{const r={server:U,provider:F,title:e,sourceURI:t,contentDirectoryID:k,metadataType:D,isSmart:x};(0,o.SS)((()=>{j(E.c.actions.saveRequested(r))}))})),Z=(0,p.c)();return(0,n.useEffect)((()=>{e&&B&&!W&&!(null==_?void 0:_.saveError)&&(null==R||R(),A())}),[e,W,B,A,R,null==_?void 0:_.saveError]),n.createElement(m.cp,{metricsPage:a.io},n.createElement(h.c,{isOpen:e,size:P.c.Small,onModalClose:A},n.createElement(y.c,{onModalClose:A},n.createElement(v.c,null,x?(0,c.c)("Create Collection"):(0,c.c)("Add to Collection")),x?null:n.createElement(b.c,null,n.createElement(u.c,{className:T.c.filter,name:"title",placeholder:(0,c.c)("Search Collections"),value:H,onChange:X})),(null==_?void 0:_.saveError)?n.createElement(g.c,{message:(0,c.c)("Something went wrong. Make sure the server is available and try again.")}):null,x?null:n.createElement(I.c,{errorMessage:(0,c.c)("There was an error loading the collections. Please try again."),isSaving:W,metadataList:q,provider:F,server:U,sourceURI:t,zeroItemsMessage:G?(0,c.c)("No collections found"):(0,c.c)("Save your first collection")}),n.createElement(f.c,null,n.createElement("form",{className:T.c.form,onSubmit:J},n.createElement(u.c,{ref:K({required:!0}),className:T.c.input,defaultValue:r,hasError:Y,hasFocusOnMount:!0,name:"title",onFocus:Z}),n.createElement(d.c,{className:T.c.button,isSpinning:W,kind:S.c.Primary,type:"submit"},(0,c.c)("Create")))))))}},29716:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(36728);function s({item:e,onItemPress:t}){const r=(0,n.useCallback)((()=>t(e.key)),[t,e.key]);return n.createElement(i.c,{onPress:r},e.title)}},49140:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(77584),s=r(27876),a=r(59396),o=r(54872),c=r(36728),l=r(55588),d=r(11822),u=r(29716),p=r(66480),m=r(74976);function h({sourceURI:e,contentDirectoryID:t,metadataType:r,server:i,provider:h,advancedFiltersRoute:y,onAddToCollectionPress:g,onAddToSmartCollectionPress:f,onMenuClose:v,onSavePress:b}){const S=(0,s.OY)(),P=(0,m.c)({server:i,provider:h,contentDirectoryID:t,metadataType:r,limit:3}),I=(0,n.useCallback)((t=>{S(p.c.actions.saveRequested({server:i,provider:h,key:t,sourceURI:e})),null==b||b(),v()}),[S,v,b,h,i,e]);return(0,n.useEffect)((()=>{(null==P?void 0:P.sourceURI)&&S(d.c.actions.fetchRangeRequested({sourceURI:P.sourceURI,server:i,provider:h,startIndex:0,size:3}))}),[S,null==P?void 0:P.sourceURI,i,h]),n.createElement(n.Fragment,null,n.createElement(c.c,{onPress:(0,l.c)(g,v)},(0,a.c)("Add to Collection...")),f?n.createElement(c.c,{onPress:(0,l.c)(f,v)},(0,a.c)("Save as Smart Collection...")):null,y?n.createElement(c.c,{to:y,onPress:v},(0,a.c)("Create Smart Collection")):null,(null==P?void 0:P.items.length)?n.createElement(n.Fragment,null,n.createElement(o.c,null,(0,a.c)("Recent")),P.items.map((e=>n.createElement(u.c,{key:e.key,item:e,onItemPress:I})))):null)}var y=r(20004),g=r(93808);function f({sourceURI:e,contentDirectoryID:t,server:r,provider:s,mediaType:a,metadataType:o,advancedFiltersRoute:c,onAddToCollectionPress:l,onAddToPlaylistPress:d,onAddToSmartCollectionPress:u,onAddToSmartPlaylistPress:p,onMenuClose:m,onSaveCollectionPress:f,onSavePlaylistPress:v}){const b=d?n.createElement(y.c,{advancedFiltersRoute:c,mediaType:a,provider:s,server:r,sourceURI:e,onAddToPlaylistPress:d,onAddToSmartPlaylistPress:p,onMenuClose:m,onSavePress:v}):null,S=t&&l?n.createElement(h,{advancedFiltersRoute:c,contentDirectoryID:t,metadataType:o,provider:s,server:r,sourceURI:e,onAddToCollectionPress:l,onAddToSmartCollectionPress:u,onMenuClose:m,onSavePress:f}):null,P=function(e){return e===g.WW.Movie||e===g.WW.Show||e===g.WW.Season||e===g.WW.Episode}(o)&&!!S||!b,I=P?S:b,E=P?b:S;return n.createElement(n.Fragment,null,I,E?n.createElement(i.c,null):null,E)}},20004:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(27876),s=r(59396),a=r(54872),o=r(36728),c=r(55588),l=r(11822),d=r(29716),u=r(66480),p=r(70428);function m({sourceURI:e,mediaType:t,server:r,provider:m,advancedFiltersRoute:h,onAddToPlaylistPress:y,onAddToSmartPlaylistPress:g,onMenuClose:f,onSavePress:v}){const b=(0,i.OY)(),S=(0,p.c)({server:r,provider:m,mediaType:t}),P=(0,n.useCallback)((t=>{b(u.c.actions.saveRequested({server:r,provider:m,key:t,sourceURI:e})),null==v||v(),f()}),[b,f,v,m,r,e]);return(0,n.useEffect)((()=>{(null==S?void 0:S.sourceURI)&&b(l.c.actions.fetchRangeRequested({sourceURI:S.sourceURI,server:r,provider:m,startIndex:0,size:3}))}),[b,null==S?void 0:S.sourceURI,r,m]),n.createElement(n.Fragment,null,n.createElement(o.c,{onPress:(0,c.c)(y,f)},(0,s.c)("Add to Playlist...")),g?n.createElement(o.c,{onPress:(0,c.c)(g,f)},(0,s.c)("Save as Smart Playlist...")):null,h?n.createElement(o.c,{to:h,onPress:f},(0,s.c)("Create Smart Playlist")):null,(null==S?void 0:S.items.length)?n.createElement(n.Fragment,null,n.createElement(a.c,null,(0,s.c)("Recent")),S.items.slice(0,3).map((e=>n.createElement(d.c,{key:e.key,item:e,onItemPress:P})))):null)}},16304:(e,t,r)=>{"use strict";r.d(t,{c:()=>te});var n=r(11504),i=r(54444),s=r(27876),a=r(56960),o=r(69956),c=r(89448),l=r(59396),d=r(93808),u=r(31636),p=r(37984),m=r(4668),h=r(5806),y=r(45400),g=r(18140),f=r(29208),v=r(23208),b=r(37768),S=r(58724),P=r(16648),I=r(72840),E=r(87960),w=r(24252),C=r(42784),O=r(59204),M=r(97164),T=r(24752),D=r(55588),k=r(87440),x=r(2540),A=r(87808),R=r(22916),N=r(81180);function L(e,t){return e.isCloud?t.sourceTitle?`${t.title} - ${t.sourceTitle}`:t.title:e.friendlyName}var j=r(85976),U=r(33316);function F({server:e,provider:t,isSelected:r,onDestinationChange:i}){const s=(0,n.useCallback)((()=>{const r=(0,j.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier});i(r)}),[i,t.identifier,e.machineIdentifier]);return n.createElement(U.c,{isSelected:r,onPress:s},L(e,t))}function V({server:e,provider:t,destinations:r,isDisabled:i,onDestinationChange:s}){const a=(0,k.c)(),o=(0,N.c)();return n.createElement(n.Fragment,null,n.createElement(R.c,{"aria-label":(0,l.c)("Playlist destination"),id:a,isDisabled:i,onPress:o.onToggle},L(e,t),n.createElement(M.c,{direction:o.isOpen?x.UP:x.aK})),n.createElement(T.c,{isOpen:o.isOpen,size:A.OM,target:a,onMenuClose:o.onClose},r?r.map(((r,i)=>{const[a,c]=r,l=e.machineIdentifier===a.machineIdentifier&&t.identifier===c.identifier;return n.createElement(F,{key:i,isSelected:l,provider:c,server:a,onDestinationChange:(0,D.c)(s,o.onClose)})})):null))}var _=r(66480),W=r(70428),B=r(21104),H=r(57864),z=r(85712),G=r(4644),q=r(48800),K=r(92076),Q=r(13148),$=r(29632),Y=r(11695);const X=(0,H.M3)(K.c,Q.c,(0,$.c)("providers"),((e,t,r)=>{const n=[];for(const i of t){const t=i.isCloud?r:i.providers;for(const r of t)n.push([(0,Y.c)(i),e[r]])}return n})),J=([e,t])=>(0,H.M3)(X,(r=>r.reduce(((r,[n,i])=>((n.machineIdentifier!==e.machineIdentifier||i.identifier!==t.identifier)&&n.isFullOwnedServer&&n.isConnected&&(0,G.c)(i,z.Aj.Playlist,z.Cg.Universal)&&r.push([n,i]),r)),t===q.c?[]:[[e,t]])));var Z=r(21040),ee=r(73560);function te({isOpen:e,sourceURI:t,defaultTitle:r,defaultDestinationSource:M,mediaType:T,isDestinationMenuHidden:D,isSmart:k=!1,onModalClose:x,onSaveSuccess:A}){var R,N;const j=(0,s.OY)(),[U,F]=(0,p.c$)(),[H,z]=(0,n.useState)(M),{serverIdentifier:G,providerIdentifier:q}=(0,o.c)(H),K=(0,n.useMemo)((()=>(0,B.c)(t)),[t]),Q=(0,s.w1)(K),$=null!=(R=null==Q?void 0:Q.isSaving)&&R,Y=(0,Z.c)($),X=(0,s.w1)((0,m.c)(G)),te=(0,s.w1)((0,u.c)(G,q)),re=(0,s.w1)(J([U,F])),ne=(0,W.c)({server:X,provider:te,mediaType:T}),ie={source:L(X,te)},se={[d.QT.Audio]:(0,l.c)("Save your first music playlist for {source}",ie),[d.QT.Video]:(0,l.c)("Save your first video playlist for {source}",ie),[d.QT.Photo]:(0,l.c)("Save your first photo playlist for {source}",ie)},{register:ae,handleSubmit:oe,errors:ce}=(0,i.aS)(),le="required"===(null==(N=ce.title)?void 0:N.type),de=oe((({title:e})=>{const r={server:X,provider:te,title:e,sourceURI:t,mediaType:T,isSmart:k};(0,c.SS)((()=>{j(_.c.actions.saveRequested(r))}))})),ue=(0,g.c)();return(0,n.useEffect)((()=>{e&&Y&&!$&&!(null==Q?void 0:Q.saveError)&&(null==A||A(),x())}),[e,$,Y,x,A,null==Q?void 0:Q.saveError]),n.createElement(f.cp,{metricsPage:a.io},n.createElement(v.c,{isOpen:e,size:C.c.Small,onModalClose:x},n.createElement(b.c,{onModalClose:x},n.createElement(I.c,null,k?(0,l.c)("Create Playlist"):(0,l.c)("Add to Playlist")),!k&&re.length>1?n.createElement(E.c,null,D?L(X,te):n.createElement(V,{destinations:re,isDisabled:$,provider:te,server:X,onDestinationChange:z})):null,(null==Q?void 0:Q.saveError)?n.createElement(S.c,{message:X.isCloud?(0,l.c)("Something went wrong. Please try again in a few minutes."):(0,l.c)("Something went wrong. Make sure the server is available and try again.")}):null,k?null:n.createElement(O.c,{errorMessage:(0,l.c)("There was an error loading the playlists. Please try again."),isSaving:$,metadataList:ne,provider:te,server:X,sourceURI:t,zeroItemsMessage:se[T]}),n.createElement(P.c,null,n.createElement("form",{className:ee.c.form,onSubmit:de},n.createElement(y.c,{ref:ae({required:!0}),className:ee.c.input,defaultValue:r,hasError:le,hasFocusOnMount:!0,name:"title",onFocus:ue}),n.createElement(h.c,{className:ee.c.button,isSpinning:$,kind:w.c.Primary,type:"submit"},(0,l.c)("Create")))))))}},59204:(e,t,r)=>{"use strict";r.d(t,{c:()=>j});var n=r(11504),i=r(27876),s=r(11822),a=r(82228),o=r(94644),c=r(89448),l=r(64156),d=r(22916),u=r(10376),p=r(2024),m=r(94840),h=r(46016),y=r(46896),g=r(35768),f=r(66480);const v={item:"CuratedListItem-item-Lv9M5K Link-link-vSsQW1",imageContainer:"CuratedListItem-imageContainer-S_bhQe",image:"CuratedListItem-image-nCULDa",title:"CuratedListItem-title-qUxFQi"};var b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t)=>{var r={};for(var n in e)S.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&b)for(var n of b(e))t.indexOf(n)<0&&P.call(e,n)&&(r[n]=e[n]);return r};const E=40;function w(e){var t=e,{server:r,provider:s,sourceURI:a,isDisabled:o,item:b}=t,S=I(t,["server","provider","sourceURI","isDisabled","item"]);const[P,w]=(0,u.c)(),C=(0,y.c)(S),{cellIndex:O}=S,M=(0,i.OY)(),T=(0,l.cp)({server:r,provider:s,width:E,height:E,url:(null==b?void 0:b.thumb)||(null==b?void 0:b.composite)}),D=(0,n.useCallback)((()=>{b&&(0,c.SS)((()=>{M(f.c.actions.saveRequested({server:r,provider:s,key:b.key,sourceURI:a}))}))}),[b,M,r,s,a]);if(!b)return n.createElement(h.c,{index:O,style:C.style});const{title:k}=b;return n.createElement(m.c,{ref:(0,g.c)(C.cellRef,w),isAlternate:!!(O%2),isHovered:P,style:C.style},n.createElement(d.c,{className:v.item,isDisabled:o,onPress:D},n.createElement("div",{className:v.imageContainer},n.createElement(p.c,{className:v.image,height:E,src:T,width:E})),n.createElement("div",{className:v.title},k)))}const C={container:"CuratedList-container-S2nv4v",scroller:"CuratedList-scroller-GezCVC VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"};var O=Object.defineProperty,M=Object.defineProperties,T=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e},N=(e,t)=>M(e,T(t));const L=60;function j({server:e,provider:t,sourceURI:r,isSaving:c,metadataList:l,zeroItemsMessage:d,errorMessage:u}){var p;const m=(0,i.OY)(),h=null!=(p=null==l?void 0:l.totalSize)?p:5,y=(0,n.useCallback)((r=>{(null==l?void 0:l.sourceURI)&&m(s.c.actions.fetchRangeRequested(N(R({},r),{server:e,provider:t,sourceURI:null==l?void 0:l.sourceURI})))}),[null==l?void 0:l.sourceURI,m,e,t]);(0,n.useEffect)((()=>()=>{(null==l?void 0:l.sourceURI)&&m(s.c.actions.reset({sourceURI:l.sourceURI}))}),[m,null==l?void 0:l.sourceURI,t,e]);const g=(0,n.useMemo)((()=>(0,a.c)({rowHeight:L,overscan:5})),[]),f=(0,n.useCallback)((i=>n.createElement(w,R({isDisabled:c,provider:t,server:e,sourceURI:r},i))),[r,c,t,e]);return l?l.error?n.createElement("div",{className:C.container},u):l.isPopulated&&!l.items.length?n.createElement("div",{className:C.container},d):n.createElement(o.c,{cellComponentFactory:f,className:C.scroller,items:l.items,keyPropName:"key",layout:g,totalSize:h,onPageRequest:y}):n.createElement("div",{className:C.container})}},66480:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(44212).is)({name:"curatedLists",initialState:{},reducers:{saveRequested(e,{payload:t}){e[t.sourceURI]={isSaving:!0,saveError:null}},saveSucceeded(e,{payload:t}){const r=e[t.sourceURI];r.isSaving=!1,r.metadataItem=t.metadataItem},saveFailed(e,{payload:t}){const r=e[t.sourceURI];r.isSaving=!1,r.saveError=t.error},removeItemRequested(e,t){},moveItemRequested(e,t){}}})},74976:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(27876),s=r(85976),a=r(96504),o=r(86244),c=r(11822),l=r(2708),d=r(85712),u=r(4644);const p=function({server:e,provider:t,contentDirectoryID:r,metadataType:p,limit:m,title:h}){const y=(0,i.OY)(),g=(0,u.c)(t,d.Aj.Content),f=(null==g?void 0:g.key)?a.c.join([g.key,r,"collections"],{subtype:(0,o.c)(p),smart:0,sort:"updatedAt:desc",limit:m,title:h}):void 0,v=(0,s.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:f}),b=(0,n.useMemo)((()=>f?(0,l.c)(v):()=>{}),[f,v]),S=(0,i.w1)(b);return(0,n.useEffect)((()=>{v&&!S&&y(c.c.actions.added({metadataItemStates:{},metadataLists:[{sourceURI:v,items:[],offset:0}]}))}),[y,S,v]),S}},70428:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(27876),s=r(85976),a=r(96504),o=r(11822),c=r(2708),l=r(85712),d=r(4644);const u=function({server:e,provider:t,mediaType:r}){const u=(0,i.OY)(),p=(0,d.c)(t,l.Aj.Playlist),m=p?a.c.join([p.key],{playlistType:r,smart:0,sort:"updatedAt:desc"}):void 0,h=(0,s.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:m}),y=(0,n.useMemo)((()=>m?(0,c.c)(h):()=>{}),[m,h]),g=(0,i.w1)(y);return(0,n.useEffect)((()=>{h&&!g&&u(o.c.actions.added({metadataItemStates:{},metadataLists:[{sourceURI:h,items:[],offset:0}]}))}),[u,g,h]),g}},21104:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.curatedLists)),a=function(e){return(0,n.M3)(s,(t=>t[e]))}},3232:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(44212),i=r(45372),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e},m=(e,t)=>a(e,o(t));const h={isPending:!1,isPopulated:!1,error:null},y={channels:[],operations:{createChannel:h,deleteChannel:h,fetchChannels:h}},g=(0,n.is)({name:"customChannels",initialState:y,reducers:{reset:()=>y,resetOperation(e,t){const{operation:r}=t.payload;return m(p({},e),{operations:m(p({},e.operations),{[r]:h})})},customChannelsFetchRequested(e,t){(0,i.G8)(e.operations.fetchChannels)},customChannelsFetchSucceeded(e,t){const{data:r}=t.payload;r&&(e.channels=r),(0,i.mM)(e.operations.fetchChannels)},customChannelsFetchFailed(e,t){(0,i.C)(e.operations.fetchChannels,t.payload.error)},customChannelCreateRequested(e,t){(0,i.G8)(e.operations.createChannel)},customChannelCreateSucceeded(e,t){const{data:r}=t.payload;r&&(e.channels=[...e.channels,r]),(0,i.mM)(e.operations.createChannel)},customChannelCreateFailed(e,t){(0,i.C)(e.operations.createChannel,t.payload.error)},customChannelDeleteRequested(e,t){(0,i.G8)(e.operations.deleteChannel)},customChannelDeleteSucceeded(e,t){const{channelId:r}=t.payload;e.channels=e.channels.filter((e=>e.id!==r)),(0,i.mM)(e.operations.deleteChannel)},customChannelDeleteFailed(e,t){(0,i.C)(e.operations.deleteChannel,t.payload.error)}}})},77664:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={statistics:[],isPending:!1,isPopulated:!1,error:null,requestTimestampMilliseconds:null,responseTimestampMilliseconds:null},a=(0,n.is)({name:"dashboardBandwidth",initialState:s,reducers:{reset:()=>s,bandwidthFetchRequested(e,t){(0,i.G8)(e)},bandwidthFetchSucceeded(e,{payload:t}){(0,i.mM)(e),e.statistics=t.data,e.requestTimestampMilliseconds=t.requestTimestampMilliseconds,e.responseTimestampMilliseconds=t.responseTimestampMilliseconds},bandwidthFetchFailed(e,{payload:t}){(0,i.C)(e,t.error),e.requestTimestampMilliseconds=null,e.responseTimestampMilliseconds=null},bandwidthAbortRequested(){}}})},28768:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={statistics:[],accounts:[],isPending:!1,isPopulated:!1,error:null},a=(0,n.is)({name:"dashboardPlayHistory",initialState:s,reducers:{reset:()=>s,playHistoryFetchRequested(e,t){(0,i.G8)(e)},playHistoryFetchSucceeded(e,{payload:t}){(0,i.mM)(e),e.statistics=t.data.statistics,e.accounts=t.data.accounts},playHistoryFetchFailed(e,{payload:t}){(0,i.C)(e,t.error)}}})},88524:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={statistics:[],isPending:!1,isPopulated:!1,isUnsupported:!1,error:null,requestTimestampMilliseconds:null},a=(0,n.is)({name:"dashboardResources",initialState:s,reducers:{reset:()=>s,resourcesFetchRequested(e,t){(0,i.G8)(e),e.isUnsupported=!1},resourcesFetchSucceeded(e,{payload:t}){(0,i.mM)(e),e.statistics=t.data,e.requestTimestampMilliseconds=t.requestTimestampMilliseconds},resourcesFetchFailed(e,{payload:t}){(0,i.C)(e,t.error),e.isUnsupported=404===t.error.status}}})},99748:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={moviesStatistics:[],tvStatistics:[],musicStatistics:[],isPending:!1,isPopulated:!1,error:null},a=(0,n.is)({name:"dashboardTopPlayed",initialState:s,reducers:{reset:()=>s,topPlayedFetchRequested(e,t){(0,i.G8)(e)},topPlayedFetchSucceeded(e,{payload:t}){(0,i.mM)(e),e.moviesStatistics=t.moviesStatistics,e.tvStatistics=t.tvStatistics,e.musicStatistics=t.musicStatistics},topPlayedFetchFailed(e,{payload:t}){(0,i.C)(e,t.error)}}})},87844:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={statistics:[],accounts:[],isPending:!1,isPopulated:!1,error:null},a=(0,n.is)({name:"dashboardTopUsers",initialState:s,reducers:{reset:()=>s,topUsersFetchRequested(e,t){(0,i.G8)(e)},topUsersFetchSucceeded(e,{payload:t}){(0,i.mM)(e),e.statistics=t.data.statistics,e.accounts=t.data.accounts},topUsersFetchFailed(e,{payload:t}){(0,i.C)(e,t.error)}}})},31632:(e,t,r)=>{"use strict";r.d(t,{c:()=>W});var n=r(11504),i=r(27876),s=r(70508),a=r(37660),o=r(69956),c=r(59396),l=r(36972),d=r(36624),u=r(20436),p=r(48140),m=r(85712),h=r(37984),y=r(99192),g=r(92700),f=r(29208),v=r(91320),b=r(1256),S=r(16416),P=r(86672),I=r(77872),E=r(23748),w=r(24252),C=r(53124),O=r(54456),M=r(4992),T=r(7200),D=r(45480),k=r(57864),x=r(3088);const A=(0,k.M3)(D.c,x.c,((e,t)=>e.hubs.map((e=>t[e.sourceURI])).every((e=>!e||e.isPopulated&&0===e.totalSize))));var R=r(22732),N=r(86564),L=r(18324),j=r(45838);const U={pageContentScroller:"DirectoryHubsPageContent-pageContentScroller-jceJrG PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko",banner:"DirectoryHubsPageContent-banner-FcMafX ProgramGuideGracenoteMigrationBanner-container-NePMOu"},F=864e5;function V(e){return!!e&&e<=Date.now()-F}function _({children:e,hub:t}){const[,,r]=(0,h.c$)(),{metricsContextTuple:i}=(0,f.e0)(),s=r&&t.key?(0,l.c)(t.source,{key:t.key,pageType:m.Qf.List,source:r.id,context:(0,f.QN)(i)}):void 0;return n.createElement(u.c,{href:s,hub:t},e)}function W({sourceURI:e}){const t=(0,i.OY)(),[r,l,u]=(0,h.c$)(),{lastFetchedAt:m,sourceURI:f,hubs:k,isPopulated:x,error:F}=(0,i.w1)(D.c),W=(0,i.w1)(s.c),B=(0,i.w1)(N.c),H=(0,i.w1)(A),z=(0,o.c)(e),G=(0,n.useCallback)((()=>{t(M.c.actions.fetchHubsRequested({server:r,provider:l,contentDirectory:u,sourceURI:e}))}),[u,t,l,r,e]);if((0,v.c)({},x),(0,T.c)(G),(0,n.useEffect)((()=>{x&&(V(m)||e!==f)&&t(M.c.actions.resetHubs({sourceURI:e}))}),[t,m,f,e,x]),(0,n.useEffect)((()=>{e!==f&&t(M.c.actions.fetchHubsRequested({server:r,provider:l,contentDirectory:u,sourceURI:e}))}),[u,t,f,r,e]),(0,n.useEffect)((()=>(t(M.c.actions.markHubsStaleCanceled()),()=>{t(M.c.actions.markHubsStaleRequested())})),[t]),V(m)||e!==f||!x&&!F)return n.createElement(S.c,null,n.createElement(E.c,null));if(F){const{status:e}=F;return 404===e?n.createElement(P.c,null):n.createElement(I.c,null,n.createElement(y.c,{kind:w.c.Primary,onPress:G},(0,c.c)("Retry")))}return x&&H?(null==u?void 0:u.id)===a._w?W?n.createElement(O.c,null):n.createElement(L.c,{onDone:G}):n.createElement(C.c,{directoryKey:z.key}):n.createElement(p.cp,null,B?n.createElement(R.c,null):null,n.createElement(b.c,{className:U.pageContentScroller},n.createElement(j.c,{className:U.banner,providerEntityID:l.entityID,serverEntityID:r.entityID}),n.createElement(g.c,{hubComponent:d.c,hubTitleComponent:_,hubs:k})))}},53124:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(27876),s=r(96096),a=r(92456),o=r(4372),c=r(32e3),l=r(85052),d=r(35860),u=r(59396),p=r(54744),m=r(67532),h=r(2708),y=r(5396),g=r(41284),f=r(15252),v=r(37984),b=r(99192),S=r(16416),P=r(24252),I=r(63152),E=r(43168),w=r(66460),C=r(74096),O=r(12888),M=r(69468);function T({directoryKey:e,selectedPivot:t}){var r;const[T,D,k]=(0,v.c$)(),x=d._u(D.identifier,d._0),A=(0,n.useMemo)((()=>(0,f.c)(T,D)),[D,T]),R=!!(0,i.w1)(A),N=(0,g.c)(T,k),L=(0,n.useMemo)((()=>(0,I.c)(e)),[e]),j=(0,i.w1)(w.c),U=(0,i.w1)(L),F=(0,O.c)(),V=(null==j?void 0:j.type)?(0,y.c)(null==j?void 0:j.type):void 0,{metadataListSourceURI:_}=(0,i.w1)(E.c),W=(0,i.w1)((0,h.c)(null!=_?_:""));return(null==e?void 0:e.startsWith("/library/platforms/"))?n.createElement(S.c,{icon:n.createElement(s.default,null),title:(0,u.c)("There are no items available for this service")}):(null==t?void 0:t.id)!==l.sV||(null==U?void 0:U.filterRules.length)||(null==j?void 0:j.type)!==m.a.Movie&&(null==j?void 0:j.type)!==m.a.Show?(null==t?void 0:t.id)===l.cT?n.createElement(S.c,{icon:n.createElement(o.default,null),title:(0,u.c)("There are no shared items of this type")}):(null==U?void 0:U.filterRules.length)?n.createElement(S.c,{description:(0,u.c)("Use the menu above to change the active filter"),icon:V?n.createElement(p.c,{type:V}):void 0,title:(0,u.c)("The active filter has no matches")},n.createElement(b.c,{kind:P.c.Primary,to:(0,C.c)({key:U.strippedKey}),onPress:F},(0,u.c)("Clear filter"))):x?R?n.createElement(S.c,{description:(0,u.c)("Hang tight while we download all the data for what's on"),icon:n.createElement(c.default,null),title:(0,u.c)("We're now building your Guide")}):n.createElement(S.c,{description:(0,u.c)("Please verify your channel mappings and refresh the Guide"),icon:n.createElement(c.default,null),title:(0,u.c)("Your Guide is empty")},n.createElement(b.c,{kind:P.c.Primary,to:(0,M.c)(T.machineIdentifier,"manage","dvr")},(0,u.c)("Go to DVR Settings"))):N?n.createElement(S.c,{description:(0,u.c)("Hang tight while we look for content"),icon:(null==k?void 0:k.type)?n.createElement(p.c,{type:k.type}):void 0,title:k?(0,u.c)('"{directoryTitle}" is currently being updated',{directoryTitle:k.title}):(0,u.c)("This page is currently being updated")}):(null==j?void 0:j.type)===m.a.Folder?n.createElement(S.c,{description:(0,u.c)("There are no items in this folder"),icon:(null==k?void 0:k.type)?n.createElement(p.c,{type:k.type}):void 0,title:(0,u.c)("Empty Folder")}):n.createElement(S.c,{description:T.isFullOwnedServer?(0,u.c)("Expecting more? Visit the Manage Libraries page to add folders and scan library files."):null,icon:(null==k?void 0:k.type)?n.createElement(p.c,{type:k.type}):void 0,title:k?(0,u.c)('"{directoryTitle}" is empty',{directoryTitle:T.isCloud?null!=(r=null==t?void 0:t.title)?r:null==W?void 0:W.title:k.title}):(0,u.c)("This page is empty")},T.isFullOwnedServer?n.createElement(b.c,{kind:P.c.Primary,to:(0,M.c)(T.machineIdentifier,"manage","libraries")},(0,u.c)("Manage Libraries")):null):n.createElement(S.c,{description:(0,u.c)("Use the menu above to change the active type"),icon:n.createElement(a.default,null),title:j.type===m.a.Movie?(0,u.c)("There are no Movies in your Watchlist"):(0,u.c)("There are no Shows in your Watchlist")})}},54456:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(59396),s=r(99192),a=r(16416),o=r(24252),c=r(42784),l=r(32116),d=r(3268),u=r.n(d),p=r(52908);function m(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 361.506",id:"plex-icon-devices"};s["aria-hidden"]=!t,s.style=i,s.className=p.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["g",{stroke:"#e5a00d",strokeWidth:"2.95"}].concat([n.createElement.apply(n,["path",{d:"M429.683 360.028h-128.55c-3.944 0-7.606-1.77-10.045-4.86a12.609 12.609 0 01-2.384-10.87l12.32-50.859h128.774l12.322 50.86c.929 3.818.059 7.783-2.384 10.87a12.729 12.729 0 01-10.053 4.859zm-121.35-57.343l-10.607 43.78c-.345 1.436.263 2.484.655 2.988a3.448 3.448 0 002.753 1.328h128.55c1.483 0 2.366-.83 2.758-1.337.392-.495 1-1.543.655-2.98l-10.607-43.779z"}].concat([])),n.createElement.apply(n,["path",{d:"M304.68 302.685h-38.937c-2.566 0-4.642-2.068-4.642-4.623s2.076-4.623 4.642-4.623h38.937c2.564 0 4.641 2.068 4.641 4.623s-2.077 4.623-4.64 4.623zM541.294 302.685H426.146c-2.567 0-4.644-2.065-4.644-4.62s2.077-4.625 4.644-4.625h115.148c4.384 0 7.949-3.548 7.949-7.918v-26.599H265.929c-2.566 0-4.642-2.067-4.642-4.622 0-2.556 2.076-4.623 4.642-4.623h292.596v35.844c0 9.462-7.728 17.163-17.231 17.163z"}].concat([])),n.createElement.apply(n,["path",{d:"M553.884 258.922a4.628 4.628 0 01-4.641-4.622V18.63c0-4.361-3.565-7.91-7.949-7.91H189.53c-4.384 0-7.947 3.549-7.947 7.91v58.967c0 2.555-2.076 4.623-4.642 4.623-2.566 0-4.642-2.068-4.642-4.623V18.63c0-9.462 7.729-17.155 17.23-17.155h351.765c9.503 0 17.23 7.693 17.23 17.155V254.3a4.628 4.628 0 01-4.64 4.622zM100.935 360.028H18.04c-9.135 0-16.565-7.403-16.565-16.496v-154.33c0-9.092 7.43-16.495 16.565-16.495h82.895c9.135 0 16.565 7.403 16.565 16.495v154.33c0 9.093-7.43 16.496-16.565 16.496zM18.04 181.952c-4.017 0-7.28 3.25-7.28 7.25v154.33c0 4 3.263 7.249 7.28 7.249h82.895c4.017 0 7.281-3.249 7.281-7.25V189.203c0-4-3.264-7.25-7.28-7.25z"}].concat([])),n.createElement.apply(n,["path",{d:"M112.088 206.735H7.777c-2.566 0-4.642-2.068-4.642-4.623s2.076-4.623 4.642-4.623h104.311c2.566 0 4.642 2.068 4.642 4.623s-2.076 4.623-4.642 4.623zM112.088 323.353H7.777c-2.566 0-4.642-2.068-4.642-4.623s2.076-4.624 4.642-4.624h104.311c2.566 0 4.642 2.069 4.642 4.624 0 2.555-2.076 4.623-4.642 4.623zM67.384 194.348H55.462c-2.566 0-4.642-2.067-4.642-4.623 0-2.555 2.076-4.622 4.642-4.622h11.922c2.566 0 4.642 2.067 4.642 4.622 0 2.556-2.076 4.623-4.642 4.623zM59.488 349.359c-6.56 0-11.9-5.32-11.9-11.855 0-6.53 5.34-11.846 11.9-11.846 6.56 0 11.9 5.316 11.9 11.846 0 6.535-5.34 11.855-11.9 11.855zm0-14.458a2.611 2.611 0 00-2.616 2.603 2.618 2.618 0 002.616 2.608 2.618 2.618 0 002.616-2.608 2.611 2.611 0 00-2.616-2.603z"}].concat([])),n.createElement.apply(n,["path",{d:"M226.172 360.03h-91.097c-2.566 0-4.642-2.068-4.642-4.623s2.076-4.623 4.642-4.623h91.097c6.85 0 12.42-5.553 12.42-12.369V117.552c0-6.817-5.57-12.37-12.42-12.37H107.536c-6.846 0-12.417 5.553-12.417 12.37v40.277c0 2.555-2.076 4.623-4.642 4.623-2.566 0-4.642-2.068-4.642-4.623v-40.277c0-11.918 9.733-21.615 21.7-21.615h118.637c11.967 0 21.705 9.697 21.705 21.615v220.863c0 11.917-9.738 21.616-21.705 21.616z"}].concat([])),n.createElement.apply(n,["path",{d:"M242.129 136.557H92.848c-2.566 0-4.642-2.068-4.642-4.623s2.076-4.623 4.642-4.623h149.28c2.567 0 4.643 2.068 4.643 4.623s-2.076 4.623-4.642 4.623zM242.129 315.593h-106.46c-2.566 0-4.642-2.068-4.642-4.623s2.076-4.623 4.642-4.623h106.46c2.566 0 4.642 2.068 4.642 4.623s-2.076 4.623-4.642 4.623zM178.151 122.94h-17.059c-2.566 0-4.642-2.067-4.642-4.622 0-2.555 2.076-4.623 4.642-4.623h17.06c2.565 0 4.641 2.068 4.641 4.623s-2.076 4.623-4.642 4.623zM166.854 348.158c-8.287 0-15.028-6.715-15.028-14.968 0-8.252 6.741-14.97 15.028-14.97s15.028 6.718 15.028 14.97c0 8.253-6.741 14.968-15.028 14.968zm0-20.695c-3.169 0-5.744 2.567-5.744 5.727s2.575 5.724 5.744 5.724c3.169 0 5.744-2.564 5.744-5.724s-2.575-5.727-5.744-5.727zM380.652 30.415h-30.481a4.628 4.628 0 01-4.641-4.623 4.628 4.628 0 014.64-4.623h30.482a4.628 4.628 0 014.641 4.623 4.628 4.628 0 01-4.64 4.623z"}].concat([]))]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}m.propTypes={"aria-label":u().string,className:u().string,style:u().object};const h=m;var y=r(61554);function g(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-parental-controls"};s["aria-hidden"]=!t,s.style=i,s.className=p.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["g",void 0].concat([n.createElement.apply(n,["path",{d:"M548.3 559.273H361.152c-6.456 0-11.696-5.22-11.696-11.657V407.73c0-6.435 5.24-11.657 11.696-11.657H548.3c6.457 0 11.7 5.222 11.7 11.657v139.885c0 6.437-5.243 11.657-11.7 11.657zm-175.451-23.315h163.756v-116.57H372.849z"}].concat([])),n.createElement.apply(n,["path",{d:"M454.726 512.644c-6.457 0-11.697-5.22-11.697-11.657v-34.97c0-6.435 5.24-11.657 11.697-11.657 6.457 0 11.697 5.222 11.697 11.657v34.97c0 6.438-5.24 11.657-11.697 11.657z"}].concat([])),n.createElement.apply(n,["path",{d:"M454.727 489.33c12.92 0 23.392-10.44 23.392-23.314 0-12.876-10.472-23.314-23.392-23.314s-23.394 10.438-23.394 23.314c0 12.875 10.474 23.314 23.394 23.314zM524.905 419.388c-6.457 0-11.695-5.223-11.695-11.658v-23.314c0-32.127-26.222-58.286-58.484-58.286-32.26 0-58.484 26.159-58.484 58.286v23.314c0 6.435-5.24 11.658-11.697 11.658-6.457 0-11.697-5.223-11.697-11.658v-23.314c0-44.997 36.728-81.6 81.878-81.6 45.152 0 81.879 36.603 81.879 81.6v23.314c0 6.435-5.244 11.658-11.7 11.658zM11.7 559.772c-.936 0-1.872-.114-2.831-.347-6.293-1.565-10.083-7.884-8.516-14.131l14.06-56.002c6.854-27.23 26.856-48.773 53.548-57.632l103.821-34.482c24.4-10.165 35.816-50.429 38.272-65.7-17.919-16.367-34.599-40.987-34.599-63.135 0-8.253-2.456-11.657-3.743-12.287-3.65-.91-5.708-3.217-7.112-6.691-1.286-3.194-12.539-31.778-12.539-50.965 0-.956.117-1.912.352-2.821 1.286-5.106 4.865-12.59 11.345-16.973v-61.807C163.758 68.12 208.253.228 280.727.228c71.584 0 91.048 36.58 93.317 54.672 12.141 8.93 23.65 24.34 23.65 61.9v61.806c6.48 4.383 10.084 11.844 11.347 16.973.234.932.35 1.865.35 2.82 0 19.188-11.228 47.772-12.538 50.966-1.404 3.474-4.375 6.085-8.024 6.97-.351.35-2.83 3.755-2.83 12.008 0 21.1-8.353 32.034-13.358 38.562l-1.755 2.401c-3.603 5.362-10.878 6.761-16.212 3.218-5.38-3.59-6.83-10.818-3.252-16.18.749-1.096 1.638-2.285 2.62-3.591 4.024-5.246 8.562-11.19 8.562-24.41 0-17.416 7.23-27.091 14.083-31.638 3.369-9.139 8.726-25.715 9.264-36.533-.421-.933-.959-1.866-1.333-2.192-6.457 0-10.317-4.78-10.317-11.214v-69.967c0-34.318-11.065-41.313-15.79-44.297-2.831-1.795-7.603-4.803-8.282-11.214-.163-1.376.048-2.961.491-4.546-1.637-9.233-15.673-33.2-69.993-33.2-57.104 0-93.575 55.232-93.575 93.257v69.944c0 6.434-5.24 11.657-11.697 11.657.562 0 .35.792.048 1.678.515 10.842 5.918 27.488 9.264 36.604 6.854 4.57 14.083 14.222 14.083 31.638 0 15.69 15.51 36.673 30.833 49.31a11.633 11.633 0 014.257 8.975c0 14.805-13.498 75.539-53.992 92.349L75.33 453.739c-19.065 6.318-33.383 21.729-38.249 41.172l-14.06 56.002c-1.286 5.339-6.058 8.86-11.322 8.86z"}].concat([]))]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}g.propTypes={"aria-label":u().string,className:u().string,style:u().object};const f=g,v={container:"PlexAccountUpsellPageContent-container-P2gjsS",panel:"PlexAccountUpsellPageContent-panel-odlXDa",panelIcon:"PlexAccountUpsellPageContent-panelIcon-BWl9px",panelTitle:"PlexAccountUpsellPageContent-panelTitle-b4qHxx",panelDescription:"PlexAccountUpsellPageContent-panelDescription-m5JOVh"};function b(){return n.createElement(a.c,{description:(0,i.c)("Some benefits to a Plex account:"),title:(0,i.c)("Sign up for a free account to continue")},n.createElement("div",{className:v.container},n.createElement("div",{className:v.panel},n.createElement(h,{className:v.panelIcon}),n.createElement("div",{className:v.panelTitle},(0,i.c)("One App, Any Device")),n.createElement("div",{className:v.panelDescription},(0,i.c)("Pick up whatever you were watching exactly where you left off on any device"))),n.createElement("div",{className:v.panel},n.createElement(y.c,{className:v.panelIcon}),n.createElement("div",{className:v.panelTitle},(0,i.c)("Save Your Favorites")),n.createElement("div",{className:v.panelDescription},(0,i.c)("Add a TIDAL subscription to save your favorite music and playlists"))),n.createElement("div",{className:v.panel},n.createElement(f,{className:v.panelIcon}),n.createElement("div",{className:v.panelTitle},(0,i.c)("Parental Controls")),n.createElement("div",{className:v.panelDescription},(0,i.c)("Enable parental controls to keep things kid-friendly, or create separate accounts for your childish roommates")))),n.createElement(l.c,null,n.createElement(s.c,{kind:o.c.Primary,size:c.c.Large,to:"#!/signUp"},(0,i.c)("Sign Up"))))}},26340:(e,t,r)=>{"use strict";r.d(t,{c:()=>x});var n=r(11504),i=r(27876),s=r(72528),a=r(89448),o=r(6900),c=r(85712),l=r(37984),d=r(74076),u=r(43196),p=r(53151),m=r(4992),h=r(67748),y=r(9932),g=r(43168),f=r(83732),v=r(70968),b=r(93964),S=r(94968);const P={pageHeader:"DirectoryPageHeader-pageHeader-FgozlU PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"};var I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&T(e,r,t[r]);if(C)for(var r of C(t))M.call(t,r)&&T(e,r,t[r]);return e},k=(e,t)=>E(e,w(t));function x({sourceURI:e,selectedPivot:t}){var r;const I=(0,i.OY)(),[,,E]=(0,l.c$)(),{meta:w,metadataListSourceURI:C,hubsList:{sourceURI:O}}=(0,i.w1)(g.c),M=null!=(r=null==w?void 0:w.Pivot)?r:null==E?void 0:E.pivots,T=(0,i.w1)((0,u.c)("directoryListStyles")),x=(0,n.useMemo)((()=>(0,h.c)(e)),[e]),A=(0,i.w1)(x),R=(0,n.useMemo)((()=>(0,y.c)(e)),[e]),N=(0,i.w1)(R),L=(0,n.useCallback)((t=>{if(!e)return;const r=k(D({},T),{[e]:t});(0,a.SS)((()=>{I((0,s.SI)({directoryListStyles:r}))}))}),[I,T,e]);return(0,n.useEffect)((()=>{t&&!(null==M?void 0:M.find((e=>e.key===t.key)))&&I(m.c.actions.resetMeta())}),[I,M,t]),n.createElement(S.c,{className:P.pageHeader},n.createElement(v.c,null,n.createElement(d.c,{hubsListSourceURI:t&&t.type!==c.Qf.Hub?void 0:null!=O?O:e,metadataListSourceURI:t&&t.type!==c.Qf.List?void 0:null!=C?C:e})),M&&t?n.createElement(p.c,{pivots:M,selectedPivot:t}):null,n.createElement(b.c,null,n.createElement(o.c,{listStyles:N,selectedListStyle:t&&!(0,f.c)(t)&&(j=t.key,j!==c.OG.SharedItems&&j!==c.OG.DiscoverFriends&&j!==c.OG.DiscoverProfile&&j!==c.OG.DiscoverActivity)?A:void 0,onListStyleSelect:L})));var j}},53151:(e,t,r)=>{"use strict";r.d(t,{c:()=>F});var n=r(11504),i=r(27876),s=r(66780),a=r(44500),o=r(37984),c=r(70216),l=r(51660),d=r(8684),u=r(8436),p=r(89080),m=r.n(p),h=r(97164),y=r(24752),g=r(55588),f=r(87440),v=r(2540),b=r(81180),S=r(67716),P=r(33316),I=r(95156);const E={container:"PivotTabDropdown-container-KCsIVr",button:"PivotTabDropdown-button-ktD72U TabButton-button-KPkGEB Button-button-Eu0WcX Link-link-vSsQW1",buttonContents:"PivotTabDropdown-buttonContents-dK9CFT",title:"PivotTabDropdown-title-wqZjjy",disclosureArrow:"PivotTabDropdown-disclosureArrow-z_MOta DisclosureArrow-disclosureArrow-NTDkGd",isSelected:"PivotTabDropdown-isSelected-UQdIdh"},w={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[parseInt(I.c.pageHeaderTabButtonLeftRightMargin,10)]}}]};function C({pivots:e,selectedPivot:t,onPivotPress:r}){var i;const[s,a,l]=(0,o.c$)(),d=(0,f.c)(),u=(0,b.c)();return n.createElement("div",{className:E.container,"data-testid":"tabDropDown",id:d},n.createElement(c.c,{className:m()(E.button,!!t&&E.isSelected),isSelected:!!t,onPress:u.onToggle},n.createElement("div",{className:E.buttonContents},n.createElement("div",{className:E.title},null!=(i=null==t?void 0:t.title)?i:e[0].title),n.createElement(h.c,{className:m()(E.disclosureArrow,!!t&&E.isSelected),direction:u.isOpen?v.UP:v.aK}))),n.createElement(y.c,{isOpen:u.isOpen,options:w,target:d,onMenuClose:u.onClose},e.map(((e,i)=>{const o=(0,S.c)(s,a,l,e);return o?n.createElement(P.c,{key:i,isSelected:e===t,to:o,value:e.key,onPress:(0,g.c)(r,u.onClose)},e.title):null}))))}var O=r(98632),M=r(12888);const T={pageHeaderCenter:"PivotTabsPageHeaderCenter-pageHeaderCenter-HE9JcN PageHeaderCenter-pageHeaderCenter-mMF86x"};var D=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&L(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&L(e,r,t[r]);return e},U=(e,t)=>k(e,x(t));function F({pivots:e,selectedPivot:t,getMetricsProperties:r}){const[p,m,h]=(0,o.c$)(),[y,{width:g}]=(0,l.c)(),[f,{width:v}]=(0,l.c)(),b=(0,i.w1)(u.c),[P,I]=(0,n.useState)(v),E=v||P,w=(0,n.useMemo)((()=>(0,O.c)(e,b)),[e,b]),D=w.length<2,k=w.length>1&&E>g,x=(0,d.c)({identifier:m.metricsIdentifier,origin:a.Wc}),A=(0,M.c)((0,n.useCallback)((e=>{x(U(j({},null==r?void 0:r(null==e?void 0:e.currentTarget.getAttribute("href"))),{action:s.CX}))}),[r,x]));return(0,n.useEffect)((()=>{v&&I(v)}),[v]),D?null:n.createElement("div",{ref:y,className:T.pageHeaderCenter},k?n.createElement(C,{pivots:w,selectedPivot:t,onPivotPress:A}):n.createElement("div",{ref:f},w.map(((e,r)=>{var i;const s=null!=(i=e.route)?i:(0,S.c)(p,m,h,e);return s?n.createElement(c.c,{key:r,isSelected:e===t,to:s,onPress:A},e.title):null}))))}},4992:(e,t,r)=>{"use strict";r.d(t,{c:()=>D});var n=r(30004),i=r(31228),s=r(44212),a=r(35860),o=r(89064),c=r(85976),l=r(69956),d=r(93808),u=r(96048),p=r(11822),m=r(34956),h=r(59936),y=r(32380),g=r(19576),f=r(87220),v=r(48708),b=r(45372),S=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const M={meta:void 0,metadataListSourceURI:void 0,filterOptions:{},firstCharacters:{isPending:!1,isPopulated:!1,error:null,items:[]},hubsList:{sourceURI:void 0,lastFetchedAt:void 0,isPending:!1,isPopulated:!1,error:null,hubs:[]}};function T(e,t){var r;(null==(r=e.hubsList.sourceURI)?void 0:r.includes(t))&&e.hubsList.hubs.forEach((e=>{e.isStale=!0}))}const D=(0,s.is)({name:"directory",initialState:M,reducers:{reset:()=>M,resetMeta(e){e.meta=void 0},resetHubs(e,t){e.hubsList=M.hubsList},resetList(e){e.metadataListSourceURI=void 0,e.directorySourceURI=void 0},initializeListRequested(e,{payload:t}){e.metadataListSourceURI=t.sourceURI,e.directorySourceURI=t.directorySourceURI},markHubsStaleRequested(e){e.hubsList.isPending=!1},markHubsStale(e){e.hubsList.hubs.forEach((e=>{e.isStale=!0}))},markHubsStaleCanceled(e){},fetchHubsRequested(e,{payload:t}){e.hubsList.sourceURI=t.sourceURI,(0,b.G8)(e.hubsList)},fetchHubsSucceeded(e,{payload:t}){(0,b.mM)(e.hubsList),e.hubsList.hubs=t.data.hubs,e.hubsList.lastFetchedAt=Date.now(),e.title=t.data.title,e.meta=t.data.meta,e.slug=t.data.slug},fetchHubsFailed(e,{payload:t}){(0,b.C)(e.hubsList,t.error)},fetchFilterOptionsRequested(e,{payload:t}){const r=t.filter;e.filterOptions[r.key]||(e.filterOptions[r.key]={isPending:!1,isPopulated:!1,error:null,options:[]}),(0,b.G8)(e.filterOptions[r.key])},fetchFilterOptionsSucceeded(e,{payload:t}){const r=t.filter;(0,b.mM)(e.filterOptions[r.key]),e.filterOptions[r.key].options=t.filterOptions},fetchFilterOptionsFailed(e,{payload:t}){const r=t.filter;(0,b.C)(e.filterOptions[r.key],t.error)},fetchFirstCharactersRequested(e,t){(0,b.G8)(e.firstCharacters)},fetchFirstCharactersSucceeded(e,{payload:t}){(0,b.mM)(e.firstCharacters),e.firstCharacters.items=t.firstCharacters},fetchFirstCharactersFailed(e,{payload:t}){(0,b.C)(e.firstCharacters,t.error)}},extraReducers(e){e.addCase(p.c.actions.fetchRangeSucceeded,((e,{payload:t})=>{t.sourceURI===e.metadataListSourceURI&&(e.title=t.data.title,t.data.meta&&(e.meta=t.data.meta))})),e.addCase(p.c.actions.reset,((e,{payload:t})=>{return t.sourceURI===e.metadataListSourceURI?(r=((e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&O(e,r,t[r]);return e})({},M),n={filterOptions:e.filterOptions,meta:e.meta},P(r,I(n))):e;var r,n})),e.addCase(p.c.actions.repopulateRangeSucceeded,((e,{payload:t})=>{const r=e.hubsList.hubs.find((({sourceURI:e})=>e===t.sourceURI));r&&(r.isStale=!1)})),e.addCase(p.c.actions.fetchAllSucceeded,((e,{payload:t})=>{const r=e.hubsList.hubs.find((({sourceURI:e})=>e===t.sourceURI));r&&(r.isStale=!1,0===t.data.totalSize&&(r.initialSize=0))})),e.addCase(f.c.actions.ended,((e,{payload:t})=>{t.metadataType!==d.WW.Movie&&t.metadataType!==d.WW.Episode||T(e,t.source)})),e.addCase(m.c.actions.sessionStopped,((e,{payload:t})=>{T(e,(0,c.c)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(h.c.actions.libraryScanUpdated,((e,{payload:t})=>{T(e,(0,c.c)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(u.c.actions.toggleWatchlistSucceeded,(e=>{T(e,(0,c.c)({serverIdentifier:o.A,providerIdentifier:a.Im}))})),e.addCase(v.cp.actions.preferredServicesSaveSucceeded,(e=>{var t;(0,g.c)(null==(t=e.hubsList)?void 0:t.sourceURI)||function(e){e.hubsList.lastFetchedAt=(0,n.c)((0,i.c)(new Date,1))}(e)})),e.addCase(u.c.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{T(e,(0,c.c)({serverIdentifier:t.server.machineIdentifier,providerIdentifier:t.provider.identifier}))})),e.addCase(u.c.actions.metadataProcessed,((e,{payload:t})=>{const{serverIdentifier:r,providerIdentifier:n}=(0,l.c)(t.sourceURI);T(e,(0,c.c)({serverIdentifier:r,providerIdentifier:n}))})),e.addCase(y.c.actions.languageChanged,(e=>{e.hubsList=M.hubsList}))}})},95208:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(27876),i=r(38828),s=r(96504),a=r(34044),o=r(57892);function c(e){return e&&s.c.parseUri(e).pathname}const l=function({machineIdentifier:e,providerIdentifier:t,directoryKey:r,selectedPivot:s,contentDirectory:l}){const d=(0,n.w1)((0,a.c)(e,t,null==s?void 0:s.key)),u=r||(null!=d?d:(0,o.c)(s)),p=c(u),m=c(null==s?void 0:s.key),h=c(null==l?void 0:l.key),y=h?new RegExp(`^${h}(/\\w+)+`):void 0,g=p&&(null==y?void 0:y.test(p));return m&&(null==y?void 0:y.test(m))&&!g?(i.c.warn(`Unknown directory key ${u}, using pivot instead`),null==s?void 0:s.key):u}},51912:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(11504),i=r(27876),s=r(72528),a=r(97612),o=r(8396),c=r(57864),l=r(43196);const d=(0,l.c)("lastSourcePivots"),u=(0,l.c)("shouldSaveLastSourcePivots"),p=(0,r(87512).c)((function(e,t,r){return(0,c.M3)(d,u,((n,i)=>{if(i)return n[(0,a.c)(e,t,r)]}))}));var m=r(8436),h=r(99216),y=r(98632);const g=function(e=[],t){return e.find((e=>e.id?e.id===t||e.key===t:!!e.key&&e.key===t))};var f=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e};const C=function({machineIdentifier:e,providerIdentifier:t,contentDirectoryID:r,pageType:c,pivotID:l,directoryKey:f,ignoreShouldSaveLastSourcePivotsSetting:S}){var P;const I=(0,i.OY)(),E=(0,i.w1)(h.c),C=(0,i.w1)((0,o.c)(e,t,r)),O=(0,i.w1)(u),M=(0,i.w1)(d),T=(0,i.w1)(p(e,t,r)),D=(0,i.w1)(m.c);let k;if(c)k=null==(P=null==E?void 0:E.Pivot)?void 0:P.find((e=>e.active&&(!f||e.key===f)));else{const e=(0,y.c)(null==C?void 0:C.pivots,D);k=g(e,l),!k&&T&&!S&&(null==e?void 0:e.find((e=>e.key===T)))&&(k=g(null==C?void 0:C.pivots,T)),k||(k=null==e?void 0:e[0])}const x=r?(0,a.c)(e,t,r):void 0;return(0,n.useEffect)((()=>{var e,t;O&&!S&&x&&k&&T!==k.key&&null==c&&I((0,s.SI)({lastSourcePivots:(e=w({},M),t={[x]:k.key},v(e,b(t)))}))}),[I,S,T,M,l,c,k,O,x]),k}},7200:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(35860),a=r(15252),o=r(88116),c=r(37984),l=r(21040);const d=function(e){const[t,r,d]=(0,c.c$)(),u=(0,n.useMemo)((()=>function(e,t,r){return s._u(t.identifier,s.Qh)?r?(0,o.c)(e,r):()=>{}:s._u(t.identifier,s._0)?(0,a.c)(e,t):()=>{}}(t,r,d)),[d,r,t]),p=!(!(0,i.w1)(u)&&!(null==d?void 0:d.refreshing)),m=(0,l.c)(p);(0,n.useEffect)((()=>{let t;return p?t=window.setInterval((()=>{null==e||e()}),1e4):!p&&m&&(null==e||e()),()=>{window.clearInterval(t)}}),[e,p,m])}},67748:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(43196),s=r(9932);const a=function(e){return(0,n.M3)((0,i.c)("directoryListStyles"),(0,s.c)(e),((t,r)=>{if(!r.length)return;const n=e?t[e]:void 0;return n&&r.includes(n)?n:r[0]}))}},9932:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(86980),s=r(67532),a=r(99216),o=r(94612);const c=function(e){return(0,n.M3)(a.c,(t=>{const r=t?(0,o.c)(t):void 0;if(!r||!e)return[s.y.Grid];if((0,i.c)(e))return[s.y.Grid];if(r.type===s.a.Folder)return[s.y.Folder];switch(r.type){case s.a.Movie:case s.a.Show:case s.a.Album:case s.a.Episode:return r.Sort?[s.y.Grid,s.y.Details,s.y.Table]:[s.y.Grid,s.y.Details];case s.a.Artist:case s.a.Season:return r.Sort?[s.y.Grid,s.y.Table]:[s.y.Grid];case s.a.Track:return[r.Sort?s.y.Table:s.y.Grid];default:return[s.y.Grid]}}))}},63152:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(55720),s=r(66460);const a=function(e){return(0,n.M3)(s.c,(t=>e?(0,i.c)(e,t):void 0))}},43168:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.directory))},45480:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.directory.hubsList))},99216:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(43168);const s=(0,n.M3)(i.c,(e=>e.meta))},66460:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(94612),s=r(99216);const a=(0,n.M3)(s.c,(e=>e?(0,i.c)(e):void 0))},98632:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(83732);function i(e=[],t){return e.filter((e=>!(0,n.c)(e)&&function(e,t){return!t||!!e.features.find((e=>e.uuid===t||e.id===t))}(t,e.requires)))}},51280:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11096),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e,t){const r=[...e];if(t.filter.filterType===n.mE.Boolean){const e=r.findIndex((e=>e.filter.filter===t.filter.filter)),n=-1===e?0:e,p=(i=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},t),u={value:"string"==typeof t.value?"1"===t.value:t.value},s(i,a(u)));-1===e?r.push(p):r.splice(n,1,p)}else r.find((e=>e.filter.filter===t.filter.filter&&e.value===t.value))||r.push(t);var i,u;return r}},55720:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(96504),i=r(43300),s=r(40376),a=r(51280);function o(e){const t=(0,s.sL)(i.c).find((t=>i.c[t]===e));return t?i.c[t]:void 0}const c=function(e,t){if(!(null==t?void 0:t.Filter))return{strippedKey:e,filterRules:[]};const r=t.Filter,{params:i,pathname:s}=n.c.parseUri(e,{decoder:e=>e});let c=[];for(const e in i)if(i.hasOwnProperty(e)){let t=c;const n=i[e],s=r.find((t=>e.startsWith(t.filter)));if(!s)continue;const l=o(`${e.substr(s.filter.length)}=`);if(!l)continue;"string"==typeof n?t=(0,a.c)(t,{filter:s,operator:l,value:n}):Array.isArray(n)&&(t=n.reduce(((e,t)=>"string"!=typeof t?e:(0,a.c)(e,{filter:s,operator:l,value:t})),t)),c!==t&&(c=t,delete i[e])}return{strippedKey:n.c.join(s,i,{stringifyOptions:{encode:!1}}),filterRules:c}}},94612:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){var t;return null==(t=e.Type)?void 0:t.find((e=>e.active))}},74096:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(96504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e};let d,u;function p(e,t=window.location.hash){const r=function(e){if(d===e)return u;const t=e.split("?"),r=t.length>1?t[1]:void 0,i=r?n.c.parseParams(r):{};return d=e,u={url:t[0],params:i},u}(t);return n.c.join(r.url,l(l({},r.params),e))}},57892:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85712);const i={[n.OG.HomeWatchlist]:"/library/sections/watchlist/all",[n.OG.SharedItems]:"/library/shared/all"};function s(e){if(null==e?void 0:e.key)return Object.keys(i).includes(e.key)?i[e.key]:e.key}},67716:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(19204),i=r(83732);const s=function(e,t,r,s){var a;if(!r)return;if((0,i.c)(s))return;const o=(null==(a=r.pivots)?void 0:a.includes(s))?{pivot:s.id||s.key}:{pageType:s.type,key:s.key};return(0,n.c)(e,t,r,o)}},19576:(e,t,r)=>{"use strict";function n(e){return!!e&&/\/library\/platforms\/(\w+)/.test(e)}r.d(t,{c:()=>n})},83732:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(85712);const i=function(e){return e.type===n.Qf.View&&!Object.values(n.OG).includes(e.key)}},11884:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(27876),s=r(56960),a=r(42728),o=r(38828),c=r(59396),l=r(55588),d=r(24808),u=r(37984),p=r(81180),m=r(34328),h=r(17768),y=r(63300),g=r(95392);function f({metadataItem:e,render:t,onClose:r}){var f;const{isPending:v,canDownload:b,canDeleteDownload:S,onDownload:P,onDeleteDownload:I}=(0,h.c)(e),E=(0,i.w1)((0,m.c)(a.EL)),w=(0,i.w1)((0,m.c)(a.kF)),C=(0,p.c)(),O=(0,p.c)(),[M]=(0,u.c$)(),T=S,D=v||!S&&!b,k=!!(null==(f=M.ownerFeatures)?void 0:f.includes(a.EL)),x=w||E&&k,A=(0,n.useCallback)((()=>{o.c.warn("[Downloads] Download not permitted:","Server owner is grandfathered?",k,"Is user grandfathered?",E,"User has downloads Plex Pass gating?",w)}),[k,E,w]),R=x?(0,l.c)(P,r):(0,l.c)(A,O.onOpen),N=S?C.onOpen:R;return n.createElement(n.Fragment,null,n.createElement(y.c,{isConfirmButtonSpinning:v,isOpen:C.isOpen,kind:d.od,message:(0,c.c)("Are you sure you want to delete this download?"),metricsPage:s._U,title:(0,c.c)("Delete Download"),onCancel:(0,l.c)(C.onClose,r),onConfirm:(0,l.c)(I,C.onClose,r)}),n.createElement(g.c,{isOpen:O.isOpen,onModalClose:(0,l.c)(O.onClose,r)}),t(T,D,N))}},21772:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(17768),s=r(8264);function a({className:e,metadataItem:t,isShadowVisible:r=!1}){const{progress:a,isSubscribing:o,isDownloaded:c}=(0,i.c)(t);return n.createElement("div",{className:e},c?n.createElement(s.c,{progress:a<100?a:null,showIndeterminate:o,showShadow:r}):null)}},42940:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(11504),i=r(54444),s=r(27876),a=r(89448),o=r(59396),c=r(99192),l=r(5806),d=r(58196),u=r(23208),p=r(79240),m=r(37768),h=r(58724),y=r(16648),g=r(84480),f=r(72840),v=r(24252),b=r(69096),S=r(57864),P=r(90104);const I=function(e){return(0,S.M3)(P.c,(t=>t.creating[e]))},E={preference:"DownloadTemplateModal-preference-afkapG",label:"DownloadTemplateModal-label-KtLDnY",description:"DownloadTemplateModal-description-FYlIro"},w=[];function C({metadataItem:e}){var t,r,S;const P=(0,s.OY)(),C=(0,s.w1)(I(e.sourceURI)),O=(0,n.useCallback)((()=>{(0,a.SS)((()=>{P(b.c.actions.subscriptionTemplateChanged({sourceURI:e.sourceURI,template:void 0}))}))}),[P,e.sourceURI]),M=null!=(r=null==(t=null==C?void 0:C.template)?void 0:t.Setting)?r:w,{defaultValues:T,preferences:D}=(0,n.useMemo)((()=>{const e={},t=M.reduce(((t,{id:r,label:n,summary:i,value:s,hidden:a,enumValues:o})=>{if(a||!o)return t;const c=o.split("|").map((e=>{const t=e.split(":");return{value:t[0],label:t[1]}}));return t.push({id:r,label:n,summary:i,options:c}),e[r]=s,t}),[]);return{defaultValues:e,preferences:t}}),[M]),{register:k,handleSubmit:x}=(0,i.aS)({defaultValues:T}),A=(0,n.useCallback)((t=>{(null==C?void 0:C.template)&&P(b.c.actions.subscriptionCreateRequested({sourceURI:e.sourceURI,template:null==C?void 0:C.template,settings:t}))}),[P,e.sourceURI,null==C?void 0:C.template]);return n.createElement(u.c,{isOpen:!!(null==C?void 0:C.template),onModalClose:O},n.createElement("form",{onSubmit:x(A)},n.createElement(m.c,{onModalClose:O},n.createElement(f.c,null,(0,o.c)("Download Options")),(null==C?void 0:C.error)?n.createElement(h.c,{message:(0,o.c)("Something went wrong. Make sure the item is available and try again.")}):null,n.createElement(p.c,null,D.map((({id:e,label:t,summary:r,options:i})=>n.createElement("label",{key:e,className:E.preference},n.createElement("span",{className:E.label},t),n.createElement(d.c,{ref:k,name:e},i.map(((e,t)=>n.createElement("option",{key:t,value:e.value},e.label)))),n.createElement("span",{className:E.description},r))))),n.createElement(y.c,null,n.createElement(g.c,null,n.createElement(c.c,{onPress:O},(0,o.c)("Cancel")),n.createElement(l.c,{isSpinning:null!=(S=null==C?void 0:C.isPending)&&S,kind:v.c.Primary,type:"submit"},(0,o.c)("Save")))))))}},69096:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(44212),i=r(99112),s=r(85976),a=r(69956),o=r(66308),c=r(96048),l=r(81996),d=r(1156);function u(e,{payload:t}){const{type:r,progress:n=0,Context:i}=t.activity;if(!(null==i?void 0:i.source)||r!==o.ay)return;const{source:c,ratingKey:l}=i,{serverIdentifier:u,providerIdentifier:p}=(0,a.c)(c),m=(0,s.c)({serverIdentifier:u,providerIdentifier:p,key:`/library/metadata/${l}`}),h=e.status.downloads[m];if(!h)return;const y=100===n;e.status.downloads[m]={id:h.id,subscription:y?d.c.Saved:d.c.Saving,sourceURI:m,type:h.type,relation:h.relation,progress:n}}const p=(0,n.is)({name:"downloads",initialState:{status:{downloads:{},error:null},creating:{},deleting:{},providerSections:[]},reducers:{providersFetchSucceeded(e,{payload:t}){e.providerSections=t.providerSections},downloadsFetchSucceeded(e,{payload:t}){for(const r of t.items)delete e.status.downloads[r.sourceURI];for(const r of t.downloads)e.status.downloads[r.sourceURI]=r},downloadsFetchFailed(e,{payload:t}){e.status.error=t.error},subscriptionTemplatesFetchRequested(e,t){},subscriptionTemplateChanged(e,{payload:t}){t.template?e.creating[t.sourceURI]={isPending:!1,error:null,template:t.template}:delete e.creating[t.sourceURI]},subscriptionCreateRequested(e,{payload:t}){e.creating[t.sourceURI]={isPending:!0,error:null}},subscriptionCreateSucceeded(e,{payload:t}){delete e.creating[t.sourceURI],e.status.downloads[t.sourceURI]={id:t.id,sourceURI:t.sourceURI,type:t.type,subscription:d.c.Subscribing,relation:d.C.Self,progress:0}},subscriptionCreateFailed(e,{payload:t}){e.creating[t.sourceURI]={isPending:!1,error:t.error},delete e.status.downloads[t.sourceURI]},subscriptionDeleteRequested(e,{payload:t}){e.deleting[t.sourceURI]={isPending:!0,error:null}},subscriptionDeleteSucceeded(e,{payload:t}){delete e.deleting[t.sourceURI],delete e.status.downloads[t.sourceURI]},subscriptionDeleteFailed(e,{payload:t}){e.deleting[t.sourceURI]={isPending:!1,error:t.error}}},extraReducers:e=>{i.c.allowSyncDownload&&(e.addCase(l.c.actions.activityUpdated,u),e.addCase(l.c.actions.activityFinished,u),e.addCase(c.c.actions.deleted,((e,{payload:t})=>{const{mediaProviderID:r,sourceURI:n}=t,i=e.providerSections.find((({id:e})=>r===e));if(!i)return;const{serverIdentifier:o,providerIdentifier:c}=(0,a.c)(i.source),{key:l}=(0,a.c)(n),d=(0,s.c)({serverIdentifier:o,providerIdentifier:c,key:l});delete e.status.downloads[d]})))}})},1156:(e,t,r)=>{"use strict";r.d(t,{C:()=>i,c:()=>n});var n=(e=>(e[e.Subscribing=0]="Subscribing",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e))(n||{}),i=(e=>(e[e.Self=0]="Self",e[e.Descendants=1]="Descendants",e[e.Ancestors=2]="Ancestors",e))(i||{})},17768:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(27876),s=r(93808),a=r(69096),o=r(1156),c=r(57864),l=r(90104);const d=function(e){return(0,c.M3)(l.c,(t=>{var r,n;const i=!!(null==(r=t.creating[e])?void 0:r.isPending),s=!!(null==(n=t.deleting[e])?void 0:n.isPending);return i||s}))},u=function(e){return(0,c.M3)(l.c,(t=>t.status.downloads[e]))};function p(e){const t=(0,i.OY)(),r=(0,n.useMemo)((()=>u(e.sourceURI)),[e.sourceURI]),c=(0,n.useMemo)((()=>d(e.sourceURI)),[e.sourceURI]),l=(0,i.w1)(r),p=(0,i.w1)(c),m=(null==l?void 0:l.subscription)===o.c.Subscribing,h=!!l&&l.relation!==o.C.Descendants,y=!l||l.relation===o.C.Descendants,g=(null==l?void 0:l.relation)===o.C.Self;return{progress:(null==l?void 0:l.progress)||0,isPending:p,isSubscribing:m,isDownloaded:h,canDownload:y,canDeleteDownload:g,onDownload:(0,n.useCallback)((()=>{t(a.c.actions.subscriptionTemplatesFetchRequested({sourceURI:e.sourceURI,guid:e.guid,useSelected:e.type===s.WW.Show}))}),[t,e.sourceURI,e.guid,e.type]),onDeleteDownload:(0,n.useCallback)((()=>{l&&t(a.c.actions.subscriptionDeleteRequested({id:l.id,sourceURI:e.sourceURI}))}),[t,l,e.sourceURI])}}},90104:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.downloads))},93172:(e,t,r)=>{"use strict";r.d(t,{Cu:()=>i,Gw:()=>a,Ub:()=>s,cp:()=>o,mB:()=>n});var n=(e=>(e[e.Regions=0]="Regions",e[e.PostalCode=1]="PostalCode",e[e.SinglePostalCode=2]="SinglePostalCode",e))(n||{}),i=(e=>(e.Dead="dead",e.Alive="alive",e))(i||{}),s=(e=>(e.Disabled="disabled",e.Enabled="enabled",e))(s||{}),a=(e=>(e.Unknown="-1",e.Antenna="0",e.Cable="1",e.Satellite="2",e))(a||{}),o=(e=>(e[e.Unknown=-1]="Unknown",e[e.OverTheAir=0]="OverTheAir",e[e.Cable=1]="Cable",e[e.Satellite=2]="Satellite",e[e.IPTV=3]="IPTV",e[e.Virtual=4]="Virtual",e))(o||{})},95932:(e,t,r)=>{"use strict";r.d(t,{In:()=>y,cp:()=>S});var n=r(44212),i=r(59396),s=r(81996),a=r(74904),o=r(45372),c=r(93172),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};const y={channels:[],isPending:!1,isPopulated:!1,error:null},g={dvr:void 0,isPending:!1,isPopulated:!1,error:null},f={mediaGrabberDevices:[],isPending:!1,isPopulated:!1,error:null},v={devices:f,epgDownloadActivityID:void 0,selectedDevice:void 0,selectedDVR:g,channelsByDeviceKey:{},scanPrefs:[],scanNetworks:[],hasScannedChannels:!1,isSavingDVR:!1,isDeletingDVR:!1,isAddingDevice:!1,isDiscoveringDevices:!1,isSavingChannelMappings:!1,isCancellingChannelScan:!1,isCancellingReloadGuide:!1,channelMappingsSaveError:null,setupErrorMessage:null};function b(e,{payload:t}){var r;const{activity:n}=t;if(n.type!==a.k.ProviderDeviceChannelScan)return;const i=null==(r=null==n?void 0:n.Response)?void 0:r.Network;if(i)e.hasScannedChannels=!1,e.scanNetworks=i;else{const t=100===(null==n?void 0:n.progress);e.hasScannedChannels=t,e.isCancellingChannelScan&&t&&(e.isCancellingChannelScan=!1)}}const S=(0,n.is)({name:"dvrSetup",initialState:v,reducers:{reset:()=>v,setupReset(e){e.devices=f,e.selectedDevice=void 0,e.hasScannedChannels=!1,e.isSavingDVR=!1,e.isAddingDevice=!1,e.isDiscoveringDevices=!1,e.isSavingChannelMappings=!1,e.channelMappingsSaveError=null,e.setupErrorMessage=null},setupErrorMessageAdded(e,{payload:t}){e.setupErrorMessage=t.message},setupErrorMessageRemoved(e,t){e.setupErrorMessage=null},devicesDiscoverRequested(e,t){e.isDiscoveringDevices=!0},devicesDiscoverSucceeded(e,{payload:t}){e.isDiscoveringDevices=!1;const{mediaGrabberDevices:r}=e.devices;for(let e=0;e<t.data.length;e++){const n=t.data[e],i=r.find((e=>n.uuid===e.uuid));i?(i.state=n.state,i.status=n.status,i.parentID=n.parentID):r.push(n)}},devicesDiscoverFailed(e,t){e.isDiscoveringDevices=!1},devicesFetchRequested({devices:e},t){(0,o.G8)(e)},devicesFetchSucceeded({devices:e},{payload:t}){(0,o.mM)(e),e.mediaGrabberDevices=t.data},devicesFetchFailed({devices:e},{payload:t}){(0,o.C)(e,t.error)},deviceChannelsFetchRequested(e,{payload:t}){let r=e.channelsByDeviceKey[t.deviceKey];r?(r.channels=[],r.isPopulated=!1):(r=h({},y),e.channelsByDeviceKey[t.deviceKey]=r),e.setupErrorMessage=null,(0,o.G8)(r)},deviceChannelsFetchSucceeded(e,{payload:t}){const r=e.channelsByDeviceKey[t.deviceKey];(0,o.mM)(r),r.channels=t.data},deviceChannelsFetchFailed(e,{payload:t}){let r=e.channelsByDeviceKey[t.deviceKey];r||(r=h({},y),e.channelsByDeviceKey[t.deviceKey]=r),(0,o.C)(r,t.error)},deviceChannelsScanRequested(e,t){e.hasScannedChannels=!1},deviceChannelsScanFailed(e,t){e.hasScannedChannels=!0},deviceChannelsCancelScanRequested(e,t){e.isCancellingChannelScan=!0},deviceChannelsCancelScanFailed(e,t){e.isCancellingChannelScan=!1},deviceSelected(e,{payload:t}){const r=e.devices.mediaGrabberDevices.find((e=>e.key===t.deviceKey));r&&(e.selectedDevice=r)},deviceSourceSelected({devices:e},{payload:t}){const r=e.mediaGrabberDevices.find((e=>e.key===t.deviceKey));r&&(r.source=t.source)},deviceChannelMappingsSaveRequested(e,t){e.isSavingChannelMappings=!0,e.channelMappingsSaveError=null},deviceChannelMappingsSaveSucceeded(e,t){e.isSavingChannelMappings=!1,e.channelMappingsSaveError=null},deviceChannelMappingsSaveFailed(e,{payload:t}){e.isSavingChannelMappings=!1,e.channelMappingsSaveError=t.error},deviceEnableRequested(e,t){},deviceEnableSucceeded(e,{payload:t}){const r=e.devices.mediaGrabberDevices.find((e=>e.key===t.deviceKey));r&&(r.state=t.enabled?c.Ub.Enabled:c.Ub.Disabled,r.title=t.title)},deviceEnableFailed(e,t){},deviceAddRequested(e,t){e.isAddingDevice=!0},deviceAddSucceeded(e,{payload:t}){e.setupErrorMessage=null,e.isAddingDevice=!1;const r=e.devices.mediaGrabberDevices.find((e=>e.key===t.data.key));r?Object.assign(r,t.data):e.devices.mediaGrabberDevices.push(t.data)},deviceAddFailed(e,t){e.isAddingDevice=!1},dvrFetchRequested(e,t){e.setupErrorMessage=null,(0,o.G8)(e.selectedDVR)},dvrFetchSucceeded({selectedDVR:e,devices:t},{payload:r}){const{dvr:n}=r;(0,o.mM)(e),e.dvr=n,(null==n?void 0:n.Device)&&((0,o.mM)(t),t.mediaGrabberDevices=n.Device)},dvrFetchFailed(e,{payload:t}){(0,o.C)(e.selectedDVR,t.error),e.setupErrorMessage=(0,i.c)("There was a problem fetching your DVR. Please try again later.")},dvrSaveRequested(e,t){(0,o.G8)(e.selectedDVR),e.setupErrorMessage=null,e.isSavingDVR=!0},dvrSaveSucceeded(e,{payload:t}){(0,o.mM)(e.selectedDVR),e.epgDownloadActivityID=t.activityUUID,e.isSavingDVR=!1,e.selectedDVR.dvr=t.dvr},dvrSaveFailed(e,{payload:t}){(0,o.C)(e.selectedDVR,t.error),e.isSavingDVR=!1},dvrDeleteRequested(e,t){e.isDeletingDVR=!0},dvrDeleteSucceeded(e,t){e.selectedDVR=g,e.isDeletingDVR=!1},dvrDeleteFailed(e,t){e.isDeletingDVR=!1},addDVRDeviceRequested(e,t){e.setupErrorMessage=null,e.isSavingDVR=!0},addDVRDeviceSucceeded(e,{payload:t}){(0,o.mM)(e.selectedDVR),e.epgDownloadActivityID=t.activityUUID,e.isSavingDVR=!1,e.selectedDVR.dvr=t.dvr},addDVRDeviceFailed(e,{payload:t}){(0,o.C)(e.selectedDVR,t.error),e.isSavingDVR=!1},removeDVRDeviceRequested(e,t){},removeDVRDeviceSucceeded(e,t){var r,n;(null==(n=null==(r=e.selectedDVR)?void 0:r.dvr)?void 0:n.Device)&&(e.selectedDVR.dvr.Device=e.selectedDVR.dvr.Device.filter((e=>e.key!==t.payload.deviceKey))),e.devices.mediaGrabberDevices=e.devices.mediaGrabberDevices.filter((e=>e.key!==t.payload.deviceKey))},removeDVRDeviceFailed(e,t){},cancelReloadGuide(e){e.isCancellingReloadGuide=!0},scanPrefsAndNetworksReset(e){e.scanPrefs=[],e.scanNetworks=[]},scanPrefsAdded(e,{payload:t}){e.scanPrefs=t.settings},scanNetworksAdded(e,{payload:t}){e.scanNetworks=t.networks}},extraReducers:e=>{e.addCase(s.c.actions.activityStarted,b).addCase(s.c.actions.activityUpdated,b).addCase(s.c.actions.activityFinished,((e,t)=>{t.payload.activity.type===a.k.ProviderEpgLoad?(e.isCancellingReloadGuide=!1,e.epgDownloadActivityID=void 0):b(e,t)}))}})},33696:(e,t,r)=>{"use strict";r.d(t,{cp:()=>I});var n=r(44212),i=r(35860),s=r(39036),a=r(81996),o=r(74904),c=r(45372),l=r(93172),d=r(95932),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const v={mappings:[],isPending:!1,isPopulated:!1,error:null},b={channelsByLineupUUID:{},isPending:!1,isPopulated:!1,error:null},S={epgLineupGroups:[],isPending:!1,isPopulated:!1,error:null},P={channelMappings:v,lineupChannels:b,countries:{epgCountries:[],isPending:!1,isPopulated:!1,error:null},languages:{epgLanguages:[],isPending:!1,isPopulated:!1,error:null},regions:{epgCountryRegions:[],isPending:!1,isPopulated:!1,error:null},lineupGroups:S,selectedCountry:void 0,selectedLanguage:void 0,selectedRegion:void 0,selectedLineupGroups:[],postalCode:""},I=(0,n.is)({name:"epgSettings",initialState:P,reducers:{reset:()=>P,channelMappingsFetchRequested({lineupChannels:e,channelMappings:t},r){(0,c.G8)(e),(0,c.G8)(t)},channelMappingsFetchSucceeded({channelMappings:e,lineupChannels:t,selectedLineupGroups:r},{payload:n}){e.mappings=n.channelMappings,(0,c.mM)(e),n.lineupChannels.forEach((({uuid:e,Channel:r})=>{t.channelsByLineupUUID[e]=null!=r?r:[]})),(0,c.mM)(t),r.forEach((e=>{e.isChannelMappingsFetched=!0}))},channelMappingsFetchFailed({channelMappings:e,lineupChannels:t},{payload:r}){(0,c.C)(e,r.error),(0,c.C)(t,r.error)},channelMappingChanged({channelMappings:e},{payload:t}){const r=t,{index:n}=r,i=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(r,["index"]),s=e.mappings[n];Object.assign(s,i)},epgLineupGroupFetchRequested({lineupGroups:e},t){(0,c.G8)(e)},epgLineupGroupFetchSucceeded({lineupGroups:e},{payload:t}){(0,c.mM)(e),e.epgLineupGroups.push({uuid:t.data.uuid,epgLineups:t.data.epgLineups})},epgLineupGroupFetchFailed({lineupGroups:e},{payload:t}){(0,c.C)(e,t.error)},bestEPGLineupSearchRequested(e,t){},bestEPGLineupSearchSucceeded({selectedLineupGroups:e},{payload:t}){const r=e.find((e=>e.uuid===t.lineupGroup.uuid));r&&(r.activityUUID=t.data,r.isSelectedLineupPending=!0)},bestEPGLineupSearchFailed(e,t){},selectedLineupSelected({selectedLineupGroups:e},{payload:t}){const r=e.find((e=>e.uuid===t.lineupGroupUUID));if(r){const e=r.epgLineups.find((e=>e.uuid===t.selectedLineupUUID));r.selectedLineup=e}},selectedEPGLineupGroupAddRequested(e,t){},selectedEPGLineupGroupAddSucceeded({selectedLineupGroups:e},{payload:t}){var r;e.push((r=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e})({},t.lineupGroup),p(r,m({activityUUID:void 0,selectedLineup:void 0,isChannelMappingsFetched:!1,isSelectedLineupPending:!1,isSelectedLineupPopulated:!1}))))},selectedEPGLineupGroupRemoved(e,{payload:t}){e.selectedLineupGroups=e.selectedLineupGroups.filter((e=>e.uuid!==t.lineupGroupUUID))},xmltvSelectedEPGLineupGroupAdded({selectedLineupGroups:e},{payload:t}){const{path:r,title:n}=t,a=function(e){return/^[a-z]:\\|\\\\/i.test(e)&&(e=e.replace(/\\/g,"/")),/^(\/|[a-z]:\/)/i.test(e)&&(e=e.replace(/\/(.+?)(?=\/|$)/g,((e,t)=>`/${encodeURIComponent(t)}`))),"/"===e.charAt(0)&&(e=e.substring(1)),/^[a-z]+?:\/\//i.test(e)&&(e=encodeURIComponent(e)),e}(r),o={uuid:`lineup://${i.gN}/${a}#${encodeURIComponent(n)}`,title:n,lineupType:l.cp.Virtual},c={uuid:`xmltv-${(0,s.c)()}`,epgLineups:[o],activityUUID:void 0,selectedLineup:o,isChannelMappingsFetched:!1,isSelectedLineupPending:!1,isSelectedLineupPopulated:!0};e.push(c)},selectedDVRLineupChannelsFetchRequested({lineupChannels:e},t){(0,c.G8)(e)},selectedDVRLineupChannelsFetchSucceeded({lineupChannels:e},{payload:t}){t.lineupChannels.forEach((({uuid:t,Channel:r})=>{e.channelsByLineupUUID[t]=null!=r?r:[]})),(0,c.mM)(e)},selectedDVRLineupChannelsFetchFailed({lineupChannels:e},{payload:t}){(0,c.C)(e,t.error)},epgCountriesFetchRequested({countries:e},t){(0,c.G8)(e)},epgCountriesFetchSucceeded({countries:e},{payload:t}){(0,c.mM)(e),e.epgCountries=t.data},epgCountriesFetchFailed({countries:e},{payload:t}){(0,c.C)(e,t.error)},epgCountrySelected(e,{payload:t}){const r=e.countries.epgCountries.find((e=>e.code===t.countryCode));e.selectedCountry=r,e.selectedRegion=void 0,e.postalCode=void 0},epgCountryRegionSelected(e,{payload:t}){const r=e.regions.epgCountryRegions.find((e=>e.key===t.regionKey));e.selectedRegion=r},epgCountryRegionsFetchRequested({regions:e},t){(0,c.G8)(e)},epgCountryRegionsFetchSucceeded({regions:e},{payload:t}){(0,c.mM)(e),e.epgCountryRegions=t.data},epgCountryRegionsFetchFailed({regions:e},{payload:t}){(0,c.C)(e,t.error)},epgLanguagesFetchRequested({languages:e},t){(0,c.G8)(e)},epgLanguagesFetchSucceeded({languages:e},{payload:t}){(0,c.mM)(e),e.epgLanguages=t.data},epgLanguagesFetchFailed({languages:e},{payload:t}){(0,c.C)(e,t.error)},epgLanguageSelected(e,{payload:t}){const r=e.languages.epgLanguages.find((e=>e.code===t.languageCode));e.selectedLanguage=r},epgPostalCodeChanged(e,{payload:t}){e.postalCode=t.postalCode}},extraReducers(e){e.addCase(d.cp.actions.setupReset,(e=>{e.channelMappings=v,e.lineupChannels=b,e.lineupGroups=S,e.selectedRegion=void 0,e.selectedLineupGroups=[],e.postalCode=""})).addCase(a.c.actions.activityFinished,((e,{payload:t})=>{const{activity:r}=t;if(r.type===o.k.ProviderEpgLineupScan){const t=e.selectedLineupGroups.find((e=>e.activityUUID===r.uuid));if(t){const e=t.epgLineups.find((e=>e.uuid===r.Response.lineup));t.activityUUID=void 0,t.selectedLineup=e,t.isSelectedLineupPending=!1,t.isSelectedLineupPopulated=!0}}}))}})},13519:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(57864),i=r(95932),s=r(54436),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=e=>(0,n.M3)(s.c,(t=>{var r,n;return e&&null!=(n=null==(r=t.channelsByDeviceKey)?void 0:r[e])?n:((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},i.In)}))},68312:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.dvrManagement))},54436:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(68312);const s=(0,n.M3)(i.c,(e=>e.dvrSetup))},67732:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(68312);const s=(0,n.M3)(i.c,(e=>e.epgSettings))},14132:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(67732);const s=(0,n.M3)(i.c,(({selectedLineupGroups:e})=>{if(0!==e.length)return e.reduce(((e,{selectedLineup:t})=>(t&&e.push(t),e)),[])}))},63160:(e,t,r)=>{"use strict";r.d(t,{CI:()=>i,IJ:()=>s,ew:()=>a,gf:()=>o,iQ:()=>n});var n=(e=>(e.Test="test",e.DiscoverVODUnification="discover_vod_unification",e.CommunityFeedAutoRefresh="community_activity_feed_auto_refresh",e.SearchExpandFilterOptions="search_expand_filter_options",e))(n||{});const i=Object.values(n);var s=(e=>(e.TestExperimentPlatform="test_experiment_platform",e.HomeDiscoverNavigation="home_discover_navigation_web",e.HomeFriendSuggestionsHub="home_friend_suggestions_hub_web",e))(s||{});const a=Object.values(s);var o=(e=>(e.Default="default",e.Buttons="buttons",e.Tabs="tabs",e))(o||{})},13648:(e,t,r)=>{"use strict";r.d(t,{c:()=>D});var n=r(44212),i=r(35860),s=r(89064),a=r(85976),o=r(69956),c=r(96048),l=r(11822),d=r(34956),u=r(59936),p=r(32380),m=r(87220),h=r(48708),y=r(45372),g=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(b)for(var r of b(t))P.call(t,r)&&I(e,r,t[r]);return e},w=(e,t)=>f(e,v(t));const C={hubsListsByKey:{}},O={source:"",contentDirectoryID:[],hubs:[],isPending:!1,isPopulated:!1,error:null};function M(e,t){for(const r in e.hubsListsByKey){const n=e.hubsListsByKey[r];t&&n.source!==t||n.hubs.forEach((e=>{e.isStale=!0}))}}function T(e,t){for(const r in e.hubsListsByKey)e.hubsListsByKey[r].hubs.forEach((e=>{e.sourceURI===t&&(e.isStale=!1)}))}const D=(0,n.is)({name:"home",initialState:C,reducers:{reset:()=>C,markStaleRequested(e){for(const t in e.hubsListsByKey)e.hubsListsByKey[t].isPending=!1},markStale(e){M(e)},populateAllRequested(e,{payload:t}){const r=t.hubsSources.map((e=>e.key));Object.keys(e.hubsListsByKey).forEach((t=>{r.includes(t)||delete e.hubsListsByKey[t]}))},fetchRequested(e,{payload:t}){const{hubsSource:{key:r,source:n,contentDirectoryID:i,pinnedContentDirectoryID:s}}=t;let a=e.hubsListsByKey[r];a||(a=w(E({},O),{source:n})),(0,y.G8)(a),a.contentDirectoryID=[...i],s&&(a.pinnedContentDirectoryID=[...s]),e.hubsListsByKey[r]=a},fetchSucceeded(e,{payload:t}){e.lastFetchedAt||(e.lastFetchedAt=Date.now());const r=e.hubsListsByKey[t.key];(0,y.mM)(r),r.hubs=t.data},fetchFailed(e,{payload:t}){let r=e.hubsListsByKey[t.key];r||(r=w(E({},O),{source:t.source,contentDirectoryID:[...t.contentDirectoryID]}),e.hubsListsByKey[t.key]=r),(0,y.C)(r,t.error)}},extraReducers:e=>{e.addCase(l.c.actions.repopulateRangeSucceeded,((e,{payload:t})=>{T(e,t.sourceURI)})),e.addCase(l.c.actions.fetchAllSucceeded,((e,{payload:t})=>{T(e,t.sourceURI)})),e.addCase(m.c.actions.ended,((e,{payload:t})=>{M(e,t.source)})),e.addCase(d.c.actions.sessionStopped,((e,{payload:t})=>{M(e,(0,a.c)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(u.c.actions.libraryScanUpdated,((e,{payload:t})=>{M(e,(0,a.c)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(c.c.actions.toggleWatchlistSucceeded,(e=>{M(e,(0,a.c)({serverIdentifier:s.A,providerIdentifier:i.Im}))})),e.addCase(h.cp.actions.preferredServicesSaveSucceeded,(e=>{M(e,(0,a.c)({serverIdentifier:s.A,providerIdentifier:i.Im}))})),e.addCase(c.c.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{M(e,(0,a.c)({serverIdentifier:t.server.machineIdentifier,providerIdentifier:t.provider.identifier}))})),e.addCase(c.c.actions.metadataProcessed,((e,{payload:t})=>{const{serverIdentifier:r,providerIdentifier:n}=(0,o.c)(t.sourceURI);M(e,(0,a.c)({serverIdentifier:r,providerIdentifier:n}))})),e.addCase(p.c.actions.languageChanged,(()=>C))}})},85420:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(57864),i=r(87512),s=r(46028),a=r(27312);const o=(0,n.M3)(a.c,(e=>{const t={},r=e.reduce(((e,{server:r})=>{if(!r||t[r.machineIdentifier])return e;const{machineIdentifier:n,sourceTitle:i,isFullOwnedServer:s}=r;return t[n]=!0,s?e.numOwnedServers++:i&&(e.numSharedServers++,e.byOwner[i]?e.byOwner[i]++:e.byOwner[i]=1),e}),{numSharedServers:0,numOwnedServers:0,byOwner:{}});return e.reduce(((e,{source:t,server:n,provider:i})=>{if(!n)return e;const{friendlyName:s,sourceTitle:a,isCloud:o,isFullOwnedServer:c}=n;return o&&i?i.sourceTitle&&(r.numOwnedServers||r.numSharedServers)?e[t]=`${i.title} (${i.sourceTitle})`:e[t]=i.title:a&&(r.numOwnedServers||r.numSharedServers>1)?1===r.byOwner[a]?e[t]=a:e[t]=`${a} (${s})`:c&&r.numOwnedServers>1&&(e[t]=s),e}),{})})),c=(0,s.c)(o,(e=>e)),l=(0,i.c)((e=>(0,n.M3)(c,(t=>t[e]))))},84796:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(85712),s=r(27312);const a=(0,n.M3)(s.c,(e=>e.filter((e=>{var t;return null!=e.server&&null!=e.provider&&(null==(t=e.feature)?void 0:t.type)===i.Aj.ContinueWatching}))))},60184:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.home))},42768:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(60184);const s=(0,n.M3)(i.c,(e=>e.hubsListsByKey))},27312:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(57864),i=r(99028),s=r(92076),a=r(1744),o=r(37660),c=r(35860),l=r(54073),d=r(42728),u=r(85976),p=r(85712),m=r(87616),h=r(4644),y=r(29164),g=r(66912),f=r(34328),v=r(43196);const b=(0,n.M3)((0,v.c)("sidebarSettings"),(e=>e)),S=(0,n.M3)(b,(e=>e.pinnedSources)),P=(0,n.M3)(S,(e=>e.filter((e=>!e.isHidden))));var I=r(93600);const E={type:p.Aj.ContinueWatching,key:l.i},w=(0,n.M3)(I.c,(e=>e.map((({server:e,provider:t})=>{var r,n;return{machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,directoryID:(null==(n=null==(r=(0,h.c)(t,p.Aj.Content))?void 0:r.directories)?void 0:n[0].id)||"home",isHidden:!1}})))),C=(0,n.M3)(P,w,g.c,y.c,m.c,s.c,(0,f.c)(d.jQ),(0,f.c)(d.Af),a.c,((e,t,r,n,s,a,l,d,m)=>{const y=[],g=[],f={},v={},b=e.reduce(((e,r)=>{const n=c._u(r.providerIdentifier,c.$9),i=c._u(r.providerIdentifier,c._0);return m&&(n||i)?n&&c.QJ(r.providerIdentifier)?e.concat(t):e:e.concat(r)}),[]);for(let e=0;e<b.length;e++){const{machineIdentifier:t,providerIdentifier:r,directoryID:n}=b[e],i=(0,u.c)({serverIdentifier:t,providerIdentifier:r});v[i]||(v[i]=[]),v[i].push(n)}for(let e=0;e<b.length;e++){const{machineIdentifier:t,providerIdentifier:n,directoryID:s}=b[e],d=(0,u.c)({serverIdentifier:t,providerIdentifier:n}),m=r.find((e=>e.machineIdentifier===t)),S=m?(0,i.y)({identifier:n,serverEntityID:m.entityID}):void 0,P=S?a[S]:void 0,I=`${d}/continueWatching`,w=`${d}/${s}/promoted`;let C=P?(0,h.c)(P,p.Aj.ContinueWatching):void 0;!l&&c._u(null==P?void 0:P.identifier,c.Qh)&&(C=E);const O=P?(0,h.c)(P,p.Aj.Promoted):void 0;(null==P?void 0:P.isPopulated)&&!C||f[d]||(f[d]=!0,y.push({key:I,source:d,contentDirectoryID:v[d],server:m,provider:P,feature:C})),(null==P?void 0:P.isPopulated)&&!O||c._u(null==P?void 0:P.identifier,c.Im)&&s===o._w||g.push({key:w,source:d,contentDirectoryID:[s],pinnedContentDirectoryID:v[d],server:m,provider:P,feature:O})}const S=(0,u.c)({serverIdentifier:n.machineIdentifier,providerIdentifier:null==s?void 0:s.identifier});if(!f[S]&&!v[S]&&s&&d){const e=(0,h.c)(s,p.Aj.ContinueWatching);(null==e?void 0:e.key)&&(v[S]=[o.qU],f[S]=!0,y.push({key:e.key,source:S,contentDirectoryID:v[S],server:n,provider:s,feature:e}))}return y.concat(g)}))},16256:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(44212);const i={isImporting:!1,isImported:!1,importError:null},s=(0,n.is)({name:"importPlaylists",initialState:i,reducers:{reset:()=>i,importRequested(e,t){e.isImporting=!0,e.importError=null},importSucceeded(e,t){e.isImporting=!1,e.isImported=!0},importFailed(e,{payload:t}){e.isImporting=!1,e.importError=t.error}}})},78352:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(97816),s=r(59396),a=r(36728),o=r(77584),c=r(83832),l=r(27248);const d={icon:"LibraryUpgradeMenuItem-icon-tpBeE5"};function u(e){const{hasPlexMovieUpgrade:t,hasPlexSeriesUpgrade:r}=(0,c.c)(e.server,e.sourceDirectory),{Modal:u,onOpen:p}=(0,l.e)(e.machineIdentifier,e.sourceDirectory,e.onMenuClose);return t||r?n.createElement(n.Fragment,null,n.createElement(a.c,{onPress:p},(0,s.c)("Upgrade Library"),n.createElement("span",{className:d.icon},n.createElement(i.default,null))),n.createElement(o.c,null),n.createElement(u,null)):n.createElement(n.Fragment,null)}},81564:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(44212),i=r(45372);function s(e,t){e&&((0,i.G8)(e),e.options=t)}function a(e){e&&(0,i.mM)(e)}function o(e,t,r){e&&((0,i.C)(e,r),e.options=t)}const c=(0,n.is)({name:"libraryManagement",initialState:{hubs:{},publishedItems:{},settings:{}},reducers:{settingsFetchRequested(e,{payload:t}){e.settings[t.server.machineIdentifier]={isPending:!0,isPopulated:!1,isUpdating:!1,error:null}},settingsFetchSucceeded(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.isMergeRecentlyAddedEnabled=t.isMergeRecentlyAddedEnabled,(0,i.mM)(r))},settingsFetchFailed(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(0,i.C)(r,t.error)},settingsUpdateRequested(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.isUpdating=!0)},settingsUpdateSucceeded(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.isMergeRecentlyAddedEnabled=t.isMergeRecentlyAddedEnabled,r.isUpdating=!1)},settingsUpdateFailed(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.error=t.error,r.isUpdating=!1)},resetHubs(e,t){},hubsFetchRequested(e,{payload:t}){var r;e.hubs[t.sourceURI]={options:(null==(r=e.hubs[t.sourceURI])?void 0:r.options)||[],isPending:!0,isPopulated:!1,isResetting:!1,error:null}},hubsFetchSucceeded(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&((0,i.mM)(r),r.options=t.options)},hubsFetchFailed(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(0,i.C)(r,t.error)},reorderRequested(e,{payload:t}){s(e.hubs[t.sourceURI],t.options)},reorderSucceeded(e,{payload:t}){a(e.hubs[t.sourceURI])},reorderFailed(e,{payload:t}){o(e.hubs[t.sourceURI],t.options,t.error)},removeRequested(e,{payload:t}){s(e.hubs[t.sourceURI],t.options)},removeSucceeded(e,{payload:t}){a(e.hubs[t.sourceURI])},removeFailed(e,{payload:t}){o(e.hubs[t.sourceURI],t.options,t.error)},resetRequested(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(r.isResetting=!0)},resetSucceeded(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(r.isResetting=!1,r.options=t.options)},resetFailed(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(r.isResetting=!1)},promoteRequested(e,t){},promoteChanged(e,{payload:t}){const r=e.hubs[t.sourceURI];if(r){const e=r.options.find((e=>e.identifier===t.options.identifier));e&&(e.promotedToRecommended=t.options.promotedToRecommended,e.promotedToOwnHome=t.options.promotedToOwnHome,e.promotedToSharedHome=t.options.promotedToSharedHome)}},publishedFetchRequested(e,{payload:t}){e.publishedItems[t.sourceURI]={isPending:!0,isPopulated:!1,isUpdating:!1,error:null}},publishedFetchSucceeded(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.hub=t.hub,(0,i.mM)(r))},publishedFetchFailed(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(0,i.C)(r,t.error)},publishedUpdateRequested(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.isUpdating=!0)},publishedUpdateSucceeded(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.hub=t.hub,r.isUpdating=!1)},publishedUpdateFailed(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.error=t.error,r.isUpdating=!1)}}})},95788:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.libraryManagement))},71108:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(96504);function i(e){return n.c.join(["/hubs/sections",e,"manage"])}},55116:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(27876),s=r(66780),a=r(41192),o=r(93808),c=r(37984),l=r(29164),d=r(8684),u=r(22436),p=r(99412),m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e},P=(e,t)=>h(e,y(t));function I({channel:e,onMenuClose:t}){const r=(0,i.OY)(),[m,h]=(0,c.c$)(),y=(0,d.c)(),g=(0,i.w1)(l.c),{channels:f}=(0,i.w1)(p.c),v=(0,n.useMemo)((()=>{if(e)return{identifier:h.identifier,serverType:(0,a.c)(m),metadataItem:{type:o.WW.Channel,id:e.id,title:e.title,channel:e.title,channelId:e.id}}}),[h.identifier,m,e]),b=(0,n.useMemo)((()=>!!e&&f.some((({uid:t})=>t===e.uid))),[e,f]),I=(0,n.useCallback)((()=>{if(!e)return;y(P(S({},v),{action:s.wT}));const t=[...f,e];r(u.cp.actions.favoriteChannelsUpdateRequested({cloudServer:g,channels:f,updatedChannels:t}))}),[e,f,g,r,v,y]),E=(0,n.useCallback)((()=>{if(!e)return;y(P(S({},v),{action:s.wL}));const t=f.filter((({uid:t})=>e.uid!==t));r(u.cp.actions.favoriteChannelsUpdateRequested({cloudServer:g,channels:f,updatedChannels:t}))}),[e,f,g,r,v,y]),w=(0,n.useCallback)((()=>{null==t||t(),b?E():I()}),[b,I,t,E]);return{isFavorite:b,onToggleFavoriteChannelPress:w,onAddToFavoriteChannelsPress:I,onRemoveFromFavoriteChannelsPress:E}}},22436:(e,t,r)=>{"use strict";r.d(t,{cp:()=>b,qU:()=>f});var n=r(44212),i=r(672),s=r(45372),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,c(t));const y=1800,g={guideChannels:{channels:[],isPending:!1,isPopulated:!1,error:null},favoriteChannels:{channels:[],isPending:!1,isPopulated:!1,error:null},airingsByChannelGridKey:{},channelsGrid:{startTime:0,visibleColumns:1,columnTimes:[],columnWidth:0,viewportWidth:0,viewportHeight:0,airedProgress:0}},f={airings:[],cachedDates:[],isPending:!1,isPopulated:!1,error:null};function v(e,t){const r=Math.floor(e/y)*y,n=[];for(let e=0;e<=t;e++)n.push(r+e*y);return n}const b=(0,n.is)({name:"livetv",initialState:g,reducers:{channelsGridResetStartTime({channelsGrid:e}){const t=Math.floor(Date.now()/1e3),r=v(t,e.visibleColumns);e.startTime=t,e.columnTimes=r},channelsGridSetStartTime({channelsGrid:e},{payload:t}){const r=v(t.startTime,e.visibleColumns);e.startTime=t.startTime,e.columnTimes=r},channelsGridSetViewportSize({channelsGrid:e},{payload:t}){const{width:r=1,height:n=1,overflowWidth:i=0,channelWidth:s=1,channelTitleWidth:a=0}=t,o=Math.floor(r+i),c=Math.max(Math.floor((r-a)/s),1)+1,l=Math.floor((o-a)/c),d=v(e.startTime,c);e.visibleColumns=c,e.columnTimes=d,e.columnWidth=l,e.viewportWidth=o,e.viewportHeight=Math.floor(n)},channelsGridUpdateAiredProgress({channelsGrid:e}){const{columnTimes:t}=e,r=t[0],n=t[t.length-1]-r,i=Math.floor(Date.now()/1e3),s=Math.min(100,Math.max(0,(i-r)/n*100));e.airedProgress=s},channelsGridNavigateTimeForward({channelsGrid:e}){const t=e.columnTimes[0]+y,r=v(t,e.visibleColumns);e.startTime=t,e.columnTimes=r},channelsGridNavigateTimeBack({channelsGrid:e}){const t=e.columnTimes[0]-y,r=Math.floor(Date.now()/1e3)-10800;if(t+y>r){const r=v(t,e.visibleColumns);e.startTime=t,e.columnTimes=r}},guideChannelsClear:e=>h(m({},e),{guideChannels:g.guideChannels}),guideChannelsFetchRequested({guideChannels:e},t){(0,s.G8)(e)},guideChannelsFetchSucceeded({guideChannels:e},{payload:t}){(0,s.mM)(e),e.channels=t.channels},favoriteChannelsFetchRequested({favoriteChannels:e},t){(0,s.G8)(e)},favoriteChannelsFetchSucceeded({favoriteChannels:e},{payload:t}){(0,s.mM)(e),e.channels=t.channels},favoriteChannelsPopulateRequested(e,t){},favoriteChannelsPopulateRequestSucceeded({favoriteChannels:e},{payload:t}){const r=e.channels.map((e=>{var r;const n=t.channels.find((({uid:t})=>t===e.uid));return h(m({},e),{gridKey:null!=(r=null==n?void 0:n.gridKey)?r:e.gridKey})}));e.channels=r},favoriteChannelsUpdateRequested({favoriteChannels:e},{payload:t}){(0,s.G8)(e),e.channels=t.updatedChannels},favoriteChannelsUpdateSucceeded({favoriteChannels:e},t){(0,s.mM)(e)},favoriteChannelsUpdateFailed({favoriteChannels:e},{payload:t}){e.channels=t.channels,(0,s.C)(e,t.error)},channelAiringsFetchRequested(e,{payload:t}){let r=e.airingsByChannelGridKey[t.channelGridKey];const n=(0,i.c)(new Date(t.date),"yyyy-MM-dd");r?r.cachedDates.includes(n)||r.cachedDates.push(n):(r=h(m({},f),{cachedDates:[n]}),e.airingsByChannelGridKey[t.channelGridKey]=r),(0,s.G8)(r)},channelAiringsFetchSucceeded(e,{payload:t}){const r=e.airingsByChannelGridKey[t.channelGridKey];r.airings.push(...t.airings),(0,s.mM)(r)},channelAiringsFetchFailed(e,{payload:t}){const r=e.airingsByChannelGridKey[t.channelGridKey];(0,s.C)(r,t.error)},channelAiringsReset(e,{payload:t}){t.channelGridKey?e.airingsByChannelGridKey[t.channelGridKey]=m({},f):e.airingsByChannelGridKey=g.airingsByChannelGridKey}}})},69936:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});var n=(e=>(e.Guide="dvr.guide",e.WhatsOnDvr="dvr.whatson",e.WhatsOnEpg="epg.whatson",e.Schedule="dvr.schedule",e.Browse="dvr.browse",e))(n||{})},14244:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(26376);function s(e,t){return e.beginsAt>t.beginsAt?1:e.beginsAt<t.beginsAt?-1:0}const a=function(e){return(0,n.M3)((0,i.c)(e),(({airings:t})=>{if(!e||!t)return[];const r=t.reduce(((e,t)=>t&&t.Media?(t.Media.forEach(((r,n)=>{const{beginsAt:i,endsAt:s,id:a}=r;!e.some((e=>e.id===a))&&i&&s&&e.push({id:a,beginsAt:i,endsAt:s,metadataItem:t,mediaIndex:n,isSynthetic:!1})})),e):e),[]);return r.sort(s),r}))}},26376:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(22436),s=r(90296);const a=e=>(0,n.M3)(s.c,(({airingsByChannelGridKey:t})=>{var r;return e&&null!=(r=t[e])?r:i.qU}))},45556:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(57864),i=r(12488),s=r(92076),a=r(13148),o=r(85712),c=r(27884),l=r(4644),d=r(29164),u=r(11695);const p=(0,i.c)((0,n.M3)(s.c,a.c,d.c,c.c,((e,t,r,n)=>{let i=[];for(const r of t){const t=(0,u.c)(r),n=r.providers;for(const r of n){const n=e[r];n&&(0,l.c)(n,o.Aj.Grid)&&i.push({server:t,provider:n})}}const s=n.filter((e=>(0,l.c)(e,o.Aj.Grid)));return i=i.concat(s.map((e=>({server:r,provider:e})))),i})),(e=>e))},93600:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(85976),s=r(43196),a=r(45556);const o=(0,n.M3)(a.c,(0,s.c)("disabledEpgSources"),((e,t)=>e.filter((({server:e,provider:r})=>{const n=(0,i.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:r.identifier});return!t.includes(n)}))))},90296:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.livetv))},45300:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(90296);const s=(0,n.M3)(i.c,(e=>{var t,r,n,i;const{guideChannels:s}=e,a=!!(null==(r=null==(t=s.channels)?void 0:t[0])?void 0:r.gridKey),o=!!(null==(i=null==(n=s.channels)?void 0:n[0])?void 0:i.vcn);return s.channels.reduce(((e,t)=>{const r=e.findIndex((({gridKey:e,id:r,vcn:n})=>a?e===t.gridKey:o?n===t.vcn:r===t.id));return-1===r?e.push(t):!e[r].isHd&&t.isHd&&(e[r]=t),e}),[])}))},99412:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(90296);const s=(0,n.M3)(i.c,(e=>e.favoriteChannels))},54060:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e,t){var r;return`${null!=(r=e.source)?r:t}-${e.id}`}},3028:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(59396);const s=function(e,t){return e.isCloud?n.QJ(t.identifier)?(0,i.c)("Plex Channels"):t.title||e.friendlyName:e.friendlyName}},89616:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(97884),i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(e,t)=>{var r={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&i)for(var n of i(e))t.indexOf(n)<0&&a.call(e,n)&&(r[n]=e[n]);return r};function c(e){const t=e,{providerIdentifier:r,machineIdentifier:i}=t,s=o(t,["providerIdentifier","machineIdentifier"]);return(0,n.c)("hybridGuide",{providerIdentifier:r,machineIdentifier:i},s)}},22732:(e,t,r)=>{"use strict";r.d(t,{c:()=>he,E:()=>pe});var n=r(11504),i=r(27876),s=r(69080),a=r(3728),o=r(92456),c=r(53848),l=r(1480),d=r(32208),u=r(45676),p=r(49756),m=r(14252),h=r(19264),y=r(66780),g=r(56960),f=r(35940),v=r(59396),b=r(24752),S=r(36728),P=r(55588),I=r(87440),E=r(84852),w=r(53812),C=r(15788),O=r(82296),M=r(38192),T=r(85476),D=r(75188),k=r(49792),x=r(63856),A=r(92756),R=r(96048),N=r(1872),L=r(22916),j=r(81180),U=r(8684),F=r(24252),V=r(70736),_=r(49140),W=r(16304),B=r(98616),H=r(86564),z=r(55252),G=r(57864),q=r(12488),K=r(92076),Q=r(33808),$=r(29632),Y=r(35860),X=r(69956),J=r(91360),Z=r(48800),ee=r(11695),te=r(63756);const re=(0,q.c)((0,G.M3)(z.c,J.c,K.c,Q.c,(e=>e.servers),(0,$.c)("providers"),((e,t,r,n,i,s)=>{const a=(o=e).count?Object.keys(o.items).map((e=>o.items[e])):[];var o;return a.length?a.map((e=>{var a;const{serverIdentifier:o,providerIdentifier:c}=(0,X.c)(e.source),l=i.find((e=>{const t=n[e];return!!t&&t.machineIdentifier===o})),d=l?n[l]:te.c,u=(d.isCloud?s:d.providers).find((e=>r[e].identifier===c)),p=u?r[u]:Z.c,m=Y.SI(p.identifier),h=Object.values(r).find((e=>Y._u(e.identifier,Y.Im,m))),y=(0,O.c)(e),g=null!=(a=t[e.sourceURI])?a:{tempState:{},isStale:!1,isPending:!1,isPopulated:!1,error:null},f=y?t[y]:{tempState:{},isStale:!1,isPending:!1,isPopulated:!1,error:null};return{metadataItem:e,metadataItemState:g,server:(0,ee.c)(d),provider:p,discoverProvider:h,discoverProviderItemState:f}})):[]})),(e=>e)),ne=re;var ie=r(25848),se=r(40376),ae=r(63300),oe=r(92796),ce=r(13172),le=r(74672);const de={container:"PageHeaderMultiselectActions-container-pFiM3Z PageHeader-pageHeader-e2k66t",icon:"PageHeaderMultiselectActions-icon-PyC3G3",count:"PageHeaderMultiselectActions-count-f7qfvV",actions:"PageHeaderMultiselectActions-actions-WLKRxd",deselect:"PageHeaderMultiselectActions-deselect-JOslZe"};function ue(e,t){const r=1===e;return t?r?(0,v.c)("Are you sure you want to remove this item?"):(0,v.c)("Are you sure you want to remove these {selectedItemsCount} items?",{selectedItemsCount:e}):r?(0,v.c)("Are you sure you want to delete this item from your filesystem?"):(0,v.c)("Are you sure you want to delete these {selectedItemsCount} items from your filesystem?",{selectedItemsCount:e})}function pe(e){return(0,se.uw)(e).every((([e,t])=>"isMarkPlayedVisible"===e||"isMarkUnplayedVisible"===e||!t))}const me=["isPlayVisible","isToggleWatchlistVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isMarkPlayedOrUnplayedVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isAddToCollectionVisible","isAddToPlaylistVisible","isEditVisible"];function he({className:e=de.container}){const t=(0,i.OY)(),r=(0,i.w1)(z.c),G=(0,i.w1)(ne),q=(0,i.w1)(h.c),K=(0,i.w1)(w.I),Q=(0,i.w1)(H.c),$=(0,i.w1)(m.c),{onRemoveFromContinueWatchingPress:Y}=(0,C.c)(),X=(0,ie.cp)(G,q,K),J=(0,n.useMemo)((()=>G.map((({metadataItem:e})=>e))),[G]),Z=(0,n.useMemo)((()=>J.map((({type:e})=>e))),[J]),ee=(0,n.useMemo)((()=>(0,f.c)(J.map((({title:e})=>e)))),[J]),te=J[0].librarySectionID,re=function(e){const[t,...r]=e;if(1===e.length)return t.sourceURI;if(!e.every((e=>e.source===t.source)))return;const n=r.map((e=>e.ratingKey));return`${t.sourceURI},${n.join(",")}`}(J),he=(0,n.useMemo)((()=>{const e=G.map((({metadataItem:e})=>e.type));return e.filter(((t,r)=>e.indexOf(t)===r)).sort().join(",")}),[G]),ye=(0,U.c)({mode:"multiselect",type:he,itemCount:G.length}),ge=r.count,fe=(0,j.c)(),ve=(0,j.c)(),be=(0,I.c)(),Se=(0,j.c)(),Pe=(0,I.c)(),Ie=(0,j.c)(),Ee=(0,j.c)(),we=(0,j.c)(),Ce=(0,n.useCallback)((()=>{t(B.c.actions.reset())}),[t]),Oe=(0,n.useCallback)((()=>{ye({action:y.OI}),t(E.Ur({legacyAction:E.Fc({serverEntityID:G[0].server.entityID,providerEntityID:G[0].provider.entityID}),items:G})),Ce()}),[t,G,Ce,ye]),Me=(0,n.useCallback)((()=>{ye({action:y.mg}),t(E.Ur({legacyAction:E.i0({serverEntityID:G[0].server.entityID,providerEntityID:G[0].provider.entityID}),items:G})),Ce()}),[t,G,Ce,ye]),Te=(0,n.useCallback)((()=>{ye({action:y.GE}),t(E.Ur({legacyAction:E.yM({serverEntityID:G[0].server.entityID,providerEntityID:G[0].provider.entityID}),items:G})),Se.onClose(),Ce()}),[t,Se,G,Ce,ye]),De=(0,n.useCallback)((()=>{ye({action:y.ER}),t(E.Ur({legacyAction:E.kF({serverEntityID:G[0].server.entityID,providerEntityID:G[0].provider.entityID}),items:G})),Se.onClose(),Ce()}),[t,Se,G,Ce,ye]),ke=(0,n.useCallback)((()=>{ye({action:y.kL}),G.forEach((({metadataItem:e})=>{t(R.c.actions.repopulateRequested({sourceURI:e.sourceURI}))})),Ce()}),[t,G,Ce,ye]),xe=(0,n.useCallback)((()=>{ye({action:y.io}),Ce()}),[Ce,ye]),Ae=(0,n.useCallback)((()=>{ye({action:y.SU}),t(E.Ur({legacyAction:E.q_(),items:G})),Ce()}),[t,G,Ce,ye]),Re=(0,n.useCallback)((()=>{ye({action:y.Ge}),t(E.Ur({legacyAction:E.OG(),items:G})),Se.onClose(),Ce()}),[t,Se,G,Ce,ye]),Ne=(0,n.useCallback)((()=>{ye({action:y.G0}),t(E.Ur({legacyAction:E.kt({options:{skipRedirect:!0}}),items:G})),Ce()}),[t,G,Ce,ye]),Le=(0,n.useCallback)((()=>{ye({action:y.cJ}),t(E.Ur({legacyAction:E.ag(),items:G})),Se.onClose(),Ce()}),[t,Se,G,Ce,ye]),je=(0,n.useCallback)((()=>{ye({action:y.KK}),t(E.Ur({legacyAction:E.Qp(),items:G})),Se.onClose(),Ce()}),[t,Se,G,Ce,ye]),Ue=(0,n.useCallback)((()=>{ye({action:y.i8}),t(E.Ur({legacyAction:E._W(),items:G})),Se.onClose(),Ce()}),[t,Se,G,Ce,ye]),Fe=(0,n.useCallback)((()=>{const e=X.isRemoveFromWatchlistVisible;e||ye({action:y.iy}),G.forEach((({metadataItem:r,server:n,provider:i,discoverProvider:s})=>{const a=n.isCloud?r.sourceURI:(0,O.c)(r),o=n.isCloud?r.ratingKey:(0,k.c)(r);s&&a&&o&&t(R.c.actions.toggleWatchlistRequested({server:n.isCloud?n:$,provider:n.isCloud?i:s,stableUser:q,sourceURI:a,ratingKey:o,added:!e}))})),Ce()}),[$,t,X.isRemoveFromWatchlistVisible,G,Ce,q,ye]),Ve=(0,n.useCallback)((()=>{const e=X.isMarkPlayedVisible;ye({action:e?y.Mp:y.Yj}),G.forEach((({metadataItem:r,server:n,provider:i})=>{t(R.c.actions.playedStatusUpdateRequested({server:n,provider:i,stableUser:q,sourceURI:r.sourceURI,ratingKey:r.ratingKey,guid:r.guid,played:e}))})),Ce()}),[t,X.isMarkPlayedVisible,G,Ce,q,ye]),_e=(0,n.useCallback)((({targetServer:e,targetProvider:r,targetLibrarySectionID:n,targetLibraryType:i})=>{ye({action:y.sv}),G.forEach((({metadataItem:s,server:a,provider:o})=>{t(R.c.actions.addToLibraryRequested({targetServer:e,targetProvider:r,targetLibrarySectionID:n,targetLibraryType:i,server:a,provider:o,metadataItem:s}))})),Ce()}),[t,G,Ce,ye]),We=(0,n.useCallback)((()=>{ye({action:y.e2}),G.forEach((({metadataItem:e,server:t,provider:r})=>{Y({metadataItem:e,server:t,provider:r})})),Ce()}),[G,Ce,Y,ye]),Be=(0,n.useCallback)((()=>{t(B.c.actions.reset())}),[t]);if((0,n.useEffect)((()=>()=>{Ce()}),[Ce]),!Q)return null;const He=pe(X),ze=(0,se.uw)(X).some((([e,t])=>!me.includes(e)&&t)),Ge=G.every((({metadataItem:e})=>e.remoteMedia));return n.createElement(oe.c,{className:e},n.createElement("div",{className:de.count},n.createElement(le.c,{className:de.icon}),(0,v.c)("{count} items selected",{count:ge})),He?n.createElement("div",{className:de.actions},(0,v.c)("No actions available for this selection")):n.createElement("div",{className:de.actions},X.isPlayVisible?n.createElement(N.c,{icon:s.default,title:(0,v.c)("Play"),onPress:Oe}):null,X.isToggleWatchlistVisible?n.createElement(N.c,{icon:X.isAddToWatchlistVisible?a.default:o.default,title:(0,A.c)(J.map((({type:e})=>e)),X.isRemoveFromWatchlistVisible),onPress:Fe}):null,X.isMarkPlayedOrUnplayedVisible?n.createElement(N.c,{icon:X.isMarkUnplayedVisible?c.default:l.default,title:(0,x.c)(J.map((({type:e})=>e)),X.isMarkUnplayedVisible),onPress:fe.onOpen}):null,(X.isAddToPlaylistVisible||X.isAddToCollectionVisible)&&re?n.createElement(n.Fragment,null,n.createElement(N.c,{icon:d.default,id:Pe,title:(0,v.c)("Add to..."),onPress:Ie.onToggle}),n.createElement(b.c,{className:de.menu,isOpen:Ie.isOpen,target:Pe,onMenuClose:Ie.onClose},n.createElement(_.c,{contentDirectoryID:te,mediaType:(0,D.c)(J[0].type,J[0].subtype),metadataType:J[0].type,provider:G[0].provider,server:G[0].server,sourceURI:re,onAddToCollectionPress:X.isAddToCollectionVisible?Ee.onOpen:void 0,onAddToPlaylistPress:X.isAddToPlaylistVisible?we.onOpen:void 0,onMenuClose:Ie.onClose,onSaveCollectionPress:ke,onSavePlaylistPress:xe})),X.isAddToPlaylistVisible&&re?n.createElement(W.c,{defaultDestinationSource:J[0].source,defaultTitle:ee,isOpen:we.isOpen,mediaType:(0,D.c)(J[0].type,J[0].subtype),sourceURI:re,onModalClose:we.onClose,onSaveSuccess:xe}):null,X.isAddToCollectionVisible&&re&&te?n.createElement(V.c,{contentDirectoryID:te,defaultTitle:ee,isOpen:Ee.isOpen,metadataType:J[0].type,sourceURI:re,onModalClose:Ee.onClose,onSaveSuccess:ke}):null):null,X.isEditVisible?n.createElement(N.c,{icon:u.default,title:(0,v.c)("Edit"),onPress:Ae}):null,ze?n.createElement(N.c,{icon:p.default,id:be,title:(0,v.c)("More"),onPress:Se.onToggle}):null,n.createElement(ae.c,{isOpen:fe.isOpen,message:X.isMarkPlayedVisible?(0,T.c)(Z,G.length):(0,M.c)(Z,G.length),metricsPage:X.isMarkPlayedVisible?g.e0:g.Sk,title:(0,x.c)(Z,X.isMarkUnplayedVisible),onCancel:fe.onClose,onConfirm:Ve}),n.createElement(b.c,{isOpen:Se.isOpen,target:be,onMenuClose:Se.onClose},X.isPlayVisible?n.createElement(S.c,{onPress:Me},(0,v.c)("Shuffle")):null,X.isPlayVisible?n.createElement(S.c,{onPress:Te},(0,v.c)("Play Next")):null,X.isPlayVisible?n.createElement(S.c,{onPress:De},(0,v.c)("Add to Queue")):null,X.isRemoveFromContinueWatchingVisible?n.createElement(S.c,{onPress:We},(0,v.c)("Remove from Continue Watching")):null,X.isRefreshVisible?n.createElement(S.c,{onPress:Ue},(0,v.c)("Refresh Metadata")):null,X.isAnalyzeVisible?n.createElement(S.c,{onPress:Le},(0,v.c)("Analyze")):null,X.isOptimizeVisible?n.createElement(S.c,{onPress:Re},(0,v.c)("Optimize...")):null,X.isMergeVisible?n.createElement(S.c,{onPress:je},(0,v.c)("Merge")):null,X.isAddToLibraryVisible?n.createElement(w.c,{onAddToLibrary:_e}):null,X.isDeleteVisible?n.createElement(S.c,{kind:Ge?F.c.Default:F.c.Danger,onPress:(0,P.c)(ve.onOpen,Se.onClose)},Ge?(0,v.c)("Remove"):(0,v.c)("Delete")):null),n.createElement(ae.c,{isOpen:ve.isOpen,message:ue(ge,Ge),metricsPage:g._2,title:Ge?(0,v.c)("Remove"):(0,v.c)("Delete"),onCancel:ve.onClose,onConfirm:Ne})),n.createElement("div",{className:de.deselect},n.createElement(L.c,{onPress:Be},n.createElement(ce.c,{className:de.icon}),(0,v.c)("Deselect All"))))}},29956:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(27876),s=r(98616),a=r(55252),o=r(640);function c({isHovered:e,metadataItem:t,metadataItemState:r}){const c=(0,i.OY)(),l=t?s.e.getIdentity(t):void 0,d=function(e,t,r,s,a=!1){const c=(0,i.OY)(),l=(0,i.w1)(t),d=(0,n.useMemo)((()=>!!s&&!!l.items[s]),[s,l.items]),u=!!l.count,{isSelectionRangeActive:p,isSelectionRangeComplete:m,checkItemInRange:h,onRangeStart:y,onRangeEnd:g,onRangeClear:f,onRangeSelect:v}=(0,o.AX)(),b=(0,n.useCallback)((e=>{c(r.selectItems({items:e}))}),[r,c]),S=(0,n.useCallback)((e=>{c(r.deselectItems({items:e}))}),[r,c]),P=(0,n.useCallback)((()=>{e&&(m?v(b,S):d?(S([e]),f()):(b([e]),y(e)))}),[m,d,e,S,f,v,y,b]);return(0,n.useEffect)((()=>{e&&p&&u&&a&&g(e)}),[a,p,u,e,g]),{isSelectionActive:u,isSelected:d,isInSelectionRange:p&&h(e),onToggleSelect:P}}(t,a.c,s.c.actions,l,e),u=null==r?void 0:r.isDeleted;return(0,n.useEffect)((()=>{t&&u&&d.isSelected&&c(s.c.actions.deselectItems({items:[t]}))}),[t,u,d,c,d.isSelected]),d}},98616:(e,t,r)=>{"use strict";r.d(t,{c:()=>u,e:()=>l});var n=r(44212),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const l=function(e,t){const r={count:0,items:{}};return{getDefaultMultiselectState:()=>r,getIdentity:t,reducers:{reset(e){let t=e;return t=r,t},selectItems(e,{payload:r}){const n=e,{items:i}=r;i.forEach((e=>{const r=t(e);n.items[r]||(n.items[r]=e,n.count+=1)}))},deselectItems(e,{payload:r}){const n=e,{items:i}=r;i.forEach((e=>{const r=t(e);n.items[r]&&(delete n.items[r],n.count-=1)}))}}}}(0,(e=>e.sourceURI)),d=l.getDefaultMultiselectState(),u=(0,n.is)({name:"metadataMultiselect",initialState:d,reducers:((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({},l.reducers)})},86564:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(55252);const s=(0,n.M3)(i.c,(e=>!!e.count))},55252:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.metadataMultiselect))},25848:(e,t,r)=>{"use strict";r.d(t,{cp:()=>A});var n=r(93808),i=r(75188),s=r(87096),a=r(3188),o=r(96743),c=r(50032),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>d(e,u(t));function v(e){if(!e.length)return!1;const[{metadataItem:t}]=e;return e.every((({metadataItem:e})=>t.type===e.type&&t.subtype===e.subtype))}function b(e){if(!e.length)return!1;const[{server:t,provider:r}]=e;return e.every((({server:e,provider:n})=>e.machineIdentifier===t.machineIdentifier&&n.identifier===r.identifier))}function S(e,t){return e.every((({server:e,provider:r,metadataItem:n,metadataItemState:i})=>(0,s.AP)({server:e,provider:r,stableUser:t,metadataItem:n,metadataItemState:i})||(0,s.S_)({server:e,provider:r,stableUser:t,metadataItem:n,metadataItemState:i})))}function P(e,t){return e.every((({server:e,provider:r,metadataItem:i,metadataItemState:a,discoverProvider:o,discoverProviderItemState:c})=>(i.type===n.WW.Movie||i.type===n.WW.Show)&&(0,s.y0)({server:e,provider:r,stableUser:t,metadataItem:i,metadataItemState:a,discoverProvider:o,discoverProviderItemState:c})))}function I(e,t){return e.every((({server:e,provider:r,metadataItem:n,metadataItemState:i})=>(0,s.Ah)({metadataItem:n,metadataItemState:i,server:e,provider:r,stableUser:t})))}function E(e,t){return!!e.length&&!!v(e)&&x(e,t,s.EH)}const w=[n.WW.Movie,n.WW.Show,n.WW.Season,n.WW.Artist,n.WW.Album];function C(e,t){if(e.length<2)return!1;if(!E(e,t))return!1;if(!v(e))return!1;if(!b(e))return!1;const[{metadataItem:r}]=e;return w.includes(r.type)}function O(e,t){if(!e.length)return!1;if(!b(e))return!1;const[{provider:r}]=e;if(!(0,c.c)(r))return!1;const i=e.reduce(((e,{metadataItem:t})=>{const r=function(e){const{type:t,subtype:r,playlistType:i}=e;if(r===n.GO.Photo&&t===n.WW.Clip)return o.K.Photo;switch((0,a.S)(t,r)||t){case n.WW.Track:case n.WW.Episode:case n.WW.Movie:case n.WW.Clip:case n.WW.Audiobook:case n.WW.Author:case n.WW.Chapter:return o.K.AudioVideo;case n.WW.Photo:return o.K.Photo;case n.WW.Playlist:if(!i)throw new Error("playlistType missing from playlist metadataItem");switch(i){case n.QT.Audio:case n.QT.Video:return o.K.AudioVideo;case n.QT.Photo:return o.K.Photo}}throw new Error(`No known player type for ${t}`)}(t);return e.includes(r)||e.push(r),e}),[]);return!(i.length>1&&i.includes(o.K.Photo))&&D(e,t,s.gR)}function M(e,t){if(!e.length)return!1;const[{metadataItem:r}]=e;return!!e.every((({metadataItem:e})=>r.type===e.type))&&!!function(e){if(!e.length)return!1;const[{server:t,provider:r,metadataItem:n}]=e;return e.every((({server:e,provider:i,metadataItem:s})=>e.machineIdentifier===t.machineIdentifier&&i.identifier===r.identifier&&s.librarySectionID===n.librarySectionID))}(e)&&((i=r.type)===n.WW.Movie||i===n.WW.Show||i===n.WW.Season||i===n.WW.Episode||i===n.WW.Artist||i===n.WW.Album||i===n.WW.Track)&&x(e,t,s.ec);var i}function T(e,t){if(!e.length)return!1;const[{metadataItem:r}]=e;if(e.some((({metadataItem:e})=>e.type===n.WW.Playlist)))return!1;const a=(0,i.c)(r.type,r.subtype);return!!e.every((({metadataItem:e})=>a===(0,i.c)(e.type,e.subtype)))&&!!b(e)&&x(e,t,s.QP)}function D(e,t,r,n){return!!e.length&&e.every((e=>r(f(g({},e),{stableUser:t,addToLibraryTargets:n}))))}function k(e,t,r){return!!e.length&&e.some((e=>r(f(g({},e),{stableUser:t}))))}function x(e,t,r){return!!e.length&&!!b(e)&&D(e,t,r)}const A=function(e,t,r){return{isAddToCollectionVisible:M(e,t),isAddToLibraryVisible:D(e,t,s.GS,r),isAddToPlaylistVisible:T(e,t),isAnalyzeVisible:D(e,t,s.Ar),isDeleteVisible:D(e,t,s.EX),isEditVisible:E(e,t),isMarkPlayedOrUnplayedVisible:S(e,t),isMarkPlayedVisible:k(e,t,s.S_),isMarkUnplayedVisible:k(e,t,s.AP),isToggleWatchlistVisible:P(e,t),isAddToWatchlistVisible:k(e,t,s.O),isRemoveFromWatchlistVisible:k(e,t,s._0),isRemoveFromContinueWatchingVisible:I(e,t),isMergeVisible:C(e,t),isOptimizeVisible:D(e,t,s.qC),isPlayVisible:O(e,t),isRefreshVisible:D(e,t,s.Qb)}}},6536:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(50032);const s=function(e){return!!(0,i.c)(e)||!!n._u(e.identifier,n.y6)}},36848:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85448),i=r(52180);function s(e){const t=(0,i.WI)("appModel").get("history");let r=-1;for(let i=t.length-1;i>=0;i--){const{pathname:s,search:a}=t[i];if((0,n.ot)(`${s}${a}`,{path:e,exact:!0})){r=i;break}}return r}},576:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(90012),i=r(35060);function s(){const e=(0,i.c)(n.s.IncludeDiscoverSource),t=(0,i.c)(n.s.IncludeMetadataInSearch),r=(0,i.c)(n.s.IncludeAvailabilities);return e||t||r}},35060:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(70404),a=r(70456),o=r(42412),c=r(85308),l=r(67668);function d(e){const t=(0,i.OY)(),{optOuts:r,isPending:d,isPopulated:u,error:p}=(0,i.w1)(c.c),m=(0,i.w1)(s.c),h=(0,i.w1)(a.c);return(0,n.useEffect)((()=>{d||u||p||!h||t(o.c.actions.fetchOptOuts())}),[t,p,d,u,h]),(0,l.c)(e,r,m)}},42412:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(44212),i=r(45372);const s=(0,n.is)({name:"optOuts",initialState:{isPopulated:!1,isPending:!1,error:null,optOuts:{}},reducers:{fetchOptOuts(e){(0,i.G8)(e)},fetchOptOutsSucceeded(e,{payload:t}){(0,i.mM)(e),e.optOuts=t.optOuts},fetchOptOutsFailed(e,{payload:t}){(0,i.C)(e,t.error)},updateOptOut(e,t){},updateOptOutSucceeded(e,{payload:t}){Object.assign(e.optOuts,t.optOut)},updateOptOutFailed(e,{payload:t}){(0,i.C)(e,t.error)}}})},85308:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(93564);const s=(0,n.M3)(i.c,(e=>e.features.optOuts))},6648:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(90012);function s(e){return e===i.s.IncludeAvailabilities||e===i.s.IncludeSocialProof||n._u(e,[n.y6,n.Sg])?i.M.OptIn:i.M.OptOutManaged}},67668:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(90012),i=r(6648);const s=function(e,t,r){const s=t[e]||(0,i.c)(e);return!s||s===n.M.OptIn||s===n.M.OptOutManaged&&!r}},34648:(e,t,r)=>{"use strict";r.d(t,{c:()=>W});var n=r(11504),i=r(24348),s=r(59396),a=r(624),o=r(80280),c=r(29208),l=r(27876),d=r(3008),u=r(41744),p=r(42152),m=r(77072),h=r(66780),y=r(44500),g=r(75560),f=r(29164),v=r(23300),b=r(46896),S=r(8684),P=r(65144),I=r(98260),E=r(97884),w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t)=>{var r={};for(var n in e)C.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))t.indexOf(n)<0&&O.call(e,n)&&(r[n]=e[n]);return r};function T(e){var t=e,{item:r}=t,i=M(t,["item"]);const s=(0,l.OY)(),a=(0,S.c)(),o=(0,b.c)(i),c=(0,l.w1)(f.c),w=(0,n.useCallback)((()=>{s((0,g.mY)({origin:y.Oi})),a({action:h.iw})}),[s,a]);if(!r)return n.createElement("div",{style:o.style},n.createElement(d.ye,{height:"100%"},n.createElement(p.mw,{posterStyle:"landscape",width:i.cellWidth},n.createElement(n.Fragment,null))));const C=(0,E.c)("userProfile",{id:r.id});return n.createElement("div",{style:o.style},n.createElement(d.ye,{height:"100%"},n.createElement(p.mw,{posterStyle:"landscape",width:i.cellWidth},n.createElement(d.ye,{gap:"m",height:i.cellHeight,orientation:"horizontal",paddingX:"m",paddingY:"s",verticalAlign:"center"},n.createElement(p.mw,{posterStyle:"circle",width:88},n.createElement(v.c,{server:c,size:88,url:r.avatar}),n.createElement(p.ic,{href:C,posterStyle:"circle",onPress:w})),n.createElement(d.ye,{gap:"m",height:"100%",verticalAlign:"space-between"},n.createElement(d.ye,{gap:"xxs",height:"100%"},n.createElement(d.ye,{height:"100%",verticalAlign:"center"},n.createElement(m.a,{color:"default",font:"body-1",numberOfLines:1},n.createElement(u.c,{href:C,onPress:w},r.displayName||r.username)),r.displayName?n.createElement(m.a,{color:"muted",font:"body-3",numberOfLines:1},r.username):null),n.createElement(I.c,{mutualFriends:r.mutualFriends})),n.createElement(d.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(P.c,{user:r})))))))}var D=r(39392),k=r(56784),x=r(13072),A=Object.defineProperty,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&j(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&j(e,r,t[r]);return e};const F=(0,D.c)(),V="friendSuggestionsHub",_=5;function W({experimentName:e}){var t;const{data:r}=(0,k.oX)(),l=(0,n.useMemo)((()=>e=>n.createElement(T,U({},e))),[]);return n.createElement(c.cp,{experimentName:e,extendParentContextProviders:!0,metricsPane:i.Oi},n.createElement(o.c,{cellComponentFactory:l,className:x.c.hub,hub:{sourceURI:V,title:(0,s.c)("Friend Suggestions")},hubHeaderClassName:x.c.header,hubTitleComponent:a.c,items:null!=(t=null==r?void 0:r.suggestedUsers)?t:[],keyPropName:"username",layout:F,scrollerKey:V,totalSize:r?r.suggestedUsers.length:_}))}},22816:(e,t,r)=>{"use strict";r.d(t,{c:()=>cr});var n=r(11504),i=r(85448),s=r(3008),a=r(77072),o=r(44500),c=r(59396),l=r(59956),d=r(66984),u=r(1256),p=r(52180),m=r(34648),h=r(87592),y=r(76952),g=r(34708),f=r(19388),v=r(2024),b=r(11728),S=r(89080),P=r.n(S),I=r(27876),E=r(99744),w=r(10568),C=r(85392),O=r(42536),M=r(34632),T=r(92432),D=r(9868),k=r(66780),x=r(24752),A=r(99192),R=r(22916),N=r(77792),L=r(8684),j=r(57864),U=r(93564);const F=(0,j.M3)(U.c,(e=>e.core.user.invite));var V=r(32380),_=r(49828);const W={menu:"UserSearchInvitePopover-menu-okrOYZ Menu-menu-OCzudL",button:"UserSearchInvitePopover-button-w5obtJ",default:"UserSearchInvitePopover-default-y5ucdD",accent:"UserSearchInvitePopover-accent-PgsQfC",option:"UserSearchInvitePopover-option-oGp8iU"};function B({icon:e,title:t,href:r,onPress:i}){const o=n.createElement(s.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(a.a,{color:"default",font:"body-2"},t),n.createElement(e,null));return r?n.createElement(R.c,{className:W.option,rel:"noopener noreferrer",role:"menuitem",target:"_blank",to:r},o):n.createElement(A.c,{className:W.option,role:"menuitem",onPress:i},o)}const H=[0,(0,_.c)("l")],z=250;function G({id:e,isHighlighted:t,title:r,pane:i,color:o="accent",icon:l}){const d=(0,I.OY)(),u=(0,L.c)(),{addToast:p}=(0,T.Wo)(),m=(0,n.useRef)(!1),{url:y,isPopulated:g,isPending:f}=(0,I.w1)(F),v=encodeURIComponent(null!=y?y:""),b=encodeURIComponent((0,c.c)("Let's be friends on Plex")),{copyToClipboard:S,copyState:R,resetCopyState:j}=(0,N.c)(y),U=(0,D.y)(),_=(0,n.useCallback)((()=>{if(u({action:k.Iz,pane:i}),!y&&!m.current)return d(V.c.actions.getInviteUrl()),void(m.current=!0);y&&U.onToggle()}),[d,y,i,U,u]);return(0,n.useEffect)((()=>{g&&m.current&&(U.onToggle(),m.current=!1)}),[g,U]),(0,n.useEffect)((()=>{if(R!==N.z.Done)return;p({color:"confirm",description:(0,c.c)("Link copied to your clipboard"),type:"foreground"});const e=window.setTimeout((()=>{j(),U.onClose()}),z);return()=>{window.clearTimeout(e)}}),[p,R,U,j]),n.createElement(n.Fragment,null,n.createElement(A.c,{"aria-haspopup":!0,"aria-label":r,className:P()(W.button,"accent"===o&&W.accent,"default"===o&&W.default),id:e,style:t?{backgroundColor:`var(--color-background-${o}-focus)`}:{},onPress:_},n.createElement(s.ye,{align:"center",gap:"s",orientation:"horizontal",verticalAlign:"center"},l?n.createElement(s.ye,{align:"center",gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(l,null),n.createElement(a.a,{color:"inherit",font:"button-2"},r)):n.createElement(a.a,{color:"inherit",font:"button-2"},r),f&&m.current?n.createElement(M.c,{color:"inherit",size:"xxs"}):null)),n.createElement(x.c,{className:W.menu,isOpen:U.isOpen,options:{placement:"right",modifiers:[{name:"offset",options:{offset:H}}]},target:e,onMenuClose:U.onClose},n.createElement(s.ye,{gap:"xs",paddingY:"xs",width:"100%"},n.createElement(s.ye,{paddingX:"s"},n.createElement(a.a,{color:"muted",font:"heading-3"},(0,c.c)("Invite to Plex"))),n.createElement(h.c,null),n.createElement(s.ye,{align:"center",width:"100%"},n.createElement(B,{href:`https://www.facebook.com/sharer.php?u=${v}`,icon:E.default,title:(0,c.c)("Facebook")}),n.createElement(B,{href:`https://twitter.com/share?url=${v}&text=${b}`,icon:w.default,title:(0,c.c)("Twitter")}),n.createElement(B,{href:`mailto:?subject=${b}&body=${v}`,icon:C.default,title:(0,c.c)("Email")}),n.createElement(B,{icon:O.default,title:(0,c.c)("Copy Link"),onPress:S})))))}var q=r(39864),K=r(58980),Q=r(56784),$=r(9192);const Y=130,X=626;function J(){const{friends:e,isPopulated:t}=(0,K.c)(f.c,g.c.actions.fetchCommunityFriends,!0),[r,i]=(0,n.useState)(),{data:o}=Q.mk.endpoints.GetPendingRequestsCount.useQuery({type:q.gV.Sent}),{data:l}=Q.mk.endpoints.GetPendingRequestsCount.useQuery({type:q.gV.Received}),{data:d}=$.mk.endpoints.getBlockedUsers.useQuery((0,b.c)());if((0,n.useEffect)((()=>{i((e=>{var t,r;if(!o||!l)return e;let n=0;return o&&(n=null!=(t=o.friendRequestsCount)?t:0),l&&(n+=null!=(r=l.friendRequestsCount)?r:0),n}))}),[l,o]),!t||void 0===r||!d)return null;const u=!r&&!e.length&&!d.blockedUsers.nodes.length;return n.createElement(s.ye,{align:u?"center":"left",width:"100%"},n.createElement(s.ye,{maxWidth:u?X:void 0,paddingTop:u?"xxl":"none",width:"100%"},n.createElement(h.c,null),n.createElement(s.ye,{gap:"s",orientation:"horizontal",padding:"xs",verticalAlign:"center",wrap:!0},n.createElement(v.c,{durationMilliseconds:0,height:Y,src:y,width:Y}),n.createElement(s.ye,{align:"left",gap:"s",verticalAlign:"center",width:"75%"},n.createElement(s.ye,{gap:"xxs",verticalAlign:"center"},n.createElement(a.a,{color:"inherit",font:"heading-3"},(0,c.c)("Plex is better with friends")),n.createElement(a.a,{color:"muted",numberOfLines:2},(0,c.c)("Invite friends and family to Plex. Discover what theyre watching, their ratings and Watchlist items."))),n.createElement(G,{color:"default",id:"user-search-zero-state-invite",pane:"zeroState",title:(0,c.c)("Invite people to Plex")})))))}var Z=r(58660),ee=r(24348),te=r(23852),re=r(3276),ne=r(66576),ie=r(80280),se=r(29208),ae=r(24180),oe=r(30004),ce=r(41744),le=r(42152),de=r(64792),ue=r(75560),pe=r(29164),me=r(23300),he=r(46896),ye=r(65144),ge=r(98260),fe=r(97884),ve=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Pe=(e,t)=>{var r={};for(var n in e)be.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ve)for(var n of ve(e))t.indexOf(n)<0&&Se.call(e,n)&&(r[n]=e[n]);return r};function Ie(e){var t=e,{type:r}=t,i=Pe(t,["type"]);const{item:c}=i,l=(0,I.OY)(),d=(0,L.c)(),u=(0,he.c)(i),p=(0,I.w1)(pe.c),m=(0,n.useCallback)((()=>{l((0,ue.mY)({origin:r===q.gV.Received?o.qq:o.i})),d({action:k.iw})}),[l,d,r]);if(!c)return n.createElement("div",{style:u.style},n.createElement(s.ye,{height:"100%"},n.createElement(le.mw,{posterStyle:"landscape",width:i.cellWidth},n.createElement(n.Fragment,null))));const h=(0,fe.c)("userProfile",{id:c.user.id});return n.createElement("div",{style:u.style},n.createElement(s.ye,{height:"100%"},n.createElement(le.mw,{posterStyle:"landscape",width:i.cellWidth},n.createElement(s.ye,{gap:"m",height:i.cellHeight,orientation:"horizontal",paddingX:"m",paddingY:"s",verticalAlign:"center"},n.createElement(le.mw,{posterStyle:"circle",width:88},n.createElement(me.c,{server:p,size:88,url:c.user.avatar}),n.createElement(le.ic,{href:h,posterStyle:"circle",onPress:m})),n.createElement(s.ye,{gap:"m",height:"100%",verticalAlign:"space-between"},n.createElement(s.ye,{gap:"xxs",height:"100%"},n.createElement(s.ye,{height:"100%",verticalAlign:"center"},n.createElement(a.a,{color:"default",font:"body-1",numberOfLines:1},n.createElement(ce.c,{href:h,onPress:m},c.user.displayName||c.user.username)),c.user.displayName?n.createElement(a.a,{color:"muted",font:"body-3",numberOfLines:1},c.user.username):null),r===q.gV.Sent?n.createElement(s.ye,{orientation:"horizontal",verticalAlign:"center"},n.createElement(a.a,{color:"muted",font:"body-3"},(0,de.c)((0,oe.c)(new Date(c.createdAt)),{limit:"past",includeAgoSuffix:!0,shorthand:!1,roundDays:"floor"}))):null,r===q.gV.Received?n.createElement(ge.c,{mutualFriends:c.user.mutualFriends}):null),n.createElement(s.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(ye.c,{user:c.user})))))))}var Ee=r(39392),we=r(80432),Ce=r(45692),Oe=r(13072),Me=Object.defineProperty,Te=Object.defineProperties,De=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Re=(e,t,r)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ne=(e,t)=>{for(var r in t||(t={}))xe.call(t,r)&&Re(e,r,t[r]);if(ke)for(var r of ke(t))Ae.call(t,r)&&Re(e,r,t[r]);return e},Le=(e,t)=>Te(e,De(t));const je=(0,Ee.c)(),Ue="receivedFriendRequestsHub",Fe=5;function Ve(){const e=(0,I.OY)(),t=(0,L.c)(),{count:r}=(0,ae.c)(q.gV.Received),{data:i,isPopulated:s,getNextPage:l,remove:d}=(0,ne.c)(Q.mk.endpoints.friendRequests,{key:"received-friend-requests",args:{type:q.gV.Received},fetchSize:Ce.E,transformResponse:te.c,selector:Q.mk.endpoints.friendRequests.select((0,Ce.c)(q.gV.Received))}),u=(0,I.w1)(re.c);(0,n.useEffect)((()=>{u&&(d(u,(e=>e.user.id)),e(g.c.actions.clearReceivedFriendRequests()))}),[e,d,u]);const p=(0,n.useCallback)((()=>{t({pane:ee.qq,action:k.gL})}),[t]),m=(0,n.useCallback)((()=>n.createElement(we.c,null,n.createElement(Z.c,{onPress:p},n.createElement("span",{className:Oe.c.title},n.createElement(a.a,{color:"primary",font:"heading-2"},s?(0,c.c)("Friend Requests ({count})",{count:r}):(0,c.c)("Friend Requests")))))),[r,s,p]),h=(0,n.useMemo)((()=>e=>n.createElement(Ie,Le(Ne({},e),{type:q.gV.Received}))),[]);return n.createElement(se.cp,{metricsOrigin:o.qq,metricsPane:ee.qq},n.createElement(ie.c,{cellComponentFactory:h,className:Oe.c.hub,hub:{sourceURI:Ue},hubHeaderClassName:Oe.c.header,hubTitleComponent:m,items:null!=i?i:[],keyPropName:"createdAt",layout:je,scrollerKey:Ue,totalSize:s?r:Fe,onPageRequest:l}))}var _e=r(63480),We=Object.defineProperty,Be=Object.defineProperties,He=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,Ke=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qe=(e,t)=>{for(var r in t||(t={}))Ge.call(t,r)&&Ke(e,r,t[r]);if(ze)for(var r of ze(t))qe.call(t,r)&&Ke(e,r,t[r]);return e},$e=(e,t)=>Be(e,He(t));const Ye=(0,Ee.c)(),Xe="sentFriendRequestsHub",Je=5;function Ze(){const e=(0,I.OY)(),t=(0,L.c)(),{count:r}=(0,ae.c)(q.gV.Sent),{data:i,isPopulated:s,getNextPage:l,remove:d}=(0,ne.c)(Q.mk.endpoints.friendRequests,{key:"sent-friend-requests",args:{type:q.gV.Sent},fetchSize:Ce.E,transformResponse:te.c,selector:Q.mk.endpoints.friendRequests.select((0,Ce.c)(q.gV.Sent))}),u=(0,I.w1)(_e.c);(0,n.useEffect)((()=>{u&&(d(u,(e=>e.user.id)),e(g.c.actions.clearSentFriendRequests()))}),[e,d,u]);const p=(0,n.useCallback)((()=>{t({pane:ee.SO,action:k.gL})}),[t]),m=(0,n.useCallback)((()=>n.createElement(we.c,null,n.createElement(Z.c,{onPress:p},n.createElement("span",{className:Oe.c.title},n.createElement(a.a,{color:"primary",font:"heading-2"},s?(0,c.c)("Requests Sent ({count})",{count:r}):(0,c.c)("Requests Sent")))))),[r,s,p]),h=(0,n.useMemo)((()=>e=>n.createElement(Ie,$e(Qe({},e),{type:q.gV.Sent}))),[]);return n.createElement(se.cp,{metricsOrigin:o.i,metricsPane:ee.SO},n.createElement(ie.c,{cellComponentFactory:h,className:Oe.c.hub,hub:{sourceURI:Xe},hubHeaderClassName:Oe.c.header,hubTitleComponent:m,items:null!=i?i:[],keyPropName:"createdAt",layout:Ye,scrollerKey:Xe,totalSize:s?r:Je,onPageRequest:l}))}var et=r(51180),tt=r(64748),rt=r(91500),nt=r(56676),it=r(7988),st=r(25398),at=r(13778),ot=r(95188),ct=r(64224),lt=r(17876),dt=r(57080),ut=r(73888),pt=r(10376),mt=Object.defineProperty,ht=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,bt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,St=(e,t)=>{for(var r in t||(t={}))ft.call(t,r)&&bt(e,r,t[r]);if(gt)for(var r of gt(t))vt.call(t,r)&&bt(e,r,t[r]);return e},Pt=(e,t)=>ht(e,yt(t)),It=(e,t)=>{var r={};for(var n in e)ft.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&gt)for(var n of gt(e))t.indexOf(n)<0&&vt.call(e,n)&&(r[n]=e[n]);return r};function Et(e){var t=e,{id:r,setHighlightedIndex:i}=t,o=It(t,["id","setHighlightedIndex"]);const[l,d]=(0,pt.c)();return(0,n.useEffect)((()=>{l&&i(-1)}),[l,i]),n.createElement(s.ye,{ref:d,align:"space-between",gap:"xs",grow:!1,height:64,orientation:"horizontal",padding:"l",verticalAlign:"center",width:"100%"},n.createElement(s.ye,{gap:"l",orientation:"horizontal",verticalAlign:"center",width:"70%"},n.createElement(dt.default,{color:"muted",size:"xl"}),n.createElement(a.a,{color:"primary",font:"body-3"},(0,c.c)("Can't find who you're looking for? Invite them to join Plex"))),n.createElement(G,Pt(St({},o),{icon:ut.default,id:r,pane:"search",title:(0,c.c)("Invite")})))}var wt=r(35624),Ct=r(35770),Ot=r(82228),Mt=r(94644),Tt=r(12908);const Dt={list:"UserSearchResults-list-Q5zcAg",scroller:"UserSearchResults-scroller-lUJmgj VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko UserSearchResults-list-Q5zcAg"};var kt=Object.defineProperty,xt=Object.defineProperties,At=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,jt=(e,t,r)=>t in e?kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ut=(e,t)=>{for(var r in t||(t={}))Nt.call(t,r)&&jt(e,r,t[r]);if(Rt)for(var r of Rt(t))Lt.call(t,r)&&jt(e,r,t[r]);return e},Ft=(e,t)=>xt(e,At(t));const Vt=(0,Ot.c)({rowHeight:parseInt(wt.c.searchResultHeight,10),overscan:1});function _t({users:e,errorMessage:t,query:r,highlightedIndex:i,getItemProps:a}){const c=(0,I.OY)(),l=(0,n.useCallback)((()=>{c((0,ue.mY)({origin:o.gf}))}),[c]),d=(0,n.useMemo)((()=>e=>n.createElement(Ct.c,Ft(Ut({},e),{getItemProps:a,highlightedIndex:i,isHoverable:!0,onPress:l}))),[a,i,l]);return n.createElement(se.cp,{metricsPane:ee.uS},n.createElement("div",{className:Dt.list},0===e.length||t?n.createElement(s.ye,{padding:"s"},n.createElement(Tt.c,{query:r})):n.createElement(Mt.c,{cellComponentFactory:d,className:Dt.scroller,items:e,keyPropName:"id",layout:Vt,scrollerKey:r,totalSize:e.length})))}var Wt=r(42836),Bt=r(86552),Ht=r(31760);const zt=50,Gt={comboBox:"UserSearchInput-comboBox-NVOicb"};var qt=Object.defineProperty,Kt=Object.defineProperties,Qt=Object.getOwnPropertyDescriptors,$t=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Jt=(e,t,r)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zt=(e,t)=>{for(var r in t||(t={}))Yt.call(t,r)&&Jt(e,r,t[r]);if($t)for(var r of $t(t))Xt.call(t,r)&&Jt(e,r,t[r]);return e},er=(e,t)=>Kt(e,Qt(t));function tr(e){return e&&"type"in e&&"Invite"===e.type}const rr=400,nr="user-search-results",ir="user-search-invite";function sr(){const e=(0,L.c)(),{metricsPage:t,metricsContextTuple:r,metricsPane:i}=(0,se.e0)(),a=(0,I.OY)(),{anchorRef:o,maxHeight:l,width:d,onInteractOutside:u}=(0,lt.c)({heightOffset:rr}),{users:m,query:y,isFetching:g,isUninitialized:f,error:v,search:b,reset:S}=function(){var e;const[t,r]=(0,n.useState)(""),{addToast:i}=(0,T.Wo)(),s=(0,I.OY)(),[a,o]=(0,n.useState)(),{data:c,isFetching:l,isUninitialized:d,error:u,originalArgs:p}=(0,Ht.CQ)({query:t,limit:zt},{skip:!t}),m=(0,n.useCallback)((()=>{r(""),o(void 0)}),[]),h=(0,n.useCallback)((e=>{r(e)}),[]);return(0,n.useEffect)((()=>{t||s(Ht.mk.util.invalidateTags([Wt.J.UserSearch]))}),[s,t]),(0,n.useEffect)((()=>{o(null==c?void 0:c.searchUsers)}),[null==c?void 0:c.searchUsers]),(0,n.useEffect)((()=>{(null==u?void 0:u.message)&&i({color:"alert",description:u.message,type:"foreground",testID:"error"})}),[i,null==u?void 0:u.message]),{users:a,query:null!=(e=null==p?void 0:p.query)?e:t,isFetching:l,isUninitialized:d,error:u,search:h,reset:m}}(),P=(0,n.useMemo)((()=>m?[...m,{type:"Invite"}]:[]),[m]),{isOpen:E,highlightedIndex:w,inputValue:C,setHighlightedIndex:O,getComboboxProps:D,getMenuProps:x,getInputProps:A,setInputValue:R,getItemProps:N,openMenu:j,closeMenu:U}=(0,rt.c7)({items:P,onSelectedItemChange:({selectedItem:e})=>{if(!e)return;if(tr(e))return;const t=(0,fe.c)("userProfile",{id:e.id});a((0,at.IB)({pathname:t}))},stateReducer:(0,n.useCallback)(((e,{changes:t,type:r})=>{switch(r){case rt.c7.stateChangeTypes.ItemClick:case rt.c7.stateChangeTypes.InputKeyDownEnter:case rt.c7.stateChangeTypes.FunctionSelectItem:return er(Zt({},t),{inputValue:e.inputValue,isOpen:e.isOpen});case rt.c7.stateChangeTypes.InputBlur:return er(Zt({},t),{inputValue:e.inputValue,selectedItem:null})}return t}),[]),itemToString:e=>e&&!tr(e)?e.displayName||e.username:""}),F=(0,Bt.c)(C,ct.s),V=(0,n.useCallback)((e=>{e?j():U()}),[U,j]),_=(0,n.useCallback)((()=>{R(""),U(),e({action:k.my})}),[R,U,e]),W=(0,n.useCallback)((e=>{if("Home"!==e.key&&"End"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),w>-1&&w===P.length-1&&"Enter"===e.key){e.nativeEvent.preventDownshiftDefault=!0;const t=document.getElementById(ir);null==t||t.focus()}}),[w,P.length]);(0,n.useEffect)((()=>{F&&(b(F),(0,p.WI)("metrics").trackEvent({event:ot.iA,interaction:!0,properties:{value:F,page:t,contextTuple:r,pane:i}}))}),[F,r,t,i,b]),(0,n.useEffect)((()=>{C?C===F&&b(C):(R(""),U(),S())}),[U,F,C,S,b,R]);const B=(0,n.useCallback)((()=>{!E&&C&&j(),e({action:k.Ax})}),[C,E,j,e]),H=(0,n.useCallback)((t=>{var r,n;(null==(r=t.relatedTarget)?void 0:r.id)===ir||"dialog"===(null==(n=t.relatedTarget)?void 0:n.getAttribute("role"))?t.nativeEvent.preventDownshiftDefault=!0:C&&g&&e({action:k.oh})}),[C,g,e]),z=g||E&&f&&C!==F;return n.createElement("div",Zt({},D({className:Gt.comboBox})),n.createElement(nt._k,{isOpen:E,onOpenChange:V},n.createElement(nt.Kd,null,n.createElement(st.U,{ref:o,inputProps:A({placeholder:(0,c.c)("Search by name, location, or interest"),onKeyDown:W,onFocus:B,onBlur:H,maxLength:Wt.O}),onClearPress:_})),n.createElement("div",Zt({},x()),n.createElement(nt.IN,{arrow:!1,autoFocus:!1,maxHeight:l,portalled:!1,width:d,onInteractOutside:u},n.createElement(s.ye,{shrink:!1,width:"100%"},z?n.createElement(s.ye,{align:"center",orientation:"horizontal",padding:"s",width:"100%"},n.createElement(M.c,{size:"s"})):null,!m||g&&!m.length?null:n.createElement(n.Fragment,null,n.createElement(it.aS,{scrollShadow:!1},n.createElement(_t,{errorMessage:null==v?void 0:v.message,getItemProps:N,highlightedIndex:w,query:y,users:m})),n.createElement(h.c,null),n.createElement("div",{id:nr},n.createElement(Et,{id:ir,isHighlighted:w===m.length,setHighlightedIndex:O}))))))))}var ar=r(95460);const or={content:"PeoplePage-content-qQuwaG PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"};function cr(){const e=(0,l.c)();return(0,n.useEffect)((()=>{const t=function(){const e=(0,p.WI)("appModel").get("history"),t=e[e.length-1];return t?`${t.pathname}${t.search}`:void 0}();let r;r=t&&(0,i.ot)(t,{path:ar.c.profile,exact:!0})?o.K2:t&&(0,i.ot)(t,{path:ar.c.userProfile,exact:!0})?o.EN:o.At,e({origin:r})}),[e]),n.createElement(d.c,null,n.createElement(u.c,{className:or.content},n.createElement(s.ye,{gap:"l",paddingTop:"l"},n.createElement(s.ye,{align:"center",gap:"l"},n.createElement(a.a,{font:"heading-1"},(0,c.c)("Connect with Friends")),n.createElement(sr,null)),n.createElement(Ve,null),n.createElement(m.c,null),n.createElement(et.c,{hideNotificationBadge:!0,useGetFriends:tt.c}),n.createElement(Ze,null),n.createElement(J,null))))}},33924:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(85712),i=r(39968),s=r(51912),a=r(18730),o=r(40376),c=r(75536);function l(){const{machineIdentifier:e,providerIdentifier:t}=(0,a.c)(),r=(0,i.c)(),l=r.key?(0,c.c)(r.key):void 0,d=r.pageType?(0,c.c)(r.pageType):void 0,u=(0,o.es)(n.Qf).find((e=>e===d)),p=(0,s.c)({machineIdentifier:e,providerIdentifier:t,contentDirectoryID:(0,c.c)(r.source),directoryKey:l,pageType:u,pivotID:(0,c.c)(r.pivot)});return!!p&&p.key===n.OG.DiscoverPeople}},39392:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(29412),i=r(49828),s=r(95156);function a(){return(0,n.c)({columnWidth:320,rowHeight:127,outerPaddingLeft:parseInt(s.c.v4PagePadding,10),innerHorizontalPadding:(0,i.c)("m"),outerPaddingRight:(0,i.c)("m"),outerPaddingBottom:(0,i.c)("m")})}},71040:(e,t,r)=>{"use strict";r.d(t,{c:()=>p,y:()=>d});var n=r(44212);var i=r(50632),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=(0,i.c)((e=>e),(e=>{var t,r,n;const{data:i}=e,s=i.MediaContainer;return{items:null!=(t=null==s?void 0:s.Metadata)?t:[],totalSize:null!=(r=null==s?void 0:s.totalSize)?r:0,offset:null!=(n=null==s?void 0:s.offset)?n:0}})),u=d.getDefaultPaginatedState(),p=(0,n.is)({name:"playHistory",initialState:u,reducers:((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({},d.reducers)})},23564:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var n=(e=>(e.LibrarySectionID="librarySectionID",e.AccountID="accountID",e.MetadataItemID="metadataItemID",e.ViewedAt="viewedAt",e))(n||{})},87220:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(44212).is)({name:"players",initialState:{},reducers:{ended(e,t){}}})},96743:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});var n=(e=>(e.AudioVideo="audioVideo",e.Photo="photo",e))(n||{})},10596:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(52180),i=r(33428);function s(){const e=(0,n.WI)("appModel").get("deviceSettings").get("debugLevel");return e===i.c.ENABLED||e===i.c.VERBOSE}},36820:(e,t,r)=>{"use strict";r.d(t,{Q:()=>M,c:()=>D});var n=r(11504),i=r(27876),s=r(84392),a=r(69956),o=r(44688),c=r(3544),l=r(3396),d=r(68536),u=r(31636),p=r(37984),m=r(4668),h=r(63160),y=r(29356),g=r(48708),f=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e},C=(e,t)=>v(e,b(t));const O=(0,n.createContext)(void 0);function M(){const e=(0,n.useContext)(O);if(void 0===e)throw new Error("usePlayableItemsContext must be used within a PlayableItemsContextProvider");return e}function T({metadataItem:e,children:t}){const[r,s]=(0,p.c$)(),l=(0,i.OY)(),h=(0,i.w1)((0,y.c)(s,e.sourceURI)),f=(0,a.c)(e.playableKey),v=(0,i.w1)((0,c.c)(f.key)),b=(0,i.w1)((0,m.c)(f.serverIdentifier)),S=(0,i.w1)((0,u.c)(f.serverIdentifier,f.providerIdentifier));(0,n.useEffect)((()=>{v.isPopulated||v.error||!S.isPopulated||l(o.c.actions.fetchMetadataItem({server:b,provider:S,key:f.key}))}),[l,v.error,v.isPopulated,f.key,S,b]),(0,n.useEffect)((()=>{h.isPending||h.isPopulated||h.error||l(g.cp.actions.metadataItemAvailabilitiesFetchRequested({server:r,provider:s,metadataItem:e}))}),[l,e,h.error,h.isPending,h.isPopulated,s,r]);const P=(0,n.useMemo)((()=>{if(h.isPending||v.isPending)return[];const t=h.availabilities.serverAvailabilities.map((({availability:e})=>e));return S.isPopulated&&v.isPopulated?t.push(v.item):e.playableKey&&t.push(C(w({},d.c),{sourceURI:e.playableKey,title:e.title})),t}),[e.playableKey,e.title,h.availabilities.serverAvailabilities,h.isPending,v.isPending,v.isPopulated,v.item,S.isPopulated]),I=(0,n.useMemo)((()=>{const e=v.isPopulated&&h.isPopulated,t=v.isPending||h.isPending,r=v.error||h.error;return{items:P,isPopulated:e,isPending:t,error:r}}),[h.error,h.isPending,h.isPopulated,P,v.error,v.isPending,v.isPopulated]);return n.createElement(O.Provider,{value:I},t)}function D({children:e,metadataItem:t,skipFetch:r=!0}){const i=!(!(0,s.useGate)(h.iQ.DiscoverVODUnification).value||r||!t.playableKey);return t.isExtra||!(0,l.c)(t)?n.createElement(O.Provider,{value:{items:[t],isPopulated:!0,isPending:!1,error:null}},e):i?n.createElement(T,{metadataItem:t},e):n.createElement(O.Provider,{value:{items:[],isPopulated:!0,isPending:!1,error:null}},e)}},57473:(e,t,r)=>{"use strict";r.d(t,{c:()=>ae});var n=r(11504),i=r(27876),s=r(85448),a=r(58660),o=r(72524),c=r(49756),l=r(3008),d=r(14252),u=r(66780),p=r(35860),m=r(21248),h=r(85976),y=r(98352),g=r(59396),f=r(419),v=r(90012),b=r(87440),S=r(30388),P=r(52008),I=r(38320),E=r(53588),w=r(37864),C=r(72772),O=r(87980),M=r(77192),T=r(26044),D=r(96048),k=r(70944),x=r(74364),A=r(17464),R=r(37984),N=r(1872),L=r(39968),j=r(71604),U=r(72080),F=r(86564),V=r(35060),_=r(36820),W=r(69080);function B({metadataItem:e,isDisabled:t,isPrimary:r,title:i}){const{isPending:s}=(0,_.Q)(),{onPlayPress:a,playModal:o}=(0,O.c)(e),[c,l]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>{c||(s?l(!0):a())}),[s,c,a]);return(0,n.useEffect)((()=>{!s&&c&&(l(!1),a())}),[s,c,a]),n.createElement(n.Fragment,null,n.createElement(N.c,{icon:W.default,isDisabled:t,isLabeled:r,isPrimary:r,isWaiting:c,testID:"preplay-play",title:i,onPress:d}),o)}var H=r(85920),z=r(62120),G=r(57864),q=r(22140),K=r(60872);const Q=function(e){return(0,G.M3)((0,q.c)(e),K.c,((e,t)=>!!e.deletedAt||t.metadata.isMediaFileUnavailable))};var $=r(61488),Y=Object.defineProperty,X=Object.defineProperties,J=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,re=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ne=(e,t)=>{for(var r in t||(t={}))ee.call(t,r)&&re(e,r,t[r]);if(Z)for(var r of Z(t))te.call(t,r)&&re(e,r,t[r]);return e},ie=(e,t)=>X(e,J(t));function se({isPrimary:e,isDisabled:t,action:r,metadataItem:i,metadataItemState:c,onDeckMetadataItemState:l,isMediaFileUnavailable:d}){const[u,p]=(0,R.c$)(),h=(0,M.m)({server:u,provider:p,metadataItem:i,metadataItemState:c}),{isPending:v}=(0,_.Q)(),{onAutoPlay:b,onPlayPress:P,onShufflePress:I}=(0,O.c)(i),E=(0,s.Uz)(),w=(0,s.IT)(),C=(0,L.c)(),D=(0,n.useCallback)((()=>{h(S.GW())}),[h]);switch((0,n.useEffect)((()=>{(0,y.c)(C.autoplay)&&"isPlayVisible"===r&&!d&&(E.replace(w.pathname+(0,f.c)(w.search,"autoplay")),b())}),[r,E,d,w.pathname,w.search,b,C.autoplay]),(0,n.useEffect)((()=>{if("isPlayVisible"===r&&!v)return m.c.on("shortcut:playSelected",P),()=>{m.c.off("shortcut:playSelected",P)}})),r){case"isPlayVisible":return d?n.createElement(a.q,{color:"alert",disabled:t,label:(0,g.c)("Unavailable"),size:"s",onPress:D}):n.createElement(B,{isDisabled:t,isPrimary:e,metadataItem:i,title:(0,T.c)(i,c,l)});case"isShuffleVisible":return n.createElement(N.c,{icon:o.default,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-shuffle",title:(0,g.c)("Shuffle"),onPress:I})}return null}function ae({metadataItem:e,promotedActions:t,isChromaMetadata:r}){var s;const a=(0,i.OY)(),o=(0,b.c)(),[y,f]=(0,n.useState)(!1),[O,T]=(0,R.c$)(),L=(0,i.w1)(F.c),{metadata:{isStale:W}}=(0,i.w1)(K.c),B=(0,n.useRef)(null),{isPending:G}=(0,_.Q)(),[q,Y]=(0,n.useState)(!1),X=(0,i.w1)(d.c),J=p.SI(T.identifier),Z=(0,i.w1)((0,A.c)(p.Im,J)),ee=(0,n.useMemo)((()=>(0,h.c)({key:e.key,serverIdentifier:O.machineIdentifier,providerIdentifier:T.identifier})),[e.key,T.identifier,O.machineIdentifier]),te=(0,C.c)(ee),re=(0,C.c)(null==(s=e.onDeck)?void 0:s.sourceURI),{discoverProviderSourceURI:ae,discoverProviderItemState:oe}=(0,E.c)(e),ce=(0,V.c)(v.s.IncludeSocialProof),le=(0,n.useMemo)((()=>W||(0,x.c)({type:e.type,sourceURI:e.sourceURI,metadataItemState:te})),[W,e,te]),de=(0,n.useMemo)((()=>!O.isCloud&&(W||(0,k.c)({server:O,type:e.type,sourceURI:ae,metadataItemState:oe}))),[oe,ae,W,e.type,O]),ue=(0,n.useMemo)((()=>Q(e.sourceURI)),[e.sourceURI]),pe=(0,i.w1)(ue),me=(0,j.c)(e),he=(0,M.m)({server:O,provider:T,metadataItem:e,metadataItemState:te}),ye=(0,w.c)(e),ge=(0,n.useMemo)((()=>(!ce&&ye.isShareVisible&&delete ye.isShareVisible,ye)),[ye,ce]),fe=function(e,t){return Object.keys(e).reduce(((r,n)=>{const i=n;return r[i]=!t.includes(i)&&e[i],r}),{})}(ge,t),ve=(0,n.useCallback)((()=>{q||(G?Y(!0):f(!y))}),[y,G,q]),be=(0,n.useCallback)((()=>{f(!1)}),[]),Se=(0,n.useCallback)((()=>{me({action:u.yO}),he(S.GW())}),[he,me]);(0,n.useEffect)((()=>{!G&&q&&(Y(!1),f(!y))}),[y,G,q]),(0,n.useEffect)((()=>{if(ge.isGetInfoVisible)return m.c.on("shortcut:info",Se),()=>{m.c.off("shortcut:info",Se)}}),[ge.isGetInfoVisible,Se]),(0,n.useEffect)((()=>{le&&a(D.c.actions.fetchRequested({server:O,provider:T,metadataItem:ie(ne({},e),{sourceURI:ee})}))}),[a,e,ee,T,O,le]),(0,n.useEffect)((()=>{!O.isCloud&&Z&&ae&&de&&a(D.c.actions.fetchRequested({server:X,provider:Z,metadataItem:ie(ne({},e),{sourceURI:ae})}))}),[X,Z,ae,a,e,O.isCloud,de]);const Pe=Object.keys(fe).some((e=>"isRateVisible"!==e&&"isShareVisible"!==e&&"isRemoveFromContinueWatchingVisible"!==e&&fe[e]));return 0===Object.keys(ge).filter((e=>ge[e])).length?null:n.createElement(l.ye,{ref:B,align:["center","left"],gap:"xs",minHeight:40,orientation:"horizontal",wrap:!0},t.filter((e=>ge[e])).map(((t,r)=>{if("isMarkUnplayedVisible"===t&&ge.isMarkPlayedVisible)return null;const i=["isPlayVisible","isShuffleVisible"].includes(t)?se:H.c;return n.createElement(U.c,{key:t,errorComponent:z.c},n.createElement(i,{action:t,isDisabled:L,isMediaFileUnavailable:pe,isPrimary:0===r,metadataItem:e,metadataItemState:te,onDeckMetadataItemState:re}))})),Pe?n.createElement(N.c,{icon:c.default,id:o,isDisabled:L,isWaiting:q,testID:"preplay-more",title:(0,g.c)("More"),onPress:ve}):null,ge.isRateVisible&&!r?n.createElement(I.c,{className:$.c.userRating,disabled:L,metadataItem:e}):null,n.createElement(P.c,{actionsOverride:fe,className:$.c.menu,isOpen:y,metadataItem:e,target:o,onMenuClose:be}))}},61272:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var n=r(11504),i=r(27876),s=r(38320),a=r(86564);const o={userRating:"PrePlayMetadataTitleUserRating-userRating-NGOpE4"};function c({metadataItem:e}){const t=(0,i.w1)(a.c);return n.createElement(s.c,{className:o.userRating,disabled:t,metadataItem:e})}},74760:(e,t,r)=>{"use strict";r.d(t,{c:()=>V});var n=r(11504),i=r(41128),s=r(11164),a=r(72772),o=r(49124),c=r(93808),l=r(4388),d=r(95976),u=r(27876),p=r(92456),m=r(88208),h=r(60952),y=r(3008),g=r(35860),f=r(42728),v=r(83052),b=r(59396),S=r(17068),P=r(21372),I=r(53588),E=r(7060),w=r(12624),C=r(57864),O=r(66308),M=r(26932);const T=function(e,t){return(0,C.M3)((0,M.c)(e),(e=>e.find((e=>e.type===O.y8&&e.Context.itemKey&&e.Context.itemKey===t.key))))};var D=r(37984),k=r(29532),x=r(34328);const A={status:"PrePlayPosterCardPlayedStatus-status-bp2tOy",label:"PrePlayPosterCardPlayedStatus-label-kYDDdP"};function R({children:e}){return n.createElement("div",{className:A.status},n.createElement(y.ye,{align:"center",gap:"xs",orientation:"horizontal",verticalAlign:"center"},e))}function N({children:e}){return n.createElement("span",{className:A.label},e)}function L({metadataItem:e,metadataItemState:t}){const{onDeck:r}=e,{viewOffset:i,unviewedLeafCount:s}=t,[a,o]=(0,D.c$)(),c=g._u(o.identifier,g.Im),l=(0,u.w1)((0,x.c)(f.aQ)),d=(0,u.w1)((0,x.c)(f.o5)),y=(0,u.w1)(T(a,e)),{discoverProviderItemState:C}=(0,I.c)(e);return(0,E.c)(e)?t.subscriptionID||t.grandparentSubscriptionID?n.createElement(R,null,t.grandparentSubscriptionType?n.createElement(k.c,{subscriptionType:t.grandparentSubscriptionType}):null,t.subscriptionType&&!t.grandparentSubscriptionType?n.createElement(k.c,{subscriptionType:t.subscriptionType}):null,n.createElement(N,null,y?(0,b.c)("Recording"):(0,b.c)("Scheduled"))):null:!c&&r&&s?n.createElement(R,null,n.createElement(N,null,(0,b.c)("On Deck"),n.createElement(S.c,null),(0,v.c)({seasonIndex:r.parentIndex,episodeIndex:r.index,date:r.originallyAvailableAt,noLeadingZero:!0,separator:"  "}))):!c&&i?n.createElement(R,null,n.createElement(N,null,n.createElement(P.c,{metadataItem:e}))):C.watchlistedAt?n.createElement(R,null,n.createElement(p.default,{color:"accent"}),n.createElement(N,null,(0,b.c)("In Watchlist"))):l&&(0,w.c)(e,t)?n.createElement(R,null,d?n.createElement(m.default,null):n.createElement(h.y,null),n.createElement(N,null,(0,b.c)("Watched"))):null}const j={posterContainer:"PrePlayPosterCard-posterContainer-EeqzUR"},U=250,F=300;function V({aspectRatio:e,metadataItem:t,isChromaMetadata:r,isProgressBarHidden:u,posterWidth:p=U}){const m=(0,d.c)(),h=(0,a.c)(t.sourceURI),y=(0,o.c)(t.sourceURI),g=null!=e?e:(0,l.cp)(t.type,t.subtype),f=r&&!p?m:p;return n.createElement("div",{className:r?void 0:j.posterContainer},t.type===c.WW.Person?n.createElement(i.c,{metadataItem:t,width:f}):n.createElement(n.Fragment,null,n.createElement(s.c,{aspectRatio:g,isPlayButtonCard:!0,isPlayedStatusHidden:!0,isProgressBarHidden:u,isSelectHidden:!0,metadataItem:t,metadataItemState:h,metadataTimelineState:y,width:g===l.cr?F:f}),n.createElement(L,{metadataItem:t,metadataItemState:h})))}},85920:(e,t,r)=>{"use strict";r.d(t,{c:()=>be});var n=r(11504),i=r(27876),s=r(792),a=r(94512),o=r(53848),c=r(1480),l=r(58860),d=r(52144),u=r(32208),p=r(45676),m=r(47312),h=r(35688),y=r(19264),g=r(16852),f=r(66780),v=r(21248),b=r(85976),S=r(59396),P=r(1868),I=r(96504),E=r(24752),w=r(55588),C=r(87440),O=r(30388),M=r(77460),T=r(77192),D=r(66136),k=r(61511),x=r(75188),A=r(63856),R=r(96048),N=r(51304),L=r(37984),j=r(1872),U=r(81180),F=r(29208),V=r(71604),_=r(20004),W=r(16304),B=r(69112),H=r(54464),z=r(11884),G=r(42940);function q({metadataItem:e,isDisabled:t,isLabeled:r,isPrimary:i}){const s=(0,n.useCallback)(((s,a,o)=>n.createElement(n.Fragment,null,n.createElement(G.c,{metadataItem:e}),n.createElement(j.c,{icon:s?B.default:H.default,isDisabled:t||a,isLabeled:r,isPrimary:i,testID:s?"preplay-delete-download":"preplay-download",title:s?(0,S.c)("Delete Download"):(0,S.c)("Download"),onPress:o}))),[t,r,i,e]);return n.createElement(z.c,{metadataItem:e,render:s})}var K=r(85448),Q=r(92456),$=r(3728),Y=r(70508),X=r(84508),J=r(419),Z=r(53588),ee=r(72772),te=r(17884),re=r(92756),ne=r(39968),ie=r(37008);function se({metadataItem:e,added:t,isDisabled:r,isPrimary:s}){const[a]=(0,L.c$)(),o=(0,K.Uz)(),c=(0,K.IT)(),l=(0,ne.c)(),d=(0,i.w1)(Y.c),{onAddToWatchlistPress:u,onRemoveFromWatchlistPress:p,onToggleWatchlist:m,showTrackingModal:h}=(0,te.c)(e,X.PRE_PLAY),y=(0,ee.c)(e.sourceURI),{discoverProviderItemState:g}=(0,Z.c)(e),f=!(!y.isPopulated&&!y.error),v=!(!a.isCloud&&g&&!g.isPopulated&&!g.error);return(0,n.useEffect)((()=>{(0,ie.c)(l.wl)&&t&&!d&&o.replace(c.pathname+(0,J.c)(c.search,"wl"))}),[t,o,d,c.pathname,c.search,l.wl]),(0,n.useEffect)((()=>{(0,ie.c)(l.wl)&&!t&&f&&v&&!d&&(o.replace(c.pathname+(0,J.c)(c.search,"wl")),m({added:!0,showToastOnAdded:!0}))}),[t,o,d,v,f,c.pathname,c.search,m,l.wl]),n.createElement(n.Fragment,null,n.createElement(j.c,{icon:t?Q.default:$.default,isDisabled:r||!f||!v,isLabeled:s&&f&&v,isPrimary:s,testID:t?"preplay-removeFromWatchlist":"preplay-addToWatchlist",title:(0,re.c)(e.type,t),onPress:t?p:u}),h)}var ae=r(34892),oe=r(9868),ce=r(37492),le=r(44688),de=r(3544),ue=r(87616),pe=r(29164),me=r(8684),he=r(112);const ye=function({isDisabled:e,isPrimary:t,metadataItem:r,metadataItemState:s}){const a=(0,i.OY)(),o=(0,i.w1)(pe.c),c=(0,i.w1)(ue.c),l=(0,oe.y)(),d=(0,me.c)(),u=(0,n.useMemo)((()=>`library/metadata/${(0,ce.c)(r.guid)}`),[r.guid]),{isPending:p,isPopulated:m,error:h,item:{publicPagesURL:y}}=(0,i.w1)((0,de.c)(u)),g=(0,n.useCallback)((()=>{d({action:f.wx}),l.onToggle()}),[l,d]),v=s.isPopulated||s.error;return(0,n.useEffect)((()=>{!c||r.publicPagesURL||p||m||h||a(le.c.actions.fetchMetadataItem({server:o,provider:c,key:u}))}),[a,p,m,r.publicPagesURL,h,c,u,o]),p||!r.publicPagesURL&&!y?null:n.createElement(n.Fragment,null,n.createElement(j.c,{icon:ae.default,isDisabled:e||!v,isLabeled:t,isPrimary:t,testID:"preplay-shareWithFriendsAction",title:(0,S.c)("Share with Friends"),onPress:g}),n.createElement(he.c,{children:null,item:r,modalState:l}))};var ge=r(53036),fe=r(78112),ve=r(61488);const be=function({isPrimary:e,isDisabled:t,action:r,metadataItem:B,metadataItemState:H}){const z=(0,i.OY)(),{metricsPage:G,metricsContextTuple:K}=(0,F.e0)(),[Q,$]=(0,L.c$)(),{containerServer:Y,containerProvider:X}=(0,N.qy)(),J=(0,i.w1)(y.c),Z=(0,T.m)({server:Q,provider:$,metadataItem:B,metadataItemState:H}),ee=(0,D.i)({containerServer:Y,containerProvider:X,server:Q,provider:$,metadataItem:B,metadataItemState:H,metricsPage:G,metricsContextTuple:K}),te=(0,V.c)(B),re=H.isPopulated||H.error,ne=(0,n.useCallback)((()=>{te({action:f.Sg}),ee(h.M7())}),[ee,te]),ie=(0,n.useCallback)((()=>{te({action:f.IL}),ee(h.Gm({playlistType:P.KI}))}),[ee,te]),ae=(0,n.useCallback)((()=>{te({action:f.EV}),z(R.c.actions.toggleSavedRequested({server:Q,provider:$,stableUser:J,sourceURI:B.grandparentKey?(0,b.c)({serverIdentifier:Q.machineIdentifier,providerIdentifier:$.identifier,key:B.grandparentKey}):B.sourceURI,ratingKey:B.grandparentRatingKey||B.ratingKey,saved:!0}))}),[z,B.grandparentKey,B.grandparentRatingKey,B.ratingKey,B.sourceURI,$,Q,J,te]),oe=(0,n.useCallback)((e=>{te({action:e?f.Mp:f.Yj}),z(R.c.actions.playedStatusUpdateRequested({server:Q,provider:$,stableUser:J,sourceURI:B.sourceURI,ratingKey:B.ratingKey,guid:B.guid,played:e}))}),[te,B,z,Q,$,J]),ce=(0,U.c)(),le=(0,n.useCallback)((()=>{oe(!0),ce.onClose()}),[ce,oe]),de=(0,U.c)(),ue=(0,n.useCallback)((()=>{oe(!1),de.onClose()}),[de,oe]),pe=(0,U.c)(),me=(0,U.c)(),he=(0,U.c)(),be=(0,C.c)(),Se=(0,n.useCallback)((()=>{te({action:f.SU}),Z(O.W_())}),[Z,te]),Pe=(0,n.useCallback)((()=>{"isMarkPlayedVisible"===r?ce.onOpen():de.onOpen()}),[r,ce,de]),Ie=(0,n.useCallback)((()=>{te({action:f.cZ});const e=window.location.href,t=window.location.origin+window.location.pathname,r=B.ratingKey;window.location.href=I.c.join(g.Ap,{forwardUrl:e,watchNowUrl:e,watchLaterUrl:t,metadataID:r})}),[B.ratingKey,te]);switch((0,n.useEffect)((()=>{if("isEditVisible"===r)return v.c.on("shortcut:edit",Se),()=>{v.c.off("shortcut:edit",Se)}})),(0,n.useEffect)((()=>{if("isMarkPlayedVisible"===r||"isMarkUnplayedVisible"===r)return v.c.on("shortcut:togglePlayed",Pe),()=>{v.c.off("shortcut:togglePlayed",Pe)}})),r){case"isPlayTrailerVisible":return n.createElement(j.c,{icon:s.default,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-trailer",title:(0,S.c)("Play Trailer"),onPress:ne});case"isPlayRadioVisible":return n.createElement(j.c,{icon:a.default,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-radio",title:(0,S.c)("Play Radio"),onPress:ie});case"isMarkPlayedVisible":case"isMarkUnplayedVisible":{const i="isMarkUnplayedVisible"===r;return n.createElement(n.Fragment,null,n.createElement(j.c,{icon:i?o.default:c.default,isDisabled:t||!re,isLabeled:e,isPrimary:e,testID:"preplay-togglePlayedState",title:(0,A.c)(B.type,i),onPress:i?de.onOpen:ce.onOpen}),n.createElement(ge.c,{isOpen:i?de.isOpen:ce.isOpen,leafCount:i?H.viewedLeafCount:H.unviewedLeafCount,markUnplayed:de.isOpen,subtype:B.subtype,title:B.title,type:B.type,onCancel:i?de.onClose:ce.onClose,onConfirm:i?ue:le}))}case"isAddToSavedVisible":return n.createElement(j.c,{icon:l.default,isDisabled:t||!re,isLabeled:e,isPrimary:e,testID:"preplay-addToSaved",title:(0,k.c)(H.saved),onPress:ae});case"isAddToWatchlistVisible":case"isRemoveFromWatchlistVisible":return n.createElement(se,{added:"isRemoveFromWatchlistVisible"===r,isDisabled:t,isPrimary:e,metadataItem:B});case"isRentVisible":return re?n.createElement(j.c,{icon:d.default,isLabeled:e,isPrimary:e,title:(0,S.c)("Rent for {price}",{price:B.rentalPrice}),onPress:Ie}):null;case"isAddToPlaylistVisible":return n.createElement(n.Fragment,null,n.createElement(j.c,{icon:u.default,id:be,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-addToPlaylist",title:(0,S.c)("Add to..."),onPress:he.onToggle}),n.createElement(W.c,{defaultDestinationSource:B.source,defaultTitle:B.title,isOpen:me.isOpen,mediaType:(0,x.c)(B.type,B.subtype),sourceURI:B.sourceURI,onModalClose:me.onClose}),n.createElement(E.c,{className:ve.c.menu,isOpen:he.isOpen,target:be,onMenuClose:he.onClose},n.createElement(_.c,{mediaType:(0,x.c)(B.type,B.subtype),provider:$,server:Q,sourceURI:B.sourceURI,onAddToPlaylistPress:me.onOpen,onMenuClose:he.onClose})));case"isSyncDownloadVisible":return n.createElement(q,{isDisabled:t,isLabeled:e,isPrimary:e,metadataItem:B});case"isEditVisible":return n.createElement(j.c,{icon:p.default,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-edit",title:(0,S.c)("Edit"),onPress:Se});case"isRecordVisible":{const r=H.grandparentSubscriptionType||H.subscriptionType||B.type;return n.createElement(n.Fragment,null,n.createElement(j.c,{icon:m.default,isDisabled:t,isLabeled:e,isPrimary:!0,testID:"preplay-record",title:null==H.grandparentSubscriptionID&&null==H.subscriptionID?(0,S.c)("Record"):(0,S.c)("Modify"),onPress:pe.onOpen}),n.createElement(M.c,{metadataItem:B,metadataItemState:H},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:i,onMarkStale:s})=>n.createElement(fe.c,{isOpen:pe.isOpen,metadataItemEntityID:i,metricsProperties:{page:G,contextTuple:K},providerEntityID:t,serverEntityID:e,subscriptionType:r,onModalClose:(0,w.c)(s,pe.onClose)}))))}case"isShareVisible":return B.guid?n.createElement(ye,{isDisabled:t,isPrimary:e,metadataItem:B,metadataItemState:H}):null}return null}},62120:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(58660),s=r(87396),a=r(96856),o=r(59396),c=r(23812);const l=function(){const e=(0,o.c)("An unexpected error is impacting this action");return n.createElement(c.c,{errorMessage:`${e}.`},n.createElement(a.o,{placement:"right",tooltip:e},n.createElement(i.wP,{accessibilityLabel:e,color:"alert",icon:s.default,iconSize:"l",insetFocus:!0,transparent:!0})))}},66484:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(59396);function i(e){return e.isUnreleased&&!e.title?(0,n.c)("To Be Announced"):e.title}},69160:(e,t,r)=>{"use strict";r.d(t,{c:()=>de});var n=r(11504),i=r(27876),s=r(58660),a=r(2451),o=r(3008),c=r(96856),l=r(72528),d=r(89448),u=r(59396),p=r(70592),m=r(47392),h=r(6900),y=r(67532),g=r(74076),f=r(31920),v=r(47036),b=r(43196),S=r(34008),P=r(22732),I=r(86564),E=r(68392),w=r(26080),C=r(37984),O=r(29208),M=r(73048),T=r(17068),D=r(24752),k=r(87808),x=r(20900),A=r(93808),R=r(2708),N=r(60872);function L(){const{siblingListSourceURI:e}=(0,i.w1)(N.c),t=(0,n.useMemo)((()=>e?(0,R.c)(e):()=>{}),[e]);return(0,i.w1)(t)}var j=r(33316),U=r(27768),F=r(39172);function V({server:e,provider:t,metadataItem:r,metricsContextTuple:i}){const a=(0,U.c)(),o=L();if(!o)return null;const{items:c}=o,l=!r;return n.createElement(n.Fragment,null,n.createElement(s._M,{disabled:l,id:a.menuButtonID,isOpen:a.isMenuOpen,onPress:a.onMenuButtonPress},n.createElement(M.default,{size:v.y.iconSize})),n.createElement(D.c,{isOpen:a.isMenuOpen,size:k.OM,target:a.menuButtonID,onMenuClose:a.onMenuClose},c.map((s=>n.createElement(j.c,{key:s.key,isSelected:s.key===(null==r?void 0:r.key),to:(0,F.c)(e,t,s.key,{context:(0,O.QN)(i)},null==r?void 0:r.playlistType),onPress:a.onMenuClose},s.type===A.WW.Episode?n.createElement(n.Fragment,null,n.createElement(x.c,{metadataItem:s}),n.createElement(T.c,null)):null,s.title)))))}var _=Object.defineProperty,W=Object.defineProperties,B=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&q(e,r,t[r]);if(H)for(var r of H(t))G.call(t,r)&&q(e,r,t[r]);return e},Q=(e,t)=>W(e,B(t));function $({metadataItem:e}){const[t,r]=(0,C.c$)(),{metricsContextTuple:i}=(0,O.e0)(),a=L();if(!a||a.items.length<2)return null;const{items:c}=a,l=c.findIndex((t=>t.key===(null==e?void 0:e.key))),d=l<0?l:l+1,p=c[l<0?l:l-1],m=c[d],h={context:(0,O.QN)(i)},y=(0,F.c)(t,r,null==p?void 0:p.key,h),g=(0,F.c)(t,r,null==m?void 0:m.key,h);return n.createElement(o.ye,{align:"center",height:"100%",orientation:"horizontal",verticalAlign:"center"},n.createElement(f.E,null),n.createElement(s.eE,Q(K({},v.y),{accessibilityLabel:(0,u.c)("Previous"),disabled:!y,href:y||".",icon:E.default,testID:"toolbarPrevious"})),n.createElement(V,{metadataItem:e,metricsContextTuple:i,provider:r,server:t}),n.createElement(s.eE,Q(K({},v.y),{accessibilityLabel:(0,u.c)("Next"),disabled:!g,href:g||".",icon:w.default,testID:"toolbarNext"})))}var Y=r(9120),X=r(99348),J=r(75020),Z=r(92796);const ee={pageHeader:"PrePlayPageHeader-pageHeader-cbV9fy PageHeader-pageHeader-e2k66t",attribution:"PrePlayPageHeader-attribution-NtVyAd"};var te=Object.defineProperty,re=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ce=(e,t)=>{for(var r in t||(t={}))se.call(t,r)&&oe(e,r,t[r]);if(ie)for(var r of ie(t))ae.call(t,r)&&oe(e,r,t[r]);return e},le=(e,t)=>re(e,ne(t));function de(){const e=(0,i.OY)(),t=(0,S.c)(),{metadata:{metadataItem:r,isPopulated:E}}=(0,i.w1)(N.c),w=(0,i.w1)((0,b.c)("showPrePlayArtwork")),C=(0,i.w1)((0,b.c)("prePlayListStyles")),O=(0,i.w1)(X.c),M=(0,i.w1)(Y.c),T=(0,i.w1)(J.c),D=w?(0,u.c)("Blur Background"):(0,u.c)("Show Background"),k=(0,n.useCallback)((t=>{if(!O)return;const r=le(ce({},C),{[O]:t});(0,d.SS)((()=>{e((0,l.SI)({prePlayListStyles:r}))}))}),[e,C,O]),x=(0,i.w1)(I.c),A=(0,n.useCallback)((()=>{e((0,l.SI)({showPrePlayArtwork:!w}))}),[e,w]);return x?n.createElement(P.c,null):n.createElement(Z.c,{className:ee.pageHeader},n.createElement(p.c,null,E?n.createElement(g.c,null):null),n.createElement(m.c,null,(null==r?void 0:r.grandparentArt)||(null==r?void 0:r.parentArt)||(null==r?void 0:r.art)?n.createElement(o.ye,{height:"100%",orientation:"horizontal",verticalAlign:"center"},n.createElement(c.o,{tooltip:D},n.createElement(s.wP,le(ce({},v.y),{accessibilityLabel:D,color:w?"accent":void 0,icon:a.default,onPress:A}))),t?null:n.createElement(f.E,null)):null,t?null:n.createElement(n.Fragment,null,M&&T.length>1?n.createElement(h.c,{listStyles:T,selectedListStyle:M,onListStyleSelect:k}):n.createElement(h.c,{listStyles:[y.y.PrePlayGrid],selectedListStyle:y.y.PrePlayGrid}),n.createElement($,{metadataItem:r}))))}},18188:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(3008),s=r(41744),a=r(42152),o=r(77072),c=r(2024),l=r(83660),d=r(46896),u=r(11638),p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;const y=function(e){var t=e,{server:r,serverSettings:y,provider:g,contentDirectory:f,metadataItem:v,item:b,posterDurationMilliseconds:S}=t,P=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["server","serverSettings","provider","contentDirectory","metadataItem","item","posterDurationMilliseconds"]);const I=(0,d.c)(P),E=P.cellWidth,w=(0,n.useMemo)((()=>{if(b)return(0,u.cp)({contentDirectory:f,metadataItem:v,provider:g,server:r,serverSettings:y,tag:b})}),[f,b,v,g,r,y]);if(!b)return null;const{role:C,tag:O}=b;return n.createElement("div",{ref:I.cellRef,style:I.style},n.createElement(a.a2,{width:E},n.createElement(a.mw,{posterStyle:"circle",width:E},(null==b?void 0:b.thumb)?n.createElement(l.S,{fit:c.A.Cover,height:E,posterStyle:"circle",server:r,url:b.thumb,width:E}):n.createElement(a._,{name:O,width:E}),w?n.createElement(a.ic,{href:w,posterStyle:"circle"}):null),n.createElement(a.oD,{posterStyle:"circle"},n.createElement(i.ye,{align:"center",gap:"none",width:"100%"},w?n.createElement(s.c,{href:w,title:O},n.createElement(o.a,{font:"body-2",numberOfLines:1},O)):n.createElement(o.a,{font:"body-2",numberOfLines:1},O),C?n.createElement(o.a,{color:"muted",font:"body-2",numberOfLines:1},C):null))))}},95976:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(47612);function i(){return(0,n.c)()?191:299}},6872:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(27876),s=r(14252),a=r(35860),o=r(37492),c=r(90012),l=r(17464),d=r(52513),u=r(37984),p=r(58896),m=r(35060),h=r(23236),y=r(60872);function g(){const e=(0,i.OY)(),[t,r]=(0,u.c$)(),g=(0,i.w1)(s.c),f=a.SI(r.identifier),v=(0,i.w1)((0,l.c)(a.Im,f)),{metadata:{metadataItem:b},credits:{isPopulated:S,error:P}}=(0,i.w1)(y.c),{settings:I,isPopulated:E}=(0,i.w1)((0,d.c)(t.machineIdentifier,null==b?void 0:b.librarySectionID)),w=null==I?void 0:I.some((e=>e.id===p.aM.IncludeAdultContent&&e.value)),C=(0,m.c)(c.s.IncludeDiscoverSource),O=(0,o.c)(null==b?void 0:b.guid);(0,n.useEffect)((()=>{O&&g&&v&&(C||t.isCloud)&&(t.isCloud||E)&&!w&&!S&&!P&&e(h.c.actions.creditsFetchRequested({server:g,provider:t.isCloud?r:v,metadataKey:`/library/metadata/${O}`}))}),[g,P,v,e,w,S,C,E,r,O,t.isCloud])}},47612:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(){return window.innerWidth<601}function s(){const[e,t]=(0,n.useState)(i());return(0,n.useEffect)((()=>{function e(){t(i())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}},22968:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(85448),i=r(95460);function s(){return!!(0,n.SU)({path:[...i.c.prePlay,...i.c.prePlayActivityFeed,...i.c.prePlayCredits],exact:!0})}},80208:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(14824),a=r(31636),o=r(4668),c=r(43196),l=r(60872);const d=function(e,t){const r=(0,i.OY)(),{metadata:{metadataItem:d}}=(0,i.w1)(l.c),u=(0,i.w1)((0,o.c)(e)),p=(0,i.w1)((0,a.c)(e,t)),m=(0,i.w1)((0,c.c)("showPrePlayArtwork"));(0,n.useEffect)((()=>{if(!d||!u||!p)return;const e=d.thumb||d.parentThumb||d.grandparentThumb,t=d.grandparentArt||d.parentArt||d.art,n=m?t||e:e||t;r((0,s.ac)({serverEntityID:u.entityID,providerEntityID:p.entityID,imageUrl:n,allowBlur:!m||!t}))}),[r,d,p,u,m])}},18012:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(27876),s=r(85448),a=r(13778),o=r(35860),c=r(85976),l=r(69956),d=r(89448),u=r(96504),p=r(72772),m=r(23236),h=r(60872),y=r(95460);const g=function(e,t,r){const g=(0,s.Uz)(),f=(0,i.OY)(),{metadata:{metadataItem:v,isStale:b}}=(0,i.w1)(h.c),S=(0,p.c)((0,c.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:r}));return(0,n.useEffect)((()=>{S.isDeleted?f((0,a.eo)({replace:!0})):!e.isConnected||!t.isPopulated||r===(null==v?void 0:v.key)&&o._u((0,l.c)(null==v?void 0:v.sourceURI).providerIdentifier,t.identifier)||f(m.c.actions.metadataItemFetchRequested({server:e,provider:t,metadataKey:r}))}),[r,null==v?void 0:v.sourceURI,S.isDeleted,t.isPopulated,e.isConnected]),(0,n.useEffect)((()=>()=>{(!(0,s.ot)(g.location.pathname,[...y.c.prePlay,...y.c.prePlayActivityFeed,...y.c.prePlayCredits])||u.c.parseUri(g.location.search).params.key!==r||e.isCloud&&!g.location.pathname.includes(t.identifier))&&(0,d.SS)((()=>{f(m.c.actions.reset())}))}),[f,g.location,r,t.identifier,e.isCloud]),(0,n.useEffect)((()=>{(b||S.isStale)&&f(m.c.actions.metadataItemRepopulateRequested({server:e,provider:t}))}),[b,S.isStale]),S}},67980:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(27876),s=r(2708),a=r(60872);function o(){const{descendantListSourceURI:e}=(0,i.w1)(a.c),t=(0,n.useMemo)((()=>e?(0,s.c)(e):()=>{}),[e]);return(0,i.w1)(t)}},23236:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(44212),i=r(85976),s=r(66308),a=r(93808),o=r(96048),c=r(81996),l=r(34956),d=r(87220),u=r(45372),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b={descendantListSourceURI:void 0,siblingListSourceURI:void 0,popularLeavesSourceURI:void 0,extrasSourceURI:void 0,metadata:{metadataItem:void 0,isMediaFileUnavailable:!1,isStale:!1,isPending:!1,isPopulated:!1,error:null},related:{hubs:[],isPending:!1,isPopulated:!1,error:null},augmented:{hubs:[],isPending:!1,isPopulated:!1,error:null},credits:{groups:[],isPending:!1,isPopulated:!1,error:null},creditSources:{sourcesByGUID:{},isPending:!1,isPopulated:!1,error:null}};function S(e,t,r){var n;const{type:a,Context:o}=r;a===s.Gi&&(0,i.c)({serverIdentifier:t.machineIdentifier,key:o.key})===(null==(n=e.metadata.metadataItem)?void 0:n.sourceURI)&&(o.exists&&o.accessible?e.metadata.isMediaFileUnavailable=!1:!1!==o.exists&&!1!==o.accessible||(e.metadata.isMediaFileUnavailable=!0))}const P=(0,n.is)({name:"prePlay",initialState:b,reducers:{reset(e){return t=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e})({},b),r={siblingListSourceURI:e.siblingListSourceURI,creditSources:{sourcesByGUID:e.creditSources.sourcesByGUID,isPending:!1,isPopulated:!1,error:null}},m(t,h(r));var t,r},metadataItemFetchRequested(e,t){(0,u.G8)(e.metadata)},metadataItemFetchSucceeded(e,{payload:t}){(0,u.mM)(e.metadata),e.descendantListSourceURI=t.descendantListSourceURI,e.siblingListSourceURI=t.siblingListSourceURI,e.popularLeavesSourceURI=t.popularLeavesSourceURI,e.extrasSourceURI=t.extrasSourceURI,e.metadata.metadataItem=t.metadataItem,e.metadata.isStale=!1},metadataItemFetchFailed(e,{payload:t}){(0,u.C)(e.metadata,t.error)},metadataItemRepopulateRequested(e,t){(0,u.G8)(e.metadata)},relatedHubsFetchRequested(e,t){(0,u.G8)(e.related)},relatedHubsFetchSucceeded(e,{payload:t}){(0,u.mM)(e.related),e.related.hubs=t.hubs},relatedHubsFetchFailed(e,{payload:t}){(0,u.C)(e.related,t.error)},augmentedHubsFetchRequested(e,t){(0,u.G8)(e.augmented)},augmentedHubsFetchSucceeded(e,{payload:t}){(0,u.mM)(e.augmented),e.augmented.hubs=t.hubs},augmentedHubsFetchFailed(e,{payload:t}){(0,u.C)(e.augmented,t.error)},creditsFetchRequested(e,t){(0,u.G8)(e.credits)},creditsFetchSucceeded(e,{payload:t}){(0,u.mM)(e.credits),e.credits.groups=t.groups},creditsFetchFailed(e,{payload:t}){(0,u.C)(e.credits,t.error)},creditSourcesFetchRequested(e,t){(0,u.G8)(e.creditSources)},creditSourcesFetchSucceeded(e,{payload:t}){(0,u.mM)(e.creditSources),Object.assign(e.creditSources.sourcesByGUID,t.sourcesByGUID)},creditSourcesFetchFailed(e,{payload:t}){(0,u.C)(e.creditSources,t.error)}},extraReducers:e=>{e.addCase(c.c.actions.activityUpdated,((e,{payload:t})=>{S(e,t.server,t.activity)})),e.addCase(c.c.actions.activityFinished,((e,{payload:t})=>{S(e,t.server,t.activity)})),e.addCase(d.c.actions.ended,((e,{payload:t})=>{var r;(null==(r=e.metadata.metadataItem)?void 0:r.source)===t.source&&(e.metadata.isStale=!0)})),e.addCase(l.c.actions.sessionStopped,((e,{payload:t})=>{var r;const n=(0,i.c)({serverIdentifier:t.server.machineIdentifier});(null==(r=e.metadata.metadataItem)?void 0:r.source)===n&&(e.metadata.isStale=!0)})),e.addCase(o.c.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{var r;const n=(0,i.c)({serverIdentifier:t.server.machineIdentifier,providerIdentifier:t.provider.identifier});(null==(r=e.metadata.metadataItem)?void 0:r.source)===n&&(e.metadata.isStale=!0)})),e.addCase(o.c.actions.created,((e,{payload:t})=>{const r=e.metadata.metadataItem,n=null==r?void 0:r.sourceURI,{parentSourceURI:i,rootSourceURI:s}=t;n&&(n===i||n===s&&(null==r?void 0:r.skipChildren))&&(e.metadata.isStale=!0)})),e.addCase(o.c.actions.metadataProcessed,((e,{payload:t})=>{var r,n;if((null==(r=e.metadata.metadataItem)?void 0:r.type)!==a.WW.Artist)return;const i=null==(n=e.metadata.metadataItem)?void 0:n.sourceURI,{parentSourceURI:s}=t;i&&i===s&&(e.metadata.isStale=!0)})),e.addCase(o.c.actions.deleted,((e,{payload:t})=>{var r;const n=null==(r=e.metadata.metadataItem)?void 0:r.sourceURI,{parentSourceURI:i,rootSourceURI:s}=t;!n||n!==i&&n!==s||(e.metadata.isStale=!0)})),e.addCase(o.c.actions.repopulateCanceled,((e,t)=>{e.metadata.isStale=!1}))}})},60872:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.prePlay))},37608:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(59396),s=r(93808),a=r(60872);const o=(0,n.M3)(a.c,(e=>{const{metadata:{metadataItem:t},credits:{groups:r}}=e;return t||r?r.length?r:function(e){var t,r,n,a,o,c,l;const d=[];return e?((null==(t=e.Role)?void 0:t.length)&&d.push({metadataType:e.type,type:s.Cu.Actor,title:(0,i.c)("Cast"),credits:e.Role}),((null==(r=e.Director)?void 0:r.length)||(null==(n=e.Writer)?void 0:n.length)||(null==(a=e.Producer)?void 0:a.length))&&d.push({metadataType:e.type,type:s.Cu.Other,title:(0,i.c)("Crew"),credits:[...null!=(o=null==e?void 0:e.Director)?o:[],...null!=(c=null==e?void 0:e.Writer)?c:[],...null!=(l=null==e?void 0:e.Producer)?l:[]]}),d):d}(t):[]}))},9120:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(43196),s=r(99348),a=r(75020);const o=(0,n.M3)((0,i.c)("prePlayListStyles"),s.c,a.c,((e,t,r)=>{if(!t||!r.length)return;const n=e[t];return n&&r.includes(n)?n:r[0]}))},99348:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(72984),s=r(34752);const a=(0,n.M3)(s.c,i.c,((e,t)=>e?`${e.source}:${e.librarySectionID}:${t}`:void 0))},75020:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(57864),i=r(93808),s=r(7060),a=r(67532),o=r(72984),c=r(34752);const l=(0,n.M3)(c.c,o.c,((e,t)=>{if(!e||!t)return[];if((0,s.c)(e))return[a.y.SimpleDetails];if(e.subtype===i.GO.Track)return[a.y.TrackDetails];switch(t){case a.a.Album:case a.a.Audiobook:case a.a.Episode:return[a.y.PrePlayGrid,a.y.Details];case a.a.Track:return[a.y.Table];default:return[a.y.PrePlayGrid]}}))},72984:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(57864),i=r(93808),s=r(3188),a=r(67532),o=r(40376);var c=r(34752);const l=(0,n.M3)(c.c,(e=>{if(!e)return;if(e.type===i.WW.Collection)return a.a.Collection;const t=e.skipChildren?(0,s.S)(e.type,e.subtype):(0,s.u)(e.type,e.subtype),r=t?function(e){const t=(0,o.uw)(a.a).find((([,t])=>t===e));return t?a.a[t[0]]:void 0}(t):void 0;return r||void 0}))},34752:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(60872);const s=(0,n.M3)(i.c,(e=>e.metadata.metadataItem))},84620:(e,t,r)=>{"use strict";r.d(t,{cp:()=>c,eq:()=>a,oN:()=>o});var n=r(49340),i=r(93808);function s(e,t){return[...e].sort(((e,r)=>e.type===i.Cu.Actor?(null==t?void 0:t.suffixActingRoles)?1:-1:r.type===i.Cu.Actor?(null==t?void 0:t.suffixActingRoles)?-1:1:0)).flatMap((({credits:e})=>e)).reduce(((r,s)=>{var a,o,c,l,d;const u=r.find((e=>e.tag===s.tag)),p=null==(a=e.find((({type:e})=>e===i.Cu.Actor)))?void 0:a.credits.some((e=>e.tag===s.tag)),m=null==(o=e.find((({type:e})=>e===i.Cu.Other)))?void 0:o.credits.some((e=>e.tag===s.tag));if(u){const e=new Set([...u.role.split(" / "),...null!=(l=null==(c=s.role)?void 0:c.split(" / "))?l:[]]);u.role=Array.from(e).join(" / "),!u.thumb&&s.thumb&&(u.thumb=s.thumb),!u.key&&s.key&&(u.key=s.key),!u.tagKey&&s.tagKey&&(u.tagKey=s.tagKey),!u.id&&s.id&&(u.id=s.id),u.tags.push(s)}else(p&&!(null==t?void 0:t.excludeCast)||m&&!(null==t?void 0:t.excludeCrew))&&r.push({tag:s.tag,role:null!=(d=s.role)?d:"",thumb:s.thumb,id:s.id,key:s.key,tagKey:s.tagKey,tags:[s],listItemKey:(0,n.c)()});return r}),[])}function a(e){return s(e,{excludeCrew:!0})}function o(e){return s(e,{excludeCast:!0,suffixActingRoles:!0})}const c=s},51860:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(96504),i=r(19204),s=r(85712),a=r(31932),o=r(25684),c=r(2968),l=r(43300);const d=function(e,t,r,d){const u=(0,a.c)(t,d);if(!r.length||!u)return;const p=[];r.forEach((e=>{if(e.filter){const[t,r]=e.filter.split("=");p.push({field:t,fieldTitle:t,value:r,operator:l.c.Equal})}}));const m=(0,o.G3)(p);return(0,i.c)(e,t,u,{key:n.c.join([u.key,"all"],(0,c.c)(m)),pageType:s.Qf.List})}},11638:(e,t,r)=>{"use strict";r.d(t,{cp:()=>y});var n=r(35860),i=r(89064),s=r(36364),a=r(93808),o=r(86244),c=r(52180),l=r(15892),d=r(58896),u=r(51860),p=r(96064),m=r(684);function h({server:e,tag:t,metadataItem:r}){var n;return(null==r?void 0:r.type)===a.WW.Person?r.key:(null==(n=null==t?void 0:t.key)?void 0:n.startsWith("/library/people"))?null==t?void 0:t.key:`/library/people/${e.isCloud?null==t?void 0:t.id:null==t?void 0:t.tagKey}`}function y({server:e,serverSettings:t,tag:r,contentDirectory:a,metadataItem:y,provider:g,context:f}){const v=null==t?void 0:t.some((e=>e.id===d.aM.IncludeAdultContent&&e.value)),b=function(e){if(!(null==e?void 0:e.identifier))return n.Im;if(n._u(e.identifier,n.Im))return e.identifier;const t=n.SI(e.identifier);return t===n.tE.Development?`${n.Im}-dev`:t===n.tE.Staging?`${n.Im}-staging`:n.Im}(g),S=function(e){const t=c.WI("appModel").state,r=Object.values(t.entities.servers).find((({machineIdentifier:e})=>e===i.A)),n=Object.values(t.entities.providers).find((({identifier:t})=>t===e));return(null==r?void 0:r.connectionTestResult)===l.a.Connected&&!!(null==n?void 0:n.isPopulated)}(b);return S&&(e.isCloud||(null==r?void 0:r.key)||(null==r?void 0:r.tagKey)&&!v)?(0,m.c)(i.A,b,{key:h({server:e,tag:r,metadataItem:y}),context:f}):!e.isCloud&&r&&a&&g?(0,s.SE)(r)?(0,u.c)(e,g,r.tags,a.id):(0,p.c)({tag:r,contentDirectory:a,server:e,provider:g,metadataNumericType:y?(0,o.c)(y.type):void 0,fallbackFilter:"actor",context:f}):void 0}},34116:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(42728),i=r(672),s=r(59396),a=r(99372);function o(e){if(!e.isUnreleased)return;const{originallyAvailableAt:t,network:r}=e;if(!t)return(0,s.c)("Not yet available");const o=(0,i.c)(t);return(0,a.i)(n.fP)&&r?(0,s.c)("Releasing {date} on {network}",{date:o,network:r}):(0,s.c)("Releasing {date}",{date:o})}},96064:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(35860),i=r(96504),s=r(19204),a=r(93808),o=r(85712),c=r(78168);function l({tag:e,server:t,provider:r,contentDirectory:l,metadataNumericType:d,fallbackFilter:u,context:p}){let m;if((0,c.c)(r))return m;if(e.type===a.WW.Directory&&e.key)m=(0,s.c)(t,r,l,{key:e.key,pageType:o.Qf.List,context:p});else if(e.type===a.WW.Hub&&e.key)m=(0,s.c)(t,r,l,{key:e.key,pageType:o.Qf.Hub,source:!n._u(r.identifier,n.Im)||e.tagType!==a.ys.AvailabilityPlatform&&e.tagType!==a.ys.Genre?void 0:o.Y1.Home,context:p});else if(l&&e.filter){const[n,a]=e.filter.split("=");m=(0,s.c)(t,r,l,{key:i.c.join([l.key,"all"],{type:d,[n]:a}),pageType:o.Qf.List,context:p})}else e.id&&u&&l&&(m=(0,s.c)(t,r,l,{key:i.c.join([l.key,"all"],{type:d,[u]:e.id}),pageType:o.Qf.List,context:p}));return m}},6476:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(93808);const i=function(e,t){return t.filter((t=>{if(t.type===n.WW.Movie)return!0;const r=t.Role||[],i=[...t.Director||[],...t.Producer||[],...t.Writer||[]];return(null==i?void 0:i.some((t=>t.tag===e.title)))||(null==r?void 0:r.some((t=>t.tagKey===e.ratingKey||t.tag===e.title)))}))}},58620:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(11504),i=r(85448),s=r(58660),a=r(3008),o=r(77072),c=r(76952),l=r(44500),d=r(85052),u=r(59396),p=r(96504),m=r(2024),h=r(41452),y=r(80432),g=r(95460);const f=150;function v({className:e,onAddFriendsPress:t}){const r=(0,i.Uz)(),v=(0,n.useCallback)((()=>{null==t||t();const{pathname:e,search:n}=p.c.parseUri((0,i.Yz)(g.c.discoverPivot,{pivot:d.ik}));r.push({pathname:e,search:n,state:{origin:l.K2}})}),[r,t]);return n.createElement("div",{className:e},n.createElement(h.o,null,n.createElement(a.ye,{align:"center",gap:"l",orientation:"horizontal",testID:"friendZeroState",verticalAlign:"center",wrap:!0},n.createElement(m.c,{durationMilliseconds:0,height:f,src:c,width:f}),n.createElement(a.ye,{gap:"m"},n.createElement(a.ye,null,n.createElement(o.a,{color:"primary"},(0,u.c)("Everything is better with friends!")),n.createElement(o.a,{color:"muted"},(0,u.c)("Connect with your friends and family on Plex."))),n.createElement(a.ye,{gap:"s",orientation:"horizontal",wrap:!0},n.createElement(y.c,null),n.createElement(s.q,{label:(0,u.c)("Add Friends"),onPress:v}))))))}},24972:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(54252),i=r(11504),s=r(58660),a=r(3008),o=r(64776),c=r(77072),l=r(66780),d=r(672),u=r(59396),p=r(8684),m=r(21040);const h={input:"EditWatchedDateModal-input-fCUAyN"},y="1885-09-02";function g({modalState:e,isEditing:t,date:r,error:g,onEditDate:f,onSuccess:v}){const b=(0,p.c)(),S=(0,m.c)(t),[P,I]=(0,i.useState)((0,d.c)(r,"yyyy-MM-dd")),E=(0,i.useRef)((0,d.c)(new Date,"yyyy-MM-dd")),[w,C]=(0,i.useState)();(0,i.useEffect)((()=>{e.isOpen&&(b({action:l.sH}),C(""),I((0,d.c)(r,"yyyy-MM-dd")))}),[r,e.isOpen,b]),(0,i.useEffect)((()=>{(S&&!t||g)&&(e.onClose(),v())}),[g,t,e,v,S]);const O=(0,i.useCallback)((e=>{C(""),I(e.target.value)}),[]),M=(0,i.useCallback)((()=>{const e=new Date(P),t=new Date,r=new Date(y);!(0,n.c)(P)||e>t||e<r?C((0,u.c)("Invalid date. Please select a date between {minimumDate} and today.",{minimumDate:(0,d.c)(y)})):(f(new Date(e.setHours(e.getHours()<12?0:24,0,0,0))),b({action:l.e4}))}),[P,f,b]),T=(0,i.useCallback)((()=>{e.onClose(),b({action:l.aK})}),[e,b]);return i.createElement(o.wJ,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},i.createElement(o.EX,{closeButtonAccessibilityLabel:(0,u.c)("Close"),header:(0,u.c)("Edit Watched Date"),size:"s",onClose:T},i.createElement(o.aU,null,i.createElement(a.ye,{gap:"s"},i.createElement(a.YR,{gap:"s",verticalAlign:"center"},i.createElement(c.a,{color:"primary",shrink:!1},(0,u.c)("Watched Date")),i.createElement("input",{className:h.input,max:E.current,min:y,name:"datePicker",type:"date",value:P,onChange:O})),w?i.createElement(c.a,{color:"accent"},w):null)),i.createElement(o._A,null,i.createElement(o.YB,null,i.createElement(s.q,{label:(0,u.c)("Cancel"),onPress:T}),i.createElement(s.q,{color:"accent",label:(0,u.c)("Done"),waiting:t,onPress:M})))))}},56472:(e,t,r)=>{"use strict";r.d(t,{c:()=>w});var n=r(11504),i=r(42152),s=r(55268),a=r(23300),o=r(27876),c=r(3008),l=r(41744),d=r(77072),u=r(66780),p=r(75560),m=r(29208),h=r(8684),y=r(46572),g=r(97884);const f=({friend:e,server:t,className:r,style:s,size:f})=>{const{metricsOrigin:v}=(0,m.e0)(),b=(0,o.OY)(),S=(0,h.c)(),{details:{uuid:P}}=(0,o.w1)(y.c),I=(0,n.useCallback)((()=>{b((0,p.mY)({origin:v})),S({action:u.iw})}),[b,v,S]);if(!e||!e.avatar)return n.createElement(a.c,{server:t,size:f,url:""});const E=e.displayName||e.username,w=E!==e.username?e.username:void 0,C=P===e.id?(0,g.c)("profile"):(0,g.c)("userProfile",{id:e.id});return n.createElement("div",{className:r,style:s},n.createElement(i.a2,{testID:"friendProfile",width:f},n.createElement(i.mw,{posterStyle:"circle",width:f},n.createElement(a.c,{server:t,size:f,url:e.avatar}),n.createElement(i.ic,{accessibilityLabel:E,href:C,posterStyle:"circle",onPress:I})),n.createElement(i.oD,{posterStyle:"circle"},n.createElement(c.QZ,{alignItems:"center",gap:"xxs",justifyContent:"center",orientation:"horizontal",width:f},n.createElement(d.a,{font:"body-2",numberOfLines:1},n.createElement(l.c,{href:C,insetFocus:!0,onPress:I},E))),w?n.createElement(d.a,{color:"muted",font:"body-2",numberOfLines:1},w):null)))},v={container:"FriendListItem-container-hAYA12 Link-link-vSsQW1",friend:"FriendListItem-friend-RHsEii"};var b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t)=>{var r={};for(var n in e)S.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&b)for(var n of b(e))t.indexOf(n)<0&&P.call(e,n)&&(r[n]=e[n]);return r};const E=128;function w(e){var t=e,{server:r}=t,o=I(t,["server"]);const{item:c}=o,l=(0,s.c)(o);return c?n.createElement(f,{className:v.container,friend:c,server:r,size:E,style:l.style}):n.createElement("div",{style:l.style},n.createElement(i.mw,{posterStyle:"circle",width:E},n.createElement(a.c,{server:r,size:E,url:""})))}},51180:(e,t,r)=>{"use strict";r.d(t,{c:()=>B});var n=r(11504),i=r(27876),s=r(90220),a=r(3008),o=r(9868),c=r(66780),l=r(44500),d=r(24348),u=r(59396),p=r(67532),m=r(67604),h=r(29164),y=r(48996),g=r(80280),f=r(29208),v=r(8684),b=r(33924),S=r(56472),P=r(48384),I=r(36968),E=r(11728),w=r(51276),C=r(97884),O=r(39864),M=r(9192);const T={header:"FriendsList-header-SwuXBw VirtualHubScroller-hubHeader-vSW06t",hub:"FriendsList-hub-XpQqkQ"};var D=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&L(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&L(e,r,t[r]);return e},U=(e,t)=>k(e,x(t));const F=25,V=10,_=128,W={action:c.gL,pane:d.AP};function B({privacyMode:e,privacyModalState:t,hideNotificationBadge:r,uuid:c,onSetVisibility:D,useGetFriends:k}){var x,A;const R=(0,v.c)(),N=(0,i.w1)(h.c),L=(0,b.c)(),B=(0,o.y)(),{friends:H,isPopulated:z,notificationCount:G,totalSize:q,getNextPage:K}=k(null!=c?c:"",O.K2.FriendshipDate),{data:Q}=(0,M.hd)((0,E.c)(),{skip:!!c||!z||q>F}),{data:$}=(0,M.O2)((0,E.c)(),{skip:!!c||!z||q>F}),Y=null!=(x=null==Q?void 0:Q.blockedUsers.nodes.length)?x:0,X=null!=(A=null==$?void 0:$.mutedUsers.nodes.length)?A:0,J=z&&q>F,Z=z&&!c&&(Y>0||X>0)&&q<=F,ee=(0,n.useMemo)((()=>[...null!=H?H:[]].sort(((e,t)=>{var r,n;return Date.parse(null!=(r=t.createdAt)?r:"")-Date.parse(null!=(n=e.createdAt)?n:"")}))),[H]),te=(0,n.useMemo)((()=>J?F+1:Z?q+1:q),[Z,J,q]),re=(0,n.useMemo)((()=>(0,m.c)({listType:p.a.Person,titleCount:te?2:0,columnWidth:_})),[te]),ne=(0,n.useCallback)((()=>{R(W)}),[R]),ie=(0,n.useCallback)((()=>{R(W)}),[R]);(0,n.useEffect)((()=>{z&&D&&D(te>0)}),[z,D,te]);const se=c?(0,C.c)("userFriends",{id:c}):(0,C.c)("friends"),ae=(0,n.useMemo)((()=>e=>J&&e.cellIndex===F?n.createElement(y.c,U(j({},e),{href:se,onPress:ie})):Z&&e.cellIndex===te-1?n.createElement(w.c,{modalState:B},n.createElement(y.c,U(j({},e),{Icon:s.default,title:(0,u.c)("Manage"),onPress:B.onOpen}))):n.createElement(S.c,j({server:N},e))),[se,B,ie,N,Z,J,te]),oe=(0,n.useCallback)((()=>{const i=c?(0,u.c)("Friends"):(0,u.c)("My Friends");return n.createElement(a.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(I.c,{href:se,privacyModalState:t,privacyMode:e,title:i,onPress:ne}),z&&G>0&&!r?n.createElement(P.c,{size:"l"},G):null)}),[r,se,z,G,ne,t,e,c]);return n.createElement(f.cp,{metricsOrigin:L?l.AP:l.EN,metricsPane:d.AP},n.createElement(g.c,{cellComponentFactory:ae,className:T.hub,hub:{sourceURI:c?`friends-hub-${c}`:"friends-hub"},hubHeaderClassName:T.header,hubTitleComponent:oe,items:ee,keyPropName:"username",layout:re,totalSize:z?te:V,onPageRequest:K}))}},48384:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(3008),s=r(77072),a=r(49828);const o={badge:"NotificationBadge-badge-vdoZvC"};function c({size:e,children:t}){return n.createElement("div",{className:o.badge},n.createElement(i.ye,{align:"center",minWidth:(0,a.c)(e),verticalAlign:"center"},n.createElement(s.a,{as:"span",color:"inherit",font:"caption",testID:"notificationBadge"},t)))}},61536:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(3008),s=r(41744),a=r(77072),o=r(59396),c=r(17068),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};const y=({title:e,href:t})=>t?n.createElement(a.a,{color:"default",font:"body-1",numberOfLines:1},n.createElement(s.c,{href:t},e)):n.createElement(a.a,{color:"muted",numberOfLines:1},e),g=25;function f({title:e,subtitle:t,editing:r,menu:s}){return n.createElement(i.ye,{align:"center",gap:"xxs",height:g,orientation:"horizontal",verticalAlign:"center"},n.createElement(y,h({},e)),t?n.createElement(n.Fragment,null,n.createElement(c.c,{separator:""}),n.createElement(y,h({},t))):null,r?n.createElement(n.Fragment,null,n.createElement(c.c,{separator:""}),n.createElement(a.a,{color:"muted"},(0,o.c)("Edit"))):null,s)}},41452:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var n=r(89080),i=r.n(n),s=r(11504);const a=({children:e,isWarning:t,isZeroState:r})=>s.createElement("div",{className:i()("ProfileCard-card-QfaWfX",t&&"ProfileCard-warning-a55gfs",r&&"ProfileCard-zeroState-t5hvRj")},e)},86868:(e,t,r)=>{"use strict";r.d(t,{c:()=>M});var n=r(11504),i=r(27876),s=r(58660),a=r(98728),o=r(93036),c=r(92432),l=r(9868),d=r(66780),u=r(59396),p=r(50772),m=r(86960),h=r(8684),y=r(87464),g=r(56632),f=r(92784),v=r(62348),b=r(96304),S=r(63136),P=r(5297),I=r(97884),E=r(39864),w=r(58980),C=r(32512);const O=192;function M({user:e,showLibraryAccess:t=!0}){var r;const M=(0,h.c)(),{addToast:T}=(0,c.Wo)(),D=(0,i.OY)(),k=(0,l.y)(),x=(0,l.y)(),A=(0,l.y)(),R=(0,l.y)(),N=(0,y.c)(void 0,!0),L=null==N?void 0:N.some((t=>t.uuid===e.id)),{invites:j}=(0,w.c)(p.c,m.c.actions.fetchOwnedInvites,!t),{details:{isMuted:U,isBlocked:F}={}}=(0,f.c)(e.id),V=(0,i.w1)((0,P.c)(e.id)),_=(0,n.useCallback)((()=>{x.onOpen(),M({action:U?d.AZ:d.SG})}),[U,x,M]),W=(0,n.useCallback)((()=>{A.onOpen(),M({action:F?d.x6:d.SE})}),[A,F,M]),B=(0,n.useCallback)((t=>{t||e.friendStatus!==E.Ky.Friends||D(C.mk.util.invalidateTags([g.MB.GetActivityFeed]))}),[D,e.friendStatus]),H=(0,n.useCallback)((()=>{j.find((t=>{var r;return(null==(r=t.invited)?void 0:r.uuid)===e.id}))?T({color:"default",description:(0,u.c)("You have already invited this user."),type:"foreground",closeButtonAccessibilityLabel:(0,u.c)("Close")}):R.onOpen()}),[T,j,R,e.id]);return n.createElement(n.Fragment,null,n.createElement(o.iS,{isOpen:k.isOpen,onOpenChange:k.onOpenChange},n.createElement(o.Eq,null,n.createElement(s.wP,{accessibilityLabel:(0,u.c)("More actions"),icon:a.default,size:"xs",testID:"moreActionsButton",transparent:!0,type:"button"})),n.createElement(o.wz,{testID:"friendProfileMenu",width:O},t&&V?n.createElement(o.M1,{href:(0,I.c)(L?"plexHomeSharing":"manageLibraryAccessSharing",{id:V.user.id}),testID:"grantLibraryAccessAction"},(0,u.c)("Manage Library Access")):null,t&&!V?n.createElement(o.qS,{onPress:H},(0,u.c)("Manage Library Access")):null,F?null:n.createElement(o.qS,{testID:"mute",onPress:_},U?(0,u.c)("Unmute"):(0,u.c)("Mute")),n.createElement(o.qS,{testID:"block",onPress:W},F?(0,u.c)("Unblock"):(0,u.c)("Block"))),n.createElement(b.c,{modalState:x,user:e,onSuccess:B}),n.createElement(v.c,{modalState:A,user:e})),n.createElement(S.c,{friend:{avatar:e.avatar,id:e.id,displayName:e.displayName,username:e.username,idRaw:null!=(r=e.idRaw)?r:-1},isExternallyTriggered:!0,listType:["FriendsWithoutLibraryAccess"],modalState:R,type:"ShareLibrary"}))}},36968:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(58660),s=r(25071),a=r(62656),o=r(14180),c=r(3008),l=r(96856),d=r(624),u=r(63848),p=r(57923),m=r(39864);function h({title:e,privacyMode:t,href:r,privacyModalState:h,onPress:y}){const g=(0,p.S)(t),f=(0,n.useMemo)((()=>{switch(t){case m.oL.Friends:return s.default;case m.oL.Private:return a.default;case m.oL.Public:return u.c;case m.oL.FriendsOfFriends:return o.default;default:return a.default}}),[t]);return n.createElement(c.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(d.c,{href:r,onPress:y},e),t&&h?n.createElement(l.o,{tooltip:g},n.createElement(i.c,{accessibilityLabel:g,onPress:h.onOpen},n.createElement(f,{align:"baseline",size:"m"}))):null)}},97576:(e,t,r)=>{"use strict";r.d(t,{c:()=>x});var n=r(11504),i=r(27876),s=r(9868),a=r(59396),o=r(84144),c=r(51304),l=r(67532),d=r(48800),u=r(37984),p=r(29164),m=r(29208),h=r(38652),y=r(24972),g=r(33484),f=r(88716),v=r(57608),b=r(36048),S=r(11528),P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&M(e,r,t[r]);if(w)for(var r of w(t))O.call(t,r)&&M(e,r,t[r]);return e},D=(e,t)=>I(e,E(t)),k=(e,t)=>{var r={};for(var n in e)C.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))t.indexOf(n)<0&&O.call(e,n)&&(r[n]=e[n]);return r};function x(e){var t,r,P,I=e,{insertActivity:E,removeActivity:w,item:C,type:O=l.a.Mixed,canEditWatchedDate:M,canRemoveActivity:x}=I,A=k(I,["insertActivity","removeActivity","item","type","canEditWatchedDate","canRemoveActivity"]);const R=(0,i.w1)(p.c),N=(0,f.c)(),L=(0,s.y)(),j=(0,s.y)(),[U,F]=(0,S.U_)(),[V,_]=(0,S.i4)(),{insertItemByDate:W}=(0,v.c)(b.gK.GetWatchHistoryHub),B=(0,n.useRef)(),H=(0,n.useCallback)((()=>{L.onOpen()}),[L]),z=(0,n.useCallback)((()=>{(null==C?void 0:C.id)&&U({input:{id:C.id,type:C.type}})}),[null==C?void 0:C.id,null==C?void 0:C.type,U]),G=(0,n.useCallback)((()=>{(null==C?void 0:C.id)&&(null==w||w(C.id))}),[null==C?void 0:C.id,w]),q=(0,n.useCallback)((()=>{if(null==C?void 0:C.id){const e=null==w?void 0:w(C.id);if(!e)return;const t=D(T({},e),{date:B.current||e.date}),r=W(t);r>-1&&(null==E||E(t,r))}}),[E,W,null==C?void 0:C.id,w]),K=(0,n.useCallback)((e=>{(null==C?void 0:C.id)&&(B.current=e.toISOString(),V({id:C.id,input:{date:e}}))}),[V,null==C?void 0:C.id]),Q=(0,n.useMemo)((()=>{const e={};let t=!1;return M&&(e.editActivity={callback:j.onOpen,title:(0,a.c)("Edit Watched Date")},t=!0),x&&(e.removeActivity={callback:H,title:(0,a.c)("Remove Activity")},t=!0),t?e:void 0}),[M,x,j.onOpen,H]);return n.createElement(h.cp,{key:A.key,activity:null==C?void 0:C.activity,metadataActions:Q},n.createElement(m.cp,{column:A.cellIndex},n.createElement(u.cp,{machineIdentifier:R.machineIdentifier,providerIdentifier:null!=(t=null==N?void 0:N.identifier)?t:""},n.createElement(c.cp,{containerProvider:null!=N?N:d.c,containerServer:R,containerType:O},n.createElement(o.c,D(T({},A),{isFallbackSupported:!0,item:null==C?void 0:C.metadataItem})),n.createElement(g.c,{body:(0,a.c)("This activity will no longer appear in your Activity feed or Profile unless you repeat the activity"),modalState:L,mutationState:T({},F),title:(0,a.c)("Remove Activity"),onRemoveActivity:z,onSuccess:G}),(null==(r=null==C?void 0:C.activity)?void 0:r.viewedAt)?n.createElement(y.c,{date:null==(P=C.activity)?void 0:P.viewedAt,error:_.error,isEditing:_.isLoading,modalState:j,onEditDate:K,onSuccess:q}):null))))}},21928:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(1256);const s={content:"ProfilePageContent-content-pb4EHz PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"};function a({children:e}){return n.createElement(i.c,{className:s.content},e)}},57923:(e,t,r)=>{"use strict";r.d(t,{S:()=>g,c:()=>v});var n=r(11504),i=r(58660),s=r(25071),a=r(62656),o=r(14180),c=r(3008),l=r(93036),d=r(77072),u=r(9868),p=r(59396),m=r(63848),h=r(36048),y=r(39864);function g(e){switch(e){case y.oL.Public:return(0,p.c)("Anyone");case y.oL.Friends:return(0,p.c)("Friends Only");case y.oL.Private:return(0,p.c)("Private");case y.oL.FriendsOfFriends:return(0,p.c)("Friends of Friends");default:return""}}function f({mode:e,currentMode:t,title:r,icon:i,onPress:s}){const a=(0,n.useCallback)((()=>{s(e)}),[e,s]);return n.createElement(l.OF,{isChecked:t===e,onCheckedChanged:a},n.createElement(c.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(i,{color:t===e?"accent":"default"}),r))}function v({role:e,showLabel:t,mode:r,changePrivacy:c}){const v=(0,u.y)(),[b,S]=(0,n.useState)(r),P=(0,n.useCallback)((t=>{c(e,t),S(t)}),[c,e]);return n.createElement(l.iS,{isOpen:v.isOpen,onOpenChange:v.onOpenChange},n.createElement(l.Eq,null,n.createElement(i._M,{accessibilityLabel:(0,p.c)("Open privacy settings"),isOpen:v.isOpen,type:"button"},b===y.oL.Friends?n.createElement(s.default,null):null,b===y.oL.Private?n.createElement(a.default,null):null,b===y.oL.FriendsOfFriends?n.createElement(o.default,null):null,b===y.oL.Public?n.createElement(m.c,null):null,t&&b?n.createElement(d.a,null,g(b)):null)),n.createElement(l.wz,null,e===h.Ix.Profile?n.createElement(f,{currentMode:b,icon:m.c,mode:y.oL.Public,title:g(y.oL.Public),onPress:P}):null,n.createElement(f,{currentMode:b,icon:o.default,mode:y.oL.FriendsOfFriends,title:g(y.oL.FriendsOfFriends),onPress:P}),n.createElement(f,{currentMode:b,icon:s.default,mode:y.oL.Friends,title:g(y.oL.Friends),onPress:P}),e!==h.Ix.Profile?n.createElement(f,{currentMode:b,icon:a.default,mode:y.oL.Private,title:g(y.oL.Private),onPress:P}):null))}},51760:(e,t,r)=>{"use strict";r.d(t,{E:()=>f,c:()=>b});var n=r(11504),i=r(27876),s=r(58660),a=r(57080),o=r(3008),c=r(77072),l=r(9868),d=r(72528),u=r(44500),p=r(59396),m=r(1692),h=r(39832),y=r(21040);const g={container:"ProfileWatchStats-container-SSpQeD",stats:"ProfileWatchStats-stats-zxsqvl",grid:"ProfileWatchStats-grid-stxYc6",row:"ProfileWatchStats-row-yOjVoY",viewStateSyncUpsellCard:"ProfileWatchStats-viewStateSyncUpsellCard-pDBRiA",baseline:"ProfileWatchStats-baseline-inci_g"};function f({count:e,label:t,suffix:r}){return n.createElement(n.Fragment,null,n.createElement(o.ye,{align:"right",orientation:"horizontal",verticalAlign:"bottom"},n.createElement("div",{className:g.baseline},n.createElement(c.a,{as:"span",color:"primary",font:"display-3",numberOfLines:1},e),r?n.createElement(c.a,{as:"span",color:"primary",font:"display-3",numberOfLines:1},r):null)),n.createElement(c.a,{as:"span",color:"muted",font:"display-copy"},t))}const v=223;function b({stats:e,isViewStateSyncUpsellVisible:t}){const r=(0,i.OY)(),b=(0,l.y)(),S=(0,y.c)(b.isOpen);return(0,n.useEffect)((()=>{S&&!b.isOpen&&r((0,d.SI)({hasSeenViewStateSyncModal:!0}))}),[r,b.isOpen,S]),n.createElement("div",{className:g.container},n.createElement("div",{className:g.stats},n.createElement(o.ye,{align:"center",gap:"xs",testID:"profileWatchStats"},n.createElement("div",{className:g.grid},n.createElement(f,{count:e.movieAmount,label:(0,p.c)("Movies"),suffix:e.movieSuffix}),n.createElement(f,{count:e.showAmount,label:(0,p.c)("Shows"),suffix:e.showSuffix}),n.createElement(f,{count:e.episodeAmount,label:(0,p.c)("Episodes"),suffix:e.episodeSuffix})),n.createElement(c.a,{align:"center",color:"muted",font:"body-3"},(0,p.c)("Watched since joining Plex")))),t?n.createElement(n.Fragment,null,n.createElement(h.c,{modalState:b,origin:u.EN,page:m.sF.Default}),n.createElement("div",{className:g.viewStateSyncUpsellCard},n.createElement(o.YR,{gap:"xs",testID:"viewStateSyncUpsell",width:v},n.createElement(a.default,{color:"accent",size:"l"}),n.createElement(o.ye,{gap:"xxs"},n.createElement(c.a,{color:"primary",font:"body-2"},(0,p.c)("Sync Your Personal Media Watch State")),n.createElement(s.c,{color:"accent",font:"button-2",onPress:b.onOpen},(0,p.c)("Learn More")))))):null)}},33484:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(58660),s=r(64776),a=r(77072),o=r(92432),c=r(66780),l=r(59396),d=r(8684);function u({title:e,body:t,modalState:r,pane:u,mutationState:{isLoading:p,error:m,isSuccess:h,reset:y},onRemoveActivity:g,onSuccess:f}){const v=(0,d.c)(),{addToast:b}=(0,o.Wo)();(0,n.useEffect)((()=>{r.isOpen&&v({action:c.mY,pane:u})}),[r.isOpen,u,v]),(0,n.useEffect)((()=>{h&&!m&&(r.onClose(),f(),y())}),[m,h,r,f,y]),(0,n.useEffect)((()=>{(null==m?void 0:m.message)&&r.isOpen&&(b({color:"alert",description:m.message,type:"foreground"}),r.onClose(),y())}),[b,m,r,y]);const S=(0,n.useCallback)((()=>{r.onClose(),v({action:c.Eh,pane:u})}),[r,u,v]),P=(0,n.useCallback)((()=>{g(),v({action:c.KU,pane:u})}),[g,u,v]);return n.createElement(s.wJ,{isOpen:r.isOpen,onOpenChange:r.onOpenChange},n.createElement(s.EX,{closeButtonAccessibilityLabel:(0,l.c)("Close"),header:e,size:"s",onClose:S},n.createElement(s.aU,null,n.createElement(a.a,{color:"primary"},t)),n.createElement(s._A,null,n.createElement(s.YB,null,n.createElement(i.q,{label:(0,l.c)("Cancel"),onPress:S}),n.createElement(i.q,{color:"accent",label:(0,l.c)("Remove"),waiting:p,onPress:P})))))}},22420:(e,t,r)=>{"use strict";r.d(t,{c:()=>M});var n=r(11504),i=r(27876),s=r(58660),a=r(25071),o=r(3008),c=r(64776),l=r(77072),d=r(92432),u=r(96856),p=r(9868),m=r(59396),h=r(29164),y=r(57516),g=r(95944),f=r(17807),v=r(86960),b=r(16932),S=r(5808),P=r(40415),I=r(43848),E=r(58980),w=r(21040),C=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function O(e){e.stopPropagation()}function M({friend:e,size:t="m",onRemoveFriendPress:r,isRemoving:M,isRemovingSuccess:T}){const D=(0,p.y)(),k=(0,i.OY)(),x=(0,i.w1)(h.c),{addToast:A}=(0,d.Wo)(),[R,N]=(0,n.useState)(!1),[L,j]=(0,n.useState)(!1),U=(0,n.useRef)(!1),F=(0,i.w1)((0,S.c)(e.idRaw)),V=(0,w.c)(F),{error:_}=(0,E.c)(f.c,v.c.actions.fetchReceivedInvites),{error:W}=(0,E.c)(y.c,g.c.actions.fetchReceivedInvites),B=e.displayName||e.username,H=(null==_?void 0:_.message)||(null==W?void 0:W.message),z=(0,n.useCallback)((t=>C(this,null,(function*(){try{R&&(j(!0),U.current=!0,yield I.c.del(`/api/v2/sharings/${e.idRaw}`,{server:x}),k(P.cp.actions.removeSharesByUserUUID({uuid:e.id}))),r(t)}catch(e){A({color:"alert",description:(0,m.c)("Error while removing shares."),type:"foreground"})}}))),[A,k,e.id,e.idRaw,r,x,R]),G=(0,n.useCallback)((e=>{N(e.currentTarget.checked)}),[]),q=(0,n.useMemo)((()=>{const e=null!=F?F:V;return e?e.sharedServers.reduce(((e,t)=>e+(t.libraries.length||t.allLibraries?t.numLibraries:0)),0):0}),[F,V]),K=(0,n.useMemo)((()=>{const e=null!=F?F:V;return e?e.sharedSources.reduce(((e,t)=>e+t.sharedItemsCount),0):0}),[F,V]);return(0,n.useEffect)((()=>{H&&(A({color:"alert",description:H,type:"foreground"}),D.onClose())}),[A,H,D]),(0,n.useEffect)((()=>{M&&L&&j(!1)}),[M,L]),(0,n.useEffect)((()=>{T&&!H&&D.onClose()}),[H,e.id,T,D]),n.createElement(c.wJ,{isOpen:D.isOpen,onOpenChange:D.onOpenChange},n.createElement("div",{onClick:O},n.createElement(u.o,{tooltip:n.createElement(l.a,{color:"muted",font:"body-3"},(0,m.c)("Unfriend {username}",{username:e.username}))},n.createElement(c.Qn,null,n.createElement(s.wP,{grow:!1,icon:a.default,label:(0,m.c)("Friends"),size:t,testID:"removeFriendButton",onPress:D.onToggle})))),n.createElement(c.EX,{closeButtonAccessibilityLabel:(0,m.c)("Close Modal"),header:(0,m.c)("Remove Friend"),size:"s",testID:"removeFriendModal",onClose:D.onClose},n.createElement(c.aU,null,n.createElement(o.ye,{gap:"xs"},B!==e.username?n.createElement(l.a,null,(0,m.c)("Are you sure you want to unfriend {displayName} ({username})?",{displayName:B,username:e.username})):n.createElement(l.a,null,(0,m.c)("Are you sure you want to unfriend {username}?",{username:e.username})),U.current||q||K?n.createElement("label",{htmlFor:"removeShares"},n.createElement(b.c,{checked:R,name:"removeShares",onChange:G}),n.createElement(l.a,{as:"span",font:"body-1"},(0,m.c)("Also remove access to all libraries and single items."))):null)),n.createElement(c._A,null,n.createElement(c.YB,null,n.createElement(s.q,{label:(0,m.c)("Cancel"),onPress:D.onClose}),n.createElement(s.q,{color:"alert",label:(0,m.c)("Remove Friend"),waiting:M||L,onPress:z})))))}},80432:(e,t,r)=>{"use strict";r.d(t,{c:()=>we});var n=r(11504),i=r(27876),s=r(58660),a=r(3008),o=r(64776),c=r(9868),l=r(66780),d=r(44500),u=r(56960),p=r(59396),m=r(81764),h=r(29164),y=r(29208),g=r(8684),f=r(59956),v=r(24180),b=r(82420),S=r(57864),P=r(66028);const I=(0,S.M3)(P.c,(({sentInvites:e})=>e.filter((e=>e.home))));var E=r(33924),w=r(34632),C=r(77072),O=r(34708),M=r(23852),T=r(3276),D=r(66576),k=r(77892),x=r(94644),A=r(41744),R=r(93036),N=r(42152),L=r(75560),j=r(23300),U=r(46896),F=r(65144),V=r(98260),_=r(97884),W=r(39864),B=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,G=(e,t)=>{var r={};for(var n in e)H.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&B)for(var n of B(e))t.indexOf(n)<0&&z.call(e,n)&&(r[n]=e[n]);return r};function q(e){var t=e,{type:r}=t,s=G(t,["type"]);const o=(0,i.OY)(),{metricsOrigin:c}=(0,y.e0)(),d=(0,g.c)(),{item:u}=s,p=(0,U.c)(s),m=(0,i.w1)(h.c),f=(0,n.useCallback)((()=>{o((0,L.mY)({origin:c})),d({action:l.iw})}),[o,c,d]);if(!u)return null;const v=(0,_.c)("userProfile",{id:u.user.id});return n.createElement("div",{style:p.style},n.createElement(a.ye,{gap:"m",height:"100%",orientation:"vertical",paddingX:"l",verticalAlign:"center"},n.createElement(a.ye,{align:"space-between",orientation:"horizontal"},n.createElement(a.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},n.createElement(N.mw,{posterStyle:"circle",width:40},n.createElement(j.c,{server:m,size:40,url:u.user.avatar}),n.createElement(N.ic,{href:v,posterStyle:"circle",onPress:f})),n.createElement(a.ye,{orientation:"vertical",verticalAlign:"center"},n.createElement(C.a,{color:"primary",font:"body-2",numberOfLines:1},n.createElement(A.c,{href:v,onPress:f},u.user.displayName||u.user.username)),u.user.displayName?n.createElement(C.a,{color:"muted",font:"body-3",numberOfLines:1},u.user.username):null,r===W.gV.Received?n.createElement(V.c,{mutualFriends:u.user.mutualFriends}):null)),n.createElement(a.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(F.c,{user:u.user}))),n.createElement(R.ew,null)))}function K({invite:e,isSent:t}){const r=(0,i.w1)(h.c),o=e.friendlyName||e.username||e.invitedEmail,c=o!==e.username?e.username:null;return n.createElement(a.ye,{paddingTop:"l",paddingX:"l"},n.createElement(a.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},n.createElement(a.ye,{align:"center",gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(j.c,{server:r,size:40,url:e.thumb}),n.createElement(a.ye,null,n.createElement(C.a,{color:"inherit",font:"body-2"},o),c?n.createElement(C.a,{color:"muted",font:"body-3"},c):null),t?null:n.createElement(C.a,{color:"muted",font:"body-2"},`- ${(0,p.c)("Wants you to join their home")}`)),n.createElement(s.mq,{href:(0,_.c)("plexHome"),label:(0,p.c)("Go to Plex Home"),size:"s"})),n.createElement(a.ye,{paddingTop:"m"},n.createElement(R.ew,null)))}var Q=r(45692),$=r(82228),Y=r(49828);function X(){return(0,$.c)({rowHeight:85,outerPaddingTop:(0,Y.c)("m"),overscan:1})}var J=r(56784),Z=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,se=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&se(e,r,t[r]);if(re)for(var r of re(t))ie.call(t,r)&&se(e,r,t[r]);return e},oe=(e,t)=>ee(e,te(t));const ce=X();function le({homeInvites:e}){const t=(0,i.OY)(),{count:r}=(0,v.c)(W.gV.Received),{data:s,isPopulated:o,error:c,getNextPage:l,remove:d}=(0,D.c)(J.mk.endpoints.friendRequests,{key:"received-friend-requests",args:{type:W.gV.Received},fetchSize:Q.E,transformResponse:M.c,selector:J.mk.endpoints.friendRequests.select((0,Q.c)(W.gV.Received))}),u=(0,i.w1)(T.c);(0,n.useEffect)((()=>{u&&(d(u,(e=>e.user.id)),t(O.c.actions.clearReceivedFriendRequests()))}),[t,d,u]);const m=(0,n.useMemo)((()=>e=>e.item?n.createElement(q,oe(ae({},e),{key:`receivedRequest-${e.item.user.id}`,type:W.gV.Received})):n.createElement(n.Fragment,null)),[]);return n.createElement(a.ye,{orientation:"vertical"},n.createElement(k.c,{title:(0,p.c)("Awaiting Approval")}),o||c?null:n.createElement(a.ye,{align:"center",paddingTop:"m"},n.createElement(w.c,{size:"s"})),o&&e.length?n.createElement(n.Fragment,null,e.map((e=>n.createElement(K,{key:`invite-${e.id}`,invite:e,isSent:!1})))):null,o&&(null==s?void 0:s.length)?n.createElement(a.ye,null,n.createElement(x.c,{cellComponentFactory:m,items:s||[],layout:ce,totalSize:r,onPageRequest:l})):null,!o||(null==s?void 0:s.length)||e.length?null:n.createElement(a.ye,{paddingTop:"m",paddingX:"l"},n.createElement(C.a,{color:"primary",font:"body-1"},(0,p.c)("You have no requests awaiting approval."))))}var de=r(63480),ue=Object.defineProperty,pe=Object.defineProperties,me=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ve=(e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&fe(e,r,t[r]);if(he)for(var r of he(t))ge.call(t,r)&&fe(e,r,t[r]);return e},be=(e,t)=>pe(e,me(t));const Se=X();function Pe({homeInvites:e}){const t=(0,i.OY)(),{count:r}=(0,v.c)(W.gV.Sent),{data:s,isPopulated:o,error:c,getNextPage:l,remove:d}=(0,D.c)(J.mk.endpoints.friendRequests,{key:"sent-friend-requests",args:{type:W.gV.Sent},fetchSize:Q.E,transformResponse:M.c,selector:J.mk.endpoints.friendRequests.select((0,Q.c)(W.gV.Sent))}),u=(0,i.w1)(I),m=(0,i.w1)(de.c);(0,n.useEffect)((()=>{m&&(d(m,(e=>e.user.id)),t(O.c.actions.clearSentFriendRequests()))}),[t,d,m]);const h=(0,n.useMemo)((()=>e=>e.item?n.createElement(q,be(ve({},e),{key:`sentRequest-${e.item.user.id}`,type:W.gV.Sent})):n.createElement(n.Fragment,null)),[]);return n.createElement(a.ye,{orientation:"vertical"},n.createElement(k.c,{title:(0,p.c)("Requests Sent")}),o||c?null:n.createElement(a.ye,{align:"center",paddingTop:"m"},n.createElement(w.c,{size:"s"})),o&&e.length?n.createElement(n.Fragment,null,e.map((e=>n.createElement(K,{key:`invite-${e.id}`,invite:e,isSent:!0})))):null,o&&(null==s?void 0:s.length)?n.createElement(a.ye,null,n.createElement(x.c,{cellComponentFactory:h,items:s||[],layout:Se,totalSize:r,onPageRequest:l})):null,!o||(null==s?void 0:s.length)||u.length?null:n.createElement(a.ye,{paddingTop:"m",paddingX:"l"},n.createElement(C.a,{color:"primary",font:"body-1"},(0,p.c)("You have no pending requests sent."))))}var Ie=r(85448),Ee=r(95460);function we({isAlwaysVisible:e=!1,children:t}){const r=(0,i.OY)(),S=(0,g.c)(),P=(0,f.c)(),w=(0,E.c)(),C=function(){const e=(0,Ie.IT)();return!!(0,Ie.ot)(e.pathname,Ee.c.friends)}(),O=(0,c.y)(),{count:M,isPopulated:T}=(0,v.c)(W.gV.Received),D=!e||O.isOpen&&e,{count:k,isPopulated:x}=(0,v.c)(W.gV.Sent,D),A=(0,i.w1)(b.c),R=(0,i.w1)(I),N=(0,i.w1)(h.c),L=(0,n.useMemo)((()=>w?d.ox:C?d.kR:d.EN),[w,C]);(0,n.useEffect)((()=>{O.isOpen&&P({page:u.eE,origin:L})}),[L,O.isOpen,P]),(0,n.useEffect)((()=>{r((0,m.QF)()),r((0,m.UJ)())}),[r,N]);const j=(0,n.useCallback)((()=>{S({action:l.eK})}),[S]),U=A.length+M,F=R.length+k,V=U+F,_=T&&(!D||x),B=(0,n.useMemo)((()=>t||(e||V>0||!_?n.createElement(s.q,{color:U>0?"accent":"default",label:U>0?`${(0,p.c)("Requests")} (${U})`:(0,p.c)("Requests"),size:"m",testID:"requestsButton",waiting:!_,onPress:j}):null)),[t,e,_,j,U,V]);return n.createElement(y.cp,{metricsOrigin:d.eK,metricsPage:u.eE},n.createElement(o.wJ,{isOpen:O.isOpen,onOpenChange:O.onOpenChange},n.createElement(o.Qn,null,B),n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,p.c)("Close"),header:(0,p.c)("Friend Requests"),size:"l",testID:"requestsModal",onClose:O.onClose},n.createElement(o.aU,{paddingBottom:"none",paddingLeft:"none",paddingRight:"none",paddingTop:"none"},n.createElement(a.ye,{gap:"m"},n.createElement(le,{homeInvites:A}),n.createElement(Pe,{homeInvites:R}))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(s.q,{label:(0,p.c)("Close"),onPress:O.onClose}))))))}},39528:(e,t,r)=>{"use strict";r.d(t,{c:()=>Z});var n=r(11504),i=r(27876),s=r(2536),a=r(58660),o=r(59320),c=r(3008),l=r(93036),d=r(92432),u=r(9868),p=r(44500),m=r(85052),h=r(59396),y=r(29164),g=r(7268),f=r(29208),v=r(91320),b=r(66984),S=r(16416),P=r(27256),I=r(94644),E=r(23748),w=r(8436),C=r(25071),O=r(77072),M=r(90012),T=r(46204),D=r(35060),k=r(21928),x=r(97884);const A={container:"EmptyUserFriends-container-zEon2V"};function R(){const e=(0,D.c)(M.s.IncludeDiscoverSource);return n.createElement(k.c,null,n.createElement("div",{className:A.container},n.createElement(c.ye,{align:"center",gap:"m",testID:"emptyUserFriends"},n.createElement(T.c,{icon:C.default}),n.createElement(c.ye,{align:"center",gap:"s"},n.createElement(O.a,{color:"inherit"},(0,h.c)("Plex is even better with friends. Share recommendations, ratings, and your watchlist with (and only with) your friends on Plex."))),e?n.createElement(a.mq,{color:"accent",href:(0,x.c)("discoverPivot",{pivot:m.ik}),label:(0,h.c)("Add friends")}):null,e?null:n.createElement(a.mq,{color:"accent",href:(0,x.c)("onlineMediaSources"),label:(0,h.c)("Enable Discover")}))))}var N=r(56472),L=r(80432),j=r(18915),U=r(51276),F=r(63136),V=r(63308),_=r(92796),W=r(61536);const B={header:"SignedInUserFriends-header-ibSc8Q PageHeader-pageHeader-e2k66t",headless:"SignedInUserFriends-headless-f9eQ6s SignedInUserFriends-header-ibSc8Q PageHeader-pageHeader-e2k66t",container:"SignedInUserFriends-container-m7oiyU"};var H=Object.defineProperty,z=Object.defineProperties,G=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&$(e,r,t[r]);if(q)for(var r of q(t))Q.call(t,r)&&$(e,r,t[r]);return e},X=(e,t)=>z(e,G(t));const J=(0,g.c)({direction:g.S.Vertical,overscan:1,innerHorizontalPadding:30,innerVerticalPadding:30,outerPaddingBottom:30,getCellWidth:()=>128,getCellHeight:()=>190});function Z({showHeader:e=!0}){const{addToast:t}=(0,d.Wo)(),r=(0,u.y)(),o=(0,u.y)(),l=(0,i.w1)(y.c),g=(0,j.c)(),{friendlyName:C,username:O}=(0,i.w1)(w.c),{friendsWithLibraryAccess:M,friends:T,isPopulated:D,error:A}=(0,V.c)(),[H,z]=(0,n.useState)(T),G=(0,n.useRef)("My Friends"),q=(0,n.useCallback)((()=>{z(T)}),[T]),K=(0,n.useCallback)((()=>{z(M)}),[M]);(0,v.c)(),(0,n.useEffect)((()=>{"My Friends"===G.current?q():K()}),[K,q]),(0,n.useEffect)((()=>{!D&&(null==A?void 0:A.message)&&t({color:"alert",description:(0,h.c)("Error while fetching library access."),type:"foreground",testID:"error"})}),[t,D,null==A?void 0:A.message]);const Q=(0,n.useCallback)((e=>{switch(G.current=e,e){case"My Friends":q();break;case"Friends with Library Access":K()}}),[K,q]),$=(0,n.useMemo)((()=>e=>n.createElement(N.c,X(Y({},e),{server:l}))),[l]),Z=C||O,te=(0,n.useMemo)((()=>n.createElement(_.c,{className:e?B.header:B.headless},n.createElement(c.ye,{align:"left",gap:"m",width:"100%"},e?n.createElement(W.c,{subtitle:{title:(0,h.c)("Friends")},title:{href:g?(0,x.c)("discoverPivot",{pivot:m.YD}):(0,x.c)("profile"),title:g?Z:(0,h.c)("My Profile")}}):null,n.createElement(c.ye,{align:"space-between",orientation:"horizontal",width:"100%"},n.createElement(c.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center",wrap:!0},H.length>0?n.createElement(n.Fragment,null,n.createElement(ee,{onStateChange:Q}),n.createElement(s.k,{accessibilityLabel:(0,h.c)("Number of Friends"),color:"default",label:H.length.toString(),testID:"friendsBadge"})):null),n.createElement(c.ye,{gap:"s",orientation:"horizontal",wrap:!0},n.createElement(F.c,{listType:["FriendsWithoutLibraryAccess"],modalState:o,type:"ShareLibrary"}),n.createElement(f.cp,{extendParentContextProviders:!0,metricsOrigin:p.eK},n.createElement(L.c,null)),n.createElement(U.c,{modalState:r},n.createElement(a.q,{label:(0,h.c)("Manage")}))))))),[H,g,r,Z,Q,o,e]);return D?H.length||"Friends with Library Access"===G.current?n.createElement(f.cp,{extendParentContextProviders:!0,metricsOrigin:p.kR},n.createElement(b.c,null,te,n.createElement(k.c,null,H.length>0?n.createElement(I.c,{cellComponentFactory:$,items:H,layout:J,scrollDirection:P.y.Vertical,totalSize:H.length}):null))):n.createElement(b.c,null,te,n.createElement(R,null)):n.createElement(S.c,null,n.createElement(E.c,null))}const ee=({onStateChange:e})=>{const t=(0,u.y)(),[r,i]=(0,n.useState)("My Friends"),s=(0,n.useCallback)((()=>{i("My Friends"),e("My Friends"),t.onClose()}),[t,e]),c=(0,n.useCallback)((()=>{i("Friends with Library Access"),e("Friends with Library Access"),t.onClose()}),[t,e]);return n.createElement(l.iS,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(l.Eq,null,n.createElement(a._M,{accessibilityLabel:(0,h.c)("Select Friend Category"),id:"friendsType",isOpen:t.isOpen,testID:"friendCategoryButton",type:"button"},"My Friends"===r?(0,h.c)("My Friends"):(0,h.c)("Friends with Library Access"))),n.createElement(l.wz,{testID:"friendsMenu",width:250},"My Friends"===r?n.createElement(l.kf,{color:"accent",icon:o.default},(0,h.c)("My Friends")):n.createElement(l.qS,{color:"primary",onPress:s},(0,h.c)("My Friends")),"Friends with Library Access"===r?n.createElement(l.kf,{color:"accent",icon:o.default},(0,h.c)("Friends with Library Access")):n.createElement(l.qS,{color:"primary",testID:"showLibraryAccessFriends",onPress:c},(0,h.c)("Friends with Library Access"))))}},65144:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(27876),s=r(58660),a=r(3008),o=r(59396),c=r(86636),l=r(22420),d=r(47196);function u({user:e,setIsWaiting:t,updateFriendStatus:r}){var u;const{friendStatus:p,isAcceptFriendVisible:m,isAddFriendVisible:h,isCancelFriendVisible:y,isRemoveFriendVisible:g,isAdding:f,isAccepting:v,isRemoving:b,isCancelling:S,isRejecting:P,isRemovingSuccess:I,onAcceptFriendPress:E,onAddFriendPress:w,onCancelFriendPress:C,onRemoveFriendPress:O,onRejectFriendPress:M}=(0,d.c)(e),T=(0,i.w1)((0,c.c)(e.id));return(0,n.useEffect)((()=>{e.friendStatus!==p&&r&&r(e.id,p)}),[p,r,e]),(0,n.useEffect)((()=>{null==t||t(f||v||b||S)}),[v,f,S,b,t]),h?n.createElement(s.wP,{icon:"friend-add",label:(0,o.c)("Add Friend"),size:"xs",waiting:f,onPress:w}):y?n.createElement(s.wP,{icon:"x",label:(0,o.c)("Cancel"),size:"xs",waiting:S,onPress:C}):m?n.createElement(a.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(s.wP,{color:"accent",disabled:P,icon:"friend-added",label:(0,o.c)("Accept"),size:"xs",waiting:v,onPress:E}),n.createElement(s.wP,{accessibilityLabel:(0,o.c)("Decline"),disabled:v,icon:"x",size:"xs",waiting:b||P,onPress:M})):g?n.createElement(l.c,{friend:{avatar:e.avatar,displayName:e.displayName,id:e.id,username:e.username,idRaw:null!=(u=null==T?void 0:T.idRaw)?u:-1},isRemoving:b,isRemovingSuccess:I,size:"xs",onRemoveFriendPress:O}):null}},98260:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(27876),s=r(3008),a=r(77072),o=r(13778),c=r(66780),l=r(59396),d=r(8684),u=r(81568),p=r(97884),m=r(49828);const h=2;function y({mutualFriends:e,id:t,avatarSize:r=(0,m.c)("xl"),color:y="muted",font:g="body-3"}){var f;const v=(0,d.c)(),b=(0,i.OY)(),{count:S=0,friends:P=[]}=e||{},I=null!=(f=null==P?void 0:P.map((e=>e.avatar)))?f:[],E=(0,n.useCallback)((()=>{b((0,o.IB)({pathname:(0,p.c)("userFriends",{id:t})})),v({action:c.yz})}),[b,t,v]),w=(0,n.useMemo)((()=>{var e;if(!(null==P?void 0:P.length))return 1===S?(0,l.c)("1 mutual friend"):(0,l.c)("{count} mutual friends",{count:S});const t=null!=(e=null==P?void 0:P.slice(0,h).map((e=>e.displayName||e.username)))?e:[],r=S-P.length+(P.length-t.length);return r?1===r?(0,l.c)("Friends with {names} and 1 other",{names:t.join(", ")}):(0,l.c)("Friends with {names} and {count} others",{names:t.join(", "),count:r}):(0,l.c)("Friends with {names}",{names:t.reduce(((e,r,n)=>[e,r].join(n===t.length-1?" and ":", ")))})}),[S,P]);return S||(null==P?void 0:P.length)?(null==P?void 0:P.length)?n.createElement(s.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(u.c,{avatarSize:r,avatars:I,isDisabled:!t,label:w,numberOfLines:2,onPress:E})):n.createElement(s.ye,{orientation:"horizontal",verticalAlign:"center"},n.createElement(a.a,{color:y,font:g},w)):null}},85040:(e,t,r)=>{"use strict";r.d(t,{c:()=>rr});var n=r(11504),i=r(27876),s=r(85448),a=r(3008),o=r(41744),c=r(92432),l=r(84508),d=r(44500),u=r(85052),p=r(37660),m=r(35860),h=r(89064),y=r(59396),g=r(90012),f=r(29208),v=r(59956),b=r(66984),S=r(16416),P=r(23748),I=r(51912),E=r(57864),w=r(46028);const C=(0,E.M3)((e=>e.history),(e=>{const t=e[e.length-1];return t?`${t.pathname}${t.search}`:""})),O=(0,w.c)(C,(e=>e));var M=r(52180),T=r(35060),D=r(98260);function k({id:e,mutualFriends:t}){return n.createElement(D.c,{id:e,mutualFriends:t})}var x=r(61536),A=r(41452),R=r(35624),N=r(29164),L=r(23300),j=r(2536),U=r(12112),F=r(5788),V=r(91720),_=r(55616),W=r(85428),B=r(42536),H=r(77072),z=r(39864);function G({children:e,icon:t}){return n.createElement(a.ye,{gap:"xxs",orientation:"horizontal",verticalAlign:"center"},n.createElement(t,{size:"l"}),n.createElement(H.a,null,e))}function q({user:e,privacy:t}){const{username:r}=e,{bio:i,location:s,createdAt:c,plexPass:l,url:d,displayName:u,isMuted:p,isBlocked:m}=e,h=u||r,g=u?r:"";return n.createElement(a.ye,{align:"space-between",gap:"s",orientation:"horizontal"},n.createElement(a.ye,{gap:"s"},n.createElement(a.ye,{verticalAlign:"center"},n.createElement(a.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center",wrap:!0},n.createElement(H.a,{color:"primary",font:"heading-1"},h),m?n.createElement(j.k,{color:"accent",icon:U.default,label:(0,y.c)("Blocked")}):null,!m&&p?n.createElement(j.k,{color:"accent",icon:F.default,label:(0,y.c)("Muted")}):null),g?n.createElement(H.a,{color:"muted"},g):null),m?null:n.createElement(n.Fragment,null,i?n.createElement(H.a,{color:"muted"},i):null,n.createElement(a.ye,{gap:"s",orientation:"horizontal",wrap:!0},s?n.createElement(G,{icon:V.default},s):null,!l||t&&t.plexPass!==z.oL.Friends?null:n.createElement(G,{icon:_.default},(0,y.c)("Plex Pass")),!c||t&&t.createdAt!==z.oL.Friends?null:n.createElement(G,{icon:W.default},(0,y.c)("Joined {year}",{year:new Date(c).getFullYear()}))),d?n.createElement(G,{icon:B.default},n.createElement(o.c,{href:d,target:"_blank"},d)):null)))}var K=r(51760);const Q=parseInt(R.c.profileAvatarSize,10);function $({user:e,userStats:t,userPrivacy:r,children:s,isViewStateSyncUpsellVisible:o}){const c=(0,i.w1)(N.c);return n.createElement(a.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center",wrap:[!0,!0,!1]},n.createElement(a._U,{at:["l","m","s"]},n.createElement(L.c,{key:`avatar-${e.id}`,server:c,size:Q,url:e.avatar})),n.createElement(a.ye,{gap:"s",grow:!0,testID:"profileDetail"},n.createElement(q,{privacy:r,user:e}),s),(null==t?void 0:t.watchStats)&&!e.isBlocked?n.createElement(K.c,{isViewStateSyncUpsellVisible:o,stats:t.watchStats}):null)}var Y=r(86868),X=r(21928),J=r(58660),Z=r(68792),ee=r(80432),te=r(97884);function re(){return n.createElement(a.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center",width:"100%",wrap:!0},n.createElement(J.eE,{color:"default",href:(0,te.c)("editProfile"),icon:Z.default,label:(0,y.c)("Edit Profile")}),n.createElement(f.cp,{extendParentContextProviders:!0,metricsOrigin:d.eK},n.createElement(ee.c,{isAlwaysVisible:!0})))}var ne=r(22420),ie=r(47196);function se({user:e}){const{isAcceptFriendVisible:t,isAddFriendVisible:r,isCancelFriendVisible:i,isRemoveFriendVisible:s,isAdding:o,isAccepting:c,isRejecting:l,isCancelling:d,isRemoving:u,isRemovingSuccess:p,onAcceptFriendPress:m,onAddFriendPress:h,onRejectFriendPress:g,onCancelFriendPress:f,onRemoveFriendPress:v}=(0,ie.c)(e);return r?n.createElement(J.wP,{color:"accent",icon:"friend-add",label:(0,y.c)("Add Friend"),size:"m",waiting:o,onPress:h}):i?n.createElement(J.wP,{icon:"x",label:(0,y.c)("Cancel Request"),size:"m",waiting:d,onPress:f}):t?n.createElement(a.ye,{gap:"s",orientation:"horizontal"},n.createElement(J.wP,{color:"accent",disabled:l,icon:"friend-added",label:(0,y.c)("Accept Request"),size:"m",waiting:c,onPress:m}),n.createElement(J.wP,{disabled:c,icon:"x",label:(0,y.c)("Decline"),size:"m",waiting:l,onPress:g})):s?n.createElement(ne.c,{friend:{avatar:e.avatar,displayName:e.displayName,id:e.id,username:e.username,idRaw:"idRaw"in e?e.idRaw:-1},isRemoving:u,isRemovingSuccess:p,size:"m",onRemoveFriendPress:v}):null}var ae=r(9868),oe=r(51180),ce=r(38748),le=r(6240),de=r(3728),ue=r(76952),pe=r(24348),me=r(83672),he=r(624),ye=r(80280),ge=r(29412),fe=r(43196),ve=r(46572),be=r(66780),Se=r(46204),Pe=r(2024),Ie=r(46896),Ee=r(8684);const we={card:"GetStartedCardItem-card-vQHqC4",posterIcon:"GetStartedCardItem-posterIcon-pp_Rx_",image:"GetStartedCardItem-image-BP3dkz"};var Ce=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Te=(e,t)=>{var r={};for(var n in e)Oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ce)for(var n of Ce(e))t.indexOf(n)<0&&Me.call(e,n)&&(r[n]=e[n]);return r};const De=95;function ke(e){var t=Te(e,[]);const r=(0,Ee.c)(),i=(0,Ie.c)(t),s=t.item,c=(0,n.useCallback)((()=>{r({action:be.kB,pane:null==s?void 0:s.pane})}),[null==s?void 0:s.pane,r]);return s?n.createElement("div",{className:we.card,style:i.style},n.createElement(a.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},s.icon?n.createElement("div",{className:we.posterIcon},n.createElement(Se.c,{icon:s.icon,iconSize:"xxl",size:De})):null,s.imageSrc?n.createElement(Pe.c,{className:we.image,durationMilliseconds:0,height:De,src:s.imageSrc,width:De}):null,n.createElement(a.ye,{gap:"s"},n.createElement(H.a,{color:"inherit",font:"heading-3"},s.title),n.createElement(H.a,{color:"muted"},s.subtitle),n.createElement(o.c,{color:"accent",href:s.href,onPress:c},s.link)))):null}var xe=r(92784),Ae=r(49828);const Re={container:"ProfileGetStarted-container-zzWu6g",header:"ProfileGetStarted-header-A9IG0J VirtualHubScroller-hubHeader-vSW06t"};var Ne=Object.defineProperty,Le=Object.defineProperties,je=Object.getOwnPropertyDescriptors,Ue=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,We=(e,t)=>{for(var r in t||(t={}))Fe.call(t,r)&&_e(e,r,t[r]);if(Ue)for(var r of Ue(t))Ve.call(t,r)&&_e(e,r,t[r]);return e},Be=(e,t)=>Le(e,je(t));const He=(0,ge.c)({columnWidth:608,rowHeight:144,innerHorizontalPadding:(0,Ae.c)("xl"),outerPaddingRight:(0,Ae.c)("xl")});function ze(){return n.createElement(he.c,null,(0,y.c)("Get Started"))}function Ge({showRatings:e,showWatchlist:t}){const r=(0,i.w1)(N.c),{communityFriends:{friends:s,isPopulated:a}}=(0,i.w1)(me.c),{details:{uuid:o}}=(0,i.w1)(ve.c),{details:{bio:c,location:l,url:d}={},isPopulated:p}=(0,xe.c)(o),m=!(0,i.w1)((0,fe.c)("dismissProfileGetStartedCard"))&&p&&!c&&!l&&!d,h=(0,n.useMemo)((()=>e=>n.createElement(ke,Be(We({},e),{server:r}))),[r]),g=(0,n.useMemo)((()=>[m?{id:"profileGetStarted",title:(0,y.c)("Time to fill in the blanks"),subtitle:(0,y.c)("Its your profileso make the most of it! Share a photo, what you like to stream, and more."),link:(0,y.c)("Edit Profile"),href:(0,te.c)("editProfile"),icon:ce.default,pane:pe.Kg}:void 0,e?{id:"ratedGetStarted",title:(0,y.c)("Seen it? Loved it? Rate it!"),subtitle:(0,y.c)("Good, bad, or uglylet your friends know how you feel about what youre watching."),link:(0,y.c)("Add your first rating"),href:(0,te.c)("profileWatchHistory"),icon:le.default,pane:pe.S8}:void 0,t?{id:"discoverGetStarted",title:(0,y.c)("Save anything to your Watchlist"),subtitle:(0,y.c)("Keep track of what you want to watch next from any streaming service, all in one place."),link:(0,y.c)("Discover something new"),href:(0,te.c)("discoverWatchlist",{},{pivot:u.sV}),icon:de.default,pane:pe._w}:void 0,s.length?void 0:{id:"friendsGetStarted",title:(0,y.c)("Plex is better with friends!"),subtitle:(0,y.c)("Connect with friends in order to share recommendations, ratings, your Watchlist, and more!"),link:(0,y.c)("Add friends"),href:(0,te.c)("discoverPivot",{pivot:u.ik}),imageSrc:ue,pane:pe.kR}].filter(Boolean)),[s.length,m,e,t]);return a?n.createElement("div",{className:Re.container},n.createElement(ye.c,{cellComponentFactory:h,hub:{sourceURI:"getStarted"},hubHeaderClassName:Re.header,hubTitleComponent:ze,items:g,keyPropName:"id",layout:He,totalSize:g.length})):null}var qe=r(7148),Ke=r(67532),Qe=r(67604),$e=r(50536),Ye=r(36968),Xe=r(97576),Je=r(97623),Ze=r(99952);const et={hub:"ProfileHub-hub-pJZe_R",scroller:"ProfileHub-scroller-jXJXnP",hidden:"ProfileHub-hidden-xRTdTl"};var tt=Object.defineProperty,rt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,ot=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ct=(e,t)=>{for(var r in t||(t={}))st.call(t,r)&&ot(e,r,t[r]);if(it)for(var r of it(t))at.call(t,r)&&ot(e,r,t[r]);return e},lt=(e,t)=>rt(e,nt(t));function dt({uuid:e,isSignedInUser:t,privacyMode:r,privacyModalState:s,onVisibilityChange:a}){const{data:o,fetchMore:c,totalSize:l,placeholderSize:d,remove:u,error:p,isPopulated:m}=(0,Je.c)(e,t),h=(0,i.w1)($e.c),g=(0,n.useMemo)((()=>{var e;return(0,qe.c)({items:null!=(e=null==o?void 0:o.map((e=>e.metadataItem)))?e:[]})}),[o]),f=(0,n.useMemo)((()=>(0,Qe.c)({listType:Ke.a.Mixed,listStyle:Ke.y.List,columnWidth:h,titleCount:4})),[h]),v=(0,n.useMemo)((()=>e=>n.createElement(Xe.c,lt(ct({},e),{canRemoveActivity:t,removeActivity:t?u:void 0}))),[t,u]),b=(0,n.useMemo)((()=>()=>t&&s?n.createElement(Ye.c,{href:(0,te.c)("profileRatings"),privacyModalState:s,privacyMode:r,title:(0,y.c)("My Ratings")}):n.createElement(he.c,{href:(0,te.c)("profileRatings",{id:e})},(0,y.c)("Ratings"))),[t,s,r,e]);return(0,n.useEffect)((()=>{o&&(null==a||a(o.length>0))}),[a,o]),p&&!o?null:n.createElement("div",{className:et.hub},n.createElement(ye.c,{cellComponentFactory:v,className:et.scroller,hub:g,hubTitleComponent:b,items:null!=o?o:[],keyPropName:"id",layout:f,storageKey:m?(0,Ze.c)("ratings",e):"",totalSize:o?l:d,onPageRequest:c}))}var ut=r(16092),pt=Object.defineProperty,mt=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,vt=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bt=(e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&vt(e,r,t[r]);if(yt)for(var r of yt(t))ft.call(t,r)&&vt(e,r,t[r]);return e},St=(e,t)=>mt(e,ht(t));function Pt({uuid:e,isSignedInUser:t,privacyModalState:r,privacyMode:s,onVisibilityChange:a}){const{data:o,totalSize:c,error:l,placeholderSize:d,isPopulated:u,fetchMore:p,insert:m,remove:h}=(0,ut.c)(e,t),g=(0,i.w1)($e.c);(0,n.useEffect)((()=>{o&&(null==a||a(o.length>0))}),[o,a]);const f=(0,n.useMemo)((()=>{var e;return(0,qe.c)({items:null!=(e=null==o?void 0:o.map((e=>e.metadataItem)))?e:[]})}),[o]),v=(0,n.useMemo)((()=>(0,Qe.c)({listType:Ke.a.Clip,listStyle:Ke.y.Shelf,columnWidth:g,titleCount:3})),[g]),b=(0,n.useMemo)((()=>e=>n.createElement(Xe.c,St(bt({},e),{canEditWatchedDate:t,canRemoveActivity:t,insertActivity:m,removeActivity:h,type:Ke.a.Clip}))),[m,t,h]),S=(0,n.useMemo)((()=>()=>t&&r?n.createElement(Ye.c,{href:(0,te.c)("profileWatchHistory"),privacyModalState:r,privacyMode:s,title:(0,y.c)("My Watch History")}):n.createElement(he.c,{href:(0,te.c)("profileWatchHistory",{id:e})},(0,y.c)("Watch History"))),[t,r,s,e]);return l&&!o?null:n.createElement("div",{className:et.hub},n.createElement(ye.c,{cellComponentFactory:b,className:et.scroller,hub:f,hubTitleComponent:S,items:null!=o?o:[],keyPropName:"id",layout:v,storageKey:u?(0,Ze.c)("watchHistory",e):"",totalSize:o?c:d,onPageRequest:p}))}var It=r(40772),Et=Object.defineProperty,wt=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,Mt=(e,t,r)=>t in e?Et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Tt=(e,t)=>{for(var r in t||(t={}))Ct.call(t,r)&&Mt(e,r,t[r]);if(wt)for(var r of wt(t))Ot.call(t,r)&&Mt(e,r,t[r]);return e};function Dt({uuid:e,isSignedInUser:t,privacyMode:r,privacyModalState:s,onVisibilityChange:a}){const{data:o,fetchMore:c,totalSize:l,placeholderSize:d,error:u,isPopulated:p}=(0,It.c)(e,t),m=(0,i.w1)($e.c),h=(0,n.useMemo)((()=>{var e;return(0,qe.c)({items:null!=(e=null==o?void 0:o.map((e=>e.metadataItem)))?e:[]})}),[o]),g=(0,n.useMemo)((()=>(0,Qe.c)({listType:Ke.a.Mixed,listStyle:Ke.y.List,columnWidth:m})),[m]),f=(0,n.useMemo)((()=>e=>n.createElement(Xe.c,Tt({},e))),[]),v=(0,n.useMemo)((()=>()=>t&&s?n.createElement(Ye.c,{href:(0,te.c)("profileWatchlist"),privacyModalState:s,privacyMode:r,title:(0,y.c)("My Watchlist")}):n.createElement(he.c,{href:(0,te.c)("profileWatchlist",{id:e})},(0,y.c)("Watchlist"))),[t,s,r,e]);return(0,n.useEffect)((()=>{o&&(null==a||a(o.length>0))}),[o,a]),u&&!o?null:n.createElement("div",{className:et.hub},n.createElement(ye.c,{cellComponentFactory:f,className:et.scroller,hub:h,hubTitleComponent:v,items:null!=o?o:[],keyPropName:"id",layout:g,storageKey:p?(0,Ze.c)("watchlist",e):"",totalSize:o?l:d,onPageRequest:c}))}var kt=r(53952),xt=r(64748),At=r(20232);function Rt({isFriend:e,isSignedInUser:t,user:r,userStats:i,userPrivacy:s}){const o=(0,ae.y)(),[c,l]=(0,n.useState)(!0),[d,u]=(0,n.useState)(!0),[p,m]=(0,n.useState)(!0),[h,g]=(0,n.useState)(!0),f=`watchHistory-${r.id}-friend-${e}`,v=`watchlist-${r.id}-friend-${e}`,b=`ratings-${r.id}-friend-${e}`;return n.createElement(a.ye,null,n.createElement(Pt,{key:f,isSignedInUser:t,privacyModalState:o,privacyMode:null==s?void 0:s.watchHistory,uuid:r.id,onVisibilityChange:l}),n.createElement(Dt,{key:v,isFriend:e,isSignedInUser:t,privacyModalState:o,privacyMode:null==s?void 0:s.watchlist,uuid:r.id,onVisibilityChange:u}),n.createElement(dt,{key:b,isSignedInUser:t,privacyModalState:o,privacyMode:null==s?void 0:s.ratings,uuid:r.id,onVisibilityChange:m}),t?n.createElement(oe.c,{privacyModalState:o,privacyMode:null==s?void 0:s.friends,useGetFriends:xt.c}):null,t&&void 0!==p&&void 0!==d?n.createElement(Ge,{showRatings:!p,showWatchlist:!d}):null,!e||r.isBlocked||(null==i?void 0:i.watchStats)||h||c||d||p?null:n.createElement(a.ye,{align:"center",orientation:"horizontal",paddingBottom:"m",paddingTop:"xxl"},n.createElement(H.a,{color:"muted",font:"body-1",testID:"privateAccount"},(0,y.c)("This account's Plex Activity is Private"))),e||t||h||c||d||p?null:n.createElement(a.ye,{align:"center",orientation:"horizontal",paddingBottom:"m",paddingTop:"xxl"},n.createElement(H.a,{color:"muted",font:"body-1",testID:"privateAccount"},(0,y.c)("Plex Activity is only viewable between Friends"))),t?null:n.createElement(oe.c,{useGetFriends:kt.c,uuid:r.id,onSetVisibility:g}),t?n.createElement(At.c,{buttonLabel:(0,y.c)("Save"),isOpen:o.isOpen,onClose:o.onClose}):null)}var Nt=r(96996),Lt=r(86936),jt=r(36848),Ut=r(95460),Ft=r(92796),Vt=Object.defineProperty,_t=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable,Gt=(e,t,r)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qt=(e,t)=>{for(var r in t||(t={}))Ht.call(t,r)&&Gt(e,r,t[r]);if(Bt)for(var r of Bt(t))zt.call(t,r)&&Gt(e,r,t[r]);return e},Kt=(e,t)=>_t(e,Wt(t));function Qt({user:e}){const{username:t}=e;return n.createElement(b.c,null,n.createElement(Ft.c,null,n.createElement(x.c,{menu:n.createElement(Y.c,{user:e}),subtitle:{title:t},title:{title:(0,y.c)("People"),href:(0,te.c)("discoverHome",{pivot:u.ik})}})),n.createElement(X.c,null,n.createElement(A.o,null,n.createElement($,{user:Kt(qt({},e),{avatar:"",displayName:""})}))))}var $t=r(76872),Yt=Object.defineProperty,Xt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable,er=(e,t,r)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tr=(e,t)=>{for(var r in t||(t={}))Jt.call(t,r)&&er(e,r,t[r]);if(Xt)for(var r of Xt(t))Zt.call(t,r)&&er(e,r,t[r]);return e};function rr({showHeader:e=!0}){const{addToast:t,clearToasts:r}=(0,c.Wo)(),E=(0,v.c)(),w=(0,s.IT)(),C=(0,i.w1)(O),D=function(){const e=(0,s.Uz)(),t=(0,I.c)({machineIdentifier:h.A,providerIdentifier:m.Im,contentDirectoryID:p.qU,pivotID:void 0,pageType:void 0,directoryKey:void 0});return(0,n.useMemo)((()=>{const e=(0,jt.c)((0,s.Yz)(Ut.c.discoverPivot,{pivot:u.ik})),r=(0,jt.c)((0,s.Yz)(Ut.c.discoverPivot,{pivot:u.YD})),n=(null==t?void 0:t.id)===u.ik?(0,jt.c)((0,s.Yz)(Ut.c.discoverHome)):-1,i=(0,jt.c)(Ut.c.friends),a=(0,jt.c)(Ut.c.profile);let o=-1;return r>-1&&a>-1?o=Math.max(r,a):r>-1?o=r:a>-1&&(o=a),(e>i||n>i)&&(e>o||n>o)}),[e.location,null==t?void 0:t.id])}(),{isFriend:R,isSignedInUser:N,details:L,stats:j,idFromParams:U,isViewStateSyncPromptAvailable:F,errorMessage:V,isPopulated:_,isPending:W}=(0,Lt.c)(),{privacy:B,error:H}=(0,Nt.c)(!_||!N),z=(0,T.c)(g.s.IncludeDiscoverSource),G=(0,I.c)({machineIdentifier:h.A,providerIdentifier:m.Im,contentDirectoryID:p.qU,pivotID:void 0,pageType:void 0,directoryKey:void 0}),q=(0,n.useMemo)((()=>(0,s.ot)(C,(0,s.Yz)(Ut.c.discoverPivot,{pivot:u.YD}))||(null==G?void 0:G.id)===u.YD&&(0,s.ot)(C,Ut.c.discoverHome)||(0,s.ot)(C,Ut.c.home)),[C,null==G?void 0:G.id]),K=(0,n.useMemo)((()=>{if(!L)return;let e="";return e=R?l.FRIEND:R||N?q?l.DISCOVER:l.SELF:l.NON_FRIEND,e}),[L,R,q,N]);(0,n.useEffect)((()=>{if(!K||C!==`${w.pathname}${w.search}`||!q&&!(0,s.ot)(C,Ut.c.profile)&&!(0,s.ot)(C,Ut.c.userProfile))return;const e=function(){const e=(0,M.WI)("appModel").get("history"),t=e[e.length-1];return t?t.origin:void 0}();E(tr({contextTuple:[K,f._Q,f._Q],origin:q?d.At:e},!N&&{muted:!!(null==L?void 0:L.isMuted),blocked:!!(null==L?void 0:L.isBlocked)}))}),[K,C,null==L?void 0:L.isBlocked,null==L?void 0:L.isMuted,q,N,w.pathname,w.search,E]);const Q=(0,n.useMemo)((()=>N?(0,y.c)("My Profile"):R&&!D||!z?(0,y.c)("Friends"):(0,y.c)("People")),[N,z,R,D]),J=(0,n.useMemo)((()=>{if(!N)return R&&!D||!z?(0,te.c)("friends"):(0,te.c)("discoverPivot",{pivot:u.ik})}),[R,z,D,N]);return(0,n.useEffect)((()=>{L&&(V||H)&&(r(),t({color:"alert",description:V||(null==H?void 0:H.message)||(0,y.c)("Something went wrong. Please try again."),type:"foreground",closeButtonAccessibilityLabel:(0,y.c)("Close")}))}),[t,r,L,V,H]),!_&&!V||W?n.createElement(S.c,null,n.createElement(P.c,null)):(null==L?void 0:L.isBlocked)?n.createElement(Qt,{user:L}):!L||V&&L.id!==U?n.createElement($t.c,{description:(0,y.c)("Please try again"),title:(0,y.c)("An error occurred while loading this profile.")},n.createElement(o.c,{href:(0,te.c)("profile")},(0,y.c)("Go Back"))):n.createElement(f.cp,{metricsContextParam:K},n.createElement(b.c,null,e?n.createElement(Ft.c,null,n.createElement(x.c,{menu:N?void 0:n.createElement(Y.c,{user:L}),subtitle:{title:L.displayName||L.username},title:{href:J,title:Q}})):null,n.createElement(X.c,{key:`profile-content-${L.id}`},n.createElement(a.ye,{gap:"l",paddingBottom:"l"},n.createElement(A.o,null,n.createElement($,{isViewStateSyncUpsellVisible:F,user:L,userStats:j},n.createElement(a.ye,{align:"left",gap:"m",orientation:"vertical"},L?n.createElement(k,{id:L.id,mutualFriends:N?void 0:L.mutualFriends}):null,N?n.createElement(re,null):null,!N&&L?n.createElement(se,{user:L}):null))),n.createElement(Rt,{isFriend:R,isSignedInUser:N,user:L,userPrivacy:B,userStats:j})))))}},21796:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(11504),i=r(27876),s=r(3972),a=r(57864),o=r(30708);const c=function(e){return(0,a.M3)(o.c,(t=>{var r;return null!=(r=t[e])?r:{}}))};var l=r(39864),d=r(56784),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e},b=(e,t)=>p(e,m(t));function S(e){const t=(0,i.OY)(),r=e===l.gV.Received?s.O.ReceivedFriendsRequests:s.O.SentFriendsRequests,a=(0,i.w1)(c(r));return{remove:(0,n.useCallback)((r=>{let n="";return Object.keys(a).forEach((i=>{JSON.parse(i).type===e&&t(d.mk.util.updateQueryData("friendRequests",JSON.parse(i),(e=>{e.friendRequests.nodes=e.friendRequests.nodes.filter((e=>(e.user.id===r&&(n=i),e.user.id!==r)))})))})),n&&t(d.mk.util.updateQueryData("GetPendingRequestsCount",{type:e},(e=>{const t=e.friendRequestsCount-1;return b(v({},e),{friendRequestsCount:t})}))),n}),[t,a,e])}}},47196:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(27876),s=r(92432),a=r(66780),o=r(59396),c=r(20916),l=r(29164),d=r(23300),u=r(8684),p=r(39864),m=r(49828),h=r(56784);function y(e){const{addToast:t}=(0,s.Wo)(),r=(0,u.c)(),y=(0,i.w1)(l.c),[g,f]=(0,n.useState)(e.friendStatus),{action:v,isLoading:b,isSuccess:S}=(0,c.c)(h.C2),{action:P,isLoading:I,isSuccess:E}=(0,c.c)(h.ug,!0),{action:w,isLoading:C,isSuccess:O}=(0,c.c)(h.ug),{action:M,isLoading:T,isSuccess:D}=(0,c.c)(h.k1,!0),{action:k,isLoading:x,isSuccess:A}=(0,c.c)(h.sb);(0,n.useEffect)((()=>{f(e.friendStatus)}),[e.friendStatus]);const R=(0,n.useCallback)((t=>{t.stopPropagation(),v(e.id,p.Ky.InviteSent),r({action:a.op})}),[v,r,e.id]),N=(0,n.useCallback)((t=>{t.stopPropagation(),w(e.id,null),r({action:a.oL})}),[w,r,e.id]),L=(0,n.useCallback)((t=>{t.stopPropagation(),P(e.id,null,p.Ky.Friends),r({action:a.u})}),[P,r,e.id]),j=(0,n.useCallback)((t=>{t.stopPropagation(),M(e.id,p.Ky.Friends),r({action:a._k})}),[M,r,e.id]),U=(0,n.useCallback)((t=>{t.stopPropagation(),k(e.id,null),r({action:a.YD})}),[k,r,e.id]);return(0,n.useEffect)((()=>{S&&(f(p.Ky.InviteSent),t({color:"confirm",header:e.displayName||e.username,description:(0,o.c)("Friend Request Sent"),type:"background",customIcon:n.createElement(d.c,{server:y,size:(0,m.c)("xl"),url:e.avatar})}))}),[t,S,y,e.avatar,e.displayName,e.username]),(0,n.useEffect)((()=>{D&&f(p.Ky.Friends)}),[D]),(0,n.useEffect)((()=>{(A||E||O)&&f(null)}),[O,A,E]),{isAcceptFriendVisible:g===p.Ky.InviteReceived,isAddFriendVisible:!g,isCancelFriendVisible:g===p.Ky.InviteSent,isRemoveFriendVisible:g===p.Ky.Friends,isAccepting:T,isAdding:b,isRejecting:x,isRemoving:I,isRemovingSuccess:E,isCancelling:C,friendStatus:g,onAcceptFriendPress:j,onAddFriendPress:R,onRejectFriendPress:U,onCancelFriendPress:N,onRemoveFriendPress:L}}},88716:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(27876),i=r(35860),s=r(39460),a=r(17464),o=r(48800);const c=function(){const e=(0,s.c)(),t=(0,n.w1)((0,a.c)(i.Im,e));return null!=t?t:o.c}},97623:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(27876),s=r(11096),a=r(93808),o=r(66576),c=r(59382),l=r(46136),d=r(90588),u=r(88716),p=r(57608),m=r(36048),h=r(99952),y=r(39864),g=r(21040),f=r(11528),v=Object.defineProperty,b=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e};const O=50,M=(e,t)=>e.map((({metadataItem:e,rating:r,id:n})=>{var i;const o=(0,d.c)(e,t);return{type:y.IL.Rating,metadataItem:(c=C({},o),l={displayImage:s.OQ.CoverPoster,displayFields:o.type===a.WW.Episode?[s.Mv.GrandparentTitle,s.Mv.EpisodeTitleAndIdentifier,s.Mv.ActivityRating]:[...null!=(i=o.displayFields)?i:[],s.Mv.ActivityRating]},b(c,S(l))),activity:{rating:r},id:n};var c,l}));function T(e,t){const r=(0,i.OY)(),s=(0,u.c)(),a=(0,i.w1)((0,l.c)(m.kH.Ratings)),{removeItem:d}=(0,p.c)(m.gK.GetRatingsHub),y=(0,g.c)(a),[v,b]=(0,n.useState)(),{data:S,isLoading:P,isPopulated:I,totalSize:E,error:w,refetch:C,remove:T,getNextPage:D}=(0,o.c)(f.mk.endpoints.GetRatingsHub,{key:(0,h.c)("ratings",e),fetchSize:O,args:{uuid:e,skipUserState:!0},transformResponse:e=>({data:e.user.ratingsV2.nodes,endCursor:e.user.ratingsV2.pageInfo.endCursor,hasNextPage:e.user.ratingsV2.pageInfo.hasNextPage})}),k=(0,n.useCallback)((e=>{T(e,(e=>e.id)),d(e)}),[d,T]);return(0,n.useEffect)((()=>{a&&r(f.mk.util.invalidateTags([{type:m.gK.GetUserStatistics,id:e}]))}),[r,a,e]),(0,n.useEffect)((()=>{!y&&a&&t&&(C(),r(c.c.actions.markProfileHubPopulated({hub:m.kH.Ratings})))}),[r,t,a,y,C]),(0,n.useEffect)((()=>{S&&s&&b(M(S,s.identifier))}),[S,s]),(0,n.useEffect)((()=>{!y&&a&&t&&(C(),r(c.c.actions.markProfileHubPopulated({hub:m.kH.Ratings})))}),[r,t,a,y,C]),{data:v,placeholderSize:24,isPending:P,isPopulated:I,totalSize:E,error:w,remove:k,fetchMore:D}}},92784:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11528);function i(e,t=!1){const{refetch:r,isFetching:i,data:s,error:a}=(0,n.kl)({uuid:null!=e?e:""},{skip:t||!e});return{isPending:i&&(!(null==s?void 0:s.user)||s.user.id!==e),isPopulated:!!(null==s?void 0:s.user),details:null==s?void 0:s.user,error:a,refetch:r}}},53952:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(66576),s=r(28636),a=r(56784),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>c(e,l(t));function g(e="",t){const{data:r,isLoading:o,isPopulated:c,totalSize:l,error:d,update:u,getNextPage:p}=(0,i.c)(a.mk.endpoints.GetFriends,{key:`friends-of-${e}`,args:{uuid:e,sort:t},fetchSize:s.w,transformResponse:e=>({data:e.user.friends.nodes.map((e=>({avatar:e.avatar,id:e.id,displayName:e.displayName,username:e.username,mutualFriends:e.mutualFriends,friendStatus:e.friendStatus,idRaw:-1}))),endCursor:e.user.friends.pageInfo.endCursor,hasNextPage:e.user.friends.pageInfo.hasNextPage}),selector:a.mk.endpoints.GetFriends.select((0,s.c)({id:e,sort:t}))}),m=(0,n.useCallback)(((e,t)=>{const n=null==r?void 0:r.find((t=>t.id===e));return n?u(e,y(h({},n),{friendStatus:t}),(e=>e.id)):()=>null}),[r,u]);return{friends:null!=r?r:[],isPending:o,isPopulated:c,notificationCount:0,totalSize:l,errorMessage:null==d?void 0:d.message,getNextPage:p,updateFriendStatus:m}}},96996:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11528);function i(e=!1){const{data:t,isLoading:r,isSuccess:i,error:s,refetch:a}=(0,n.qo)(void 0,{skip:e});return{isPending:r,isPopulated:i,privacy:null==t?void 0:t.userPrivacy,error:s,refetch:a}}},16092:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(27876),s=r(11096),a=r(93808),o=r(66576),c=r(59382),l=r(46136),d=r(90588),u=r(88716),p=r(57608),m=r(36048),h=r(99952),y=r(39864),g=r(21040),f=r(11528),v=Object.defineProperty,b=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e};const O=50,M=(e,t)=>e.map((({metadataItem:e,id:r,date:n})=>{const i=(0,d.c)(e,t);return{type:y.IL.WatchHistory,metadataItem:(o=C({},i),c={displayImage:s.OQ.CoverArt,displayFields:i.type===a.WW.Episode?[s.Mv.GrandparentTitle,s.Mv.EpisodeTitleAndIdentifier]:i.displayFields},b(o,S(c))),activity:{viewedAt:n},id:r};var o,c}));function T(e,t){const r=(0,i.OY)(),s=(0,u.c)(),a=(0,i.w1)((0,l.c)(m.kH.WatchHistory)),d=(0,g.c)(a),[y,v]=(0,n.useState)(),{removeItem:b}=(0,p.c)(m.gK.GetWatchHistoryHub);(0,n.useEffect)((()=>{a&&r(f.mk.util.invalidateTags([{type:m.gK.GetUserStatistics,id:e}]))}),[r,a,e]);const{data:S,isLoading:P,isPopulated:I,totalSize:E,error:w,remove:C,replace:T,getNextPage:D,refetch:k}=(0,o.c)(f.mk.endpoints.GetWatchHistoryHub,{key:(0,h.c)("watchHistory",e),fetchSize:O,args:{uuid:e,skipUserState:!0},transformResponse:e=>({data:e.user.watchHistory.nodes,endCursor:e.user.watchHistory.pageInfo.endCursor,hasNextPage:e.user.watchHistory.pageInfo.hasNextPage})}),x=(0,n.useCallback)((e=>{const t=null==S?void 0:S.find((t=>t.id===e));return C(e,(e=>e.id)),b(e),t}),[S,C,b]),A=(0,n.useCallback)(((e,t)=>{const r=[...(null==S?void 0:S.filter((({id:t})=>t!==e.id)))||[]];r.splice(t,0,e),T(r)}),[S,T]);return(0,n.useEffect)((()=>{!d&&a&&t&&(k(),r(c.c.actions.markProfileHubPopulated({hub:m.kH.WatchHistory})))}),[r,t,a,d,k]),(0,n.useEffect)((()=>{S&&s&&v(M(S,s.identifier))}),[S,s]),{data:y,placeholderSize:12,isPending:P,isPopulated:I,totalSize:E,error:w,remove:x,fetchMore:D,insert:A}}},40772:(e,t,r)=>{"use strict";r.d(t,{c:()=>O});var n=r(11504),i=r(27876),s=r(11096),a=r(66576),o=r(59382),c=r(46136),l=r(90588),d=r(88716),u=r(36048),p=r(99952),m=r(39864),h=r(21040),y=r(11528),g=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(b)for(var r of b(t))P.call(t,r)&&I(e,r,t[r]);return e};const w=50,C=(e,t)=>e.map((e=>{const r=(0,l.c)(e,t);return{type:m.IL.Watchlist,id:e.id,metadataItem:(n=E({},r),i={displayImage:s.OQ.CoverPoster},f(n,v(i)))};var n,i}));function O(e,t){const r=(0,i.OY)(),s=(0,d.c)(),l=(0,i.w1)((0,c.c)(u.kH.Watchlist)),m=(0,h.c)(l),[g,f]=(0,n.useState)(),{data:v,isLoading:b,isPopulated:S,totalSize:P,error:I,remove:E,getNextPage:O,refetch:M}=(0,a.c)(y.mk.endpoints.GetWatchlistHub,{key:(0,p.c)("watchlist",e),fetchSize:w,args:{uuid:e,skipUserState:!0},transformResponse:e=>({data:e.user.watchlist.nodes,endCursor:e.user.watchlist.pageInfo.endCursor,hasNextPage:e.user.watchlist.pageInfo.hasNextPage})}),T=(0,n.useCallback)((e=>{E(e,(e=>e.id))}),[E]);return(0,n.useEffect)((()=>{!m&&l&&t&&(M(),r(o.c.actions.markProfileHubPopulated({hub:u.kH.Watchlist})))}),[r,t,l,m,M]),(0,n.useEffect)((()=>{v&&s&&f(C(v,s.identifier))}),[v,s]),{data:g,placeholderSize:24,isPending:b,isPopulated:S,totalSize:P,error:I,remove:T,fetchMore:O}}},86936:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(11504),i=r(27876),s=r(85448),a=r(43196),o=r(46572),c=r(34708),l=r(86636),d=r(83672),u=r(92784),p=r(26184),m=r(11528),h=Object.defineProperty,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e};function S(){var e;const{id:t}=(0,s.W4)(),r=(0,p.c)(),h=(0,i.w1)((0,a.c)("hasSeenViewStateSyncModal")),{isPopulated:y,friend:g,error:f,isParamsPopulated:v}=function(){const e=(0,i.OY)(),{id:t}=(0,s.W4)(),{communityFriends:{error:r,isPending:a,isPopulated:o}}=(0,i.w1)(d.c);(0,n.useEffect)((()=>{!t||r||a||o||e(c.c.actions.fetchCommunityFriends())}),[e,r,t,a,o]);const u=(0,i.w1)((0,l.c)(t));return t?{friend:u,isPopulated:o,isParamsPopulated:!0,error:r}:{isParamsPopulated:!1,isPopulated:!0,error:r}}(),{details:S,viewStateSync:{consent:P},isPopulated:I,error:E}=(0,i.w1)(o.c),{details:w,isPending:C,isPopulated:O,error:M}=(0,u.c)(null!=t?t:S.uuid),{data:T,error:D}=(0,m.Kw)({uuid:null!=t?t:S.uuid}),k=v&&!!g,x=!v||S.uuid===t,A=(0,n.useMemo)((()=>y&&I&&O?w&&g&&w&&O?b(b({},{avatar:g.avatar,displayName:g.displayName,id:g.id,username:g.username,idRaw:g.idRaw}),w):w:null),[g,y,I,O,w]);return{isPopulated:null!==A&&(y||I||O),isPending:C,errorMessage:(null==(e=v?f:E)?void 0:e.message)||(null==M?void 0:M.message)||(null==D?void 0:D.message),isFriend:k,isSignedInUser:x,idFromParams:v?null==g?void 0:g.id:void 0,isViewStateSyncPromptAvailable:x&&(r&&"notSet"===P||"denied"===P)&&!h,details:A,stats:null==T?void 0:T.user}}},18915:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(85448),s=r(85052),a=r(37660),o=r(35860),c=r(89064),l=r(51912),d=r(36848),u=r(95460);function p(){const e=(0,l.c)({machineIdentifier:c.A,providerIdentifier:o.Im,contentDirectoryID:a.qU,pivotID:void 0,pageType:void 0,directoryKey:void 0});return(0,n.useMemo)((()=>{const t=(0,d.c)(u.c.profile),r=(0,d.c)(u.c.userProfile),n=(0,d.c)((0,i.Yz)(u.c.discoverPivot,{pivot:s.YD})),a=(null==e?void 0:e.id)===s.YD?(0,d.c)((0,i.Yz)(u.c.discoverHome)):-1,o=Math.max(r,t);return Math.max(a,n)>o}),[null==e?void 0:e.id])}},57608:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(27876),s=r(57864),a=r(30708);const o=function(e){return(0,s.M3)(a.c,(t=>{var r;return null!=(r=t[e])?r:{}}))};var c=r(11528);function l(e){const t=(0,i.OY)(),r=(0,i.w1)(o(e));return{removeItem:(0,n.useCallback)((n=>{Object.keys(r).forEach((r=>{t(c.mk.util.updateQueryData(e,JSON.parse(r),(e=>{"watchHistory"in e.user?e.user.watchHistory.nodes=e.user.watchHistory.nodes.filter((e=>e.id!==n)):"ratingsV2"in e.user&&(e.user.ratingsV2.nodes=e.user.ratingsV2.nodes.filter((e=>e.id!==n)))})))}))}),[t,e,r]),insertItemByDate:(0,n.useCallback)((e=>{let n,i=0,s=-1;const a=new Date(e.date);return Object.keys(r).forEach((r=>{t(c.mk.util.updateQueryData("GetWatchHistoryHub",JSON.parse(r),(t=>{"watchHistory"in t.user&&t.user.watchHistory.nodes.map(((r,o)=>{const c=new Date(r.date);(!n||n>a)&&a>=c&&(s=i,t.user.watchHistory.nodes.splice(o,0,e)),n=c,i++}))})))})),s}),[t,r])}}},64748:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(27876),i=r(34708),s=r(19388),a=r(24180),o=r(82420),c=r(39864),l=r(58980);function d(){const{friends:e,isPopulated:t,isPending:r,error:d}=(0,l.c)(s.c,i.c.actions.fetchCommunityFriends),u=(0,n.w1)(o.c),{count:p}=(0,a.c)(c.gV.Received),m=u.length+p;return{errorMessage:null==d?void 0:d.message,friends:e,isPending:r,isPopulated:t,notificationCount:m,totalSize:e.length}}},36048:(e,t,r)=>{"use strict";r.d(t,{Ix:()=>i,gK:()=>s,kH:()=>n});var n=(e=>(e.Ratings="ratings",e.Watchlist="watchlist",e.WatchHistory="watchHistory",e))(n||{}),i=(e=>(e.Ratings="ratings",e.Watchlist="watchlist",e.WatchHistory="watchHistory",e.Friends="friends",e.Profile="profile",e))(i||{}),s=(e=>(e.GetUserDetails="GetUserDetails",e.GetRatingsHub="GetRatingsHub",e.GetWatchHistoryHub="GetWatchHistoryHub",e.GetWatchlistHub="GetWatchlistHub",e.GetUserStatistics="GetUserStatistics",e))(s||{})},56784:(e,t,r)=>{"use strict";r.d(t,{C2:()=>s,k1:()=>a,mk:()=>n,oX:()=>h,sb:()=>o,ug:()=>i});const n=r(57512).m.injectEndpoints({endpoints:e=>({removeFriend:e.mutation({query:e=>({document:"\n    mutation removeFriend($input: RemoveFriendMutationInput!) {\n  removeFriend(input: $input)\n}\n    ",variables:e})}),addFriend:e.mutation({query:e=>({document:"\n    mutation addFriend($input: FriendMutationInput!) {\n  addFriend(input: $input)\n}\n    ",variables:e})}),acceptFriend:e.mutation({query:e=>({document:"\n    mutation acceptFriend($input: AcceptFriendMutationInput!) {\n  acceptFriend(input: $input)\n}\n    ",variables:e})}),rejectFriend:e.mutation({query:e=>({document:"\n    mutation rejectFriend($input: FriendMutationInput!) {\n  rejectFriend(input: $input)\n}\n    ",variables:e})}),friendRequests:e.query({query:e=>({document:"\n    query friendRequests($type: PendingFriendshipType!, $first: PaginationInt, $after: String) {\n  friendRequests(type: $type, first: $first, after: $after) {\n    nodes {\n      ...UserFriendFragment\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n    \n    fragment UserFriendFragment on FriendRequest {\n  createdAt\n  user {\n    avatar\n    bio\n    displayName\n    friendStatus\n    id\n    isBlocked\n    isMuted\n    location\n    plexPass\n    url\n    username\n    mutualFriends {\n      count\n      friends {\n        avatar\n        displayName\n        id\n        username\n      }\n    }\n    idRaw\n  }\n}\n    ",variables:e})}),GetPendingRequestsCount:e.query({query:e=>({document:"\n    query GetPendingRequestsCount($type: PendingFriendshipType!) {\n  friendRequestsCount(type: $type)\n}\n    ",variables:e})}),GetFriends:e.query({query:e=>({document:"\n    query GetFriends($uuid: ID!, $first: PaginationInt, $after: String, $sort: FriendsSort) {\n  user(id: $uuid) {\n    friends(sort: $sort, first: $first, after: $after) {\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n      nodes {\n        avatar\n        displayName\n        username\n        id\n        friendStatus\n        mutualFriends {\n          count\n          friends {\n            avatar\n            displayName\n            username\n          }\n        }\n      }\n    }\n  }\n}\n    ",variables:e})}),friendSuggestions:e.query({query:e=>({document:"\n    query friendSuggestions {\n  suggestedUsers(limit: 10) {\n    avatar\n    displayName\n    username\n    id\n    friendStatus\n    mutualFriends {\n      count\n    }\n  }\n}\n    ",variables:e})})})}),{useRemoveFriendMutation:i,useAddFriendMutation:s,useAcceptFriendMutation:a,useRejectFriendMutation:o,useFriendRequestsQuery:c,useLazyFriendRequestsQuery:l,useGetPendingRequestsCountQuery:d,useLazyGetPendingRequestsCountQuery:u,useGetFriendsQuery:p,useLazyGetFriendsQuery:m,useFriendSuggestionsQuery:h,useLazyFriendSuggestionsQuery:y}=n},11528:(e,t,r)=>{"use strict";r.d(t,{It:()=>D,Kw:()=>b,U_:()=>T,cc:()=>k,i4:()=>x,im:()=>M,kl:()=>f,mk:()=>d,oL:()=>s,qo:()=>C,uC:()=>u,wv:()=>l});var n=r(57512),i=r(32512),s=(e=>(e.Friends="FRIENDS",e.FriendsOfFriends="FRIENDS_OF_FRIENDS",e.Private="PRIVATE",e.Public="PUBLIC",e))(s||{});const a=`\n    query GetWatchlistHub($uuid: ID = "", $first: PaginationInt!, $after: String, $skipUserState: Boolean = false) {\n  user(id: $uuid) {\n    watchlist(first: $first, after: $after) {\n      nodes {\n        ...itemFields\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        endCursor\n      }\n    }\n  }\n}\n    ${i.Y5}`,o=`\n    query GetRatingsHub($uuid: ID = "", $first: PaginationInt!, $after: String, $skipUserState: Boolean = false) {\n  user(id: $uuid) {\n    ratingsV2(first: $first, after: $after) {\n      nodes {\n        metadataItem {\n          ...itemFields\n        }\n        id\n        rating\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        endCursor\n      }\n    }\n  }\n}\n    ${i.Y5}`,c=`\n    query GetWatchHistoryHub($uuid: ID = "", $first: PaginationInt!, $after: String, $skipUserState: Boolean = false) {\n  user(id: $uuid) {\n    watchHistory(first: $first, after: $after) {\n      nodes {\n        metadataItem {\n          ...itemFields\n        }\n        date\n        id\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        endCursor\n      }\n    }\n  }\n}\n    ${i.Y5}`,l="\n    query GetAllFriends {\n  allFriendsV2 {\n    user {\n      avatar\n      displayName\n      id\n      username\n      idRaw\n    }\n    createdAt\n  }\n}\n    ",d=n.m.injectEndpoints({endpoints:e=>({GetUserOnboardingStatus:e.query({query:e=>({document:"\n    query GetUserOnboardingStatus($uuid: ID!) {\n  user(id: $uuid) {\n    hasSeenOnboarding\n    hasSeenOnboardingV2\n  }\n}\n    ",variables:e})}),GetWatchlistHub:e.query({query:e=>({document:a,variables:e})}),GetRatingsHub:e.query({query:e=>({document:o,variables:e})}),GetUserDetails:e.query({query:e=>({document:"\n    query GetUserDetails($uuid: ID!) {\n  user(id: $uuid) {\n    id\n    avatar\n    username\n    displayName\n    bio\n    createdAt\n    friendStatus\n    isBlocked\n    isMuted\n    location\n    plexPass\n    url\n    mutualFriends {\n      count\n      friends {\n        avatar\n        displayName\n        id\n        username\n      }\n    }\n  }\n}\n    ",variables:e})}),GetUserStats:e.query({query:e=>({document:"\n    query GetUserStats($uuid: ID!) {\n  user(id: $uuid) {\n    watchStats {\n      movieAmount\n      movieSuffix\n      episodeAmount\n      episodeSuffix\n      showAmount\n      showSuffix\n    }\n    ratingsStats {\n      ratingsAmount\n      ratingsSuffix\n    }\n  }\n}\n    ",variables:e})}),GetWatchHistoryHub:e.query({query:e=>({document:c,variables:e})}),GetAllFriends:e.query({query:e=>({document:l,variables:e})}),GetUserPrivacy:e.query({query:e=>({document:"\n    query GetUserPrivacy {\n  userPrivacy {\n    createdAt\n    plexPass\n    ratings\n    watchHistory\n    watchlist\n    friends\n    profile\n  }\n}\n    ",variables:e})}),updateUserProfile:e.mutation({query:e=>({document:"\n    mutation updateUserProfile($input: UpdateUserProfileInput!) {\n  updateUserProfile(input: $input) {\n    bio\n    location\n    url\n  }\n}\n    ",variables:e})}),removeActivity:e.mutation({query:e=>({document:"\n    mutation removeActivity($input: RemoveActivityInput!) {\n  removeActivity(input: $input)\n}\n    ",variables:e})}),updateUserPrivacy:e.mutation({query:e=>({document:"\n    mutation updateUserPrivacy($input: UpdatePrivacyInput!) {\n  updatePrivacy(input: $input)\n}\n    ",variables:e})}),updateOnboardingStatus:e.mutation({query:e=>({document:"\n    mutation updateOnboardingStatus($input: UpdateOnboardingStatusInput!) {\n  updateOnboardingStatus(input: $input) {\n    hasSeenOnboarding\n  }\n}\n    ",variables:e})}),updateActivityDate:e.mutation({query:e=>({document:"\n    mutation updateActivityDate($id: ID!, $input: UpdateActivityInput!) {\n  updateActivity(id: $id, input: $input) {\n    id\n  }\n}\n    ",variables:e})})})}),{useGetUserOnboardingStatusQuery:u,useLazyGetUserOnboardingStatusQuery:p,useGetWatchlistHubQuery:m,useLazyGetWatchlistHubQuery:h,useGetRatingsHubQuery:y,useLazyGetRatingsHubQuery:g,useGetUserDetailsQuery:f,useLazyGetUserDetailsQuery:v,useGetUserStatsQuery:b,useLazyGetUserStatsQuery:S,useGetWatchHistoryHubQuery:P,useLazyGetWatchHistoryHubQuery:I,useGetAllFriendsQuery:E,useLazyGetAllFriendsQuery:w,useGetUserPrivacyQuery:C,useLazyGetUserPrivacyQuery:O,useUpdateUserProfileMutation:M,useRemoveActivityMutation:T,useUpdateUserPrivacyMutation:D,useUpdateOnboardingStatusMutation:k,useUpdateActivityDateMutation:x}=d},9192:(e,t,r)=>{"use strict";r.d(t,{O2:()=>c,hd:()=>d,iW:()=>s,m2:()=>a,mk:()=>n,s5:()=>o,wp:()=>i});const n=r(57512).m.injectEndpoints({endpoints:e=>({muteUser:e.mutation({query:e=>({document:"\n    mutation muteUser($input: MuteUserInput!) {\n  muteUser(input: $input)\n}\n    ",variables:e})}),blockUser:e.mutation({query:e=>({document:"\n    mutation blockUser($input: BlockUserInput!) {\n  blockUser(input: $input)\n}\n    ",variables:e})}),unblockUser:e.mutation({query:e=>({document:"\n    mutation unblockUser($input: BlockUserInput!) {\n  unblockUser(input: $input)\n}\n    ",variables:e})}),unmuteUser:e.mutation({query:e=>({document:"\n    mutation unmuteUser($input: MuteUserInput!) {\n  unmuteUser(input: $input)\n}\n    ",variables:e})}),getMutedUsers:e.query({query:e=>({document:"\n    query getMutedUsers($first: PaginationInt!, $after: String) {\n  mutedUsers(after: $after, first: $first) {\n    nodes {\n      id\n      username\n      displayName\n      avatar\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      hasPreviousPage\n      startCursor\n    }\n  }\n}\n    ",variables:e})}),getBlockedUsers:e.query({query:e=>({document:"\n    query getBlockedUsers($first: PaginationInt!, $after: String) {\n  blockedUsers(after: $after, first: $first) {\n    nodes {\n      id\n      username\n      displayName\n      avatar\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      hasPreviousPage\n      startCursor\n    }\n  }\n}\n    ",variables:e})})})}),{useMuteUserMutation:i,useBlockUserMutation:s,useUnblockUserMutation:a,useUnmuteUserMutation:o,useGetMutedUsersQuery:c,useLazyGetMutedUsersQuery:l,useGetBlockedUsersQuery:d,useLazyGetBlockedUsersQuery:u}=n},45692:(e,t,r)=>{"use strict";r.d(t,{E:()=>n,c:()=>i});const n=25;function i(e,t){return{first:n,after:t,type:e}}},28636:(e,t,r)=>{"use strict";r.d(t,{c:()=>s,w:()=>i});var n=r(39864);const i=25;function s({id:e,after:t,sort:r=n.K2.DisplayName}){return{uuid:e,first:i,after:t,sort:r}}},11728:(e,t,r)=>{"use strict";r.d(t,{c:()=>i,g:()=>n});const n=6;function i(e){return{first:n,after:e}}},12064:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(64156);function i(e,t){if(!e)return"";const r=(0,n.kV)(t),i=new URL(e);return i.searchParams.append("size",(0,n.A7)(r).toString()),i.toString()}},99952:(e,t,r)=>{"use strict";function n(e,t){return`hub-${e}-${t}`}r.d(t,{c:()=>n})},19732:(e,t,r)=>{"use strict";r.d(t,{Eh:()=>h,Jk:()=>s,eM:()=>m,mk:()=>n,o4:()=>i,u_:()=>l});const n=r(57512).m.injectEndpoints({endpoints:e=>({createReport:e.mutation({query:e=>({document:"\n    mutation createReport($input: CreateReportInput!) {\n  createReport(input: $input) {\n    id\n  }\n}\n    ",variables:e})}),reportsUnreadCount:e.query({query:e=>({document:"\n    query reportsUnreadCount {\n  reportsUnreadCount\n}\n    ",variables:e})}),getReportedIssues:e.query({query:e=>({document:"\n    query getReportedIssues($first: PaginationInt!, $after: String) {\n  reports(after: $after, first: $first) {\n    nodes {\n      __typename\n      id\n      message\n      user {\n        id\n        avatar\n        username\n        displayName\n        isMuted\n        isBlocked\n      }\n      url\n      date\n      commentCount\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n    }\n  }\n}\n    ",variables:e})}),reportById:e.query({query:e=>({document:"\n    query reportById($id: ID!) {\n  reportByID(id: $id) {\n    __typename\n    commentCount\n    date\n    id\n    user {\n      id\n      avatar\n      username\n      displayName\n      isMuted\n      isBlocked\n    }\n    message\n    url\n  }\n}\n    ",variables:e})}),reportComments:e.query({query:e=>({document:"\n    query reportComments($id: ID!, $first: PaginationInt, $after: String, $last: PaginationInt, $before: String) {\n  reportComments(\n    first: $first\n    after: $after\n    id: $id\n    last: $last\n    before: $before\n  ) {\n    nodes {\n      date\n      id\n      message\n      user {\n        id\n        avatar\n        username\n        displayName\n        isBlocked\n        isMuted\n        isHidden\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n      hasPreviousPage\n      startCursor\n    }\n  }\n}\n    ",variables:e})}),createReportComment:e.mutation({query:e=>({document:"\n    mutation createReportComment($input: CreateReportCommentInput!) {\n  createReportComment(input: $input) {\n    date\n    id\n    message\n    user {\n      id\n      avatar\n      username\n      displayName\n      isHidden\n      isMuted\n      isBlocked\n    }\n  }\n}\n    ",variables:e})}),removeReportComment:e.mutation({query:e=>({document:"\n    mutation removeReportComment($input: RemoveReportCommentInput!) {\n  removeReportComment(input: $input)\n}\n    ",variables:e})})})}),{useCreateReportMutation:i,useReportsUnreadCountQuery:s,useLazyReportsUnreadCountQuery:a,useGetReportedIssuesQuery:o,useLazyGetReportedIssuesQuery:c,useReportByIdQuery:l,useLazyReportByIdQuery:d,useReportCommentsQuery:u,useLazyReportCommentsQuery:p,useCreateReportCommentMutation:m,useRemoveReportCommentMutation:h}=n},97503:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var n=(e=>(e.GetReportedIssues="GetReportedIssues",e.GetReportComments="GetReportComments",e))(n||{})},62348:(e,t,r)=>{"use strict";r.d(t,{c:()=>N});var n=r(11504),i=r(27876),s=r(58660),a=r(3008),o=r(64776),c=r(77072),l=r(92432),d=r(66780),u=r(84508),p=r(56960),m=r(59396),h=r(34708),y=r(3972),g=r(29164),f=r(29208),v=r(8684),b=r(46572),S=r(32380),P=r(5784),I=r(21796),E=r(92784),w=r(53636),C=r(5297),O=r(40415),M=r(39864),T=r(43848),D=r(21040),k=r(56784),x=r(11528),A=r(9192),R=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function N({modalState:e,user:t,onSuccess:r}){const N=(0,v.c)(),L=(0,i.OY)(),j=(0,i.w1)(g.c),{addToast:U}=(0,l.Wo)(),{isUninitialized:F}=(0,i.w1)(x.mk.endpoints.GetUserDetails.select({uuid:t.id})),{details:{isBlocked:V}={},refetch:_}=(0,E.c)(t.id,F),W=(0,D.c)(e.isOpen),[B,H]=(0,n.useState)(!!V),{details:z,isPopulated:G,isPending:q,error:K}=(0,i.w1)(b.c),Q=(0,i.w1)((0,C.c)(t.id)),[$,{isError:Y,isLoading:X,isSuccess:J,reset:Z}]=(0,A.iW)(),[ee,{isError:te,isLoading:re,isSuccess:ne,reset:ie}]=(0,A.m2)(),{removeUserActivities:se}=(0,P.c)(),{remove:ae}=(0,I.c)(M.gV.Sent),{remove:oe}=(0,I.c)(M.gV.Received),ce=B?ee:$,le=Y||te,de=J||ne,ue=X||re,pe=(0,n.useCallback)((()=>R(this,null,(function*(){const e=null==Q?void 0:Q.user.id;if(e)try{yield T.c.del(`/api/v2/sharings/${e}`,{server:j}),L(O.cp.actions.removeSharesByUserUUID({uuid:t.id}))}catch(e){U({color:"alert",description:(0,m.c)("Error while removing library access."),type:"foreground"})}}))),[U,L,j,t.id,null==Q?void 0:Q.user.id]);(0,n.useEffect)((()=>{e.isOpen||H(!!V)}),[V,e.isOpen]),(0,n.useEffect)((()=>{W&&!e.isOpen&&(Z(),ie())}),[e.isOpen,W,Z,ie]),(0,n.useEffect)((()=>{G||q||K||L(S.c.actions.fetchUserDetails({server:j}))}),[L,q,G,j,K]),(0,n.useEffect)((()=>{le&&e.isOpen&&(U({color:"alert",description:(0,m.c)("Something went wrong. Please try again later."),type:"foreground"}),e.onClose())}),[U,L,t.id,le,e,j,z.uuid]),(0,n.useEffect)((()=>{de&&e.isOpen&&(L(h.c.actions.fetchCommunityFriends()),oe(t.id),ae(t.id),Q&&pe(),e.onClose())}),[L,de,e,oe,ae,pe,t.id,Q]),(0,n.useEffect)((()=>{!e.isOpen&&de&&(N({action:B?d.x6:d.SE,page:p.y4}),L(A.mk.util.invalidateTags([w._.BlockedUsers])),_(),null==r||r(!B),J&&(se(t.id),L(k.mk.util.invalidateTags([y.O.SentFriendsRequests,y.O.ReceivedFriendsRequests,y.O.FriendSuggestions]))))}),[L,J,B,de,e.isOpen,r,se,N,_,t.id]);const me=(0,n.useCallback)((()=>{ce({input:{user:t.id}})}),[ce,t.id]),he=(0,n.useCallback)((()=>{N({action:d.i0,page:p.y4,contextTuple:[B?u.UNBLOCK:u.BLOCK,f._Q,f._Q]}),e.onClose()}),[B,e,N]),ye=(0,n.useCallback)((t=>{e.onOpenChange(t),t||he()}),[e,he]);return n.createElement(o.wJ,{isOpen:e.isOpen,onOpenChange:ye},n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,m.c)("Close"),header:B?(0,m.c)("Unblock {name}",{name:t.username}):(0,m.c)("Block {name}",{name:t.displayName||t.username}),size:"s"},n.createElement(o.aU,null,n.createElement(a.ye,{gap:"m",orientation:"vertical"},B?n.createElement(c.a,{font:"body-1"},(0,m.c)("Unblocking this account will allow them to search for you and send you a friend request.")):n.createElement(n.Fragment,null,n.createElement(c.a,{font:"body-1"},(0,m.c)("Blocking this account will unfriend them and prevent them from seeing the content on your profile or searching for you. Access to any libraries you granted to each other will be removed."))))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(s.q,{disabled:ue,label:(0,m.c)("Cancel"),onPress:he}),n.createElement(s.q,{color:B?"accent":"alert",label:B?(0,m.c)("Unblock"):(0,m.c)("Block"),waiting:ue,onPress:me})))))}},51276:(e,t,r)=>{"use strict";r.d(t,{c:()=>ge});var n=r(11504),i=r(58660),s=r(3008),a=r(41744),o=r(64776),c=r(77072),l=r(92432),d=r(66780),u=r(56960),p=r(59396),m=r(98772),h=r(29208),y=r(8684),g=r(27876),f=r(34632),v=r(66576),b=r(82228),S=r(77892),P=r(94644),I=r(36048),E=r(11728),w=r(93036),C=r(42152),O=r(44500),M=r(75560),T=r(34708),D=r(19388),k=r(29164),x=r(23300),A=r(46896),R=r(56632),N=r(92784),L=r(97884),j=r(58980),U=r(32512),F=r(9192),V=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,B=(e,t)=>{var r={};for(var n in e)_.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&V)for(var n of V(e))t.indexOf(n)<0&&W.call(e,n)&&(r[n]=e[n]);return r};const H=40;function z(e){var t,r=e,{type:o,onError:l,onSuccess:d}=r,u=B(r,["type","onError","onSuccess"]);const m=(0,g.OY)(),h=(0,A.c)(u),y=(0,g.w1)(k.c),{friends:f}=(0,j.c)(D.c,T.c.actions.fetchCommunityFriends),v=f.findIndex((e=>{var t;return e.id===(null==(t=u.item)?void 0:t.id)}))>-1,{refetch:b}=(0,N.c)(null==(t=u.item)?void 0:t.id,!0),[S,{isError:P,isLoading:I,isSuccess:E}]=(0,F.m2)(),[V,{isError:_,isLoading:W,isSuccess:z}]=(0,F.s5)(),G=u.item,q="block"===o?P:_,K="block"===o?I:W,Q="block"===o?E:z,$="block"===o?(0,p.c)("Unblock"):(0,p.c)("Unmute"),Y=(0,n.useCallback)((()=>{m((0,M.mY)({origin:O.OG}))}),[m]),X=(0,n.useCallback)((()=>{G&&("block"===o?S:V)({input:{user:G.id}})}),[G,o,S,V]);if((0,n.useEffect)((()=>{Q&&G&&(d(G.id),v&&"mute"===o&&m(U.mk.util.invalidateTags([R.MB.GetActivityFeed])),b())}),[m,v,Q,G,d,b,o]),(0,n.useEffect)((()=>{q&&l()}),[q,l]),!G)return null;const J=(0,L.c)("userProfile",{id:G.id});return n.createElement("div",{style:h.style},n.createElement(s.ye,{gap:"m",orientation:"vertical",paddingX:"l"},n.createElement(s.ye,{align:"space-between",orientation:"horizontal"},n.createElement(s.ye,{gap:"m",orientation:"horizontal",verticalAlign:"center"},n.createElement(C.mw,{posterStyle:"circle",width:H},n.createElement(x.c,{server:y,size:H,url:G.avatar}),n.createElement(C.ic,{accessibilityLabel:$,href:J,posterStyle:"circle",onPress:Y})),n.createElement(s.ye,{orientation:"vertical",verticalAlign:"center"},n.createElement(c.a,{color:"primary",font:"body-2",numberOfLines:1},n.createElement(a.c,{href:J,insetFocus:!0,onPress:Y},G.displayName||G.username)),G.displayName?n.createElement(c.a,{color:"muted",font:"body-3",numberOfLines:1},G.username):null)),n.createElement(i.q,{label:$,waiting:K,onPress:X})),n.createElement(w.ew,null)))}var G=r(53636),q=r(49828),K=r(11528),Q=Object.defineProperty,$=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,te=(e,t)=>{for(var r in t||(t={}))J.call(t,r)&&ee(e,r,t[r]);if(X)for(var r of X(t))Z.call(t,r)&&ee(e,r,t[r]);return e},re=(e,t)=>$(e,Y(t));const ne=(0,b.c)({rowHeight:65,overscan:1,innerVerticalPadding:(0,q.c)("m")});function ie({isOpen:e,onError:t}){const r=(0,y.c)(),i=(0,g.OY)(),a=(0,n.useRef)(!1),{data:o,totalSize:l,isLoading:u,getNextPage:m,remove:h}=(0,v.c)(F.mk.endpoints.getBlockedUsers,{fetchSize:E.g,args:{},transformResponse:e=>({data:e.blockedUsers.nodes,endCursor:e.blockedUsers.pageInfo.endCursor,hasNextPage:e.blockedUsers.pageInfo.hasNextPage})}),b=(0,n.useCallback)((e=>{h(e,(e=>e.id)),a.current=!0,i(K.mk.util.invalidateTags([{type:I.gK.GetUserDetails,id:e}])),r({action:d.x6})}),[i,h,r]);(0,n.useEffect)((()=>{!e&&a.current&&i(F.mk.util.invalidateTags([G._.BlockedUsers]))}),[i,e]);const w=(0,n.useMemo)((()=>e=>e.item?n.createElement(z,re(te({},e),{item:re(te({},e.item),{avatar:""}),type:"block",onError:t,onSuccess:b})):n.createElement(n.Fragment,null)),[t,b]);return(0,n.useEffect)((()=>{o||m()}),[m,o]),n.createElement(s.ye,{orientation:"vertical"},n.createElement(S.c,{title:(0,p.c)("Blocked Accounts")}),u?n.createElement(s.ye,{align:"center",paddingTop:"m"},n.createElement(f.c,{size:"s"})):null,(null==o?void 0:o.length)?n.createElement(s.ye,{paddingTop:"l"},n.createElement(P.c,{cellComponentFactory:w,items:o||[],keyPropName:"id",layout:ne,totalSize:l,onPageRequest:m})):null,o&&!o.length?n.createElement(s.ye,{paddingTop:"m",paddingX:"l"},n.createElement(c.a,{color:"primary",font:"body-1"},(0,p.c)("No blocked accounts"))):null)}var se=Object.defineProperty,ae=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pe=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&ue(e,r,t[r]);if(ce)for(var r of ce(t))de.call(t,r)&&ue(e,r,t[r]);return e},me=(e,t)=>ae(e,oe(t));const he=(0,b.c)({rowHeight:65,overscan:1,innerVerticalPadding:(0,q.c)("m")});function ye({isOpen:e,onError:t}){const r=(0,y.c)(),i=(0,g.OY)(),a=(0,n.useRef)(!1),{data:o,totalSize:l,isLoading:u,getNextPage:m,remove:h}=(0,v.c)(F.mk.endpoints.getMutedUsers,{fetchSize:E.g,args:{},transformResponse:e=>({data:e.mutedUsers.nodes,endCursor:e.mutedUsers.pageInfo.endCursor,hasNextPage:e.mutedUsers.pageInfo.hasNextPage})}),b=(0,n.useCallback)((e=>{h(e,(e=>e.id)),a.current=!0,i(K.mk.util.invalidateTags([{type:I.gK.GetUserDetails,id:e}])),r({action:d.AZ})}),[i,h,r]);(0,n.useEffect)((()=>{!e&&a.current&&i(F.mk.util.invalidateTags([G._.MutedUsers]))}),[i,e]);const w=(0,n.useMemo)((()=>e=>n.createElement(z,me(pe({},e),{type:"mute",onError:t,onSuccess:b}))),[t,b]);return n.createElement(s.ye,{orientation:"vertical"},n.createElement(S.c,{title:(0,p.c)("Muted Accounts")}),u?n.createElement(s.ye,{align:"center",paddingTop:"m"},n.createElement(f.c,{size:"s"})):null,(null==o?void 0:o.length)?n.createElement(s.ye,{paddingTop:"l"},n.createElement(P.c,{cellComponentFactory:w,items:o||[],keyPropName:"id",layout:he,totalSize:l,onPageRequest:m})):null,o&&!o.length?n.createElement(s.ye,{paddingTop:"m",paddingX:"l"},n.createElement(c.a,{color:"primary",font:"body-1"},(0,p.c)("No muted accounts"))):null)}function ge({children:e,modalState:t}){const r=(0,y.c)(),{addToast:g}=(0,l.Wo)();(0,n.useEffect)((()=>{t.isOpen&&r({action:d.OG,contextTuple:void 0})}),[t.isOpen,r]);const f=(0,n.useCallback)((()=>{g({color:"alert",description:(0,p.c)("Something went wrong. Please try again later."),type:"foreground"})}),[g]);return n.createElement(o.wJ,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(o.Qn,null,e),n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,p.c)("Close"),header:(0,p.c)("Manage Muted and Blocked Accounts"),size:"l"},n.createElement(o.kP,null,n.createElement(c.a,{font:"body-1"},n.createElement(m.c,{message:(0,p.c)("All accounts you've muted or blocked will be displayed below. {openLink}Learn more{closeLink}."),tags:[{open:"openLink",close:"closeLink",component:a.c,color:"accent",target:"_blank",href:"https://support.plex.tv/articles/mute-block/"}]}))),n.createElement(o.aU,{paddingBottom:"none",paddingLeft:"none",paddingRight:"none",paddingTop:"none"},n.createElement(h.cp,{metricsPage:u.OG},n.createElement(s.ye,{gap:"l"},n.createElement(ye,{isOpen:t.isOpen,onError:f}),n.createElement(ie,{isOpen:t.isOpen,onError:f})))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(i.q,{label:(0,p.c)("Done"),onPress:t.onClose})))))}},96304:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(27876),s=r(58660),a=r(3008),o=r(64776),c=r(77072),l=r(92432),d=r(66780),u=r(84508),p=r(56960),m=r(59396),h=r(29208),y=r(8684),g=r(5784),f=r(92784),v=r(53636),b=r(21040),S=r(11528),P=r(9192);function I({modalState:e,user:t,onSuccess:r}){const I=(0,y.c)(),{addToast:E}=(0,l.Wo)(),w=(0,i.OY)(),[C,{isError:O,isLoading:M,isSuccess:T,reset:D}]=(0,P.wp)(),[k,{isError:x,isLoading:A,isSuccess:R,reset:N}]=(0,P.s5)(),{isUninitialized:L}=(0,i.w1)(S.mk.endpoints.GetUserDetails.select({uuid:t.id})),{details:{isMuted:j}={},refetch:U}=(0,f.c)(t.id,L),[F,V]=(0,n.useState)(!!j),{removeUserActivities:_}=(0,g.c)(),W=(0,b.c)(e.isOpen),B=F?k:C,H=T||R,z=O||x,G=M||A;(0,n.useEffect)((()=>{V(!!j)}),[j]),(0,n.useEffect)((()=>{W&&!e.isOpen&&(D(),N())}),[e.isOpen,W,D,N]),(0,n.useEffect)((()=>{z&&e.isOpen&&(E({color:"alert",description:(0,m.c)("Something went wrong. Please try again later."),type:"foreground"}),e.onClose())}),[E,z,e]),(0,n.useEffect)((()=>{H&&e.isOpen&&(I({action:F?d.AZ:d.SG,page:p.y4}),w(P.mk.util.invalidateTags([v._.MutedUsers])),null==r||r(!F),U(),e.onClose()),T&&_(t.id,!0)}),[w,F,T,H,e,r,_,I,U,t.id]);const q=(0,n.useCallback)((()=>{B({input:{user:t.id}})}),[B,t.id]),K=(0,n.useCallback)((()=>{I({action:d.i0,page:p.y4,contextTuple:[F?u.UNBLOCK:u.BLOCK,h._Q,h._Q]}),e.onClose()}),[F,e,I]),Q=(0,n.useCallback)((t=>{e.onOpenChange(t),t||K()}),[e,K]);return n.createElement(o.wJ,{isOpen:e.isOpen,onOpenChange:Q},n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,m.c)("Close"),header:F?(0,m.c)("Unmute {name}",{name:t.displayName||t.username}):(0,m.c)("Mute {name}",{name:t.displayName||t.username}),size:"s"},n.createElement(o.aU,null,n.createElement(a.ye,{gap:"m",orientation:"vertical"},F?n.createElement(c.a,{font:"body-1"},(0,m.c)("You will see all activities from this account in your activity feed.")):n.createElement(n.Fragment,null,n.createElement(c.a,{font:"body-1"},(0,m.c)("You will no longer see certain activities from this account in your activity feed and they won't know you've muted them."))))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(s.q,{disabled:G,label:(0,m.c)("Cancel"),onPress:K}),n.createElement(s.q,{color:"accent",label:F?(0,m.c)("Unmute"):(0,m.c)("Mute"),waiting:G,onPress:q})))))}},53636:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var n=(e=>(e.MutedUsers="MutedUsers",e.BlockedUsers="BlockedUsers",e))(n||{})},12908:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(77072),s=r(59396);function a({query:e}){return n.createElement(i.a,{font:"body-2"},(0,s.c)('No results were found for the search term "{query}"',{query:e}))}},17876:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(63736),s=r(13904);const a=200,o=50;function c(e){const{defaultWidth:t,heightOffset:r=o}=null!=e?e:{},c=(0,n.useRef)(null),[l,d]=(0,i.y)(c),[u,p]=(0,s.Y)(),m=p&&d?Math.max(a,p-d-r):void 0,h=u&&l?Math.min(null!=t?t:l,u):void 0,y=(0,n.useCallback)((e=>{var t;(c.current===e.target||(null==(t=c.current)?void 0:t.contains(e.target)))&&e.preventDefault()}),[]);return{anchorRef:c,width:h,maxHeight:m,onInteractOutside:y}}},2100:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(93564);const s=(0,n.M3)(i.c,(e=>e.features))},63136:(e,t,r)=>{"use strict";r.d(t,{c:()=>qt});var n=r(11504),i=r(27876),s=r(92432),a=r(34708),o=r(23852),c=r(63480),l=r(66576),d=r(45692),u=r(28636),p=r(39864),m=r(56784),h=r(20916),y=r(54008),g=r(83672),f=r(57864),v=r(42452),b=r(64752),S=r(37984),P=r(29164),I=r(58660),E=r(59396),w=r(81764),C=r(64776),O=r(9356),M=r(58176),T=r(21040);function D({children:e,modalState:t,title:r,isValid:i,isWaiting:s,definitions:a,components:o}){var c,l;const[d,u]=(0,n.useState)(a[0].key),p=(0,T.c)(s),m=(0,T.c)(t.isOpen),h=a.find((e=>e.key===d)),y="function"==typeof(null==h?void 0:h.getNextStep)?null==(c=null==h?void 0:h.getNextStep)?void 0:c.call(h):null==h?void 0:h.getNextStep,g="function"==typeof(null==h?void 0:h.getPreviousStep)?null==(l=null==h?void 0:h.getPreviousStep)?void 0:l.call(h):null==h?void 0:h.getPreviousStep,f=(0,n.useCallback)((()=>{if(y){const e=a.find((e=>e.key===y));if(e)return void u(e.key)}t.onClose()}),[a,y,t]),v=(0,n.useCallback)((()=>{(null==h?void 0:h.onStep)&&h.onStep()||f()}),[f,h]),b=(0,n.useCallback)((()=>{if(g){const e=a.find((e=>e.key===g));e&&u(e.key)}}),[a,g]);return(0,n.useEffect)((()=>{!m&&t.isOpen&&u(a[0].key)}),[a,t.isOpen,m]),(0,n.useEffect)((()=>{p&&!s&&f()}),[f,s,p]),h?n.createElement(C.wJ,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(C.Qn,null,e),n.createElement(C.EX,{closeButtonAccessibilityLabel:(0,E.c)("Close"),header:r,size:"l",zIndex:O.c.highZIndex,onClose:t.onClose},o[d],n.createElement(C._A,null,n.createElement(M.y,{leftButton:g&&y?n.createElement(I.q,{label:(0,E.c)("Cancel"),onPress:t.onClose}):null,primaryButton:n.createElement(I.q,{color:"accent",disabled:!i,label:"function"==typeof h.getLabel?h.getLabel():h.getLabel,waiting:s,onPress:v}),rightButton:n.createElement(n.Fragment,null,!g&&y?n.createElement(I.q,{label:(0,E.c)("Cancel"),onPress:t.onClose}):null,!s&&g&&y?n.createElement(I.q,{label:(0,E.c)("Previous"),onPress:b}):null)})))):null}var k=r(68564),x=r(3008),A=r(77072);function R(){return n.createElement(C.aU,null,n.createElement(x.ye,{align:"center",gap:"m",height:"100%"},n.createElement(k.default,{size:"xxl"}),n.createElement(A.a,{font:"body-1"},(0,E.c)("Inviting other users to your home is a security risk that could allow these users to access your account. You should only do this if you live in the same home and share devices."))))}var N=r(9852),L=r(16932),j=r(23300);const U={checkbox:"AddFriendStep-checkbox-gIlLKB"},F=68;function V({state:e}){const t=(0,i.w1)(P.c),[r,s]=(0,n.useState)(!0),a=e.user&&(0,y.c)(e.user)?e.user.displayName||e.user.username:e.user?e.user.title||e.user.username:e.username,o=e.user&&(0,y.c)(e.user)?e.user.avatar:e.user?e.user.thumb:(0,N.wn)(`/users/${encodeURIComponent(null!=(c=e.username)?c:"")}/avatar`);var c;const l=(0,n.useCallback)((t=>{e.isAddFriendChecked=t.currentTarget.checked,s(t.currentTarget.checked)}),[e]);return(0,n.useEffect)((()=>{e.isAddFriendChecked=!0}),[e]),a||o?n.createElement(x.ye,{height:"100%",padding:"l"},n.createElement(x.ye,{align:"center",gap:"m",height:F,orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(j.c,{server:t,size:F,url:o||""}),n.createElement(x.ye,null,n.createElement(x.ye,{orientation:"horizontal",verticalAlign:"center"},n.createElement("label",{htmlFor:"addAsFriend"},n.createElement(L.c,{checked:r,className:U.checkbox,name:"addAsFriend",onChange:l}),n.createElement(A.a,{as:"span",color:"primary",font:"body-1"},(0,E.c)("Send {user} a friend request.",{user:a})))),n.createElement(A.a,{color:"default",font:"body-2"},(0,E.c)("Add friends to Plex and see what they're watching, watchlisting and rating."))))):null}var _=r(34632),W=r(89520),B=r(46860),H=r(89080),z=r.n(H),G=r(10376),q=r(94840);const K={row:"LibrarySectionItem-row-KM9UMN"};function Q({section:e,isSelected:t,index:r,onSelect:i}){const[s,a]=(0,n.useState)(t),[o,c]=(0,G.c)(),l=(0,n.useCallback)((e=>{a(e.currentTarget.checked)}),[]),d=(0,n.useCallback)((()=>{i(e.id)}),[i,e.id]);return n.createElement(q.c,{ref:c,isAlternate:!(r%2),isHovered:o},n.createElement(x.YR,{verticalAlign:"center"},n.createElement("label",{className:K.row},n.createElement(L.c,{"aria-label":e.title,checked:s,name:e.title,onChange:l,onClick:d}),n.createElement(A.a,null,e.title))))}const $={sections:"LibrarySections-sections-ao2cP7",hidden:"LibrarySections-hidden-rwgU79"},Y=40;function X({sections:e,isVisible:t,initialSelectedIds:r,onChange:i}){const[s,a]=(0,n.useState)(r),o=(0,n.useCallback)((e=>{const t=s.indexOf(e);a(t>=0?s.filter(((e,r)=>r!==t)):[...s,e])}),[s]);return(0,n.useEffect)((()=>{i(s)}),[i,s]),n.createElement("div",{className:z()($.sections,!t&&$.hidden),style:{maxHeight:e.length*Y}},e.map(((e,t)=>n.createElement(Q,{key:e.key,index:t,isSelected:s.includes(e.id),section:e,onSelect:o}))))}const J={input:"ServerAccordion-input-PWOgaX",arrow:"ServerAccordion-arrow-zjTWhQ",hidden:"ServerAccordion-hidden-MkpcLe"};function Z({server:e,allLibraries:t,librariesIDs:r,onLibrariesChange:i}){const[s,a]=(0,n.useState)(t),[o,c]=(0,n.useState)(!0),[l,d]=(0,n.useState)(r),u=(0,n.useCallback)((t=>{const r=t.currentTarget.checked;a(r);const n=r?[]:e.librarySections.map((e=>e.id));d(n),i(e.machineIdentifier,n,r)}),[i,e.librarySections,e.machineIdentifier]),p=(0,n.useCallback)((()=>{c(!o)}),[o]),m=(0,n.useCallback)((t=>{i(e.machineIdentifier,t,!1)}),[i,e.machineIdentifier]);return n.createElement(x.ye,null,n.createElement(x.YR,{verticalAlign:"center"},n.createElement(W.c,{children:null,className:s?J.hidden:J.arrow,direction:o?B.c.Up:B.c.Down,onPress:p}),n.createElement("label",{className:J.input},n.createElement(L.c,{"aria-label":e.name,checked:s,id:e.machineIdentifier,name:e.name,onChange:u}),n.createElement(A.a,null,`${e.name}${s?` (${(0,E.c)("All Libraries")})`:""}`))),s?null:n.createElement(X,{initialSelectedIds:l,isVisible:o,sections:e.librarySections,onChange:m}))}var ee=r(43212),te=r(10188);function re({state:e,sourceDirectory:t,selectedMachineIdentifier:r,onValidate:i}){const{serverDetails:s,isPending:a,isPopulated:o}=(0,ee.c)(),c=(0,n.useCallback)(((t,r,n)=>{e.libraries[t]||(e.libraries[t]=[]),e.libraries[t]=r,e.allLibraries[t]=n}),[e]);return(0,n.useEffect)((()=>{null==i||i(o&&(null==s?void 0:s.length)>0)}),[a,o,i,null==s?void 0:s.length,e.user]),n.createElement(n.Fragment,null,n.createElement(C.kP,null,n.createElement(x.ye,{gap:"s"},n.createElement(A.a,{color:"inherit"},(0,E.c)("Choose the libraries {name} can access",{name:e.user?(0,te.c)(e.user):e.username})),a||0!==(null==s?void 0:s.length)?null:n.createElement(A.a,{color:"accent",font:"body-2"},(0,E.c)("You don't have any connected servers.")),a&&!o?n.createElement(x.ye,{align:"center",height:"100%",verticalAlign:"center",width:"100%"},n.createElement(_.c,null)):null)),n.createElement(C.aU,null,o&&s?n.createElement(x.ye,{gap:"s"},s.map((i=>{var s,a,o;const l=t&&i.machineIdentifier===r?i.librarySections.filter((e=>e.key===parseInt(t.id,10))).map((e=>e.id)):[],d=null!=(s=e.libraries[i.machineIdentifier])?s:[],u=[...new Set([...d,...l])];return n.createElement(n.Fragment,{key:i.machineIdentifier},i?n.createElement(Z,{allLibraries:null!=(o=null==(a=e.sharedServers.find((e=>e.machineIdentifier===i.machineIdentifier)))?void 0:a.allLibraries)&&o,librariesIDs:u,server:i,onLibrariesChange:c}):null)}))):null))}var ne=r(87592),ie=r(87396),se=r(29632),ae=r(2692),oe=r(42728),ce=r(79320),le=r(84536),de=r(54332),ue=r(71908),pe=r(34908),me=r(34328);function he(e){return!!e&&"restricted"in e&&e.restricted}var ye=r(4280),ge=r(52504),fe=r(40415),ve=r(85160),be=r(3696),Se=r(73356);const Pe={message:"SelectRestrictions-message-Aplrj4",section:"SelectRestrictions-section-idFOkZ",warningMessage:"SelectRestrictions-warningMessage-cWZx6b",checkInput:"SelectRestrictions-checkInput-WtlAWl CheckInput-label-E9ov4s"};function Ie(e){return parseInt(e,10)}function Ee(){return n.createElement(x.ye,{paddingY:"xs"},n.createElement(ne.c,null))}function we({state:e,isAddingHomeUser:t,error:r}){var s,a;const o=(0,i.OY)(),c=(0,i.w1)(P.c),l=(0,i.w1)((0,me.c)(oe.Ww)),d=(0,i.w1)(pe.c),u=(0,i.w1)((0,se.c)("hasPlexPass")),p=(0,i.w1)((0,me.c)(oe.Gs)),m=(0,i.w1)((0,me.c)(oe.cd)),{filterOptionsTags:h,isFilterOptionsTagsPopulating:g,isFilterOptionsTagsPopulated:f}=(0,i.w1)((e=>e.ui.userSharingSettingsPage)),v=(0,n.useMemo)((()=>e.user&&(0,y.c)(e.user)?e.user.id:e.user?e.user.uuid:void 0),[e.user]),{sharingSettings:b,isPopulated:S}=(0,i.w1)((0,ge.c)(v)),I=(0,n.useMemo)((()=>b?{filterMovies:ce.c.filterMovies.type.parse(null==b?void 0:b.filterMovies,ce.c.filterMovies),filterTelevision:ce.c.filterTelevision.type.parse(null==b?void 0:b.filterTelevision,ce.c.filterTelevision),filterMusic:ce.c.filterMusic.type.parse(null==b?void 0:b.filterMusic,ce.c.filterMusic)}:{filterMovies:"",filterTelevision:"",filterMusic:""}),[b]),w=he(e.user),O=null==(s=null==b?void 0:b.allowSync)||s,M=null!=(a=null==b?void 0:b.allowTuners)?a:0,T=w||m,[D,k]=(0,n.useState)(!1);(0,n.useEffect)((()=>{e.user&&(0,y.c)(e.user)?o(fe.cp.actions.fetchSharingSettings({server:c,user:{restricted:!1,thumb:e.user.avatar,title:e.user.displayName,username:e.user.username,uuid:e.user.id,id:e.user.idRaw},invitedId:e.user.idRaw,invitedEmail:e.user.username})):e.user&&o(fe.cp.actions.fetchSharingSettings({server:c,user:{id:e.user.id,restricted:!0,thumb:e.user.thumb,title:e.user.title,username:e.user.username,uuid:e.user.uuid,email:e.user.email},invitedId:e.user.id}))}),[c,o,e.sharedServers,e.user,e.username]),(0,n.useEffect)((()=>{e.sharingSettings=b}),[b,e]),(0,n.useEffect)((()=>{o((0,ue.eO)({serverEntityIDs:d.filter((e=>e.isFullOwnedServer&&e.uri)).map((e=>e.entityID))}))}),[o,d]),(0,n.useEffect)((()=>{e.addToHome=D}),[D,e]);const R=(0,n.useCallback)((t=>{const r={};Object.keys(t).map((e=>{r[e]=t[e].value})),e.sharingSettings=(0,ye.c)((0,de.c)(r),e.sharingSettings)}),[e]);return S?n.createElement(C.aU,null,n.createElement(le.cp,{onChange:R},r?n.createElement("div",{className:Pe.warningMessage},n.createElement(A.a,{color:"primary",font:"inherit"},r)):null,u&&!e.user?n.createElement("div",{className:Pe.message},n.createElement(x.ye,{gap:"s"},n.createElement(A.a,{color:"inherit",font:"body-2"},(0,E.c)("If you share devices with another Plex user, you can invite them into your Plex Home allowing them to easily switch accounts on devices youre signed into. The invited user will be asked to confirm Home membership. This is not required to allow access to your library.")))):null,!u||e.user||t?null:n.createElement("div",{className:Pe.section},n.createElement(ve.c,{checkboxText:(0,E.c)("Add to Plex Home"),className:Pe.checkInput,initialValue:D,isDisabled:w,name:"addToHome",onChange:k})),D||t?n.createElement("div",{className:Pe.warningMessage},n.createElement(x.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(ie.default,null),n.createElement(A.a,{color:"inherit",font:"body-3"},(0,E.c)("Inviting other users to your home is a security risk that could allow these users to access your account. You should only do this if you live in the same home and share devices.")))):null,n.createElement("div",{className:Pe.message},n.createElement(A.a,{color:"inherit",font:"body-2"},(0,E.c)("You can restrict this account's access to certain features and content. These restrictions apply to all items the account has access to. You can change these restrictions at any time by visiting the Manage Library Access page."))),n.createElement("div",{className:Pe.section},n.createElement(ve.c,{checkboxText:(0,E.c)("Allow Downloads"),className:Pe.checkInput,initialValue:O,name:"allowSync",subtitle:(0,E.c)("Allow this account to download content from your server.")}),T&&!l?n.createElement(n.Fragment,null,n.createElement(Ee,null),n.createElement(ve.c,{checkboxText:(0,E.c)("Allow access to Live TV"),initialValue:!!M,name:"allowTuners",subtitle:(0,E.c)("Enabling this option will allow this user to access Live TV streams. It requires a library on the Plex Media Server that has DVR configured to be shared with the user")})):null,T&&l?n.createElement(n.Fragment,null,n.createElement(Ee,null),n.createElement(Se.c,{initialValue:M,name:"allowTuners",subtitle:(0,E.c)("Enabling Live TV for this account requires access to a library. Enabling DVR will show all scheduled recordings, but this user will only be able to manage their own recordings."),title:(0,E.c)("Live TV & DVR Access"),transformValue:Ie,value:ae.c.values[M],values:ae.c.values})):null,p?n.createElement(n.Fragment,null,n.createElement(Ee,null),n.createElement(be.c,{className:Pe.list,filterOptionsTags:h,friendFilterOptions:I,isFilterOptionsTagsPopulated:f,isFilterOptionsTagsPopulating:g})):null))):n.createElement(x.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(_.c,{size:"s"}))}var Ce=r(64224),Oe=r(22134),Me=r(45400),Te=r(82228),De=r(27256),ke=r(94644),xe=r(87464),Ae=r(23771),Re=r(87940),Ne=r(95944),Le=r(50772),je=r(86960),Ue=r(66028),Fe=r(40396),Ve=r(58980),_e=r(60504),We=r(46572),Be=r(43848),He=r(86552),ze=Object.defineProperty,Ge=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Ye=(e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xe=(e,t)=>{for(var r in t||(t={}))Qe.call(t,r)&&Ye(e,r,t[r]);if(Ke)for(var r of Ke(t))$e.call(t,r)&&Ye(e,r,t[r]);return e},Je=(e,t)=>Ge(e,qe(t));const Ze={isValidating:!1,username:"",errorMessage:""},et=/\S+@\S+\.\S+/;function tt(e){return et.test(e)}const rt={invalidUserReason:void 0,isValidatingShare:!1,validatedUsername:""};var nt=r(17544);const it={form:"SelectUser-form-fu2k7H",userList:"SelectUser-userList-fqXj_G",listHeader:"SelectUser-listHeader-qwaWmg"};var st=Object.defineProperty,at=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pt=(e,t)=>{for(var r in t||(t={}))lt.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))dt.call(t,r)&&ut(e,r,t[r]);return e},mt=(e,t)=>at(e,ot(t));const ht=(0,Te.c)({rowHeight:46});function yt({state:e,listType:t=["FriendsWithoutLibraryAccess","HomeUsers"],metadataItem:r,isAddingHomeUser:s,onSetUser:a}){var o;const[c,l]=(0,n.useState)(""),d=(0,He.c)(c,Ce.s),[u,p]=(0,n.useState)(""),m=(0,i.w1)(P.c),{servers:h}=function(){const{users:e,isPopulated:t,isPending:r,error:i}=(0,Oe.c)(!0),[s,a]=(0,n.useState)([]);return(0,n.useEffect)((()=>{a(e.map((e=>e.sharedServers.filter((e=>e.owned)))).flat())}),[e]),{servers:s,isPopulated:t,isPending:r,error:i}}(),g=t.includes("FriendsWithoutLibraryAccess"),f=t.includes("HomeUsers"),v=t.includes("PlexAccounts"),{users:b,isPopulated:S,error:I}=(0,_e.c)(d,{includeOnlyFriendsWithoutAccess:g}),w=(0,xe.c)(d,!1,!1),O=(0,n.useMemo)((()=>{let e=[];return e=f?[...w.filter((e=>!b.find((t=>t.id===e.uuid)))),...b]:b,e.sort(((e,t)=>{const r=("displayName"in e?e.displayName:e.title)||e.username,n=("displayName"in t?t.displayName:t.title)||t.username;return r.localeCompare(n)}))}),[w,f,b]),{invalidUserReason:M,isValidatingShare:T,validatedUsername:D}=function(e){const{errorMessage:t,isValidating:r,username:s}=function(e){const t=(0,i.w1)(P.c),r=(0,He.c)(e,Ce.s),[s,a]=(0,n.useState)(Ze),{details:{username:o,email:c}}=(0,i.w1)(We.c);return(0,n.useEffect)((()=>{if(!r)return void a(Xe({},Ze));if(r.toLowerCase()===o.toLowerCase()||r.toLowerCase()===c.toLowerCase())return void a((e=>Je(Xe({},e),{errorMessage:(0,E.c)("You can't add yourself."),isValidating:!1,username:""})));a((e=>Je(Xe({},e),{username:"",isValidating:!0})));let e=!1;return Be.c.post(`/api/v2/users/validate?identifier=${encodeURIComponent(r)}&returnUsername=true`,{server:t,headers:{accept:"application/json"},method:"POST"}).then((({data:{username:t}})=>{e||a((e=>Je(Xe({},e),{isValidating:!1,username:t,errorMessage:""})))})).catch((t=>{if(e)return;let n="";const i=t.response.status;n=404===i?(0,E.c)('User "{username}" does not exist',{username:r}):(0,E.c)("Error occurred, please try again in a few minutes."),a((e=>Je(Xe({},e),{username:"",errorMessage:n,isValidating:!1})))})),()=>{e=!0}}),[r,c,t,o]),s}(e),[a,o]=(0,n.useState)(rt);return(0,n.useEffect)((()=>{t&&tt(e)?o({invalidUserReason:"",isValidatingShare:!1,validatedUsername:e}):o({invalidUserReason:t,isValidatingShare:r,validatedUsername:s})}),[t,r,e,s]),a}(c),{invalidShareReason:k}=function(e,t){const{sentInvites:r}=(0,i.w1)(Ue.c),s=(0,n.useMemo)((()=>(0,Fe.c)(r,!0)),[r]),{invites:a}=(0,Ve.c)(Le.c,je.c.actions.fetchOwnedInvites),{invites:o}=(0,Ve.c)(Re.c,Ne.c.actions.fetchOwnedInvites),c=null==e?void 0:e.toLowerCase(),l=c&&(!!a.find((({invited:e,invitedEmail:t})=>(null==e?void 0:e.username.toLowerCase())===c||(null==t?void 0:t.toLowerCase())===c))||!!o.find((({invited:e,invitedEmail:t})=>(null==e?void 0:e.username.toLowerCase())===c||(null==t?void 0:t.toLowerCase())===c))),d=c&&t&&!!s.find((e=>e.email.toLowerCase()===c||e.username.toLowerCase()===c));return{invalidShareReason:l||d?(0,E.c)("This user is already invited."):void 0}}(c||(null==(o=b.find((e=>e.id===u)))?void 0:o.username),!!s),R=M||k,L=!T&&!!R||!!I;(0,n.useEffect)((()=>{!R&&D&&T&&(e.username=D)}),[R,T,e,D]);const j=(0,n.useMemo)((()=>{if(D||u)return O.find((e=>u?"uuid"in e?e.uuid===u:e.id===u:e.username===D))}),[D,u,O]);(0,n.useEffect)((()=>{u&&!L?(j?(e.user=j,e.username=j.username):(e.user=void 0,e.username=D),e.libraries={},e.sharedServers=[],(u||D)&&(e.sharedServers=h.filter((t=>{if(t.invited.restricted)return t.invited.uuid===u;const r=t.invited.username;return e.user||r!==D?r===D||t.invited.uuid===u:(e.user=t.invited,e.username=t.invited.username,!0)})),e.sharedServers.forEach((t=>{t.allLibraries?e.allLibraries[t.machineIdentifier]=!0:e.libraries[t.machineIdentifier]=t.libraries.map((e=>e.id))}))),a(u)):a("")}),[j,L,a,u,h,e,D]);const U=(0,n.useCallback)((e=>{l(e.target.value)}),[]),F=(0,n.useCallback)((e=>{e.preventDefault()}),[]),V=(0,n.useCallback)((e=>{p(e===u?"":e)}),[u]),W=(0,n.useMemo)((()=>e=>{const{item:t}=e,r=!!w.find((e=>t&&(0,y.c)(t)?e.uuid===t.id:e.uuid===(null==t?void 0:t.uuid)));return n.createElement(Ae.c,mt(pt({},e),{isDisabled:!1,isHomeUser:r,item:t,selectFriend:V,selectedFriends:[u],server:m}))}),[w,V,u,m]),B=(0,n.useMemo)((()=>r?(0,E.c)('Grant access to "{title}" by selecting someone below or entering their email to invite them to Plex. Anyone new to Plex will be asked to accept the invitation.',{title:(0,nt.c)(r)}):s?(0,E.c)("Users in your Plex Home appear on the Switch User screen. The invited user will be asked to confirm Home membership."):(0,E.c)("Enter a Plex username or select someone from the list below to grant them library access. ")),[s,r]);return n.createElement(n.Fragment,null,n.createElement(C.kP,null,n.createElement(x.ye,{gap:"m"},n.createElement(A.a,{color:"inherit",shrink:!1},B),n.createElement(x.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement("form",{className:it.form,onSubmit:F},n.createElement(Me.c,{hasError:L,hasFocusOnMount:!0,isDisabled:!!u,name:"friend",placeholder:(0,E.c)("Username or email"),value:c,onChange:U})),T?n.createElement(_.c,{size:"s"}):null),L?n.createElement(A.a,{color:"accent",font:"inherit"},R):null)),n.createElement(C.aU,null,n.createElement(x.ye,{gap:"m"},!D||L||j||T?null:n.createElement("div",{className:it.userList},n.createElement("div",{className:it.listHeader},n.createElement(A.a,{color:"inherit",font:"heading-3"},(0,E.c)("Search Result"))),n.createElement(ke.c,{cellComponentFactory:W,items:[{id:"-1",username:D,displayName:D,avatar:(0,N.wn)(`/users/${encodeURIComponent(D)}/avatar`),idRaw:-1}],keyPropName:"id",layout:ht,scrollDirection:De.y.Vertical,totalSize:1})),O.length>0||!S?n.createElement("div",{className:it.userList},n.createElement("div",{className:it.listHeader},n.createElement(A.a,{color:"inherit",font:"heading-3"},v?(0,E.c)("Friends and Accounts with Library Access"):"",g?(0,E.c)("Friends without Library Access"):"")),S?n.createElement(ke.c,{cellComponentFactory:W,items:O,keyPropName:"id",layout:ht,scrollDirection:De.y.Vertical,totalSize:O.length}):n.createElement(x.ye,{align:"center",paddingTop:"m"},n.createElement(_.c,{size:"s"}))):null)))}function gt({modalState:e,state:t,canAddFriend:r,onSubmit:o}){var c;const l=(0,i.OY)(),d=(0,i.w1)(P.c),{addToast:u}=(0,s.Wo)(),[p,m]=(0,n.useState)(!0),[,h]=(0,n.useState)(""),{isSendingHomeUserInvite:y,error:f}=(0,i.w1)(g.c),v=(0,T.c)(y)&&!y;(0,n.useEffect)((()=>{e.isOpen&&m(!0)}),[e.isOpen]);const b=(0,n.useCallback)((e=>{h(e),m(!!e)}),[]),S=(0,n.useMemo)((()=>n.createElement(R,{key:"warning"})),[]),C=(0,n.useMemo)((()=>n.createElement(yt,{isAddingHomeUser:!0,listType:["PlexAccounts"],state:t,onSetUser:b})),[b,t]),O=(0,n.useMemo)((()=>n.createElement(re,{state:t})),[t]),M=(0,n.useMemo)((()=>n.createElement(we,{isAddingHomeUser:!0,state:t})),[t]),k=(0,n.useMemo)((()=>n.createElement(V,{key:"addFriend",state:t})),[t]),x=(0,n.useCallback)((()=>{var e;return l(a.c.actions.sendHomeUserInvite({server:d,invitedEmail:t.username||(null==(e=t.user)?void 0:e.username)||"",skipFriendship:!0})),o(),!0}),[l,d,o,null==(c=t.user)?void 0:c.username,t.username]),A=(0,n.useMemo)((()=>[{key:"WARNING",getLabel:(0,E.c)("Continue"),getNextStep:"SELECT_USER"},{key:"SELECT_USER",getLabel:(0,E.c)("Continue"),getPreviousStep:"WARNING",getNextStep:"SELECT_LIBRARIES"},{key:"SELECT_LIBRARIES",getLabel:(0,E.c)("Continue"),getPreviousStep:"SELECT_USER",getNextStep:"SELECT_RESTRICTIONS"},{key:"SELECT_RESTRICTIONS",getLabel:()=>r()?(0,E.c)("Continue"):(0,E.c)("Send"),getPreviousStep:"SELECT_LIBRARIES",getNextStep:()=>r()?"ADD_FRIEND":"DONE",onStep:()=>!r()&&x()},{key:"ADD_FRIEND",getLabel:(0,E.c)("Send"),getPreviousStep:"SELECT_RESTRICTIONS",getNextStep:"DONE",onStep:x}]),[x,r]),N=(0,n.useMemo)((()=>({WARNING:S,SELECT_USER:C,SELECT_LIBRARIES:O,SELECT_RESTRICTIONS:M,ADD_FRIEND:k})),[k,O,M,C,S]);return(0,n.useEffect)((()=>{v&&!f&&(l((0,w.QF)()),l((0,w.AT)()),e.onClose())}),[l,f,v,e]),(0,n.useEffect)((()=>{v&&(null==f?void 0:f.message)&&e.isOpen&&(u({color:"alert",description:f.message,type:"foreground"}),e.onClose())}),[u,null==f?void 0:f.message,v,e]),(0,n.useEffect)((()=>{!e.isOpen&&f&&l(a.c.actions.clearError())}),[l,f,e.isOpen]),n.createElement(D,{components:N,definitions:A,isValid:p,isWaiting:y,modalState:e,title:(0,E.c)("Invite Plex User")},n.createElement(I.q,{label:(0,E.c)("Invite Plex User"),size:"xs",testID:"button"}))}var ft=r(66780),vt=r(56960),bt=r(29208),St=r(8684),Pt=r(96504),It=r(19388),Et=r(22916),wt=r(77792),Ct=r(24252);const Ot={input:"LibrarySharingSummary-input-lpjUO9 TextInput-input-NqTdW3 input-input-XAtklw",copyLink:"LibrarySharingSummary-copyLink-ZCShix Link-link-SxPFpG"};function Mt({state:e,metadataItem:t,machineIdentifiers:r}){const s=(0,St.c)(),[a,o]=(0,n.useState)(""),{copyToClipboard:c,copyState:l}=(0,wt.c)(a),d=(0,i.w1)(function(e){return(0,f.M3)(v.c,(t=>e.map((e=>{var r;return null==(r=t.serverDetails[e])?void 0:r.inviteToken}))))}(r)),{friends:u}=(0,i.w1)(It.c);(0,n.useEffect)((()=>{e.user&&!(0,y.c)(e.user)||(d[0]&&!t?o(Pt.c.join((0,N.wn)("servers/shared_servers/accept"),{invite_token:d[0]})):d[0]&&o(Pt.c.join([(0,N.AL)(!0),"#!"],{inviteToken:d[0],sharedItems:1},{trailingSlash:!0})))}),[d,t,e.user]);const p=(0,n.useMemo)((()=>Object.keys(e.libraries).filter((e=>r.includes(e))).reduce(((t,r)=>t+e.libraries[r].length),0)),[r,e.libraries]),m=(0,n.useMemo)((()=>Object.keys(e.allLibraries).filter((e=>r.includes(e))).filter((t=>e.allLibraries[t])).length),[r,e.allLibraries]);(0,n.useEffect)((()=>{if(!p&&!m&&!t)return;const{user:r,username:n}=e;let i;const a=he(e.user),o=!!u.find((e=>e.username===(null==r?void 0:r.username)||e.username===n));i=a?"managedAccount":o?"alreadyFriends":!o&&e.isAddFriendChecked?"invited":"notInvited",s({action:ft.op,friendshipStatus:i})}),[u,p,t,m,e,s]);const h=(0,n.useMemo)((()=>e.user?((0,y.c)(e.user)?e.user.displayName:e.user.title)||e.user.username:e.username),[e.user,e.username]);return n.createElement(C.aU,null,n.createElement(x.ye,{gap:"s"},p&&!t?n.createElement(A.a,null,1===p?(0,E.c)("You shared 1 library with {name}.",{name:h}):(0,E.c)("You shared {count} libraries with {name}.",{count:p,name:h})):null,m&&!t?n.createElement(n.Fragment,null,1===m?n.createElement(A.a,null,(0,E.c)("You shared 1 server with {name}.",{name:h})):n.createElement(A.a,null,(0,E.c)("You shared {count} servers with {name}.",{count:m,name:h}))):null,p||m||t?null:n.createElement(A.a,null,(0,E.c)("You didn't share any new libraries or servers with {name}.",{name:h})),t?n.createElement(A.a,null,(0,E.c)('You shared "{item}" with {name}.',{item:(0,nt.c)(t),name:h})):null,a?n.createElement(x.ye,{gap:"xs"},n.createElement(A.a,{color:"muted"},(0,E.c)("We've sent an email asking them to confirm, or they can use this link to accept the invitation:")),n.createElement(x.ye,{orientation:"horizontal"},n.createElement(Me.c,{className:Ot.input,name:"inviteLink",readOnly:!0,value:a}),n.createElement(Et.c,{className:Ot.copyLink,isDisabled:l===wt.z.Done,kind:Ct.c.Primary,onPress:c},l===wt.z.Done?(0,E.c)("Copied!"):(0,E.c)("Copy link"))),l===wt.z.Error?n.createElement(A.a,{color:"accent",font:"inherit"},(0,E.c)("Error while copying.")):null):null))}function Tt({state:e,listType:t,modalState:r,sourceDirectory:s,metadataItem:o,skipSelectUser:c,isExternallyTriggered:l=!1,selectedMachineIdentifier:d,machineIdentifiers:u,canAddFriend:p,onSubmit:m}){var h;const y=(0,i.OY)(),g=(0,St.c)(),[b,S]=(0,n.useState)(!1),[,w]=(0,n.useState)(""),{allServersWithError:C}=(0,ee.c)(),O=(0,i.w1)(function(e){return(0,f.M3)(v.c,(t=>e.map((e=>{var r;return null==(r=t.serverDetails[e])?void 0:r.isSharing})).some((e=>e))))}(u)),M=(0,i.w1)(P.c),T=(0,n.useCallback)((()=>{if(C)return(0,E.c)("Error while fetching server details")}),[C]),k=(0,n.useCallback)((e=>{w(e),S(!!e)}),[]);(0,n.useEffect)((()=>{r.isOpen&&g({action:ft.gB})}),[r.isOpen,g]);const x=(0,n.useMemo)((()=>n.createElement(yt,{listType:t,metadataItem:o,state:e,onSetUser:k})),[t,o,k,e]),A=(0,n.useMemo)((()=>n.createElement(re,{selectedMachineIdentifier:d,sourceDirectory:s,state:e,onValidate:S})),[d,s,e]),R=(0,n.useMemo)((()=>n.createElement(we,{error:T(),state:e})),[T,e]),N=(0,n.useMemo)((()=>n.createElement(Mt,{machineIdentifiers:u,metadataItem:o,state:e})),[u,o,e]),L=(0,n.useMemo)((()=>n.createElement(V,{state:e})),[e]),j=(0,n.useCallback)((()=>{var t;return e.addToHome&&y(a.c.actions.sendHomeUserInvite({server:M,invitedEmail:e.username||(null==(t=e.user)?void 0:t.username)||""})),m()}),[y,m,M,e.addToHome,null==(h=e.user)?void 0:h.username,e.username]),U=(0,n.useMemo)((()=>{const t=[];return c||t.push({key:"SELECT_USER",getNextStep:()=>o&&p()?"ADD_FRIEND":o?"SUMMARY":"SELECT_LIBRARIES",onStep:()=>!(!o||p())&&j(),getLabel:()=>o&&p()?(0,E.c)("Continue"):o?(0,E.c)("Send"):(0,E.c)("Continue")}),t.push({key:"SELECT_LIBRARIES",getPreviousStep:c?void 0:"SELECT_USER",getLabel:()=>he(e.user)?(0,E.c)("Send"):(0,E.c)("Continue"),getNextStep:()=>he(e.user)?"SUMMARY":"SELECT_RESTRICTIONS",onStep:()=>!!he(e.user)&&j()},{key:"SELECT_RESTRICTIONS",getPreviousStep:"SELECT_LIBRARIES",getLabel:()=>p()?(0,E.c)("Continue"):(0,E.c)("Send"),getNextStep:()=>p()?"ADD_FRIEND":"SUMMARY",onStep:()=>!p()&&j()},{key:"ADD_FRIEND",getNextStep:"SUMMARY",getPreviousStep:()=>o?"SELECT_USER":"SELECT_RESTRICTIONS",getLabel:(0,E.c)("Send"),onStep:j},{key:"SUMMARY",getLabel:(0,E.c)("Finish")}),t}),[c,j,e.user,p,o]),F=(0,n.useMemo)((()=>({SELECT_USER:x,SELECT_LIBRARIES:A,SELECT_RESTRICTIONS:R,SUMMARY:N,ADD_FRIEND:L})),[L,A,R,N,x]),_=(0,n.useMemo)((()=>o?(0,E.c)("Grant Access to {title}",{title:(0,nt.c)(o)}):(0,E.c)("Grant Library Access")),[o]);return n.createElement(bt.cp,{metricsPage:vt.em},n.createElement(D,{components:F,definitions:U,isValid:b,isWaiting:O,modalState:r,title:_},l?null:n.createElement(I.q,{label:(0,E.c)("Grant Library Access"),size:"xs",testID:"button"})))}var Dt=Object.defineProperty,kt=Object.defineProperties,xt=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Rt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Lt=(e,t,r)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jt=(e,t)=>{for(var r in t||(t={}))Rt.call(t,r)&&Lt(e,r,t[r]);if(At)for(var r of At(t))Nt.call(t,r)&&Lt(e,r,t[r]);return e},Ut=(e,t)=>kt(e,xt(t));const Ft={username:"",user:void 0,libraries:{},allLibraries:{},sharedServers:[],sharingSettings:fe.wJ};function Vt({type:e,modalState:t,listType:r,isExternallyTriggered:I,selectedMachineIdentifier:E,metadataItem:w,sourceDirectory:C,friend:O}){const M=(0,i.OY)(),{addToast:D}=(0,s.Wo)(),[{machineIdentifier:k}]=(0,S.c$)(),x=(0,i.w1)(P.c),[A,R]=(0,n.useState)(jt({},Ft)),[N,L]=(0,n.useState)([]),j=(0,i.w1)((U=N,(0,f.M3)(v.c,(e=>{var t,r;return null==(r=null==(t=U.map((t=>{var r;return null==(r=e.serverDetails[t])?void 0:r.error})))?void 0:t[0])?void 0:r.message}))));var U;const F=(0,T.c)(t.isOpen),{isAlreadyInvited:V}=function(){const e=(0,i.OY)(),{data:t,remove:r}=(0,l.c)(m.mk.endpoints.friendRequests,{args:{type:p.gV.Sent},fetchSize:u.w,transformResponse:o.c,selector:m.mk.endpoints.friendRequests.select((0,d.c)(p.gV.Sent))}),s=(0,i.w1)(c.c);return(0,n.useEffect)((()=>{s&&(r(s,(e=>e.user.id)),e(a.c.actions.clearSentFriendRequests()))}),[e,r,s]),{isAlreadyInvited:(0,n.useCallback)((e=>!!(null==t?void 0:t.some((({user:t})=>t.username.toLowerCase()===e.toLowerCase())))),[t])}}(),{action:_}=(0,h.c)(m.C2),{communityFriends:{friends:W}}=(0,i.w1)(g.c);(0,n.useEffect)((()=>{!F&&t.isOpen&&(L([]),R(Ut(jt({},Ft),{user:O,libraries:{},allLibraries:{}})))}),[t.isOpen,F,O]);const B=(0,n.useCallback)((()=>{var e;const t=(null==(e=A.user)?void 0:e.username)||A.username;return!!t&&!tt(t)&&!V(t)&&-1===W.findIndex((e=>e.username===t))}),[W,V,A]),H=(0,n.useCallback)((()=>{var e;const t=(null==(e=A.user)?void 0:e.username)||A.username,r=(A.user&&"idRaw"in A.user?A.user.id:void 0)||t;r&&B()&&A.isAddFriendChecked&&_(r,p.Ky.InviteSent)}),[_,B,A.isAddFriendChecked,A.user,A.username]);(0,n.useEffect)((()=>{t.isOpen&&N.length>0&&j&&(D({color:"alert",description:j,type:"foreground",testID:"error"}),t.onClose(),M(b.c.actions.clearErrors({identifiers:N})),L([]))}),[D,M,j,t,N]);const z=(0,n.useCallback)((()=>{var e;if(w)return M(b.c.actions.shareItemSource({server:x,machineIdentifier:k,invitedEmail:(null==(e=A.user)?void 0:e.username)||A.username||void 0,invitedId:he(A.user)?A.user.id:void 0,skipFriendship:!0,items:[{title:w.title,uri:w.sourceURI,type:w.type}]})),L([k]),H(),!0;const t=[];let r=!1;return Object.keys(A.libraries).forEach((e=>{var n;const i=A.sharedServers.find((t=>t.machineIdentifier===e));if((null==i?void 0:i.allLibraries)!==A.allLibraries[e]||A.libraries[e].sort().toString()!==(null==i?void 0:i.libraries.map((e=>e.id)).sort().toString()))if(i)A.libraries[e].length>0||A.allLibraries[e]?(r=!0,M(b.c.actions.updateLibraries({server:x,machineIdentifier:e,librarySectionIds:A.libraries[e],sharingSettings:A.sharingSettings,id:i.id,user:i.invited}))):(r=!0,M(b.c.actions.deleteSharedServer({server:x,machineIdentifier:e,id:i.id}))),t.push(e);else if(A.libraries[e].length>0||A.allLibraries[e]){r=!0;const i=A.user?A.user.username:A.username,s=A.user&&(0,y.c)(A.user)?A.user.idRaw:null==(n=A.user)?void 0:n.id;M(b.c.actions.shareLibraries({server:x,machineIdentifier:e,librarySectionIds:A.libraries[e],sharingSettings:A.sharingSettings,skipFriendship:!0,invitedEmail:i||void 0,invitedId:i?void 0:s})),t.push(e)}})),L(t),H(),r}),[M,k,w,x,H,A.allLibraries,A.libraries,A.sharedServers,A.sharingSettings,A.user,A.username]);return n.createElement(n.Fragment,null,"ShareLibrary"===e?n.createElement(Tt,{canAddFriend:B,isExternallyTriggered:I,listType:r,machineIdentifiers:N,metadataItem:w,modalState:t,selectedMachineIdentifier:E,skipSelectUser:!!O,sourceDirectory:C,state:A,onSubmit:z}):null,"InviteHomeUser"===e?n.createElement(gt,{canAddFriend:B,modalState:t,state:A,onSubmit:z}):null)}var _t=Object.defineProperty,Wt=Object.getOwnPropertySymbols,Bt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,zt=(e,t,r)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gt=(e,t)=>{for(var r in t||(t={}))Bt.call(t,r)&&zt(e,r,t[r]);if(Wt)for(var r of Wt(t))Ht.call(t,r)&&zt(e,r,t[r]);return e};function qt(e){return e.isExternallyTriggered&&!e.modalState.isOpen?null:n.createElement(Vt,Gt({},e))}},23771:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(11504),i=r(3008),s=r(77072),a=r(54008),o=r(23300),c=r(52288),l=r(10188),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>u(e,p(t)),b=(e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r};const S=27;function P(e){var t=e,{server:r,selectedFriends:d,selectFriend:u,isDisabled:p,isHomeUser:m}=t,h=b(t,["server","selectedFriends","selectFriend","isDisabled","isHomeUser"]);const{item:y}=h,g=y&&(0,a.c)(y)?y.id:null==y?void 0:y.uuid,P=(0,n.useMemo)((()=>d.some((e=>g===e))),[d,g]),I=(0,n.useCallback)((()=>{y&&g&&u(g)}),[y,u,g]);if(!y)return null;const E=(0,l.c)(y),w=y.username!==E&&y.username;return n.createElement(c.c,v(f({},h),{isDisabled:p,isHomeUser:m,isSelected:P,onPress:I}),n.createElement(i.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(o.c,{server:r,size:S,url:(0,a.c)(y)?y.avatar:y.thumb}),n.createElement(s.a,{color:"inherit",font:"body-2"},E),w?n.createElement(n.Fragment,null,n.createElement(s.a,{color:"muted",font:"body-2"},""),n.createElement(s.a,{color:"muted",font:"body-2"},w)):null))}},52288:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(11504),i=r(14248),s=r(3008),a=r(22916),o=r(10376),c=r(94840),l=r(46896),d=r(59320);const u={row:"SelectedRow-row-T0puhB"};function p(){return n.createElement("div",{className:u.row},n.createElement(d.default,{color:"inherit",size:"l"}))}const m={item:"FriendRowItemBase-item-nVEERf Link-link-vSsQW1",row:"FriendRowItemBase-row-k8Prvq",selectedRow:"FriendRowItemBase-selectedRow-fUucmE FriendRowItemBase-row-k8Prvq"};var h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r};function v(e){var t=e,{children:r,isDisabled:d,isSelected:u,isHomeUser:h,tooltip:y,onPress:g}=t,v=f(t,["children","isDisabled","isSelected","isHomeUser","tooltip","onPress"]);const b=(0,l.c)(v),[S,P]=(0,o.c)(),I=(0,n.useMemo)((()=>({children:e})=>y?n.createElement(y,null,e):n.createElement(n.Fragment,null,e)),[y]);return n.createElement(c.c,{ref:P,className:u?m.selectedRow:m.row,isAlternate:d||u?void 0:!(v.cellIndex%2),isHovered:!d&&S,style:b.style},n.createElement(I,null,n.createElement(a.c,{className:m.item,isDisabled:d,onPress:g},n.createElement(s.ye,{align:"space-between",orientation:"horizontal",paddingRight:"m",verticalAlign:"center",width:"100%"},r,n.createElement(s.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},h?n.createElement(i.default,null):null,u?n.createElement(p,null):null)))))}},112:(e,t,r)=>{"use strict";r.d(t,{c:()=>lt});var n=r(11504),i=r(27876),s=r(87396),a=r(3008),o=r(64776),c=r(34632),l=r(77072),d=r(66780),u=r(84508),p=r(56960),m=r(37492),h=r(59396),y=r(17068),g=r(34708),f=r(19388),v=r(44688),b=r(3544),S=r(87616),P=r(29164),I=r(29208),E=r(8684),w=r(58660),C=r(58176),O=r(58620),M=r(92432),T=r(96856),D=r(77792),k=r(11360),x=r(15372),A=Object.defineProperty,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&j(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&j(e,r,t[r]);return e};const F=/^utm_/;var V=Object.defineProperty,_=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&H(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&H(e,r,t[r]);return e};const G=250;function q({publicPagesURL:e,guid:t,title:r,type:i,onDone:s}){const o=`${e}?${function(e){const t=function(e){const t=function(){const{searchParams:e,hashParams:t}=(0,x.c)(window.location.href),r=U(U({},(0,k.c)(t)),(0,k.c)(e));return Object.keys(r).reduce(((e,t)=>(F.test(t)&&(e[t]=r[t]),e)),{})}();return z(z(z({},t),{utm_source:"app.plex.tv"}),e)}({utm_medium:"share"});return new URLSearchParams(t).toString()}()}`,c=encodeURIComponent(o),u=encodeURIComponent(r),{addToast:p}=(0,M.Wo)(),m=(0,E.c)(),{copyToClipboard:y,copyState:g,resetCopyState:f}=(0,D.c)(o);(0,n.useEffect)((()=>{if(g===D.z.Done){if(p({color:"confirm",description:(0,h.c)("Link copied to your clipboard"),type:"foreground"}),s){const e=window.setTimeout((()=>{s()}),G);return()=>{window.clearTimeout(e)}}f()}}),[p,g,s,f]);const v=(0,n.useCallback)((()=>{y(),m({action:d.y,type:i,guid:t})}),[y,t,i,m]);return n.createElement(a.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(T.o,{tooltip:n.createElement(l.a,{font:"body-3"},(0,h.c)("Share with Facebook"))},n.createElement(w.eE,{accessibilityLabel:(0,h.c)("Share with Facebook"),href:`https://www.facebook.com/sharer.php?u=${c}`,icon:"social-facebook",iconSize:"l",rel:"noopener noreferrer nofollow",target:"_blank"})),n.createElement(T.o,{tooltip:n.createElement(l.a,{font:"body-3"},(0,h.c)("Share with Twitter"))},n.createElement(w.eE,{accessibilityLabel:(0,h.c)("Share with Twitter"),href:`https://twitter.com/share?url=${c}&text=${u}`,icon:"social-twitter",iconSize:"l",rel:"noopener noreferrer nofollow",target:"_blank"})),n.createElement(T.o,{tooltip:n.createElement(l.a,{font:"body-3"},(0,h.c)("Share with Email"))},n.createElement(w.eE,{accessibilityLabel:(0,h.c)("Share with Email"),href:`mailto:?subject=${u}&body=${c}`,icon:"email",iconSize:"l",target:"_blank"})),n.createElement(T.o,{tooltip:n.createElement(l.a,{font:"body-3"},(0,h.c)("Copy Link"))},n.createElement(w.wP,{accessibilityLabel:(0,h.c)("Copy Link"),icon:"link",iconSize:"l",testID:"copyLink",onPress:v})))}const K={addFriends:"ItemSharingModalAddFriends-addFriends-y5y0qL"};function Q({modalState:e,title:t,publicPagesURL:r,guid:i,type:s}){const c=(0,E.c)(),l=(0,n.useCallback)((()=>{e.onClose(),c({action:d.i0,type:s,guid:i})}),[i,e,c,s]),u=(0,n.useCallback)((()=>{c({action:d.kB,type:s,guid:i})}),[i,c,s]);return n.createElement(n.Fragment,null,n.createElement(o.aU,null,n.createElement(a.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(O.c,{className:K.addFriends,onAddFriendsPress:u}))),n.createElement(o._A,null,n.createElement(C.y,{leftButton:r?n.createElement(q,{guid:i,publicPagesURL:r,title:t,type:s,onDone:e.onClose}):null,primaryButton:n.createElement(w.q,{color:"accent",disabled:!0,label:(0,h.c)("Send"),onPress:e.onClose}),rightButton:n.createElement(w.q,{label:(0,h.c)("Cancel"),onPress:l})})))}var $=r(87592),Y=r(25398),X=r(72528),J=r(99558),Z=r(82228),ee=r(91320),te=r(27256),re=r(94644),ne=r(43196),ie=r(45920),se=r(23771),ae=r(52288);const oe={avatarContainer:"FriendGroupRowItem-avatarContainer-TPHBIz"};var ce=Object.defineProperty,le=Object.defineProperties,de=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,he=(e,t,r)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ye=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&he(e,r,t[r]);if(ue)for(var r of ue(t))me.call(t,r)&&he(e,r,t[r]);return e},ge=(e,t)=>le(e,de(t)),fe=(e,t)=>{var r={};for(var n in e)pe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ue)for(var n of ue(e))t.indexOf(n)<0&&me.call(e,n)&&(r[n]=e[n]);return r};const ve=25,be=3;function Se(e){var t=e,{server:r,selectedFriends:i,isMultipleFriendsGroupDisabled:s,isSingleFriendGroupDisabled:o,selectedGroup:c,selectFriendGroup:d,selectFriend:u}=t,p=fe(t,["server","selectedFriends","isMultipleFriendsGroupDisabled","isSingleFriendGroupDisabled","selectedGroup","selectFriendGroup","selectFriend"]);const{item:m}=p,y=(0,n.useMemo)((()=>{const e=(null==m?void 0:m.friends[0].displayName)||(null==m?void 0:m.friends[0].username);if(e){const t=m.friends.length-1;return 1===t?(0,h.c)("{name} and 1 other",{name:e}):(0,h.c)("{name} and {count} others",{name:e,count:t})}return e}),[m]),g=(0,n.useCallback)((()=>{m&&d(m.username)}),[m,d]),f=(0,n.useMemo)((()=>({children:e})=>m&&m.friends.length>1?n.createElement(T.o,{tooltip:n.createElement(l.a,{color:"muted",font:"body-3"},m.friends.map((e=>e.displayName||e.username)).join(", "))},e):n.createElement(n.Fragment,null,e)),[m]);if(!m)return null;if((null==m?void 0:m.friends)&&1===(null==m?void 0:m.friends.length))return n.createElement(se.c,ge(ye({},p),{isDisabled:o,item:null==m?void 0:m.friends[0],selectFriend:u,selectedFriends:i,server:r}));const v=(null==c?void 0:c.username)===m.username;return n.createElement(ae.c,ye({isDisabled:s,isSelected:v,tooltip:f,onPress:g},p),n.createElement(a.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center",width:"90%"},n.createElement("div",{className:oe.avatarContainer},n.createElement(ie.c,{avatarSize:ve,avatars:m.friends.slice(0,be).map((e=>e.avatar))})),n.createElement(l.a,{color:"inherit",font:"body-2",numberOfLines:1},y)))}var Pe=r(25071),Ie=r(46204),Ee=Object.defineProperty,we=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&Me(e,r,t[r]);if(we)for(var r of we(t))Oe.call(t,r)&&Me(e,r,t[r]);return e},De=(e,t)=>{var r={};for(var n in e)Ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&we)for(var n of we(e))t.indexOf(n)<0&&Oe.call(e,n)&&(r[n]=e[n]);return r};function ke(e){var t=e,{isSelected:r,onPress:i}=t,s=De(t,["isSelected","onPress"]);return n.createElement(ae.c,Te({isDisabled:!1,isSelected:r,onPress:i},s),n.createElement(a.ye,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(Ie.c,{backgroundColor:"var(--color-brand-cerise)",color:"primary",icon:Pe.default,iconSize:"inherit",size:27}),n.createElement(l.a,{color:"inherit",font:"body-2"},(0,h.c)("All friends"))))}const xe=60,Ae=864e5;function Re(e,t){return t.timestamp-e.timestamp}const Ne=[],Le=[];var je=(e=>(e.Default="default",e.AllFriends="shareToAll",e))(je||{});function Ue(e,t){return e.filter((e=>e.displayName&&-1!==e.displayName.toLowerCase().indexOf(t.toLowerCase())||-1!==e.username.toLowerCase().indexOf(t.toLowerCase())))}function Fe(e,t){return e.filter((e=>!t.find((t=>t.id===e.id))))}var Ve=r(57512);const _e=Ve.m.injectEndpoints({endpoints:e=>({createPost:e.mutation({query:e=>({document:"\n    mutation createPost($input: CreatePostInput!) {\n  createPost(input: $input) {\n    id\n  }\n}\n    ",variables:e})})})}),{useCreatePostMutation:We}=_e;var Be=(e=>(e.MetadataMessage="METADATA_MESSAGE",e.MetadataReport="METADATA_REPORT",e))(Be||{});const He=Ve.m.injectEndpoints({endpoints:e=>({sendMessage:e.mutation({query:e=>({document:"\n    mutation sendMessage($input: CreateMessageInput!) {\n  createMessage(input: $input) {\n    __typename\n  }\n}\n    ",variables:e})})})}),{useSendMessageMutation:ze}=He,Ge={friendsList:"ItemSharingModalContent-friendsList-sLoVg5 VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"};var qe=Object.defineProperty,Ke=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Je=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ze=(e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&Je(e,r,t[r]);if($e)for(var r of $e(t))Xe.call(t,r)&&Je(e,r,t[r]);return e},et=(e,t)=>Ke(e,Qe(t));const tt=287,rt=75,nt=(0,Z.c)({rowHeight:40}),it={type:je.AllFriends,username:"allFriends"};function st({modalState:e,title:t,publicPagesURL:r,guid:s,type:u}){const p=(0,i.OY)(),m=(0,E.c)(),{addToast:y}=(0,M.Wo)(),g=(0,i.w1)(P.c),v=(0,n.useRef)(null),[b,S]=(0,n.useState)(""),[I,O]=(0,n.useState)(""),[T,D]=(0,n.useState)(!1),[k,x]=(0,n.useState)([]),[A,R]=(0,n.useState)(),{friends:N}=(0,i.w1)(f.c),{groups:L,singleFriends:j,isPopulated:U}=function(){const e=(0,i.OY)(),[t,r]=(0,n.useState)(),[s,a]=(0,n.useState)(),o=(0,i.w1)((0,ne.c)("messageRecipients")),{friends:c,isPopulated:l}=(0,i.w1)(f.c),d=(0,n.useCallback)((t=>{e((0,X.SI)({messageRecipients:o.filter((e=>e.timestamp!==t))}))}),[e,o]);return(0,n.useEffect)((()=>{if(!l)return;const t=[],n=o.sort(Re).filter((e=>{const t=(r=e.timestamp,Math.floor((Date.now()-r)/Ae)<xe);var r;return t||d(e.timestamp),t})).map((r=>{const n=r.ids.map((e=>c.find((t=>t.id===e)))).filter(Boolean);if(n.length!==r.ids.length){d(r.timestamp);const t=n.map((e=>e.id));if(!t.length)return;const i=[{ids:t,timestamp:r.timestamp}];e((0,X.SI)({messageRecipients:[...o.filter((e=>e.timestamp!==r.timestamp)),...i]}))}if(1===n.length&&!t.some((e=>e.id===n[0].id))){const e=n[0];t.push(e)}return{friends:n,ids:r.ids,username:n.map((e=>e.username)).join()}})).filter((e=>!!e)).reduce(((e,t)=>{const r=[...t.ids].sort().toString();return e.some((e=>[...e.ids].sort().toString()===r))?e:[...e,t]}),[]);a(n),r(t)}),[e,c,l,o,d]),{groups:null!=s?s:Le,singleFriends:null!=t?t:Ne,isPopulated:void 0!==s&&void 0!==t}}(),[F,V]=(0,n.useState)([]),[_,W]=(0,n.useState)([]),B=(0,i.w1)((0,ne.c)("messageRecipients"));(0,ee.c)({type:u,guid:s,friendsCount:N.length-j.length+L.length},U&&e.isOpen);const[H,{isLoading:z,error:G,isSuccess:K,fulfilledTimeStamp:Q,reset:Z}]=ze(),[ie,{isLoading:ae,error:oe,isSuccess:ce,reset:le}]=We();(0,n.useEffect)((()=>{V(Fe(N,j))}),[N,j]),(0,n.useEffect)((()=>{W(L)}),[L]);const de=(0,n.useCallback)((()=>{O(""),S(""),x([]),V(Fe(N,j)),R(void 0),D(!1)}),[N,j]),ue=T&&!b.length||!T&&!k.length&&!A;(0,n.useEffect)((()=>{if(!e.isOpen)return;const t=(null==G?void 0:G.message)||(null==oe?void 0:oe.message);t&&(y({color:"alert",description:t,type:"foreground",testID:"error"}),e.onClose())}),[y,null==G?void 0:G.message,e,null==oe?void 0:oe.message]),(0,n.useEffect)((()=>{e.isOpen||de()}),[e.isOpen,de]);const pe=(0,n.useCallback)((e=>{O(e.target.value),V(Fe(Ue(N,e.target.value),Ue(j,e.target.value))),W(function(e,t){return e.filter((e=>Ue(e.friends,t).length>0))}(L,e.target.value))}),[N,L,j]),me=(0,n.useCallback)((()=>{O(""),V(Fe(N,j))}),[N,j]),he=(0,n.useCallback)((e=>{S(e.target.value)}),[]);(0,n.useEffect)((()=>{ce&&(e.onClose(),le(),m({action:d.Uh,type:u,guid:s}))}),[s,ce,e,le,m,u]),(0,n.useEffect)((()=>{if(K){const t=[...(null==A?void 0:A.ids)||k].sort().toString(),r=B.find((e=>[...e.ids].sort().toString()===t));r?(r.timestamp=Q||0,p((0,X.SI)({messageRecipients:[...B]}))):p((0,X.SI)({messageRecipients:[...B,{ids:k||(null==A?void 0:A.ids),timestamp:Q}]})),e.onClose(),Z()}}),[p,Q,K,B,e,k,null==A?void 0:A.ids,Z]);const ye=(0,n.useCallback)((()=>{var e;H({input:{message:b,recipients:k.length>0?k:null!=(e=null==A?void 0:A.ids)?e:[],item:s,type:Be.MetadataMessage}}),m({action:d.G6,type:u,guid:s,queryUsed:!!I,recipients:k.length>0?k.length:null==A?void 0:A.ids.length,messageAttached:!!b})}),[H,b,k,null==A?void 0:A.ids,s,m,u,I]),ge=(0,n.useCallback)((()=>{ie({input:{message:b,item:s}})}),[ie,s,b]),fe=(0,n.useCallback)((()=>{ue||(T?ge():ye())}),[T,ue,ge,ye]),ve=(0,n.useCallback)((e=>{const t=k.filter((t=>t!==e));t.length===k.length&&t.push(e),x(t)}),[k]),be=(0,n.useCallback)((e=>{(null==A?void 0:A.username)===e?R(void 0):R(null==L?void 0:L.find((t=>t.username===e)))}),[L,null==A?void 0:A.username]),Pe=(0,n.useCallback)((()=>{e.onClose(),m({action:d.i0,type:u,guid:s})}),[s,e,m,u]),Ie=(0,n.useCallback)((()=>{D((e=>!e))}),[]),Ee=(0,n.useMemo)((()=>e=>{const{item:t}=e;return function(e){return!!e&&"type"in e&&e.type===je.AllFriends}(t)?n.createElement(ke,et(Ze({},e),{isSelected:T,onPress:Ie})):function(e){return!!e&&"friends"in e}(t)?n.createElement(Se,et(Ze({},e),{isMultipleFriendsGroupDisabled:T||k.length>0,isSingleFriendGroupDisabled:T||!!A,item:t,selectFriend:ve,selectFriendGroup:be,selectedFriends:T?[]:k,selectedGroup:T?void 0:A,server:g})):n.createElement(se.c,et(Ze({},e),{isDisabled:!!A||T,item:t,selectFriend:ve,selectedFriends:T?[]:k,server:g}))}),[T,Ie,ve,be,k,A,g]),we=!(b.trim().length||k.length||A||T),Ce=I?[..._,...F]:[it,..._,...F];return n.createElement(n.Fragment,null,n.createElement(o.kP,null,n.createElement(a.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},n.createElement(l.a,{color:"muted"},(0,h.c)("Friends")),n.createElement(a.ye,{orientation:"horizontal",width:tt},n.createElement(Y.U,{inputProps:{onChange:pe,value:I,placeholder:(0,h.c)("Search"),style:{padding:0,opacity:T?.5:1},disabled:T},onClearPress:me})))),U?n.createElement(o.aU,{paddingBottom:"none",paddingTop:"none"},F.length>0||_.length>0?n.createElement(re.c,{cellComponentFactory:Ee,className:Ge.friendsList,items:Ce,keyPropName:"username",layout:nt,scrollDirection:te.y.Vertical,totalSize:Ce.length}):null):n.createElement(a.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(c.c,null)),n.createElement(o._A,null,n.createElement(a.ye,{gap:"m",width:"100%"},n.createElement($.c,{size:"s"}),T?null:n.createElement(n.Fragment,null,k.length>0?n.createElement(l.a,{color:"inherit",font:"body-3",testID:"recipientIds"},function(e,t){return 0===t.length||0===e.length?"":`${(0,h.c)("To: ")}${e.map((e=>{const r=t.find((t=>t.id===e));return(null==r?void 0:r.displayName)||(null==r?void 0:r.username)})).filter((e=>!!e)).join(", ")}`}(k,N)):null,A?n.createElement(l.a,{color:"inherit",font:"body-3",testID:"recipientIds"},function(e){return e&&0!==e.length?`To: ${e.map((e=>e.displayName||e.username)).join(", ")}`:""}(A.friends)):null),n.createElement(a.ye,{gap:"l",width:"100%"},n.createElement(J.c,{ref:v,disabled:z,maxHeight:rt,name:"message",placeholder:(0,h.c)("Add a message"),value:b,onChange:he,onSubmit:fe}),n.createElement(C.y,{leftButton:r?n.createElement(q,{guid:s,publicPagesURL:r,title:t,type:u,onDone:we?e.onClose:void 0}):null,primaryButton:n.createElement(w.q,{color:"accent",disabled:ue,label:(0,h.c)("Send"),testID:"send",waiting:ae||z,onPress:fe}),rightButton:n.createElement(w.q,{label:(0,h.c)("Cancel"),onPress:Pe})})))))}var at=r(58980),ot=r(21040),ct=r(17544);function lt({children:e,modalState:t,item:r}){var w,C,O;const M=(0,i.OY)(),{metricsPane:T}=(0,I.e0)(),D=(0,E.c)(),k=(0,i.w1)(P.c),x=(0,i.w1)(S.c),A=(0,n.useMemo)((()=>`library/metadata/${(0,m.c)(r.guid)}`),[r.guid]),{isPending:R,isPopulated:N,error:L,item:{publicPagesURL:j}}=(0,i.w1)((0,b.c)(A)),[U,F]=(0,n.useState)(null!=(w=r.publicPagesURL)?w:j),{friends:V,isPopulated:_,isPending:W,error:B,refetch:H}=(0,at.c)(f.c,g.c.actions.fetchCommunityFriends),z=(0,ot.c)(B),G=(0,n.useCallback)((()=>{t.onClose(),D({action:d.i0,type:r.type,guid:r.guid})}),[r.guid,r.type,t,D]);(0,n.useEffect)((()=>{!z&&B&&t.isOpen&&H()}),[B,t.isOpen,z,H]),(0,n.useEffect)((()=>{!t.isOpen||!x||U||R||N||L||M(v.c.actions.fetchMetadataItem({server:k,key:A,provider:x}))}),[M,R,N,L,t.isOpen,x,A,U,k]),(0,n.useEffect)((()=>{j&&U!==j&&F(j)}),[j,U]);const q=(0,h.c)("Share With Friends - {title}",{title:(0,ct.c)(r,y.i)});return n.createElement(I.cp,{metricsContextParam:u.SHARE,metricsPage:p.eI,metricsPane:T},n.createElement(o.wJ,{isOpen:t.isOpen,onClose:G},n.createElement(o.Qn,null,e),n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,h.c)("Close"),header:q},!V.length&&_&&!B&&(U||N&&!L)?n.createElement(Q,{guid:null!=(C=r.guid)?C:"",modalState:t,publicPagesURL:U,title:q,type:r.type}):null,V.length&&!B&&(U||!L&&N)?n.createElement(st,{guid:null!=(O=r.guid)?O:"",modalState:t,publicPagesURL:U,title:q,type:r.type}):null,W&&!_||!U&&R&&!N?n.createElement(a.ye,{align:"center",gap:"xs",height:"100%",verticalAlign:"center",width:"100%"},n.createElement(c.c,null)):null,B||L?n.createElement(a.ye,{align:"center",gap:"xs",height:"100%",verticalAlign:"center",width:"100%"},n.createElement(s.default,{size:"xl"}),n.createElement(l.a,{font:"heading-3"},(0,h.c)("Something went wrong"))):null)))}},63308:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(92432),s=r(34708),a=r(19388),o=r(22134),c=r(58980);function l(e=""){const{friends:t,isPopulated:r,error:l}=(0,c.c)(a.c,s.c.actions.fetchCommunityFriends),{addToast:d}=(0,i.Wo)(),[u,p]=(0,n.useState)(t),[m,h]=(0,n.useState)([]),[y,g]=(0,n.useState)([]),{users:f}=(0,o.c)(!1);return(0,n.useEffect)((()=>{h(function(e,t){return e.filter((e=>!t.some((({user:t})=>t.uuid===e.id))))}(t,f).filter((t=>t.username.toLowerCase().includes(e.toLowerCase())||t.displayName.toLowerCase().includes(e.toLowerCase())))),g(function(e,t){return e.filter((e=>t.some((({user:t})=>t.uuid===e.id))))}(t,f))}),[t,e,f]),(0,n.useEffect)((()=>{p(t.filter((t=>t.username.toLowerCase().includes(e.toLowerCase())||t.displayName.toLowerCase().includes(e.toLowerCase()))))}),[t,e]),(0,n.useEffect)((()=>{(null==l?void 0:l.message)&&d({color:"alert",description:l.message,type:"foreground"})}),[d,l,null==l?void 0:l.message]),{friends:e?u:t,friendsWithoutLibraryAccess:m,friendsWithLibraryAccess:y,isPopulated:r,error:l}}},43212:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(57864),a=r(42452),o=r(64752),c=r(34908),l=r(29164);function d(){const e=(0,i.OY)(),t=(0,i.w1)(l.c),r=(0,i.w1)(c.c),[d,u]=(0,n.useState)(),p=(0,i.w1)(function(e){return(0,s.M3)(a.c,(t=>e.map((e=>e.machineIdentifier)).map((e=>t.serverDetails[e])).filter((e=>!!e))))}(r)),m=p.some((e=>e.isPending)),h=p.some((e=>e.isPopulated))||0===(null==d?void 0:d.length),y=p.some((e=>e.isSharing)),g=(0,n.useMemo)((()=>{const e=p.map((e=>e.error));return!!e.length&&e.length===p.length&&e.every(Boolean)}),[p]),f=(0,n.useMemo)((()=>{const e={};return p.map((t=>{t.detail&&t.error&&(e[t.detail.machineIdentifier]=t.error)})),e}),[p]);return(0,n.useEffect)((()=>{d&&d.length>0&&d.map((r=>{e(o.c.actions.fetchServerDetails({server:t,machineIdentifier:r.machineIdentifier}))}))}),[e,t,d]),(0,n.useEffect)((()=>{u(((e=[])=>{const t=[];return r.filter((e=>e.isFullOwnedServer&&e.uri)).forEach((r=>{e.find((e=>e.machineIdentifier===r.machineIdentifier))||t.push(r)})),0===t.length?e:[...e,...t]}))}),[r]),{serverDetails:(0,n.useMemo)((()=>p.map((e=>e.detail&&e.detail.librarySections.length>0?e.detail:void 0)).filter((e=>!!e))),[p]),isPending:m,isPopulated:h,isSharing:y,allServersWithError:g,errors:f}}},60504:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(63308),s=r(22134);function a(e="",{includeOnlyFriendsWithoutAccess:t}){const{friendsWithoutLibraryAccess:r,isPopulated:a,error:o}=(0,i.c)(e),{users:c,isPopulated:l,error:d}=(0,s.c)(!1),u=(0,n.useMemo)((()=>t?r:function(e,t){return e.filter((e=>e.username.toLowerCase().includes(t.toLowerCase())||e.displayName.toLowerCase().includes(t.toLowerCase()))).sort(((e,t)=>{const r=e.displayName||e.username,n=t.displayName||t.username;return r.localeCompare(n)}))}([...r,...c.map((({user:e})=>({avatar:e.thumb,displayName:e.title!==e.username?e.title:"",id:e.uuid,idRaw:e.id,username:e.username})))],e)),[r,t,e,c]);return{users:u,error:o||d,isPopulated:a&&l}}},10188:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(54008);function i(e){return((0,n.c)(e)?e.displayName:e.title)||e.username}},4280:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(79320),i=r(40415),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e};function u(e,t){const r=d({},null!=t?t:i.wJ);for(const t in e)void 0!==e[t]&&("allowChannels"!==t&&"allowSubtitleAdmin"!==t&&"allowSync"!==t&&"allowTuners"!==t?"filterMovies"!==t&&"filterMusic"!==t&&"filterTelevision"!==t||(r[t]=n.c[t].type.stringify(e[t],n.c[t])):r[t]=e[t]);return r}},77560:(e,t,r)=>{"use strict";r.d(t,{E:()=>m,c:()=>y});var n=r(44212),i=r(45372),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p={isPending:!1,isPopulated:!1,error:null,seasons:{}},m={isPending:!1,isPopulated:!1,error:null,episodes:[]},h={isPending:!1,isPopulated:!1,error:null,seasonEpisodes:m},y=(0,n.is)({name:"showTracking",initialState:p,reducers:{reset:()=>p,seasonsFetchRequested(e,t){(0,i.G8)(e)},seasonsFetchSucceeded(e,{payload:t}){(0,i.mM)(e),t.seasons.forEach((t=>{var r;t.index&&(e.seasons[t.index]=(r=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},h),a(r,o({season:t}))))}))},seasonsFetchFailed(e,{payload:t}){(0,i.C)(e,t.error)},seasonEpisodesFetchRequested(e,t){const r=e.seasons[t.payload.seasonIndex];r&&(0,i.G8)(r.seasonEpisodes)},seasonEpisodesFetchSucceeded(e,{payload:t}){const r=e.seasons[t.seasonIndex];r&&((0,i.mM)(r.seasonEpisodes),r.seasonEpisodes.episodes=t.episodes)},seasonEpisodesFetchFailed(e,{payload:t}){const r=e.seasons[t.seasonIndex];r&&(0,i.C)(r.seasonEpisodes,t.error)}}})},18730:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(85448),i=r(35860),s=r(89064),a=r(48800),o=r(63756),c=r(95460);const l=function(){const e=(0,n.SU)({path:[c.c.playHistory,...c.c.playlist,...c.c.prePlay,...c.c.prePlayActivityFeed,...c.c.prePlayCredits,c.c.watchNow,c.c.hybridGuide,c.c.providerSettings,c.c.media,c.c.serverSetup,c.c.serverUpdate],exact:!0}),t=null==e?void 0:e.params,r=null==t?void 0:t.machineIdentifier,l=null==t?void 0:t.providerIdentifier;return r||l?{machineIdentifier:r||s.A,providerIdentifier:l?decodeURIComponent(l):i.Qh}:{machineIdentifier:o.c.machineIdentifier,providerIdentifier:a.c.identifier}}},31212:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={secret:{secret:void 0,provisioningUri:void 0,isPending:!1,isPopulated:!1,error:null},toggle:{isPending:!1,isPopulated:!1,error:null},recoveryCodes:{isPending:!1,isPopulated:!1,error:null},sendRecoveryCode:{isPending:!1,isPopulated:!1,error:null},codes:[]},a=(0,n.is)({name:"twoFactorAuth",initialState:s,reducers:{reset:()=>s,resetToggle(e){e.toggle=s.toggle},resetSendRecoveryCode(e){e.sendRecoveryCode=s.sendRecoveryCode},createSecretRequested(e,t){(0,i.G8)(e.secret)},createSecretSucceeded(e,{payload:t}){(0,i.mM)(e.secret),e.secret.provisioningUri=t.provisioningUri,e.secret.secret=t.secret},createSecretFailed(e,{payload:t}){(0,i.C)(e.secret,t.error)},toggleRequested(e,t){(0,i.G8)(e.toggle)},toggleSucceeded(e,{payload:t}){(0,i.mM)(e.toggle),t.enabled&&(e.codes=t.codes)},toggleFailed(e,{payload:t}){(0,i.C)(e.toggle,t.error)},generateRecoveryCodesRequested(e,t){(0,i.G8)(e.recoveryCodes)},generateRecoveryCodesSucceeded(e,{payload:t}){(0,i.mM)(e.recoveryCodes),e.codes=t.codes},generateRecoveryCodesFailed(e,{payload:t}){(0,i.C)(e.recoveryCodes,t.error)},sendRecoveryCodeRequested(e){(0,i.G8)(e.sendRecoveryCode),e.sendRecoveryCode.isPopulated=!1},sendRecoveryCodeSucceeded(e){(0,i.mM)(e.sendRecoveryCode)},sendRecoveryCodeFailed(e,{payload:t}){(0,i.C)(e.sendRecoveryCode,t.error),e.sendRecoveryCode.isPopulated=!1}}})},85028:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(3008),s=r(42152),a=r(77072),o=r(95156);const c=parseInt(o.c.searchResultPosterWidth,10);function l({posterStyle:e,score:t}){return t?n.createElement(s.mw,{posterStyle:e,width:c},n.createElement(i.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(a.a,{color:"muted",font:"body-3",numberOfLines:1},Math.round(100*t)/100))):null}},8764:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(93808),s=r(37984),a=r(64156),o=r(2024),c=r(54492);const l=function({imageClassName:e,posterSize:t,tag:r}){const[l,d]=(0,s.c$)(),u=(0,a.cp)({width:t,height:t,server:l,provider:d,url:r.thumb}),p=r.tagType===i.ys.Genre;return n.createElement("div",{style:{width:t,height:t}},u?n.createElement(o.c,{className:e,height:t,src:u,width:t}):null,!u||p?n.createElement(c.c,{className:u?"UniversalSearchTagPoster-anagramOverImage-jmE0yg UniversalSearchTagPoster-anagram-lYfYkZ Anagram-anagram-H5cIHF":"UniversalSearchTagPoster-anagram-lYfYkZ Anagram-anagram-H5cIHF",height:t,name:r.tag,width:t}):null)}},63008:(e,t,r)=>{"use strict";r.d(t,{W:()=>V,cp:()=>_});var n=r(11504),i=r(2536),s=r(3008),a=r(42152),o=r(77072),c=r(59396),l=r(35624),d=r(37048),u=r(93808),p=r(4388),m=r(6400),h=r(77404),y=r(61924),g=r(62128),f=r(50236),v=r(7060),b=r(36248),S=r(67532),P=r(37984),I=r(64156),E=r(2024),w=r(85028),C=r(8764),O=r(47001),M=r(20136),T=r(79392),D=r(7752),k=r(49412),x=r(54492);const A={emptyPoster:"SearchResultInfoContainer-emptyPoster-XTz9X_"},R=parseInt(l.c.searchResultHeight,10),N=parseInt(l.c.searchResultPosterWidth,10);function L({title:e,subtitle:t,score:r,badgeTitle:c,posterSrc:l,posterFit:d=E.A.Cover,posterFallback:u,posterFallbackTitle:p,posterWidth:m,posterHeight:h,posterStyle:y,children:g}){const f=(0,O.c)();return n.createElement(s.ye,{gap:"m",grow:!0,height:R,orientation:"horizontal",verticalAlign:"center",width:"100%"},f?n.createElement(w.c,{posterStyle:y,score:r}):n.createElement(a.mw,{posterStyle:y,width:m},l?n.createElement(E.c,{fit:d,height:h,src:l,width:m}):null!=u?u:n.createElement("div",{className:A.emptyPoster},n.createElement(x.c,{height:m,name:p,width:m}))),n.createElement(s.ye,{width:"100%"},n.createElement(o.a,{font:"body-2",numberOfLines:1},e),n.createElement(s.ye,{align:"space-between",gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(o.a,{color:"muted",font:"body-2",numberOfLines:1},t),n.createElement("div",{style:{maxWidth:"50%"}},g))),c?n.createElement(s.ye,{shrink:!1},n.createElement(i.k,{label:c})):null)}function j({channel:e,posterWidth:t,children:r,score:i}){const[s,a]=(0,P.c$)(),{width:o,height:l}=(0,m.c)({width:t,aspectRatio:p.Aj}),d=(0,I.cp)({width:o,height:l,server:s,provider:a,url:e.coverPoster});let u=(0,c.c)("Channel");return e.categories.length&&(u+=`  ${e.categories[0]}`),n.createElement(L,{badgeTitle:(0,c.c)("Watch Now"),posterFallback:n.createElement("div",{className:A.emptyPoster}),posterHeight:l,posterSrc:d,posterStyle:"portrait",posterWidth:o,score:i,subtitle:u,title:e.title},r)}function U({result:e,posterWidth:t,mergedResult:r,children:i,score:s}){const[a,o]=(0,P.c$)(),c=e.item.type===u.WW.Person,l=(0,p.cp)(e.item.type,e.item.subtype),{width:d,height:g}=(0,m.c)({width:t,aspectRatio:l}),f=(0,I.cp)({width:d,height:g,server:a,provider:o,url:(0,h.c)(e.item,{aspectRatio:l})}),v=(0,n.useMemo)((()=>c?r?(0,T.c)(r):(0,D.c)(e).join(", "):(0,y.c)({metadataType:e.item.type})),[c,r,e]);return n.createElement(L,{posterFallbackTitle:e.item.title,posterHeight:g,posterSrc:f,posterStyle:c?"circle":"square",posterWidth:d,score:s,subtitle:v,title:e.item.title},i)}function F({result:e,posterWidth:t,children:r,mergedResult:i,score:s}){const[a,o]=(0,P.c$)(),c=(0,b.c)(e.item.tagType),l=(0,g.c)(e.item.tagType),d=(0,I.cp)({width:t,height:t,server:a,provider:o,url:e.item.thumb}),p=l===u.i_.Genre?n.createElement(C.c,{posterSize:t,tag:e.item}):void 0,m=(0,n.useMemo)((()=>c?i?(0,T.c)(i):(0,D.c)(e).join(", "):(0,f.c)(l)),[c,i,e,l]);return n.createElement(L,{posterFallback:p,posterHeight:t,posterSrc:p?void 0:d,posterStyle:c?"circle":"square",posterWidth:t,score:s,subtitle:m,title:e.item.tag},r)}function V({metadataItem:e,posterWidth:t,children:r,score:i}){const[s,a]=(0,P.c$)(),o=(0,p.cp)(e.type,e.subtype,{listStyle:S.y.Search}),{width:c,height:l}=(0,m.c)({width:t,aspectRatio:o}),u=(0,I.cp)({width:c,height:l,server:s,provider:a,url:(0,h.c)(e,{aspectRatio:o})}),g=e.isLiveTVChannel?E.A.Contain:E.A.Cover,f=o===p.Aj?"portrait":"square",b=(0,n.useMemo)((()=>{const t=(0,M.c)(e);return`${(0,y.c)({metadataType:e.type,metadataSubtype:e.subtype,isEPG:(0,v.c)(e)})}${t?d.iZ:""}${t}`}),[e]);return n.createElement(L,{posterFallbackTitle:e.title,posterFit:g,posterHeight:l,posterSrc:u,posterStyle:f,posterWidth:c,score:i,subtitle:b,title:e.title},r)}function _({result:e,children:t,mergedResult:r,posterWidth:i=N}){var s,a,o,c;return(0,k.gJ)(e)?n.createElement(U,{mergedResult:r,posterWidth:i,result:e,score:null!=(s=null==r?void 0:r.score)?s:e.score},t):(0,k.Sy)(e)?n.createElement(F,{mergedResult:r,posterWidth:i,result:e,score:null!=(a=null==r?void 0:r.score)?a:e.score},t):(0,k.Ce)(e)?n.createElement(j,{channel:e.item,posterWidth:i,score:null!=(o=null==r?void 0:r.score)?o:e.score},t):n.createElement(V,{metadataItem:e.item,posterWidth:i,score:null!=(c=null==r?void 0:r.score)?c:e.score},t)}},5028:(e,t,r)=>{"use strict";r.d(t,{c:()=>$});var n=r(11504),i=r(3008),s=r(12832),a=r(58660),o=r(35860),c=r(93808),l=r(7060),d=r(37984),u=r(44956),p=r(65824),m=r(25144),h=r(1312),y=r(49412);function g({mergedResult:e,result:t}){const[r]=(0,d.c$)(),{onResultSelect:i}=(0,u.g)(),s=(0,n.useMemo)((()=>e?(0,p.c)(e):void 0),[e]),g=(0,n.useMemo)((()=>{var e;const r=null!=(e=null==s?void 0:s.items.filter(((e,r)=>{var n;return!(o._u(null==(n=(0,m.c)(e))?void 0:n.providerIdentifier,o.Im)||(0,y.gr)(t)&&(0,l.c)(t.item)&&(0,y.gr)(e)&&t.item.type===c.WW.Show&&e.item.type===c.WW.Episode&&0===r)})))?e:[];return r.length>1?" +"+(r.length-1):""}),[null==s?void 0:s.items,t]),f=(0,n.useMemo)((()=>{var e;return!g&&o._u(null==(e=(0,m.c)(t))?void 0:e.providerIdentifier,o.Im)?"":`${(0,h.c)(r,t)}${g}`}),[g,t,r]),v=(0,n.useCallback)((()=>{e&&i&&i(e)}),[e,i]);return f?n.createElement(a.c,{color:"accent",font:"body-2",onPress:v},f):null}var f=r(42152),v=r(35624),b=r(4388),S=r(6400),P=r(77404),I=r(36248),E=r(67532),w=r(64156),C=r(2024),O=r(85028),M=r(8764),T=r(47001),D=r(54492);const k={emptyPoster:"SearchResultItemContentPoster-emptyPoster-tR3FVH"},x=parseInt(v.c.searchResultPosterWidth,10);function A({result:e,score:t}){const[r,i]=(0,d.c$)(),s=(0,T.c)(),a=(0,n.useMemo)((()=>(0,y.Ce)(e)?b.Aj:(0,y.Sy)(e)?b.eg:(0,b.cp)(e.item.type,e.item.subtype,{listStyle:E.y.Search})),[e]),{width:o,height:l}=(0,n.useMemo)((()=>(0,S.c)({width:x,aspectRatio:a})),[a]),u=(0,n.useMemo)((()=>(0,y.Ce)(e)?"portrait":(0,y.gJ)(e)?e.item.type===c.WW.Person?"circle":"square":(0,y.Sy)(e)?(0,I.c)(e.item.tagType)?"circle":"square":a===b.Aj?"portrait":"square"),[a,e]),p=(0,n.useMemo)((()=>(0,y.Ce)(e)?e.item.coverPoster:(0,y.Sy)(e)?e.item.tagType===c.ys.Genre?void 0:e.item.thumb:(0,P.c)(e.item,{aspectRatio:a})),[a,e]),m=(0,w.cp)({width:o,height:l,server:r,provider:i,url:p}),h=(0,n.useMemo)((()=>(0,y.gr)(e)&&e.item.isLiveTVChannel?C.A.Contain:C.A.Cover),[e]),g=(0,n.useMemo)((()=>(0,y.Ce)(e)?n.createElement("div",{className:k.emptyPoster}):(0,y.Sy)(e)?e.item.tagType===c.ys.Genre?n.createElement(M.c,{posterSize:x,tag:e.item}):void 0:n.createElement("div",{className:k.emptyPoster},n.createElement(D.c,{height:x,name:e.item.title,width:x}))),[e]);return s?n.createElement(O.c,{posterStyle:u,score:t}):n.createElement(f.mw,{posterStyle:u,width:x},m?n.createElement(C.c,{fit:h,height:l,src:m,width:o}):g)}var R=r(77072);function N({result:e}){const t=(0,n.useMemo)((()=>{if((0,y.gr)(e)&&e.item.type===c.WW.Episode)return e.item.grandparentTitle}),[e]);return t?n.createElement(R.a,{font:"body-2",numberOfLines:1},t):null}function L({result:e}){const t=(0,n.useMemo)((()=>(0,y.Sy)(e)?e.item.tag:e.item.title),[e]);return n.createElement(R.a,{color:"primary",font:"heading-3",numberOfLines:1},t)}var j=r(59396),U=r(37048),F=r(23256),V=r(61924),_=r(62128),W=r(50236),B=r(20136),H=r(79392),z=r(7752);function G({mergedResult:e,result:t}){const r=(0,n.useMemo)((()=>{var t;if(e&&(0,y.gr)(e.items[0])&&(0,l.c)(e.items[0].item))return null==(t=e.items.filter(y.gr).find((({item:e})=>e.type===c.WW.Episode||e.type===c.WW.Movie)))?void 0:t.item}),[e]),s=(0,n.useMemo)((()=>{if((0,y.Ce)(t))return`${(0,j.c)("Channel")}${t.item.categories.length?`${U.iZ}${t.item.categories[0]}`:""}`;if((0,y.gJ)(t)||(0,y.Sy)(t))return(0,y.Sy)(t)&&!(0,I.c)(t.item.tagType)?(0,W.c)((0,_.c)(t.item.tagType)):(0,y.gJ)(t)&&t.item.type!==c.WW.Person?(0,V.c)({metadataType:t.item.type}):e?(0,H.c)(e):(0,z.c)(t).join(", ");const s=(0,B.c)(null!=r?r:t.item),a=(0,V.c)({metadataType:t.item.type,metadataSubtype:t.item.subtype,isEPG:(0,l.c)(t.item)});return n.createElement(i.ye,{gap:"xxs",orientation:"horizontal"},s?n.createElement(R.a,{font:"inherit",numberOfLines:1},s):null,s?n.createElement(R.a,{font:"inherit",shrink:!1},U.iZ):null,r?n.createElement(R.a,{font:"inherit",shrink:!1},n.createElement(F.c,{metadataItem:r}),U.iZ):null,n.createElement(R.a,{font:"inherit",shrink:!1},a))}),[e,r,t]);return n.createElement(R.a,{font:"body-2"},s)}var q=r(35836),K=r(86552);const Q=(0,q.c)();function $({result:e,mergedResult:t,isHighlighted:r,isScrolling:a}){var o;const c=(0,K.c)(r&&!a,250);return n.createElement(i.ye,{align:"space-between",gap:"m",grow:!0,height:Q,orientation:"horizontal"},n.createElement(i.ye,{gap:"m",grow:!0,orientation:"horizontal",verticalAlign:"center"},n.createElement(A,{result:e,score:null!=(o=null==t?void 0:t.score)?o:e.score}),n.createElement(i.ye,{gap:"none",height:"100%",verticalAlign:"center"},n.createElement(L,{result:e}),n.createElement(N,{result:e}),n.createElement(G,{mergedResult:t,result:e}),n.createElement(g,{mergedResult:t,result:e}))),n.createElement(i.ye,{shrink:!1,verticalAlign:"center"},n.createElement(s.c,{isHighlighted:r,mergedResult:t,result:e,showWatchlistAction:c})))}},12832:(e,t,r)=>{"use strict";r.d(t,{c:()=>De});var n=r(11504),i=r(27876),s=r(93808),a=r(7060),o=r(51304),c=r(37984),l=r(86564),d=r(36820),u=r(24752),p=r(22509),m=r(62592);const h="SearchResultItemContentActions-toggleLink-M711I2 Link-link-vSsQW1",y="SearchResultItemContentActions-actionLink-IaKmyy SearchResultItemContentActions-toggleLink-M711I2 Link-link-vSsQW1",g=function({id:e,isPending:t,onPress:r}){return n.createElement(m.c,{className:h,icon:n.createElement(p.default,{size:"l"}),id:e,isPending:t,onPress:r})};var f=r(42440),v=r(89448),b=r(87440),S=r(10376),P=r(56972),I=r(25760),E=r(48708);const w=function({result:e}){const[t,r]=(0,c.c$)(),{actionsMenuButtonID:s,isActionsMenuOpen:a,isActionsPending:o,onActionsMenuClose:l,onActionsMenuCloseComplete:d,onActionsMenuToggle:p}=function({server:e,provider:t}){const r=(0,i.OY)(),[s,a]=(0,S.c)(),[o,c]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!1),{isPending:u,isPopulated:p}=(0,i.w1)((0,I.c)(t)),{isPending:m,isPopulated:h}=(0,i.w1)((0,P.c)(t)),y=m||u,g=(0,n.useCallback)((()=>{!t||m||h||(0,v.SS)((()=>{r(E.cp.actions.availabilityPlatformsFetchRequested({server:e,provider:t}))})),!t||u||p||(0,v.SS)((()=>{r(E.cp.actions.preferredServicesFetchRequested({server:e,provider:t}))})),d(!1),c(!0)}),[r,m,h,u,p,t,e]),f=(0,n.useCallback)((()=>{d(!0),c(!1),t&&y&&(r(E.cp.actions.availabilityPlatformsFetchCancelled({server:e,provider:t})),r(E.cp.actions.preferredServicesFetchCancelled({server:e,provider:t})))}),[r,y,t,e]),w=(0,n.useCallback)((()=>{d(!1)}),[]),C=(0,n.useCallback)((()=>{o?f():g()}),[o,f,g]),O=o&&!y,M=y||s||o||l;return{actionsMenuButtonID:(0,b.c)(),hoverRef:a,isHovered:s,isActionsPending:y,isActionsVisible:M,isActionsMenuOpen:O,isActionsMenuClosing:l,onActionsMenuOpen:g,onActionsMenuClose:f,onActionsMenuCloseComplete:w,onActionsMenuToggle:C}}({server:t,provider:r}),m=e.item.id?String(e.item.id):void 0,{confirmServiceToggleModal:h,toggleServiceMenuItem:y}=(0,f.c)({service:m,onMenuClose:l});return n.createElement(n.Fragment,null,n.createElement(g,{id:s,isPending:o,onPress:p}),n.createElement(u.c,{isOpen:a,target:s,onMenuClose:l,onMenuCloseComplete:d},y),h)};var C=r(59396),O=r(36728),M=r(14252),T=r(22436),D=r(99412),k=r(55116),x=r(54060),A=Object.defineProperty,R=Object.defineProperties,N=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=function({result:e}){const t=(0,n.useMemo)((()=>{return t=((e,t)=>{for(var r in t||(t={}))j.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))U.call(t,r)&&F(e,r,t[r]);return e})({},e.item),r={gridKey:e.item.id.split("-")[1],vcn:"000",isHd:!1,source:e.source,uid:(0,x.c)(e.item,e.source)},R(t,N(r));var t,r}),[e.item,e.source]),{actionsMenuButtonID:r,isActionsMenuOpen:s,isActionsPending:a,onActionsMenuClose:o,onActionsMenuCloseComplete:c,onActionsMenuToggle:l}=function(){const e=(0,i.OY)(),[t,r]=(0,S.c)(),[s,a]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),l=(0,i.w1)(M.c),{isPending:d,isPopulated:u}=(0,i.w1)(D.c),p=(0,n.useCallback)((()=>{d||u||(0,v.SS)((()=>{e(T.cp.actions.favoriteChannelsFetchRequested({cloudServer:l}))})),c(!1),a(!0)}),[l,e,d,u]),m=(0,n.useCallback)((()=>{c(!0),a(!1)}),[]),h=(0,n.useCallback)((()=>{c(!1)}),[]),y=(0,n.useCallback)((()=>{s?m():p()}),[s,m,p]),g=s&&!d,f=d||t||s||o;return{actionsMenuButtonID:(0,b.c)(),hoverRef:r,isHovered:t,isActionsPending:d,isActionsVisible:f,isActionsMenuOpen:g,isActionsMenuClosing:o,onActionsMenuOpen:p,onActionsMenuClose:m,onActionsMenuCloseComplete:h,onActionsMenuToggle:y}}(),{isFavorite:d,onToggleFavoriteChannelPress:p}=(0,k.c)({channel:t,onMenuClose:o});return n.createElement(n.Fragment,null,n.createElement(g,{id:r,isPending:a,onPress:l}),n.createElement(u.c,{isOpen:s,target:r,onMenuClose:o,onMenuCloseComplete:c},n.createElement(O.c,{onPress:p},d?(0,C.c)("Remove from Favorites"):(0,C.c)("Add to Favorites"))))};var _=r(47312),W=r(48852),B=r(3008),H=r(9868),z=r(19264),G=r(35860),q=r(52008),K=r(77460),Q=r(72772),$=r(24992),Y=r(87980),X=r(87096),J=r(98348),Z=r(29704),ee=r(92456),te=r(3728),re=r(53588),ne=r(37864),ie=r(17884),se=r(92756),ae=r(96048),oe=r(70944),ce=r(74364),le=r(17464),de=Object.defineProperty,ue=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ge=(e,t,r)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t)=>{for(var r in t||(t={}))he.call(t,r)&&ge(e,r,t[r]);if(me)for(var r of me(t))ye.call(t,r)&&ge(e,r,t[r]);return e};function ve({metadataItem:e,onActionPress:t}){const r=(0,i.OY)(),[a,o]=(0,c.c$)(),l=(0,i.w1)(z.c),d=(0,i.w1)(M.c),u=G.SI(o.identifier),p=(0,i.w1)((0,le.c)(G.Im,u)),h=(0,Q.c)(e.sourceURI),g=(0,ie.c)(e),{discoverProviderSourceURI:f,discoverProviderItemState:v}=(0,re.c)(e),b=[s.WW.Movie,s.WW.Show,s.WW.Season,s.WW.Episode].includes(e.type),S=(0,X.y0)({discoverProvider:p,discoverProviderItemState:v,metadataItem:e,metadataItemState:h,provider:o,server:a,stableUser:l}),P=(0,n.useMemo)((()=>b&&(0,ce.c)({type:e.type,sourceURI:e.sourceURI,primaryGuid:e.primaryGuid,metadataItemState:h})),[b,e.primaryGuid,e.sourceURI,e.type,h]),I=(0,n.useMemo)((()=>b&&(0,oe.c)({server:a,type:e.type,sourceURI:f,primaryGuid:e.primaryGuid,metadataItemState:v})),[v,f,b,e.primaryGuid,e.type,a]),{isRemoveFromWatchlistVisible:E}=(0,ne.c)(e),w=(0,n.useCallback)((()=>{t(),g.onToggleWatchlist({added:!E,showToastOnAdded:!0})}),[E,t,g]);(0,n.useEffect)((()=>{P&&r(ae.c.actions.fetchRequested({server:a,provider:o,metadataItem:e}))}),[r,e,o,a,P]),(0,n.useEffect)((()=>{var t,n;p&&f&&I&&r(ae.c.actions.fetchRequested({server:d,provider:p,metadataItem:(t=fe({},e),n={sourceURI:f},ue(t,pe(n)))}))}),[d,p,f,r,e,I]);const C=(0,se.c)(e.type,E);return b&&S?n.createElement(n.Fragment,null,n.createElement(m.c,{className:y,icon:E?n.createElement(ee.default,{size:"l"}):n.createElement(te.default,{size:"l"}),isDisabled:a.isCloud?!h.isPopulated:!v.isPopulated,label:C,onPress:w}),g.showTrackingModal):null}var be=r(44956),Se=r(78112),Pe=Object.defineProperty,Ie=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oe=(e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&Ce(e,r,t[r]);if(Ie)for(var r of Ie(t))we.call(t,r)&&Ce(e,r,t[r]);return e};const Me=function({result:e,isHighlighted:t,showWatchlistAction:r}){const s=e.item,[o,l]=(0,c.c$)(),u=(0,i.w1)(z.c),{closeMenu:p}=(0,be.g)(),h=(0,Q.c)(e.sourceURI),f=(0,Z.c)(),v=(0,H.y)(),{actionsMenuButtonID:b,isActionsPending:S,isActionsMenuOpen:P,onActionsMenuClose:I,onActionsMenuCloseComplete:E,onActionsMenuToggle:w}=(0,$.c)({server:o,provider:l,metadataItem:s,metadataItemState:h}),{items:O}=(0,d.Q)(),M=O.length>0,T=(0,n.useMemo)((()=>{var e;const t=(0,X.gR)({server:o,provider:l,metadataItem:s,metadataItemState:h,stableUser:u});if((0,a.c)(s)){const{beginsAt:r,endsAt:n}=null!=(e=(0,J.c)(s.Media))?e:{},i=Math.floor(Date.now()/1e3);return t&&r&&n&&i>=r&&i<n}return t}),[s,h,l,o,u]),D=M&&T,k=(0,X.uU)({server:o,provider:l,metadataItem:s,metadataItemState:h,stableUser:u}),x=G._u(l.identifier,G.Im)?{isShuffleVisible:M,isQueueVisible:M,isWatchTogetherVisible:M}:{},A=(0,Y.c)(s),R=(0,n.useCallback)((()=>{f(e)}),[e,f]),N=(0,n.useCallback)((()=>{A.onPlayPress(),R(),null==p||p()}),[p,R,A]);return n.createElement(B.ye,{align:"right",gap:"none",orientation:"horizontal"},r?n.createElement(ve,{metadataItem:s,onActionPress:R}):null,k?n.createElement(m.c,{className:y,icon:n.createElement(_.default,{color:"alert",size:"l"}),label:(0,C.c)("Record"),onPress:v.onOpen}):null,D?n.createElement(m.c,{className:y,icon:n.createElement(W.default,{size:"l"}),label:(0,C.c)("Play"),onPress:N}):null,n.createElement(g,{id:b,isPending:t&&S,onPress:w}),n.createElement(q.c,{actionsOverride:Oe({isPlayVisible:!1,isRecordVisible:!1,isAddToWatchlistVisible:!1,isRemoveFromWatchlistVisible:!1},x),isOpen:P,metadataItem:s,target:b,onActionPress:R,onMenuClose:I,onMenuCloseComplete:E}),A.playModal,n.createElement(K.c,{metadataItem:s,metadataItemState:h},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r})=>{const i=h.grandparentSubscriptionType||h.subscriptionType||s.type;return n.createElement(Se.c,{isOpen:v.isOpen,metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,subscriptionType:i,onModalClose:v.onClose})})))};var Te=r(49412);function De({isHighlighted:e,showWatchlistAction:t,mergedResult:r,result:u}){const[p,m]=(0,c.c$)(),h=(0,i.w1)(l.c),y=(0,n.useMemo)((()=>{var e;return r&&(0,Te.gr)(r.items[0])&&(0,a.c)(r.items[0].item)&&(0,Te.Ce)(u)&&null!=(e=r.items.filter(Te.gr).find((({item:e})=>e.type===s.WW.Episode||e.type===s.WW.Movie)))?e:u}),[r,u]);return y&&!h&&((0,Te.Sy)(y)||(0,Te.gr)(y)||(0,Te.Ce)(y))?(0,Te.Ce)(y)?n.createElement(V,{result:y}):(0,Te.Sy)(y)?y.item.tagType===s.ys.AvailabilityPlatform?n.createElement(w,{result:y}):null:n.createElement(o.cp,{containerKey:y.item.childrenKey,containerProvider:m,containerServer:p,containerSourceURI:y.item.sourceURI,containerSubtype:y.item.subtype,containerType:y.item.type},n.createElement(d.c,{metadataItem:y.item},n.createElement(Me,{isHighlighted:e,result:y,showWatchlistAction:t}))):null}},73092:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(94840),s=r(35836),a=r(49828);var o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=(0,s.c)();function y({children:e,forwardedRef:t,height:r,isHovered:s,isSelected:o}){const c=(0,n.useMemo)((()=>(null!=r?r:h)+2*(0,a.c)("s")),[r]);return n.createElement(i.c,{ref:t,className:o?"SearchResultListRow-selected-pIsBD2":"SearchResultListRow-container-eOnSD1",hoveredClassName:"SearchResultListRow-hovered-v_TAFI",isHovered:s,style:{height:c}},e)}const g=n.forwardRef(((e,t)=>{return n.createElement(y,(r=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},e),c(r,l({forwardedRef:t}))));var r}))},74914:(e,t,r)=>{"use strict";r.d(t,{c:()=>Q});var n=r(11504),i=r(3008),s=r(64776),a=r(7988),o=r(69956),c=r(59396),l=r(35624),d=r(37984),u=r(63008),p=r(89080),m=r.n(p),h=r(42152),y=r(64856),g=r(45852),f=r(77072),v=r(66780),b=r(24348),S=r(36340),P=r(17068),I=r(37048),E=r(79296),w=r(23256),C=r(86068),O=r(93808),M=r(62276),T=r(98348),D=r(7060),k=r(10376),x=r(61252),A=r(94840),R=r(8684),N=r(85028),L=r(12832),j=r(47001),U=r(20136),F=r(1312),V=r(49412);const _="data:image/svg+xml,%3csvg fill='none' height='48' viewBox='0 0 48 48' width='48' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cradialGradient id='a' cx='0' cy='0' gradientTransform='matrix(14.8407 0 0 24.2812 31.1401 23.9457)' gradientUnits='userSpaceOnUse' r='1'%3e%3cstop offset='0' stop-color='%23f9be03'/%3e%3cstop offset='1' stop-color='%23cc7c19'/%3e%3c/radialGradient%3e%3cpath d='m24 48c13.2545 0 24-10.7455 24-24s-10.7455-24-24-24-24 10.7455-24 24 10.7455 24 24 24z' fill='%2324272b'/%3e%3cpath d='m16.8181 10.896h7.6272l8.4168 13.125-8.4168 13.125h-7.6272l8.4168-13.125z' fill='url(%23a)'/%3e%3c/svg%3e",W={underlay:"ChooseSearchResultContent-underlay-MrBBEd",overlay:"ChooseSearchResultContent-overlay-KThfoW",listRow:"ChooseSearchResultContent-listRow-EKsSTi SearchResultListRow-container-eOnSD1",listRowHovered:"ChooseSearchResultContent-listRowHovered-orxPSK SearchResultListRow-hovered-v_TAFI"},B=parseInt(l.c.chooseItemModalPosterWidth,10);function H({mergedResult:e,result:t,onResultSelect:r}){const[s]=(0,d.c$)(),[a,o]=(0,k.c)(),[c,l]=(0,n.useState)(!1),u=(0,j.c)(),p=(0,R.c)(),H=(0,n.useCallback)((()=>l(!0)),[]),z=(0,n.useCallback)((()=>l(!1)),[]),G=(0,n.useCallback)((()=>{null==r||r(t,!1),p({pane:b.qW,action:v._})}),[r,t,p]),q=(0,n.useMemo)((()=>u?n.createElement(N.c,{posterStyle:"circle",score:t.score}):s.isCloud?n.createElement(h.mw,{posterStyle:"circle",width:B},n.createElement(i.ye,{align:"center",gap:"s",height:"100%",verticalAlign:"center"},n.createElement("img",{src:String(_)}))):n.createElement(x.c,{server:s,size:B})),[t.score,s,u]),K=(0,n.useMemo)((()=>(0,F.c)(s,t)),[t,s]),Q=(0,n.useMemo)((()=>{var e,r;let n;if(s.isCloud)return n;if(!(0,V.gr)(t)||!(0,D.c)(t.item)){if((0,V.gr)(t))n=t.item.librarySectionTitle;else if((0,V.Sy)(t)){const i=null!=(e=t.item.librarySectionTitle)?e:"",s=null!=(r=S.c.get(t.item.tagType).title)?r:"";n=`${i}${i&&s?"  ":""}${s}`}return n}}),[t,s.isCloud]),$=(0,n.useMemo)((()=>{var r,a,o,c;if(!(0,V.gr)(t))return;if((0,D.c)(t.item)){if(t.item.type===O.WW.Show){const s=null==(r=null==e?void 0:e.items.filter(V.gr).find((({item:e})=>e.type===O.WW.Episode&&e.grandparentKey===t.item.key)))?void 0:r.item,a=s?(0,U.c)(s):void 0;return s?n.createElement(i.ye,{gap:"xxs",orientation:"horizontal"},(0,U.c)(null!=s?s:t.item),a?I.iZ:null,n.createElement(w.c,{metadataItem:s})):void 0}if(!(0,T.c)(t.item.Media))return;return n.createElement(f.a,{color:"muted",font:"body-2",numberOfLines:1,shrink:!1},t.item.type===O.WW.Episode?n.createElement(n.Fragment,null,n.createElement(C.c,{allowLink:!1,metadataItem:t.item}),n.createElement(P.c,{separator:""})):null,n.createElement(w.c,{metadataItem:t.item}))}const l=null!=(o=(0,M.c)(s,null==(a=t.item.Media)?void 0:a[0]))?o:"",d=null!=(c=t.item.editionTitle)?c:"";return l||d?`${null!=l?l:""}${l&&d?"  ":""}${null!=d?d:""}`:void 0}),[null==e?void 0:e.items,t,s]);return n.createElement(A.c,{ref:o,className:W.listRow,hoveredClassName:W.listRowHovered,isHovered:a,style:{height:E.C}},n.createElement(y.i8,{className:m()(W.underlay,c&&g.a),onBlur:z,onFocus:H,onPress:G}),n.createElement("div",{className:W.overlay},n.createElement(E.c,{poster:q,primaryTitle:K,secondaryTitle:Q,tertiaryTitle:$},n.createElement(L.c,{result:t,showWatchlistAction:!1}))))}var z=r(65824),G=r(85908);const q={header:"ChooseResultModal-header-e_ZnUp ChooseItemModalHeader-container-Z1dRoi"},K=parseInt(l.c.chooseItemModalPosterWidth,10);function Q({modalState:e,mergedResult:t,onResultSelect:r}){const l=(0,o.c)(t.items[0].source),p=(0,z.c)(t);return n.createElement(s.wJ,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},n.createElement(s.EX,{closeButtonAccessibilityLabel:(0,c.c)("Close Choose Source Modal"),header:(0,c.c)("Choose Source"),size:"s"},n.createElement(s.oh,null,n.createElement("div",{className:q.header},n.createElement(d.cp,{machineIdentifier:l.serverIdentifier,providerIdentifier:l.providerIdentifier},n.createElement(u.cp,{mergedResult:t,posterWidth:K,result:t.items[0]}))),n.createElement(a.aS,null,n.createElement(i.ye,{paddingBottom:"l",paddingX:"l"},p.items.map((e=>{const i=(0,o.c)(e.source);return n.createElement(d.cp,{key:(0,G.c)(e),machineIdentifier:i.serverIdentifier,providerIdentifier:i.providerIdentifier},n.createElement(H,{mergedResult:t,result:e,onResultSelect:r}))})))))))}},44956:(e,t,r)=>{"use strict";r.d(t,{c:()=>a,g:()=>s});var n=r(11504);const i=(0,n.createContext)(void 0);function s(){const e=n.useContext(i);if(void 0===e)throw new Error("UnsafeSearchContext must be used within a SearchContextProvider");return e}function a({children:e,closeMenu:t,onResultSelect:r}){return n.createElement(i.Provider,{value:{closeMenu:t,onResultSelect:r}},e)}},48212:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(27876),s=r(70068),a=r(5632),o=r(54500),c=r(16124),l=r(69484),d=r(63524),u=r(64840),p=r(50976),m=r(57932);const h=[d.EB.Movies,d.EB.Rentals,d.EB.TV,d.EB.Music,d.EB.LiveTV,d.EB.People,d.EB.Photos,d.EB.OtherVideos,d.EB.AvailabilityPlatforms],y=function(){const e=(0,i.w1)(s.c),t=(0,i.w1)(a.c),r=(0,i.w1)(c.c),y=(0,i.w1)(l.c),g=(0,o.c)(),f=(0,n.useMemo)((()=>function({userFeatures:e,userServices:t,userProviderIdentifiers:r,serverProviders:n,provider:i,searchProviderIdentifiers:s}){const a=(0,p.c)({userFeatures:e,userServices:t,userProviderIdentifiers:r,provider:i}),o=(0,m.c)(n),c=s?(0,u.c)(a,s):a,l=new Set([...c,...o]);return Array.from(l).sort(((e,t)=>{const r=h.indexOf(e),n=h.indexOf(t),i=-1===r?1/0:r,s=-1===n?1/0:n;return-1===r&&-1===n?e.localeCompare(t):i-s}))}({userFeatures:e.features,userServices:e.services,userProviderIdentifiers:t,serverProviders:r,provider:y,searchProviderIdentifiers:g})),[e,t,r,y,g]);return(0,n.useMemo)((()=>{const e=new Set;return f.forEach((t=>{e.add(function(e){switch(e){case d.EB.LiveTV:return d.Gk.LiveTV;case d.EB.Categories:case d.EB.Movies:case d.EB.Rentals:case d.EB.TV:return d.Gk.MoviesTV;case d.EB.Music:return d.Gk.Music;case d.EB.OtherVideos:return d.Gk.OtherVideos;case d.EB.People:return d.Gk.People;case d.EB.Photos:return d.Gk.Photos;case d.EB.AvailabilityPlatforms:return d.Gk.AvailabilityPlatforms}}(t))})),Array.from(e)}),[f])}},54500:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(43048);const s=function(){const e=(0,i.c)();return(0,n.useMemo)((()=>e.filter((e=>e.enabled)).map((e=>e.id))),[e])}},43048:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(27876),s=r(13671),a=r(70068),o=r(29164),c=r(42412),l=r(85308),d=r(69484),u=r(68624),p=r(76592),m=r(84392),h=r(35860),y=r(6156),g=r(67668),f=r(63524),v=r(99372);function b(){const e=(0,i.OY)(),t=(0,i.w1)(a.c),r=(0,i.w1)(o.c),b=(0,i.w1)(d.c),{searchProviderEnvironment:S}=(0,i.w1)(s.c),{providers:P,isPending:I,isPopulated:E,error:w}=(0,i.w1)(u.c),{optOuts:C,isPending:O,isPopulated:M,error:T}=(0,i.w1)(l.c);(0,n.useEffect)((()=>{!r.isConnected||!(null==b?void 0:b.isPopulated)||I||E||w||e(p.c.actions.searchProvidersFetchRequested({server:r,provider:b}))}),[e,w,I,E,b,null==b?void 0:b.isPopulated,r,r.isConnected]),(0,n.useEffect)((()=>{O||M||T||!t.isSignedIn||e(c.c.actions.fetchOptOuts())}),[e,w,O,M,I,E,t.isSignedIn,T]);const D=(0,n.useMemo)((()=>function({isFullUser:e,optOuts:t,searchProviderEnvironment:r,searchProviders:n,userProviders:i,userServices:s}){return n.filter((n=>n.Requires.every((n=>{switch(n.type){case f.AF.FeatureFlag:return(0,v.i)(n.value);case f.AF.FeatureGate:return m.Statsig.checkGate(n.value);case f.AF.OptOut:return(0,g.c)(n.value,t,!e);case f.AF.Provider:return i.some((e=>h._u(e,n.value,r)));case f.AF.Subscription:return(0,y.c)(s,n.value)}}))))}({isFullUser:t.isFullUser,optOuts:C,searchProviderEnvironment:S,searchProviders:P,userProviders:t.providers,userServices:t.services})),[C,P,S,t.isFullUser,t.providers,t.services]);return D}},43948:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(27876),s=r(13778),a=r(84360),o=r(35688),c=r(72528),l=r(40604),d=r(30388),u=r(36296),p=r(98348),m=r(7060),h=r(25248),y=r(29704),g=r(50112),f=r(72916),v=r(11236),b=r(42824),S=r(62148),P=r(49412);function I(){const e=(0,i.OY)(),{query:t,pivot:r}=(0,i.w1)(f.c),I=(0,i.w1)(h.c),E=(0,i.w1)(g.c),w=(0,y.c)();return(0,n.useCallback)(((n,i=!0)=>{const[h,y]=(0,S.c)(E,n),g=(0,b.c)({result:n,server:h,provider:y});if(g)e((0,s.IB)({pathname:g}));else if((0,P.gr)(n)){const{item:t}=n,r=(0,p.c)(t.Media);(0,m.c)(t)&&r?e((0,u.CV)({server:h,provider:y,legacyAction:(0,a.Ky)({options:{type:l.im,identifier:r.channelIdentifier}})})):e((0,d.wZ)({server:h,provider:y,metadataItem:t,legacyAction:(0,o.wb)()}))}else(0,P.Ce)(n)&&e((0,u.CV)({server:h,provider:y,legacyAction:(0,a.Ky)({options:{type:l.im,identifier:n.item.id}})}));i&&w(n),e((0,c.SI)({recentSearches:(0,v.c)(I,t,r)}))}),[e,r,t,I,E,w])}},47001:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(27876),i=r(42728),s=r(95676),a=r(63524),o=r(99372);function c(){const e=(0,o.i)(i.sP),t=(0,n.w1)((0,s.c)(a.kz.ShowResultScores));return e&&t}},84920:(e,t,r)=>{"use strict";r.d(t,{c:()=>R});var n=r(57864),i=r(46028),s=r(50112),a=r(72916),o=r(84508),c=r(49412),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e};var f=r(63524),v=r(69956);function b(e){return Math.max(...e.map((e=>e.score)),0)}var S=r(93808),P=r(47604),I=r(7060),E=r(36248),w=r(42451);function C(e){return(0,c.gJ)(e)&&e.item.type===S.WW.Person||(0,c.Sy)(e)&&(0,E.c)(e.item.tagType)}function O(e,t){var r,n,i,s;return(0,w.c)(e.title)===(0,w.c)(t.title)&&(0,w.c)(null!=(r=e.parentTitle)?r:"")===(0,w.c)(null!=(n=t.parentTitle)?n:"")&&(0,w.c)(null!=(i=e.grandparentTitle)?i:"")===(0,w.c)(null!=(s=t.grandparentTitle)?s:"")&&e.year===t.year}var M=r(35860),T=r(38392);var D=r(87512);const k=(0,n.M3)(s.c,(e=>e.map((([e])=>e)))),x=(0,n.M3)(a.c,(e=>{const{results:t}=e;return Object.keys(t).reduce(((e,r)=>{var n;const i=null!=(n=t[r])?n:[];return e.concat((0,c.g9)(i)?i.reduce(((e,t)=>[...e,...t.results]),[]).sort(((e,t)=>t.score-e.score)):i)}),[])})),A=(0,i.c)(x,(e=>e)),R=(0,D.c)((function(e){return(0,n.M3)(A,k,((t,r)=>{const n=function(e,t,r){const n=[];for(let t=0;t<e.length;t++){const r=e[t];if(r.score<0)continue;const i=n.find((e=>{return t=r,n=(0,c.mQ)(e)?e.items[0]:e,(0,c.gr)(t)&&(0,c.gr)(n)?(0,I.c)(t.item)&&(0,I.c)(n.item)?t.item.type===n.item.type&&t.item.subtype===n.item.subtype?O(t.item,n.item):t.item.type===S.WW.Show&&n.item.type===S.WW.Episode?!(!n.item.grandparentTitle||(0,w.c)(t.item.title)!==(0,w.c)(n.item.grandparentTitle)):t.item.type===S.WW.Episode&&n.item.type===S.WW.Show&&!(!t.item.grandparentTitle||(0,w.c)(t.item.grandparentTitle)!==(0,w.c)(n.item.title)):!(0,I.c)(t.item)&&!(0,I.c)(n.item)&&t.item.type!==S.WW.Photo&&t.item.subtype!==S.GO.Photo&&t.item.type!==S.WW.PhotoAlbum&&(t.item.guid===n.item.guid?n.item.type!==S.WW.Track:(0,P.c)(t.item.guid)!==(0,P.c)(n.item.guid)&&t.item.type===n.item.type&&t.item.subtype===n.item.subtype&&O(t.item,n.item)):(0,c.Sy)(t)&&(0,c.Sy)(n)?t.item.tag===n.item.tag&&(t.item.tagType===n.item.tagType||(0,E.c)(t.item.tagType)&&(0,E.c)(n.item.tagType)):(0,c.gJ)(t)&&(0,c.gJ)(n)?t.item.metadataId===n.item.metadataId:!(!C(t)||!C(n))&&((0,c.gJ)(t)?t.item.metadataId:t.item.tagKey)===((0,c.gJ)(n)?n.item.metadataId:n.item.tagKey);var t,n}));i&&(0,c.mQ)(i)?i.items.push(r):(0,c.gr)(r)?n.push({searchType:f.Sw.Metadata,type:r.item.type,subtype:r.item.subtype,guid:r.item.guid,title:r.item.title,parentTitle:r.item.parentTitle,grandparentTitle:r.item.grandparentTitle,year:r.item.year,items:[r],score:0}):(0,c.Sy)(r)?n.push({searchType:f.Sw.Tag,title:r.item.tag,type:r.item.tagType,items:[r],score:0}):(0,c.gJ)(r)?n.push({searchType:f.Sw.Directory,metadataId:r.item.metadataId,title:r.item.title,type:r.item.type,items:[r],score:0}):(0,c.Ce)(r)&&n.push(r)}return n.forEach((e=>{(0,c.mQ)(e)&&(e.items.sort(function(e){const t=t=>e.findIndex((e=>e.machineIdentifier===t));return(e,r)=>{if((0,c.gr)(e)&&(0,c.gr)(r)&&(0,I.c)(e.item)&&(0,I.c)(r.item)){const t=(0,v.c)(e.sourceURI).isServer,n=(0,v.c)(r.sourceURI).isServer;return t&&!n?-1:!t&&n?1:(0,T.c)(e.item.Media,r.item.Media)}const n=(0,v.c)(e.sourceURI),i=(0,v.c)(r.sourceURI);return n.isServer&&i.isServer?t(n.serverIdentifier)-t(i.serverIdentifier):n.isServer?-1:i.isServer||n.providerIdentifier===M.Im?1:i.providerIdentifier===M.Im?-1:0}}(t)),e.score=function(e,t){if(!t)return b(e.items);const r=e.items,[n,i]=r.reduce(((e,t)=>((0,v.c)(t.source).isServer?e[0].push(t):e[1].push(t),e)),[[],[]]);return b(n)+b(i)}(e,r))})),n}(t,r,!0);return n.sort(((e,t)=>t.score-e.score)),function(e,t=o.SEARCH_RESULTS){return e.map(((e,r)=>{const n={context:t,row:r,col:null};return(0,c.mQ)(e)?(i=g({},e),s={items:e.items.map((e=>g(g({},e),n)))},d(i,u(s))):g(g({},e),n);var i,s}))}(n.slice(0,e))}))}))},95676:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(43196);const s=(0,r(87512).c)((function(e){return(0,n.M3)((0,i.c)("searchExperiments"),(t=>t[e]))}))},8624:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(46028);const i=(0,r(43196).c)("disabledUniversalSearchIdentifiers"),s=(0,n.c)(i,(e=>e))},16124:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(8624),s=r(50112);const a=(0,n.M3)(s.c,i.c,((e,t)=>e.filter((([e])=>!t[e.machineIdentifier]))))},69484:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(35860),s=r(27884),a=r(34992);const o=(0,n.M3)(a.c,s.c,((e,t)=>t.find((t=>i._u(t.identifier,i.Im,e.searchProviderEnvironment)))))},68624:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(72916);const s=(0,n.M3)(i.c,(e=>e.searchProviders))},50112:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(57864),i=r(12488),s=r(11876),a=r(13148),o=r(35860),c=r(11695),l=r(69484);const d=(0,i.c)((0,n.M3)(s.c,a.c,l.c,((e,t,r)=>{const n=[];for(const i of t){if(!i.isConnected||!i.isCloud&&!i.isFullServer||i.isCloud&&!r)continue;const t=o.SI(null==r?void 0:r.identifier),s=e.reduce(((e,r)=>{var n;const s=r.server.machineIdentifier===i.machineIdentifier,a=o.SI(null==(n=null==r?void 0:r.provider)?void 0:n.identifier);return(null==r?void 0:r.provider)&&(!i.isCloud&&s||i.isCloud&&s&&a===t)&&e.push(r.provider),e}),[]),a=(0,c.c)(i);n.push([a,s])}return n})),(e=>e))},72916:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2100);const s=(0,n.M3)(i.c,(e=>e.universalSearch))},76592:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(44212),i=r(63524),s=r(45372);const a={isPending:!1,isPopulated:!1,isSavingIncludeMetadataInSearch:!1,error:null,query:"",pivot:i.Gk.TopResults,source:i.i2.Input,results:{},sourceStatuses:{},searchProviders:{providers:[],isPending:!1,isPopulated:!1,isUpdating:!1,error:null,tempState:{}}},o=(0,n.is)({name:"universalSearch",initialState:a,reducers:{reset:(e,t)=>a,clearResults(e,t){e.isPending=!1,e.isPopulated=!1,e.error=null,e.results={},e.sourceStatuses={},e.pivot=i.Gk.TopResults},markPending(e,t){(0,s.G8)(e)},markPopulated(e,t){(0,s.mM)(e)},setQuery(e,{payload:t}){e.query=t.trim()},setPivot(e,{payload:t}){e.pivot=t},setSource(e,{payload:t}){e.source=t},receiveResults(e,{payload:t}){const{searchResults:r,source:n,status:i}=t;e.results[n]=r,void 0!==e.sourceStatuses[n]&&(e.sourceStatuses[n]=i)},searchRequested(e,{payload:t}){t.searchSources.forEach((t=>{e.sourceStatuses[t]=i.me.Pending})),e.pivot=t.searchPivot,(0,s.G8)(e)},includeMetadataInSearchSaveRequested(e,t){e.isSavingIncludeMetadataInSearch=!0},includeMetadataInSearchSaveSucceeded(e,t){e.isSavingIncludeMetadataInSearch=!1},includeMetadataInSearchSaveFailed(e,t){e.isSavingIncludeMetadataInSearch=!1},searchProvidersFetchRequested(e,t){(0,s.G8)(e.searchProviders)},searchProvidersFetchSucceeded(e,{payload:t}){(0,s.mM)(e.searchProviders),e.searchProviders.providers=t.providers},searchProvidersFetchFailed(e,{payload:t}){(0,s.C)(e.searchProviders,t.error)},searchProviderChangeEnabled(e,{payload:t}){const r=e.searchProviders.providers.find((e=>e.id===t.id));r&&(e.searchProviders.isUpdating=!0,e.searchProviders.tempState={id:r.id,enabled:r.enabled},r.enabled=!r.enabled)},searchProvidersUpdateRequested(e,t){},searchProvidersUpdateSucceeded(e){e.searchProviders.isUpdating=!1,e.searchProviders.tempState={}},searchProvidersUpdateFailed(e){e.searchProviders.isUpdating=!1;const t=e.searchProviders.providers.find((t=>t.id===e.searchProviders.tempState.id));t&&(t.enabled=!!e.searchProviders.tempState.enabled),e.searchProviders.tempState={}}}})},63524:(e,t,r)=>{"use strict";r.d(t,{AF:()=>i,EB:()=>a,Gk:()=>c,S2:()=>d,Sw:()=>s,aS:()=>o,ct:()=>l,i2:()=>u,kz:()=>n,me:()=>p});var n=(e=>(e.ShowResultScores="showResultScores",e))(n||{}),i=(e=>(e.FeatureFlag="featureFlag",e.FeatureGate="featureGate",e.OptOut="optOut",e.Provider="provider",e.Subscription="subscription",e))(i||{}),s=(e=>(e[e.Metadata=0]="Metadata",e[e.Directory=1]="Directory",e[e.Tag=2]="Tag",e[e.Channel=3]="Channel",e[e.RecentSearch=4]="RecentSearch",e[e.OpenSearchResultsPage=5]="OpenSearchResultsPage",e))(s||{}),a=(e=>(e.AvailabilityPlatforms="availabilityPlatforms",e.Categories="categories",e.LiveTV="livetv",e.Movies="movies",e.Music="music",e.OtherVideos="otherVideos",e.People="people",e.Photos="photos",e.Rentals="tvod",e.TV="tv",e))(a||{}),o=(e=>(e[e.Movies=1]="Movies",e[e.TV=2]="TV",e[e.Music=8]="Music",e[e.Photos=13]="Photos",e))(o||{}),c=(e=>(e.AvailabilityPlatforms="availabilityPlatforms",e.LiveTV="livetv",e.MoviesTV="moviesTV",e.Music="music",e.OtherVideos="otherVideo",e.People="people",e.Photos="photos",e.TopResults="top",e.Movies="movies",e.Shows="shows",e.Episodes="episodes",e.Artists="artists",e.Albums="albums",e.Tracks="tracks",e))(c||{}),l=(e=>(e.AvailabilityPlatforms="availabilityPlatforms",e.LiveTV="liveTv",e.MoviesTV="moviesTv",e.Music="music",e.OtherVideos="otherVideo",e.People="people",e.Photos="photos",e.TopResults="topResults",e.Movies="movies",e.Shows="shows",e.Episodes="episodes",e.Artists="artists",e.Albums="albums",e.Tracks="tracks",e))(l||{}),d=(e=>(e.Discover="discover",e.PlexAVOD="plexAVOD",e.PlexFAST="plexFAST",e.PlexTVOD="plexTVOD",e.Tidal="tidal",e))(d||{}),u=(e=>(e.Input="input",e.RecentSearch="recentSearch",e))(u||{}),p=(e=>(e[e.Pending=0]="Pending",e[e.Succeeded=1]="Succeeded",e[e.Failed=2]="Failed",e))(p||{})},65824:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(86980),i=r(93808),s=r(49412),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,c(t));function y(e){if(!(0,s.Uf)(e)||!(0,n.c)(e.items[0].sourceURI))return e;const t=e.items.filter(s.gr).map((({item:e})=>e.type)),r=h(m({},e),{items:[...e.items]});if(t.includes(i.WW.Show)&&t.includes(i.WW.Episode)){const e=r.items.findIndex((e=>(0,s.gr)(e)&&e.item.type===i.WW.Show));e>-1&&r.items.splice(e,1)}return r}},25144:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(69956),i=r(49412);function s(e){if(e&&!(0,i.mQ)(e)&&!(0,i.YP)(e)&&!(0,i.QZ)(e))return(0,n.c)(e.sourceURI)}},20136:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(87416),i=r(37156),s=r(64616),a=r(37048),o=r(93808),c=r(7060);function l(e){var t;if(e.type===o.WW.Movie&&e.year)return(0,s.c)(e.year);if(e.type===o.WW.Episode){const t=(0,n.c)({episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0});if((0,c.c)(e)&&!e.index&&e.originallyAvailableAt)return t;const r=(0,i.c)({seasonIndex:e.parentIndex,noLeadingZero:!0});return`${r}${r&&t?"  ":""}${t}`}return e.parentTitle||e.grandparentTitle?`${e.parentTitle}${e.grandparentTitle?`${a.iZ}${e.grandparentTitle}`:""}`:e.type===o.WW.Collection&&null!=(t=e.librarySectionTitle)?t:""}},11236:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(37048);function i(e,t,r){return[{query:t.trim(),pivot:r},...e.filter((({query:e,pivot:n})=>e.toLowerCase()!==t.trim().toLowerCase()||n!==r))].slice(0,n.c3)}},79392:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(25144),s=r(7752),a=r(49412),o=r(81436);function c(e){var t,r,c;if(!e||!(0,a.o5)(e)&&!(0,a.aq)(e))return"";const l=e.items.find((e=>{var t;return(0,a.gJ)(e)&&n._u(null==(t=(0,i.c)(e))?void 0:t.providerIdentifier,n.Im)}));if(l)return(0,s.c)(l).join(", ");const d=null!=(c=null==(r=null==(t=e.items.filter(a.Sy))?void 0:t.flatMap(s.c))?void 0:r.sort())?c:[];return(0,o.c)(d).join(", ")}},7752:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(36340),i=r(49412);function s(e){var t,r;return(0,i.Sy)(e)?[n.c.get(e.item.tagType).title]:(0,i.gJ)(e)&&null!=(r=null==(t=e.item.CreditType)?void 0:t.map((({title:e})=>e)).slice(0,2))?r:[]}},35836:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(35624),i=r(4388),s=r(6400);const a=parseInt(n.c.searchResultPosterWidth,10);function o(){return(0,s.c)({width:a,aspectRatio:i.Aj}).height}},42824:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(35860),i=r(42728),s=r(37492),a=r(93808),o=r(50696),c=r(53800),l=r(85712),d=r(72139),u=r(29208),p=r(11638),m=r(96064),h=r(49412),y=r(684),g=r(85448),f=r(89064),v=r(96504),b=r(95460);const S=function(e,t,r){const n=b.c.media;return e===f.A?"#!"+v.c.join((0,g.Yz)(n,{providerIdentifier:t}),r):"#!"+v.c.join((0,g.Yz)(n,{providerIdentifier:t,machineIdentifier:e}),r)};var P=r(99372);function I({result:e,server:t,provider:r,metricsContextTuple:g}){let f;if(g&&(f=(0,u.QN)(g)),(0,h.gr)(e)&&t.machineIdentifier&&r.identifier){const{item:l}=e,d=(0,P.i)(i.Go)&&(0,c.c)(l,r),u=n.QJ(r.identifier)?n.Im:`${n.Im}-${n.SI(r.identifier)}`,p=d?u:r.identifier,m=d?`/library/metadata/${(0,s.c)(l.guid)}`:(0,o.c)(l,l.type===a.WW.Track?"parentKey":"key");return m?(0,y.c)(t.machineIdentifier,p,{key:m,legacy:l.type===a.WW.PhotoAlbum?1:void 0,context:f},l.playlistType):void 0}if((0,h.gJ)(e)){const{item:n}=e;return n.type===a.WW.Person?(0,p.cp)({metadataItem:n,provider:r,server:t,context:f}):S(t.machineIdentifier,r.identifier,{key:n.key,context:f})}if((0,h.Sy)(e)){const{item:i}=e,s=n._u(r.identifier,n.Sg)?l.Y1.Movies:String(i.librarySectionID),a=(0,d.c)({provider:r,librarySectionID:s,librarySectionKey:i.librarySectionKey});return(0,m.c)({server:t,provider:r,tag:i,contentDirectory:a,context:f})}}},1312:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(59396),s=r(25144),a=r(36180),o=r(49412);function c(e,t){var r;if(!e.isCloud)return(0,a.c)(e);const{providerIdentifier:c}=null!=(r=(0,s.c)(t))?r:{providerIdentifier:""};return n._u(c,n.y6)?(0,i.c)("TIDAL"):n._u(c,n._0)?(0,i.c)("Free Live TV"):n._u(c,n.Sg)?(0,o.gr)(t)&&t.item.rentalPrice?(0,i.c)("Available to Rent"):(0,i.c)("Free On Demand"):n._u(c,n.Im)?(0,i.c)("More Ways to Watch"):""}},85908:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(49412);const i=(0,r(87512).c)((function(e){const t=(0,n.mQ)(e)?e.items[0]:e;return`${t.searchType}-${t.sourceURI}`}))},6032:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(38828),i=r(93808),s=r(63524);function a(e,t){switch(e){case i.WW.Clip:return t===i.GO.Photo?s.EB.Photos:s.EB.OtherVideos;case i.WW.Movie:return t===i.GO.Clip?s.EB.OtherVideos:s.EB.Movies;case i.WW.Show:case i.WW.Season:case i.WW.Episode:return s.EB.TV;case i.WW.Album:case i.WW.Artist:case i.WW.Track:return s.EB.Music;case i.WW.Photo:case i.WW.PhotoAlbum:return s.EB.Photos;case i.WW.Person:return s.EB.People;case i.WW.Collection:switch(t){case i.GO.Movie:return s.EB.Movies;case i.GO.Show:case i.GO.Season:case i.GO.Episode:return s.EB.TV;case i.GO.Album:case i.GO.Artist:case i.GO.Track:return s.EB.Music}}e!==i.WW.Playlist&&e!==i.WW.Author&&e!==i.WW.Audiobook&&e!==i.WW.Chapter&&n.c.warn(t?`Unknown metadataType (${e}) and (${t}) in getSearchTypeForMetadataType`:`Unknown metadataType (${e}) in getSearchTypeForMetadataType`)}},89220:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(63524);const i=function(e){switch(e){case n.Gk.AvailabilityPlatforms:return[n.EB.AvailabilityPlatforms];case n.Gk.LiveTV:return[n.EB.LiveTV];case n.Gk.MoviesTV:return[n.EB.Categories,n.EB.Movies,n.EB.Rentals,n.EB.TV];case n.Gk.Movies:return[n.EB.Categories,n.EB.Movies,n.EB.Rentals];case n.Gk.Shows:case n.Gk.Episodes:return[n.EB.Categories,n.EB.TV];case n.Gk.Music:case n.Gk.Artists:case n.Gk.Albums:case n.Gk.Tracks:return[n.EB.Music];case n.Gk.OtherVideos:return[n.EB.OtherVideos];case n.Gk.People:return[n.EB.People];case n.Gk.Photos:return[n.EB.Photos];case n.Gk.TopResults:return[n.EB.AvailabilityPlatforms,n.EB.Categories,n.EB.LiveTV,n.EB.Movies,n.EB.Music,n.EB.OtherVideos,n.EB.People,n.EB.Photos,n.EB.Rentals,n.EB.TV]}}},83828:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(35860),i=r(85712),s=r(4644),a=r(78168),o=r(63524),c=r(6032);function l(e){const t=new Set;if(n._u(e.identifier,n.Im))return[o.EB.AvailabilityPlatforms,o.EB.Movies,o.EB.Music,o.EB.Rentals,o.EB.TV,o.EB.LiveTV,o.EB.People];if((0,a.c)(e))return[o.EB.LiveTV];const r=(0,s.c)(e,i.Aj.Content);if(!(null==r?void 0:r.directories))return[];const{directories:l}=r;for(let e=0;e<l.length;e++){const r=l[e],n=r.type?(0,c.c)(r.type,r.subtype):void 0;n&&t.add(n),n!==o.EB.Movies&&n!==o.EB.TV||t.add(o.EB.People)}return Array.from(t)}},64840:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(63524);function i(e,t){return e.filter((e=>{if(!t)return!1;switch(e){case n.EB.Movies:return t.includes(n.S2.Discover)||t.includes(n.S2.PlexAVOD)||t.includes(n.S2.PlexTVOD);case n.EB.TV:return t.includes(n.S2.Discover)||t.includes(n.S2.PlexAVOD);case n.EB.Music:return t.includes(n.S2.Tidal);case n.EB.Categories:return t.includes(n.S2.Discover)||t.includes(n.S2.PlexAVOD);case n.EB.AvailabilityPlatforms:case n.EB.People:return t.includes(n.S2.Discover);case n.EB.LiveTV:return t.includes(n.S2.PlexFAST);case n.EB.Rentals:return t.includes(n.S2.PlexTVOD);default:return!1}}))}},50976:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(35860),i=r(42728),s=r(6156),a=r(63524);function o(e,t,r){return e.some((e=>n._u(e,t,r)))}const c=function({userFeatures:e,userServices:t,userProviderIdentifiers:r,provider:c}){if(!c||!c.isPopulated)return[];const l=[],d=e.some((({uuid:e})=>e===i.eK)),u=e.some((({uuid:e})=>e===i.O6)),p=n.SI(c.identifier),m=o(r,n.$9,p),h=o(r,n.Im,p),y=o(r,n.y6,p),g=o(r,n.Sg,p);return m&&l.push(a.EB.LiveTV),(g||h)&&l.push(a.EB.People),(g||h&&d)&&l.push(a.EB.Movies,a.EB.TV),h&&d&&l.push(a.EB.AvailabilityPlatforms),(g||h)&&l.push(a.EB.Categories),g&&u&&l.push(a.EB.Rentals),y&&(0,s.c)(t,"tidal")&&l.push(a.EB.Music),l}},57932:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(83828);function i(e){const t=new Set;for(let r=0;r<e.length;r++){const[i,s]=e[r];if(!i.isCloud)for(let e=0;e<s.length;e++){const r=s[e];(0,n.c)(r).forEach((e=>{t.add(e)}))}}return Array.from(t)}},72264:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(91500),i=r(65824),s=r(62148);function a(e,t,r){const a=(0,i.c)(t),{owned:o,shared:c,cloud:l}=function(e,t){const r={owned:0,shared:0,cloud:0};for(let n=0;n<t.items.length;n++){const i=t.items[n],[a]=(0,s.c)(e,i);a.isCloud?r.cloud++:a.isFullOwnedServer?r.owned++:r.shared++}return r}(e,a);return 1===a.items.length?a.items[0]:r===n.c7.stateChangeTypes.InputKeyDownEnter?a:o?o>1?a:a.items[0]:c?c>1?a:a.items[0]:l?a.items[0]:a}},62148:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(69956);const i=function(e,t){const{serverIdentifier:r,providerIdentifier:i}=(0,n.c)(t.sourceURI),s=e.find((([e])=>e.machineIdentifier===r));if(!s)throw new Error("Could not find server in serverProviders");const[a,o]=s,c=o.find((e=>e.identifier===i));if(!c)throw new Error("Could not find provider in serverProviders");return[a,c]}},36180:(e,t,r)=>{"use strict";function n(e){return e.isCloud?"":e.friendlyName}r.d(t,{c:()=>n})},42451:(e,t,r)=>{"use strict";function n(e){return e.replace(/\s&\s/g," and ").replace(/-/g," ").replace(/(~|`|!|@|#|$|%|^|&|\*|\(|\)|{|}|\[|\]|;|:|"|'|<|,|\.|>|\?|\/|\\|\||-|_|\+|=)/g,"").replace(/\s{2,}/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}r.d(t,{c:()=>n})},49412:(e,t,r)=>{"use strict";r.d(t,{Ce:()=>d,MJ:()=>y,QZ:()=>s,Sy:()=>l,Uf:()=>c,YP:()=>a,aq:()=>m,eE:()=>g,g9:()=>h,gJ:()=>p,gr:()=>o,mQ:()=>i,o5:()=>u});var n=r(63524);function i(e){return!!e&&"items"in e}function s(e){return!!e&&e.searchType===n.Sw.OpenSearchResultsPage}function a(e){return!!e&&e.searchType===n.Sw.RecentSearch}function o(e){return!!e&&e.searchType===n.Sw.Metadata}function c(e){return!!e&&e.searchType===n.Sw.Metadata}function l(e){return!!e&&e.searchType===n.Sw.Tag}function d(e){return!!e&&e.searchType===n.Sw.Channel}function u(e){return!!e&&e.searchType===n.Sw.Tag}function p(e){return!!e&&e.searchType===n.Sw.Directory}function m(e){return!!e&&e.searchType===n.Sw.Directory}function h(e){return!!e&&Array.isArray(e)&&e[0]&&"results"in e[0]}function y(e){return"Metadata"in e}function g(e){return"Directory"in e&&"tagType"in e.Directory}},52504:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(42452),s=r(40415);const a=(0,r(87512).c)((function(e){return(0,n.M3)(i.c,(t=>{var r,n,i,a,o,c,l,d;return e?{isPending:null!=(n=null==(r=t.userLibraryAccess.users[e])?void 0:r.sharingSettings.isPending)&&n,isPopulated:null!=(a=null==(i=t.userLibraryAccess.users[e])?void 0:i.sharingSettings.isPopulated)&&a,sharingSettings:null!=(c=null==(o=t.userLibraryAccess.users[e])?void 0:o.sharingSettings.settings)?c:s.wJ,error:null!=(d=null==(l=t.userLibraryAccess.users[e])?void 0:l.sharingSettings.error)?d:null}:{isPending:!1,isPopulated:!0,sharingSettings:s.wJ,error:null}}))}))},5808:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(33176);const s=function(e){return(0,n.M3)(i.c,(({users:t})=>{let r;return Object.keys(t).forEach((n=>{const i=t[n].sharedServers.find((t=>t.owner.id===e||t.invited.id===e)),s=t[n].sharedSources.find((t=>t.owner.id===e||t.invited.id===e));(i||s)&&(r={sharedServers:t[n].sharedServers,sharedSources:t[n].sharedSources,sharingSettings:t[n].sharingSettings.settings,user:t[n].user})})),r}))}},5297:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(33176);const s=function(e){return(0,n.M3)(i.c,(({users:t})=>{let r;return Object.keys(t).forEach((n=>{const i=t[n].sharedServers.find((t=>t.owner.uuid===e||t.invited.uuid===e)),s=t[n].sharedSources.find((t=>t.owner.uuid===e||t.invited.uuid===e));(i||s)&&(r={sharedServers:t[n].sharedServers,sharedSources:t[n].sharedSources,sharingSettings:t[n].sharingSettings.settings,user:t[n].user})})),r}))}},33176:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(42452);const s=(0,n.M3)(i.c,(e=>e.userLibraryAccess))},40415:(e,t,r)=>{"use strict";r.d(t,{cp:()=>p,wJ:()=>o});var n=r(44212),i=r(95944),s=r(86960),a=r(45372);const o={allowSync:!0,allowChannels:!1,allowSubtitleAdmin:!1,allowTuners:0,filterMovies:"",filterMusic:"",filterPhotos:"",filterTelevision:""};function c(e){return{sharedServers:[],sharedSources:[],sharingSettings:{error:null,isPending:!1,isPopulated:!1,settings:o},user:e,error:null,isPending:!1,isPopulated:!1}}function l(e,t,r){t.forEach((t=>{if("owned"===r&&!t.invited)return;const n="owned"===r?t.invited:t.owner;(0!==t.numLibraries||t.allLibraries)&&(e.users[n.uuid]||(e.users[n.uuid]=c(n)),e.users[n.uuid].sharedServers.push(t))}))}function d(e,t,r){t.forEach((t=>{if("owned"===r&&!t.invited)return;const n="owned"===r&&t.invited?t.invited:t.owner;0!==t.sharedItems.length&&(e.users[n.uuid]||(e.users[n.uuid]=c(n)),e.users[n.uuid].sharedSources.push(t))}))}function u(e){e.isOwnedServersPopulated&&e.isReceivedServersPopulated&&e.isOwnedSourcesPopulated&&e.isReceivedSourcesPopulated&&(Object.values(e.users).forEach((t=>{t.sharedServers.length||t.sharedSources.length?(0,a.mM)(t):delete e.users[t.user.uuid]})),e.isLibrariesAccessPopulated=!0,e.isLibrariesAccessPending=!1,e.tempState=void 0)}const p=(0,n.is)({name:"userLibraryAccess",initialState:{users:{},tempState:{},error:null,isLibrariesAccessPending:!1,isLibrariesAccessPopulated:!1,isOwnedServersPopulated:!1,isReceivedServersPopulated:!1,isOwnedSourcesPopulated:!1,isReceivedSourcesPopulated:!1},reducers:{fetchAllLibraryAccess(e,t){e.isLibrariesAccessPending||(Object.keys(e.users).length>0&&(e.tempState=e.users),e.users={},e.isLibrariesAccessPending=!0,e.isOwnedSourcesPopulated=!1,e.isReceivedSourcesPopulated=!1,e.isReceivedServersPopulated=!1,e.isOwnedServersPopulated=!1)},fetchSharingSettings(e,{payload:t}){e.users[t.user.uuid]||(e.users[t.user.uuid]=c(t.user)),(0,a.G8)(e.users[t.user.uuid].sharingSettings)},fetchSharingSettingsSucceeded(e,{payload:t}){e.users[t.user.uuid]||(e.users[t.user.uuid]=c(t.user)),(0,a.mM)(e.users[t.user.uuid].sharingSettings),e.users[t.user.uuid].sharingSettings.settings=t.sharingSettings,e.users[t.user.uuid].user=t.user},fetchSharingSettingsFailed(e,{payload:t}){e.users[t.user.uuid]||(e.users[t.user.uuid]=c(t.user)),(0,a.C)(e.users[t.user.uuid].sharingSettings,t.error),e.users[t.user.uuid].sharingSettings&&(e.users[t.user.uuid].sharingSettings.isPopulated=!0)},saveSharingSettingsRequested(e,{payload:t}){(0,a.G8)(e.users[t.user.uuid].sharingSettings)},saveSharingSettingsSucceeded(e,{payload:t}){(0,a.Cm)(e.users[t.user.uuid].sharingSettings),e.users[t.user.uuid].sharingSettings.settings=t.sharingSettings},saveSharingSettingsFailed(e,{payload:t}){(0,a.C)(e.users[t.user.uuid].sharingSettings,t.error)},removeSharesByUserUUID(e,{payload:t}){delete e.users[t.uuid]}},extraReducers:e=>{e.addCase(s.c.actions.fetchAcceptedReceivedInvites,(e=>{e.tempState||(e.tempState=JSON.parse(JSON.stringify(e.users))),Object.values(e.users).forEach((e=>{e.sharedServers=e.sharedServers.filter((e=>e.owned))})),e.isReceivedServersPopulated=!1})),e.addCase(s.c.actions.fetchAcceptedReceivedInvitesSucceeded,((e,{payload:t})=>{e.isReceivedServersPopulated=!0,l(e,t.servers,"received"),u(e)})),e.addCase(s.c.actions.fetchAcceptedReceivedInvitesFailed,((e,{payload:t})=>{e.isReceivedServersPopulated=!0,e.isLibrariesAccessPending=!1,e.error=t.error})),e.addCase(s.c.actions.fetchAcceptedOwnedInvites,(e=>{e.tempState||(e.tempState=JSON.parse(JSON.stringify(e.users))),Object.values(e.users).forEach((e=>{e.sharedServers=e.sharedServers.filter((e=>!e.owned))})),e.isOwnedServersPopulated=!1})),e.addCase(s.c.actions.fetchAcceptedOwnedInvitesSucceeded,((e,{payload:t})=>{e.isOwnedServersPopulated=!0,l(e,t.servers,"owned"),u(e)})),e.addCase(s.c.actions.fetchAcceptedOwnedInvitesFailed,((e,{payload:t})=>{e.isOwnedServersPopulated=!0,e.isLibrariesAccessPending=!1,e.error=t.error})),e.addCase(i.c.actions.fetchOwnedSources,(e=>{e.tempState||(e.tempState=JSON.parse(JSON.stringify(e.users))),Object.values(e.users).forEach((e=>{e.sharedSources=e.sharedSources.filter((e=>!e.owned))})),e.isOwnedSourcesPopulated=!1})),e.addCase(i.c.actions.fetchOwnedSourcesSucceeded,((e,{payload:t})=>{e.isOwnedSourcesPopulated=!0,d(e,t.sources,"owned"),u(e)})),e.addCase(i.c.actions.fetchOwnedSourcesFailed,((e,{payload:t})=>{e.isOwnedSourcesPopulated=!0,e.isLibrariesAccessPending=!1,e.error=t.error})),e.addCase(i.c.actions.fetchReceivedSources,(e=>{e.tempState||(e.tempState=JSON.parse(JSON.stringify(e.users))),Object.values(e.users).forEach((e=>{e.sharedSources=e.sharedSources.filter((e=>e.owned))})),e.isReceivedSourcesPopulated=!1})),e.addCase(i.c.actions.fetchReceivedSourcesSucceeded,((e,{payload:t})=>{e.isReceivedSourcesPopulated=!0,d(e,t.sources,"received"),u(e)})),e.addCase(i.c.actions.fetchReceivedSourcesFailed,((e,{payload:t})=>{e.isReceivedSourcesPopulated=!0,e.isLibrariesAccessPending=!1,e.error=t.error}))}})},31760:(e,t,r)=>{"use strict";r.d(t,{CQ:()=>i,mk:()=>n});const n=r(57512).m.injectEndpoints({endpoints:e=>({UserSearch:e.query({query:e=>({document:"\n    query UserSearch($query: String!, $limit: Int) {\n  searchUsers(query: $query, limit: $limit) {\n    username\n    displayName\n    id\n    friendStatus\n    avatar\n    mutualFriends {\n      count\n      friends {\n        avatar\n        displayName\n        id\n        username\n      }\n    }\n  }\n}\n    ",variables:e})})})}),{useUserSearchQuery:i,useLazyUserSearchQuery:s}=n},42836:(e,t,r)=>{"use strict";r.d(t,{J:()=>n,O:()=>i});var n=(e=>(e.UserSearch="UserSearch",e))(n||{});const i=40},22134:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(27876),s=r(29164),a=r(57864),o=r(33176);const c=(0,r(87512).c)((function(e=!0){return(0,a.M3)(o.c,(({users:t,tempState:r,isLibrariesAccessPending:n,isLibrariesAccessPopulated:i,error:s})=>{const a=[];let o={};return o=r||t,Object.values(o).forEach((t=>{0===t.sharedServers.length&&0===t.sharedSources.length||!e&&t.user.restricted||a.push({sharingSettings:t.sharingSettings.settings,sharedServers:t.sharedServers,sharedSources:t.sharedSources,user:t.user})})),{users:a.sort(((e,t)=>{const r=e.user.title||e.user.username,n=t.user.title||t.user.username;return r.localeCompare(n)})),isPending:n,isPopulated:i,error:s}}))}));var l=r(40415);function d(e){const t=(0,i.OY)(),r=(0,i.w1)(s.c),{users:a,isPending:o,isPopulated:d,error:u}=(0,i.w1)(c(e));return(0,n.useEffect)((()=>{d||o||u||t(l.cp.actions.fetchAllLibraryAccess({server:r}))}),[t,r,d,o,u]),{isPopulated:d,isPending:o,users:a,error:u}}},40396:(e,t,r)=>{"use strict";function n(e,t){return e.filter((e=>e.home===t))}r.d(t,{c:()=>n})},86368:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(44212),i=r(45372);const s={isPending:!1,isPopulated:!1,error:null},a=(0,n.is)({name:"verificationEmail",initialState:s,reducers:{reset:()=>s,sendVerificationEmailRequested(e){(0,i.G8)(e),e.isPopulated=!1},sendVerificationEmailSucceeded(e){(0,i.mM)(e)},sendVerificationEmailFailed(e,{payload:t}){(0,i.C)(e,t.error),e.isPopulated=!1}}})},39832:(e,t,r)=>{"use strict";r.d(t,{c:()=>B});var n=r(11504),i=r(56960),s=r(29208),a=r(27876),o=r(58660),c=r(68392),l=r(3008),d=r(77072),u=r(9868),p=r(66780),m=r(24348),h=r(59396),y=r(98772),g=r(71500),f=r(24808),v=r(29164),b=r(99192),S=r(8684),P=r(55202),I=r(46572),E=r(32380),w=r(1692),C=r(41744),O=r(91320);function M({origin:e,isOpen:t}){return(0,O.c)({pane:"learnMore",origin:e},t,!0),n.createElement(l.ye,{align:"center",gap:"xl"},n.createElement(d.a,{color:"muted",font:"heading-1"},(0,h.c)("Learn More")),n.createElement(l.ye,{gap:"l"},n.createElement(d.a,null,(0,h.c)("This is an account setting that synchronizes your data across all Plex Media Servers you have access to, Plex Movies & TV, and Discover.")),n.createElement(d.a,null,(0,h.c)("When you watch or rate a movie or show, "),n.createElement(C.c,{color:"accent",href:"https://support.plex.tv/articles/sync-watch-state-and-ratings/",target:"_blank"},(0,h.c)("Plex will store and sync the updated status for that item. ")),(0,h.c)("Plex does not collect or store any information about where items are played, or whether status changes result from watching items or manually marking them watched. This feature does not collect or sync information about in-progress or partial viewings.")),n.createElement(d.a,null,(0,h.c)("Plex does not collect filenames from any Plex Media Server and individual user data is never shared with third parties without your consent."))))}var T=r(66299);const D={gradient:"GradientIcon-gradient-x2CwCY"};function k({icon:e,size:t}){return n.createElement("div",{className:D.gradient},n.createElement(e,{size:t}))}function x({onLearnMore:e,origin:t,isOpen:r}){return(0,O.c)({pane:m.e6,origin:t},r,!0),n.createElement(l.ye,{align:"center",gap:"xl",orientation:"vertical",verticalAlign:"center"},n.createElement(k,{icon:T.default,size:"xxl"}),n.createElement(d.a,{align:"center",font:"heading-2"},(0,h.c)("Sync Your Watch State and Ratings")),n.createElement(l.ye,{width:"95%"},n.createElement(d.a,null,(0,h.c)("Your watch state and ratings are being synced across the entire Plex platform. This includes movies and shows you watch on Plex Media Servers as well as anything you stream from Plex.")),n.createElement(o.c,{color:"accent",onPress:e},(0,h.c)("Learn more"))))}var A=r(20232),R=r(21040);const N={content:"ViewStateSyncModal-content-iUu4o2",goBack:"ViewStateSyncModal-goBack-cDDcxV",background:"ViewStateSyncModal-background-Bw5tFk UpsellModal-backgroundContainer-RikWr2"};function L({modalState:e,origin:t,page:r}){const i=(0,a.OY)(),s=(0,S.c)(),C=(0,a.w1)(v.c),O=(0,u.y)(),{viewStateSync:{consent:T},isUpdating:D}=(0,a.w1)(I.c),[k,L]=(0,n.useState)(T),[j,U]=(0,n.useState)(r),F=(0,R.c)(D),V=j===w.sF.LearnMore?m.gH:m.e6,_=(0,n.useCallback)((()=>{U(w.sF.LearnMore),s({action:p.gH,pane:m.e6,origin:t})}),[t,s]);(0,n.useEffect)((()=>{e.isOpen&&!F&&L(T)}),[e.isOpen,F,T]),(0,n.useEffect)((()=>{F&&!D&&e.onClose()}),[D,e,F]),(0,n.useEffect)((()=>{e.isOpen&&U(r)}),[e.isOpen,r]);const W=(0,n.useCallback)((()=>{U(w.sF.Default)}),[]),B=(0,n.useCallback)((()=>{i(E.c.actions.updateViewStateSyncConsent({consent:"given",server:C})),s({action:p.ye,pane:V,origin:t})}),[C,i,t,V,s]),H=(0,n.useCallback)((()=>{"given"===k||"notSet"===k?(i(E.c.actions.updateViewStateSyncConsent({consent:"denied",server:C})),s({action:p.aC,pane:V,origin:t})):"denied"===k&&e.onClose()}),[C,k,i,e,t,V,s]),z="given"===k;return n.createElement(P.c,{backgroundClassName:N.background,header:(0,h.c)("View State Sync"),isOpen:e.isOpen,onClose:e.onClose},j===w.sF.LearnMore?n.createElement(b.c,{className:N.goBack,onPress:W},n.createElement(l.ye,{gap:"xxs",orientation:"horizontal",verticalAlign:"center"},n.createElement(c.default,{color:"muted",size:"l"}),n.createElement(d.a,{color:"muted"},(0,h.c)("Back")))):null,n.createElement("div",{className:N.content},n.createElement(l.ye,{align:"center",gap:"xl",height:"100%",orientation:"vertical",verticalAlign:"center"},j===w.sF.LearnMore?n.createElement(M,{isOpen:e.isOpen,origin:t}):n.createElement(x,{isOpen:e.isOpen,origin:t,onLearnMore:_}),n.createElement(l.ye,{align:"center",gap:"xs"},n.createElement(l.ye,{gap:"s",orientation:"horizontal"},n.createElement(o.q,{color:"accent",label:z?(0,h.c)("Stop Syncing now"):(0,h.c)("Yes, Start Syncing"),waiting:D,onPress:z?H:B}),n.createElement(o.q,{label:z?(0,h.c)("Back"):(0,h.c)("No"),waiting:D,onPress:z?e.onClose:H})),z?null:n.createElement(d.a,{color:"muted",font:"body-3"},(0,h.c)("You can change this setting at any time.")),n.createElement(l.ye,{paddingTop:"m"},n.createElement(y.c,{className:N.description,message:(0,h.c)("You can {openProfilePrivacy}change which Plex Activity is shared with others{closeProfilePrivacy} without turning off this setting."),tags:[{open:"openProfilePrivacy",close:"closeProfilePrivacy",component:g.c,kind:f.ac,onPress:O.onOpen}]}),n.createElement(A.c,{buttonLabel:(0,h.c)("Save"),isOpen:O.isOpen,onClose:O.onClose}))))))}var j=Object.defineProperty,U=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,W=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&_(e,r,t[r]);if(U)for(var r of U(t))V.call(t,r)&&_(e,r,t[r]);return e};function B(e){return n.createElement(s.cp,{metricsPage:i.Iv},n.createElement(L,W({},e)))}},26184:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(27876),i=r(95420),s=r(65723),a=r(34908),o=r(10868);function c(){const e=(0,o.c)(),t=(0,n.w1)(a.c);return e&&t.filter((e=>e.version&&(0,s.c)(e.version,i.default.viewStateSync))).length>0}},92600:(e,t,r)=>{"use strict";r.d(t,{AD:()=>R,cp:()=>N});var n=r(63772),i=r(44212),s=r(84360),a=r(35688),o=r(40832),c=r(40604),l=r(30388),d=r(27272),u=r(96743),p=r(35200),m=r(11420),h=r(83860),y=r(6384),g=r(14316),f=r(35348),v=r(39172),b=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},M=(e,t)=>S(e,P(t)),T=(e,t)=>{var r={};for(var n in e)E.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&I)for(var n of I(e))t.indexOf(n)<0&&w.call(e,n)&&(r[n]=e[n]);return r};function*D({payload:e}){const{metadataKey:t,channel:r,prePlayRouteParams:i,server:s,provider:a,metricsPage:o,metricsContextTuple:c}=e;r?yield(0,n.MN)(k,s,a,r,o,c):t?yield(0,n.MN)(x,s,a,t,o,c,i):(0,m.c)("home",{},!0)}function*k(e,t,r,i,a){try{yield(0,g.c)((0,s.Ky)({serverEntityID:e.entityID,providerEntityID:t.entityID,metricsPage:i,metricsProperties:{setting:o.K,contextTuple:a},options:{type:c.im,identifier:r}})),yield(0,n.MN)(A)}catch(e){}finally{(0,m.c)("home",{},!0)}}function*x(e,t,r,i,s,c={}){var d;const u=M(O({},c),{autoplay:void 0});let f;try{const c=(yield(0,n.MN)(h.c.get,r,{server:e,provider:t})).data.MediaContainer,{Metadata:d=[]}=c,u=T(c,["Metadata"]),[p]=d;if(!p)return;const m=(0,y.c)({server:e,provider:t,data:p,container:u});f=m.metadataItem;const v=m.metadataItemStates[f.sourceURI];yield(0,g.c)((0,l.wZ)({containerServer:e,containerProvider:t,server:e,provider:t,metadataItem:f,metadataItemState:v,metricsPage:i,legacyAction:a.wb({metricsProperties:{setting:o.K,contextTuple:s}})})),yield(0,n.MN)(A)}catch(e){}finally{const n=null==(d=(0,v.c)(e,t,r,u,(null==f?void 0:f.isPlaylist)?f.playlistType:void 0))?void 0:d.replace("#!","");n?p.c.replace(n):(0,m.c)("home",{},!0)}}function*A(){let e=0;for(;!((yield(0,f.c)((0,d.c)(u.K.AudioVideo,"isOpen")))||e>2e3);)e+=100,yield(0,n.oL)(100)}const R=(0,i.Uh)("watchNowSaga/watchNow");function*N(){yield(0,n.t9)(R.type,D)}},20232:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(58660),s=r(98624),a=r(3008),o=r(64776),c=r(77072),l=r(96856),d=r(59396),u=r(57923),p=r(36048),m=r(64804);const h={background:"CommunityPrivacySettingsModal-background-F0_oHH WhatsNewModal-backgroundContainer-lSutuD UpsellModal-backgroundContainer-RikWr2",option:"CommunityPrivacySettingsModal-option-tBLRN2",profile:"CommunityPrivacySettingsModal-profile-QyDQT9"};var y=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function g({isOpen:e,buttonLabel:t,privacies:r,isOnboarding:g,isWaiting:f=!1,onClose:v,onPrivaciesUpdated:b}){const{privacyOptions:S,isSuccess:P,isUpdating:I,isError:E,isPopulated:w,onPrivacyChange:C,onReset:O,onSave:M}=(0,m.c)({isOnboarding:g,overridePrivacies:r});(0,n.useEffect)((()=>{(P||E)&&v()}),[E,P,v]);const T=(0,n.useCallback)((()=>y(this,null,(function*(){(yield M())?null==b||b(S):v()}))),[v,b,M,S]),D=(0,n.useCallback)((()=>{v(),O()}),[v,O]);return w&&S.length?n.createElement(o.wJ,{isDismissible:!g,isOpen:e,onClose:D},n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,d.c)("Close"),header:(0,d.c)("You're in control"),hideCloseButton:g,size:"l"},n.createElement(o.kP,null,n.createElement(a.ye,{gap:"m"},n.createElement(c.a,{color:"muted",font:"inherit"},(0,d.c)("Choose what type of activity you want to share with your friends.")))),n.createElement(o.aU,null,n.createElement(a.ye,{width:"100%"},S.map((e=>n.createElement("div",{key:e.role,className:h.option},e.role===p.Ix.Profile?n.createElement("div",{className:h.profile},n.createElement(c.a,{color:"muted",font:"heading-4"},(0,d.c)("Who can find your account?"))):null,n.createElement(a.ye,{align:"space-between",orientation:"horizontal",padding:"m",width:"100%"},n.createElement(a.ye,{gap:"xxs",orientation:"horizontal",verticalAlign:"center"},n.createElement(c.a,{align:"center",color:"primary"},e.title),e.description?n.createElement(l.o,{tooltip:n.createElement(c.a,{font:"caption"},e.description)},n.createElement(i.c,{accessibilityLabel:e.title},n.createElement(a.ye,null,n.createElement(s.default,{color:"muted"})))):null),n.createElement(u.c,{changePrivacy:C,mode:e.mode,role:e.role,showLabel:!0}))))))),n.createElement(o._A,null,n.createElement(a.ye,{align:"space-between",gap:"s",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(a.ye,{verticalAlign:"center",width:"70%"},n.createElement(c.a,{color:"muted",font:"body-3"},(0,d.c)("If you are a resident of the United States, your above Watch History setting will apply for two years and then revert to private unless you choose to renew your consent. All other choices will remain in effect until you change them."))),n.createElement(a.ye,{gap:"m",orientation:"horizontal",shrink:!1,verticalAlign:"center"},g?null:n.createElement(i.q,{disabled:I,label:(0,d.c)("Cancel"),onPress:D}),n.createElement(i.q,{color:"accent",label:t,waiting:f||I,onPress:T})))))):null}},64804:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(11504),i=r(92432),s=r(66780),a=r(59396),o=r(8684),c=r(96996),l=r(36048),d=r(24348);function u(e){switch(e){case l.Ix.Ratings:return d.S8;case l.Ix.Watchlist:return d._w;case l.Ix.WatchHistory:return d.Il;case l.Ix.Friends:return d.Mt;case l.Ix.Profile:return d.k}}var p=r(39864);function m(e){switch(e){case p.oL.Friends:return"friends";case p.oL.FriendsOfFriends:return"friendsOfFriends";case p.oL.Public:return"public";case p.oL.Private:return"private"}}var h=r(11528),y=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&P(e,r,t[r]);if(v)for(var r of v(t))S.call(t,r)&&P(e,r,t[r]);return e},E=(e,t)=>g(e,f(t)),w=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function C({isOnboarding:e,privacies:t,overridePrivacies:r}){const d=(0,o.c)(),{addToast:y}=(0,i.Wo)(),g=(0,n.useRef)(t),[f,{isSuccess:v,error:b,reset:S,isLoading:P}]=(0,h.It)(),[C,O]=(0,n.useState)([]),{refetch:M,privacy:T,isPopulated:D}=(0,c.c)(),k=(0,n.useCallback)((()=>{const t=[];g.current&&!g.current.includes("WatchHistory")||t.push({title:(0,a.c)("My Watch History"),role:l.Ix.WatchHistory,mode:e?p.oL.Friends:null==T?void 0:T.watchHistory}),g.current&&!g.current.includes("Watchlist")||t.push({title:(0,a.c)("My Watchlist"),role:l.Ix.Watchlist,mode:e?p.oL.Friends:null==T?void 0:T.watchlist}),g.current&&!g.current.includes("Ratings")||t.push({title:(0,a.c)("My Ratings"),role:l.Ix.Ratings,mode:e?p.oL.Friends:null==T?void 0:T.ratings}),g.current&&!g.current.includes("Friends")||t.push({title:(0,a.c)("My Friends"),role:l.Ix.Friends,mode:e?p.oL.FriendsOfFriends:null==T?void 0:T.friends,description:(0,a.c)("Help your friends make new friends of their own. Sharing your friends list helps anyone sending you a friend request know they've found the right person.")}),e||g.current&&!g.current.includes("Profile")||t.push({title:(0,a.c)("Account Visibility"),role:l.Ix.Profile,mode:e?p.oL.Public:null==T?void 0:T.profile,description:(0,a.c)("You can control who can find your account when searching for friends on Plex or viewing someone else's friend list. Anyone who knows your Plex username can still grant you access to their library regardless of the setting chosen below.")}),O(t.map((e=>{const t=null==r?void 0:r.find((t=>t.role===e.role));return t?I(I({},e),t):e})))}),[e,r,null==T?void 0:T.friends,null==T?void 0:T.profile,null==T?void 0:T.ratings,null==T?void 0:T.watchHistory,null==T?void 0:T.watchlist]);(0,n.useEffect)((()=>{T&&!C.length&&k()}),[k,T,C.length]),(0,n.useEffect)((()=>{r&&O((e=>e.map((e=>{const t=r.find((t=>t.role===e.role));return t?I(I({},e),t):e}))))}),[r]),(0,n.useEffect)((()=>{!e&&T&&k()}),[e,k,T]),(0,n.useEffect)((()=>{v&&(M(),S())}),[v,M,S]),(0,n.useEffect)((()=>{(null==b?void 0:b.message)&&(S(),y({color:"alert",description:b.message,type:"foreground",testID:"error"}))}),[y,null==b?void 0:b.message,S]);const x=(0,n.useCallback)(((e,t)=>{O((r=>{const n=[...r],i=n.findIndex((t=>t.role===e));return-1!==i&&(n[i]=E(I({},n[i]),{mode:t})),n}))}),[]),A=(0,n.useCallback)((()=>w(this,null,(function*(){if(!T)return!1;const e={};return C.forEach((t=>{t.mode&&t.mode!==T[t.role]&&(d({action:s.O,pane:u(t.role),value:m(t.mode)}),e[t.role]=t.mode)})),Object.keys(e).length>0&&(yield f({input:e})),Object.keys(e).length>0}))),[T,C,d,f]);return{privacyOptions:C,isUpdating:P,isPopulated:D,isSuccess:v,isError:!!b,setPrivacyOptions:O,onPrivacyChange:x,onSave:A,onReset:k}}},50704:(e,t,r)=>{"use strict";r.d(t,{c:()=>E});var n=r(11504),i=r(27876),s=r(58660),a=r(3008),o=r(64776),c=r(34632),l=r(77072),d=r(59396),u=r(37984),p=r(5806),m=r(24252),h=r(6636),y=r(16716),g=r(56972),f=r(25760),v=r(37292),b=r(48600),S=r(48708),P=r(21040);const I={option:"ChooseStreamingServicesModal-option-RtxNWY StreamingServicesOptions-option-SE2Zwj Link-link-vSsQW1"};function E({children:e,isOpen:t,onClose:r}){const E=(0,i.OY)(),[w,C]=(0,u.c$)(),{services:O,isPending:M,isPopulated:T,error:D,isSaving:k}=(0,i.w1)((0,f.c)(C)),{platforms:x,isPending:A,isPopulated:R,error:N}=(0,i.w1)((0,g.c)(C)),L=(0,n.useMemo)((()=>{if(R&&T&&!N&&!D)return(0,v.c)(x,O)}),[x,N,R,T,O,D]),j=(0,P.c)(k),[U,F]=(0,n.useState)(L),V=L!==U;(0,n.useEffect)((()=>{t||F(L)}),[t,L]),(0,n.useEffect)((()=>{t&&j&&!k&&r()}),[t,k,r,j]),(0,n.useEffect)((()=>{!U&&L&&F(L)}),[U,L]),(0,n.useEffect)((()=>{!t||!C||A||R||N||E(S.cp.actions.availabilityPlatformsFetchRequested({server:w,provider:C}))}),[N,E,A,R,t,C,w]),(0,n.useEffect)((()=>{!t||!C||M||T||D||E(S.cp.actions.preferredServicesFetchRequested({server:w,provider:C}))}),[E,t,M,T,D,C,w]);const _=(0,n.useCallback)((e=>{F((0,b.c)(U,e))}),[U]),W=(0,n.useCallback)((()=>{!O.length&&U&&E(S.cp.actions.preferredServicesSaveRequested({server:w,provider:C,preferredServices:[]})),r()}),[E,U,r,O.length,C,w]),B=(0,n.useCallback)((()=>{if(!U)return;const e=U.reduce(((e,t)=>(t.selected&&e.push(t.platform),e)),[]);E(S.cp.actions.preferredServicesSaveRequested({server:w,provider:C,preferredServices:e}))}),[E,U,C,w]);return C?n.createElement(o.wJ,{isOpen:t,onClose:W},e?n.createElement(o.Qn,null,e):null,n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,d.c)("Close Streaming Services modal"),header:(0,d.c)("Select your favorite streaming services"),onClose:W},A||M?n.createElement(a.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(c.c,null)):null,N||D?n.createElement(n.Fragment,null,n.createElement(o.aU,null,n.createElement(l.a,{color:"muted",font:"inherit"},(0,d.c)("Something went wrong. Please try again later."))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(s.q,{label:(0,d.c)("Done"),onPress:W})))):null,R&&T&&!(null==U?void 0:U.length)?n.createElement(n.Fragment,null,n.createElement(o.aU,null,n.createElement(y.c,null)),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(s.q,{label:(0,d.c)("Done"),onPress:W})))):null,R&&T&&(null==U?void 0:U.length)?n.createElement(n.Fragment,null,n.createElement(o.aU,null,n.createElement(a.ye,{gap:"m"},n.createElement(l.a,{color:"muted",font:"inherit"},(0,d.c)("Your selected services will be prioritized within your results and recommendations throughout Plex to help customize your experience.")),n.createElement(h.c,{optionClassName:I.option,services:U,onOptionToggle:_}))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(p.c,{isDisabled:!V,isSpinning:k,kind:m.c.Primary,onPress:B},(0,d.c)("Save Changes"))))):null)):null}},67388:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(27876),s=r(45771),a=r(59740),o=r(35860),c=r(89064),l=r(59396),d=r(90012),u=r(31636),p=r(46212),m=r(35060),h=r(42412),y=r(85308);function g({title:e,modalState:t,providerIdentifier:r,onOptInStarted:g,onOptInFinished:f}){const v=(0,i.OY)(),b=(0,m.c)(r),S=(0,i.w1)((0,u.c)(c.A,r)),P=(0,i.w1)(y.c),[I,E]=(0,n.useState)(!1),w=(0,n.useMemo)((()=>o._u(r,o.Sg)?(0,l.c)("Movies & TV"):o._u(r,o.$9)?(0,l.c)("Live TV"):null),[r]),C=(0,n.useCallback)((()=>{E(!0),null==g||g(),v(h.c.actions.updateOptOut({optOut:{key:r,value:d.M.OptIn}}))}),[v,g,r]);return(0,n.useEffect)((()=>{!b||S.isPending||S.isPopulated||S.error||v((0,s.u4)())}),[v,b,S]),(0,n.useEffect)((()=>{t.isOpen&&b&&S.isPopulated&&(E(!1),null==f||f(),t.onClose())}),[v,b,t,t.isOpen,f,S.isPopulated]),(0,n.useEffect)((()=>{I&&(P.error||S.error)&&(E(!1),t.onClose(),v((0,a._K)((0,l.c)("Something went wrong. Please try again later."))))}),[v,I,t,P.error,S.error]),S&&w?n.createElement(p.c,{confirmLabel:(0,l.c)("Continue"),declineLabel:(0,l.c)("Cancel"),description:(0,l.c)("The {sourceTitle} source is currently disabled and will be re-enabled if you decide to continue.",{sourceTitle:w}),isWaiting:I,modalState:t,title:null!=e?e:(0,l.c)("Open Item"),onSuccess:C}):null}},6636:(e,t,r)=>{"use strict";r.d(t,{c:()=>$});var n=r(89080),i=r.n(n),s=r(11504),a=r(78727),o=r(3008),c=r(25398),l=r(77072),d=r(59396),u=r(37984),p=r(64156),m=r(22916),h=r(10376),y=r(2024),g=r(42451),f=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e},C=(e,t)=>v(e,b(t)),O=r(92440),M=r(95156);const T="data:image/svg+xml,%3csvg fill='none' height='20' viewBox='0 0 20 20' width='20' xmlns='http://www.w3.org/2000/svg'%3e%3crect fill='white' fill-opacity='.05' height='16' rx='2' width='16' x='2' y='2'/%3e%3cpath d='m8.39383 14.5-4.39383-4.3368 1.51325-1.49326 2.88057 2.84176 6.09128-6.0117 1.5149 1.49495z' fill='white'/%3e%3crect height='18' rx='3' stroke='white' stroke-opacity='.3' stroke-width='2' width='18' x='1' y='1'/%3e%3c/svg%3e",D="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='2' y='2' width='16' height='16' rx='2' fill='white' fill-opacity='0.05'/%3e %3crect x='1' y='1' width='18' height='18' rx='3' stroke='white' stroke-opacity='0.3' stroke-width='2'/%3e %3c/svg%3e",k="data:image/svg+xml,%3csvg fill='none' height='20' viewBox='0 0 20 20' width='20' xmlns='http://www.w3.org/2000/svg'%3e%3crect fill='white' height='16' rx='2' width='16' x='2' y='2'/%3e%3cpath d='m8.39383 14.5-4.39383-4.3368 1.51325-1.49326 2.88057 2.84176 6.09128-6.0117 1.5149 1.49495z' fill='%231c1c1c'/%3e%3crect height='18' rx='3' stroke='black' stroke-opacity='.3' stroke-width='2' width='18' x='1' y='1'/%3e%3c/svg%3e",x="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='2' y='2' width='16' height='16' rx='2' fill='white'/%3e %3crect x='1' y='1' width='18' height='18' rx='3' stroke='black' stroke-opacity='0.3' stroke-width='2'/%3e %3c/svg%3e",A="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='2' y='2' width='16' height='16' rx='8' fill='white' fill-opacity='0.05'/%3e %3ccircle cx='10' cy='10' r='4' fill='white'/%3e %3crect x='1' y='1' width='18' height='18' rx='9' stroke='white' stroke-opacity='0.3' stroke-width='2'/%3e %3c/svg%3e",R="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='2' y='2' width='16' height='16' rx='8' fill='white' fill-opacity='0.05'/%3e %3crect x='1' y='1' width='18' height='18' rx='9' stroke='white' stroke-opacity='0.3' stroke-width='2'/%3e %3c/svg%3e",N="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='2' y='2' width='16' height='16' rx='8' fill='white'/%3e %3ccircle cx='10' cy='10' r='4' fill='%231C1C1C'/%3e %3crect x='1' y='1' width='18' height='18' rx='9' stroke='black' stroke-opacity='0.3' stroke-width='2'/%3e %3c/svg%3e",L="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='2' y='2' width='16' height='16' rx='8' fill='white'/%3e %3crect x='1' y='1' width='18' height='18' rx='9' stroke='black' stroke-opacity='0.3' stroke-width='2'/%3e %3c/svg%3e",j={option:"StreamingServicesOptions-option-SE2Zwj Link-link-vSsQW1",groupOption:"StreamingServicesOptions-groupOption-D0RpY8",imageContainer:"StreamingServicesOptions-imageContainer-eYSBST",image:"StreamingServicesOptions-image-T2s0Ot",iconContainer:"StreamingServicesOptions-iconContainer-YmXbob",isSelected:"StreamingServicesOptions-isSelected-Z71zzB",iconImg:"StreamingServicesOptions-iconImg-EC3DTp",sectionTitleContainer:"StreamingServicesOptions-sectionTitleContainer-cLKlvI"};var U=Object.defineProperty,F=Object.defineProperties,V=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&H(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&H(e,r,t[r]);return e},G=(e,t)=>F(e,V(t));const q=parseInt(M.c.platformThumbSize,10);function K({className:e=j.option,icon:t,subtitle:r,parentType:n,service:a,isSelected:c,onToggle:d}){const[g,f]=(0,u.c$)(),[v,b]=(0,h.c)(),S=(0,p.cp)({width:q,height:q,server:g,provider:f,url:a.platformColorThumb}),P=(0,s.useCallback)((()=>{d(a.platform)}),[d,a.platform]),I=(0,s.useMemo)((()=>{if(!t)return c?n===O.Qp.Single?v?N:A:v?k:T:n===O.Qp.Single?v?L:R:v?x:D}),[t,v,c,n]),E=(0,s.useMemo)((()=>t||s.createElement("div",{className:i()(j.iconContainer,c&&j.isSelected)},s.createElement("img",{className:j.iconImg,src:I}))),[t,I,c]);return s.createElement(m.c,{ref:b,className:e,onClick:P},s.createElement(o.ye,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},s.createElement(o.ye,{gap:"s",orientation:"horizontal",verticalAlign:"center"},s.createElement("div",{className:j.imageContainer},s.createElement(y.c,{className:j.image,durationMilliseconds:0,height:q,src:S,width:q})),s.createElement(o.ye,null,a.title,r?s.createElement(l.a,{color:"muted",font:"body-3"},r):null)),s.createElement("div",{className:i()(j.iconContainer,c&&j.isSelected)},E)))}function Q({className:e,group:t,isSearchResults:r,onItemToggle:n}){var o;const[c,l]=s.useState(!1),u=(0,s.useCallback)((()=>{l(!c)}),[c]),p=(0,s.useMemo)((()=>r?s.createElement("div",null):c?s.createElement("div",{className:i()(j.iconContainer,j.isSelected)},s.createElement(a.default,{size:"m"})):void 0),[r,c]),m=(0,s.useMemo)((()=>{var e,n,i;if(r||c)return t.groupType===O.Qp.Multi?(0,d.c)("There are a variety of channels and addons. Select from the options below."):r?(0,d.c)("There are multiple subscriptions plans. Selecting one of the options below may remove a previously set option."):(0,d.c)("There are multiple subscriptions plans. Select one of the options below.");const s=null==(e=t.platforms)?void 0:e.length;if(t.selected){const e=null==(n=t.platforms)?void 0:n.filter((({selected:e})=>e));return t.groupType===O.Qp.Multi?(0,d.c)("{selectedOptionCount} of {optionCount} options selected",{selectedOptionCount:null==e?void 0:e.length,optionCount:s}):(0,d.c)("{service} selected",{service:null==(i=null==e?void 0:e[0])?void 0:i.title})}return(0,d.c)("{optionCount} options",{optionCount:s})}),[r,t.groupType,t.platforms,t.selected,c]);return s.createElement(s.Fragment,null,s.createElement(K,{className:e,icon:p,isSelected:!c&&t.selected,service:t,subtitle:m,onToggle:u}),r||c?null==(o=t.platforms)?void 0:o.map((r=>s.createElement(K,{key:r.platform,className:i()(e,j.groupOption),isSelected:r.selected,parentType:t.groupType,service:r,onToggle:n}))):null)}function $({optionClassName:e,services:t,onOptionToggle:r}){const n=(0,s.useRef)(null),[i,a]=(0,s.useState)(""),u=(0,s.useMemo)((()=>t.sort(((e,t)=>{if(e.groupType&&t.groupType)return e.title.localeCompare(t.title);if(e.groupType)return-1;if(t.groupType)return 1;if(e.groupId&&t.groupId){if(void 0!==e.groupOrder&&void 0!==t.groupOrder)return e.groupOrder-t.groupOrder;if(void 0!==e.groupOrder)return-1;if(void 0!==t.groupOrder)return 1}return e.title.localeCompare(t.title)})).reduce(((e,t)=>{var r;if(t.groupId)if(t.groupType)e.push(C(w({},t),{platforms:[]}));else{const n=e.find((e=>e.groupId===t.groupId));if(!n)return e;null==(r=n.platforms)||r.push(t),t.selected&&(n.selected=!0)}else e.push(t);return e}),[]).sort(((e,t)=>e.title.localeCompare(t.title)))),[t]),p=(0,s.useMemo)((()=>function(e,t){const r=e.filter((e=>e.selected)),n=e.filter((e=>e.popular));if(t){const r=(0,g.c)(t),n=e.reduce(((e,t)=>{var n;if(t.groupType){const i=null==(n=t.platforms)?void 0:n.filter((e=>(0,g.c)(e.title).includes(r)));(null==i?void 0:i.length)&&e.push(G(z({},t),{platforms:i}))}else(0,g.c)(t.title).includes(r)&&e.push(t);return e}),[]);return[{type:"searchResults",title:(0,d.c)("Matched Services"),items:n}]}return[{type:"selected",title:(0,d.c)("My Services"),items:r},{type:"popular",title:(0,d.c)("Popular Services"),items:n},{type:"services",title:(0,d.c)("All Services"),items:e}]}(u,i).filter((e=>e.items.length>0))),[u,i]),m=(0,s.useCallback)((e=>{a(e.target.value)}),[]),h=(0,s.useCallback)((()=>{a("")}),[]);return s.createElement(o.ye,{gap:"m"},s.createElement(c.U,{inputProps:{ref:n,onChange:m,placeholder:"Find a streaming service",value:i},onClearPress:h}),i&&!p.length?s.createElement(o.ye,null,s.createElement("div",{className:j.sectionTitleContainer},s.createElement(l.a,{as:"h2",color:"muted",font:"heading-3"},(0,d.c)("Matching services"))),s.createElement("div",{className:e},s.createElement(l.a,{color:"muted",font:"body-3"},(0,d.c)("No matches found. Try a different search or make sure the service is available in your country.")))):null,s.createElement(o.ye,null,p.map((t=>t.items.length?s.createElement(s.Fragment,{key:t.type},s.createElement("div",{className:j.sectionTitleContainer},s.createElement(l.a,{as:"h2",color:"muted",font:"heading-3"},t.title)),t.items.map(((n,i)=>n.groupType?s.createElement(Q,{key:n.groupId,className:e,group:n,isSearchResults:"searchResults"===t.type,onItemToggle:r}):s.createElement(K,{key:i,className:e,isSelected:n.selected,service:n,onToggle:r})))):null))))}},16716:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(27876),s=r(77072),a=r(70068),o=r(16852),c=r(59396),l=r(98772),d=r(22916),u=r(24252);function p(){const e=(0,i.w1)(a.c),t=(0,n.useMemo)((()=>{if(e.country&&Intl.DisplayNames)return new Intl.DisplayNames(e.locale?[e.locale]:[],{type:"region"}).of(e.country)}),[e.country,e.locale]);return n.createElement(s.a,{color:"muted"},n.createElement(l.c,{message:t?(0,c.c)("There are no other streaming services currently available in your region: {region}. If you believe this is an error, please report it to the {openLink}Plex Forums{closeLink}.",{region:t}):(0,c.c)("There are no other streaming services currently available in your region. If you believe this is an error, please report it to the {openLink}Plex Forums{closeLink}."),tags:[{open:"openLink",close:"closeLink",component:d.c,kind:u.c.Primary,to:o.SE,target:"_blank"}]}))}},18324:(e,t,r)=>{"use strict";r.d(t,{c:()=>Y});var n=r(11504),i=r(27876),s=r(58660),a=r(92456),o=r(3008),c=r(42152),l=r(77072),d=r(19264),u=r(85976),p=r(89448),m=r(59396),h=r(90012),y=r(44604),g=r(25564),f=r(93808),v=r(4388),b=r(6400),S=r(96048),P=r(11822),I=r(67532),E=r(2708),w=r(12696),C=r(85712),O=r(4644),M=r(37984),T=r(64156),D=r(10376),k=r(2024),x=r(46896),A=r(16416),R=r(50536),N=r(94644),L=r(23748),j=r(35768),U=r(95208),F=r(35060);const V={content:"WatchlistZeroStatePageContent-content-CTxhhf EmptyPageContent-content-soks97",icon:"WatchlistZeroStatePageContent-icon-Sxn8N4 EmptyPageContent-icon-F09nMX",title:"WatchlistZeroStatePageContent-title-vRbmff",description:"WatchlistZeroStatePageContent-description-Hr6JQY",scroller:"WatchlistZeroStatePageContent-scroller-E798ge VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",doneContainer:"WatchlistZeroStatePageContent-doneContainer-ptSPXC",posterContainer:"WatchlistZeroStatePageContent-posterContainer-gJlKBG",hoverTag:"WatchlistZeroStatePageContent-hoverTag-yhL8U5",watchlistedTag:"WatchlistZeroStatePageContent-watchlistedTag-EzHKAy"};var _=Object.defineProperty,W=Object.defineProperties,B=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&q(e,r,t[r]);if(H)for(var r of H(t))G.call(t,r)&&q(e,r,t[r]);return e},Q=(e,t)=>W(e,B(t));const $=n.forwardRef(((e,t)=>{var r=e,{item:s,onTogglePress:o}=r,u=((e,t)=>{var r={};for(var n in e)z.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&H)for(var n of H(e))t.indexOf(n)<0&&G.call(e,n)&&(r[n]=e[n]);return r})(r,["item","onTogglePress"]);const[p,h]=(0,M.c$)(),P=(0,i.OY)(),I=(0,x.c)(u),[E,w]=(0,D.c)(),C=(0,i.w1)(d.c),[O,A]=(0,n.useState)(!1),R=(0,n.useMemo)((()=>(0,b.c)({width:u.cellWidth,aspectRatio:v.Aj})),[u.cellWidth]),N=(0,T.cp)(Q(K({},R),{server:p,provider:h,url:null==s?void 0:s.thumb})),L=(0,n.useCallback)((()=>{if(!s)return;const e=!O;P(S.c.actions.toggleWatchlistRequested({server:p,provider:h,stableUser:C,sourceURI:s.sourceURI,ratingKey:s.ratingKey,added:e})),A(e),o(e)}),[P,O,s,o,h,p,C]);return s?n.createElement("div",{ref:(0,j.c)(t,I.cellRef),style:I.style},n.createElement(c.a2,{width:u.cellWidth},n.createElement("div",{ref:w,className:V.posterContainer},n.createElement(c.mw,{width:u.cellWidth},n.createElement(k.c,K({className:V.image,fit:k.A.Cover,src:N},R)),n.createElement(c.u6,{posterStyle:"portrait",onPress:L},E?n.createElement("div",{className:V.hoverTag},n.createElement(l.a,{align:"center",as:"div",color:"inherit",font:"caption"},O?(0,m.c)("Remove from Watchlist"):(0,m.c)("Add to Watchlist"))):null,O?n.createElement("div",{className:V.watchlistedTag},n.createElement(a.default,null)):null))),n.createElement(c.oD,{posterStyle:"portrait"},n.createElement(l.a,{color:"inherit",font:"body-2",numberOfLines:1},s.title),n.createElement(l.a,{color:"muted",font:"body-2",numberOfLines:1},s.type===f.WW.Movie?n.createElement(g.c,{metadataItem:s}):n.createElement(y.c,{metadataItem:s}))))):null})),Y=function({onDone:e}){var t;const r=(0,i.OY)(),[c,d]=(0,M.c$)(),y=(0,i.w1)(R.c),[g,f]=(0,n.useState)(0),[v,b]=(0,n.useState)(!1),S=(0,F.c)(h.s.IncludeDiscoverSource),T=(0,O.c)(d,C.Aj.ZeroState),D=(0,U.c)({machineIdentifier:c.machineIdentifier,providerIdentifier:d.identifier,directoryKey:null!=(t=null==T?void 0:T.key)?t:"/hubs/sections/home/top_watchlisted"}),k=(0,n.useMemo)((()=>(0,u.c)({serverIdentifier:c.machineIdentifier,providerIdentifier:d.identifier,key:D})),[D,d.identifier,c.machineIdentifier]),x=(0,n.useMemo)((()=>k?(0,E.c)(k):()=>{}),[k]),j=(0,i.w1)(x);(0,n.useEffect)((()=>{k&&(0,p.SS)((()=>{r(P.c.actions.added({metadataItemStates:{},metadataLists:[{sourceURI:k,items:[],offset:0}]}))}))}),[r,k]),(0,n.useEffect)((()=>{S&&j&&!j.isPopulated&&!j.isPending&&r(P.c.actions.fetchAllRequested({server:c,provider:d,sourceURI:j.sourceURI,params:(null==T?void 0:T.key)?{context:C.kF.Watchlist}:void 0}))}),[r,S,j,d,c,null==T?void 0:T.key]);const _=(0,n.useCallback)((e=>{f(e?g+1:g-1)}),[g]),W=(0,n.useCallback)((()=>{b(!0),e()}),[e]),B=(0,n.useCallback)((e=>n.createElement(M.cp,{key:e.cellIndex,machineIdentifier:c.machineIdentifier,providerIdentifier:d.identifier},n.createElement($,Q(K({},e),{onTogglePress:_})))),[_,d.identifier,c.machineIdentifier]),H=(0,n.useMemo)((()=>(0,w.c)({listType:I.a.Movie,listStyle:I.y.Grid,columnWidth:y,titleCount:2})),[y]);return!S||(null==j?void 0:j.isPopulated)&&0===(null==j?void 0:j.totalSize)?n.createElement(A.c,{contentClassName:V.content,description:n.createElement(l.a,{color:"muted",font:"inherit"},(0,m.c)("Add movies and shows to your Watchlist to catch up on later. Watching an item in the list or marking it as watched will remove it from the list.")),descriptionClassName:V.description,icon:n.createElement(a.default,null),iconClassName:V.icon,title:n.createElement(l.a,{color:"primary",font:"heading-1"},(0,m.c)("Watchlist")),titleClassName:V.title}):(null==j?void 0:j.isPopulated)&&void 0!==(null==j?void 0:j.totalSize)?n.createElement(A.c,{contentClassName:V.content,description:n.createElement(l.a,{color:"muted",font:"inherit"},(0,m.c)("Add movies and shows to your Watchlist to catch up on later. Watching an item in the list or marking it as watched will remove it from the list. Get started by selecting items below to add to your Watchlist.")),descriptionClassName:V.description,icon:n.createElement(a.default,null),iconClassName:V.icon,title:n.createElement(l.a,{color:"primary",font:"heading-1"},(0,m.c)("Watchlist")),titleClassName:V.title},n.createElement(N.c,{autoScroll:!1,cellComponentFactory:B,className:V.scroller,items:j.items,keyPropName:"key",layout:H,totalSize:j.totalSize}),g>0?n.createElement("div",{className:V.doneContainer},n.createElement(o.YR,{align:"right"},n.createElement(s.q,{color:"accent",label:(0,m.c)("Done"),waiting:v,onPress:W}))):null):n.createElement(A.c,null,n.createElement(L.c,null))}},42440:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(11504),i=r(27876),s=r(9868),a=r(59396),o=r(36728),c=r(37984),l=r(58660),d=r(64776),u=r(48708);function p({group:e,selectedGroupService:t,serviceToToggle:r,modalState:s}){const o=(0,i.OY)(),[p,m]=(0,c.c$)(),h=(0,n.useCallback)((()=>{r&&t&&(o(u.cp.actions.togglePreferredServicesRequested({server:p,provider:m,platforms:[r,t]})),s.onClose())}),[o,s,m,t,p,r]);return r&&e&&t?n.createElement(d.wJ,{isOpen:s.isOpen,onOpenChange:s.onOpenChange},n.createElement(d.EX,{header:(0,a.c)("Are you sure?"),hideCloseButton:!0,size:"s"},n.createElement(d.aU,null,(0,a.c)("Only one option for {streamingServiceGroup} can be selected at a time. This will add {addedStreamingService}  and remove {removedStreamingService}.",{streamingServiceGroup:e.title,addedStreamingService:r.title,removedStreamingService:t.title})),n.createElement(d._A,null,n.createElement(d.YB,null,n.createElement(l.q,{label:(0,a.c)("No"),onPress:s.onClose}),n.createElement(l.q,{color:"accent",label:(0,a.c)("Yes"),onPress:h}))))):null}var m=r(56972);function h(e){const[,t]=(0,c.c$)(),{platforms:r}=(0,i.w1)((0,m.c)(t)),s=(0,n.useMemo)((()=>r.find((({platform:t})=>e===t))),[e,r]);return(0,n.useMemo)((()=>{if(s)return r.find((e=>!(!e.groupType||e.groupId!==s.groupId)))}),[r,s])}var y=r(25760),g=r(92440);function f({service:e,onMenuClose:t}){const[r,l]=(0,c.c$)(),d=(0,i.OY)(),f=(0,s.y)(),{platforms:v}=(0,i.w1)((0,m.c)(l)),{services:b}=(0,i.w1)((0,y.c)(l)),S=(0,n.useMemo)((()=>v.find((t=>t.platform===e))),[v,e]),P=h(e),I=function(e){const[,t]=(0,c.c$)(),r=h(e),{services:s}=(0,i.w1)((0,y.c)(t)),{platforms:a}=(0,i.w1)((0,m.c)(t));return(0,n.useMemo)((()=>{if(r)return a.find((e=>!e.groupType&&e.groupId===r.groupId&&s.includes(e.platform)))}),[r,a,s])}(e),E=(0,n.useMemo)((()=>!!e&&b.some((t=>t===e))),[b,e]),w=(0,n.useCallback)((()=>{null==t||t(),P&&S&&(P.groupType===g.Qp.Single&&I&&I.platform!==S.platform?f.onOpen():d(u.cp.actions.togglePreferredServicesRequested({server:r,provider:l,platforms:[S]})))}),[f,d,P,t,l,I,r,S]),C=(0,n.useMemo)((()=>n.createElement(p,{group:P,modalState:f,selectedGroupService:I,serviceToToggle:S})),[f,P,I,S]),O=(0,n.useMemo)((()=>{if(!S)return null;const e=E?(0,a.c)("Remove {service} from My Services",{service:S.title}):(0,a.c)("Add {service} to My Services",{service:S.title});return n.createElement(o.c,{onPress:w},e)}),[E,w,S]);return{serviceToToggle:S,isPreferredService:E,onToggleService:w,confirmServiceToggleModal:C,toggleServiceMenuItem:O}}},56972:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2252);const s=function(e){return(0,n.M3)((0,i.c)(e),(e=>e.availabilityPlatforms))}},29356:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(57864),i=r(2252),s=r(48708);const a=function(e,t){return(0,n.M3)((0,i.c)(e),(({metadataItemAvailabilities:e})=>(t?e[t]:null)||s.kR))}},25760:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(57864),i=r(2252);const s=function(e){return(0,n.M3)((0,i.c)(e),(({preferredServices:e})=>e))}},2252:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(57864),i=r(35860),s=r(2100),a=r(48708);const o=function(e){const t=i.SI(null==e?void 0:e.identifier);return(0,n.M3)(s.c,(e=>e.whereToWatch[t]||a.i))}},37292:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=function(e,t){return e.map((e=>{return r=((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({},e),n={selected:t.includes(e.platform)||!1},i(r,s(n));var r,n}))}},46872:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(92440);function i(e){return e.offerType===n.mu.Buy||e.offerType===n.mu.Rent}},48600:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(92440),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e,t){if(!e)return[];const r=e.find((e=>e.platform===t));if(!r)return[];const i=e.find((e=>e.groupType&&e.groupId===r.groupId)),u=(null==i?void 0:i.groupType)===n.Qp.Single&&!(null==r?void 0:r.selected);return e.map((e=>{return r.platform===e.platform||u&&!e.groupType&&e.groupId===r.groupId&&e.platform!==r.platform&&e.selected?(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},e),n={selected:!e.selected},s(t,a(n))):e;var t,n}))}},48708:(e,t,r)=>{"use strict";r.d(t,{cp:()=>v,i:()=>g,kR:()=>h});var n=r(38316),i=r.n(n),s=r(44212),a=r(35860),o=r(92440),c=r(45372),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h={availabilities:{serverAvailabilities:[],providerAvailabilities:[]},isPending:!1,isPopulated:!1,error:null},y={},g={metadataItemAvailabilities:{},availabilityPlatforms:{platforms:[],isPending:!1,isPopulated:!1,error:null},preferredServices:{services:[],isPending:!1,isPopulated:!1,isSaving:!1,error:null},RSSFeeds:{feeds:[{feedType:o.i2.Watchlist,uuid:null,url:null},{feedType:o.i2.FriendsWatchlist,uuid:null,url:null}],isPending:!1,isPopulated:!1,isCreating:!1,isDeleting:!1,error:null}};function f(e,t){const r=a.SI(t.identifier);let n=e[r];return n||(n=i()(g),e[r]=n),n}const v=(0,s.is)({name:"whereToWatch",initialState:y,reducers:{reset:()=>y,availabilityPlatformsFetchRequested(e,{payload:t}){const{availabilityPlatforms:r}=f(e,t.provider);(0,c.G8)(r)},availabilityPlatformsFetchSucceeded(e,{payload:t}){const{availabilityPlatforms:r}=f(e,t.provider);(0,c.mM)(r),r.platforms=t.availabilityPlatforms},availabilityPlatformsFetchFailed(e,{payload:t}){const{availabilityPlatforms:r}=f(e,t.provider);(0,c.C)(r,t.error)},availabilityPlatformsFetchCancelled(e,{payload:t}){const{availabilityPlatforms:r}=f(e,t.provider);(0,c.U1)(r)},metadataItemAvailabilitiesFetchRequested(e,{payload:t}){const{metadataItemAvailabilities:r}=f(e,t.provider);let n=r[t.metadataItem.sourceURI];n?n.isPopulated=!1:(n=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},h),r[t.metadataItem.sourceURI]=n),(0,c.G8)(n)},metadataItemAvailabilitiesFetchSucceeded(e,{payload:t}){const{metadataItemAvailabilities:r}=f(e,t.provider),n=r[t.sourceURI];n&&(n.availabilities=t.availabilities,(0,c.mM)(n))},metadataItemAvailabilitiesFetchFailed(e,{payload:t}){const{metadataItemAvailabilities:r}=f(e,t.provider),n=r[t.sourceURI];n&&(0,c.C)(n,t.error)},metadataItemAvailabilitiesReset(e,{payload:t}){const{metadataItemAvailabilities:r}=f(e,t.provider);r[t.sourceURI]&&delete r[t.sourceURI]},resetPreferredServices(e){},preferredServicesFetchRequested(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);(0,c.G8)(r)},preferredServicesFetchSucceeded(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);(0,c.mM)(r),r.services=t.preferredServices},preferredServicesFetchFailed(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);(0,c.C)(r,t.error)},preferredServicesFetchCancelled(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);(0,c.U1)(r)},preferredServicesSaveRequested(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);r.isSaving=!0},preferredServicesSaveSucceeded(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);r.isSaving=!1,r.services=t.preferredServices},preferredServicesSaveFailed(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);r.isSaving=!1},togglePreferredServicesRequested(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);r.isSaving=!0},togglePreferredServicesSucceeded(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);r.isSaving=!1,r.services=t.preferredServices},togglePreferredServicesFailed(e,{payload:t}){const{preferredServices:r}=f(e,t.provider);r.isSaving=!1},watchlistRSSFetchRequested(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);(0,c.G8)(r)},watchlistRSSFetchSucceeded(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);t.feeds.forEach((e=>{const t=r.feeds.find((({feedType:t})=>t===e.feedType));t&&Object.assign(t,e)})),(0,c.mM)(r)},watchlistRSSFetchFailed(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);(0,c.C)(r,t.error)},watchlistRSSCreateRequested(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);r.isCreating=t.feedType},watchlistRSSCreateSucceeded(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);r.isCreating=!1;const[n]=t.feeds,i=r.feeds.find((({feedType:e})=>e===n.feedType));i&&Object.assign(i,n)},watchlistRSSCreateFailed(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);r.isCreating=!1},watchlistRSSDeleteRequested(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);r.isDeleting=t.feedType},watchlistRSSDeleteSucceeded(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider),n=r.feeds.find((e=>e.uuid===t.uuid));n&&Object.assign(n,{url:null,uuid:null}),r.isDeleting=!1},watchlistRSSDeleteFailed(e,{payload:t}){const{RSSFeeds:r}=f(e,t.provider);r.isDeleting=!1}}})},92440:(e,t,r)=>{"use strict";r.d(t,{AB:()=>s,Qp:()=>a,i2:()=>o,mu:()=>n,yy:()=>i});var n=(e=>(e.Buy="buy",e.Free="free",e.Rent="rent",e.Subscription="subscription",e))(n||{});const i="plex";var s=(e=>(e.Server="server",e.Provider="provider",e.More="more",e))(s||{}),a=(e=>(e.Multi="multi",e.Single="single",e))(a||{}),o=(e=>(e.Watchlist="watchlist",e.FriendsWatchlist="friendsWatchlist",e))(o||{})},35200:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(1168).Yf)({hashType:"hashbang"})},93564:(e,t,r)=>{"use strict";function n(e){return function(e){return!!e.v4}(e)?e.v4.root:e.root}r.d(t,{c:()=>n})},53572:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(85448),i=r(96504),s=r(93808),a=r(95460),o=r(8476),c=r(77424),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const g=function(e,t,r){var l;const g=(0,o.c)(e,t,a.c.prePlayCredits),f=(0,c.c)(e,t);return"#!"+i.c.join((0,n.Yz)(g,f),(v=((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e})({},r),b={type:null!=(l=null==r?void 0:r.type)?l:s.Cu.Actor},d(v,u(b))));var v,b}},684:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(85448),i=r(35860),s=r(89064),a=r(96504),o=r(93808),c=r(95460),l=r(77424);const d=function(e,t,r,d){const u=function(e,t,r){const[n,a,l]=c.c.prePlay,[d,u,p,m,h]=c.c.playlist;if(e===s.A)switch(r){case o.QT.Video:case o.QT.Audio:return h;default:return l}else if(t===i.Qh)switch(r){case o.QT.Video:case o.QT.Audio:return d;case o.QT.Photo:return u;default:return n}switch(r){case o.QT.Video:case o.QT.Audio:return p;case o.QT.Photo:return m;default:return a}}(e,t,d),p=(0,l.c)(e,t);return"#!"+a.c.join((0,n.Yz)(u,p),r)}},97884:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(96504),i=r(9612);const s=function(e,t={},r={}){const s=(0,i.c)(e,t,r);return n.c.join(["#!",s])}},11420:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,c:()=>s});var n=r(35200),i=r(9612);function s(e,t={},r={},s=!1){const a=(0,i.c)(e,t,r);s?n.c.replace(a):n.c.push(a)}function a(e){s("serverSettings",{machineIdentifier:e,settingsSection:"manage",settingsGroup:"libraries"})}},95460:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n,c:()=>i});const n="/settings",i={account:`${n}/account`,accountPlexTv:"/account",announcements:"/announcements",devices:`${n}/devices/:deviceTypeID?`,downloads:"/downloads",firstRunExperience:"/client-setup",home:["","/dashboard","?tab=:tab"],info:"/info",login:"/login",logout:"/logout",logs:"/logs",hybridGuide:"/live-tv/:machineIdentifier?/:providerIdentifier?",media:"/media/:machineIdentifier?/:providerIdentifier",discoverHome:"/media/tv.plex.provider.discover?source=home",discoverWatchlist:"/media/tv.plex.provider.discover?source=watchlist",discoverPivot:"/media/tv.plex.provider.discover?source=home&pivot=:pivot",onlineMediaSources:`${n}/online-media-sources`,playHistory:"/server/:machineIdentifier/playHistory",playlist:["/server/:machineIdentifier/playlist","/server/:machineIdentifier/album","/server/:machineIdentifier/provider/:providerIdentifier/playlist","/server/:machineIdentifier/provider/:providerIdentifier/album","/provider/:providerIdentifier/playlist"],prePlay:["/server/:machineIdentifier/details","/server/:machineIdentifier/provider/:providerIdentifier/details","/provider/:providerIdentifier/details"],prePlayCredits:["/server/:machineIdentifier/credits","/server/:machineIdentifier/provider/:providerIdentifier/credits","/provider/:providerIdentifier/credits"],privacy:`${n}/privacy`,providerSettings:"/provider/:providerIdentifier/settings",search:"/search",serverDownloadMessage:"/get-plex-media-server",serverSettings:`${n}/server/:machineIdentifier/:settingsSection/:settingsGroup`,serverSettingsPMS:`${n}/server/:machineIdentifier`,serverAwait:"/server/:machineIdentifier/await",serverSetup:"/setup/:machineIdentifier?",serverUpdate:"/server/:machineIdentifier/update",signUp:"/signUp",streamingServices:`${n}/streaming-services`,userSharingSettings:`${n}/users-sharing/:userID`,usersSharing:`${n}/users-sharing`,plexHome:`${n}/plex-home`,manageLibraryAccess:`${n}/manage-library-access`,plexHomeSharing:`${n}/plex-home/sharing/:id`,manageLibraryAccessSharing:`${n}/manage-library-access/sharing/:id`,watchlist:"/watchlist",watchNow:"/provider/:providerIdentifier/watch-now",webhooks:`${n}/webhooks`,watchlistRSS:`${n}/watchlist`,webSettings:`${n}/web/:settingsSubset?`,webSettingsExperiments:`${n}/web/experiments`,profile:"/profile",editProfile:"/profile/edit",userProfile:"/user/:id",friends:"/friends",userFriends:"/user/:id/friends",activity:"/activity/:id?/:providerIdentifier?",prePlayActivityFeed:["/server/:machineIdentifier/activity","/server/:machineIdentifier/provider/:providerIdentifier/activity","/provider/:providerIdentifier/activity"],profileWatchlist:"/profile/:id?/watchlist",profileRatings:"/profile/:id?/ratings",profileWatchHistory:"/profile/:id?/watch-history",reports:"/reports",report:"/report/:id?/:providerIdentifier?"}},9612:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(85448),i=r(96504),s=r(95460);const a=function(e,t={},r={}){const a=s.c[e],o=Array.isArray(a)?a[0]:a;return i.c.join((0,n.Yz)(o,t),r)}},43300:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=(e=>(e.Equal="=",e.NotEqual="!=",e.DoubleEqual="==",e.NotDoubleEqual="!==",e.GreaterThanOrEqual=">=",e.LessThanOrEqual="<=",e.GreaterThanGreaterThanOrEqual=">>=",e.LessThanLessThanOrEqual="<<=",e))(n||{});const i=n},39864:(e,t,r)=>{"use strict";r.d(t,{IL:()=>n,K2:()=>i,Ky:()=>s,QN:()=>a,gV:()=>o,oL:()=>c});var n=(e=>(e.MetadataMessage="METADATA_MESSAGE",e.MetadataReport="METADATA_REPORT",e.Post="POST",e.Rating="RATING",e.Watchlist="WATCHLIST",e.WatchHistory="WATCH_HISTORY",e.WatchRating="WATCH_RATING",e.WatchSession="WATCH_SESSION",e))(n||{}),i=(e=>(e.DisplayName="DISPLAY_NAME",e.FriendshipDate="FRIENDSHIP_DATE",e))(i||{}),s=(e=>(e.Friends="FRIENDS",e.InviteReceived="INVITE_RECEIVED",e.InviteSent="INVITE_SENT",e))(s||{}),a=(e=>(e.Episode="EPISODE",e.Movie="MOVIE",e.Season="SEASON",e.Show="SHOW",e))(a||{}),o=(e=>(e.Received="RECEIVED",e.Sent="SENT",e))(o||{}),c=(e=>(e.Friends="FRIENDS",e.FriendsOfFriends="FRIENDS_OF_FRIENDS",e.Private="PRIVATE",e.Public="PUBLIC",e))(c||{})},40376:(e,t,r)=>{"use strict";r.d(t,{es:()=>i,sL:()=>n,uw:()=>s});const n=Object.keys,i=Object.values,s=Object.entries},3852:(e,t,r)=>{"use strict";function n(e,t){if(!e)throw new Error(t)}r.d(t,{c:()=>n})},43848:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(89899),i=r.n(n),s=r(83860),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,c(t));const y={get:(e,t)=>{const[r]=s.c.getAPIRequestConfig(e,h(m({},t),{method:"GET"}));return i().request(r)},post:(e,t)=>{const[r]=s.c.getAPIRequestConfig(e,h(m({},t),{method:"POST"}));return i().request(r)},put:(e,t)=>{const[r]=s.c.getAPIRequestConfig(e,h(m({},t),{method:"PUT"}));return i().request(r)},del:(e,t)=>{const[r]=s.c.getAPIRequestConfig(e,h(m({},t),{method:"DELETE"}));return i().request(r)}}},83860:(e,t,r)=>{"use strict";r.d(t,{c:()=>B});var n=r(89899),i=r.n(n),s=r(87392),a=r.n(s),o=r(63772),c=r(76220),l=r(60148),d=r(72152),u=r(38828),p=r(44768),m=r(96504),h=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function P(e){if(!e)return e;const t=e,{"X-Plex-Username":r,"X-Plex-Device-Name":n}=t;return((e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(t,["X-Plex-Username","X-Plex-Device-Name"])}var I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&T(e,r,t[r]);if(C)for(var r of C(t))M.call(t,r)&&T(e,r,t[r]);return e};const k={PUT:!0,DELETE:!0},x={Accept:!0,"Accept-Language":!0,"Content-Language":!0,"Content-Type":!0},A=/(^X-Plex-[^=]+)/i;var R=Object.defineProperty,N=Object.defineProperties,L=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))U.call(t,r)&&V(e,r,t[r]);if(j)for(var r of j(t))F.call(t,r)&&V(e,r,t[r]);return e},W=(e,t)=>N(e,L(t));const B=function(e){const t=_({},e);function r(e,r){const n=r,{server:s,provider:o,timeout:d=t.timeout,allowHeadersInUrl:h=!(!s&&!o),providerVersionOverride:I}=n,C=((e,t)=>{var r={};for(var n in e)U.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))t.indexOf(n)<0&&F.call(e,n)&&(r[n]=e[n]);return r})(n,["server","provider","timeout","allowHeadersInUrl","providerVersionOverride"]),O=c.c.hasInstance()?c.c.getInstance():{},M=W(_(_({},O),r.headers),{"X-Plex-Restriction-Profile":(null==s?void 0:s.isCloud)?O["X-Plex-Restriction-Profile"]:void 0});let T=e;if(s){if(!(0,p.c)(e)){const t=(null==o?void 0:o.baseURL)?o.baseURL:s.uri;if(!t)throw new Error("Unable to make a request to a relative path without `server.uri` or `baseURL`");T=m.c.join([t,e])}s.accessToken&&(M["X-Plex-Token"]=s.accessToken),s.isEmbedded&&(M["X-Plex-Account-ID"]="1"),o&&(M["X-Plex-Provider-Version"]=null!=I?I:t.providerVersion,M["X-Plex-Text-Format"]=(0,l.c)(o.identifier),t.drmType&&(M["X-Plex-Drm"]=t.drmType))}t.language&&(M["X-Plex-Language"]=t.language,M["Accept-Language"]=t.language);const R=i().CancelToken.source();let N=W(_({},C),{url:T,cancelToken:R?R.token:void 0,headers:M,timeout:d,allowHeadersInUrl:h,paramsSerializer:e=>a().stringify(e,{arrayFormat:"repeat"})});return(null==s?void 0:s.isCloud)&&o&&(N=function(e){return t=((e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e})({},e),r={headers:P(e.headers)},y(t,g(r));var t,r}(N)),N=function(e){const{method:t="GET",headers:r={},params:n={},allowHeadersInUrl:i=!1,allowBlacklistedMethodHeaders:s=!1}=e;if(!i)return e;if(k[t]&&!s)return e;const a=D({},r),o=D({},n);return Object.keys(r).forEach((e=>{const t=r[e];x[e]||(A.test(e)?(o[e]=t,delete a[e]):u.c.warn('[CORS] Did not move header "%s" to query string. This can result in an unnecessary OPTIONS preflight request.',e))})),c=D({},e),E(c,w({headers:a,params:o}));var c}(N),[N,R]}function*n(e,t){const[n,s]=r(e,t);try{return yield(0,o.MN)(i().request,n)}finally{(yield(0,o.yU)())&&(null==s||s.cancel())}}return{get:(e,t={})=>n(e,W(_({},t),{method:"GET"})),post:(e,t={},r)=>n(e,W(_({},t),{method:"POST",data:r})),put:(e,t={},r)=>n(e,W(_({},t),{method:"PUT",data:r})),del:(e,t={})=>n(e,W(_({},t),{method:"DELETE"})),setOption(e,r){t[e]=r},toPlainErrorObject(e){let t,r;(function(e){return e.isAxiosError})(e)&&(e.response?(t=e.response.status,r=e.response.data):e.request&&(t=e.request.status));const n={message:e.message,name:e.name,stack:e.stack,status:t,data:r};return u.c.error(n),n},getAPIRequestConfig:r}}({timeout:3e4,language:"en",drmType:d.NONE,providerVersion:"6.5"})},45372:(e,t,r)=>{"use strict";function n(e){e.isPending=!0,e.error=null}function i(e){e.isPending=!1,e.isPopulated=!0}function s(e,t){e.isPending=!1,e.error=t}function a(e){e.isPending=!1,e.error=null}function o(e){e.isPending=!1,e.error=null}r.d(t,{C:()=>s,Cm:()=>o,G8:()=>n,U1:()=>a,mM:()=>i})},99356:(e,t,r)=>{"use strict";r.d(t,{Q:()=>c,c:()=>l});var n=r(11096),i=r(93808),s=r(67532),a=r(5396),o=r(94612);function c(e){switch(e){case s.a.Movie:case i.WW.Movie:return[n.Mv.Title,n.Mv.YearAndEdition];case s.a.Show:case i.WW.Show:return[n.Mv.Title,n.Mv.ChildCount];case s.a.Season:case i.WW.Season:return[n.Mv.ParentTitle,n.Mv.Title];case s.a.Episode:case i.WW.Episode:return[n.Mv.GrandparentTitle,n.Mv.Title,n.Mv.EpisodeIdentifier];case s.a.Artist:case i.WW.Artist:return[n.Mv.Title];case s.a.Album:case i.WW.Album:return[n.Mv.ParentTitle,n.Mv.TitleAttributed];case s.a.Track:case i.WW.Track:return[n.Mv.GrandparentTitle,n.Mv.Title];case s.a.Photo:case i.WW.Photo:case s.a.PhotoAlbum:case i.WW.PhotoAlbum:case s.a.Clip:case i.WW.Clip:return[n.Mv.Title];case s.a.Playlist:case i.WW.Playlist:return[n.Mv.Title,n.Mv.Duration];case s.a.Collection:case i.WW.Collection:return[n.Mv.Title,n.Mv.ChildCount];case s.a.Channels:return[n.Mv.Title,n.Mv.AirsAt]}return[n.Mv.Title]}const l=function(e){var t;if(!e)return;if(e.DisplayFields)return e;const r=(0,o.c)(e);if(!r)return e;const i=null==(t=r.Sort)?void 0:t.find((e=>e.active));if(!i)return e;const l=function(e){var t,r;const n=(0,o.c)(e);if(!(null==n?void 0:n.type))return[];if(n.type===s.a.Mixed)return null!=(r=null==(t=e.Type)?void 0:t.reduce(((e,t)=>{const r=(0,a.c)(t.type);return!t.active&&r&&e.push(r),e}),[]))?r:[];const i=(0,a.c)(n.type);return i?[i]:[]}(e);if(!l.length)return e;const d=function(e){switch(e.key){case"addedAt":return[n.Mv.AddedAt];case"audienceRating":return[n.Mv.AudienceRating];case"beginsAt":return[n.Mv.AirsAt];case"contentRating":return[n.Mv.ContentRating];case"duration":return[n.Mv.Duration];case"lastRatedAt":return[n.Mv.LastRatedAt];case"lastViewedAt":return[n.Mv.LastViewedAt];case"mediaBitrate":return[n.Mv.MediaBitrate];case"mediaCount":return[n.Mv.LeafCount];case"mediaHeight":return[n.Mv.VideoResolution];case"originallyAvailableAt":return[n.Mv.OriginallyAvailableAt];case"rating":return[n.Mv.Rating];case"unviewedLeafCount":return[n.Mv.UnviewedLeafCount];case"userRating":return[n.Mv.UserRating];case"viewCount":return[n.Mv.ViewCount];case"viewOffset":return[n.Mv.ViewOffset];case"year":return[n.Mv.YearAndEdition]}return[]}(i);return e.DisplayFields=l.map((e=>{const t=c(e);return{type:e,subtype:r.subtype,fields:Array.from(new Set([...t,...d]))}})),e}},50632:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(63772),i=r(26780),s=r(83860),a=r(45372);function o(e,t){const r={items:[],totalSize:void 0,isPaginated:void 0,isPending:!1,isPopulated:!1,error:null};return{getDefaultPaginatedState:()=>r,getRepopulateRangeOptions(e){const t=Math.max(e.findIndex((e=>null!=e)),0);return{startIndex:t,size:e.length-t}},fetchAll:function*(e,r){const{server:a,provider:o,params:c,providerVersionOverride:l,includePaginationHeaders:d}=r,u=a.isCloud?i.cn:i.RI,p=yield(0,n.MN)(s.c.get,e,{server:a,provider:o,params:c,headers:d?{"X-Plex-Container-Start":"0","X-Plex-Container-Size":String(u)}:void 0,providerVersionOverride:l}),m=t?t({server:a,provider:o,data:p.data}):p.data;return yield m},fetchRange:function*(e,r){const{server:a,provider:o,params:c,startIndex:l,size:d,isPrepend:u,providerVersionOverride:p}=r,m=a.isCloud?i.cn:i.RI,h=Math.max(Math.min(d,m),0),y=u?Math.max(l-h+1,0):l,g=yield(0,n.MN)(s.c.get,e,{server:a,provider:o,params:c,headers:{"X-Plex-Container-Start":String(y),"X-Plex-Container-Size":String(h)},providerVersionOverride:p}),f=t?t({server:a,provider:o,data:g.data}):g.data;return yield f},reducers:{reset(t,{payload:n}){const i=e(t,n);Object.assign(i,r)},fetchAllRequested(t,{payload:r}){const n=e(t,r);(0,a.G8)(n)},fetchAllSucceeded(t,{payload:r}){const n=e(t,r),{items:i,meta:s,size:o,title:c}=r.data;(0,a.mM)(n),n.items=i,n.meta=s,n.title=c,n.totalSize=o},fetchAllFailed(t,{payload:r}){const n=e(t,r);(0,a.C)(n,r.error)},fetchRangeRequested(t,{payload:r}){const n=e(t,r);(0,a.G8)(n)},fetchRangeSucceeded(t,{payload:r}){const n=e(t,r),{title:i,offset:s,totalSize:o,size:c,items:l,meta:d}=r.data;(0,a.mM)(n),n.isPaginated=null!=c,n.meta=d,n.title=i,n.totalSize=o;for(let e=0;e<l.length;e++)n.items[e+s]=l[e]},fetchRangeFailed(t,{payload:r}){const n=e(t,r);(0,a.C)(n,r.error)},repopulateRangeRequested(t,{payload:r}){const n=e(t,r);(0,a.G8)(n)},repopulateRangeSucceeded(t,{payload:r}){const n=e(t,r),{items:i,totalSize:s,offset:o}=r.data;(0,a.mM)(n),n.items=[],n.totalSize=s;for(let e=0;e<i.length;e++)n.items[e+o]=i[e]},repopulateRangeFailed(t,{payload:r}){const n=e(t,r);(0,a.C)(n,r.error)}}}}},66992:(e,t,r)=>{"use strict";function n(e,t,r){var n;return null==(n=null==r?void 0:r.find((r=>r.type===e&&(!(null==r?void 0:r.subtype)||r.subtype===t))))?void 0:n.fields}r.d(t,{c:()=>n})},53753:(e,t,r)=>{"use strict";function n(e,t,r){var n;return null==(n=null==r?void 0:r.find((r=>r.type===e&&r.subtype===t)))?void 0:n.imageType}r.d(t,{c:()=>n})},6384:(e,t,r)=>{"use strict";r.d(t,{c:()=>D});var n=r(38316),i=r.n(n),s=r(95420),a=r(6996),o=r(65723),c=r(85976),l=r(96504),d=r(93808),u=r(35860),p=r(30496),m=r(11096);function h(e,t){var r;if(e.Image=null!=(r=e.Image)?r:[],e.Image.find((e=>e.type===t)))return;const n=function(e,t){var r,n,i,s;switch(t){case m.OQ.CoverArt:switch(e.type){case d.WW.Season:return null!=(r=e.parentArt)?r:e.art;case d.WW.Episode:return null!=(i=null!=(n=e.grandparentArt)?n:e.parentArt)?i:e.thumb;default:return e.art}case m.OQ.CoverPoster:switch(e.type){case d.WW.Season:return null!=(s=e.parentTheme)?s:e.thumb;case d.WW.Episode:return e.grandparentThumb;default:return e.thumb}}}(e,t);n&&e.Image.push({alt:e.title,type:t,url:n})}const y=function(e){h(e,m.OQ.CoverArt),h(e,m.OQ.CoverPoster)};var g=r(19796),f=r(16768),v=r(30456),b=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},M=(e,t)=>S(e,P(t));function T(e,t){if(e.role)return e;switch(t){case"Director":return M(O({},e),{role:"Directing"});case"Producer":return M(O({},e),{role:"Production"});case"Writer":return M(O({},e),{role:"Writing"})}}function D({server:e,provider:t,data:r,container:n}){var m,h,b,S,P,I,E,w,C,k,x,A,R,N,L,j;let U=i()(r);if(U.Context&&(Object.assign(U,U.Context),delete U.Context),U.type===d.WW.Channel&&U.Metadata){const e={id:U.id,thumb:U.thumb,title:U.title};U=i()(U.Metadata),U.liveTVChannel=e}null!=U.allowSync||(0,v.kT)(n,U,"allowSync"),null!=U.attribution||(0,v.kT)(n,U,"attribution"),null!=U.librarySectionID||(0,v.kT)(n,U,"librarySectionID"),null!=U.librarySectionTitle||(0,v.kT)(n,U,"librarySectionTitle"),null!=U.librarySectionUUID||(0,v.kT)(n,U,"librarySectionUUID"),null==n.augmentationKey||(0,o.c)(e.version,s.default.augmentedHubsInRelatedHubs)||(0,v.kT)(n,U,"augmentationKey");const F=/(.*)\/(children|items)$/.exec(U.key);F&&(U.childrenKey=l.c.join(U.skipChildren?U.key.replace("/children","/grandchildren"):U.key,{excludeAllLeaves:1}),U.key=F[1]),(0,v.aq)(U,"librarySectionID"),(0,v.cX)(U,"extraType"),(0,v.cX)(U,"childCount"),(0,v.cX)(U,"leafCount");const V=U.source||(0,c.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:null==t?void 0:t.identifier});U.source=V,U.sourceURI=`${V}${U.key}`,null==U.userState&&(U.userState=!0),U.isPlaylist=U.type===d.WW.Playlist&&!U.radio,U.isLiveTVChannel=!!U.liveTVChannel,U.isExtra=null!=U.extraType,U.isFolder=/\/folder\?parent=/.test(U.key),U.isUnreleased=e.isCloud&&!!t&&function(e){return u._u((0,p.c)(e.identifier,e.providerIdentifier),u.Im)}(t)&&!!U.originallyAvailableAt&&new Date(U.originallyAvailableAt)>new Date,U.network=null==(h=null==(m=U.Network)?void 0:m[0])?void 0:h.tag,U.type===d.WW.Photo&&U.childrenKey&&(U.type=d.WW.PhotoAlbum),U.type===d.WW.Clip&&(null==(b=U.guid)?void 0:b.startsWith(`${a.KE}://`))&&!U.subtype&&(U.subtype=d.GO.Photo),U.type===d.WW.Movie&&(null==(S=U.guid)?void 0:S.startsWith(`${a.KE}://`))&&!U.subtype&&(U.subtype=d.GO.Clip),""===U.title&&U.titleSort&&(U.title=U.titleSort),null==(P=U.Media)||P.forEach((e=>{var t;null==(t=e.Part)||t.forEach((e=>{var t;null==(t=e.Stream)||t.forEach((e=>{(0,v.aq)(e,"id")}))}))})),y(U),e.isCloud||(U.Director=null==(I=U.Director)?void 0:I.map((e=>T(e,"Director"))),U.Writer=null==(E=U.Writer)?void 0:E.map((e=>T(e,"Writer"))),U.Producer=null==(w=U.Producer)?void 0:w.map((e=>T(e,"Producer")))),U.AdTile&&(U.clickTrackers=U.AdTile.flatMap((e=>e.clickTrackers)),U.impressionTrackers=U.AdTile.flatMap((e=>e.impressionTrackers)),delete U.AdTile),U.listItemKey=null!=(k=null==(C=U.Media)?void 0:C.reduce(((e,t)=>(e.push(t.id),e)),[U.sourceURI]).join("~"))?k:U.sourceURI;const _={};(0,v.cz)(U,_,"deletedAt"),(0,v.cz)(U,_,"downloadSubscriptionID"),(0,v.cz)(U,_,"subscriptionID"),(0,v.cz)(U,_,"subscriptionType"),(0,v.cz)(U,_,"grandparentSubscriptionID"),(0,v.cz)(U,_,"grandparentSubscriptionType"),(0,v.cz)(U,_,"isDownloaded"),(0,v.cz)(U,_,"lastRatedAt"),(0,v.cz)(U,_,"lastViewedAt"),(0,v.cz)(U,_,"picked"),(0,v.cz)(U,_,"playableUntil"),(0,v.cz)(U,_,"redeemedAt"),(0,v.cz)(U,_,"saved"),(0,v.cz)(U,_,"unviewedLeafCount"),(0,v.cz)(U,_,"userRating"),(0,v.cz)(U,_,"viewCount"),(0,v.cz)(U,_,"viewOffset"),(0,v.cz)(U,_,"viewedLeafCount"),(0,v.cz)(U,_,"watchlistedAt"),(0,v.cz)(U,_,"parentWatchlistedAt"),(0,v.cz)(U,_,"grandparentWatchlistedAt");const W=null==(x=U.Media)?void 0:x.reduce(((e,t)=>{var r;return null==(r=t.Part)||r.forEach((t=>{var r;null==(r=t.Stream)||r.forEach((t=>{e.push(t)}))})),e}),[]);(null==W?void 0:W.length)&&(_.Stream=[],W.forEach((e=>{var t;e.selected&&(null==(t=_.Stream)||t.push({id:e.id,streamType:e.streamType}))})));const B=(0,g.c)({metadataItemStateResponse:_,metadataItem:U}),H=M(O({},B),{tempState:{},isStale:!1,isPending:!1,isPopulated:!!U.userState,error:null}),z={[U.sourceURI]:H};if(null==(A=U.Stations)?void 0:A.Metadata){const r=(0,f.c)({server:e,provider:t,data:U.Stations.Metadata,container:n});U.stations=r.metadataItems,delete U.Stations,Object.assign(z,r.metadataItemStates)}if(null==(R=U.Extras)?void 0:R.Metadata){const r=(0,f.c)({server:e,provider:t,data:U.Extras.Metadata,container:n});U.extras=r.metadataItems,delete U.Extras,Object.assign(z,r.metadataItemStates)}if(null==(N=U.OnDeck)?void 0:N.Metadata){const r=D({server:e,provider:t,data:U.OnDeck.Metadata,container:n});U.onDeck=r.metadataItem,delete U.OnDeck,Object.assign(z,r.metadataItemStates)}if((null==(L=U.PopularLeaves)?void 0:L.Metadata)&&(null==(j=U.PopularLeaves)?void 0:j.key)){const r=(0,f.c)({server:e,provider:t,data:U.PopularLeaves.Metadata,container:n});U.popularLeaves={key:U.PopularLeaves.key,items:r.metadataItems},delete U.PopularLeaves,Object.assign(z,r.metadataItemStates)}return U.Preferences&&(H.preferences=U.Preferences.Setting,delete U.Preferences),e.isCloud&&U.isAdult?{metadataItem:{userState:!1,source:U.source,sourceURI:U.sourceURI,key:"",listItemKey:U.listItemKey,ratingKey:"",title:"Error",type:U.type,isAdult:U.isAdult,isPlaylist:U.isPlaylist,isLiveTVChannel:U.isLiveTVChannel,isExtra:U.isExtra,isFolder:U.isFolder,isUnreleased:U.isUnreleased},metadataItemStates:{}}:{metadataItem:U,metadataItemStates:U.userState?z:{}}}},19796:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(38316),i=r.n(n);function s({metadataItemStateResponse:e,metadataItem:t}){var r;const n=i()(e);return null!=t.leafCount&&(n.viewedLeafCount=null!=(r=n.viewedLeafCount)?r:0,n.unviewedLeafCount=t.leafCount-n.viewedLeafCount),n}},16768:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(6384);function i({server:e,provider:t,data:r,container:i}){return r.reduce(((r,s)=>{const{metadataItem:a,metadataItemStates:o}=(0,n.c)({server:e,provider:t,data:s,container:i});return r.metadataItems.push(a),Object.assign(r.metadataItemStates,o),r}),{metadataItems:[],metadataItemStates:{}})}},30456:(e,t,r)=>{"use strict";r.d(t,{aq:()=>o,cX:()=>s,cz:()=>c,kT:()=>l,op:()=>a});var n=r(38828);function i(e){return(t,r,n)=>{const i=e(t[r],r);n?(t[n]=i,delete t[r]):t[r]=i}}const s=i(((e,t)=>{const r=typeof e;if("string"===r||"number"===r)return Number(e);"undefined"!==r&&n.c.warn(`normalizeAsNumber: returning undefined for type: ${r}, property: ${t}`)})),a=i(((e,t)=>{const r=typeof e;return"boolean"===r||"number"===r?Boolean(e):"string"===r?"1"===e:void("undefined"!==r&&n.c.warn(`normalizeAsBoolean: returning undefined for type: ${r}, property: ${t}`))})),o=i(((e,t)=>{const r=typeof e;if(null!=e)return String(e);"undefined"!==r&&n.c.warn(`normalizeAsNumber: returning undefined for type: ${r}, property: ${t}`)}));function c(e,t,r){e.hasOwnProperty(r)&&(t[r]=e[r],delete e[r])}function l(e,t,r){e.hasOwnProperty(r)&&(t[r]=e[r])}},14316:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(63772),i=r(52180);function s(e){(0,i.WI)("appStore").dispatch(e)}const a=function(e){return(0,n.MN)(s,e)}},35348:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(63772),i=r(52180);function s(e){return e((0,i.WI)("appStore").getState())}const a=function(e){return(0,n.MN)(s,e)}},99372:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var n=r(52180);function i(e){var t;return null==(t=n.WI("appModel").state.user.features)?void 0:t.some((t=>t.id===e||t.uuid===e))}},49828:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=(0,r(87512).c)((function(e){const t=parseFloat(window.getComputedStyle(document.documentElement).fontSize);return parseFloat(window.getComputedStyle(document.body).getPropertyValue(`--size-${e}`))*t}))},86552:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function(e,t){const[r,i]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const r=window.setTimeout((()=>{i(e)}),t);return()=>{window.clearTimeout(r)}}),[t,e]),r}},58980:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(27876),s=r(29164),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e},p=(e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r};function m(e,t,r=!1){const a=(0,i.OY)(),o=(0,i.w1)(e),{isPopulated:c,error:l,isPending:d}=o,m=p(o,["isPopulated","error","isPending"]),h=(0,i.w1)(s.c);(0,n.useEffect)((()=>{c||d||l||r||a(t({server:h}))}),[t,a,l,d,c,h,r]);const y=(0,n.useCallback)((()=>{a(t({server:h}))}),[t,a,h]);return u({error:l,isPending:d,isPopulated:c,refetch:y},m)}},10868:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(27876),i=r(70456),s=r(8436),a=r(17920);function o(){const e=(0,a.c)(),t=(0,n.w1)(i.c),r=(0,n.w1)(s.c);return e&&t&&r.isFullUser&&!r.anonymous}},17920:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(27876),i=r(57864),s=r(14252),a=r(8436),o=r(48112),c=r(1692);const l=(0,i.M3)(a.c,(e=>e.hasAttemptedSignIn)),d=(0,i.M3)(s.c,(e=>e.isUnavailable));function u(){const e=(0,n.w1)(d),t=(0,n.w1)(l),r=(0,n.w1)(o.c)===c.Z9.Locked;return(t||e)&&!r}},21040:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},12888:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(27876),s=r(13778);const a=function(e){const t=(0,i.OY)();return(0,n.useCallback)((r=>{const n=r.currentTarget.getAttribute("href");n&&(0===r.button||r.touches)&&(r.stopPropagation(),t((0,s.IB)({pathname:n,replace:!0}))),null==e||e(r)}),[t,e])}},87512:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});const n=!1;function i(e){const t=new Map;return(...r)=>{const i=JSON.stringify(r);if(t.has(i))return n&&window.console.log("[memoize] %s: fetching cache for key %s",e.name,i),t.get(i);{n&&window.console.log("[memoize] %s: setting cache for key %s",e.name,i);const s=e(...r);return t.set(i,s),s}}}},640:(e,t,r)=>{"use strict";r.d(t,{cp:()=>d,AX:()=>l});var n=r(11504),i=(e=>(e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator",e))(i||{});const s=i,a={display:"contents "};function o(e,t,r){const n=[];for(let i=Math.min(t,r);i<=Math.max(t,r);i++)n.push(e[i]);return n}const c=(0,n.createContext)({isSelectionRangeActive:!1,isSelectionRangeComplete:!1,checkItemInRange:()=>!1,onRangeStart:()=>{},onRangeEnd:()=>{},onRangeSelect:()=>{},onRangeClear:()=>{}});function l(){return(0,n.useContext)(c)}const d=function({children:e,items:t}){const[r,i]=(0,n.useState)(),[l,d]=(0,n.useState)(),[u,p]=(0,n.useState)(),[m,h]=(0,n.useState)(!1),y=(0,n.useCallback)((e=>{const n=t.indexOf(e);return null!=r&&null!=l&&n>=Math.min(r,l)&&n<=Math.max(r,l)}),[t,l,r]),g=(0,n.useCallback)((e=>{const r=t.indexOf(e);-1!==r&&(i(r),d(void 0),p(void 0))}),[t]),f=(0,n.useCallback)((e=>{const n=t.indexOf(e);-1!==n&&null!=r&&o(t,r,n).every((e=>e))&&d(n)}),[t,r]),v=(0,n.useCallback)(((e,n)=>{null!=r&&null!=l&&(u&&n(o(t,...u)),e(o(t,r,l)),p([r,l]))}),[t,u,l,r]),b=(0,n.useCallback)((()=>{i(void 0),d(void 0),p(void 0)}),[]),S=(0,n.useCallback)((()=>{d(void 0)}),[]);(0,n.useEffect)((()=>{function e(e){e.key===s.Shift&&h(!0)}function t(e){e.key===s.Shift&&(h(!1),d(void 0))}function r(){h(!1),d(void 0)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),window.addEventListener("blur",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),window.addEventListener("blur",r)}}),[]);const P=(0,n.useMemo)((()=>({isSelectionRangeActive:m,isSelectionRangeComplete:null!=r&&null!=l,checkItemInRange:y,onRangeStart:g,onRangeEnd:f,onRangeSelect:v,onRangeClear:b})),[y,m,b,f,v,g,l,r]);return n.createElement(c.Provider,{value:P},n.createElement("div",{style:a,onMouseLeave:S},e))}},37008:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return 1===Number(e)||"true"===e}},75536:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return null==e?"":String(e)}},29320:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return e instanceof Promise?e:e instanceof Error?Promise.reject(e):"[object Function]"===Object.prototype.toString.call(null==e?void 0:e.then)?new Promise(((t,r)=>{try{e.then(t,r)}catch(e){t(e)}})):Promise.resolve(e)}},8476:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(89064);const s=function(e,t,r){const[s,a,o]=r;return e===i.A?o:t===n.Qh?s:a}},77424:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(35860),i=r(89064);const s=function(e,t){return e===i.A?{providerIdentifier:t}:t===n.Qh?{machineIdentifier:e}:{machineIdentifier:e,providerIdentifier:t}}},49956:(e,t,r)=>{"use strict";r.d(t,{GV:()=>h,IZ:()=>y,OA:()=>p,cr:()=>m,g7:()=>u,qo:()=>d});var n=r(30004),i=r(31228),s=r(24956),a=r(92128),o=r(72620),c=r(75760),l=r(59396),d=(e=>(e.RealTime="real-time",e.TwelveHours="twelve-hours",e.Day="day",e.Week="week",e.Month="month",e.NinetyDays="ninety-days",e.Year="year",e.AllTime="all-time",e))(d||{}),u=(e=>(e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Week=2]="Week",e[e.Day=3]="Day",e[e.Hour=4]="Hour",e[e.Minutes=5]="Minutes",e[e.RealTime=6]="RealTime",e))(u||{});function p(e){switch(e){case"real-time":return(0,l.c)("Real Time");case"twelve-hours":return(0,l.c)("Last 12 Hours");case"day":return(0,l.c)("Last 24 Hours");case"week":return(0,l.c)("Last 7 Days");case"month":return(0,l.c)("Last 30 Days");case"ninety-days":return(0,l.c)("Last 90 Days");case"year":return(0,l.c)("Last Year");case"all-time":return(0,l.c)("All Time");default:return""}}function m(e){switch(e){case"real-time":return 6;case"twelve-hours":case"day":return 4;case"week":default:return 3;case"month":case"ninety-days":return 2;case"year":case"all-time":return 1}}function h(e){switch(e){case"twelve-hours":return(0,n.c)((0,s.c)(new Date,12));case"day":return(0,n.c)((0,i.c)(new Date,1));case"week":return(0,n.c)((0,o.c)(new Date,1));case"month":return(0,n.c)((0,a.c)(new Date,1));case"ninety-days":return(0,n.c)((0,i.c)(new Date,90));case"year":return(0,n.c)((0,c.c)(new Date,1));case"all-time":return 0;default:return}}function y(e,t){switch(e){case"twelve-hours":return"H:00";case"day":return t?"H:00":"HH";case"week":case"month":case"ninety-days":default:return t?"MMMM do":"MMM d";case"year":return t?"MMMM":"MMM";case"all-time":return t?"MMMM yyyy":"MMM yy"}}},81436:(e,t,r)=>{"use strict";function n(e){return[...new Set(e)]}r.d(t,{c:()=>n})},77010:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(31288),s=r(81028),a=r(97104),o=r(27876),c=r(52180);const l=r(44060).c.Layout.extend({template:()=>"",mountReact(){const e=(0,c.WI)("appStore");a.render(n.createElement(i.q,{backend:s.i6},n.createElement(o.C_,{store:e},this.component(this.options))),this.el)},unmountReact(){this.isRendered&&a.unmountComponentAtNode(this.el)},onBeforeRender(){this.unmountReact()},onRender(){this.mountReact()},onClose(){this.unmountReact()}})},18465:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(44060),i=r(21248),s=r(73552),a=r.n(s);const o={success:!0,error:!0,notify:!0},c=n.c.ItemView.extend({className:"alert-bar",template:a(),events:{"click .close-btn":"onCloseClick"},initialize:function(e){const t=e.alert;if(this.alert=t,t){const e=t.type;e&&o[e]&&this.$el.addClass(e)}},hide:function(){i.c.trigger("hide:bar","alertbar")},serializeData:function(){return this.alert},onCloseClick:function(e){e.preventDefault(),this.hide()}})},53640:(e,t,r)=>{"use strict";r.d(t,{c:()=>O});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(44060),c=r(14224),l=r(32364),d=r(96504),u=r(71684),p=r(11364),m=r(16872);const h=p.c.extend({name:"ArtworkModel",context:["server","artworkType"],idAttribute:"ratingKey",rootPropertyName:"Photo",syncedAttrs:{key:m.c.string,ratingKey:m.c.string,thumb:m.c.string,selected:m.c.boolean}},{types:{POSTER:"poster",ART:"art"}}),y=u.c.extend({name:"ArtworkCollection",context:["server","artworkType"],model:h,url(){const e=d.c.parseUrl(a().result(this.parent,"url")),t=this.parent.get("isPlaylist")?`/library/metadata/${this.parent.get("ratingKey")}`:e.pathname;return d.c.join([t,`${this.artworkType}s`],e.params)}});var g=r(40136),f=r(6552),v=r(77452),b=r(80184),S=r(43532),P=r.n(S);const I=o.c.Layout.extend({tagName:"span",template:P(),regions:{poster:".media-poster"},initialize:function(e){const t=e.artworkType,r="art"===t?240:150;this.$el.addClass(t),this.image=new b.c({className:"media-poster-image",model:this.model,modelAttribute:"thumb",placeholderClass:f.c[t],width:r,height:v.c.getPosterHeight(t,r)})},bindings:{".artwork-option":{modelAttribute:"selected",manual:!0,formatter:function(e,t){t.toggleClass("selected",e)}}},onRender:function(){this.poster.show(this.image)}}),E=g.c.extend({className:"artwork-options-list",itemView:I});var w=r(41e3),C=r.n(w);const O=o.c.Layout.extend({template:C(),dragStatus:0,ui:{upload:".upload-artwork-container",urlInput:"input[name=url]"},regions:{list:".artwork-list-container"},events:{dragenter:"onDragEnter",dragleave:"onDragLeave",dragover:"onDragOver",drop:"onDrop",keydown:"onKeyDown","change .artwork-file-control":"onFileChange","click .upload-url-btn":"onUploadUrlClick","click .cancel-url-btn":"onCancelUrlClick","click .submit-url-btn":"onUrlSubmit","submit #upload-form":"onUrlSubmit","click .upload-back-btn":"onUploadBackClick","click .artwork-option":"onArtworkOptionClick"},initialize:function(e){this.type=e.type,this.metadataItem=this.model.getSingleMetadataItem(),this.changes={},this.collection=new y([],{server:this.model.server,section:this.model.section,parent:this.metadataItem,artworkType:this.type}),this.collection.fetch()},serializeData:function(){return{showUpload:this.model.server.supports("artworkUpload"),showFileUpload:l.c.hasFileUpload}},flushChanges:function(){this.model.set(this.changes)},uploadFiles:function(e){if(!e||!e.length)return;this.changes={},this.ui.upload.removeClass("show-success show-error");const t=this.collection.url(),r=a().extend(this.model.server.getXHROptions(t),{type:"POST",processData:!1}),n=[],s=a().bind((function(e){/image\//.test(e.type)&&(r.data=e,n.push(i().ajax(r)))}),this);a().each(e,s),n.length?(this.ui.upload.addClass("show-progress"),this.monitorUpload(i().when.apply(i(),n))):this.ui.upload.addClass("show-error")},uploadUrl:function(e){this.changes={},this.ui.upload.removeClass("show-form"),this.ui.upload.addClass("show-progress"),this.ui.urlInput.val("");const t=d.c.join(this.collection.url(),{url:e}),r=this.model.server.getXHROptions(t,{type:"POST"});this.monitorUpload(i().ajax(r))},monitorUpload:function(e){e.done(a().bind((function(){this.isClosed||this.ui.upload.addClass("show-success");const e={server:this.model.server,onlyIfCached:!0},t=new c.c({key:this.metadataItem.get("key")},e);a().isEmpty(t)||t.fetch({usePopulatedParams:!0,data:{includePreferences:"1"}}),this.collection.fetch()}),this)),e.fail(this.whenRendered((function(){this.ui.upload.addClass("show-error")}))),e.always(this.whenRendered((function(){this.ui.upload.removeClass("show-progress")})))},onRender:function(){this.list.show(new E({collection:this.collection,itemViewOptions:{artworkType:this.type}}))},onDragEnter:function(){this.dragStatus++,this.ui.upload.addClass("drag-hover")},onDragLeave:function(){this.dragStatus--,0===this.dragStatus&&this.ui.upload.removeClass("drag-hover")},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),e.stopPropagation(),this.dragStatus=0,this.ui.upload.removeClass("drag-hover"),this.uploadFiles(e.originalEvent.dataTransfer.files)},onKeyDown:function(e){27===e.which&&this.ui.upload.hasClass("show-form")&&(e.preventDefault(),this.ui.upload.removeClass("show-form"))},onFileChange:function(e){this.uploadFiles(e.target.files)},onUploadUrlClick:function(e){e.preventDefault(),this.ui.upload.addClass("show-form"),this.ui.urlInput.focus()},onCancelUrlClick:function(e){e.preventDefault(),this.ui.upload.removeClass("show-form")},onUrlSubmit:function(e){e.preventDefault();const t=this.ui.urlInput.val();t?this.uploadUrl(t):this.ui.upload.removeClass("show-form")},onUploadBackClick:function(e){e.preventDefault(),this.ui.upload.removeClass("show-success show-error")},onArtworkOptionClick:function(e){e.preventDefault();const t=i()(e.currentTarget),r=t.data("ratingKey");this.$(".artwork-option.selected").removeClass("selected"),t.addClass("selected"),this.changes[this.type]=r}})},31124:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(44060),c=r(59396);const l=o.c.Layout.extend({events:{"click .edit-lock-addon":"onLockClick","keyup .lockable-field:not(.selectized)":"onLockableFieldChange","change .lockable-field:not(.selectized)":"onLockableFieldChange"},ui:{form:".edit-metadata-form"},serializeData:function(){const e=this.model.get("lockedFields"),t={};e&&e.each((function(e){t[e.get("name")]=e.get("locked")}));const r=this.model.toJSON(),n=this.model.get("mixedFields"),i={originallyAvailableAt:"YYYY-MM-DD",capturedTime:"YYYY-MM-DD HH:mm:ss"};return n&&n.forEach((function(e){i[e]=(0,c.c)("MIXED")})),{item:r,locked:t,placeholders:i,canReparent:this.canReparent,canEditSimilarArtists:this.canEditSimilarArtists,disableIndices:!this.canReparent,editableTags:{}}},flushChanges:function(){},getLockedFieldsArray:function(){const e=this.ui.form,t=this.model.get("lockedFields").reduce((function(e,t){return e[t.get("name")]=t.get("locked"),e}),{});return e.find(".edit-lock-addon").each((function(e,r){const n=i()(r),s=n.data("field");n.hasClass("locked")?t[s]=!0:s in t&&(t[s]=!1)})),a().map(t,(function(e,t){return{name:t,locked:e}}))},onLockClick:function(e){e.preventDefault(),i()(e.currentTarget).hasClass("disabled")||i()(e.currentTarget).toggleClass("locked")},onLockableFieldChange:function(e){const t=e instanceof i()?e:i()(e.currentTarget);if(!e.force){let e=t.data("original-value");if(void 0===e&&(e=t.attr("value")||t.val()),t.data("original-value",e),t.val()===e)return}t.siblings(".edit-lock-addon").addClass("locked")}})},99080:(e,t,r)=>{"use strict";r.d(t,{c:()=>X});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(42728),c=r(59396),l=r(12612),d=r(43876),u=r(44060),p=r(57680),m=r.n(p);const h=u.c.ItemView.extend({className:"player-slider",template:m(),dragging:!1,ui:{thumb:".player-slider-thumb",track:".player-slider-track",progress:".player-slider-progress"},events:{mousedown:"onMouseDown",touchstart:"onTouchStart"},onlyAfterRender:["displayValue"],initialize:function(e){a().bindAll(this,"onMouseMove","onMouseUp","onTouchMove","onTouchEnd"),this.$document=i()(document),this.currentValue=e.value||0},startDragging:function(){this.dragging=!0,this.$el.addClass("active")},stopDragging:function(){this.dragging=!1,this.$el.removeClass("active"),this.triggerMethod("dragComplete")},updateForPosition:function(e,t){const r=this.getValueForPosition(e);this.setValue(r)&&this.displayValue(r,t)},getValueForPosition:function(e){const t=this.ui.track;let r=(e-t.offset().left)/t.width();return r=Math.min(Math.max(r,0),1),r=Math.round(100*r),r},setValue:function(e){return this.currentValue=e,this.trigger("change:value",e),!0},displayValue:function(e){this.ui.thumb.css("left",e+"%"),this.ui.progress.css("width",e+"%"),this.$el.data("value",e)},onRender:function(){this.displayValue(this.currentValue)},onClose:function(){this.$document.off("mousemove",this.onMouseMove),this.$document.off("mouseup",this.onMouseUp),this.$document.off("touchmove",this.onTouchMove),this.$document.off("touchend",this.onTouchEnd)},onMouseDown:function(e){e.preventDefault(),this.$document.on("mousemove",this.onMouseMove),this.$document.on("mouseup",this.onMouseUp),this.startDragging(),this.setValue(this.getValueForPosition(e.pageX))},onTouchStart:function(e){this.$document.on("touchmove",this.onTouchMove),this.$document.on("touchend",this.onTouchEnd),this.startDragging();const t=e.originalEvent.touches[0];t&&this.updateForPosition(t.pageX)},onMouseMove:function(e){e.preventDefault(),this.updateForPosition(e.pageX)},onTouchMove:function(e){e.preventDefault();const t=e.originalEvent.touches[0];t&&this.updateForPosition(t.pageX)},onMouseUp:function(e){e.preventDefault(),this.$document.off("mousemove",this.onMouseMove),this.$document.off("mouseup",this.onMouseUp),this.updateForPosition(e.pageX),this.stopDragging()},onTouchEnd:function(e){this.$document.off("touchmove",this.onTouchMove),this.$document.off("touchend",this.onTouchEnd);const t=e.originalEvent.touches[0];t&&this.updateForPosition(t.pageX),this.stopDragging()}});var y=r(71652),g=r.n(y);const f=h.extend({tagName:"span",className:"rating star-rating",template:g(),disabled:!0,modelEvents:{"change:rating":"onRatingChange","change:userRating":"onRatingChange"},events:a().extend({mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},h.prototype.events),initialize:function(e){h.prototype.initialize.apply(this,arguments);const t=this.model.server.get("shared")&&!this.model.server.get("multiuser");this.disabled=e.disabled||t,this.passive=e.passive,this.updateRating()},updateRating:function(){this.metadataRating=this.model.get("rating")||0,this.userRating=this.model.get("userRating"),this.setValue(this.userRating>0?this.userRating:this.metadataRating)},normalizeRating:function(e){return Math.round(e/2)},serializeData:function(){const e=this.normalizeRating(this.currentValue);return{stars:[e>0,e>1,e>2,e>3,e>4]}},getValueForPosition:function(e){const t=this.$el;let r=(e-t.offset().left)/t.width();return r=Math.min(Math.max(r,0),1),r=2*Math.ceil(5*r),r},persistValue:function(){const e=this.currentValue||-1;d.c.execute("rate",{item:this.model,rating:e,passive:this.passive}),this.updateRating(),this.render()},displayValue:function(e){this.$el.data("value",e);const t=this.normalizeRating(e);this.$(".star-icon").each((function(e){const r=t>e;i()(this).toggleClass("star",r).toggleClass("dislikes",!r)})),this.$el.toggleClass("unrated",!e)},onRender:function(){h.prototype.onRender.apply(this,arguments),this.$el.toggleClass("unrated",!this.currentValue),this.$el.toggleClass("user-rating",this.userRating>0),this.$el.toggleClass("disabled",this.disabled)},onRatingChange:function(){this.updateRating(),this.render()},onMouseEnter:function(){this.disabled||(this.$el.addClass("user-rating"),this.$el.removeClass("unrated"))},onMouseLeave:function(){this.disabled||this.render()},onMouseMove:function(e){if(!this.disabled)if(this.dragging)this.updateForPosition(e.pageX);else{const t=this.getValueForPosition(e.pageX);this.displayValue(t)}},onDragComplete:function(){this.disabled||this.persistValue()}});var v=r(31124),b=r(74324);var S=r(436),P=r.n(S),I=r(6832),E=r.n(I),w=r(77328),C=r.n(w),O=r(74892),M=r.n(O),T=r(29928),D=r.n(T),k=r(51716),x=r.n(k),A=r(79218),R=r.n(A),N=r(98988),L=r.n(N),j=r(80980),U=r.n(j),F=r(50498),V=r.n(F),_=r(70164),W=r.n(_),B=Object.defineProperty,H=Object.defineProperties,z=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function $(e){return a().reduce(e,(function(e,t){return e[t]=!0,e}),{})}const Y={movie:D(),show:V(),season:U(),episode:M(),artist:E(),album:P(),track:W(),photoalbum:x(),photo:R(),playlist:L(),collection:C()},X=v.c.extend({regions:{ratingRegion:".rating-region"},ui:a().extend({selectizeInputs:".selectize input[type=text]"},v.c.prototype.ui),initialize:function(e){const t=this.model.get("type"),r=l.GG(t);this.template=Y[t]||Y[l.MOVIE],this.canSelectize=this.model.server.supports("batchEdit")&&r,this.canReparent=this.model.server.supports("batchEdit")},serializeData(){return e=((e,t)=>{for(var r in t||(t={}))q.call(t,r)&&Q(e,r,t[r]);if(G)for(var r of G(t))K.call(t,r)&&Q(e,r,t[r]);return e})({},v.c.prototype.serializeData.apply(this)),t={supportsLinkedYears:this.model.server.supports("linkedYearMetadata"),supportsMultipleEditions:this.model.server.supports("multipleEditions"),disabledMultipleEditionsEditing:!this.model.server.hasOwnerFeature(o.ML),section:this.model.section,metadataTypeName:this.model.get("type")},H(e,z(t));var e,t},flushChanges:function(){const e=this.ui.form;if(!e||!e.find)return;const t=e.find(".selectize input[tabindex=-1]"),r=$(a().pluck(t,"name")),n=$(a().pluck(e.find("[type=number]"),"name")),s=a()(e.serializeArray()).reject((function(e){return r[e.name]}),this),o=a().reduce(s,(function(e,t){if(n[t.name]){const r=t.value.trim();if(r)return e[t.name]=parseFloat(r,10),e;if(!this.model.get(t.name))return e}return e[t.name]=t.value,e}),{},this);a().each(t,(function(e){const t=i()(e),r=t.data("updateAttr"),n=t.data("altUpdateAttr"),s=t.data("isText");if(!e.selectize)return;const a=e.selectize.getValue();if(n)if(s)o[r]=a,o[n]=null;else{const i=e.selectize.options[a];if(i){const e=i[t.data("autocompleteAttr")];o[r]=e,o[n]=a}}else o[r]=a}));const c=this.model.get("lockedFields");c&&c.set(this.getLockedFieldsArray(),{parse:!0}),this.model.set(o)},markInvalid:function(e){this.$(".form-group").removeClass("has-error"),a()(e).each((function(e){const t=this.$('.form-group[data-attr="'+e+'"]');t.addClass("has-error"),t.find(".control-error").text((0,c.c)("Required"))}),this)},onRender:function(){if(this.$(".rating-region").length>0&&this.ratingRegion.show(new f({model:this.model,passive:!0})),!this.canSelectize)return;const e=this;this.ui.selectizeInputs.each((function(t,r){!function(e,t){const r=i()(t),n=r.attr("name");let s=n.replace(/parentTitle$/,"parentRatingKey");s===n&&(s=null);const o=e.model.getQueryAttr(n),l=e.model.getQueryAttrSibling(n),d=o!==n,u=d?"title":n,p=d?"ratingKey":u,m=e.model.get("type");let h;h=d?o.match(/(^.*)\./)[1]:"title"===u?m:null;const y=r.data("scopeToAttr"),g=r.data("scopeToParam");let f=r.data("ratingKey");const v=!f;f&&(f=f.toString());const S=!d,P={};g&&e.listenTo(e,"reset_selectize:"+g,(function(){D.loadedSearches={}}));const I=e.model["original.updateValues."+n];let E,w;I?(E=I.updateAttr,w=I.altUpdateAttr):(E=e.model.get(n),s&&(w=parseInt(e.model.get(s),10)),e.model["original.updateValues."+n]={updateAttr:E,altUpdateAttr:w});let C=e.model["original.general."+n];if(!C){C=[];const t={};t[u]=E,t.ratingKey=f,C=[t],e.model["original.general."+n]=C}const O=[e.model.get(s)||e.model.get(n)],M=function(){const e=D.$dropdown_content.children();D.$dropdown.toggleClass("hidden",e.length<=1)},T=function(){a().defer(M)};r.data("autocompleteAttr",u),r.data("updateAttr",n),s&&r.data("altUpdateAttr",s);const D=r.selectize({options:C,items:O,plugins:["restore_on_focus"],delimiter:null,create:!0,maxItems:1,labelField:u,valueField:p,sortField:u,searchField:[u],selectOnTab:!0,hideSelected:!1,highlight:!1,openOnFocus:!0,selectOnBlur:!0,createOnBlur:!0,persist:!0,addPrecedence:!0,allowEmptyOption:!0,allowCreateEmpty:S,manualInputWidth:!0,loadingClass:"",onFocus:function(){D.preloaded||(D.preloaded=!0,D.onSearchChange(D.$control_input.val()))},createFilter:function(e){return P[u]=e,!a()(this.options).findWhere(P)},load:function(t,r){if(!t.length)return void r();const n={};if(n[o]=t,y){const t=e.model.get(y);if(!t)return void r();n[g]=t}new b.c([],{server:e.model.server,multiMetadataItem:e.model,query:n}).fetch().done((function(e){r(e.map((function(e){return e.toJSON()}))),M()}))},render:{option:function(e,t){let r;return r=(s?e.ratingKey===String(w):e[u]===E)?'<small class="autocomplete-annotate pull-right">('+(h&&!v?(0,c.c)("this {1}",h):(0,c.c)("original value"))+")</small>":"","<div>"+t(e[u])+r+"</div>"},option_create:function(e,t){return e.input?'<div class="create">'+t(e.input)+"</div>":'<div class="create hidden"></div>'}},onDropdownClose:function(){D.$dropdown.addClass("hidden")},onDropdownOpen:function(){D.$dropdown.addClass("hidden"),T()},onType:a().bind((function(e){if(D.canCreate(e)){const e=i()(D.$dropdown_content[0].childNodes[0]);D.setActiveOption(e)}T(),this.onLockableFieldChange({currentTarget:D.$input,force:!0})}),e),onOptionAdd:function(e,t){const r=a().pick(t,u,"ratingKey");a().findWhere(C,r)||C.splice(C.length,0,t)},onChange:function(t){const i=this.options[t];if(!i)return;if(d){const e=i.ratingKey===i[u];r.data("isText",e)}e.flushChanges();const s=e.model.changedAttributes();a().has(s,o)||a().has(s,l)?e.trigger("focusSubmit"):a().defer((function(){D.onBlur()})),e.trigger("reset_selectize:"+n),M()}})[0].selectize;D.$dropdown.addClass("hidden")}(e,r)}))}})},40136:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(95720),i=r.n(n),s=r(44060);const a=s.c.CollectionView.extend({appendHtml:function(){return this.sorted?this.sortedAppendHtml.apply(this,arguments):this.reversed?this.reversedAppendHtml.apply(this,arguments):s.c.CollectionView.prototype.appendHtml.apply(this,arguments)},sortedAppendHtml:function(e,t,r){if(e.isBuffering){const n=e.elBuffer.childNodes;n.length<=r?e.elBuffer.appendChild(t.el):e.elBuffer.insertBefore(t.el,n[r]),e._bufferedChildren.push(t)}else{const n=e.itemViewContainer?e.$(e.itemViewContainer):e.$el,i=n.children();i.size()<=r?n.append(t.el):i.eq(r).before(t.el)}},reversedAppendHtml:function(e,t){e.isBuffering?(e.elBuffer.insertBefore(t.el,e.elBuffer.firstChild),e._bufferedChildren.push(t)):(e.itemViewContainer?e.$(e.itemViewContainer):e.$el).prepend(t.el)},measureList:function(){if(!this.children.length)return;const e=this.children._views,t=e[i().first(i().keys(e))];i().defer(i().bind((function(){this.itemWidth=t.$el.outerWidth(!0),this.itemHeight=t.$el.outerHeight(!0),this.itemMarginRight=parseInt(t.$el.css("margin-right"),10),this.itemMarginBottom=parseInt(t.$el.css("margin-bottom"),10),this.triggerMethod("measure",this)}),this))},getViewForModel:function(e){const t=this.children._indexByModel[e.cid];return this.children._views[t]},reorder:function(){const e=this.children,t=this.collection.models,r=i().map(t,(function(t,r){const n=e.findByModel(t);return n._index=r,n.el}));this.$el.append(r)},onCollectionRendered:function(){this.measure&&this.measureList()}})},74436:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(44060),c=r(21248);let l=0;const d=[],u=o.c.Layout.extend({className:"modal fade",focusDelay:500,animationDelay:500,events:{"hide.bs.modal":"onHide"},initialize:function(){this.once("render",(function(){l+=1,c.c.trigger("anyModalOpen")})),this.once("close",(function(){l-=1,0===l&&c.c.trigger("allModalsClosed")}))},hide:function(){this.isClosed||this.isHidden||this.$el.modal("hide")},tempHide:function(){this.isClosed||this.isHidden||this.$el.addClass("modal-temp-hidden")},restoreTempHidden:function(){this.isClosed||this.isHidden||this.$el.removeClass("modal-temp-hidden")},onRender:function(){this.rerender||(this.isForced?this.$el.modal({backdrop:!1,keyboard:!1}):(this.listenTo(c.c,"shortcut:escape",a().bind((function(){d[0]===this&&this.hide()}),this)),this.listenToOnce(this,"close",(function(){const e=d.indexOf(this);-1!==e&&d.splice(e,1)})),d.unshift(this),this.$el.modal()),i()(":focus").blur())},onHide:function(){this.isHidden=!0,a().each(this.panes,(function(e){const t=e.constructor.onModalClose;t&&t.apply(this)}),this),window.setTimeout(a().bind((function(){c.c.trigger("hide:modal",this),this.trigger("close")}),this),this.animationDelay)}})},46724:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(74436),c=r(38334),l=r.n(c);const d=o.c.extend({className:"confirm-modal modal modal-sm fade",template:l(),ui:{doubleConfirmMessage:".double-confirm-message",confirmBtn:".confirm-btn",confirmLabel:".confirm-btn .btn-label"},events:a().extend({"click .confirm-btn":"onConfirm"},o.c.prototype.events),whitelistedOptions:["title","message","warningMessage","confirmLabel","cancelLabel","hasDanger","hideCancel"],initialize:function(e){o.c.prototype.initialize.apply(this,arguments),this.async=e.async,this.data=a().pick(e,this.whitelistedOptions),this.promise=i().Deferred()},serializeData:function(){return a().defaults(this.data,{confirmLabel:"Yes",cancelLabel:"No"})},onRender:function(){o.c.prototype.onRender.apply(this,arguments),window.setTimeout(a().bind((function(){this.ui.confirmBtn.focus()}),this),this.focusDelay)},onHide:function(){o.c.prototype.onHide.apply(this,arguments),this.promise.reject()},onConfirm:function(e){if(e.preventDefault(),this.options.requireDoubleConfirm&&!this.hasConfirmedOnce){this.hasConfirmedOnce=!0;const e=this.options.doubleConfirmMessage,t=this.options.doubleConfirmLabel;return e&&this.ui.doubleConfirmMessage.text(e),void(t&&this.ui.confirmLabel.text(t))}this.promise.resolve(),this.async?this.ui.confirmBtn.addClass("active"):this.hide()}})},48528:(e,t,r)=>{"use strict";r.d(t,{c:()=>Ie});var n=r(54252),i=r(67272),s=r(37588),a=r.n(s),o=r(95720),c=r.n(o),l=r(52180),d=r(43876),u=r(38238),p=r(59740),m=r(78364),h=r(35860),y=r(21248),g=r(49048),f=r(85976),v=r(43864),b=r(59396),S=r(12612),P=r(96504),I=r(15292),E=r(16740),w=r(96048),C=r(31124),O=r(62144),M=r.n(O);const T=C.c.extend({template:M(),serializeData(){const e=this.model.get("preferences"),t=this.model.getSingleMetadataItem().get("preferences");return e.length?t.reduce(((t,r)=>{const n=e.get(r.id);return n?t.push(n.toJSON()):t.push(r.toJSON()),t}),[]):t.toJSON()},flushChanges(){const e=this.ui.form.serializeArray(),t=this.model.getSingleMetadataItem().get("preferences"),r=this.model.get("preferences");e.forEach((e=>{const n=r.get(e.name)||t.get(e.name),i=n.clone();i.parseAndSetValue(e.value),i.get("value")!==n.get("value")&&r.add(i,{merge:!0})}))}});var D=r(53640),k=r(99080),x=r(44060),A=r(74844),R=r(15568),N=r(78964),L=r.n(N);const j=x.c.ItemView.extend({template:L(),tagName:"li",className:"well",serializeData:function(){return{file:this.model.get("file")}}});var U=r(43312),F=r.n(U);const V=x.c.CompositeView.extend({template:F(),className:"files",itemView:j,itemViewContainer:"ul",initialize:function(){this.collection=new A.c,this.populateParts().always(this.whenRendered((function(){this.$(".loading").addClass("hidden")})))},populateParts:function(){const e=this.collection;function t(e){const t=e.get("Media");if(t&&t.length)return c().each(t,r),t}function r(e){c().each(e.Part,n)}function n(t){e.push(t)}const i=this.model.getSingleMetadataItem();return t(i)?a().Deferred().resolve():i.populate().then((function(){if(!t(i)&&i.has("childrenKey")){const e=new R.c({containerKey:i.get("childrenKey")},{server:i.server,provider:i.provider,skipCache:!0});return e.fetch().then((function(){e.get("metadataItems").each(t)}))}}))},flushChanges:function(){}});var _=r(95420),W=r(42728),B=r(9852),H=(r(70124),r(65668)),z=r(75276),G=r(74324);const q=function(e,t){const r=a()(t),n=r.data("name"),i=r.data("query")||r.data("name"),s=r.data("attr"),o=!!r.data("only-delete"),l=e.model.get(s).toJSON(),d=c().pluck(l,"tag");let u=e.model["original.tag."+n];u||(u=c().clone(l),e.model["original.tag."+n]=u);const p=c().difference(d,c().pluck(u,"tag"));if(p.length){const e=c().map(p,(function(e){return{tag:e}}));e.unshift(u.length,0),u.splice.apply(u,e)}const m=function(t){e.model["original.allTagsRequested."+n]=!0,new z.c({filter:n,filterType:"string"},{server:e.model.server,section:e.section,type:(0,S.GG)(e.model.get("type")).id}).get("options").populate().then(c().bind((function(r){e.model["original.allTagsAvailable."+n]=!0,t(r.map((function(e){return{tag:e.attributes.title}})))}),e))};r.data("original-value",r.val()),r.selectize({options:u,items:d,plugins:["remove_button"],create:!0,hideDropdown:o,labelField:"tag",valueField:"tag",sortField:"tag",searchField:["tag"],highlight:!1,createFilter:function(e){return!c()(this.options).findWhere({tag:e})},onInitialize:function(){o&&(this.$control.off("click mousedown"),this.$control.addClass("no-input"),this.$control_input.prop("disabled",!0))},onChange:function(){e.onLockableFieldChange(r)},onFocus:function(){this.onSearchChange("")},loadingClass:"",load:function(t,r){if(!(i!==n||t.length&&e.canAutocomplete))return void(e.model["original.allTagsRequested."+n]?r():m.call(e,r));if(e.model["original.allTagsAvailable."+n]||0===t.length)return void r();const s={};s[i]=t;const a=new G.c([],{server:e.model.server,multiMetadataItem:e.model,query:s}),o=i===n?function(e){return e.toJSON()}:function(e){return{tag:e.get(i)}};a.fetch().done((function(e){const t=e.map(o);r(t)})).fail((function(){r()}))},render:{item:function(e,t){return'<div class="item">'+(e.tag?t(e.tag):'<span class="autocomplete-annotate">('+(0,b.c)("blank")+")</span>")+"</div>"},option:function(e,t){let r;return r=e.tag?t(e.tag):'<small class="autocomplete-annotate">('+(0,b.c)("blank")+")</small>",'<div class="item">'+r+"</div>"}}})};var K=r(26416),Q=r.n(K),$=r(80887),Y=r.n($),X=r(76976),J=r.n(X),Z=r(31256),ee=r.n(Z),te=r(67292),re=r.n(te),ne=r(5720),ie=r.n(ne),se=r(41424),ae=r.n(se);const oe=C.c.extend({templatesByType:{movie:ee(),show:ie(),episode:J(),artist:Y(),album:Q(),track:ae(),photo:re()},ui:c().extend({tagInputs:".tag-input-hidden"},C.c.prototype.ui),events:c().extend({"change .lockable-field":"onLockableFieldChange"},C.c.prototype.events),initialize:function(){this.template=this.templatesByType[this.model.get("type")]||this.templatesByType.movie,this.canAutocomplete=this.model.server.supports("batchEdit"),this.canEditSimilarArtists=this.model.server.supports("editSimilarArtists"),this.getSection()},getSection:function(){let e=this.model.section;if(!e){const t=this.model.get("librarySectionID");e=new H.c({key:t},{server:this.model.server})}this.section=e},flushChanges:function(){const e=this.ui.form,t=c().reduce(e.serializeArray(),(function(e,t){return e[t.name]=t.value,e}),{}),r=c().reduce(this.ui.tagInputs,(function(e,t){const r=t.selectize,n=a()(t).data("name");return e[a()(t).data("attr")]=c().map(r.items,(function(e){const t=r.options[e];return{tag:t.tag,id:t.id}})),this.model["original.tag."+n]=c().toArray(r.options),e}),{},this);c().each(r,(function(e,t){this.model.get(t).set(e,{parse:!0})}),this),this.model.get("lockedFields").set(this.getLockedFieldsArray(),{parse:!0}),this.model.set(t)},serializeData(){return this.model.get("editableTags").reduce(((e,t)=>(e.editableTags[t]=!0,e)),C.c.prototype.serializeData.apply(this,arguments))},onRender:function(){const e=this;this.ui.tagInputs.each((function(t,r){q(e,r)}))}});var ce=r(41508),le=r.n(ce);const de=oe.extend({templatesByType:{movie:le(),show:le(),album:le(),photo:le()},serializeData:function(){const e=l.WI("appModel").get("user"),t=oe.prototype.serializeData.apply(this,arguments),r=e.get("features").get(W.Gs);return c().extend(t,{showLabels:this.model.server.supports("labels"),escapedLabelsMinVersion:_.default.labels,hasContentFilterFeature:r,plexPassUrl:(0,B.ci)("/plex-pass")}),t}});var ue=r(74436),pe=r(46724),me=r(77208),he=r.n(me),ye=Object.defineProperty,ge=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,be=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Se={movie:["general","tags","labels","poster","art","info","advanced"],show:["general","tags","labels","poster","art","advanced"],season:["general","poster","art","info","advanced"],episode:["general","tags","poster","art","info","advanced"],artist:["general","tags","poster","art","advanced"],album:["general","tags","labels","poster","art","info","advanced"],track:["general","tags","info","advanced"],photoalbum:["general","poster","art","advanced"],photo:["general","tags","info","advanced"],clip:["general","info","advanced"],collection:["general","labels","poster","art","info","advanced"]},Pe=["poster","art","info","advanced"],Ie=ue.c.extend({mixins:[I.c],name:"editMetadataModal",className:"edit-metadata-modal modal modal-lg fade",template:he(),panes:{general:{constructor:k.c},tags:{constructor:oe},poster:{constructor:D.c},art:{constructor:D.c},labels:{constructor:de},info:{constructor:V},advanced:{constructor:T}},events:((e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&be(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&be(e,r,t[r]);return e})({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onFormSubmit","submit .edit-metadata-form":"onFormSubmit"},ue.c.prototype.events),ui:{saveBtn:".save-btn",message:".form-message",navPane:".modal-nav-pane",loadingIndicator:".modal-body-pane .loading-inline"},regions:{paneRegion:".pane-region"},onlyAfterRender:["saveChanges","showPane","showNav"],initialize:function(e){ue.c.prototype.initialize.apply(this,arguments);const t=e.items||[this.model],r=t[0],n=r.server;this.model=new E.c({},{server:n,metadataItems:t}),this.on("before:close",this.onBeforeClose),this._initCancelable=(0,v.c)(r.fetch({usePopulatedParams:!0,data:{includePreferences:"1"}}).then((()=>{const e=(0,g.c)(r,{onlyIfCached:!1});return this.model.setContext("section",e),this.model.populate().then((()=>e.get("key")))})).then((e=>function({server:e,provider:t,metadataTypeName:r,sectionKey:n}){const i=new u.c({key:`/library/sections/${n}`},{server:e,provider:t,includeAdvanced:!0});return i.populate().then((()=>{const e=i.get("types").findWhere({type:r});return e?e.get("fields").filter((e=>"tag"===e.get("type"))).map((e=>e.get("key"))):[]}))}({server:n,provider:r.provider,metadataTypeName:this.model.get("type"),sectionKey:e})))),this._initCancelable.promise.then((t=>{this.model.set({editableTags:t,originalSaveParams:this.model.getSaveParams()}),this.render(),this.showNav(),this.showPane(e.selectedPane||"general"),this.listenTo(y.c,"shortcut:save",this.saveChanges)}),(({isCanceled:e})=>{e||(this.ui.message.text((0,b.c)("There was an error editing this item")),this.ui.loadingIndicator.addClass("hidden"))}))},serializeData:function(){const e=this.model.get("type");let t=Se[e]||Se[S.MOVIE];this.model.get("isSingleMetadataItem")||(t=c().difference(t,Pe)),this.model.getSingleMetadataItem().has("preferences")||(t=c().difference(t,["advanced"])),this.model.getSingleMetadataItem().get("remoteMedia")&&(t=c().difference(t,["info"]));const r=(0,b.s)("Edit {1}",this.model.get("aggregateTitle"));return{item:this.model.toJSON(),panes:(0,m.c)(t,(e=>e),(()=>!0)),selectedPane:this.selectedPane,paneTitle:r}},paneConstructorArg:function(){return{type:this.selectedPane}},invalidChangedAttrs:function(e){const t=[],r=this.model.get("type");if(r===S.UJ){const r=c().has(e,"artist.id.value")||c().has(e,"artist.title.value")||c().has(e,"album.id.value")||c().has(e,"album.title.value"),n=e["album.id.value"]||e["album.title.value"],i=e["artist.id.value"]||e["artist.title.value"];!r||i&&n||(i||t.push("grandparentTitle"),n||t.push("parentTitle"))}else if(r===S.ec&&!this.model.get("isSingleMetadataItem")){const r=this.model.get("mixedFields"),n=c().has(e,"artist.title.value")||c().has(e,"artist.id.value"),i=c().includes(r,"ratingKey"),s=c().has(e,"title.value");i&&s&&!n&&t.push("parentTitle")}if(c().has(e,"originallyAvailableAt.value")){let r=e["originallyAvailableAt.value"];if(/^\d{4}$/.test(r)&&(e["originallyAvailableAt.value"]+="-01-01",r=e["originallyAvailableAt.value"]),""!==r){const e=(0,n.c)((0,i.c)(r,"yyyy-MM-dd",new Date)),s=(0,n.c)((0,i.c)(r,"yyyy-MM-dd HH:mm:ss",new Date));e||s||t.push("originallyAvailableAt")}else this.model.set("originallyAvailableAt",r)}return t},markInvalid:function(e){this.paneRegion.currentView.markInvalid(e)},showNav:function(){this.ui.navPane.removeClass("hidden")},saveChanges:function(){const e=this.ui.saveBtn,t=this.ui.message;if(e.isDisabled())return;t.text(""),this.paneRegion.currentView.flushChanges();const r=[],n=this.model.getSaveParams(),i=this.invalidChangedAttrs(n);if(i.length)return void this.markInvalid(i);e.addClass("active");const s=this.showAdvancedConfirmModal({saving:!0});s.done((()=>{["poster","art"].forEach((e=>{const t=this.model.get(e);t&&r.push(d.c.execute("changeArtwork",{item:this.model.getSingleMetadataItem(),artworkType:e,artworkRatingKey:t}))})),r.push(this.savePreferences()),r.push(this.model.save());const n=a().when.apply(a(),r);n.done((()=>{const e=l.WI("appStore").dispatch,t=this.model.server.entityID();t&&e((0,p.SK)({serverEntityID:t})),this.hide()})),n.fail((function(){t.text((0,b.c)("Your changes could not be saved."))})),n.always((function(){e.removeClass("active")}))})),s.fail((()=>{e.removeClass("active"),this.showPane("advanced")}))},savePreferences:function(){const e=this.model.get("preferences");if(!e.length)return a().Deferred().resolve().promise();const t=this.model.getSingleMetadataItem(),r=P.c.join(["/library/metadata",t.get("ratingKey"),"prefs"],e.getSaveParams()),n=this.model.server.getXHROptions(r,{type:"PUT"}),i=a().ajax(n);return i.done((()=>{const r=t.get("preferences");e.forEach((function(e){r.get(e.id).set("value",e.get("value"))}));const n=l.WI("appStore").dispatch,i=(0,f.c)({serverIdentifier:this.model.server.get("machineIdentifier"),providerIdentifier:h.Qh,key:t.get("key")});n(w.c.actions.preferenceChanged({sourceURI:i,preferences:e.toJSON()}))})),i},showAdvancedConfirmModal:function(){if(!this.model.get("preferences").some((function(e){return/^autoDeletion/.test(e.id)})))return a().Deferred().resolve().promise();const e=new pe.c({title:(0,b.c)("Confirm Deletion Settings"),message:(0,b.c)("Deletion settings will take effect immediately! Files may be deleted and this can't be undone. Are you sure?"),confirmLabel:(0,b.c)("Yes"),cancelLabel:(0,b.c)("Cancel"),requireDoubleConfirm:!0,doubleConfirmMessage:(0,b.c)("Multiple files may be deleted."),doubleConfirmLabel:(0,b.c)("Yes, I'm sure"),hasDanger:!0});return y.c.trigger("show:modal",e),e.promise},onBeforeClose:function(e){this._initCancelable.cancel()},onPaneShow:function(e,t){this.listenTo(t,"focusSubmit",(function(){this.ui.saveBtn.focus()}))},onPaneHide:function(e,t){t.flushChanges(),this.stopListening(t)},onFormSubmit:function(e){e.preventDefault(),this.saveChanges()}})},8344:(e,t,r)=>{"use strict";r.d(t,{c:()=>dt});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(65668),l=r(95420),d=r(54268),u=r(6996),p=r(90044),m=r(35860),h=r(21248),y=r(65723),g=r(87228),f=r(19948),v=r(46207),b=r(59396),S=r(1904),P=r(12612),I=r(47148),E=r(96504),w=r(19204),C=r(15292),O=r(81764),M=r(43876),T=r(44060),D=r(72364),k=r.n(D);const x=T.c.ItemView.extend({template:k(),events:{"change input[name]":"onInputChange","change select[name]":"onInputChange"},initialize:function(){this.changes={}},serializeData:function(){return{settings:this.collection.toJSON(),escapedAgentName:a().escape(this.model.agents.get(this.model.get("agent")).get("name"))}},onInputChange:function(e){const t=i()(e.currentTarget),r=t.is(":checkbox")?t.prop("checked"):t.val();this.collection.findWhere({id:t.attr("name")}).set("value",r)}});var A=r(97036),R=r(54292),N=r(12116),L=r(26344),j=r.n(L);const U=j().extend({constructor:function(e,t,r,n){this.exclusiveScanners=t,this.scannerName=r,j().call(this,e,n),this.filterBy(a().bind(this.filterExclusiveScanner,this))},filterExclusiveScanner:function(e){const t=e.get("name"),r=this.exclusiveScanners;if(!r)return!0;const n=this.scannerName,i=-1!==r.indexOf(n),s=-1!==r.indexOf(t);return i?t===n:!s}});var F=r(71684),V=r(11364),_=r(16872);const W=V.c.extend({name:"ScannerModel",context:["server"],rootPropertyName:"Scanner",syncedAttrs:{name:_.c.string}}),B=F.c.extend({name:"ScannerCollection",context:["server","sectionTypeID"],model:W,url:function(){return"/system/scanners/"+this.sectionTypeID},hasExclusiveScanner:function(e){return!!a().intersection(this.pluck("name"),e).length}}),H=T.c.Layout.extend({ui:{formGroup:".form-group"},onlyAfterRender:["showValidationResult"],serializeData:function(){const e={};return this.model.isNew()?e.add=!0:e.edit=!0,e.section=this.model.toJSON(),e},showValidationResult:function(e){const t=this.ui.formGroup;t.removeClass("has-error"),a().each(e,(function(e){t.filter("."+e+"-group").addClass("has-error")})),this.trigger(e.length?"invalid":"valid")},createMenuOptions:function(e,t){return a().map(e,(function(e){return'<option value="'+e.value+'"'+(e.value===t?" selected":"")+">"+e.label+"</option>"})).join("\n")},getSectionType:function(){if(this.model.sectionType)return this.model.sectionType;const e=this.model.get("type");let t=I.cp.get(e);return"movie"===e&&this.model.get("agent")===u.KE&&(t=I.cp.get("videos")),this.model.sectionType=t,t},setSectionType:function(e){this.model.sectionType=e},populateAgents:function(){const e=this.getSectionType();return e?(this.model.agents||(this.model.agents=new R.c([],{server:this.model.server,mediaTypeID:e.typeID})),this.model.agents.populate().then((function(e){return e}))):i().Deferred().reject().promise()},populateScanners:function(){const e=this.getSectionType();return e?(this.model.scanners||(this.model.scanners=new B([],{server:this.model.server,sectionTypeID:e.typeID})),this.model.scanners.populate().then((function(e){return e}))):i().Deferred().reject().promise()},populateAgentsProxy:function(){const e=this.getSectionType().exclusiveAgents,t=new N.c(this.model.agents,e,this.model.get("agent"));return this.model.agentsProxy=t,i().Deferred().resolve(t).promise()},populateScannersProxy:function(){const e=this.getSectionType().exclusiveScanners,t=new U(this.model.scanners,e,this.model.get("scanner"));return this.model.scannersProxy=t,i().Deferred().resolve(t).promise()},populateSectionSettings:function(){if(!this.model.server.supports("sectionSettings"))return i().Deferred().resolve().promise();if(!this.model.settings){const e=new A.c([],{server:this.model.server}),t={agent:this.model.get("agent")};if(this.model.isNew()){const r=this.getSectionType();t.type=r.typeID,e.url=E.c.join(["/library/sections/prefs"],t)}else e.url=E.c.join(["/library/sections/",this.model.id,"/prefs"],t);this.model.settings=e}return this.model.settings.populate().then((()=>(!(!this.model.isNew()||"music"!==this.model.get("type")||!this.model.server.supports("premiumMusic")||this.model.settings.findWhere({id:"importFromiTunes"})||!this.model.server.get("desktop").get("settings").findWhere({id:"iTunesLibraryXmlPath"}))&&this.model.settings.unshift({type:"bool",id:"importFromiTunes",value:!1,label:(0,b.c)("Import from iTunes"),summary:(0,b.c)("Importing from iTunes will import your music playlists. It will also import your ratings, the date you added the music, as well as play and skip counts for tracks in your library.")}),this.model.settings)))},populateSectionAgentSettings:function(){if(!this.model.agentSettings){const e=new A.c([],{server:this.model.server,url:E.c.join(["/:/plugins/",this.model.get("agent"),"/prefs"])});this.model.agentSettings=e}return this.model.agentSettings.populate()},onModalClose:function(){this.model.scanners=null,this.model.scannersProxy=null,this.model.agents=null,this.model.agentsProxy=null,this.model.settings=null}});var z=r(73496),G=r.n(z);const q=T.c.ItemView.extend({template:G(),events:{"change [name]":"onEditSectionSettingInputChange"},serializeData:function(){return{settings:this.collection.toJSON(),edit:!this.model.isNew()}},onEditSectionSettingInputChange:function(e){const t=i()(e.currentTarget),r=t.attr("name");if("importFromiTunes"===r)return void this.model.set(r,!0);const n=t.is(":checkbox")?t.prop("checked"):t.val();this.collection.findWhere({id:r}).set("value",n)}});var K=r(99332),Q=r.n(K);const $=H.extend({template:Q(),ui:a().extend({sectionAgent:"#edit-section-agent",sectionScanner:"#edit-section-scanner",thumbnailsCheckbox:'input[name="enableBIFGeneration"]',agentGroup:".agent-group",scannerGroup:".scanner-group"},H.prototype.ui),events:{"change #edit-section-agent":"onEditSectionAgentChange","change #edit-section-scanner":"onEditSectionScannerChange","click .delete-thumbnails-btn":"onThumbnailsDeleteClick"},regions:{sectionSettingsRegion:".section-settings-region",agentSettingsRegion:".section-agent-settings-region"},onlyAfterRender:["renderSectionAgent","renderSectionScanner","renderSectionSettings","renderSectionAgentSettings"].concat(H.prototype.onlyAfterRender),initialize:function(){this.populateCollections()},onRender:function(){this.model.agents.populate(),this.model.scanners.populate()},validate:function(e){const t=[];return e.get("agent")||t.push("agent"),e.get("scanner")||t.push("scanner"),t},renderSectionSettings:function(){const e=new q({model:this.model,collection:this.model.settings});this.sectionSettingsRegion.show(e)},renderSectionAgentSettings:function(){const e=new x({model:this.model,collection:this.model.agentSettings});this.agentSettingsRegion.show(e)},populateCollections:function(){const e=this.populateAgents(),t=this.populateScanners(),r=this.populateSectionSettings(),n=this.populateSectionAgentSettings();return this.populateAgentsProxy(),this.populateScannersProxy(),e.then(a().bind(this.onAgentsPopulate,this)),t.then(a().bind(this.onScannersPopulate,this)),r.then(a().bind(this.renderSectionSettings,this)),n.then(a().bind(this.renderSectionAgentSettings,this)),i().when(e,t,r,n).then(a().bind(this.validate,this,this.model))},renderSectionAgent:function(){const e=this.model.agentsProxy,t=this.createMenuOptions(e.map((function(e){return{label:e.get("name"),value:e.get("identifier")}})),this.model.get("agent"));this.ui.sectionAgent.html(t),e.length>1&&this.ui.agentGroup.removeClass("hidden")},renderSectionScanner:function(){const e=this.model.scannersProxy,t=this.createMenuOptions(e.map((function(e){return{label:e.get("name"),value:e.get("name")}})),this.model.get("scanner"));this.ui.sectionScanner.html(t),e.length>1&&this.ui.scannerGroup.removeClass("hidden")},updateSectionAgent:function(e){const t=this.model.get("scanner");this.model.set("agent",e),this.agentSettingsRegion.close();const r=this.model.agents.get(e);if(r){const n=r.get("languages"),i=this.model.get("language"),s=this.getSectionType();if(!n.get(i)){let e=n.findWhere({default:!0});e||2!==i.search("-")||(e=n.get(i.substr(0,2))),e||(e=n.get(s.defaultLanguage)||n.first()),this.model.set("language",e.get("code"))}if(this.model.agentSettings=null,this.populateSectionAgentSettings().then(a().bind(this.renderSectionAgentSettings,this)),this.model.settings=null,this.populateSectionSettings().then(a().bind(this.renderSectionSettings,this)),e===s.mutual.agent)this.model.set("scanner",s.mutual.scanner),this.renderSectionScanner();else if(this.model.get("scanner")===s.mutual.scanner){const e=this.model.scanners.find((e=>e.get("name")!==t));this.model.set("scanner",e.get("name")),this.renderSectionScanner()}}this.showValidationResult(this.validate(this.model))},onEditSectionAgentChange:function(e){const t=i()(e.currentTarget).val();this.updateSectionAgent(t)},onEditSectionScannerChange:function(e){const t=i()(e.currentTarget).val(),r=this.model.get("agent"),n=this.getSectionType();if(this.model.set("scanner",t),t===n.mutual.scanner)this.updateSectionAgent(n.mutual.agent),this.renderSectionAgent();else if(this.model.get("agent")===n.mutual.agent){const e=this.model.agents.find((e=>e.get("identifier")!==r));this.updateSectionAgent(e.get("identifier")),this.renderSectionAgent()}this.showValidationResult(this.validate(this.model))},onAgentsPopulate:function(){this.renderSectionAgent()},onScannersPopulate:function(){this.renderSectionScanner()},onThumbnailsDeleteClick:function(e){e.preventDefault(),M.c.execute("deleteSectionThumbnails",{section:this.model}).done(this.whenRendered((function(){this.ui.thumbnailsCheckbox.prop("checked",!1)})))}});var Y=r(76104),X=r.n(Y);const J=H.extend({template:X()});var Z=r(70516),ee=r.n(Z);const te=T.c.ItemView.extend({template:ee(),className:"row",events:{"click .remove-path-btn":"onRemovePathClick"},onRemovePathClick:function(e){e.preventDefault(),this.model.trigger("destroy",this.model,this.model.collection)}}),re=T.c.CollectionView.extend({itemView:te});var ne=r(5620),ie=r(53932),se=r(27772),ae=r.n(se);const oe=T.c.ItemView.extend({tagName:"li",className:"striped-list-item browse-directory-list-item disabled",template:ae(),serializeData:function(){return{filePath:this.model.toJSON()}}});var ce=r(38104),le=r.n(ce);const de=T.c.CompositeView.extend({template:le(),itemView:oe,itemViewContainer:".js-file-list-items",bindings:{".js-file-list-truncated-message":{modelAttribute:"truncatedFilesCount",formatter:e=>e?(0,b.c)("and {truncatedFilesCount} more",{truncatedFilesCount:e}):null}}});var ue=r(60648),pe=r.n(ue);const me=T.c.ItemView.extend({tagName:"li",className:"striped-list-item browse-directory-list-item",template:pe(),ui:{link:"a",spinner:".loading"},serializeData:function(){return{filePath:this.model.toJSON(),isRoot:!this.model.parent}},select:function(e){this.ui.link.addClass("selected"),this.ui.spinner.toggleClass("hidden",!e)},unselect:function(){this.ui.link.removeClass("selected"),this.ui.spinner.addClass("hidden")}}),he=T.c.CollectionView.extend({tagName:"ul",className:"list browse-directory-list",itemView:me,selectedFilePath:null,events:{"click a":"onDirectoryClick"},collectionEvents:{reset:"onReset"},startLoadingItem:function(e){this.selectedFilePath&&this.unselectItem(this.selectedFilePath),this.selectedFilePath=e;const t=this.children.findByModel(e);t&&t.select(!0)},stopLoadingItem:function(e){const t=this.children.findByModel(e);t&&t.select(!1)},unselectItem:function(e){this.selectedFilePath=null;const t=this.children.findByModel(e);t&&t.unselect()},onReset:function(){this.parentFilePath&&this.collection.add(this.parentFilePath,{at:0})},onDirectoryClick:function(e){e.preventDefault();const t=i()(e.currentTarget).data("key"),r=this.collection.get(t)||this.parentFilePath;this.trigger("change:path",r),this.options.isRoot||(r.parent.parent?(this.parentFilePath=r.parent.parent.clone(),this.parentFilePath.set({title:".. [Back]",isBackShortcut:!0})):this.parentFilePath=null)}});var ye=r(74436),ge=r(93708),fe=r.n(ge);const ve=ye.c.extend({name:"addFolderModal",className:"add-folder-modal modal fade",template:fe(),events:a().extend({"submit form":"onSubmitForm"},ye.c.prototype.events),ui:{path:'input[name="path"]'},regions:{rootList:".home-directory-container",childrenList:".path-container",childrenFileList:".file-container"},initialize:function(e){ye.c.prototype.initialize.apply(this,arguments),this.rootPathList=new ie.c({},{server:e.server,includeFiles:1}),this.childrenPathList=new ie.c({},{server:e.server,includeFiles:1}),this.loadRootPaths()},loadRootPaths:function(){this.rootPathList.fetch().done(this.whenRendered((function(){const e=this.rootPathList.get("paths").where({home:!0}),t=a().first(e)||this.rootPathList.get("paths").first();this.rootList.currentView.startLoadingItem(t),this.loadChildrenPaths(t)})))},loadChildrenPaths:function(e){ne.c.abortAll("addFolderModal");const t=e.get("children"),r=t.fetch({scope:"addFolderModal"});r.done(this.whenRendered((function(){this.ui.path.val(e.get("path")),this.childrenPathList.get("paths").reset(t.get("paths").models),this.childrenPathList.get("files").reset(t.get("files").models),this.childrenPathList.set("truncatedFilesCount",t.get("truncatedFilesCount"))}))),r.fail(this.whenRendered((function(){this.childrenList.currentView.unselectItem(e),h.c.trigger("show:alert",{type:"error",message:(0,b.c)("Unable to load contents of '{1}'",e.get("path"))})}))),r.always(this.whenRendered((function(){this.rootList.currentView.stopLoadingItem(e)})))},onRender:function(){ye.c.prototype.onRender.apply(this,arguments);const e=new he({isRoot:!0,collection:this.rootPathList.get("paths")}),t=new he({collection:this.childrenPathList.get("paths")}),r=new de({model:this.childrenPathList,collection:this.childrenPathList.get("files")});this.listenTo(e,"change:path",this.onRootPathChange),this.listenTo(t,"change:path",this.onChildrenPathChange),this.rootList.show(e),this.childrenList.show(t),this.childrenFileList.show(r)},onRootPathChange:function(e){this.childrenList.currentView.parentFilePath=null,this.rootList.currentView.startLoadingItem(e),this.loadChildrenPaths(e)},onChildrenPathChange:function(e){this.childrenList.currentView.startLoadingItem(e),this.loadChildrenPaths(e)},onSubmitForm:function(e){e.preventDefault(),this.trigger("add:folder",this.ui.path.val()),this.hide()}});var be=r(1356),Se=r.n(be),Pe=Object.defineProperty,Ie=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Te=H.extend({template:Se(),fieldNames:["Location"],regions:{pathsRegion:".paths-region"},ui:(De=((e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&Me(e,r,t[r]);if(we)for(var r of we(t))Oe.call(t,r)&&Me(e,r,t[r]);return e})({},H.prototype.ui),ke={addFolderBtn:".add-folder-btn",addFolderPopulating:".add-folder-populating",addFolderError:".add-folder-error"},Ie(De,Ee(ke))),events:{"click .add-folder-btn":"onAddFolderClick","change input[name=path]":"onFolderChange"},onlyAfterRender:["renderSectionLocation"].concat(H.prototype.onlyAfterRender),initialize:function(){this.listenTo(this.model.get("locations"),{add:this.onCollectionChange,remove:this.onCollectionChange}),this.renderSectionLocation(),this.showValidationResult(this.validate(this.model))},validate:function(e){const t=[];return e.get("locations").length||t.push("locations"),t},renderSectionLocation:function(){const e=new re({collection:this.model.get("locations")});this.pathsRegion.show(e)},onCollectionChange:function(){this.showValidationResult(this.validate(this.model))},onAddFolderClick:function(e){e.preventDefault();const t=new ve({server:this.model.server});this.listenToOnce(t,"add:folder",this.onAddFolder),h.c.trigger("show:modal",t)},onAddFolder:function(e){if(!e)return;const t={path:e};this.model.get("locations").findWhere(t)||this.model.get("locations").add(t)},onFolderChange:function(e){const t=i()(e.currentTarget),r=t.prop("defaultValue"),n=t.val();n?(this.model.get("locations").findWhere({path:r}).set("path",n),t.prop("defaultValue",n)):t.val(r)}});var De,ke;const xe=Te;var Ae=r(9852),Re=r(85148),Ne=r.n(Re);const Le=ye.c.extend({name:"plexPassModal",template:Ne(),serializeData:function(){return{plexPassUrl:(0,Ae.ci)("/plex-pass"),escapedFriendlyName:a().escape(this.model.get("friendlyName")),isClaimed:this.model.get("isClaimed")}}});var je=r(27160),Ue=r.n(je);const Fe=H.extend({template:Ue(),ui:{chooseLibrary:".choose-library"},events:{"click .choose-library":"onChooseLibraryClick"},modelEvents:{"change:agent":"onSectionAgentChange","change:scanner":"onSectionScannerChange"},onlyAfterRender:["updateSelectedOffering"],initialize:function(){this.hasPremiumMusic=this.model.server.hasOwnerFeature("premium_music_metadata"),this.updateSelectedOffering()},serializeData:function(){return{hasPremiumMusic:this.hasPremiumMusic,plexPassUrl:(0,Ae.ci)("/plex-pass"),hasLyrics:this.model.server.get("transcoderLyrics")}},updateSelectedOffering:function(){const e=this.model.get("agent"),t=this.model.get("scanner");this.ui.chooseLibrary.find("input").prop("checked",!1);let r=this.ui.chooseLibrary.filter('[data-agent="'+e+'"][data-scanner="'+t+'"]').find("input");r.length||(r=this.ui.chooseLibrary.not("[data-agent][data-scanner]").find("input")),r.prop("checked",!0)},onChooseLibraryClick:function(e){const t=i()(e.currentTarget),r=t.data("agent"),n=t.data("scanner");!r&&!n||this.hasPremiumMusic?(this.model.agentSettings=null,this.model.set({agent:r||this.getSectionType().defaultAgent,scanner:n||this.getSectionType().defaultScanner})):h.c.trigger("show:modal",new Le({model:this.model.server}))},onSectionAgentChange:function(){this.updateSelectedOffering()},onSectionScannerChange:function(){this.updateSelectedOffering()}});var Ve=r(42728),_e=r(50684),We=r(43076),Be=r(96096),He=r(3520),ze=r(69820),Ge=r(67520),qe=r(65988),Ke=r(32096);const Qe=function(e){switch(e){case I.GG:return Be.default;case I.y6:return He.default;case I._q:return ze.default;case I.TV:return Ge.default;case I.WK:return qe.default;case I.ge:return Ke.default}};var $e=r(9644),Ye=r.n($e),Xe=Object.defineProperty,Je=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,nt=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function it(e,t){return(null==e?void 0:e.key)!==I.ge||t.get("audiobook")}const st=H.extend({template:Ye(),ui:a().extend({sectionTypes:".wizard-block",sectionTitle:"#edit-section-title",sectionLanguage:"#edit-section-language",sectionLanguageGroup:".language-group"},H.prototype.ui),modelEvents:{"change:type":"onSectionTypeChange","change:title":"onSectionTitleChange","change:language":"onSectionLanguageChange"},events:{"click .section-type":"onSectionTypeClick","keyup #edit-section-title":"onEditSectionTitleChange","change #edit-section-title":"onEditSectionTitleChange","change #edit-section-language":"onEditSectionLanguageChange"},onlyAfterRender:["renderSectionLanguage","updateSectionTypesWizardBlocks","updateSectionLanguage","updateSectionTitle"].concat(H.prototype.onlyAfterRender),initialize:function(e){this.populateCollections(),this.isDefaultSection=e.isDefaultSection},serializeData:function(){const e=H.prototype.serializeData.apply(this,arguments),t=o.WI("appModel").get("user").get("features").get(Ve.C);e.sectionTypes=I.cp.getAll().reduce(((e,r)=>((r.key!==I.ge||r.key===I.ge&&t)&&e.push(((e,t)=>Je(e,Ze(t)))(((e,t)=>{for(var r in t||(t={}))tt.call(t,r)&&nt(e,r,t[r]);if(et)for(var r of et(t))rt.call(t,r)&&nt(e,r,t[r]);return e})({},r),{typeIcon:(0,We.c)(Qe(r.key))})),e)),[]);const r=this.getSectionType();r&&(e.currentSectionKey=r.key);const n=this.model.get("updatedAt");return n&&(e.updatedAt=(0,_e.c)(n)),e.canChangeType=this.model.isNew()&&!this.isDefaultSection,e.hasType=!!this.model.get("type"),e.isInitialTypeSupported=it(this.model.sectionType,this.model.server),e.escapedUpdatedAt=a().escape(e.updatedAt),e},validate:function(e){const t=[];return e.get("type")||t.push("type"),e.get("title")||t.push("title"),e.get("language")||t.push("language"),e.get("isCollectionsPopulated")||t.push("collectionsNotPopulated"),it(e.sectionType,e.server)||t.push("unsupportedType"),t},populateCollections:function(){this.model.set("isCollectionsPopulated",!1);const e=this.populateAgents(),t=this.populateScanners(),r=this.getSectionType();let n=i().when(r,e,t,this.model.server.get("myPlexSubscription")&&this.model.server.supports("premiumMusic"));return this.model.isNew()&&(n=n.then(a().bind(this.model.setAgentAndScanner,this.model))),n=n.then(e).then(a().bind(this.onAgentsPopulate,this)).then(a().bind((function(){this.showValidationResult(this.validate(this.model))}),this)).then((()=>{this.model.set("isCollectionsPopulated",!0)})),n},renderSectionLanguage:function(){let e=this.model.get("language");const t=this.model.agents.get(this.model.get("agent"));if(!t)return void this.ui.sectionLanguageGroup.hide();const r=t.get("languages");if(!r.get(e)){const t=r.findWhere({default:!0});let n;if(t&&(n=t.get("code")),!n){const e=this.model.get("type");n=I.cp.get(e).defaultLanguage}this.model.set("language",n,{silent:!0}),e=n}const n=r.map((function(e){return{label:e.get("name"),value:e.id}}));this.updateSectionLanguage(),this.ui.sectionLanguage.html(this.createMenuOptions(n,e))},updateSectionTypesWizardBlocks:function(){this.ui.sectionTypes.removeClass("selected"),this.ui.sectionTypes.filter('[data-key="'+this.model.get("type")+'"]').addClass("selected"),this.$el.addClass("section-type-chosen")},updateSectionLanguage:function(){this.ui.sectionLanguage.val(this.model.get("language"))},updateSectionTitle:function(){const e=this.ui.sectionTitle.val(),t=this.model.get("title");e!==t&&this.ui.sectionTitle.val(t)},onSectionTypeClick:function(e){e.preventDefault();const t=i()(e.currentTarget);if(!t.hasClass("selectable"))return;const r=t.data("key"),n={type:r},s=I.cp.get(r);this.model.get("title")||(n.title=s.title),this.model.set(n)},onEditSectionTitleChange:function(e){const t=i()(e.currentTarget);this.model.set("title",t.val()),this.showValidationResult(this.validate(this.model))},onEditSectionLanguageChange:function(e){const t=i()(e.currentTarget);this.model.set("language",t.val()),this.showValidationResult(this.validate(this.model))},onSectionTypeChange:function(e,t){this.updateSectionTypesWizardBlocks();const r=I.cp.get(t);if(!this.model.get("language")){const e=r.defaultLanguage;this.model.set("language",e)}const n=this.model.get("title"),i=this.model.previous("type"),s=I.cp.get(i),a=s&&s.title;n&&n!==a||this.model.set("title",r.title),this.setSectionType(r),this.model.agents=null,this.model.scanners=null,this.model.settings=null;const o=it(r,this.model.server);this.$el.toggleClass("is-type-unsupported",!o),o&&this.populateCollections()},onSectionTitleChange:function(e,t){this.updateSectionTitle(),this.showValidationResult(this.validate(this.model))},onSectionLanguageChange:function(e,t){this.updateSectionLanguage()},onAgentsPopulate:function(e){this.renderSectionLanguage()}}),at=st;var ot=r(59044),ct=r(52072),lt=r.n(ct);const dt=ye.c.extend({mixins:[C.c],name:"editSectionModal",className:"edit-section-modal modal modal-lg fade",template:lt(),panes:{type:{constructor:at,nextPane:"folders",dependentPanes(){return this.showFolders?["folders"]:["options","advanced"]}},folders:{constructor:xe,nextPane:"options",dependentPanes:["options","advanced"]},options:{constructor:Fe,nextPane:"advanced"},advanced:{constructor:$},error:{constructor:J}},panesModel:"tempModel",ui:{sidebar:".modal-nav-list",optionsBtn:".options-btn",saveBtn:".save-btn",message:".form-message",headerSectionType:".section-type-title"},regions:{paneRegion:".pane-region"},events:a().extend({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onSaveClick","submit .edit-section-type-form":"onGeneralFormSubmit"},ye.c.prototype.events),onlyAfterRender:["showPane","updateMessage","updateSectionTitle","updateSectionTitleDestabilized","updateSaveBtn"],paneConstructorArg:function(){return{isDefaultSection:this.isDefaultSection}},initialize:function(e){ye.c.prototype.initialize.apply(this,arguments),this.server=e.server,this.redirect=e.redirect,this.isDefaultSection=e.isDefaultSection,this.isLoading=!0,this.model?(this.tempModel=this.model.clone(),this.tempModel.collection=this.model.collection):this.tempModel=new c.c({},{server:this.server,collection:this.server.get("sections")}),this.listenTo(this.tempModel,"change:type",this.onSectionTypeChange),this.tempModel.isNew()&&e.seedAttrs&&this.tempModel.set(this.tempModel.parse(e.seedAttrs)),this._deferred=i().Deferred(),this.promise=this._deferred.promise();const t=this.server.get("providers");t.populate().done(this.whenRendered((()=>{const r=t.get(m.Qh).get("features").get(p.c.MANAGE).get("automaticLibraryFolders");this.showFolders=!r,this.isLoading=!1,this.render(),this.showPane(e.selectedPane||"type")})))},serializeData:function(){const e=this.tempModel,t=e.isNew(),r=e&&(0,b.s)("Edit {1}",e.get("title"));return{isLoading:this.isLoading,add:t,edit:!t,paneTitle:r,section:null==e?void 0:e.toJSON(),selectedPane:this.selectedPane,showFolders:this.showFolders}},updateMessage:function(e){this.ui.message.text(e||"")},updateSaveBtn:function(){const e=this.ui.saveBtn,t=this.panes[this.selectedPane],r=a().bind((function(r){const n=t.nextPane,i=this.tempModel.isNew(),s=!t.constructor.prototype.validate||0===t.constructor.prototype.validate(this.tempModel).length,a=!this.getReachablePanes().isAnyInvalid,o=this.tempModel.get("isCollectionsPopulated");let c;this.ui.optionsBtn.toggleClass("hidden",!r.showOptions);const l=o&&(a||i&&s);c=n,r.showOptions||"options"!==n||(c=!1),a&&(c=!1),r.showOptions&&"options"===n&&(c=!0),r.showAdvanced&&"advanced"===n&&(c=!0),this.tempModel.isNew()&&"folders"===n&&(c=!0),e.toggleClass("save",!c),e.toggleClass("next",!!c),e.toggleClass("disabled",!l)}),this),n=this.tempModel.server,i=this.tempModel.sectionType,s=i&&"music"===i.key&&n.supports("premiumMusic"),o=this.tempModel.isNew();s?this.paneRegion.currentView.populateAgents().then((function(e){const t=e.findWhere({identifier:u.mc}),n=o&&t;r({showOptions:n,showAdvanced:n})})):r({})},updateSectionTitle:function(){const e=I.cp.get(this.tempModel.get("type"));if(e){this.updateSectionTitleDestabilized();const t=a().escape(e.title);this.ui.headerSectionType.html(t)}},updateSectionTitleDestabilized:function(){this.ui.headerSectionType.addClass("section-type-title-unstable"),this.ui.headerSectionType.triggerReflow(),this.ui.headerSectionType.removeClass("section-type-title-unstable")},save:function(){const e=this.ui.saveBtn;this.updateMessage(""),e.addClass("active");const t=this.saveModel();t.always((function(){e.removeClass("active")})),t.fail(a().bind((function(e){503===e.status?h.c.trigger("show:modal",new ot.c({model:this.server})):this.updateMessage((0,b.c)("Your changes could not be saved."))}),this)),t.then(a().bind((function(){const e=this.model.server.entityID(),t=(0,o.WI)("appStore").dispatch;if(t((0,d.vH)({serverEntityID:e})),t((0,d.EH)({serverEntityID:e})),!this.redirect)return this._deferred.resolve(),void this.hide();const r={machineIdentifier:this.model.server.get("machineIdentifier"),isCloud:this.model.server.get("isCloud")},n={identifier:m.Qh,isLibraryProvider:!0},i={id:this.model.id},s=this.model.get("type"),a={};a.pivot=(0,y.c)(this.model.server.get("version"),l.default.pivotIDs)?"library":(0,f.c)(this.model.id,s),s===P.iI&&(a.key=E.c.join(["/library/sections",this.model.id,"all"],{type:(0,P.GG)(P.ec).id,sort:"addedAt:desc"}));const c=(0,w.c)(r,n,i,a);window.location.hash=c,this._deferred.resolve(),this.hide()}),this))},saveModel:function(){const e=this.getSectionSettingsParams(),t=e?{data:{prefs:e}}:{};let r;return this.tempModel.isNew()?(r=this.tempModel.save(null,t),r=r.then(a().bind((function(t,r,n){let i=g.c.parseXML(t);if(201!==n.status)return;if(i.Directory&&(i=i.Directory),!i.key){const e=n.getResponseHeader("Location");e&&(i.key=e.substring(e.lastIndexOf("/")+1))}const s=this.server;s.supports("advancedFilters")&&(i.filters=!0),this.model=new c.c(i,{parse:!0,server:s}),s.get("sections").add(this.model);const a=null==e?void 0:e.hidden,l="string"==typeof a?parseInt(a,10):null;if(1!==l&&2!==l){const e=s.get("providers").get(m.Qh),t=e?(0,S.c)(e.toJSON(),this.model.toJSON()):null,r=t?t.key:null;e&&r&&(0,o.WI)("appStore").dispatch((0,O.Nl)({sources:[{key:(0,v.c)(r,s.get("machineIdentifier"),e.get("identifier"),i.key),sourceType:r,serverEntityID:s.entityID(),machineIdentifier:s.get("machineIdentifier"),providerEntityID:e.entityID(),providerIdentifier:e.get("identifier"),providerMetricsIdentifier:e.get("metricsIdentifier"),directoryID:i.key,directoryIcon:null,title:this.model.get("title"),serverFriendlyName:s.get("friendlyName"),serverSourceTitle:s.get("sourceTitle"),isLocal:s.get("isPrivateConnection"),isUnavailable:!1,isOutOfDate:!1,isUnclaimedServer:!s.get("isClaimed"),isFullOwnedServer:s.get("isFullOwnedServer"),isProviderReady:!0}],interaction:!1}))}return n}),this))):(this.model.copy(this.tempModel),r=this.model.save(null,t)),r=r.then(a().bind(this.saveAgentSettings,this)),r},saveSettings:function(e){const t=i().Deferred().resolve(this.model).promise();if(!this.server.supports("sectionSettings"))return t;if(!e)return t;const r=E.c.join(["/library/sections/",this.model.id,"/prefs"],e),n=a().extend(this.server.getXHROptions(r),{type:"PUT"});return i().ajax(n).promise().then((function(){return t}))},saveAgentSettings:function(){const e=i().Deferred().resolve(this.model).promise(),t=this.tempModel.agentSettings;if(!this.tempModel.agentSettings)return e;const r=this.getSettingsChanges(t);if(a().isEmpty(r))return e;const n=t.first(),s=n.getSaveParams(r),o=a().result(t,"url"),c=E.c.join([o,"/set"],s),l=n.server.getXHROptions(c);return i().ajax(l).promise().then((function(){return e}))},getSectionSettingsParams:function(){const e=this.tempModel.settings;if(!e)return;const t=this.getSettingsChanges(e);return a().isEmpty(t)?void 0:e.first().getSaveParams(t)},getSettingsChanges:function(e){return e.filter((function(e){return e.changedAttributes()})).reduce((function(e,t){let r=t.get("value");return"bool"===t.get("type")&&(r=r?"1":"0"),e[t.get("id")]=r,e}),{})},onPaneShow:function(e,t){this.listenTo(t,"valid",this.updateSaveBtn),this.listenTo(t,"invalid",this.updateSaveBtn),this.updateSaveBtn()},onPaneHide:function(e,t){this.stopListening(t,"valid",this.updateSaveBtn),this.stopListening(t,"invalid",this.updateSaveBtn)},onChangePaneClick:function(e){e.preventDefault();const t=this.$(e.currentTarget);t.isDisabled()||this.showPane(t.data("pane"))},onSaveClick:function(e){e.preventDefault();const t=this.ui.saveBtn;if(!t.isDisabled())if(t.hasClass("next")){let e=this.panes[this.selectedPane].nextPane;"folders"!==e||this.showFolders||(e=this.ui.sidebar.find(".options-btn").isDisabled()?"advanced":"options"),e&&!this.ui.sidebar.find("."+e+"-btn").isDisabled()&&this.showPane(e)}else this.save()},onGeneralFormSubmit:function(e){this.onSaveClick(e)},onSectionTypeChange:function(){this.updateSaveBtn()}})},93596:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(95720),i=r.n(n),s=r(62924),a=r(43076),o=r(74436),c=r(71312),l=r.n(c);const d=/^Mac/.test(window.navigator.platform);function u(e){return i().reduce(e,(function(e,t,r){const n=p(t);if(0===r)return e.concat(n);const i=n.length>1;return e.concat({plain:!0,split:i,s:"or"},n)}),[])}function p(e){const t=e.match(/(.+) (.+)/);if(t)return p(t[1]).concat({plain:!0,s:"then"}).concat(p(t[2]));const r=e.match(/(.+)\+(\S+)/);if(r)return p(r[1]).concat({plain:!0,s:"+"}).concat(p(r[2]));const n=[[/command/,""],[/up/,""],[/down/,""],[/left/,""],[/right/,""]];return"alt"===e&&d&&n.push([/alt/,"option"]),[{s:i().reduce(n,(function(e,t){return e.replace(t[0],t[1])}),e)}]}const m=o.c.extend({name:"keyboardShortcutsModal",className:"keyboard-shortcuts-modal modal fade",template:l(),orderedGroups:[{group:"navigation",label:"Navigation"},{group:"actions",label:"Actions"},{group:"player",label:"Player"}],initialize:function(e){o.c.prototype.initialize.apply(this,arguments),this.shortcuts=e.shortcuts},serializeData:function(){const e={};return i().each(this.shortcuts,(function(t){const r=t.group;"function"==typeof t.isSupported&&!t.isSupported()||t.visible&&!t.visible()||(e[r]||(e[r]=[]),e[r].push(this.humanizeShortcut(t)))}),this),{groups:i().map(this.orderedGroups,(function(t){const r=i().clone(t);return r.shortcuts=e[t.group],r}),this),keyboardIcon:(0,a.c)(s.default)}},humanizeShortcut:function(e){return(e=i().clone(e)).keys=u(e.keys),e.label=e.label(),e}})},59044:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(95720),i=r.n(n),s=r(59501),a=r(74436),o=r(69468),c=r(28664),l=r.n(c);const d=a.c.extend({name:"libraryFailureModal",className:"confirm-modal modal modal-sm fade",template:l(),events:i().extend({"click .confirm-btn":"hide"},a.c.prototype.events),serializeData(){return{isSignedIn:this.model.get("myPlexSigninState")===s.C1,hasPlexSubscription:this.model.get("myPlexSubscription"),serverSettingsRoute:(0,o.c)(this.model.id,"settings","general")}}})},81543:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(74436);const c=o.c.extend({className:"select-modal modal modal-sm fade",events:a().extend({"click a":"onClick"},o.c.prototype.events),initialize:function(){o.c.prototype.initialize.apply(this,arguments),this.promise=i().Deferred()},onRender:function(){o.c.prototype.onRender.apply(this,arguments)},onHide:function(){o.c.prototype.onHide.apply(this,arguments),this.promise.reject()},onClick:function(e){e.preventDefault(),this.promise.resolve(i()(e.currentTarget).data("value")),this.hide()}})},97360:(e,t,r)=>{"use strict";r.d(t,{c:()=>J});var n=r(37588),i=r.n(n),s=r(13604),a=r(9424),o=r(74844),c=r(60976),l=r(95720),d=r.n(l),u=r(71832),p=r(87228);const m=u.c.extend({idAttribute:"title",whitelistedAttrs:["title","selected"],convert:function(e){const t=d().isObject(e)?e:p.c.parseXML(e);return p.c.parseBoolean(t,"selected"),t},parse:function(e){let t=this.convert(e);return t=d().pick(t,this.whitelistedAttrs),t}}),h=o.c.extend({model:m,url:"/clients/profiles?type="+c.c.LOCAL,parse:function(e){return this.convert(e,"Profile")}}),y=u.c.extend({name:"VersionTargetModel",whitelistedAttrs:["id","tag","tagType","MediaSettings","Device"],convert:function(e){const t=d().isObject(e)?e:p.c.parseXML(e);return p.c.parseInteger(t,"id"),t},parse:function(e){let t=this.convert(e);return t=d().pick(t,this.whitelistedAttrs),t}}),g=o.c.extend({model:y,url:"/library/tags?type="+c.c.LOCAL,comparator:function(e){return e.get("MediaSettings").maxVideoBitrate},parse:function(e){return this.convert(e,"Tag")}});var f=r(74436),v=r(44060),b=r(8e4),S=r.n(b);const P=v.c.ItemView.extend({className:"modal-body",template:S(),events:{"click .try-again-link":"onTryAgainClick"},serializeData:function(){return{status:this.options.status}},onTryAgainClick:function(e){e.preventDefault(),this.triggerMethod("request:state","loading")}});var I=r(65668),E=r(15568),w=r(56792),C=r(49048),O=r(59396),M=r(54672),T=r(41304),D=r.n(T);const k=v.c.ItemView.extend({className:"convert-location-container form-group",template:D(),events:{"change select[name=storageLocation]":"onLocationChange"},serializeData:function(){var e;return{disableLocation:!this.model.isNew(),selectedLocationID:this.model.get("locationID"),locations:null==(e=this.model.section)?void 0:e.get("locations").toJSON()}},onLocationChange:function(e){this.model.set("locationID",parseInt(e.currentTarget.value,10))}});var x=r(40604),A=r(12612),R=r(75432),N=r.n(R);const L=v.c.ItemView.extend({className:"convert-policy-container",template:N(),ui:{policyUnwatchedInput:"#convert-policy-unwatched",policyScopeInput:"#convert-policy-scope",policyValueInput:"#convert-policy-value",policyWarning:".convert-warning"},events:{"change input[name=policyUnwatched]":"onPolicyUnwatchedChange","change input[name=policyScope]":"onPolicyScopeChange","keyup input[name=policyValue]":"onPolicyValueChange","change input[name=policyValue]":"onPolicyValueChange"},initialize:function(){this.type=(0,A.GG)(this.model.get("metadataType")||"movie"),this.leafMediaType=(0,A.wH)(this.type.typeString).mediaType,this.model.setPolicyDefaultsFor(this.leafMediaType)},serializeData:function(){const e={isSync:this.options.isSync,isDirectory:this.model.get("isDirectory"),policy:this.model.get("policy").toJSON()};return e.showLimitWarning=this.model.shouldShowPolicyWarning(this.leafMediaType,e.policy.value),e.showUnwatched=e.isDirectory&&this.leafMediaType===x.im,e},updatePolicyValue:function(){const e=this.model.get("policy");let t=Math.abs(parseInt(this.ui.policyValueInput.val(),10));this.ui.policyValueInput.val(d().isNaN(t)?"":t),d().isNaN(t)&&(t=0),e.set("value","all"===e.scope?null:t);const r=this.model.shouldShowPolicyWarning(this.leafMediaType,t);this.ui.policyWarning.toggleClass("hidden",!r)},onPolicyUnwatchedChange:function(){this.model.get("policy").set("unwatched",this.ui.policyUnwatchedInput.prop("checked"))},onPolicyScopeChange:function(){const e=this.model.get("policy"),t=this.ui.policyScopeInput.prop("checked")?this.ui.policyScopeInput.val():"all";e.set("scope",t),this.updatePolicyValue()},onPolicyValueChange:function(){this.updatePolicyValue()}});var j=r(39835),U=r(57284),F=r.n(U);const V=v.c.ItemView.extend({className:"convert-target-container form-group",template:F(),ui:{targetTitleInput:".convert-target-title"},events:{"change select[name=target]":"onTargetChange","keydown input[name=targetTitle]":"onTitleKeyDown","change input[name=targetTitle]":"onTitleChange","change select[name=targetProfile]":"onProfileChange","change select[name=targetQuality]":"onQualityChange"},initialize:function(e){this.targets=e.targets,this.profiles=e.profiles;const t=this.model.get("Device").profile;this.selectedProfile=t?this.profiles.get(t):this.profiles.findWhere({selected:!0}),this.availableCustomQualities=j.c.getAvailableQualities({lowestQualityIndex:2}).reverse();const r=this.model.get("mediaSettings").get("maxVideoBitrate");if(r){const e=j.c.getNearestIndexToBitrate(r);this.selectedCustomQuality=j.c.getQualityByIndex(e)}else this.selectedCustomQuality=d().first(this.availableCustomQualities);this.model.isNew()||this.model.get("targetTagID")||this.$el.addClass("show-custom-target")},serializeData:function(){return{item:this.model.toJSON(),targets:this.targets.toJSON(),disableTarget:!this.model.isNew(),profiles:this.profiles.toJSON(),selectedProfile:this.selectedProfile.toJSON(),availableCustomQualities:this.availableCustomQualities,selectedCustomQuality:this.selectedCustomQuality}},updateDeviceProfile:function(){this.model.get("Device").profile=this.selectedProfile.get("title")},updateMediaSettings:function(e){this.model.get("mediaSettings").set({videoQuality:e.videoQuality,videoResolution:e.videoResolution,maxVideoBitrate:e.bitrate})},onTargetChange:function(e){const t=parseInt(e.currentTarget.value,10);t>-1?(this.model.unset("target"),this.model.set({targetTagID:t,Device:{}}),this.model.get("mediaSettings").restoreDefaults()):(this.model.set("target",this.ui.targetTitleInput.val()),this.model.unset("targetTagID"),this.updateDeviceProfile(this.selectedProfile),this.updateMediaSettings(this.selectedCustomQuality)),this.$el.toggleClass("show-custom-target",-1===t)},onTitleKeyDown:function(e){190===e.which&&0===e.currentTarget.selectionStart&&e.preventDefault()},onTitleChange:function(e){this.model.set("target",e.currentTarget.value)},onProfileChange:function(e){this.selectedProfile=this.profiles.findWhere({title:e.currentTarget.value}),this.updateDeviceProfile(this.selectedProfile)},onQualityChange:function(e){const t=parseInt(e.currentTarget.value,10);this.selectedCustomQuality=j.c.getQualityByIndex(t),this.updateMediaSettings(this.selectedCustomQuality)}});var _=r(34072),W=r.n(_);const B=v.c.Layout.extend({template:W(),ui:{submitBtn:".submit-btn"},regions:{policyRegion:".policy-region",targetsRegion:".targets-region",locationRegion:".location-region"},events:{"change input[name=title]":"onTitleChange","submit #convert-form":"onSubmit"},initialize:function(e){if(this.playlist=e.playlist,this.targets=e.targets,this.profiles=e.profiles,this.model){this.tempModel=this.model.clone();const e=this.model.get("Location").librarySectionID;if(e){const t=new I.c({key:e},{server:this.model.server,onlyIfCached:!0});d().isEmpty(t)||(this.tempModel.section=t)}}else{const t=e.item,r=e.items,n=t.has("childrenKey")?new E.c({containerKey:t.get("childrenKey")},{server:t.server,provider:t.provider}):t,i=t.server;let s;if(t.get("isSection"))s=t;else{const e=(0,C.c)(t);d().isEmpty(e)||(s=e)}this.tempModel=new M.c({title:w.c.title(t,{items:r}),targetTagID:this.targets.first().id,Location:{uri:w.c.uri(n,{items:r})}},{server:i,section:s})}},serializeData:function(){return{conversionItem:this.tempModel.toJSON(),isNew:this.tempModel.isNew(),showRemuxOnlyWarning:this.tempModel.server.get("transcoderVideoRemuxOnly")}},onRender:function(){this.policyRegion.show(new L({model:this.tempModel,isSync:!1})),this.targetsRegion.show(new V({model:this.tempModel,targets:this.targets,profiles:this.profiles})),this.locationRegion.show(new k({model:this.tempModel}))},onTitleChange:function(e){this.tempModel.set("title",e.currentTarget.value)},onSubmit:function(e){e.preventDefault();const t=this.ui.submitBtn;if(t.hasClass("active"))return;if(t.addClass("active"),!this.tempModel.get("targetTagID")&&!this.tempModel.get("target")){const e=this.tempModel.get("Device");this.tempModel.set("target",(0,O.c)("Custom: {1}",e.profile))}const r=this.playlist.addContent(this.tempModel);r.done(this.whenRendered((function(){if(this.model){const e=d().omit(this.tempModel.toJSON(),"children");this.model.set(this.model.parse(e))}this.trigger("request:nextState")}))),r.fail(this.whenRendered((function(e){const t=e.responseText,r=p.c.parseXML(t),n=null==r?void 0:r.status;this.trigger("request:state","error",n)})))}});var H=r(74092),z=r.n(H);const G=v.c.ItemView.extend({className:"modal-body loading-container",template:z()});var q=r(11420),K=r(35852),Q=r.n(K);const $=v.c.ItemView.extend({className:"modal-body",template:Q(),events:{"click .status-link":"onStatusClick"},onStatusClick:function(e){e.preventDefault(),this.triggerMethod("request:nextState"),(0,q.c)("serverSettings",{machineIdentifier:this.options.server.id,settingsSection:"status",settingsGroup:"conversion"})}});var Y=r(22352),X=r.n(Y);const J=f.c.extend({mixins:[s.c],name:"convertModal",className:"convert-modal modal fade",template:X(),regions:{bodyRegion:".modal-body-region"},initialize:function(e){f.c.prototype.initialize.apply(this,arguments),this.server=this.model?this.model.server:e.item.server;const t={server:this.server,allowInCache:!0};this.playlists=new a.c([],t),this.targets=new g([],t),this.profiles=new h([],t)},initialState:"loading",states:{loading:{nextState:"form",onEnter:function(){this.bodyRegion.show(new G),this.listenForStateRequests();const e=this.options.item,t=e&&!e.get("isMetadataList"),r=i().when(t?e.populate():null,this.playlists.populate(),this.targets.populate(),this.profiles.populate(),this.server.get("sections").populate());r.done(this.whenRendered((function(){this.playlist=this.playlists.first(),this.playlist?this.enterNextState():this.enterState("error")}))),r.fail(this.whenRendered((function(){this.enterState("error")})))}},form:{nextState:"success",onEnter:function(){this.bodyRegion.show(new B({model:this.model,item:this.options.item,items:this.options.items,playlist:this.playlist,targets:this.targets,profiles:this.profiles})),this.listenForStateRequests()}},success:{onEnter:function(){this.model?this.hide():(this.bodyRegion.show(new $({server:this.server})),this.listenForStateRequests())}},error:{onEnter:function(e){this.bodyRegion.show(new P({status:e})),this.listenForStateRequests()}}},listenForStateRequests:function(){var e;(null==(e=this.bodyRegion)?void 0:e.currentView)&&this.listenTo(this.bodyRegion.currentView,{"request:state":this.enterState,"request:nextState":this.enterNextState})},onRender:function(){f.c.prototype.onRender.apply(this,arguments),this.enterNextState()},onStateMachineComplete:function(){this.hide()}})},94368:(e,t,r)=>{"use strict";r.d(t,{c:()=>z});var n=r(37588),i=r.n(n),s=r(95720),a=r.n(s),o=r(52180),c=r(95600),l=r(74436),d=r(18465),u=r(12080),p=r.n(u);const m=d.c.extend({className:"user-select-alert-bar",template:p()});var h=r(43876),y=r(44060),g=r(8844),f=r(21248),v=r(59396),b=r(96504),S=r(50708),P=r(77224);const I=r(92331).c.extend({getUrl(e){if(e){const t=(0,P.c)();return b.c.join(e,{size:Math.round(this.width*t)})}return e}});var E=r(2088),w=r.n(E);const C=y.c.ItemView.extend({tagName:"li",className:"user-select-list-item",template:w(),ui:{container:".user-select-container",poster:".user-poster"},events:{"click a":"onClick"},initialize:function(e){this.disabled=e.disabled,this.posterImage=new I({model:this.model,type:"friend",width:80});const t=o.WI("appModel").get("primaryServer");(null==t?void 0:t.supports("imageFilters"))&&(this.backgroundImage=new I({model:this.model,type:"friend",width:120,background:!0,filters:{blur:20,opacity:50,background:"000000"}}),this.backgroundImage.placeholderClass=!1)},serializeData:function(){return{disabled:this.disabled}},bindings:{".username":{modelAttribute:"title"},".managed-title":{modelAttribute:"restrictionProfile",autohide:!0,formatter(e){const t=this.model.get("username"),r=this.model.get("title");return t&&r!==t?t:this.model.get("restricted")&&!this.model.get("guest")?e?S.Ub(e).title:(0,v.c)("Managed Account"):void 0}},".protected-icon":{modelAttribute:"protected",autohide:!0,manual:!0},".admin-icon":{modelAttribute:"admin",autohide:!0,manual:!0}},onRender:function(){this.posterImage.setElement(this.ui.poster),this.backgroundImage&&this.backgroundImage.setElement(this.ui.container)},onClose:function(){this.posterImage.close(),this.backgroundImage&&this.backgroundImage.close()},onClick:function(e){e.preventDefault(),this.trigger("selectUser",this.model)}});var O=r(76916),M=r.n(O);const T=y.c.Layout.extend({className:"user-select-modal-pin-container",template:M(),ui:{digitContainer:".pin-digit-container",input:".pin-input",digits:".pin-digit",loading:".loading",removeBtn:".remove-btn",saveBtn:".save-btn",pinForgotLink:".pin-forgot-link"},regions:{userList:".user-select-list"},events:{"keydown input":"onKeyDown","input input":"onInput","keyup input":"onKeyUp","focus input":"onFocus","blur input":"onBlur","change input":"onChange","animationend .pin-input-container":"onInputsAnimationEnd","webkitAnimationEnd .pin-input-container":"onInputsAnimationEnd","oAnimationEnd .pin-input-container":"onInputsAnimationEnd","click .back-btn":"onBackClick","click .remove-btn":"onRemoveClick","submit #pin-form":"onSubmit","click .pin-digit":"onPINClick","keydown .save-btn":"onSaveKeyDown"},onlyAfterRender:["confirmUser"],initialize:function(e){const t=o.WI("appModel");this.isForced=e.isForced,this.isEditing=e.isEditing,this.isEditWarning=e.isEditWarning,this.showBackButton=e.showBackButton,this.openAddManagedUser=e.openAddManagedUser,this.focusDelay=e.focusDelay,this.user=t.get("user"),this.isEditConfirmation=this.isEditing&&this.model.get("protected")&&!this.model.get("restricted")},serializeData:function(){return{isEditing:this.isEditing&&!this.isEditConfirmation,isEditWarning:this.isEditWarning,isEditConfirmation:this.isEditConfirmation,isOpeningAddManagedUser:this.openAddManagedUser,hasCurrentPIN:this.model.get("protected"),showBackButton:this.showBackButton}},focusInput:function(){this.ui.input.val(""),this.ui.input.focus()},getPIN:function(){return this.ui.input.val()},editPIN:function(e){this.ui.saveBtn.isDisabled()||(this.ui.saveBtn.addClass("disabled"),this.savePIN(e).fail(this.whenRendered((function(){this.ui.saveBtn.removeClass("disabled"),f.c.trigger("show:alert",{type:"error",message:(0,v.c)("This PIN could not be saved.")})}))))},removePIN:function(){this.ui.removeBtn.isDisabled()||(this.ui.removeBtn.addClass("disabled"),this.savePIN("").fail(this.whenRendered((function(){this.ui.removeBtn.removeClass("disabled"),f.c.trigger("show:alert",{type:"error",message:(0,v.c)("This PIN could not be removed.")})}))))},savePIN:function(e){this.ui.loading.removeClass("hidden");const t=this.model.get("restricted"),r=this.model.getSaveParams(),n={};this.currentPin&&(n.currentPin=this.currentPin),""===e&&t?n.removePin=1:n.pin=e;const s=i().extend(!0,{},r,n),o=b.c.join(this.model.pinUrl(),s),c=this.model.server.getXHROptions(o,{type:t?"POST":"PUT"}),l=i().ajax(c);return l.done(a().bind((function(){this.model.set("protected",!!e),this.model.id===this.user.id&&(e?this.user.set("pin",this.user.hashPIN(e)):this.user.unset("pin"),this.user.set("home",this.user.hasHome())),this.trigger("resolve",e)}),this)),l.always(this.whenRendered((function(){this.ui.loading.addClass("hidden")}))),l},confirmUser:function(e){this.ui.loading.removeClass("hidden");const t=h.c.execute("switchUser",{homeUser:this.model,pin:e,allowGuestLock:!this.isEditing,openAddManagedUser:this.openAddManagedUser});t.done(a().bind((function(){this.isEditing?(this.isEditConfirmation=!1,this.currentPin=e,this.render()):this.trigger("resolve",e)}),this)),t.fail(this.whenRendered((function(){this.ui.digitContainer.addClass("shake"),this.ui.input.val(""),this.focusInput()}))),t.always(this.whenRendered((function(){this.ui.loading.addClass("hidden")})))},renderPIN:function(){const e=this.getPIN(),t=e.length,r=this.isEditing&&!this.isEditConfirmation;this.ui.digits.each((function(n,s){let a=e[n]||"";a&&!r&&(a="&bull;"),i()(s).toggleClass("current",n===t).html(a)}))},onRender:function(){this.userList.show(new C({model:this.model,disabled:!0})),this.ui.pinForgotLink.toggleClass("hidden",this.model.get("restricted")),g.c.mobile||window.setTimeout(a().bind(this.focusInput,this),this.focusDelay)},onKeyDown:function(e){const t=e.which;13!==t&&8!==t&&46!==t&&229!==t&&(t>=48&&t<=57||t>=96&&t<=105||e.preventDefault())},onInput:function(e){const t=i()(e.currentTarget),r=t.val(),n=r.length,s=r.charAt(r.length-1);/[0-9]/.test(s)?4===r.length&&(!this.isEditing||this.isEditConfirmation?(t.blur(),this.confirmUser(this.getPIN())):this.ui.saveBtn.focus()):t.val(r.slice(0,n-1))},onKeyUp:function(){this.renderPIN()},onFocus:function(){this.renderPIN()},onBlur:function(){this.renderPIN(),this.ui.digits.removeClass("current")},onChange:function(){this.renderPIN()},onInputsAnimationEnd:function(e){i()(e.currentTarget).removeClass("shake")},onBackClick:function(e){e.preventDefault(),this.trigger("change:pane","users")},onRemoveClick:function(e){e.preventDefault(),this.removePIN()},onSubmit:function(e){e.preventDefault();const t=this.getPIN();4===t.length?this.isEditing&&!this.isEditConfirmation?this.editPIN(t):this.confirmUser(t):f.c.trigger("show:alert",{type:"error",message:(0,v.c)("Please enter a 4 digit PIN.")})},onSaveKeyDown:function(e){const t=e.which;8!==t&&46!==t||(e.preventDefault(),this.ui.input.val(""),this.focusInput())},onPINClick:function(){this.focusInput()}});var D=r(65080),k=r(8296),x=r(1692),A=r(40136),R=r(65800),N=r(43076),L=r(29392),j=r.n(L);const U=y.c.ItemView.extend({tagName:"li",className:"user-select-list-item",template:j(),events:{"click a":"onClick"},initialize(e){this.disabled=e.disabled},serializeData(){return{iconAdd:(0,N.c)(R.c,{className:"add-icon"}),disabled:this.disabled}},onClick(e){e.preventDefault(),this.trigger("selectUser",this.model,!0)}}),F=A.c.extend({tagName:"ul",className:"tile-list user-select-list",itemView:C,onRender(){this.options.showAddUser&&this.addItemView(this.options.adminModel,U,this.collection.length)}});var V=r(45052),_=r.n(V);const W=y.c.Layout.extend({className:"user-select-modal-users-container",template:_(),ui:{loading:".loading"},regions:{body:".modal-body"},onlyAfterRender:["onUserPopulated","onHomeUsersPopulated","onError"],initialize:function(){const e=o.WI("appModel");this.user=e.get("user"),this.homeUsers=this.user.get("homeUsers"),this.user.server.populate().done(a().bind(this.onUserPopulated,this)).fail(a().bind(this.onError,this))},showList:function(e){this.ui.loading.addClass("hidden");const t=e.findWhere({admin:!0});this.body.show(new F({collection:e,adminModel:t,showAddUser:!!t})),this.listenTo(this.body.currentView,"itemview:selectUser",this.onUserSelect)},selectUser:function(e,t){this.ui.loading.removeClass("hidden");const r=h.c.execute("switchUser",{homeUser:e,switchUser:!0,allowGuestLock:!0,openAddManagedUser:t});r.done(a().bind((function(){this.trigger("resolve",null)}),this)),r.always(this.whenRendered((function(){this.ui.loading.addClass("hidden")})))},onUserPopulated:function(){this.homeUsers.fetch().done(a().bind(this.onHomeUsersPopulated,this)).fail(a().bind(this.onError,this))},onHomeUsersPopulated:function(e){this.showList(e)},onError:function(){const e=D.c.getActiveUser();if(null==e?void 0:e.get("home")){const t={id:e.id,title:e.get("title"),protected:!!e.get("pin")};this.showList(new k.c([t],{server:this.user.server,parent:this.user}))}else this.user.set("lockState",x.Z9.Unlocked),this.trigger("resolve")},onUserSelect:function(e,t,r){t.get("protected")?this.trigger("change:pane","pin",{model:t,showBackButton:!0,openAddManagedUser:r,focusDelay:0}):this.selectUser(t,r)}});var B=r(95056),H=r.n(B);const z=l.c.extend({name:"userSelectModal",className:"user-select-modal modal modal-transparent fade",template:H(),transparent:!0,panes:{users:W,pin:T},regions:{content:".modal-content",alertBar:".modal-alert"},initialize:function(e){l.c.prototype.initialize.apply(this,arguments);const t=o.WI("appModel");this.options=e,this.isForced=e.isForced,this.user=t.get("user"),this.promise=i().Deferred()},showPane:function(e,t){this.currentPane&&this.stopListening(this.currentPane);const r=new(0,this.panes[e])(a().extend({},this.options,t));return this.listenTo(r,{"change:pane":this.onChangePane,resolve:this.onResolve,reject:this.onReject}),this.currentPane=r,this.content.show(r),r},showAlertBar:function(){const e=c.c[0];c.c.length=0,this.alertBar.show(new m({alert:e}))},onRender:function(){l.c.prototype.onRender.apply(this,arguments),this.model?this.showPane("pin",{focusDelay:this.focusDelay}):this.showPane("users"),this.showAlertBar()},onHide:function(){l.c.prototype.onHide.apply(this,arguments),"pending"===this.promise.state()&&this.promise.reject()},onChangePane:function(e,t){this.showPane(e,t)},onResolve:function(e){this.promise.resolve(e),this.hide()},onReject:function(){this.promise.reject(),this.hide()}})},71572:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=Object.defineProperty,s=(e,t,r)=>(((e,t,r)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class a extends n.Component{constructor(){super(...arguments),s(this,"_el"),s(this,"_view")}componentDidMount(){const e=this.props.view;this._view=new e(this.props.viewOptions),this._view.render(),this._el.appendChild(this._view.el),this._view.triggerMethod("show")}shouldComponentUpdate(){return!1}componentWillUnmount(){this._view.close&&this._view.close()}render(){return n.createElement("div",{ref:e=>this._el=e,className:this.props.className})}}const o=a},2221:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(27876),i=r(57864),s=r(72528),a=r(14252),o=r(13148),c=r(70068),l=r(29164),d=r(33176),u=r(40415),p=r(11504),m=r(85448),h=r(92432),y=r(59396),g=r(96504),f=r(46788),v=r(16416),b=r(23748),S=r(95460),P=r(44152),I=r(24012);const E=(0,i.M3)((e=>e.downloads),(e=>!!e&&!e.isSubscriptionsPopulated&&!e.subscriptionsError)),w=(0,i.M3)((e=>e.downloads),(e=>!!(e&&e.subscriptions&&e.subscriptions.length>0))),C=(0,i.M3)(o.c,(e=>e.some((e=>e.isCloud&&e.isResolved||!e.isCloud&&e.isConnected)))),O=(0,i.M3)((e=>e.isWaitingForServers),E,C,w,c.c,a.c,l.c,d.c,((e,t,r,n,i,s,a,{isLibrariesAccessPending:o,isLibrariesAccessPopulated:c,error:l})=>({isWaitingForServers:e||t,isAnyServerAuthenticated:r||n,isWaitingForCloudServer:!s.isResolved&&!s.isRejected,isCloudServerUnauthorized:s.isUnauthorized,isCloudServerConnected:s.isConnected,isCloudServerUnavailable:s.isUnavailable,isCloudServerDownForMaintenance:s.isDownForMaintenance,stableCloudServer:a,hasAttemptedSignIn:i.hasAttemptedSignIn,isUserSignedIn:i.isSignedIn,isUserLocked:i.isLocked,isUserAnonymous:i.anonymous,isUserFeaturesPopulated:i.isFeaturesPopulated,isUserFeaturesError:!!i.featuresError,hasInvalidToken:i.hasInvalidToken,isLibrariesAccessPending:o,isLibrariesAccessPopulated:c,librariesAccessError:l}))),M={onPopulateUserFeatures:s.Pr,onFetchAllLibraryAccess:u.cp.actions.fetchAllLibraryAccess},T=(0,n.Ul)(O,M)((function(e){const{children:t,isWaitingForServers:r,isAnyServerAuthenticated:n,isWaitingForCloudServer:i,isCloudServerUnauthorized:s,isCloudServerConnected:a,isCloudServerUnavailable:o,isCloudServerDownForMaintenance:c,hasAttemptedSignIn:l,isUserSignedIn:d,isUserLocked:u,isUserAnonymous:E,isUserFeaturesPopulated:w,isUserFeaturesError:C,isLibrariesAccessPopulated:O,isLibrariesAccessPending:M,librariesAccessError:T,stableCloudServer:D,hasInvalidToken:k,onPopulateUserFeatures:x,onFetchAllLibraryAccess:A}=e,{addToast:R}=(0,h.Wo)(),N=(0,m.Uz)(),L=!!(0,m.SU)({path:[S.c.account],exact:!0}),j=!!(0,m.SU)({path:[S.c.announcements,S.c.devices,S.c.webhooks,S.c.onlineMediaSources,S.c.userSharingSettings,S.c.usersSharing,S.c.plexHome,S.c.plexHomeSharing,S.c.manageLibraryAccess,S.c.manageLibraryAccessSharing,S.c.activity,S.c.profile,S.c.editProfile,S.c.userProfile,S.c.friends,S.c.profileRatings,S.c.profileWatchHistory,S.c.profileWatchlist],exact:!0}),[U,F]=(0,p.useState)(C||w),V=(l||o)&&!u,_=V&&a,W=w||C||U||o,B=!r&&!n&&!c&&!o&&V||j&&(s||E)||L&&s;if((0,p.useEffect)((()=>{if(_){const e=window.setTimeout((()=>F(!0)),5e3);return()=>window.clearTimeout(e)}}),[_]),(0,p.useEffect)((()=>{!(_&&a&&d)||k||O||M||T||A({server:D})}),[D,a,M,O,_,T,A,d,k]),(0,p.useEffect)((()=>{_&&x()}),[_,x]),(0,f.c)((()=>{N.push(g.c.join(S.c.login,{redirectUrl:window.location.hash.replace("#!","")}))}),B),(0,p.useEffect)((()=>{!O&&(null==T?void 0:T.message)&&R({color:"alert",description:(0,y.c)("Error while fetching library access. Please refresh the page."),type:"foreground"})}),[R,O,null==T?void 0:T.message]),n&&W&&V&&(!L||a))return p.createElement(p.Fragment,null,t);if(!i&&(L||!r&&!n)){if(c)return p.createElement(P.c,null);if(o)return p.createElement(I.c,null)}return p.createElement(v.c,null,p.createElement(b.c,null))}))},85160:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(93952),s=r(4304),a=r(87808);var o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=(0,s.c)((function(e){const t=e,{subtitle:r}=t,s=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["subtitle"]);return n.createElement("div",{className:"ShareRestrictionsCheckInputItem-container-fBQqtH"},n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({size:a.wH},s)),r?n.createElement("span",{className:"ShareRestrictionsCheckInputItem-subtitle-THxzcE"},r):null)}))},3696:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(77072),s=r(38924),a=r(59396),o=r(12612),c=r(47148),l=r(17068),d=r(52200),u=r(82822);const p="ShareRestrictionsFilters-section-bK45Tn";var m=Object.defineProperty,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e};const b=function(e){const t=e,{className:r,friendFilterOptions:m}=t,f=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["className","friendFilterOptions"]),{filterMovies:b,filterTelevision:S,filterMusic:P}=m,I=(0,d.c)(b,s.MF,s.Gw),E=(0,d.c)(b,s.eS,s.wT),w=(0,d.c)(S,s.MF,s.Gw),C=(0,d.c)(S,s.eS,s.wT),O=(0,d.c)(P,s.eS,s.wT);return n.createElement("div",{className:r},n.createElement("div",{className:p},n.createElement(i.a,{font:"heading-3"},(0,a.c)("Content Restrictions"),n.createElement(l.c,null),c.cp.get(c.GG).title),n.createElement(u.c,v({excludedTags:I.excludeTags,initialValue:I.initialAllowTags,metadataType:o.MOVIE,name:"moviesContentRatings",tagType:s.MF,onChange:I.onAllowTagsChange},f)),n.createElement(u.c,v({excludedTags:I.allowTags,initialValue:I.initialExcludeTags,metadataType:o.MOVIE,name:"moviesExcludeContentRatings",tagType:s.Gw,onChange:I.onExcludeTagsChange},f)),n.createElement(u.c,v({excludedTags:E.excludeTags,initialValue:E.initialAllowTags,metadataType:o.MOVIE,name:"moviesLabels",tagType:s.eS,onChange:E.onAllowTagsChange},f)),n.createElement(u.c,v({excludedTags:E.allowTags,initialValue:E.initialExcludeTags,metadataType:o.MOVIE,name:"moviesExcludeLabels",tagType:s.wT,onChange:E.onExcludeTagsChange},f))),n.createElement("div",{className:p},n.createElement(i.a,{font:"heading-3"},(0,a.c)("Content Restrictions"),n.createElement(l.c,null),c.cp.get(c.TV).title),n.createElement(u.c,v({excludedTags:w.excludeTags,initialValue:w.initialAllowTags,metadataType:o.M7,name:"televisionContentRatings",tagType:s.MF,onChange:w.onAllowTagsChange},f)),n.createElement(u.c,v({excludedTags:w.allowTags,initialValue:w.initialExcludeTags,metadataType:o.M7,name:"televisionExcludeContentRatings",tagType:s.Gw,onChange:w.onExcludeTagsChange},f)),n.createElement(u.c,v({excludedTags:C.excludeTags,initialValue:C.initialAllowTags,metadataType:o.M7,name:"televisionLabels",tagType:s.eS,onChange:C.onAllowTagsChange},f)),n.createElement(u.c,v({excludedTags:C.allowTags,initialValue:C.initialExcludeTags,metadataType:o.M7,name:"televisionExcludeLabels",tagType:s.wT,onChange:C.onExcludeTagsChange},f))),n.createElement("div",{className:p},n.createElement(i.a,{font:"heading-3"},(0,a.c)("Content Restrictions"),n.createElement(l.c,null),c.cp.get(c.y6).title),n.createElement(u.c,v({excludedTags:O.excludeTags,initialValue:O.initialAllowTags,metadataType:o.iI,name:"musicLabels",tagType:s.eS,onChange:O.onAllowTagsChange},f)),n.createElement(u.c,v({excludedTags:O.allowTags,initialValue:O.initialExcludeTags,metadataType:o.iI,name:"musicExcludeLabels",tagType:s.wT,onChange:O.onExcludeTagsChange},f))))}},73356:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(85032),s=r(1504),a=r(4304),o=r(87808);const c=(0,a.c)((function(e){const{name:t,title:r,subtitle:a,value:c,values:l,onChange:d}=e;return n.createElement("div",null,n.createElement(i.c,null,r),n.createElement(s.c,{name:t,size:o.wH,value:c,values:l,onChange:d}),a?n.createElement("div",{className:"ShareRestrictionsSelectInputItem-subtitle-_Rn19I"},a):null)}))},82822:(e,t,r)=>{"use strict";r.d(t,{c:()=>Te});var n=r(11504),i=r(38924),s=r(59396),a=r(91188),o=r(60035),c=r(49340),l=r(98872),d=r.n(l);const u={container:"AutosuggestInput-container-jTZmhV",input:"AutosuggestInput-input-bkbvxA",suggestionsContainer:"AutosuggestInput-suggestionsContainer-QGX8Wa Scroller-scroller-aaw2tP Scroller-vertical-nKq0Q8 Menu-menu-OCzudL",suggestionsContainerOpen:"AutosuggestInput-suggestionsContainerOpen-v7EqZZ",suggestionsList:"AutosuggestInput-suggestionsList-Y0XP0a",suggestion:"AutosuggestInput-suggestion-PwtjAa MenuItem-menuItem-C_KBbX",suggestionHighlighted:"AutosuggestInput-suggestionHighlighted-dMfRLM"};var p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e};function S(e){const t=e,{inputComponent:r,suggestionsComponent:i,theme:s}=t,a=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&f.call(e,n)&&(r[n]=e[n]);return r})(t,["inputComponent","suggestionsComponent","theme"]);return n.createElement(d(),(o=b({},a),c={renderInputComponent:r,renderSuggestionsContainer:i,theme:b(b({},u),s)},m(o,h(c))));var o,c}S.defaultProps={inputComponent:function(e){return n.createElement("input",b({type:"text"},e))}};const P=S;var I=r(89080),E=r.n(I),w=r(95720),C=r.n(w),O=r(6968),M=r(71500);var T=Object.defineProperty,D=(e,t,r)=>(((e,t,r)=>{t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class k extends n.Component{constructor(){super(...arguments),D(this,"onPress",(()=>{const{onRemove:e,index:t}=this.props;e(t)}))}render(){const{className:e,removeClassName:t,tag:r,iconComponent:i,isDisabled:s,removeLabel:a,getTagDisplayValue:o}=this.props;return n.createElement("span",{className:e},s?null:n.createElement(M.c,{"aria-label":a,className:t,onPress:this.onPress},n.createElement(i,null)),n.createElement("span",null,o(r)))}}D(k,"defaultProps",{className:"TagLabel-tag-wWg8UE",removeClassName:"TagLabel-remove-L6L9LC"});const x=k;var A=Object.defineProperty,R=Object.defineProperties,N=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))U.call(t,r)&&F(e,r,t[r]);return e},_=(e,t)=>{var r={};for(var n in e)j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&U.call(e,n)&&(r[n]=e[n]);return r},W=(e,t,r)=>(F(e,"symbol"!=typeof t?t+"":t,r),r);class B extends n.Component{constructor(e,t){super(e,t),W(this,"divRef"),W(this,"inputRef"),W(this,"addTag",(e=>this._addTags([e]))),W(this,"setInputRef",(e=>{this.inputRef=e})),W(this,"setDivRef",(e=>{this.divRef=e})),W(this,"onPaste",(e=>{const{addOnPaste:t,pasteSplit:r,makeTag:n}=this.props;if(!t)return;e.preventDefault();const i=function(e){return window.clipboardData?window.clipboardData.getData("Text"):e.clipboardData?e.clipboardData.getData("text/plain"):""}(e),s=r(i).map((e=>n(e)));this._addTags(s)})),W(this,"onKeyDown",(e=>{const{onKeyDown:t}=this.props.inputProps;if(t&&t(e),e.defaultPrevented)return;const{value:r,removeKeys:n,addKeys:i,inputValue:s}=this.props,a=""===s,o=e.keyCode,c=-1!==i.indexOf(o),l=-1!==n.indexOf(o);c&&(this._accept()||o===O.wJ)&&e.preventDefault(),l&&r.length>0&&a&&(e.preventDefault(),this._removeTag(r.length-1))})),W(this,"onClick",(e=>{e.target===this.divRef&&(this.inputRef&&"function"==typeof this.inputRef.focus&&this.inputRef.focus(),this.onFocus())})),W(this,"onChange",(e=>{const{onInputChange:t}=this.props,{onChange:r}=this.props.inputProps,n=e.target.value;r&&r(e),t(n)})),W(this,"onFocus",(e=>{const{onFocus:t}=this.props.inputProps;t&&t(e),this.setState({isFocused:!0})})),W(this,"onBlur",(e=>{const{onBlur:t}=this.props.inputProps;if(this.setState({isFocused:!1}),null!=e&&(t&&t(e),this.props.addOnBlur)){const t=this.props.makeTag(e.target.value);this._addTags([t])}})),W(this,"onRemove",(e=>{this._removeTag(e)})),this.state={isFocused:!1}}componentDidUpdate(e){const{value:t,excludedTags:r}=this.props;r!==e.excludedTags&&r.forEach((e=>{const r=t.findIndex((t=>t===e));this._removeTag(r)}))}_removeTag(e){if(e>-1&&e<this.props.value.length){const t=this.props.value.slice(0),r=t.splice(e,1);this.props.onChange(t,r,[e])}}_clearInput(){this.props.onInputChange("")}_addTags(e){const{validationRegex:t,onlyUnique:r,maxTags:n,value:i,getTagValue:s,onChange:a,onValidationReject:o}=this.props;let c;if(r&&(e=C().uniq(e,(e=>s(e)))),t&&(c=e.filter((e=>!t.test(s(e)))),e=e.filter((e=>t.test(s(e))))),e=e.filter((e=>{const t=s(e);return t?t.trim().length>0:t})),n>=0){const t=Math.max(n-i.length,0);e=e.slice(0,t)}if(o&&c&&c.length>0&&o(c),e.length>0){let t=i.concat(e);const n=[];for(let t=0;t<e.length;t++)n.push(i.length+t);r&&(t=C().uniq(t,(e=>s(e))));const o=t.length!==i.length;return o&&a(t,e,n),this._clearInput(),o}return this._clearInput(),!1}_accept(){let e=this.props.inputValue;return""!==e&&(e=this.props.makeTag(e),this._addTags([e]))}inputProps(){const{value:e,inputProps:t}=this.props,r=t,{placeholder:n,onChange:i,onFocus:s,onBlur:a}=r,o=_(r,["placeholder","onChange","onFocus","onBlur"]),c=V({className:"TagsInput-input-tDkfvq",placeholder:e.length?"":n},o);return this.props.isDisabled&&(c.isDisabled=!0),c}render(){const{id:e,className:t,errorClassName:r,focusedClassName:i,hasError:s,value:a,inputValue:o,getTagValue:c,getTagDisplayValue:l,tagProps:d,tagComponent:u,inputComponent:p,isDisabled:m}=this.props,{isFocused:h}=this.state;return n.createElement("div",{ref:this.setDivRef,className:E()(t,h&&i,s&&r),id:e,onClick:this.onClick},a.map(((e,t)=>n.createElement(u,V({key:`${c(e)}-${t}`,getTagDisplayValue:l,index:t,isDisabled:m,tag:e,tagCount:a.length,onRemove:this.onRemove},d)))),n.createElement(p,(y=V({key:"input",inputRef:this.setInputRef,value:o},this.inputProps()),g={addTag:this.addTag,onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,onKeyDown:this.onKeyDown,onPaste:this.onPaste},R(y,N(g)))));var y,g}}W(B,"propTypes"),W(B,"defaultProps"),B.defaultProps={className:"TagsInput-tagsInput-YzbHcb",errorClassName:"TagsInput-hasError-MCUx1p input-hasError-GqupwL",addKeys:[O.k0,O.wJ],addOnBlur:!1,addOnPaste:!1,inputProps:{},removeKeys:[O.y_],inputComponent:function(e){const t=e,{inputRef:r,addTag:i}=t,s=_(t,["inputRef","addTag"]);return n.createElement("input",V({ref:r,type:"text"},s))},tagComponent:x,pasteSplit:function(e){return e.split(" ").map((e=>e.trim()))},tagProps:{},onlyUnique:!0,maxTags:-1,excludedTags:[],validationRegex:null,isDisabled:!1,getTagDisplayValue:e=>e,getTagValue:e=>e,makeTag:e=>e};const H=B;var z=Object.defineProperty,G=Object.defineProperties,q=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&Y(e,r,t[r]);if(K)for(var r of K(t))$.call(t,r)&&Y(e,r,t[r]);return e},J=(e,t)=>{var r={};for(var n in e)Q.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&K)for(var n of K(e))t.indexOf(n)<0&&$.call(e,n)&&(r[n]=e[n]);return r},Z=(e,t,r)=>(Y(e,"symbol"!=typeof t?t+"":t,r),r);const ee={placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!1},{name:"flip",enabled:!1},{name:"maxSize",enabled:!0,phase:"beforeWrite",requiresIfExists:["offset","preventOverflow","flip"],fn({state:e,name:t,options:r}){const n=(0,a.c)(e,r),{y:i}=e.modifiersData.preventOverflow||{x:0,y:0},{height:s}=e.rects.popper,[o]=e.placement.split("-"),c="top"===o?"top":"bottom";e.styles.popper.maxHeight=s-n[c]-i-14+"px",e.styles.popper.width=`${e.rects.reference.width}px`}}]};class te extends n.Component{constructor(e,t){super(e,t),Z(this,"inputID"),Z(this,"suggestRef"),Z(this,"tagsInputRef"),Z(this,"setTagsInputRef",(e=>{this.tagsInputRef=e})),Z(this,"onInputChange",(e=>{this.setState({inputValue:e})})),Z(this,"onSuggestionSelected",((e,{suggestion:t})=>{this.tagsInputRef.addTag(this.props.makeTagFromSuggestion(t))})),Z(this,"onInputFocus",((e,t)=>{this.setState({isMenuOpen:!0},(()=>t(e)))})),Z(this,"onWindowPress",(e=>{const t=this.suggestRef.current,r=t&&t.contains(e.target),n=!r&&document.getElementById(this.inputID),i=n&&n.contains(e.target);r||i||this.setState({isMenuOpen:!1})})),Z(this,"renderInputComponent",(e=>{var t=e,{ref:r}=t,i=J(t,["ref"]);const{className:s,shouldRenderSuggestions:a,tagComponent:o,validationRegex:c,value:l,makeTag:d,getTagDisplayValue:u,getTagValue:p,tagProps:m,excludedTags:h,onChange:y}=this.props,{inputValue:g}=this.state;return n.createElement(H,{ref:this.setTagsInputRef,addOnBlur:!a(g),className:s,excludedTags:h,getTagDisplayValue:u,getTagValue:p,id:this.inputID,inputProps:(f=X({},i),v={inputRef:r,onFocus:e=>{this.onInputFocus(e,i.onFocus)}},G(f,q(v))),inputValue:g,makeTag:d,tagComponent:o,tagProps:m,validationRegex:c,value:l,onChange:y,onInputChange:this.onInputChange});var f,v})),Z(this,"renderSuggestionsComponent",(e=>{const t=e,{containerProps:r}=t,i=r,{ref:s}=i,a=J(i,["ref"]),{children:c}=t;return s(this.suggestRef.current),n.createElement(o.c,X({ref:this.suggestRef,isOpen:this.state.isMenuOpen,options:ee,target:this.inputID},a),c)})),this.state={inputValue:"",isMenuOpen:!1},this.suggestRef=n.createRef(),this.inputID=(0,c.c)()}componentDidUpdate(e,t){!t.isMenuOpen&&this.state.isMenuOpen?this._enable():t.isMenuOpen&&!this.state.isMenuOpen&&this._disable()}_enable(){document.addEventListener("mouseup",this.onWindowPress),document.addEventListener("touchend",this.onWindowPress)}_disable(){document.removeEventListener("mouseup",this.onWindowPress),document.removeEventListener("touchend",this.onWindowPress)}render(){const{placeholder:e,suggestions:t,getAddSuggestionTag:r,getSuggestionValue:i,renderSuggestion:s,suggestionsFilter:a,shouldRenderSuggestions:o,theme:c,onSuggestionsClearRequested:l,onSuggestionsFetchRequested:d}=this.props,{inputValue:u}=this.state,p=r&&u.length>0?[r(u)]:[],m=t.reduce(((e,t)=>(a(t,u)&&e.push(t),e)),p);return n.createElement(P,{focusInputOnSuggestionClick:!1,getSuggestionValue:i,highlightFirstSuggestion:!0,inputComponent:this.renderInputComponent,inputProps:{value:u,placeholder:e,onChange:(e,{newValue:t,method:r})=>{"enter"===r&&e.preventDefault(),"enter"===r||"click"===r?this.setState({isMenuOpen:!1}):"type"===r&&this.setState({isMenuOpen:!0})}},renderSuggestion:s,shouldRenderSuggestions:o,suggestions:m,suggestionsComponent:this.renderSuggestionsComponent,theme:X({input:"AutosuggestTagsInput-input-v2M4L8 TagsInput-input-tDkfvq"},c),onSuggestionSelected:this.onSuggestionSelected,onSuggestionsClearRequested:l,onSuggestionsFetchRequested:d})}}Z(te,"propTypes"),Z(te,"defaultProps",{className:"AutosuggestTagsInput-tagsInput-pn247D TagsInput-tagsInput-YzbHcb",suggestions:[],value:[],shouldRenderSuggestions:()=>!1});const re=te;var ne=r(39116),ie=r(21496),se=r(72764),ae=r(4304),oe=Object.defineProperty,ce=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const pe=(0,ae.c)((function(e){const t=e,{formGroupClassName:r,formLabelClassName:i,name:s,labelText:a,helpText:o,showErrors:c,errors:l,children:d}=t,u=((e,t)=>{var r={};for(var n in e)le.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ce)for(var n of ce(e))t.indexOf(n)<0&&de.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","formLabelClassName","name","labelText","helpText","showErrors","errors","children"]);return n.createElement(ne.c,{className:r},d,n.createElement(se.c,{className:i,errors:l,labelText:a,name:s,showErrors:c}),n.createElement(re,((e,t)=>{for(var r in t||(t={}))le.call(t,r)&&ue(e,r,t[r]);if(ce)for(var r of ce(t))de.call(t,r)&&ue(e,r,t[r]);return e})({hasError:c,name:s},u)),o?n.createElement(ie.c,null,o):null)}));var me=r(13172);var he=Object.defineProperty;class ye extends n.Component{constructor(){var e;super(...arguments),((e,t,r)=>{t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="onRemovePress")?e+"":e,(()=>{this.props.onRemove(this.props.index)}))}render(){const{tag:e,getTagDisplayValue:t}=this.props;return n.createElement("span",{className:"ShareRestrictionsTag-container-S_m4XU"},n.createElement("span",{className:"ShareRestrictionsTag-tag-Qvs8CU"},n.createElement(M.c,{"aria-label":(0,s.c)("Remove Tag"),className:"ShareRestrictionsTag-remove-pEOJDD TagLabel-remove-L6L9LC",onPress:this.onRemovePress},n.createElement(me.c,null)),n.createElement("span",null,t(e))))}}const ge=ye,fe={[i.MF]:{labelText:()=>(0,s.c)("Allow Only Ratings"),placeholder:()=>(0,s.c)("Allow all ratings")},[i.Gw]:{labelText:()=>(0,s.c)("Exclude Ratings"),placeholder:()=>(0,s.c)("Don't exclude any ratings")},[i.eS]:{labelText:()=>(0,s.c)("Allow Only Labels"),placeholder:()=>(0,s.c)("Allow all labels")},[i.wT]:{labelText:()=>(0,s.c)("Exclude Labels"),placeholder:()=>(0,s.c)("Don't exclude any labels")}};function ve(e){const{metadataType:t,tagType:r,filterOptionsTags:n}=e,s=r===i.MF||r===i.Gw?i.MF:i.eS;return n[t][s]}const be=e=>e.value,Se=e=>""===e.key?e.value:e.title,Pe=(e,t)=>e.title.toUpperCase().includes(t.toUpperCase()),Ie=e=>({key:"",title:(0,s.c)("Add {inputValue}",{inputValue:e}),value:e}),Ee=e=>e.title,we=()=>!0,Ce=()=>{},Oe=()=>{};class Me extends n.Component{static getDerivedStateFromProps(e,t){return!t.isFilterOptionsTagsPopulated&&e.isFilterOptionsTagsPopulated?{suggestions:ve(e),isFilterOptionsTagsPopulated:!0}:null}constructor(e,t){super(e,t);const{isFilterOptionsTagsPopulated:r}=e;this.state={suggestions:r?ve(e):[],isFilterOptionsTagsPopulated:r}}render(){const{name:e,tagType:t,initialValue:r,excludedTags:i,onChange:s}=this.props,{labelText:a,placeholder:o}=fe[t];return n.createElement(pe,{excludedTags:i,getAddSuggestionTag:Ie,getSuggestionValue:be,initialValue:r,labelText:a(),makeTagFromSuggestion:Se,name:e,placeholder:o(),renderSuggestion:Ee,shouldRenderSuggestions:we,suggestions:this.state.suggestions,suggestionsFilter:Pe,tagComponent:ge,onChange:s,onSuggestionsClearRequested:Ce,onSuggestionsFetchRequested:Oe})}}const Te=Me},97648:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(62900),s=r(59320),a=r(14248),o=r(3008),c=r(77072),l=r(1292),d=r(62124);const u="UserListItem-text-g6kyRc";var p=Object.defineProperty;class m extends n.Component{constructor(){var e;super(...arguments),((e,t,r)=>{t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="onPress")?e+"":e,(()=>{this.props.onSelect(this.props.user.id)}))}render(){const{serverEntityID:e,user:t,isSelected:r}=this.props,{title:i,thumb:p,home:m,restricted:h,username:y}=t,g=!y&&m||h;return n.createElement(l.c,{className:r?"UserListItem-selectedButton-pcFF07 UserListItem-button-izNYLx Button-button-TxWeuE Link-link-SxPFpG":"UserListItem-button-izNYLx Button-button-TxWeuE Link-link-SxPFpG",onPress:this.onPress},n.createElement(o.YR,{verticalAlign:"center"},n.createElement(d.c,{className:"UserListItem-avatar-ij83r2 AvatarImg-avatar-dvpNLl",height:30,serverEntityID:e,url:p,width:30}),n.createElement(o.ye,null,n.createElement("div",{className:u},n.createElement(c.a,{color:"primary",font:"body-2"},i)),n.createElement("div",{className:u},i!==y?n.createElement(c.a,{color:"muted",font:"body-2"},y):null))),n.createElement(o.YR,{verticalAlign:"center"},r?n.createElement("div",{className:"UserListItem-selectedIcon-ipHN6v UserListItem-icon-L8Xboh"},n.createElement(s.default,null)):null,n.createElement("div",{className:g?"UserListItem-visibleHomeIcon-qqgxrc UserListItem-homeIcon-VmB4Zq UserListItem-icon-L8Xboh":"UserListItem-homeIcon-VmB4Zq UserListItem-icon-L8Xboh"},n.createElement(a.default,null))))}}const h=m;function y(e){const{className:t,serverEntityID:r,users:s,isUserSelected:a,onUserSelect:o}=e;return n.createElement(i.c,{autoScroll:!0,className:t},s.map((e=>n.createElement(h,{key:e.id,isSelected:a(e),serverEntityID:r,user:e,onSelect:o}))))}y.defaultProps={className:"UserList-list-eprPYu Scroller-vertical-nKq0Q8"};const g=y},54492:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504);const i={anagram:"Anagram-anagram-H5cIHF"};var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){var t=e,{className:r=i.anagram,name:s,width:d,height:u}=t,p=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["className","name","width","height"]);if(!s)return null;const m=s.toUpperCase().split(" "),h=m[0].charAt(0),y=m[m.length-1].charAt(0),g=m.length>1?`${h}${y}`:s.charAt(0),f={fontSize:Math.max(14,Math.min(Math.round(d/4),42)),lineHeight:`${u}px`};return n.createElement("div",((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({className:r,style:f},p),g)}d.defaultProps={width:13,height:13};const u=d},43788:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(79988),s=r(32716);var a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,c(t));function y(e){return n.createElement(i.c,h(m({},e),{textClassName:"CircularProgressBar-circularProgressBarText-bonnqM CircularProgressBar-circularProgressBarText-ZQsWiX"}))}y.defaultProps=h(m({},i.c.defaultProps),{backgroundClassName:"CircularProgressBar-circularProgressBarBackground-BcC4L1 CircularProgressBar-circularProgressBarBackground-Bw4kwM",strokeColor:s.c.primaryColor});const g=y},71088:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({},i),r)}l.defaultProps={className:"DragPreviewLayer-dragLayer-Rfqy6a"};const d=l},11872:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{className:t,iconComponent:r,title:i,text:s}=e;return n.createElement("div",{className:t},n.createElement("div",{className:"PlexPassUpsell-iconContainer-n7kBx8"},n.createElement(r,{className:"PlexPassUpsell-icon-gwdd4L"})),n.createElement("div",{className:"PlexPassUpsell-title-itzp_S"},i),n.createElement("div",{className:"PlexPassUpsell-text-gSdj_4"},s))}i.defaultProps={className:"PlexPassUpsell-upsell-RSLUlW"};const s=i},29016:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(89080),i=r.n(n),s=r(11504);function a(e,t,r){return(e-t)/(r-t)*100}r(79268);var o=r(71500),c=r(51268);const l="Slider-isDragging-nmzwVv";var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},g=(e,t,r)=>(h(e,"symbol"!=typeof t?t+"":t,r),r);class f extends s.Component{constructor(e,t){super(e,t),g(this,"_trackRef"),g(this,"onMouseDown",(e=>{e.preventDefault(),0===e.button&&this._startDrag(e.pageX,e.pageY,!1)})),g(this,"onMouseMove",(({pageX:e,pageY:t})=>{if(this.state.isDragging)return;const r=this._getValueForPosition(e,t),n=this._trackRef.current.getBoundingClientRect(),i=this.props.isVertical?{x:n.left,y:t}:{x:e,y:n.top};this.props.onMove({position:i,positionValue:r,steppedValue:this._getSteppedValue(r)})})),g(this,"onTouchStart",(e=>{e.preventDefault();const t=e.touches&&e.touches[0];t&&this._startDrag(t.pageX,t.pageY,!0)})),g(this,"onDocumentMouseMove",(e=>{this._drag(e.pageX,e.pageY)})),g(this,"onDocumentTouchMove",(e=>{const t=e.touches&&e.touches[0];t&&this._drag(t.pageX,e.pageY)})),g(this,"onDocumentMouseUp",(e=>{this._stopDrag(e.pageX,e.pageY)})),g(this,"onDocumentTouchEnd",(e=>{const t=e.changedTouches&&e.changedTouches[0];t&&this._stopDrag(t.pageX,t.pageY)})),this._trackRef=s.createRef(),this.state={isDragging:!1}}shouldComponentUpdate(e,t){return(0,c.c)(this,e,t)}componentWillUnmount(){this._stopListeningForDrag()}_listenForDrag(e){e?(document.addEventListener("touchmove",this.onDocumentTouchMove),document.addEventListener("touchcancel",this.onDocumentTouchEnd),document.addEventListener("touchend",this.onDocumentTouchEnd)):(document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp))}_stopListeningForDrag(){document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("touchmove",this.onDocumentTouchMove),document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("touchcancel",this.onDocumentTouchEnd),document.removeEventListener("touchend",this.onDocumentTouchEnd)}_startDrag(e,t,r){this._changeValue(this._getValueForPosition(e,t)),this._listenForDrag(r),this.props.onDragStart&&this.props.onDragStart()}_drag(e,t){this.state.isDragging||(document.body.classList.add(l),this.setState({isDragging:!0})),this._changeValue(this._getValueForPosition(e,t))}_stopDrag(e,t){document.body.classList.remove(l),this._stopListeningForDrag();const r=this._getValueForPosition(e,t),n=this._getSteppedValue(r);this._changeValue(r),this.setState({isDragging:!1}),this.props.onDragComplete&&this.props.onDragComplete({positionValue:r,steppedValue:n})}_getValueForPosition(e,t){const{isVertical:r,min:n,max:i}=this.props,s=this._trackRef.current,a=s.getBoundingClientRect();let o;if(r){const e=t-document.body.scrollTop;o=(a.bottom-e)/s.offsetHeight}else o=(e-document.body.scrollLeft-a.left)/s.offsetWidth;return o=Math.min(Math.max(o,0),1),(i-n)*o+n}_getSteppedValue(e){const{min:t,max:r,stepSize:n}=this.props;if(!n)return e;const i=Math.round(e/n)*n;return Math.min(Math.max(i,t),r)}_getStickyValue(e){const{max:t,min:r,stepSize:n,stickiness:i}=this.props;if(!n||!i)return e;const s=this._getSteppedValue(e);return Math.abs(s-e)/(t-r)<i/100?s:e}_changeValue(e){const{value:t}=this.props;e!==t&&this.props.onChange({positionDelta:e-t,positionValue:e,steppedValue:this._getSteppedValue(e)})}render(){const{style:e,className:t,trackClassName:r,secondaryFillClassName:n,fillClassName:c,thumbClassName:d,thumbTrackClassName:u,label:p,tabIndex:m,value:h,min:g,max:f,secondaryMin:v,secondaryMax:b,showSecondaryFill:S,showFill:P,autoHideThumb:I,isDisabled:E,isVertical:w,onMove:C,onMouseEnter:O,onMouseLeave:M,onWheel:T}=this.props,{isDragging:D}=this.state,k=a(this._getStickyValue(h),g,f);let x="scaleX",A="translateX";w&&(x="scaleY",A="translateY");const R=`${A}(${w?-k:-(100-k)}%)`,N=v?a(this._getStickyValue(v),g,f):0,L=b?a(this._getStickyValue(b),g,f):0,j=Math.max((k-N)/100,0),U=`${x}(${Math.max((L-N)/100,0)})`,F=v?N+"%":void 0,V=w?{top:F}:{left:F},_=y({transform:`${x}(${j})`},V),W=y({transform:U},V);return s.createElement("div",{className:i()(t,E&&"Slider-isDisabled-xoUSw3",D&&l,I&&"Slider-hasAutoHideThumb-c3bHgc"),style:e,onMouseDown:E?null:this.onMouseDown,onMouseEnter:E?null:O,onMouseLeave:E?null:M,onMouseMove:E||!C?null:this.onMouseMove,onTouchStart:E?null:this.onTouchStart,onWheel:E?null:T},s.createElement("div",{ref:this._trackRef,className:r},S?s.createElement("div",{className:n,style:W}):null,P?s.createElement("div",{className:c,style:_}):null),s.createElement("div",{className:u,style:{transform:R}},s.createElement(o.c,{"aria-labelledby":p,"aria-valuemax":f,"aria-valuemin":g,"aria-valuenow":h,className:d,role:"slider",tabIndex:m,onMouseDown:this.onMouseDown,onMouseMove:C&&this.onMouseMove,onTouchStart:this.onTouchStart})))}}g(f,"defaultProps",{className:"Slider-slider-YdLxcK",trackClassName:"Slider-track-i7q9Yd",fillClassName:"Slider-fill-Rq3kSU",secondaryFillClassName:"Slider-secondaryFill-BduU3_ Slider-fill-Rq3kSU",thumbClassName:"Slider-thumb-YPvtji Link-link-SxPFpG",thumbTrackClassName:"Slider-thumbTrack-INScRp",min:0,max:100,stepSize:0,stickiness:10,showFill:!1,showSecondaryFill:!1,autoHideThumb:!1,isDisabled:!1,isDragging:!1,isVertical:!1});const v=f},47792:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(27876),i=r(57864),s=r(4659),a=r(65348),o=r(30332),c=r(42460);var l=r(11504),d=r(48168),u=r(62124),p=r(95156);const m=parseInt(p.c.playlistBadgeSize,10);function h(e){const{className:t,textClassName:r,serverEntityID:n,attribution:i,avatar:s,name:a,hasOwner:o}=e;return i?l.createElement("div",{className:t},l.createElement(d.c,{attribution:i,className:"SourceBadge-attribution-Thhux3"})):o?l.createElement("div",{className:t},l.createElement("span",{className:r},a),l.createElement(u.c,{className:"SourceBadge-avatar-Thmc6A AvatarImg-avatar-dvpNLl",height:m,serverEntityID:n,url:s,width:m})):null}h.defaultProps={className:"SourceBadge-container-SCUsWQ"};const y=h,g=(0,n.Ul)((function(){return(0,i.M3)((0,s.c)(),(0,i.M3)(c.c,o.c,(0,i.M3)((0,s.c)(),a.c,((e={},t)=>e.source?t.ownerId:null)),((e,t,r)=>{const n=e.find((e=>{const n=t[e];return n&&n.id===r}));return n&&t[n]})),((e={},t)=>({attribution:e.attribution,hasOwner:!!t,avatar:t&&t.thumb,name:t&&t.title})))}))(y)},75372:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(59396),s=r(76988),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){return n.createElement(s.c,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={loadingLabel:(0,i.c)("Loading")},o(t,c(r))));var t,r}m.propTypes=s.c.propTypes,m.defaultProps=s.c.defaultProps;const h=m},97928:(e,t,r)=>{"use strict";r.d(t,{Zq:()=>D,cp:()=>A,Uz:()=>k});var n=r(11504),i=r(27876),s=r(57864),a=r(4659),o=r(85328),c=r(64744),l=r(42728),d=r(66308),u=r(59396),p=r(2764);var m=r(69956),h=r(38595),y=r(12840),g=r(18356),f=r(10672),v=r(27376),b=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},M=(e,t)=>S(e,P(t));const T=null,D={SUBSCRIBE:"subscribe",CANCEL:"cancel",REMOVE:"remove",UPSELL:"upsell"};function k(e){const{onCancelDownloadActivity:t,onCreateDownloadSubscription:r,onDeleteDownloadSubscription:i}=e,[s,a]=(0,n.useState)({isOpen:!1,state:T}),o=(0,n.useCallback)((e=>{const t=e===D.SUBSCRIBE,n=e!==T&&!t,i=t?T:e;t&&r(),a({isOpen:n,state:i})}),[r]),c=(0,n.useCallback)((()=>a({isOpen:!1,state:T})),[]),l=(0,n.useCallback)((()=>{s.state===D.CANCEL?t():s.state===D.REMOVE&&i(),c()}),[s.state,t,c,i]);return M(O({},s),{onPress:o,onClose:c,onConfirm:l})}const x=(0,s.M3)((0,c.c)(l.kF),(0,c.c)(l.EL),o.c,((e,t,r)=>{var n;const i=t&&(null==(n=r.ownerFeatures)?void 0:n.includes(l.EL));return!e&&!i})),A=(0,i.Ul)((function(){return(0,s.M3)(((e,{isDisabled:t})=>t),(0,a.c)(),(0,s.M3)((e=>e.downloads.states),(0,p.c)(),(0,s.M3)((0,a.c)(),(e=>e.ratingKey)),((e,t,r)=>e.find((e=>e.ratingKey===r&&e.sourceAttr===t)))),(e=d.y8,(0,s.M3)((0,a.c)(),(0,p.c)(),(0,h.c)(e),((e,t,r)=>{const n=(0,m.c)(t);return r.find((({Context:t})=>{let r=!1;if(t.itemKey===e.key){const e=(0,m.c)(t.source);r=n.serverIdentifier===e.serverIdentifier&&n.providerIdentifier===e.providerIdentifier}return r}))}))),x,y.c,((e,t,r,n,i,s)=>{const a=!!r,o=(0,f.c)(t),c=(0,v.c)(t);return{canCancel:!!n&&n.cancellable,canRemove:c,canShowUpsell:!c&&i,canSubscribe:!c,hasDownloadState:a,hasOfflineFile:o,hasOwnSubscription:c,isDisabled:e||!s,progress:n&&n.progress}}));var e}),(function(e,t){return{}}))((function(e){const t=e,{component:r,canCancel:i,canRemove:s,canShowUpsell:a,canSubscribe:o,metadataItemEntityID:c,metricsPage:l,providerEntityID:d,serverEntityID:p,onCancelDownloadActivity:m,onCreateDownloadSubscription:h,onDeleteDownloadSubscription:y,onPress:f}=t,v=((e,t)=>{var r={};for(var n in e)E.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&I)for(var n of I(e))t.indexOf(n)<0&&w.call(e,n)&&(r[n]=e[n]);return r})(t,["component","canCancel","canRemove","canShowUpsell","canSubscribe","metadataItemEntityID","metricsPage","providerEntityID","serverEntityID","onCancelDownloadActivity","onCreateDownloadSubscription","onDeleteDownloadSubscription","onPress"]),b=(0,n.useCallback)((()=>{let e=T;i?e=D.CANCEL:s?e=D.REMOVE:a?e=D.UPSELL:o&&(e=D.SUBSCRIBE),f&&f(e)}),[i,s,a,o,f]);let S;return S=i?(0,u.c)("Cancel Download"):s?(0,u.c)("Delete Download"):(0,u.c)("Download"),n.createElement(n.Fragment,null,n.createElement(r,M(O({},v),{label:S,onPress:b})),n.createElement(g.c,{metadataItemEntityID:c,providerEntityID:d}))}))},75274:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(59396),s=r(71500),a=r(57392);var o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){const t=e,{className:r,circleClassName:o,title:p}=t,m=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","circleClassName","title"]);return n.createElement(s.c,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":(0,i.c)("Play {title}",{title:p}),className:r},m),n.createElement(a.c,{className:o}))}p.defaultProps={className:"PlayButton-playButton-vS1WII",circleClassName:"PlayButton-playCircle-fK1f_v"};const m=p},3384:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(59396),s=r(1292),a=r(24808),o=r(87808),c=r(95392),l=Object.defineProperty,d=(e,t,r)=>(((e,t,r)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class u extends n.Component{constructor(e,t){super(e,t),d(this,"onPlexPassPress",(()=>{this.setState({isPlexPassModalOpen:!0})})),d(this,"onPlexPassModalClose",(()=>{this.setState({isPlexPassModalOpen:!1})})),this.state={isPlexPassModalOpen:!1}}render(){const{modalMetricsProperties:e,origin:t,title:r=(0,i.c)("Get a Plex Pass")}=this.props,{isPlexPassModalOpen:l}=this.state;return n.createElement(s.c,{kind:a.ac,size:o.OM,onPress:this.onPlexPassPress},r,n.createElement(c.c,{isOpen:l,metricsProperties:e,origin:t,onModalClose:this.onPlexPassModalClose}))}}const p=u},25812:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(59396),s=r(71500),a=r(1848),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t=e,{className:r,circleClassName:o,iconClassName:p,title:m}=t,h=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","circleClassName","iconClassName","title"]);return n.createElement(s.c,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":(0,i.c)("Record {title}",{title:m}),className:r},h),n.createElement(a.c,{circleClassName:o,iconClassName:p}))}p.defaultProps={className:"RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3"};const m=p},41832:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(89080),i=r.n(n),s=r(11504),a=r(59396),o=r(71500),c=r(74672);var l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){const t=e,{className:r,selectedClassName:n,circleClassName:l,iconClassName:h,title:y,isSelected:g}=t,f=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["className","selectedClassName","circleClassName","iconClassName","title","isSelected"]);return s.createElement(o.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({"aria-label":g?(0,a.c)("Deselect {title}",{title:y}):(0,a.c)("Select {title}",{title:y}),className:i()(r,g&&n)},f),s.createElement("div",{className:l,"data-testid":"multipleSelectButton"},s.createElement(c.c,{className:h})))}h.defaultProps={className:"SelectButton-selectButton-_goGWp",selectedClassName:"SelectButton-isSelected-JyE0IQ",circleClassName:"SelectButton-selectCircle-TVtowg",iconClassName:"SelectButton-selectedIcon-cuuouo"};const y=h},28640:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(3268),i=r.n(n),s=r(27876),a=r(57864),o=r(47884),c=r(70068),l=r(11504),d=r(59396),u=r(1292),p=r(24808),m=r(87808),h=r(69468),y=r(3384);var g=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const E=(0,s.Ul)((function(){return(0,a.M3)(c.c,(0,o.c)(),((e,t)=>({machineIdentifier:t.machineIdentifier,isClaimed:t.isClaimed,isSignedIn:!!e&&e.signedIn,hasPlexSubscription:!!e&&e.hasPlexSubscription})))}))((function(e){const{className:t,machineIdentifier:r,origin:n,modalMetricsProperties:i,isSignedIn:s,isClaimed:a,hasPlexSubscription:o}=e;return o&&a?null:!o&&s?l.createElement(y.c,{modalMetricsProperties:i,origin:n}):l.createElement(u.c,{className:t,kind:p.ac,size:m.OM,to:(0,h.c)(r,"settings","general")},s?(0,d.c)("Claim Server"):(0,d.c)("Sign In"))}));var w;E.propTypes=(w=((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(b)for(var r of b(t))P.call(t,r)&&I(e,r,t[r]);return e})({},E.propTypes),f(w,v({serverEntityID:i().string.isRequired})));const C=E},74428:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(59396),s=r(9464),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){return n.createElement(s.c,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={loadingLabel:(0,i.c)("Loading")},o(t,c(r))));var t,r}m.propTypes=s.c.propTypes,m.defaultProps=s.c.defaultProps;const h=m},5056:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(89080),i=r.n(n),s=r(11504),a=r(59396),o=r(1292);var c=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>(h(e,"symbol"!=typeof t?t+"":t,r),r);class g extends s.Component{constructor(e,t){super(e,t),y(this,"onChange",(e=>{if(e.target.files&&e.target.files.length){const t=e.target.files[0];this.setState({filename:t.name})}this.props.onChange(e)})),this.state={filename:null}}render(){const e=this.props,{inputComponent:t,className:r,inputClassName:n,buttonText:o,isDisabled:c,showFilename:y}=e,g=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(e,["inputComponent","className","inputClassName","buttonText","isDisabled","showFilename"]),{filename:f}=this.state;return s.createElement("span",null,s.createElement(t,{className:r,component:"label"},o,s.createElement("input",(v=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},g),b={className:n,type:"file",onChange:this.onChange},l(v,d(b))))),y?s.createElement("span",{className:i()("FileInput-filename-wHSDM2",!f&&"FileInput-noFilename-xyAdqS")},f||(0,a.c)("No file selected")):null);var v,b}}y(g,"defaultProps",{inputComponent:o.c,inputClassName:"FileInput-fileInput-Te_RYc",showFilename:!1});const f=g},9176:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(59396),s=r(52612);const a=function({errorMessage:e}){return n.createElement("div",{className:"FormSectionError-sectionError-CylZ_l"},n.createElement(s.c,{className:"FormSectionError-sectionErrorIcon-YHEYK7"}),e||(0,i.c)("There was a problem saving your changes."))}},81940:(e,t,r)=>{"use strict";r.d(t,{c:()=>B});var n=r(11504),i=r(89400),s=r(74860),a=r(39116),o=r(21496),c=r(72764),l=r(4304),d=r(12784),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class v extends n.Component{constructor(){var e;super(...arguments),f(this,"symbol"!=typeof(e="onChange")?e+"":e,(e=>{const t=e?parseInt(e,10):null;this.props.onChange(t)}))}render(){return n.createElement(d.c,(e=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e})({type:"number"},this.props),t={selectTextOnFocus:!1,onChange:this.onChange},p(e,m(t))));var e,t}}const b=v;var S=Object.defineProperty,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function C(e){var t=e,{formGroupClassName:r,formLabelClassName:i,inputClassName:s,name:l,labelText:d,helpText:u,showErrors:p,errors:m}=t,h=((e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&P)for(var n of P(e))t.indexOf(n)<0&&E.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","formLabelClassName","inputClassName","name","labelText","helpText","showErrors","errors"]);return n.createElement(a.c,{className:r},n.createElement(c.c,{className:i,errors:m,labelText:d,name:l,showErrors:p}),n.createElement(b,((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e})({className:s,hasError:p,name:l,type:"number"},h)),u?n.createElement(o.c,null,u):null)}C.defaultProps={inputClassName:"NumberInputGroup-input-hwqOwp TextInput-input-NqTdW3 input-input-XAtklw"};const O=(0,l.c)(C);var M=r(17644),T=r(36148),D=r(50392),k=r(99424),x=Object.defineProperty,A=Object.defineProperties,R=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&U(e,r,t[r]);if(N)for(var r of N(t))j.call(t,r)&&U(e,r,t[r]);return e};function V(e=[]){return e.map((({label:e,value:t})=>({[t]:e})))}const _={playbackSpeed:k.Q};function W(e){const{id:t,type:r,label:a,summary:o,value:c,initialValueModifier:l,enumValues:d,min:u,max:p,step:m}=e,h={name:t,helpText:o,initialValue:l(c)};if(Array.isArray(d))return n.createElement(M.c,(y=F({labelText:a},h),g={values:V(d)},A(y,R(g))));var y,g;switch(r){case i.o.TEXT:return n.createElement(T.c,F({labelText:a},h));case i.o.BOOL:return n.createElement(s.c,F({checkboxText:a},h));case i.o.INT:return n.createElement(O,F({labelText:a},h));case i.o.DOUBLE:return n.createElement(D.c,F({labelText:a,max:p,min:u,stepSize:m,valueModifier:_[t]},h));default:return null}}W.defaultProps={initialValueModifier:e=>e};const B=W},50392:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(39116),s=r(72764),a=r(4304),o=r(29016);var c=Object.defineProperty,l=(e,t,r)=>(((e,t,r)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class d extends n.Component{constructor(){super(...arguments),l(this,"onChange",(({steppedValue:e})=>{const t=String(this.props.stepSize),[,r]=t.split("."),n=null!=r?parseFloat(e.toFixed(r.length)):e;this.props.onChange(n)}))}render(){const{name:e,value:t,min:r,max:a,stepSize:c,labelText:l,showErrors:d,errors:u,valueModifier:p}=this.props;return n.createElement(i.c,null,n.createElement(s.c,{errors:u,labelText:l,name:e,showErrors:d}),n.createElement("div",{className:"SliderInputGroup-sliderContainer-PpzL0B input-input-XAtklw"},n.createElement(o.c,{className:"SliderInputGroup-slider-FqtHLy Slider-slider-YdLxcK",max:a,min:r,stepSize:c,value:t,onChange:this.onChange}),n.createElement("div",{className:"SliderInputGroup-sliderValue-kkZg6y"},p(t))))}}l(d,"defaultProps"),d.defaultProps={valueModifier:e=>e};const u=(0,a.c)(d)},8264:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(89080),i=r.n(n),s=r(11504),a=r(79988),o=r(32716),c=r(3268),l=r.n(c),d=r(52908);function u(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-toolbar-sync-arrow-560"};i["aria-hidden"]=!t,i.style=n,i.className=d.c.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["path",{d:"M280 406l112-112h-89.6V154h-44.8v140H168l112 112"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}u.propTypes={"aria-label":l().string,className:l().string,style:l().object};const p=u,m={downloadIcon:"DownloadIcon-downloadIcon-x4iupc PlexIcon-plexIcon-a5zCNX",hasShadow:"DownloadIcon-hasShadow-_tMbSt",arrowIcon:"DownloadIcon-arrowIcon-ptQTzb",progressBarContainer:"DownloadIcon-progressBarContainer-lPxc2W CircularProgressBar-absoluteCenterCircularProgressBarContainer-Fv3RhV",hasProgress:"DownloadIcon-hasProgress-LDuyU3",showIndeterminate:"DownloadIcon-showIndeterminate-QjImI7"};function h(e){const{className:t,isDisabled:r,showIndeterminate:n,lineWidth:c,progress:l,arrowSize:d,shadowWidth:u,showShadow:h,size:y}=e,g=null!=l&&l>=0,f=`${d}px`,v=n?o.c.primaryColor:o.c.selectedColor;let b;b=r?o.c.defaultLinkDisabledLinkColor:g||n?o.c.dimColor:"currentColor";const S={fontSize:f};if(h){const e=y+2*u;S.width=`${e}px`,S.height=`${e}px`,S.borderRadius=e/2+"px"}else S.width=`${y+c}px`,S.height=`${y+c}px`;const P=g?void 0:0;return s.createElement("div",{className:i()(t,g&&m.isDownloading,n&&m.showIndeterminate,h&&m.hasShadow),style:S},s.createElement(p,{className:m.arrowIcon}),s.createElement(a.c,{containerClassName:m.progressBarContainer,lineWidth:c,progress:g?l:0,showIndeterminate:n,showProgressText:!1,size:y,smoothProgressDuration:P,strokeColor:v,trackColor:b}))}h.defaultProps={className:m.downloadIcon,size:18,arrowSize:19,lineWidth:1.3,showShadow:!1,shadowWidth:1};const y=h},84596:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(27876),s=r(57864),a=r(66308),o=r(38595),c=r(8264),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=(0,i.Ul)((function(){return(0,s.M3)((0,s.M3)(((e,{source:t})=>t),((e,{ratingKey:t})=>t),(0,o.c)(a.y8),((e,t,r)=>{for(const n of r){const{Context:r}=n;if(r.itemRatingKey===t&&r.source===e&&n.progress>0)return n.progress}})),(e=>({progress:e})))}))((function(e){if(!e.hasOfflineFile&&!e.hasOwnSubscription&&void 0===e.progress)return null;const t=e,{hasOfflineFile:r,hasOwnSubscription:i,ratingKey:s,source:a}=t,o=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["hasOfflineFile","hasOwnSubscription","ratingKey","source"]);return n.createElement(c.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},o))}))},64904:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(49716),s=r(13968);var a=Object.defineProperty,o=(e,t,r)=>(((e,t,r)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function c(e,t){return Math.random()*(t-e)+e}class l extends n.Component{constructor(e,t){super(e,t),o(this,"_barGap"),o(this,"_barWidth"),o(this,"_bars"),this._setBarValues(e),this.state=this._getInitialState(!0)}componentDidMount(){if(!this.props.isPaused)for(let e=0,t=this._bars.length;e<t;e++)this._setTransitionTimeout(e)}UNSAFE_componentWillReceiveProps(e){const t=e.isPaused!==this.props.isPaused,r=e.width!==this.props.width,n=e.barCount!==this.props.barCount,i=e.barGap!==this.props.barGap;(t||r||n||i)&&(this._clearAllTransitionTimeouts(),this._setBarValues(e),this.setState(this._getInitialState(e.isPaused)))}componentDidUpdate(e,t){if(!this.props.isPaused)for(let e=0,r=this._bars.length;e<r;e++){const r=this._bars[e];t[r]!==this.state[r]&&this._setTransitionTimeout(e)}}componentWillUnmount(){this._clearAllTransitionTimeouts()}_setBarValues({width:e,barCount:t,barGap:r}){const n=r*(t-1);this._barGap=r,this._barWidth=Math.floor((e-n)/t),this._bars=[];for(let e=0,r=t;e<r;e++)this._bars.push("bar"+e)}_getInitialState(e){return this._bars.reduce(((t,r,n)=>(t[r]=this._getRandomStyle(n,e),t)),{})}_getRandomStyle(e,t){const{unit:r}=this.props,n=e*(this._barWidth+this._barGap),i=`scaleY(${t?.2:c(.2,1)})`,s=c(300,500);return{left:`${n}${r}`,width:`${this._barWidth}${r}`,backgroundColor:this.props.barColor,transitionDuration:`${s}ms`,WebkitTransform:i,msTransform:i,transform:i}}_setTransitionTimeout(e){const t=this._bars[e],r=t+"TimeoutID",n=this.state[t],i=(0,s.c)(n.transitionDuration)-100;this[r]=window.setTimeout((()=>{this.setState({[t]:this._getRandomStyle(e)})}),i)}_clearAllTransitionTimeouts(){for(let e=0,t=this._bars.length;e<t;e++){const t=this._bars[e]+"TimeoutID";window.clearTimeout(this[t])}}render(){const{className:e,width:t,height:r,unit:i}=this.props;return n.createElement("div",{className:e,style:{width:`${t}${i}`,height:`${r}${i}`}},this._bars.map((e=>n.createElement("div",{key:e,className:"EqualizerIcon-bar-dkJpMG",style:this.state[e]}))))}}o(l,"defaultProps",{className:"EqualizerIcon-equalizer-pR4fbU",width:14,height:14,barColor:"#fff",barCount:3,barGap:2,isPaused:!0,unit:"px"});const d=l;var u=r(32716),p=r(3268),m=r.n(p),h=r(52908);function y(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 420 343",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-static-eq-paused"};s["aria-hidden"]=!t,s.style=i,s.className=h.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"M 0 227.741 L 0 115.741 L 56 115.741 L 168 3.741 L 168 339.741 L 56 227.741 L 0 227.741 Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}y.propTypes={"aria-label":m().string,className:m().string,style:m().object};const g=y;function f(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 420 343",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-static-eq-playing"};s["aria-hidden"]=!t,s.style=i,s.className=h.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"M 339.752 -0.011 C 388.818 41.059 420 102.759 420 171.741 C 420 240.723 388.818 302.423 339.752 343.493 L 309.905 313.646 C 351.436 280.319 378 229.132 378 171.741 C 378 114.35 351.436 63.163 309.905 29.836 L 339.752 -0.011 Z M 0 227.741 L 0 115.741 L 56 115.741 L 168 3.741 L 168 339.741 L 56 227.741 L 0 227.741 Z M 259.936 79.805 C 288.989 100.009 308 133.655 308 171.741 C 308 209.827 288.989 243.473 259.936 263.677 L 229.484 233.225 C 251.246 221.346 266 198.266 266 171.741 C 266 145.216 251.246 122.136 229.484 110.257 L 259.936 79.805 Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}f.propTypes={"aria-label":m().string,className:m().string,style:m().object};const v=f;function b(e){const{barColor:t,className:r,height:i,isPaused:s,unit:a,width:o}=e,c=(0,n.useMemo)((()=>({color:t,height:`${i}${a}`,width:`${o}${a}`})),[t,i,a,o]),l=s?g:v;return n.createElement(l,{className:r,style:c})}b.defaultProps={barColor:d.defaultProps.barColor,className:d.defaultProps.className,height:d.defaultProps.height,isPaused:d.defaultProps.isPaused,unit:d.defaultProps.unit,width:d.defaultProps.width};const S=b;var P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const T=function(e){const t=(0,i.c)()?S:d;return n.createElement(t,(r=((e,t)=>{for(var r in t||(t={}))C.call(t,r)&&M(e,r,t[r]);if(w)for(var r of w(t))O.call(t,r)&&M(e,r,t[r]);return e})({},e),s={barColor:u.c.equalizerBarColor},I(r,E(s))));var r,s}},57392:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function(e){return n.createElement("svg",{className:e.className,viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M216 170l190.5 110L216 390z"}))}},1848:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{circleClassName:t,iconClassName:r}=e;return n.createElement("div",{className:t},n.createElement("span",{className:r}))}i.defaultProps={circleClassName:"RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v",iconClassName:"RecordIcon-recordIcon-OWFVfW"};const s=i},4412:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(87564),s=r(32096),a=r(32360),o=r(96096),c=r(67520),l=r(3520),d=r(69820),u=r(65988),p=r(4372),m=r(32e3),h=r(25112),y=r(3728),g=r(92336),f=r(35860),v=r(91224);const b=function({source:e}){if(f._u(e.providerIdentifier,f.y6))return n.createElement(i.default,null);switch(e.sourceType){case v.OS:return n.createElement(s.default,null);case v.EB:return n.createElement(a.default,null);case v.GG:return n.createElement(o.default,null);case v.TV:return n.createElement(c.default,null);case v.y6:return n.createElement(l.default,null);case v._q:return n.createElement(d.default,null);case v.WK:return n.createElement(u.default,null);case v.Ef:return n.createElement(p.default,null);case v.uO:return n.createElement(m.default,null);case v.Im:return n.createElement(h.default,null);case v._w:return n.createElement(y.default,null);case v.Eq:return n.createElement(g.default,null)}return null}},62124:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(12064),s=r(92912),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){const t=e,{className:r,url:a,width:m}=t,h=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(t,["className","url","width"]);return n.createElement("div",{className:r},n.createElement(s.c,(y=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},h),g={url:a&&(0,i.c)(a,m),width:m},o(y,c(g)))));var y,g}m.defaultProps={className:"AvatarImg-avatar-dvpNLl"};const h=m},61004:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){const t=e,{className:r,children:i,component:l,width:d,height:u,url:p}=t,m=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","component","width","height","url"]);return n.createElement("div",{className:r,style:{width:d,height:u}},n.createElement(l,((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({height:u,url:p,width:d},m)),i)}l.defaultProps={className:"PosterCard-card-B3tGLl"};const d=l},29524:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(20668),s=r(92912),a=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m={position:"relative",top:0,left:0,display:"block",width:"100%",height:"100%"},h=function(e){return n.createElement(s.c,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={component:i.c,containerStyle:m},o(t,c(r))));var t,r}},92912:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(27876),i=r(57864),s=r(99112),a=r(18580),o=r(61500),c=r(85328),l=r(58840);const d=s.c.allowSyncDownload?{urlParams:{"X-Plex-Account-ID":1}}:null,u=(0,n.Ul)((function(){return(0,i.M3)(c.c,o.c,(0,a.c)(d),((e,t,r)=>({url:r,supportsSize:!!(e&&e.isCloud&&t)})))}))(l.cp)},33316:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(59396),s=r(89080),a=r.n(s),o=r(36728);const c="SelectedMenuItem-menuItemContainer-PNDPtO";var l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t,r)=>(y(e,"symbol"!=typeof t?t+"":t,r),r);class f extends n.Component{constructor(){super(...arguments),g(this,"onPress",(e=>{const{value:t,onSelect:r,onPress:n}=this.props;r&&r(t),n&&n(e)}))}render(){const e=this.props,{children:t,className:r,menuLabelClassName:i,iconComponent:s,isSelected:l,selectedIconAriaLabel:g}=e,f=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(e,["children","className","menuLabelClassName","iconComponent","isSelected","selectedIconAriaLabel"]);return n.createElement(o.c,(v=((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e})({className:a()(r,l&&"SelectedMenuItem-isSelected-eBXyQi")},f),b={onPress:this.onPress},d(v,u(b))),n.createElement("div",{className:c},n.createElement("div",{className:i},t),l?n.createElement("div",{className:"SelectedMenuItem-selectedIcon-FVHL6f"},n.createElement(s,{"aria-label":g})):null));var v,b}}g(f,"defaultProps",{className:c,menuLabelClassName:"SelectedMenuItem-menuLabel-nQZtur"});const v=f;var b=r(74672),S=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function M(e){return n.createElement(v,(t=((e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&O(e,r,t[r]);return e})({},e),r={selectedIconAriaLabel:(0,i.c)("Selected")},P(t,I(r))));var t,r}M.defaultProps={iconComponent:b.c};const T=M},63300:(e,t,r)=>{"use strict";r.d(t,{c:()=>T});var n=r(11504),i=r(52180),s=r(66780),a=r(59396),o=r(1292),c=r(68064),l=r(82468),d=r(90064),u=r(23384),p=r(79264),m=r(24808),h=r(87808),y=r(29208),g=r(74428),f=r(44064),v=r(35456);var b=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},M=(e,t)=>S(e,P(t));const T=function(e){const{onCancel:t}=e,[r,b]=(0,n.useState)(!1),{metricsPane:S}=(0,y.e0)(),P=(0,n.useCallback)((()=>{(0,i.WI)("metrics").trackClick(M(O({},e.metricsProperties),{page:e.metricsPage,action:s.i0,pane:S})),t()}),[t,e.metricsPage,JSON.stringify(e.metricsProperties)]),I=(0,n.useCallback)((e=>{b(e.target.checked)}),[]),{containerClassName:E,isCancelButtonDisabled:w,isConfirmButtonSpinning:C=!1,isOpen:T,metricsPage:D,metricsProperties:k,kind:x=m.ac,title:A,message:R,accordMessage:N,confirmLabel:L,cancelLabel:j,hideCancelButton:U,infoMessage:F,children:V,onConfirm:_}=e,W=!!N,B=C||W&&!r;return n.createElement(f.c,{containerClassName:E,isOpen:T,metricsPage:D,metricsProperties:k,size:h.wH,onModalClose:P},n.createElement(v.c,{onModalClose:P},n.createElement(p.c,null,A),n.createElement(l.c,{className:"ConfirmModal-confirmBody-FWA1iu ModalBody-modalScroller-QY24jf ModalBody-modalBody-Me4Hwy"},n.createElement("p",null,R),F?n.createElement("p",null,F):null,W?n.createElement("label",{className:"ConfirmModal-accordLabel-Cenbw8"},n.createElement("input",{checked:r,className:"ConfirmModal-accordInput-AsEWLl",type:"checkbox",onChange:I}),N):null,V),n.createElement(d.c,null,n.createElement(u.c,null,U?null:n.createElement(o.c,{className:"ConfirmModal-cancelButton-eGsl9K",isDisabled:w,kind:m.sT,onPress:P},j||(0,a.c)("Cancel")),n.createElement(c.c,M(O({},k),{action:s.zA}),n.createElement(g.c,{className:"ConfirmModal-confirmButton-qn3b_O","data-autofocus":!0,isDisabled:B,isSpinning:C,kind:x,onPress:_},L||(0,a.c)("OK")))))))}},70460:(e,t,r)=>{"use strict";r.d(t,{c:()=>E});var n=r(11504),i=r(52180),s=r(66780),a=r(82468),o=r(79264),c=r(42268),l=r(87808),d=r(44064),u=r(35456);var p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&v(e,r,t[r]);return e},S=(e,t)=>m(e,h(t)),P=(e,t,r)=>(v(e,"symbol"!=typeof t?t+"":t,r),r);class I extends n.Component{constructor(){super(...arguments),P(this,"onItemSelect",(e=>{(0,i.WI)("metrics").trackClick(S(b({},this.props.metricsProperties),{page:this.props.metricsPage,action:s.uW,value:e})),this.props.onItemSelect(e)})),P(this,"onCancel",(()=>{(0,i.WI)("metrics").trackClick(S(b({},this.props.metricsProperties),{page:this.props.metricsPage,action:s.i0})),this.props.onCancel()}))}render(){const{children:e,isOpen:t,metricsPage:r,metricsProperties:i,title:s}=this.props;return n.createElement(d.c,{isOpen:t,metricsPage:r,metricsProperties:i,size:l.wH,onModalClose:this.onCancel},n.createElement(u.c,{onModalClose:this.onCancel},n.createElement(o.c,null,s),n.createElement(a.c,{innerClassName:"ListModal-listModalInnerBody-NBgUtR"},(0,c.c)(e,(e=>n.cloneElement(e,{onSelect:this.onItemSelect}))))))}}const E=I},16712:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(71500),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t,r)=>(u(e,"symbol"!=typeof t?t+"":t,r),r);class m extends n.Component{constructor(){super(...arguments),p(this,"onPress",(e=>{const{value:t,onSelect:r,onPress:n}=this.props;r&&r(t),n&&n(e)}))}render(){const e=this.props,{value:t,onSelect:r}=e,s=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(e,["value","onSelect"]);return n.createElement(i.c,(p=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},s),m={onPress:this.onPress},a(p,o(m))));var p,m}}p(m,"defaultProps",{className:"ListModalItem-listModalItem-yDiCT4"});const h=m},44064:(e,t,r)=>{"use strict";r.d(t,{c:()=>U});var n=r(11504),i=r(42764),s=r(42476),a=r(97104),o=r(6968),c=r(85236),l=r(32036),d=r(93980),u=r(87808),p=r(51268),m=r(83216),h=r(37365);const y={modalContainer:"Modal-modalContainer-iz5oBP",modalBackdrop:"Modal-modalBackdrop-nE6cJg",modal:"Modal-modal-eUJhK0",small:"Modal-small-T6VQQE Modal-modal-eUJhK0",medium:"Modal-medium-WiZeBe Modal-modal-eUJhK0",large:"Modal-large-wPyAA_ Modal-modal-eUJhK0"};var g=Object.defineProperty,f=(e,t,r)=>(((e,t,r)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const v=(0,l.c)(m.c.modalSpeed),b=1e3*v,S={ease:"easeOut",duration:v},P={ease:h.c.motionEasing,duration:v},I={opacity:S},E={enter:{opacity:1,transition:I},exit:{opacity:0,transition:I}},w={scale:P,opacity:S},C={enter:{opacity:1,scale:1,transition:w},exit:{opacity:0,scale:.95,transition:w}};class O extends n.Component{constructor(){super(...arguments),f(this,"_autoFocusTimeoutID"),f(this,"_isBackdropPressed"),f(this,"onBackdropBeginPress",(e=>{this._isBackdropPressed=this._isBackdropTarget(e)})),f(this,"onBackdropEndPress",(e=>{!this.props.preventCloseOnBackdropPress&&this._isBackdropPressed&&this._isBackdropTarget(e)&&this.props.onModalClose(),this._isBackdropPressed=!1})),f(this,"onTouchMove",(e=>{this._isBackdropPressed=!1})),f(this,"onTouchCancel",(e=>{this._isBackdropPressed=!1})),f(this,"onKeyDown",(e=>{const t=e.keyCode;t===o.k0?d.yE(e):t===o.UX&&(e.preventDefault(),e.stopPropagation(),this.props.onModalClose(),d.yQ())}))}componentDidMount(){this.props.isOpen&&this._openModal()}shouldComponentUpdate(e,t){return(0,p.c)(this,e,t)}componentDidUpdate(e){!e.isOpen&&this.props.isOpen?this._openModal():e.isOpen&&!this.props.isOpen&&this._closeModal()}componentWillUnmount(){this.props.isOpen&&this._closeModal()}_openModal(){d.kV(a.findDOMNode(this.refs.modal)),this._autoFocusTimeoutID=window.setTimeout(d.GC,b),document.addEventListener("keydown",this.onKeyDown)}_closeModal(){window.clearTimeout(this._autoFocusTimeoutID),document.removeEventListener("keydown",this.onKeyDown)}_isBackdropTarget(e){const t=this._findEventTarget(e);if(t){const e=a.findDOMNode(this.refs.modal);return!e||!e.contains(t)}return!1}_findEventTarget(e){const t=e.changedTouches;if(!t)return e.target;if(1===t.length){const e=t[0];return document.elementFromPoint(e.clientX,e.clientY)}}render(){const{className:e,backdropClassName:t,containerClassName:r,children:i,size:a,isOpen:o}=this.props;return n.createElement(c.c,{className:r,closeTimeoutMilliseconds:b,isOpen:o},n.createElement(s.Iz,null,o?n.createElement(s.q4.div,{key:"backdrop",animate:"enter",className:t,exit:"exit",initial:"exit",variants:E,onMouseDown:this.onBackdropBeginPress,onMouseUp:this.onBackdropEndPress,onTouchCancel:this.onTouchCancel,onTouchEnd:this.onBackdropEndPress,onTouchMove:this.onTouchMove,onTouchStart:this.onBackdropBeginPress},n.createElement(s.q4.div,{key:"modal",ref:"modal",animate:"enter",className:e||y[a],exit:"exit",initial:"exit",variants:C},i)):null))}}f(O,"defaultProps",{backdropClassName:y.modalBackdrop,containerClassName:y.modalContainer,size:u.IF,preventCloseOnBackdropPress:!1});const M=O;var T=Object.defineProperty,D=Object.defineProperties,k=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&N(e,r,t[r]);if(x)for(var r of x(t))R.call(t,r)&&N(e,r,t[r]);return e},j=(e,t)=>D(e,k(t));const U=function(e){const t=e,{children:r,metricsPage:s,metricsProperties:a}=t,o=((e,t)=>{var r={};for(var n in e)A.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&x)for(var n of x(e))t.indexOf(n)<0&&R.call(e,n)&&(r[n]=e[n]);return r})(t,["children","metricsPage","metricsProperties"]);return n.createElement(M,j(L({},o),{isOpen:!!e.isOpen}),n.createElement(i.c,j(L({},a),{page:s}),r))}},35456:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(71500);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){const t=e,{className:r,children:s,iconComponent:d,onModalClose:u}=t,p=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","iconComponent","onModalClose"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({className:r},p),n.createElement(i.c,{className:"ModalContent-closeButton-mzU7N0 Link-link-SxPFpG",onPress:u},d?n.createElement(d,null):null),s)}d.defaultProps={className:"ModalContent-modalContent-_BsQSK"};const u=d;var p=r(13172),m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e};function P(e){return n.createElement(u,S({},e))}P.defaultProps=h(S({},P.defaultProps),y({iconComponent:p.c}));const I=P},66256:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(82468),s=r(35456);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){var t=e,{children:r}=t,a=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement(s.c,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({},a),n.createElement(i.c,{className:"ModalContentCenter-modalScroller-pV7IMu ModalBody-modalScroller-QY24jf ModalBody-modalBody-Me4Hwy",innerClassName:"ModalContentCenter-innerModalBody-RNzVtO ModalBody-innerModalBody-T6u3sU"},r))}},54084:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(89080),i=r.n(n),s=r(11504),a=r(24808),o=r(52612),c=r(66256);const l={icon:"ModalContentError-icon-vlGETk",default:"ModalContentError-default-OdbxfI",primary:"ModalContentError-primary-x2IkZv",success:"ModalContentError-success-gyh3Qy",danger:"ModalContentError-danger-amxjdX",message:"ModalContentError-message-ZJf83_"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){const t=e,{iconClassName:r,messageClassName:n,kind:a,message:d}=t,y=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["iconClassName","messageClassName","kind","message"]);return s.createElement(c.c,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},y),s.createElement(o.c,{className:i()(l[a],r)}),s.createElement("div",{className:n},d))}y.defaultProps={iconClassName:l.icon,messageClassName:l.message,kind:a.sT};const g=y},88388:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(56960),s=r(59396),a=r(60712),o=r(97928),c=r(63300),l=r(95392);const d=function(e){const{isOpen:t,state:r,onConfirm:d,onClose:u}=e,p=t&&r===o.Zq.CANCEL,m=t&&r===o.Zq.REMOVE,h=t&&r===o.Zq.UPSELL;return n.createElement(n.Fragment,null,n.createElement(c.c,{cancelLabel:(0,s.c)("No"),confirmLabel:(0,s.c)("Yes"),isOpen:p,message:(0,s.c)("Are you sure you want to cancel this download?"),metricsPage:i.Ml,title:(0,s.c)("Cancel Download"),onCancel:u,onConfirm:d}),n.createElement(c.c,{isOpen:m,message:(0,s.c)("Are you sure you want to delete this download?"),metricsPage:i._U,title:(0,s.c)("Delete Download"),onCancel:u,onConfirm:d}),n.createElement(l.c,{isOpen:h,origin:a.C_,onModalClose:u}))}},92796:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({},e))}l.defaultProps={className:"PageHeader-pageHeader-e2k66t"};const d=l},70968:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderLeft-pageHeaderLeft-qWkHw0"};const s=i},93964:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderRight-pageHeaderRight-hBWIio"};const s=i},35740:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(71500);const s=function(e){const{title:t,detail:r,route:s}=e,a=s?i.c:"div";return n.createElement(a,{className:s?"PageHeaderTitle-containerWithRoute-LoJZwv PageHeaderTitle-container-BRFB38":"PageHeaderTitle-container-BRFB38",to:s},n.createElement("div",{className:"PageHeaderTitle-title-W0yjas"},t),r?n.createElement("div",{className:"PageHeaderTitle-detail-vMrapl"},r):null)}},94968:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e})({},i),r)}l.defaultProps={className:"PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"};const d=l},45838:(e,t,r)=>{"use strict";r.d(t,{c:()=>S});var n=r(27876),i=r(57864),s=r(95420),a=r(61500),o=r(85328),c=r(64744),l=r(35860),d=r(42728),u=r(65723),p=r(11504),m=r(59396),h=r(1292),y=r(24808),g=r(69468),f=r(22944);function v(e){const{className:t,machineIdentifier:r,shouldRender:n,showButton:i}=e;return n?p.createElement("div",{className:t},p.createElement("div",{className:"ProgramGuideGracenoteMigrationBanner-messageContainer-MuKgar"},p.createElement(f.c,{className:"ProgramGuideGracenoteMigrationBanner-icon-bE3jfm"}),p.createElement("div",{className:"ProgramGuideGracenoteMigrationBanner-message-AoUi6c"},(0,m.c)("Guide data for this DVR will no longer be updated after January 1, 2021. Please delete and recreate a new DVR and reschedule your recordings to ensure continued coverage."))),i?p.createElement(h.c,{className:"ProgramGuideGracenoteMigrationBanner-button-VRS8lm Button-button-TxWeuE Link-link-SxPFpG",kind:y.Vb,to:(0,g.c)(r,"manage","dvr")},(0,m.c)("Get Started")):null):null}v.defaultProps={className:"ProgramGuideGracenoteMigrationBanner-container-NePMOu",showButton:!0};const b=v,S=(0,n.Ul)((function(){return(0,i.M3)(o.c,a.c,(0,c.c)(d.Ks),((e,t,r)=>{const n=l._u(t.identifier,l._0),i=e.version&&(0,u.c)(e.version,s.default.gracenoteAttribution);return{machineIdentifier:e.machineIdentifier,shouldRender:n&&i&&r&&"Plex"===t.epgSource&&e.isFullOwnedServer}}))}))(b)},18356:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(3268),i=r.n(n),s=r(11504),a=r(27876),o=r(30388);const c={dispatchUpdateDownloadAvailability:o.q8,dispatchUpdateDownloadSubscriptionIDs:o.eQ};function l(e){const{dispatchUpdateDownloadAvailability:t,dispatchUpdateDownloadSubscriptionIDs:r,metadataItemEntityID:n,providerEntityID:i}=e;return(0,s.useEffect)((()=>{const e={metadataItemEntityID:n,providerEntityID:i};t(e),r(e)}),[t,r,n,i]),null}l.propTypes={metadataItemEntityID:i().string.isRequired,providerEntityID:i().string.isRequired,dispatchUpdateDownloadAvailability:i().func.isRequired,dispatchUpdateDownloadSubscriptionIDs:i().func.isRequired};const d=(0,a.Ul)(null,c)(l)},26540:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n,i=r(11504),s=Object.defineProperty;class a extends i.Component{render(){const{children:e,className:t}=this.props;return i.createElement("div",{className:t},e)}}((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(a,"symbol"!=typeof(n="defaultProps")?n+"":n,{className:"HubCellHeader-hubCellHeader-QcXKFB"});const o=a},4416:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({children:e,className:t}){return n.createElement("div",{className:t,"data-testid":"hubTitle"},e)}i.defaultProps={className:"HubCellTitle-hubCellTitle-vtmWL9"};const s=i},97192:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(11504),i=r(27876),s=r(57864),a=r(36324),o=r(89448),c=r(29432),l=r(95924),d=r(32516),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))g.call(t,r)&&f(e,r,t[r]);return e},b=(e,t,r)=>(f(e,"symbol"!=typeof t?t+"":t,r),r);const S={dispatchPopulateMetadataList:c.mC,dispatchPopulateMetadataListRange:c.k1,dispatchDeselectAllMetadataListItems:c.ee,dispatchResetMetadataList:c.y4};class P extends n.Component{constructor(){super(...arguments),b(this,"onPageRequest",(e=>{const{metadataListEntityID:t,disableReloadThreshold:r,dispatchPopulateMetadataListRange:n}=this.props;n(v({metadataListEntityID:t,disableReloadThreshold:r},e))}))}UNSAFE_componentWillMount(){this._populate()}UNSAFE_componentWillReceiveProps(e){const{containerKey:t,metadataListEntityID:r}=e;t===this.props.containerKey&&r===this.props.metadataListEntityID||this._populate(e)}componentWillUnmount(){const{metadataListEntityID:e,shouldResetOnUnmount:t}=this.props;this.props.dispatchDeselectAllMetadataListItems({metadataListEntityID:e}),t&&this.props.dispatchResetMetadataList({metadataListEntityID:e})}_populate(e=this.props){const{entityKey:t,metadataListEntityID:r,initialSize:n,dispatchPopulateMetadataList:i,dispatchPopulateMetadataListRange:s}=e;n&&(0,o.SS)((()=>{t&&this.props.dispatchResetMetadataList({metadataListEntityID:r}),n===1/0?i({metadataListEntityID:r}):s({metadataListEntityID:r,startIndex:0,endIndex:n-1,pages:1})}))}render(){const e=this.props,{component:t,dispatchPopulateMetadataListRange:r,dispatchDeselectAllMetadataListItems:i,dispatchResetMetadataList:s}=e,a=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(e,["component","dispatchPopulateMetadataListRange","dispatchDeselectAllMetadataListItems","dispatchResetMetadataList"]);return n.createElement(t,(o=v({},a),c={onPageRequest:this.onPageRequest},p(o,m(c))));var o,c}}b(P,"defaultProps",{disableReloadThreshold:!1,shouldResetOnUnmount:!1});const I=(0,i.Ul)((function(){return(0,s.M3)((0,s.M3)(((e,{columnAdjustment:t})=>t),d.c,((e,t)=>e||t.columnAdjustment)),(0,a.c)(),l.c,((e,t,r)=>({metadataItemEntityIDs:t.metadataItems,entityKey:t.entityKey,containerKey:t.containerKey||t.key,disableReloadThreshold:!!r.activeSelectionType,columnAdjustment:e,totalSize:t.totalSize,librarySectionID:t.librarySectionID,populatedRange:t.populatedRange,allowSync:t.allowSync,isPending:t.isPending,isPopulated:t.isPopulated,isMetaPopulated:t.isMetaPopulated,error:t.error,firstItemType:t.firstItemType,firstItemSubtype:t.firstItemSubtype,isFirstItemLibraryItem:t.isFirstItemLibraryItem,isDirectoryList:t.isDirectoryList,isChannelsList:t.isChannelsList})))}),S)(P)},11928:(e,t,r)=>{"use strict";r.d(t,{c:()=>N});var n=r(27876),i=r(57864),s=r(4659),a=r(81807),o=r(29432),c=r(92076),l=r(96568),d=r(47744),u=r(12612),p=r(49579),m=r(95924),h=r(66992),y=r(33356),g=r(11504),f=r(59396),v=r(55268),b=r(854),S=r(86108),P=r(82432),I=r(59476);var E=Object.defineProperty,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var T=Object.defineProperty,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e};const N=(0,n.Ul)((function(){return(0,i.M3)(((e,{listContext:t})=>t),((e,{cellWidth:t})=>t),((e,{displayFieldDefinitions:t})=>t),(0,s.c)(),(0,i.M3)(((e,{listType:t})=>t),(0,s.c)(),((e,t)=>{if(!t)return e;const r=e===p.Ww&&t.type===u.YH,n=e===p.YH&&t.type===u.MOVIE;return r||n?e:t.extraType?p.qc:t.type})),(0,i.M3)(((e,{listSubtype:t})=>t),(0,s.c)(),((e,t)=>t?t.subtype:e)),(0,d.c)(),(0,l.c)(),m.c,(0,i.M3)(((e,{providerEntityID:t})=>t),c.c,(0,s.c)(),((e,t,r={})=>!!t[r.providerEntityID||e])),((e,t,r,n={},i,s,o,c,l,d)=>{var u;const p=(0,y.c)(t,null,i,n,e);return{itemServerEntityID:n.serverEntityID,itemProviderEntityID:n.providerEntityID,isFeaturedHub:(0,a.c)(e),metadataKey:n.key,displayFieldDefinitions:r,displayFields:(null==(u=n.Context)?void 0:u.displayFields)||(0,h.c)(i,s,r),type:i,subtype:s,selectionType:o,activeSelectionType:l.activeSelectionType,isSelected:c,icon:n.icon,imageWidth:p.width,imageHeight:p.height,imageUrl:p.url,isFolder:n.isFolder,isUnavailable:!d}}))}),(function(e,t){const{metadataListEntityID:r}=t;return{onSelectItem(t){e((0,o.Q5)(R({metadataListEntityID:r},t)))},onDeselectItem(t){e((0,o.M$)(R({metadataListEntityID:r},t)))}}}))((function(e){const t=e,{className:r,serverEntityID:n,providerEntityID:i,metadataItemEntityID:s,containerKey:a,cellIndex:o,cellX:c,cellY:l,cellWidth:d,cellHeight:u,isVirtual:p,isVisible:m,isScrolling:y,listType:E,listContext:T,titleComponents:D,isFeaturedHub:k,metadataKey:x,displayFields:A,displayFieldDefinitions:R,type:N,subtype:L,selectionType:j,activeSelectionType:U,isSelected:F,isUnavailable:V,imageWidth:_,imageHeight:W,imageUrl:B,onSelectItem:H,onDeselectItem:z}=t,G=((e,t)=>{var r={};for(var n in e)C.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))t.indexOf(n)<0&&O.call(e,n)&&(r[n]=e[n]);return r})(t,["className","serverEntityID","providerEntityID","metadataItemEntityID","containerKey","cellIndex","cellX","cellY","cellWidth","cellHeight","isVirtual","isVisible","isScrolling","listType","listContext","titleComponents","isFeaturedHub","metadataKey","displayFields","displayFieldDefinitions","type","subtype","selectionType","activeSelectionType","isSelected","isUnavailable","imageWidth","imageHeight","imageUrl","onSelectItem","onDeselectItem"]),q=(0,v.c)(e),K=!x,Q=K||V||q.isPlaceholder,$=(0,I.q)(D,E,N,L,T,A||(0,h.c)(N,L,R),R),Y=k?$.slice(0,2):[],X=k?$.slice(2):$;return g.createElement("div",{className:r,"data-testid":"cellItem",style:q.style},Q?g.createElement(S.c,{imageHeight:W,imageWidth:_,isSelected:F}):g.createElement(b.c,((e,t)=>{for(var r in t||(t={}))C.call(t,r)&&M(e,r,t[r]);if(w)for(var r of w(t))O.call(t,r)&&M(e,r,t[r]);return e})({activeSelectionType:U,containerKey:a,imageHeight:W,imageUrl:B,imageWidth:_,isSelected:F,listContext:T,listType:E,metadataItemEntityID:s,metadataKey:x,providerEntityID:i,selectionType:j,serverEntityID:n,type:N,onDeselectItem:z,onSelectItem:H},G)),g.createElement("div",{className:k?"MetadataPosterCell-continueWatchingTitleContainer-_I46DC":"MetadataPosterCell-titleContainer-OxfLNZ","data-testid":"metadataTitleContainer"},K?(0,f.c)("Loading..."):null,!K&&Y.length?g.createElement("div",{className:"MetadataPosterCell-splitTitleContainer-sldLdl"},Y.map(((t,r)=>g.createElement(P.c,{key:r,component:t,containerKey:a,isDoubleLine:t.isDoubleLine,isSecondary:r>0,isSplitLine:!0,metadataItemEntityID:s,metricsContext:e.metricsContext,providerEntityID:i,serverEntityID:n})))):null,K?null:X.map(((t,r)=>t?g.createElement(P.c,{key:r,component:t,containerKey:a,isDoubleLine:t.isDoubleLine,isSecondary:Y.length+r>0,metadataItemEntityID:s,metricsContext:e.metricsContext,providerEntityID:i,serverEntityID:n}):null))))}))},61800:(e,t,r)=>{"use strict";r.d(t,{c:()=>I});var n=r(57864),i=r(52180),s=r(42540),a=r(66780),o=r(51796),c=r(11504),l=r(59396),d=r(36728),u=r(55588),p=r(97192),m=r(54872),h=r(77584),y=r(27876),g=r(4659);const f=(0,n.M3)((0,g.c)(),(({ratingKey:e,title:t})=>({ratingKey:e,title:t}))),v=(0,y.Ul)(f)((function(e){const{ratingKey:t,title:r,onPress:n}=e,i=(0,c.useCallback)((()=>n(t)),[n,t]);return c.createElement(d.c,{className:"MetadataMenuItem-item-nZX_q7",onPress:i},r)}));function b(e){const{metadataItemEntityIDs:t,showTopSeparator:r,header:n,onItemPress:i}=e;return t.length?c.createElement(c.Fragment,null,r&&t.length?c.createElement(h.c,null):null,n?c.createElement(m.c,null,n):null,t.map((e=>c.createElement(v,{key:e,metadataItemEntityID:e,onPress:i})))):null}b.defaultProps={showTopSeparator:!0};const S=b,P=(0,n.M3)((e=>e.ui.addToPlaylistMenu.recentPlaylists),(e=>({recentPlaylists:e}))),I=(0,o.c)(P,(function(e,t){const{serverEntityID:r,providerEntityID:n,metadataItemEntityID:o,metadataListEntityID:c}=t;return{onInitMenu(){e((0,s.Cg)({serverEntityID:r,providerEntityID:n,metadataItemEntityID:o,metadataListEntityID:c}))},onClearMenu(){e((0,s.WA)())},onAddToExistingPlaylistPress(r){(0,i.WI)("metrics").trackClick({page:t.metricsPage,action:a.io}),e((0,s.uA)({providerEntityID:n,playlistID:r}))}}}))((function(e){const{showAddToPlaylist:t,showAddToSmartPlaylist:r,recentPlaylists:n,customFilterRoute:i,onAddToPlaylistPress:s,onAddToSmartPlaylistPress:a,onAddToExistingPlaylistPress:o,onInitMenu:m,onClearMenu:h,onMenuClose:y}=e;(0,c.useEffect)((()=>(m(),h)),[h,m]);const g=!!i;return c.createElement(c.Fragment,null,t?c.createElement(d.c,{onPress:s},(0,l.c)("Add to Playlist...")):null,r?c.createElement(d.c,{onPress:a},(0,l.c)("Save as Smart Playlist...")):null,g?c.createElement(d.c,{to:i},(0,l.c)("Create Smart Playlist")):null,n?c.createElement(p.c,{component:S,header:(0,l.c)("Add to..."),initialSize:3,metadataListEntityID:n,showTopSeparator:t||g,onItemPress:(0,u.c)(o,y)}):null)}))},66636:(e,t,r)=>{"use strict";r.d(t,{c:()=>We});var n=r(27876),i=r(57864),s=r(47456),a=r(35688),o=r(4659),c=r(83095),l=r(47611),d=r(85328),u=r(1868),p=r(51796),m=r(38140),h=r(30388),y=r(95808),g=r(12840),f=r(32636),v=r(11504),b=r(95720),S=r.n(b),P=r(9868),I=r(66780),E=r(35860),w=r(59396),C=r(24752),O=r(36728),M=r(77584),T=r(68064),D=r(55588),k=r(24808),x=r(63856),A=r(63136),R=r(97928),N=r(88388),L=r(92076),j=r(91176),U=r(42728),F=r(12612),V=r(60752),_=r(64388);const W="AddToLibraryMenuItem-item-jgJsg0";var B=Object.defineProperty,H=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class K extends v.Component{constructor(){var e,t;super(...arguments),t=e=>{const{metadataItemEntityID:t,onItemPress:r}=this.props;return()=>r(((e,t)=>{for(var r in t||(t={}))z.call(t,r)&&q(e,r,t[r]);if(H)for(var r of H(t))G.call(t,r)&&q(e,r,t[r]);return e})({metadataItemEntityID:t},e))},q(this,"symbol"!=typeof(e="createOnPress")?e+"":e,t)}render(){const{serverDirectories:e,hasMultipleServers:t,onMenuClose:r}=this.props;if(!e||!e.length)return null;if(1===e.length){const t=e[0].title,n=(0,w.c)("Add to {libraryTitle}",{libraryTitle:t});return v.createElement(O.c,{className:W,title:n,onPress:(0,D.c)(this.createOnPress(e[0]),r)},n)}return v.createElement(_.c,{label:(0,w.c)("Add to Library"),onMenuClose:r},e.map(((e,n)=>{var i=e,{serverFriendlyName:s,title:a}=i,o=((e,t)=>{var r={};for(var n in e)z.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&H)for(var n of H(e))t.indexOf(n)<0&&G.call(e,n)&&(r[n]=e[n]);return r})(i,["serverFriendlyName","title"]);const c=a+(t?` (${s})`:"");return v.createElement(O.c,{key:n,className:W,title:c,onPress:(0,D.c)(this.createOnPress(o),r)},c)})))}}const Q=K,$=(0,i.M3)(L.c,j.c,((e,t)=>{let r=0;return{serverDirectories:t.reduce(((t,n)=>{if(n.isOutOfDate||!n.ownerFeatures.includes(U.sv))return t;const i=(0,V.c)(n.providers.map((t=>e[t])),[F.iI]).map((([,e])=>e));i.length&&(r+=1);const s=i.map((e=>({serverEntityID:n.entityID,serverFriendlyName:n.friendlyName,title:e.title,sectionKey:e.key})));return t.push(...s),t}),[]),hasMultipleServers:r>1}})),Y={onItemPress:s.mc},X=(0,n.Ul)($,Y)(Q);var J=r(53036),Z=r(56960),ee=r(86264),te=r(71264),re=r(96736),ne=r(17068),ie=r(70460),se=r(16712),ae=Object.defineProperty,oe=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ue=function(e){const t=e,{mediaItems:r}=t,n=((e,t)=>{var r={};for(var n in e)ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oe)for(var n of oe(e))t.indexOf(n)<0&&le.call(e,n)&&(r[n]=e[n]);return r})(t,["mediaItems"]);return v.createElement(ie.c,((e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&de(e,r,t[r]);if(oe)for(var r of oe(t))le.call(t,r)&&de(e,r,t[r]);return e})({metricsPage:Z.K6,title:(0,w.c)("Play Version")},n),r.map(((e,t)=>{const r=[];if(e.bitrate&&r.push((0,re.c)(e.bitrate)),e.videoResolution){const t=(0,ee.c)(e),n=t?t.scanType:null;r.push((0,te.c)(e.videoResolution,n))}const n=!!e.title,i=r.length>0;return v.createElement(se.c,{key:t,value:t},n?e.title:null,n&&i?v.createElement(ne.c,null):null,i?r.join(", "):null,n||i?null:(0,w.c)("Unknown"))})))};var pe=r(8674),me=r(7396),he=r(16332),ye=r(42466),ge=r(51792),fe=r(61800);const ve=function(e){const{metadataItemEntityID:t,providerEntityID:r,serverEntityID:n,showAddToPlaylist:i,onMenuClose:s,onPress:a}=e;return v.createElement(_.c,{label:(0,w.c)("Add to Playlist"),onMenuClose:s},v.createElement(fe.c,{metadataItemEntityID:t,providerEntityID:r,serverEntityID:n,showAddToPlaylist:i,onAddToPlaylistPress:a,onMenuClose:s}))};r(85236);var be=r(87440);const Se=function(e){const{metadataItem:t,onMenuClose:r}=e,n=(0,be.c)(),i=t.downloadUrl?t.downloadUrl():null,s=i&&!0;return v.createElement(v.Fragment,null,v.createElement(O.c,{download:s,target:i?n:void 0,to:i,onPress:t.downloadUrl?r:(0,D.c)(e.onDownloadVersionPress,r)},(0,w.c)("Save File")),null)};var Pe=Object.defineProperty,Ie=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Oe=function(e){const t=e,{hasDownloadState:r,hasOfflineFile:n,hasOwnSubscription:i,label:s,progress:a}=t,o=((e,t)=>{var r={};for(var n in e)Ee.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ie)for(var n of Ie(e))t.indexOf(n)<0&&we.call(e,n)&&(r[n]=e[n]);return r})(t,["hasDownloadState","hasOfflineFile","hasOwnSubscription","label","progress"]);return v.createElement(O.c,((e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&Ce(e,r,t[r]);if(Ie)for(var r of Ie(t))we.call(t,r)&&Ce(e,r,t[r]);return e})({},o),s)},Me=["showPlay","showPlayVersion","showPlayAll","showShuffle","showQueue","showPlayPlexMix","showQueuePlexMix","showPlayTrailer","showPlayMusicVideo","showWatchTogether","showAddToPlaylist","showAddToLibrary"],Te=["showEdit","showMarkPlayed","showMarkUnplayed","showModifySmartPlaylist","showSettings","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showGetInfo"];function De(e,t){return!!S().find(e,(e=>t[e]))}function ke(e){const{target:t,isOpen:r,metadataItem:n,metadataItemEntityID:i,metricsPage:s,providerEntityID:a,serverEntityID:o,onPlayVersionPress:c,onCancelDownloadActivity:l,onDeleteDownloadSubscription:d,onCreateDownloadSubscription:u,onMenuClose:p}=e,m=(0,ye.c)(e.onMarkPlayedConfirm),h=(0,ye.c)(e.onMarkUnplayedConfirm),y=(0,ye.c)(),g=(0,P.y)(),f=(0,ye.c)(),b=(0,ye.c)(),S=(0,P.y)(),L=(0,R.Uz)({metadataItemEntityID:i,metricsPage:s,providerEntityID:a,serverEntityID:o,onCancelDownloadActivity:l,onCreateDownloadSubscription:u,onDeleteDownloadSubscription:d}),j=(0,v.useCallback)((e=>{c(e),y.onClose()}),[c,y]),U=!!n.metadataState,F=!!n.mediaState,V=De(Me,e),_=De(Te,e),W=V&&_;return v.createElement(v.Fragment,null,v.createElement(C.c,{isOpen:r,target:t,onMenuClose:p},e.showPlay?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayPress,p)},(0,w.c)("Play")):null,e.showPlayVersion?v.createElement(O.c,{onPress:(0,D.c)(y.onOpen,p)},(0,w.c)("Play Version...")):null,e.showPlayAll?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayAllPress,p)},(0,w.c)("Play All")):null,e.showShuffle?v.createElement(O.c,{onPress:(0,D.c)(e.onShufflePress,p)},(0,w.c)("Shuffle")):null,e.showPlayRadio?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayRadioPress,p)},(0,w.c)("Play Radio")):null,e.showPlayArtistTV?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayArtistTVPress,p)},(0,w.c)("Play Artist TV")):null,e.showWatchTogether?v.createElement(O.c,{onPress:(0,D.c)(g.onOpen,p)},(0,w.c)("Watch Together...")):null,e.showQueue?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayNextPress,p)},(0,w.c)("Play Next")):null,e.showQueue?v.createElement(O.c,{onPress:(0,D.c)(e.onAddToQueuePress,p)},(0,w.c)("Add to Queue")):null,e.showPlayPlexMix?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayPlexMixPress,p)},(0,w.c)("Play Plex Mix")):null,e.showQueuePlexMix?v.createElement(O.c,{onPress:(0,D.c)(e.onQueuePlexMixPress,p)},(0,w.c)("Queue Plex Mix")):null,e.showPlayTrailer?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayPrimaryExtraPress,p)},(0,w.c)("Play Trailer")):null,e.showPlayMusicVideo?v.createElement(O.c,{onPress:(0,D.c)(e.onPlayPrimaryExtraPress,p)},(0,w.c)("Play Music Video")):null,e.showAddToWatchlist?v.createElement(O.c,{onPress:(0,D.c)(e.onAddToWatchlistPress,p)},n.watchlistedAt?(0,w.c)("Remove from Watchlist"):(0,w.c)("Add to Watchlist")):null,e.showAddToPlaylist?v.createElement(T.c,{action:I.io},v.createElement(ve,{metadataItemEntityID:i,providerEntityID:a,serverEntityID:o,showAddToPlaylist:!0,onMenuClose:p,onPress:(0,D.c)(b.onOpen,p)})):null,e.showAddToSaved?v.createElement(O.c,{onPress:(0,D.c)(e.onAddToSavedPress,p)},(B=n.saved,H=e.providerIdentifier,E._u(H,E.y6)?B?(0,w.c)("Remove from My TIDAL"):(0,w.c)("Add to My TIDAL"):B?(0,w.c)("Remove from Favorites"):(0,w.c)("Add to Favorites"))):null,e.showAddToPicks?v.createElement(O.c,{onPress:(0,D.c)(e.onAddToPicksPress,p)},n.picked?(0,w.c)("Remove from Plex Picks"):(0,w.c)("Add to Plex Picks")):null,e.showAddToLibrary?v.createElement(X,{metadataItemEntityID:i,providerEntityID:a,serverEntityID:o,onMenuClose:e.onMenuClose}):null,W?v.createElement(M.c,null):null,e.showEdit?v.createElement(O.c,{onPress:(0,D.c)(e.onEditPress,p)},(0,w.c)("Edit")):null,e.showModifySmartPlaylist?v.createElement(O.c,{onPress:(0,D.c)(e.onModifySmartPlaylistPress,p)},(0,w.c)("Edit Filters")):null,e.showSettings?v.createElement(O.c,{onPress:(0,D.c)(f.onOpen,p)},(0,w.c)("Settings")):null,e.showMarkPlayed?v.createElement(O.c,{onPress:(0,D.c)(m.onOpen,p)},(0,x.c)(n.type)):null,e.showMarkUnplayed?v.createElement(O.c,{onPress:(0,D.c)(h.onOpen,p)},(0,x.c)(n.type,!0)):null,e.showRefresh?v.createElement(O.c,{isDisabled:U,onPress:(0,D.c)(e.onRefreshPress,p)},(0,w.c)("Refresh Metadata")):null,e.showAnalyze?v.createElement(O.c,{isDisabled:F,onPress:(0,D.c)(e.onAnalyzePress,p)},(0,w.c)("Analyze")):null,e.showFixMatch?v.createElement(O.c,{onPress:(0,D.c)(e.onFixMatchPress,p)},(0,w.c)("Fix Match...")):null,e.showMatch?v.createElement(O.c,{onPress:(0,D.c)(e.onFixMatchPress,p)},(0,w.c)("Match...")):null,e.showUnmatch?v.createElement(O.c,{onPress:(0,D.c)(e.onUnmatchPress,p)},(0,w.c)("Unmatch")):null,e.showSplitApart?v.createElement(O.c,{onPress:(0,D.c)(e.onSplitApartPress,p)},(0,w.c)("Split Apart")):null,e.showSyncDownload?v.createElement(R.cp,{component:Oe,metadataItemEntityID:i,providerEntityID:a,serverEntityID:o,onPress:(0,D.c)(L.onPress,p)}):null,e.showOptimize?v.createElement(O.c,{onPress:(0,D.c)(e.onOptimizePress,p)},(0,w.c)("Optimize...")):null,e.showDownload?v.createElement(T.c,{action:I.Qv},v.createElement(Se,{metadataItem:n,onDownloadVersionPress:e.onDownloadVersionPress,onMenuClose:p})):null,e.showShare?v.createElement(T.c,{action:I.gB},v.createElement(O.c,{onPress:(0,D.c)(S.onOpen,p)},(0,w.c)("Grant Access"))):null,e.showDelete?v.createElement(O.c,{kind:n.remoteMedia?void 0:k.od,onPress:(0,D.c)(e.onDeletePress,p)},n.remoteMedia?(0,w.c)("Remove"):(0,w.c)("Delete")):null,e.showDeleteVersion?v.createElement(O.c,{kind:k.od,onPress:(0,D.c)(e.onDeleteVersionPress,p)},(0,w.c)("Delete Version")):null,e.showViewPlayHistory?v.createElement(O.c,{to:(0,ge.c)(e.machineIdentifier,n)},(0,w.c)("View Play History")):null,e.showGetInfo?v.createElement(O.c,{onPress:(0,D.c)(e.onGetInfoPress,p)},(0,w.c)("Get Info")):null),e.showMarkPlayed||e.showMarkUnplayed?v.createElement(J.c,{isOpen:m.isOpen||h.isOpen,leafCount:m.isOpen?n.unviewedLeafCount:n.viewedLeafCount,markUnplayed:h.isOpen,subtype:n.subtype,title:n.title,type:n.type,onCancel:m.isOpen?m.onClose:h.onClose,onConfirm:m.isOpen?m.onConfirm:h.onConfirm}):null,e.showAddToPlaylist?v.createElement(me.c,{isOpen:b.isOpen,metadataItemEntityID:i,providerEntityID:a,serverEntityID:o,onModalClose:b.onClose}):null,e.showSyncDownload?v.createElement(N.c,{isOpen:L.isOpen,state:L.state,onClose:L.onClose,onConfirm:L.onConfirm}):null,v.createElement(ue,{isOpen:y.isOpen,mediaItems:n.Media,onCancel:y.onClose,onItemSelect:j}),v.createElement(pe.c,{isOpen:f.isOpen,metadataItemEntityID:i,providerEntityID:a,serverEntityID:o,onModalClose:f.onClose}),e.showWatchTogether?v.createElement(he.c,{metadataItemEntityID:i,metricsProperties:{context:e.metricsContext,page:s},modalState:g,serverEntityID:o}):null,e.showShare?v.createElement(A.c,{isExternallyTriggered:!0,listType:["PlexAccounts","HomeUsers"],metadataItem:n,modalState:S,type:"ShareLibrary"}):null);var B,H}ke.defaultProps={allowRedirectOnDelete:!1};const xe=ke;var Ae=Object.defineProperty,Re=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Fe=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ve=(e,t)=>{for(var r in t||(t={}))je.call(t,r)&&Fe(e,r,t[r]);if(Le)for(var r of Le(t))Ue.call(t,r)&&Fe(e,r,t[r]);return e},_e=(e,t)=>Re(e,Ne(t));const We=(0,n.Ul)(l.c)((0,p.c)((function(){return(0,i.M3)(d.c,c.c,g.c,(0,o.c)(),(0,y.c)(),((e,t,r,n,i)=>Ve({metadataItem:n,machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,embeddedServerEntityID:r},i)))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,itemServerEntityID:t.itemServerEntityID,itemProviderEntityID:t.itemProviderEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext}};return{onPlayPress(){e(a.wb(_e(Ve({},r),{options:{containerKey:t.containerKey,listType:t.listType}})))},onPlayVersionPress(n){e(a.wb(_e(Ve({},r),{startMediaIndex:n,options:{containerKey:t.containerKey,listType:t.listType}})))},onPlayAllPress(){e(a.gD(r))},onShufflePress(){e(a.WI(r))},onPlayNextPress(){e(a.gV(_e(Ve({},r),{options:{playAll:!0,next:!0}})))},onAddToQueuePress(){e(a.gV(_e(Ve({},r),{options:{playAll:!0,next:!1}})))},onPlayPlexMixPress(){e(a.Mv(r))},onQueuePlexMixPress(){e(a.GO(r))},onPlayPrimaryExtraPress(){e(a.M7(r))},onPlayRadioPress(){e(a.Gm(Ve({playlistType:u.KI},r)))},onPlayArtistTVPress(){e(a.Gm(Ve({playlistType:u.im},r)))},onAddToPicksPress(){e((0,s.Ap)(r))},onAddToSavedPress(){e((0,s.GS)(r))},onAddToWatchlistPress(){e((0,s.gt)(r))},onMarkPlayedConfirm(){e(h.Qz(_e(Ve({},r),{skipConfirm:!0})))},onMarkUnplayedConfirm(){e(h.Si(_e(Ve({},r),{skipConfirm:!0})))},onEditPress(){e(h.W_(r))},onRefreshPress(){e(h.oF(r))},onModifySmartPlaylistPress(){e(h.U3(r))},onAnalyzePress(){e(h.OE(r))},onFixMatchPress(){e(h.eu(r))},onUnmatchPress(){e(h.MR(r))},onSplitApartPress(){e(h.Q3(r))},onOptimizePress(){e(h.AL(r))},onDownloadVersionPress(){e(h.m9(r))},onDeletePress(){e(h.SW(_e(Ve({},r),{options:{skipRedirect:!t.allowRedirectOnDelete}})))},onDeleteVersionPress(){e(h.qK(r))},onGetInfoPress(){e(h.GW(r))},onCancelDownloadActivity(){e(m.Ws(r))},onDeleteDownloadSubscription(){e(m.Mi(r))},onCreateDownloadSubscription(){e(m.Gi(r))}}}),f.c)(xe))},52280:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(11504),i=r(59396),s=r(71500),a=r(49340),o=r(66636),c=r(54505),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t,r)=>(m(e,"symbol"!=typeof t?t+"":t,r),r);class y extends n.Component{constructor(e,t){super(e,t),h(this,"_moreButtonID"),h(this,"onActionsPress",(e=>{this.setState({hasBeenOpened:!0},(()=>{this.props.onMenuOpenChange(!this.props.isMenuOpen)}))})),h(this,"onActionsMenuClose",(()=>{this.props.onMenuOpenChange(!1)})),this._moreButtonID=(0,a.c)(),this.state={hasBeenOpened:!1}}render(){const e=this.props,{"data-testid":t,className:r,iconClassName:a,tabIndex:l,serverEntityID:h,providerEntityID:y,metadataItemEntityID:g,containerKey:f,listType:v,isMenuOpen:b,onMenuOpenChange:S}=e,P=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(e,["data-testid","className","iconClassName","tabIndex","serverEntityID","providerEntityID","metadataItemEntityID","containerKey","listType","isMenuOpen","onMenuOpenChange"]);return n.createElement(s.c,{"aria-haspopup":!0,"aria-label":(0,i.c)("More Actions"),className:r,"data-testid":t,id:this._moreButtonID,tabIndex:l,onPress:this.onActionsPress},n.createElement(c.c,{className:a}),this.state.hasBeenOpened?n.createElement(o.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({containerKey:f,isOpen:b,listType:v,metadataItemEntityID:g,providerEntityID:y,serverEntityID:h,target:this._moreButtonID,onMenuClose:this.onActionsMenuClose},P)):null)}}const g=y},53036:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n,i=r(11504),s=r(56960),a=r(59396),o=r(12612),c=r(63300),l=Object.defineProperty;function d(e){return e!==o.M7&&e!==o.SEASON}function u({title:e,leafCount:t}){return 1===t?(0,a.c)('Are you sure you want to mark 1 episode in "{showTitle}" as unwatched?',{showTitle:e}):(0,a.c)('Are you sure you want to mark {numEpisodes} episodes in "{showTitle}" as unwatched?',{numEpisodes:t,showTitle:e})}function p({title:e,leafCount:t}){return 1===t?(0,a.c)('Are you sure you want to mark 1 episode in "{showTitle}" as watched?',{showTitle:e}):(0,a.c)('Are you sure you want to mark {numEpisodes} episodes in "{showTitle}" as watched?',{numEpisodes:t,showTitle:e})}class m extends i.Component{componentDidMount(){this._checkAutoConfirm()}componentDidUpdate(){this._checkAutoConfirm()}_checkAutoConfirm(){d(this.props.type)&&this.props.isOpen&&this.props.onConfirm()}render(){const{isOpen:e,type:t,markUnplayed:r,onConfirm:n,onCancel:o}=this.props;return d(t)?null:i.createElement(c.c,{isOpen:e,message:r?u(this.props):p(this.props),metricsPage:r?s.Sk:s.e0,title:r?(0,a.c)("Mark as Unwatched"):(0,a.c)("Mark as Watched"),onCancel:o,onConfirm:n})}}((e,t,r)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(m,"symbol"!=typeof(n="propTypes")?n+"":n,undefined);const h=m},8674:(e,t,r)=>{"use strict";r.d(t,{c:()=>U});var n=r(11504),i=r(56960),s=r(87808),a=r(44064),o=r(27876),c=r(57864),l=r(4659),d=r(89448),u=r(30388),p=r(59396),m=r(1292),h=r(9464),y=r(84536),g=r(82468),f=r(90064),v=r(23384),b=r(79264),S=r(24808),P=r(9176),I=r(81940),E=r(35456);var w=Object.defineProperty,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const D=function(e){const{isSettingsUpdating:t,hasError:r,settings:i,onSubmit:s,onModalClose:a}=e;return n.createElement(y.cp,{className:"SettingsModalContent-form-t3OfDr",onSubmit:s},n.createElement(E.c,{onModalClose:a},n.createElement(b.c,null,(0,p.c)("Settings")),r?n.createElement(P.c,{errorMessage:(0,p.c)("There was an error saving the settings")}):null,n.createElement(g.c,null,i.map((e=>n.createElement(I.c,((e,t)=>{for(var r in t||(t={}))O.call(t,r)&&T(e,r,t[r]);if(C)for(var r of C(t))M.call(t,r)&&T(e,r,t[r]);return e})({key:e.id},e))))),n.createElement(f.c,null,n.createElement(v.c,null,n.createElement(m.c,{onPress:a},(0,p.c)("Cancel")),n.createElement(h.c,{isSpinning:t,kind:S.ac,type:"submit"},(0,p.c)("Save"))))))};var k=Object.defineProperty,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class L extends n.Component{componentDidUpdate(e,t){!e.isSettingsUpdating||this.props.isSettingsUpdating||this.props.hasError||this.props.onModalClose()}componentWillUnmount(){this.props.onClearError()}render(){return n.createElement(D,((e,t)=>{for(var r in t||(t={}))A.call(t,r)&&N(e,r,t[r]);if(x)for(var r of x(t))R.call(t,r)&&N(e,r,t[r]);return e})({},this.props))}}const j=(0,o.Ul)((function(){return(0,c.M3)((0,l.c)(),((e={})=>({settings:e.preferences,isSettingsUpdating:e.isSettingsUpdating,hasError:!!e.settingsUpdateError})))}),(function(e,t){return{onSubmit(r){(0,d.SS)((()=>{e((0,u._O)({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,data:r}))}))},onClearError(){e((0,u.Yz)({metadataItemEntityID:t.metadataItemEntityID}))}}}))(L),U=function(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:o,isOpen:c,metricsProperties:l,onModalClose:d}=e;return n.createElement(a.c,{isOpen:c,metricsPage:i.kc,metricsProperties:l,size:s.wH,onModalClose:d},n.createElement(j,{metadataItemEntityID:o,providerEntityID:r,serverEntityID:t,onModalClose:d}))}},7396:(e,t,r)=>{"use strict";r.d(t,{c:()=>Fe});var n=r(11504),i=r(56960),s=r(87808),a=r(44064),o=r(27876),c=r(57864),l=r(80324),d=r(52224),u=r(59396),p=r(84536),m=r(12784),h=r(4304),y=r(82468),g=r(90064),f=r(79264),v=r(24808),b=r(74428),S=r(9176),P=r(35456),I=r(97192),E=r(83095),w=r(11876),C=r(61500),O=r(65348),M=r(85328),T=r(90044),D=r(74964),k=r(35860);function x({server:e,provider:t}){if(!t||!t.features)return!1;if(e&&(e.isShared||e.isCloud||!e.isConnected))return!1;const r=[k.y6,k.Qh];return!!k._u(t.identifier,r)&&!!t.features.find((e=>e.type===T.c.PLAYLIST&&e.flavor===D.GG))}var A=r(52432),R=r(49340),N=r(2540),L=r(24752),j=r(33316),U=Object.defineProperty;class F extends n.Component{constructor(){var e;super(...arguments),((e,t,r)=>{t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="onPress")?e+"":e,(e=>{this.props.isSelected||this.props.onDestinationSelect(this.props.destination),this.props.onMenuClose()}))}render(){const{destination:e,isSelected:t}=this.props;return n.createElement(j.c,{isSelected:t,onPress:this.onPress},e.name)}}const V=F,_=function(e){const{target:t,isOpen:r,destination:i,destinations:a,onMenuClose:o,onDestinationSelect:c}=e;return n.createElement(L.c,{isOpen:r,size:s.OM,target:t,onMenuClose:o},a.map(((e,t)=>n.createElement(V,{key:`playlist-destination-${t}`,destination:e,isSelected:e===i,onDestinationSelect:c,onMenuClose:o}))))};var W=Object.defineProperty,B=(e,t,r)=>(((e,t,r)=>{t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class H extends n.Component{constructor(e,t){super(e,t),B(this,"_menuButtonID"),B(this,"onMenuButtonPress",(()=>{this.setState({isMenuOpen:!this.state.isMenuOpen})})),B(this,"onMenuClose",(()=>{this.setState({isMenuOpen:!1})})),this.state={isMenuOpen:!1},this._menuButtonID=(0,R.c)()}render(){const{className:e,destination:t,destinations:r,onDestinationSelect:i}=this.props,{isMenuOpen:s}=this.state;return!r||r.length<2?null:n.createElement("div",{className:e},n.createElement(A.c,{direction:s?N.UP:N.aK,id:this._menuButtonID,onPress:this.onMenuButtonPress},t.name),n.createElement(_,{destination:t,destinations:r,isOpen:s,target:this._menuButtonID,onDestinationSelect:i,onMenuClose:this.onMenuClose}))}}const z=H,G=(0,c.M3)(w.c,O.c,E.c,((e,t,r)=>{const n={server:t,provider:r},i=e.filter(x);return i.find((({server:e,provider:n})=>e.machineIdentifier===t.machineIdentifier&&n.identifier===r.identifier))||i.unshift(n),i})),q=(0,o.Ul)((function(){return(0,c.M3)(M.c,C.c,G,((e,t,r)=>{const n=r.map((e=>({name:e.server.isCloud?(0,u.c)("TIDAL"):e.server.friendlyName,serverEntityID:e.server.entityID,providerEntityID:e.provider.entityID})));return{destination:n.find((({serverEntityID:r,providerEntityID:n})=>r===e.entityID&&n===t.entityID)),destinations:n}}))}))(z);var K=r(43880),Q=r(75372),$=r(4659),Y=r(89080),X=r.n(Y),J=r(71500),Z=r(55268),ee=r(61004),te=r(67836);const re=(0,o.Ul)((function(){return(0,c.M3)((0,$.c)(),(e=>e?{isLoading:!1,playlistID:e.ratingKey,title:e.title,thumb:e.thumb||e.composite||""}:{isLoading:!0}))}))((function(e){const{className:t,serverEntityID:r,providerEntityID:i,playlistID:s,title:a,thumb:o,isLoading:c,cellIndex:l,onSelect:d}=e,u=(0,Z.c)(e),p=(0,n.useCallback)((()=>{d(s)}),[s,d]);return n.createElement("div",{className:t,style:u.style},c?null:n.createElement(J.c,{className:X()("PlaylistListItem-container-zywB3a",l%2&&"PlaylistListItem-alternate-XAr9Y9"),onPress:p},n.createElement(ee.c,{className:"PlaylistListItem-card-QIfJLu PosterCard-card-B3tGLl",component:te.c,height:40,providerEntityID:i,serverEntityID:r,url:o,width:40}),n.createElement("span",{className:"PlaylistListItem-title-B7d47h"},a)))}));var ne=r(93864);var ie=Object.defineProperty,se=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&de(e,r,t[r]);if(oe)for(var r of oe(t))le.call(t,r)&&de(e,r,t[r]);return e};const pe=(0,ne.c)(50);class me extends n.Component{constructor(){var e;super(...arguments),de(this,"symbol"!=typeof(e="renderPlaylistItem")?e+"":e,(e=>{const{serverEntityID:t,providerEntityID:r,onPlaylistSelect:i}=this.props;return n.createElement(re,(s=ue({},e),se(s,ae({className:"PlaylistList-cell-wwqG5G",providerEntityID:r,serverEntityID:t,onSelect:i}))));var s}))}render(){const e=this.props,{metadataItemEntityIDs:t,isPopulated:r,totalSize:i}=e,s=((e,t)=>{var r={};for(var n in e)ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oe)for(var n of oe(e))t.indexOf(n)<0&&le.call(e,n)&&(r[n]=e[n]);return r})(e,["metadataItemEntityIDs","isPopulated","totalSize"]);return r?n.createElement(K.c,ue({cellRenderer:this.renderPlaylistItem,className:"PlaylistList-content-eNtnNz",items:t,keyPropName:"metadataItemEntityID",layout:pe,scrollerClassName:"PlaylistList-contentScroller-zxyyDC",size:i},s)):n.createElement(Q.c,{className:"PlaylistList-spinner-Vu4GO8"})}}const he=me;var ye=Object.defineProperty,ge=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,be=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Se(e){return e?void 0:(0,u.c)("Title is required")}const Pe=(0,h.c)((e=>{var t=e,{showErrors:r}=t,i=((e,t)=>{var r={};for(var n in e)fe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ge)for(var n of ge(e))t.indexOf(n)<0&&ve.call(e,n)&&(r[n]=e[n]);return r})(t,["showErrors"]);return n.createElement(m.c,((e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&be(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&be(e,r,t[r]);return e})({hasError:r},i))}));class Ie extends n.Component{componentDidUpdate(e){this.props.isUpdating||!e.isUpdating||this.props.hasError||this.props.onModalClose()}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,metadataListEntityID:i,title:s,smart:a,hasError:o,isUpdating:c,isMultiSelect:l,onModalClose:d,onDestinationSelect:m,onFormSubmit:h,onPlaylistSelect:E}=this.props,w=!l&&!a&&e&&t&&r;return n.createElement(P.c,{onModalClose:d},n.createElement(f.c,null,a?(0,u.c)("Create Playlist"):(0,u.c)("Add to Playlist")),w?n.createElement(q,{className:"AddToPlaylistModalContent-listModalSubheader-DK1wnR",metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,onDestinationSelect:m}):null,o?n.createElement(S.c,{errorMessage:(0,u.c)("Something went wrong. Make sure the destination is available and try again.")}):null,a?null:n.createElement(y.c,{innerClassName:"AddToPlaylistModalContent-listModalInnerBody-jooez9"},i?n.createElement(I.c,{component:he,initialSize:20,metadataListEntityID:i,providerEntityID:t,serverEntityID:e,onPlaylistSelect:E}):null),n.createElement(g.c,null,n.createElement(p.cp,{className:"AddToPlaylistModalContent-createForm-EJHzvn",onSubmit:h},n.createElement(Pe,{"data-autofocus":!0,focusOnMount:!0,initialValue:s,name:"title",selectTextOnFocus:!0,validations:[Se]}),n.createElement(b.c,{className:"AddToPlaylistModalContent-createButton-BIxNhF",isSpinning:c,kind:v.ac,type:"submit"},(0,u.c)("Create")))))}}const Ee=Ie;var we=Object.defineProperty,Ce=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Te=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const De=(0,c.M3)((e=>e.ui.addToPlaylistModal),d.c,((e,t)=>{const{metadataItem:r,metadataList:n,multiSelect:i}=e;if(r)return r;const s=t[n];return s&&s.metadataItems.length?s.metadataItems[0]:i&&i.activeSelectionItems&&i.activeSelectionItems.length?i.activeSelectionItems[0].model:void 0})),ke=(0,c.M3)((e=>e.ui.addToPlaylistModal),De,((e,t)=>({serverEntityID:e.server,providerEntityID:e.provider,metadataItemEntityID:t,metadataListEntityID:e.playlists,title:e.title,isUpdating:e.isUpdating,isMultiSelect:!!e.multiSelect,hasError:!!e.error})));class xe extends n.Component{constructor(){var e;super(...arguments),Te(this,"symbol"!=typeof(e="onAdd")?e+"":e,(e=>{this.props.dispatchAddToPlaylist(e)}))}componentDidMount(){this.props.dispatchInitAddToPlaylistModal()}componentWillUnmount(){this.props.dispatchClearAddToPlaylistModal()}render(){const e=this.props,{dispatchInitAddToPlaylistModal:t,dispatchClearAddToPlaylistModal:r,dispatchAddToPlaylist:i}=e,s=((e,t)=>{var r={};for(var n in e)Oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ce)for(var n of Ce(e))t.indexOf(n)<0&&Me.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchInitAddToPlaylistModal","dispatchClearAddToPlaylistModal","dispatchAddToPlaylist"]);return n.createElement(Ee,((e,t)=>{for(var r in t||(t={}))Oe.call(t,r)&&Te(e,r,t[r]);if(Ce)for(var r of Ce(t))Me.call(t,r)&&Te(e,r,t[r]);return e})({onPlaylistSelect:this.onAdd},s))}}const Ae=(0,o.Ul)(ke,(function(e,t){return{onDestinationSelect({serverEntityID:t,providerEntityID:r}){e(l._M({serverEntityID:t,providerEntityID:r}))},onFormSubmit(t){e(l.G8({formData:t}))},dispatchInitAddToPlaylistModal(){e(l.me({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metadataListEntityID:t.metadataListEntityID,playQueueID:t.playQueueID,smart:t.smart}))},dispatchClearAddToPlaylistModal(){e(l._k())},dispatchAddToPlaylist(t){e(l.Y1({playlistID:t}))}}}))(xe);var Re=Object.defineProperty,Ne=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Ue=(e,t,r)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Fe=function(e){const t=e,{isOpen:r,onModalClose:o}=t,c=((e,t)=>{var r={};for(var n in e)Le.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ne)for(var n of Ne(e))t.indexOf(n)<0&&je.call(e,n)&&(r[n]=e[n]);return r})(t,["isOpen","onModalClose"]);return n.createElement(a.c,{isOpen:r,metricsPage:i.EB,size:s.wH,onModalClose:o},n.createElement(Ae,((e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&Ue(e,r,t[r]);if(Ne)for(var r of Ne(t))je.call(t,r)&&Ue(e,r,t[r]);return e})({onModalClose:o},c)))}},17492:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(81940),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=function(e){const{prefs:t}=e;return n.createElement("div",null,t.map((e=>{const{id:t}=e;return n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({key:t},e))})))}},43576:(e,t,r)=>{"use strict";r.d(t,{c:()=>w});var n=r(11504),i=r(12612),s=r(29532),a=r(61004),o=r(67836),c=r(35732),l=r(92264),d=r(1716),u=r(49852);var p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f=function(e){const t=e,{component:r,isSecondary:i}=t,s=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(t,["component","isSecondary"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&g(e,r,t[r]);if(m)for(var r of m(t))y.call(t,r)&&g(e,r,t[r]);return e})({className:i?"MediaSubscriptionTitle-secondaryTitle-gV6Cp0":"MediaSubscriptionTitle-title-Tqv8zL"},s))};var v=Object.defineProperty,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function E(e){const{serverEntityID:t,providerEntityID:r,hint:p,target:m,useStaticHeight:h,children:y,showSubscriptionBadge:g,isDownload:v}=e,{type:E,subtype:w}=p,{thumb:C,grandparentThumb:O}=m||p,M=E===i.yy,T=v&&M?m&&m.composite:O||C,D=v||E!==i.yy?E:i.M7;return n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-container-mwIuyl"},n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-left-Etf0Yc"},n.createElement(a.c,{className:"MediaSubscriptionHintPosterTitle-posterCard-BY09Yg",component:o.c,height:(0,u.YF)(130,D),providerEntityID:r,serverEntityID:t,type:D,url:T,width:130},g?n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-subscriptionBadge-U2a3uf MetadataPosterCardOverlay-badge-L1fayd"},n.createElement(s.c,{subscriptionType:E})):null)),n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-right-zFyNmo"},n.createElement("div",{className:h?"MediaSubscriptionHintPosterTitle-staticHeightTitleContainer-z5MoXW MediaSubscriptionHintPosterTitle-titleContainer-biNiy6":"MediaSubscriptionHintPosterTitle-titleContainer-biNiy6"},function(e){switch(e){case i.MOVIE:case i.M7:return[l.c];case i.EPISODE:return[c.c,d.c];case i.yy:default:return[l.c]}}(E).map(((e,t)=>n.createElement(f,((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(b)for(var r of b(t))P.call(t,r)&&I(e,r,t[r]);return e})({key:t,component:e,isSecondary:t>0},p))))),y))}E.defaultProps={useStaticHeight:!1};const w=E},78112:(e,t,r)=>{"use strict";r.d(t,{c:()=>Dt});var n=r(11504),i=r(56960),s=r(44064),a=r(27876),o=r(57864),c=r(95720),l=r.n(c),d=r(54268),u=r(96944),p=r(99472),m=r(46800),h=r(47884),y=r(16200);const g=(0,o.M3)((e=>e.ui.mediaSubscriptionModal.mediaSubscription),y.c,((e,t)=>t[e])),f=(0,o.M3)((e=>e.ui.mediaSubscriptionModal.templates),y.c,((e=[],t)=>e.map((e=>t[e]))));var v=r(89448),b=r(59396),S=r(12612),P=r(47148),I=r(93268),E=r(36296),w=r(22436),C=r(54084),O=r(75372),M=r(66256),T=Object.defineProperty,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const R=function(e){return n.createElement(M.c,((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e})({},e),n.createElement(O.c,null))};var N=r(19172);var L=r(1292),j=r(82468),U=r(90064),F=r(23384),V=r(79264),_=r(24808),W=r(69936),B=r(89616),H=r(74428),z=r(9176),G=r(35456),q=r(4659),K=r(35732);const Q=(0,a.Ul)((function(){return(0,o.M3)((0,q.c)(),((e={})=>({grandparentTitle:e.grandparentTitle})))}))(K.c);var $=r(5116),Y=r(78143);var X=Object.defineProperty,J=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const re=function(e){const t=e,{component:r,isSecondary:i}=t,s=((e,t)=>{var r={};for(var n in e)Z.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&J)for(var n of J(e))t.indexOf(n)<0&&ee.call(e,n)&&(r[n]=e[n]);return r})(t,["component","isSecondary"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&te(e,r,t[r]);if(J)for(var r of J(t))ee.call(t,r)&&te(e,r,t[r]);return e})({className:i?"ConflictTitle-secondaryTitle-yJeGns":"ConflictTitle-title-b5MwP3"},s))};var ne=Object.defineProperty,ie=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ce=function(e){var t=e,{className:r,type:i}=t,s=((e,t)=>{var r={};for(var n in e)se.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ie)for(var n of ie(e))t.indexOf(n)<0&&ae.call(e,n)&&(r[n]=e[n]);return r})(t,["className","type"]);const a=function(e){switch(e){case"movie":case"show":case"playlist":default:return[$.c];case"episode":return[Q,Y.c]}}(i);return n.createElement("div",{className:"ConflictItemRow-container-kYEwBa"},a.map(((e,t)=>n.createElement(re,((e,t)=>{for(var r in t||(t={}))se.call(t,r)&&oe(e,r,t[r]);if(ie)for(var r of ie(t))ae.call(t,r)&&oe(e,r,t[r]);return e})({key:t,component:e,isSecondary:t>0},s)))))};var le=Object.defineProperty,de=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,me=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const he=(0,a.Ul)((function(){return(0,o.M3)((0,q.c)(),((e={})=>({type:e.type})))}))((function(e){return n.createElement(ce,((e,t)=>{for(var r in t||(t={}))ue.call(t,r)&&me(e,r,t[r]);if(de)for(var r of de(t))pe.call(t,r)&&me(e,r,t[r]);return e})({},e))}));var ye=r(43576);var ge,fe=Object.defineProperty;class ve extends n.Component{componentDidUpdate(e,t){(e.isMediaSubscriptionMoving&&!this.props.isMediaSubscriptionMoving&&null==this.props.mediaSubscriptionMoveError||e.isMediaSubscriptionDeleting&&!this.props.isMediaSubscriptionDeleting&&null==this.props.mediaSubscriptionDeleteError)&&this.props.onModalClose()}render(){const{isRecordingSchedule:e,isMediaSubscriptionDeleting:t,mediaSubscriptionDeleteError:r,isMediaSubscriptionMoving:i,mediaSubscriptionMoveError:s,serverEntityID:a,providerEntityID:o,server:c,provider:l,hint:d,conflicts:u,onDelete:p,onMediaMove:m,onModalClose:h}=this.props,y=s||r;return n.createElement(G.c,{onModalClose:h},n.createElement(V.c,null,(0,b.c)("Conflict Detected")),y?n.createElement(z.c,{errorMessage:y}):null,n.createElement(j.c,{autoScroll:!0},n.createElement(ye.c,{hint:d,providerEntityID:o,serverEntityID:a},n.createElement("div",{className:"MediaSubscriptionConflict-message-TjOLCl"},1===u.length?(0,b.c)("Conflicts with 1 recording"):(0,b.c)("Conflicts with {conflictCount} recordings",{conflictCount:u.length})),n.createElement("div",{className:"MediaSubscriptionConflict-conflicts-d877JJ"},u.map((({metadataItem:e},t)=>n.createElement(he,{key:t,metadataItemEntityID:e})))))),n.createElement(U.c,null,n.createElement(F.c,null,n.createElement(H.c,{isSpinning:t,kind:_.od,onPress:p},(0,b.c)("Cancel This")),n.createElement(H.c,{isSpinning:i,kind:_.ac,onPress:m},(0,b.c)("Prefer This")),e?n.createElement(L.c,{kind:_.ac,onPress:h},(0,b.c)("Close")):n.createElement(L.c,{kind:_.ac,to:(0,B.c)({pivotID:W.i.Schedule,machineIdentifier:c.machineIdentifier,providerIdentifier:l.identifier})},(0,b.c)("Manage")))))}}((e,t,r)=>{t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(ve,"symbol"!=typeof(ge="defaultProps")?ge+"":ge,{conflicts:[]});const be=ve;var Se=r(71500),Pe=r(84536),Ie=r(90936);const Ee=function(){return n.createElement("div",{className:"CancelRecordingConfirmation-cancelConfirmationMessage-bRg4FN"},n.createElement("div",null,(0,b.c)("Are you sure you want to cancel this recording?")),n.createElement("div",null,(0,b.c)("This will cancel any future scheduled recordings and stop any recordings already in progress.")))};var we=r(17492),Ce=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;function Te(e){var t=e,{className:r,children:i}=t,s=((e,t)=>{var r={};for(var n in e)Oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ce)for(var n of Ce(e))t.indexOf(n)<0&&Me.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("div",{className:r,style:s},i)}Te.defaultProps={flexGrow:1,flexShrink:0};const De=Te;var ke=r(89080),xe=r.n(ke);var Ae=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;function Le(e){var t=e,{className:r,children:i}=t,s=((e,t)=>{var r={};for(var n in e)Re.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ae)for(var n of Ae(e))t.indexOf(n)<0&&Ne.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("div",{className:xe()("FlexGrid-grid-skLJgy",r),style:s},i)}Le.defaultProps={flexDirection:"row",justifyContent:"space-between",alignItems:"center",alignContent:"center"};const je=Le;var Ue=r(87808),Fe=r(85032),Ve=r(1504),_e=r(4304),We=Object.defineProperty,Be=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ge=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const qe=(0,_e.c)((function(e){const t=e,{name:r,initialValue:i,labelText:s,showErrors:a,errors:o,validations:c}=t,l=((e,t)=>{var r={};for(var n in e)He.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Be)for(var n of Be(e))t.indexOf(n)<0&&ze.call(e,n)&&(r[n]=e[n]);return r})(t,["name","initialValue","labelText","showErrors","errors","validations"]);return n.createElement("div",null,n.createElement(Fe.c,{name:r},s),n.createElement(Ve.c,((e,t)=>{for(var r in t||(t={}))He.call(t,r)&&Ge(e,r,t[r]);if(Be)for(var r of Be(t))ze.call(t,r)&&Ge(e,r,t[r]);return e})({name:r,size:Ue.wH},l)))})),Ke=function(e){const{libraries:t,targetLibrarySectionID:r,targetSectionLocationID:i,selectedLibrarySectionID:s}=e,a=function(e,t){return null!=e&&t.some((t=>t.librarySectionID===e))}(r,t)?r:function([e]){if(e)return e.librarySectionID}(t),o=function(e,t,r){let n=e.find((({librarySectionID:e})=>e===t));return n||(n=e.find((({librarySectionID:e})=>e===r))),n?n.locations.map((({id:e,path:t})=>({[e]:t}))):[]}(t,s,a),c=function(e,t){return null!=e&&t.some((t=>t.hasOwnProperty(e)))}(i,o)?i:function([e]){if(!e)return;const[t]=Object.keys(e);return e[t]}(o);return n.createElement(je,{flexWrap:"wrap"},n.createElement(De,{flexBasis:230,maxWidth:230},n.createElement(qe,{initialValue:a,labelText:(0,b.c)("Add to Library"),name:"targetLibrarySectionID",size:Ue.wH,values:t.map((({title:e,librarySectionID:t},r)=>({[t]:e})))})),n.createElement(De,{flexBasis:230,maxWidth:230},o.length>1?n.createElement(qe,{initialValue:c,labelText:(0,b.c)("Location"),name:"targetSectionLocationID",size:Ue.wH,values:o}):null))},Qe=function(e){const{serverEntityID:t,providerEntityID:r,hint:i,target:s,initialMode:a,isDownload:o,modes:c,libraries:l,targetLibrarySectionID:d,targetSectionLocationID:u,selectedLibrarySectionID:p,prefs:m}=e,h=m&&m.onlyNewAirings,y=i.type===S.EPISODE||i.type===S.M7||i.type===S.yy;return n.createElement(ye.c,{hint:i,isDownload:o,providerEntityID:r,serverEntityID:t,showSubscriptionBadge:!o,target:s,useStaticHeight:y},n.createElement(je,{flexWrap:"wrap"},n.createElement(De,{flexBasis:230,maxWidth:230},c?n.createElement(qe,{initialValue:a,isDisabled:c.length<2,labelText:o?(0,b.c)("Download"):(0,b.c)("Record"),name:"mode",values:c}):null),n.createElement(De,{flexBasis:230,maxWidth:230},h?n.createElement(qe,{initialValue:h.value,labelText:h.label,name:h.id,values:h.enumValues.map((({label:e,value:t})=>({[t]:e})))}):null)),!o&&l&&l.length?n.createElement(Ke,{libraries:l,selectedLibrarySectionID:p,targetLibrarySectionID:d,targetSectionLocationID:u}):null)};var $e=Object.defineProperty,Ye=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Ze=(e,t,r)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,et=(e,t)=>{for(var r in t||(t={}))Xe.call(t,r)&&Ze(e,r,t[r]);if(Ye)for(var r of Ye(t))Je.call(t,r)&&Ze(e,r,t[r]);return e},tt=(e,t,r)=>(Ze(e,"symbol"!=typeof t?t+"":t,r),r);class rt extends n.Component{constructor(e,t){super(e,t),tt(this,"onAdvancedPress",(()=>{this.setState({isAdvanced:!this.state.isAdvanced})})),tt(this,"onCancelPress",(()=>{this.setState({showCancelConfirmation:!0})})),tt(this,"onBackPress",(()=>{this.setState({showCancelConfirmation:!1})})),tt(this,"onFormChange",(e=>{if(this.props.showLibraries){if(!e.targetLibrarySectionID)return;e.targetLibrarySectionID.value!==this.state.selectedLibrarySectionID&&this.setState({selectedLibrarySectionID:e.targetLibrarySectionID.value})}if(e.mode&&e.mode.value!==this.state.selectedMode){const t=e.mode.value;this.setState({selectedMode:t}),this.props.onModeChange(t)}})),this.state={selectedLibrarySectionID:e.targetLibrarySectionID,selectedMode:e.initialMode,isAdvanced:!1,showCancelConfirmation:!1}}componentDidUpdate(e,t){(e.isMediaSubscriptionSaving&&!this.props.isMediaSubscriptionSaving&&null==this.props.mediaSubscriptionSaveError||e.isMediaSubscriptionDeleting&&!this.props.isMediaSubscriptionDeleting&&null==this.props.mediaSubscriptionDeleteError)&&this.props.onModalClose()}render(){const e=this.props,{mediaSubscriptionKey:t,isMediaSubscriptionSaving:r,mediaSubscriptionSaveError:i,isMediaSubscriptionDeleting:s,mediaSubscriptionDeleteError:a,prefGroups:o,onModalClose:c,onSubmit:l,onDelete:d}=e,u=((e,t)=>{var r={};for(var n in e)Xe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ye)for(var n of Ye(e))t.indexOf(n)<0&&Je.call(e,n)&&(r[n]=e[n]);return r})(e,["mediaSubscriptionKey","isMediaSubscriptionSaving","mediaSubscriptionSaveError","isMediaSubscriptionDeleting","mediaSubscriptionDeleteError","prefGroups","onModalClose","onSubmit","onDelete"]),{isAdvanced:p,showCancelConfirmation:m}=this.state,h=(m?"MediaSubscriptionForm-cancelConfirmation-QsF4nS":p&&"MediaSubscriptionForm-advancedForm-pBqflk")||"MediaSubscriptionForm-baseForm-tzdfW2",y=!!o.advanced,g=i||a;return n.createElement(Pe.cp,{className:h,onChange:this.onFormChange,onSubmit:l},n.createElement(G.c,{onModalClose:c},n.createElement(V.c,null,m?(0,b.c)("Cancel Recording"):(0,b.c)("Record Options")),g?n.createElement(z.c,{errorMessage:g}):null,n.createElement(j.c,null,n.createElement("div",{key:"base",className:"MediaSubscriptionForm-baseSettings-TwDuUI"},n.createElement(Qe,et({prefs:o.basic,selectedLibrarySectionID:this.state.selectedLibrarySectionID},u))),y?n.createElement("div",{key:"advanced",className:"MediaSubscriptionForm-advancedSettings-LZ33WV"},n.createElement(we.c,et({prefs:o.advanced},u))):null,m?n.createElement(Ee,null):null),n.createElement(U.c,{className:m?"MediaSubscriptionForm-cancelConfirmationFooter-dHEwUq ModalFooter-modalFooter-IDP5sZ":"MediaSubscriptionForm-footer-mDmgDK ModalFooter-modalFooter-IDP5sZ"},m?null:n.createElement(F.c,null,y?n.createElement(Se.c,{kind:_.ac,onPress:this.onAdvancedPress},n.createElement(Ie.c,{className:"MediaSubscriptionForm-advancedIcon-BFg5ox"}),p?(0,b.c)("Show Basic"):(0,b.c)("Show Advanced")):null),m?n.createElement(F.c,null,n.createElement(L.c,{onPress:this.onBackPress},(0,b.c)("Back")),n.createElement(H.c,{isSpinning:s,kind:_.od,onPress:d},(0,b.c)("Yes"))):n.createElement(F.c,null,t?n.createElement(L.c,{kind:_.od,onPress:this.onCancelPress},(0,b.c)("Cancel Recording")):n.createElement(L.c,{kind:_.sT,onPress:c},(0,b.c)("Cancel")),n.createElement(H.c,{isSpinning:r,kind:_.ac,type:"submit"},t?(0,b.c)("Save"):(0,b.c)("Record"))))))}}const nt=rt;var it=r(65800);class st extends n.Component{componentDidUpdate(e,t){e.isMediaSubscriptionDeleting&&!this.props.isMediaSubscriptionDeleting&&null==this.props.mediaSubscriptionDeleteError&&this.props.onModalClose()}render(){const{serverEntityID:e,providerEntityID:t,mediaSubscriptionKey:r,hint:i,metadataType:s,isMediaSubscriptionDeleting:a,mediaSubscriptionDeleteError:o,canAddLibrary:c,onCreatePress:l,onModalClose:d,onDelete:u}=this.props,{typeString:p}=(0,S.Gq)(s),{title:m}=P.cp.get(p),h=c?(0,b.c)("This recording cannot be scheduled because you dont yet have a library for {type}.",{type:m}):(0,b.c)("This recording cannot be scheduled because there is no library for {type}.",{type:m});let y;return y=c?r?(0,b.c)("Please create a library or cancel the recording."):(0,b.c)("Please try recording again after you have created your library."):(0,b.c)("Please ask the server owner to create the library or cancel the recording."),n.createElement(G.c,{onModalClose:d},n.createElement(V.c,null,(0,b.c)("Record Options")),o?n.createElement(z.c,{errorMessage:o}):null,n.createElement(j.c,null,n.createElement(ye.c,{hint:i,providerEntityID:t,serverEntityID:e},n.createElement("div",{className:"MediaSubscriptionNoLibrary-errorMessage-dpnO7c"},(0,b.c)("{type} Library Required",{type:m})),n.createElement("p",null,h),n.createElement("p",null,y),c?n.createElement(Se.c,{kind:_.ac,onPress:l},n.createElement(it.c,{className:"MediaSubscriptionNoLibrary-addIcon-GOXyzk"})," ",(0,b.c)("Create Library")):null)),n.createElement(U.c,null,n.createElement(F.c,null,r?n.createElement(H.c,{isSpinning:a,kind:_.od,onPress:u},(0,b.c)("Cancel Recording")):null,n.createElement(L.c,{onPress:d},(0,b.c)("Cancel")))))}}const at=st;var ot=Object.defineProperty,ct=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,mt=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&mt(e,r,t[r]);if(dt)for(var r of dt(t))pt.call(t,r)&&mt(e,r,t[r]);return e},yt=(e,t)=>ct(e,lt(t)),gt=(e,t)=>{var r={};for(var n in e)ut.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&dt)for(var n of dt(e))t.indexOf(n)<0&&pt.call(e,n)&&(r[n]=e[n]);return r},ft=(e,t,r)=>(mt(e,"symbol"!=typeof t?t+"":t,r),r);function vt(){return(0,o.M3)(((e,{subscriptionType:t})=>t),(e=>"playlist"===e?"show":e))}const bt={dispatchFetchLibraries:d.EH,dispatchAddLibrary:E.MN,dispatchInitMediaSubscriptionModal:u.Ko,dispatchClearMediaSubscriptionModal:u.kR,dispatchSaveMediaSubscription:u.yy,dispatchChangeMediaSubscriptionTemplateMode:u.js,dispatchMoveMediaSubscriptionModal:u.eM,dispatchDeleteMediaSubscriptionModal:u.Ki,dispatchDeleteMediaGrabOperationsModal:u.o$,dispatchChannelAiringsReset:w.cp.actions.channelAiringsReset};class St extends n.Component{constructor(e,t){super(e,t),ft(this,"onSubmit",(e=>{const{serverEntityID:t,metadataItemEntityID:r}=this.props,n=e,{targetLibrarySectionID:i,targetSectionLocationID:s,mode:a}=n,o=gt(n,["targetLibrarySectionID","targetSectionLocationID","mode"]);this.props.dispatchSaveMediaSubscription({serverEntityID:t,metadataItemEntityID:r,targetLibrarySectionID:i,targetSectionLocationID:s,prefs:o}),this.props.dispatchChannelAiringsReset({channelGridKey:this.props.channelGridKey})})),ft(this,"onDelete",(()=>{var e;(null==(e=this.props.conflicts)?void 0:e.length)?this.props.dispatchDeleteMediaGrabOperationsModal({metadataItemEntityID:this.props.metadataItemEntityID}):this.props.dispatchDeleteMediaSubscriptionModal({metadataItemEntityID:this.props.metadataItemEntityID}),this.props.dispatchChannelAiringsReset({channelGridKey:this.props.channelGridKey})})),ft(this,"onModeChange",(e=>{(0,v.SS)((()=>{this.props.dispatchChangeMediaSubscriptionTemplateMode({modeIndex:e})}))})),ft(this,"onMediaMove",(()=>{this.props.dispatchMoveMediaSubscriptionModal()})),ft(this,"onCreatePress",(()=>{const{metadataType:e,serverEntityID:t}=this.props,{typeString:r}=(0,S.Gq)(e),n=P.cp.get(r);this.props.onModalClose(),this.props.dispatchAddLibrary({serverEntityID:t,options:{redirect:!1,seedAttrs:{type:n.typeString,title:n.title,language:n.defaultLanguage}}})})),this.state={showConflicts:e.showConflicts}}componentDidMount(){this._populate()}UNSAFE_componentWillReceiveProps(e){var t;let r=this.state.showConflicts;this.props.isMediaSubscriptionSaving&&!e.isMediaSubscriptionSaving&&(null==(t=e.conflicts)?void 0:t.length)&&(r=!0),r!==this.state.showConflicts&&this.setState({showConflicts:r});const n=this.props.metadataItemEntityID!==e.metadataItemEntityID,i=this.props.mediaSubscriptionEntityID!==e.mediaSubscriptionEntityID;(n||i)&&this._populate(e)}componentWillUnmount(){this.props.dispatchClearMediaSubscriptionModal()}_populate(e=this.props){const{serverEntityID:t,mediaSubscriptionEntityID:r,metadataItemEntityID:n,showConflicts:i}=e;(0,v.SS)((()=>{e.dispatchFetchLibraries({serverEntityID:t}),e.dispatchInitMediaSubscriptionModal({serverEntityID:t,mediaSubscriptionEntityID:r,metadataItemEntityID:n,showConflicts:i})}))}render(){const{libraries:e,isLibrariesLoading:t,hasLibrariesError:r,isMediaSubscriptionPending:i,isMediaSubscriptionPopulated:s,mediaSubscriptionError:a,showLibraries:o,onModalClose:c}=this.props;return a?n.createElement(C.c,{message:a,onModalClose:c}):r?n.createElement(C.c,{message:(0,b.c)("There was an unexpected error loading libraries."),onModalClose:c}):i||!s||t?n.createElement(R,{onModalClose:c}):o&&e&&!e.length?n.createElement(at,yt(ht({},this.props),{onCreatePress:this.onCreatePress,onDelete:this.onDelete})):this.state.showConflicts?n.createElement(be,yt(ht({},this.props),{onDelete:this.onDelete,onMediaMove:this.onMediaMove})):n.createElement(nt,yt(ht({},this.props),{onDelete:this.onDelete,onModeChange:this.onModeChange,onSubmit:this.onSubmit}))}}ft(St,"defaultProps",{showConflicts:!1,showLibraries:!0});const Pt=(0,a.Ul)((function(){return(0,o.M3)((0,h.c)(),(0,m.c)(),(e=>e.ui.mediaSubscriptionModal),g,f,vt(),(0,o.M3)((0,p.c)(),vt(),((e,t)=>{const r=(0,S.Gq)(t);return e.filter((e=>{const{id:t}=(0,S.GG)(e.type);return t===r.id})).map((e=>({librarySectionID:e.key,locations:e.locations,title:e.title})))})),((e,t,r,n={},i,s,a)=>{const o=l().omit(r,"templates","mediaSubscription"),c=n,{key:d,grabOperations:u=[],prefs:p}=c,m=gt(c,["key","grabOperations","prefs"]),h=e.isFullOwnedServer,{initialMode:y,modes:g}=function(e,t){let r,n;return t.length>1?(n=t.findIndex((e=>e.selected)),r=t.map((({title:e},t)=>({[t]:e})))):(n=0,r=e.title?[{0:e.title}]:null),{initialMode:n,modes:r}}(n,i),f=u.reduce(((e,t)=>t.conflicts&&t.conflicts.length?e.concat(t.conflicts):e),[]),v=(0,N.c)(p),b=(0,I.c)(t),S=b?b.directories[0]:null,P=e&&e.desktop||{};return ht(ht({mediaSubscriptionKey:d,prefGroups:v,metadataType:s,libraries:a,isLibrariesLoading:!P.isLibrariesPopulated||P.isLibrariesPending,hasLibrariesError:!!P.librariesError,initialMode:y,modes:g,conflicts:f,server:e,provider:t,canAddLibrary:h,sourceDirectory:S},o),m)}))}),bt)(St);var It=Object.defineProperty,Et=Object.defineProperties,wt=Object.getOwnPropertyDescriptors,Ct=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,Tt=(e,t,r)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Dt=function(e){const t=e,{isOpen:r,metricsProperties:a,onModalClose:o}=t,c=((e,t)=>{var r={};for(var n in e)Ot.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ct)for(var n of Ct(e))t.indexOf(n)<0&&Mt.call(e,n)&&(r[n]=e[n]);return r})(t,["isOpen","metricsProperties","onModalClose"]);return n.createElement(s.c,{isOpen:r,metricsPage:i.oF,metricsProperties:a,onModalClose:o},n.createElement(Pt,(l=((e,t)=>{for(var r in t||(t={}))Ot.call(t,r)&&Tt(e,r,t[r]);if(Ct)for(var r of Ct(t))Mt.call(t,r)&&Tt(e,r,t[r]);return e})({},c),Et(l,wt({onModalClose:o})))));var l}},54392:(e,t,r)=>{"use strict";r.d(t,{c:()=>ae});var n=r(11504),i=r(27876),s=r(68940),a=r(56960),o=r(44064),c=r(57864),l=r(4659);function d(e){return e.ui.subtitlesModal}var u=r(29632),p=r(67224),m=r(24696),h=r(52987);const y=["af","sq","ar","an","hy","az","eu","be","bn","bs","br","bg","my","ca","zh","zh-TW","cs","da","nl","en","eo","et","fi","fr","ka","de","gl","el","he","hi","hr","hu","is","id","it","ja","kn","kk","km","ko","ku","lv","lt","lb","mk","ml","ms","mn","no","oc","fa","pl","pt","pt-BR","ro","ru","sr","si","sk","sl","es","sw","sv","ta","te","tl","th","tr","uk","ur","vi"],g=y.reduce(((e,t)=>(e[t]=h.cp[t],e)),{});function f(e){if(g[e])return e;const t=(0,m.c)([e]);return g[t]?t:"en"}const v=[...y].sort(h.Iw).reduce(((e,t)=>(e.push(g[t]),e)),[]),b=g;var S=r(59396),P=r(1504),I=r(12784),E=r(82468),w=r(79264),C=r(8212),O=r(75372),M=r(9176),T=r(35456),D=r(62900),k=r(3268),x=r.n(k),A=r(52908);function R(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-star-full-560"};s["aria-hidden"]=!t,s.style=i,s.className=A.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"m280 6.5l62.864 193.475 203.432 0-164.58 119.575 62.864 193.475-164.58-119.575-164.58 119.575 62.864-193.475-164.58-119.575 203.432 0 62.864-193.475"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}R.propTypes={"aria-label":x().string,className:x().string,style:x().object};const N=R;var L=r(71500),j=r(87808),U=r(74672);function F(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-sync-560"};s["aria-hidden"]=!t,s.style=i,s.className=A.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"m280 476c108.248 0 196-87.752 196-196 0-108.248-87.752-196-196-196-108.248 0-196 87.752-196 196 0 108.248 87.752 196 196 196m0 42c-131.444 0-238-106.556-238-238 0-131.444 106.556-238 238-238 131.444 0 238 106.556 238 238 0 131.444-106.556 238-238 238m0-112l112-112-89.6 0 0-140-44.8 0 0 140-89.6 0 112 112"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}F.propTypes={"aria-label":x().string,className:x().string,style:x().object};const V=F;var _=Object.defineProperty;class W extends n.Component{constructor(){var e,t;super(...arguments),t=()=>{const{subtitleKey:e,codec:t,languageCode:r,providerTitle:n,hearingImpaired:i,forced:s,onDownloadSubtitle:a}=this.props;a({key:e,codec:t,languageCode:r,providerTitle:n,hearingImpaired:i,forced:s})},((e,t,r)=>{t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="onPress")?e+"":e,t)}render(){const{title:e,displayTitle:t,score:r,perfectMatch:i,downloaded:s,isDownloading:a}=this.props;return n.createElement(L.c,{className:"SubtitleRow-item-c2k651",isDisabled:s||a,onPress:this.onPress},n.createElement("div",{className:"SubtitleRow-titles-kANXsk"},n.createElement("span",{className:"SubtitleRow-title-PO2uGs"},e),n.createElement("span",{className:"SubtitleRow-secondaryTitle-MBHZFp SubtitleRow-title-PO2uGs"},t)),n.createElement("div",{className:"SubtitleRow-score-qeh0nZ"},i?n.createElement(N,{className:"SubtitleRow-perfectMatch-mqNZvr"}):null,r),a?n.createElement("div",{className:"SubtitleRow-spinnerContainer-TnPS2o"},n.createElement(O.c,{size:j.wH})):null,s?n.createElement(U.c,{className:"SubtitleRow-downloadedIcon-w71hIv SubtitleRow-icon-oZstv1"}):null,a||s?null:n.createElement(V,{className:"SubtitleRow-downloadIcon-sj8DTY SubtitleRow-icon-oZstv1"}))}}const B=W,H=function(e){const{subtitles:t,subtitlesDownloadKey:r,onDownloadSubtitle:i}=e;return n.createElement(D.c,null,t.map((e=>{const{key:t,title:s,displayTitle:a,providerTitle:o,score:c,codec:l,languageCode:d,hearingImpaired:u,forced:p,perfectMatch:m,downloaded:h}=e;return n.createElement(B,{key:t,codec:l,displayTitle:a,downloaded:h,forced:p,hearingImpaired:u,isDownloading:r===t,languageCode:d,perfectMatch:m,providerTitle:o,score:c,subtitleKey:t,title:s,onDownloadSubtitle:i})})))},z="SubtitlesModalContent-centeredContainer-yYZOsM";var G=Object.defineProperty,q=(e,t,r)=>(((e,t,r)=>{t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class K extends n.Component{constructor(e,t){super(e,t),q(this,"searchTimeoutID"),q(this,"onSearch",(()=>{const{language:e,title:t}=this.state;this.props.onFetchSubtitles({language:e,title:t})})),q(this,"onLanguageChange",(e=>{const t=Object.keys(b).find((t=>b[t]===e));this.setState({language:t},this.onSearch)})),q(this,"onTitleChange",(e=>{this.searchTimeoutID&&window.clearTimeout(this.searchTimeoutID),this.setState({title:e},(()=>{this.searchTimeoutID=window.setTimeout(this.onSearch,500)}))})),this.state={language:f(e.defaultSubtitleLanguage),title:""},this.searchTimeoutID=null}componentDidMount(){this.onSearch()}componentDidUpdate(e,t){const{isSubtitlesDownloaded:r,onModalClose:n}=this.props,{isSubtitlesDownloaded:i}=e;!i&&r&&n()}componentWillUnmount(){this.searchTimeoutID&&window.clearTimeout(this.searchTimeoutID)}render(){const{mediaTitle:e,subtitles:t,showSpinner:r,showSearchResults:i,showEmptyMessage:s,hasSubtitlesError:a,subtitlesError:o,subtitlesDownloadKey:c,hasSubtitlesDownloadError:l,subtitlesDownloadError:d,onDownloadSubtitle:u,onModalClose:p}=this.props,{language:m}=this.state;return n.createElement("div",{className:"SubtitlesModalContent-modalContainer-FG6tF2"},n.createElement(T.c,{onModalClose:p},n.createElement(w.c,null,(0,S.c)("Subtitles")),l?n.createElement("div",null,n.createElement(M.c,{errorMessage:d})):null,n.createElement(E.c,{className:"SubtitlesModalContent-modalBody-N_J_lO ModalBody-modalBody-Me4Hwy",scrollDirection:C.KE},n.createElement("div",{className:"SubtitlesModalContent-inputs-UjrUHR"},n.createElement(P.c,{className:"SubtitlesModalContent-languageInput-Prodxm SelectInput-input-EWuFb5 input-input-XAtklw",name:"language",value:b[m],values:v,onChange:this.onLanguageChange}),n.createElement(I.c,{className:"SubtitlesModalContent-titleInput-BOJ3ZB TextInput-input-NqTdW3 input-input-XAtklw",name:"title",placeholder:e,onChange:this.onTitleChange})),r?n.createElement("div",{className:z},n.createElement(O.c,null)):null,a?n.createElement("div",{className:z},o):null,i?n.createElement(H,{subtitles:t,subtitlesDownloadKey:c,onDownloadSubtitle:u}):null,s?n.createElement("div",{className:z},(0,S.c)("No results")):null)))}}const Q=K,$=(0,i.Ul)((function(){return(0,c.M3)((0,u.c)("profile"),(0,l.c)(),d,((e,t={},r)=>{const{Media:n}=t;let i="";if(n&&n.length){const e=n[0].Part;e.length&&(i=(0,p.c)(e[0].file,55))}const{subtitles:s,isSubtitlesPending:a,isSubtitlesPopulated:o,subtitlesError:c,subtitlesDownloadKey:l,isSubtitlesDownloaded:d,subtitlesDownloadError:u}=r,m=a&&!c,h=o&&!c&&s.length>0,y=o&&!c&&0===s.length;return{mediaTitle:i,defaultSubtitleLanguage:e.defaultSubtitleLanguage,subtitles:s,showSpinner:m,showSearchResults:h,showEmptyMessage:y,subtitlesDownloadKey:l,isSubtitlesDownloaded:d,hasSubtitlesError:!!c,subtitlesError:c,hasSubtitlesDownloadError:!!u,subtitlesDownloadError:u}}))}),(function(e,t){const{metadataItemEntityID:r}=t;return{onFetchSubtitles({language:t,title:n}){e((0,s.WY)({metadataItemEntityID:r,language:t,title:n}))},onDownloadSubtitle(t){const{key:n,codec:i,languageCode:a,providerTitle:o,hearingImpaired:c,forced:l}=t;e((0,s.eK)({metadataItemEntityID:r,key:n,codec:i,language:a,providerTitle:o,hearingImpaired:c,forced:l}))}}}))(Q),Y=function(e){const{metadataItemEntityID:t,isOpen:r,onModalClose:i}=e;return n.createElement(o.c,{isOpen:r,metricsPage:a.yc,onModalClose:i},n.createElement($,{metadataItemEntityID:t,onModalClose:i}))};var X=Object.defineProperty,J=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ne=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ie={dispatchResetMetadataItemSubtitles:s._M};class se extends n.Component{constructor(){var e;super(...arguments),ne(this,"symbol"!=typeof(e="onModalClose")?e+"":e,(()=>{this.props.dispatchResetMetadataItemSubtitles(),this.props.onModalClose()}))}render(){return n.createElement(Y,(e=((e,t)=>{for(var r in t||(t={}))te.call(t,r)&&ne(e,r,t[r]);if(ee)for(var r of ee(t))re.call(t,r)&&ne(e,r,t[r]);return e})({},this.props),t={onModalClose:this.onModalClose},J(e,Z(t))));var e,t}}const ae=(0,i.Ul)(null,ie)(se)},2952:(e,t,r)=>{"use strict";r.d(t,{c:()=>V});var n=r(11504),i=r(27876),s=r(66840),a=r(56960),o=r(44064),c=r(57864),l=r(89080),d=r.n(l),u=r(59396),p=r(76988),m=r(1292),h=r(71500),y=r(82468),g=r(90064),f=r(23384),v=r(79264),b=r(8212),S=r(5056),P=r(9176),I=r(35456);var E=Object.defineProperty,w=(e,t,r)=>(((e,t,r)=>{t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class C extends n.Component{constructor(e,t){super(e,t),w(this,"dropTargetEnteredCounter"),w(this,"onDragEnter",((e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter++,this.setOverDropTargetState()})),w(this,"onDragLeave",((e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter--,this.setOverDropTargetState()})),w(this,"onFileDrop",(e=>{e.preventDefault();const{metadataItemEntityID:t,dispatchUploadSubtitles:r}=this.props;let n;this.setState({isOverDropTarget:!1}),this.dropTargetEnteredCounter=0,e.dataTransfer&&e.dataTransfer.files.length?n=e.dataTransfer.files[0]:e.target.files&&e.target.files.length&&(n=e.target.files[0]),r({metadataItemEntityID:t,file:n})})),this.dropTargetEnteredCounter=0,this.state={isOverDropTarget:!1}}componentDidMount(){window.addEventListener("dragover",this.onWindowDragOver),window.addEventListener("drop",this.onWindowDrop)}componentDidUpdate(e){const{isUploading:t,isUploaded:r,onModalClose:n}=this.props;e.isUploading&&!t&&r&&n()}componentWillUnmount(){window.removeEventListener("dragover",this.onWindowDragOver),window.removeEventListener("drop",this.onWindowDrop)}setOverDropTargetState(){this.state.isOverDropTarget||0===this.dropTargetEnteredCounter||this.setState({isOverDropTarget:!0}),this.state.isOverDropTarget&&0===this.dropTargetEnteredCounter&&this.setState({isOverDropTarget:!1})}onWindowDrop(e=window.event){e.preventDefault()}onWindowDragOver(e=window.event){e.preventDefault()}onDragOver(e=window.event){e.dataTransfer.dropEffect="copy"}render(){const{isUploading:e,isUploaded:t,error:r,onModalClose:i}=this.props,{isOverDropTarget:s}=this.state;return n.createElement(I.c,{onModalClose:i},n.createElement(v.c,null,(0,u.c)("Upload Subtitle File")),r?n.createElement(P.c,{errorMessage:r}):null,n.createElement(y.c,{className:"SubtitlesUploadModalContent-modalBody-h2_pKb ModalBody-modalBody-Me4Hwy",scrollDirection:b.KE},n.createElement("div",{className:d()("SubtitlesUploadModalContent-container-LKmNkC",s&&"SubtitlesUploadModalContent-dropHover-xI9YNu"),onDragEnter:e?null:this.onDragEnter,onDragLeave:e?null:this.onDragLeave,onDragOver:e?null:this.onDragOver,onDrop:e?null:this.onFileDrop},e||t?n.createElement("div",{className:"SubtitlesUploadModalContent-uploadingContainer-tAA3W0"},n.createElement(p.c,{label:(0,u.c)("Uploading subtitle file")})):n.createElement("div",{className:"SubtitlesUploadModalContent-fileInputContainer-GXzSor"},n.createElement(S.c,{buttonText:(0,u.c)("Choose a file"),className:"SubtitlesUploadModalContent-fileInputLink-jgjnBN",inputComponent:h.c,name:"subtitleFile",onChange:this.onFileDrop}),n.createElement("span",{className:"SubtitlesUploadModalContent-separator-GJ_jTF"},""),(0,u.c)("drag and drop")))),n.createElement(g.c,null,n.createElement(f.c,null,n.createElement(m.c,{onPress:i},(0,u.c)("Cancel")))))}}const O=C,M={dispatchUploadSubtitles:s.Ih},T=(0,i.Ul)((function(){return(0,c.M3)((e=>e.ui.subtitlesUploadModal),(e=>e))}),M)(O),D=function(e){const{metadataItemEntityID:t,isOpen:r,onModalClose:i}=e;return n.createElement(o.c,{className:"SubtitlesUploadModal-modal-qCg42l Modal-medium-WiZeBe Modal-modal-eUJhK0",isOpen:r,metricsPage:a.wt,onModalClose:i},n.createElement(T,{metadataItemEntityID:t,onModalClose:i}))};var k=Object.defineProperty,x=Object.defineProperties,A=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const U={dispatchResetUploadSubtitles:s.ay};class F extends n.Component{constructor(){var e;super(...arguments),j(this,"symbol"!=typeof(e="onModalClose")?e+"":e,(()=>{this.props.dispatchResetUploadSubtitles(),this.props.onModalClose()}))}render(){const e=this.props,{dispatchResetUploadSubtitles:t}=e,r=((e,t)=>{var r={};for(var n in e)N.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&R)for(var n of R(e))t.indexOf(n)<0&&L.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchResetUploadSubtitles"]);return n.createElement(D,(i=((e,t)=>{for(var r in t||(t={}))N.call(t,r)&&j(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&j(e,r,t[r]);return e})({},r),s={onModalClose:this.onModalClose},x(i,A(s))));var i,s}}const V=(0,i.Ul)(null,U)(F)},16332:(e,t,r)=>{"use strict";r.d(t,{c:()=>_});var n=r(11504),i=r(27876),s=r(64776),a=r(57864),o=r(31460),c=r(56960),l=r(42764),d=r(26312),u=r(91320),p=r(58660),m=r(3008),h=r(77072),y=r(59396),g=r(13436),f=r(9356),v=r(58620),b=r(97648),S=r(75372),P=r(9176);const I=function(e){const{serverEntityID:t,metadataItemEntityID:r,watchTogetherRoomEntityID:i,users:a,isLoading:o,isInvitePending:c,isInviteCompleted:l,inviteError:d,onInviteCompleted:u,onModalClose:I,dispatchCreateRoom:E,dispatchInviteUsers:w}=e,[C,O]=(0,n.useState)([]),M=!(0,g.c)(l)&&l&&!d;(0,n.useEffect)((()=>{M&&(null==u||u(),I(),O([]))}),[M,u,I]);const T=(0,n.useCallback)((e=>C.includes(e.id)),[C]),D=(0,n.useCallback)((e=>{const t=C.includes(e)?C.filter((t=>t!==e)):[...C,e];O(t)}),[C]),k=(0,n.useCallback)((()=>{i?w({watchTogetherRoomEntityID:i,userIDs:C}):E({metadataItemEntityID:r,userIDs:C})}),[r,i,C,E,w]);if(o)return n.createElement(s.EX,{closeButtonAccessibilityLabel:(0,y.c)("Close"),header:(0,y.c)("Watch Together")},n.createElement(s.aU,null,n.createElement("div",{className:"WatchTogetherInviteModalContent-spinnerContainer-yop4P2"},n.createElement(S.c,null))));const x=a.length>0;return n.createElement(s.EX,{closeButtonAccessibilityLabel:(0,y.c)("Close"),header:(0,y.c)("Watch Together"),zIndex:f.c.highZIndex},d?n.createElement(P.c,{errorMessage:d}):null,x?n.createElement(s.aU,null,n.createElement("div",{className:"WatchTogetherInviteModalContent-message-uppTzN"},n.createElement(h.a,null,(0,y.c)("Invite someone to watch with you."))),n.createElement(h.a,{font:"heading-3"},(0,y.c)("Friends and Accounts with Library Access")),n.createElement(b.c,{className:"WatchTogetherInviteModalContent-list-f9GtUR UserList-list-eprPYu Scroller-vertical-nKq0Q8",isUserSelected:T,serverEntityID:t,users:a,onUserSelect:D})):n.createElement(s.aU,null,n.createElement(m.ye,{align:"center",height:"100%",verticalAlign:"center"},n.createElement(v.c,{className:"WatchTogetherInviteModalContent-addFriends-xN5SeK"}))),n.createElement(s._A,null,n.createElement(s.YB,null,n.createElement(s.cT,null,n.createElement(p.q,{label:(0,y.c)("Cancel")})),n.createElement(p.q,{color:"accent",disabled:!a.length||c||0===C.length,label:(0,y.c)("Invite"),waiting:c,onPress:k}))))};var E=r(87464),w=r(60504),C=Object.defineProperty,O=Object.defineProperties,M=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=Object.defineProperty,R=Object.defineProperties,N=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=e=>e.ui.watchTogether,_=function({serverEntityID:e,metadataItemEntityID:t,watchTogetherRoomEntityID:r,metricsProperties:p,modalState:m,onInviteCompleted:h}){const y=(0,i.OY)(),g=(0,i.w1)(V),f=(0,i.w1)(function(e){return(0,a.M3)(o.c,(t=>{if(e)return t[e]}))}(r)),{isPopulated:v,users:b}=function(e){const t=(0,E.c)(void 0,!0),{users:r,isPopulated:i}=(0,w.c)(void 0,{includeOnlyFriendsWithoutAccess:!1});return{users:(0,n.useMemo)((()=>{const n=r.map((e=>{const r=!!t.find((t=>t.uuid===e.id));return{id:e.idRaw,uuid:e.id,restricted:r,thumb:e.avatar,title:e.displayName,username:e.username}}));return[...t.map((e=>((e,t)=>O(e,M(t)))(((e,t)=>{for(var r in t||(t={}))D.call(t,r)&&x(e,r,t[r]);if(T)for(var r of T(t))k.call(t,r)&&x(e,r,t[r]);return e})({},e),{restricted:!0}))).filter((e=>!n.some((t=>t.uuid===e.uuid)))),...n].filter((({id:t})=>!e||-1===e.users.findIndex((({id:e})=>e===t)))).sort(((e,t)=>{const r=e.title||e.username,n=t.title||t.username;return r.localeCompare(n)}))}),[t,r,e]),isPopulated:i}}(f),S=(0,n.useCallback)(((...e)=>{y((0,d.qK)(...e))}),[y]),P=(0,n.useCallback)(((...e)=>{y((0,d.CQ)(...e))}),[y]);return(0,u.c)({page:c.AX}),(0,n.useEffect)((()=>{y((0,d.e4)())}),[y]),n.createElement(s.wJ,{isOpen:m.isOpen,onClose:m.onClose},n.createElement(l.c,(C=((e,t)=>{for(var r in t||(t={}))j.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))U.call(t,r)&&F(e,r,t[r]);return e})({},p),A={page:c.AX},R(C,N(A))),n.createElement(I,{dispatchCreateRoom:S,dispatchInviteUsers:P,inviteError:g.inviteError,isInviteCompleted:g.isInviteCompleted,isInvitePending:g.isInvitePending,isLoading:!v,metadataItemEntityID:t,serverEntityID:e,users:b,watchTogetherRoomEntityID:r,onInviteCompleted:h,onModalClose:m.onClose})));var C,A}},854:(e,t,r)=>{"use strict";r.d(t,{c:()=>De});var n=r(89080),i=r.n(n),s=r(11504),a=r(13968),o=r(51268),c=r(57708),l=r(67836),d=r(57864),u=r(99112),p=r(84360),m=r(35688),h=r(4659),y=r(2764),g=r(63900),f=r(76648),v=r(83095),b=r(65348),S=r(19264),P=r(55724),I=r(55188),E=r(40604);function w(e,t){const{viewCount:r,viewOffset:n,saved:i}=e;if(null!=i&&!i)return!1;const s=function(e,t){const{isLibraryItem:r,isFolder:n,isExtra:i}=e;return r&&!n&&!i&&t.mediaType===E.im}(e,t);return s&&!r&&!n}var C=r(12612);function O(e,t){const{type:r,saved:n,unviewedLeafCount:i,isLibraryItem:s,isExtra:a}=e;return!(null!=n&&!n)&&(s&&!a&&C.ue(r)&&t.mediaType===E.im&&!!i)}var M=r(51796);function T(e){const{type:t,isLibraryItem:r,isExtra:n,Media:i}=e,s=(0,C.GG)(t);if(!s)return!1;const a=i.length;return r&&!n&&s.mediaType===E.im&&a>1}var D=r(30388),k=r(3960),x=r(19912),A=r(51988),R=r(10672),N=r(27376),L=r(32636),j=r(71500),U=r(13760),F=r(49340),V=r(75274),_=r(25812),W=r(78112);function B(e,t,r){const n=t-e,i=r-e;return(0,g.c)(i,n)}var H=r(97066),z=Object.defineProperty,G=(e,t,r)=>(((e,t,r)=>{t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class q extends s.Component{constructor(e,t){super(e,t),G(this,"tickTimeout"),G(this,"tick",(()=>{this.setState(this.getState(this.props)),this.setTickTimeout()})),this.state=this.getState(e)}UNSAFE_componentWillMount(){this.setTickTimeout()}UNSAFE_componentWillReceiveProps(e,t){this.setState(this.getState(e))}shouldComponentUpdate(e,t){return(0,o.c)(this,e,t)}componentWillUnmount(){this.tickTimeout&&window.clearTimeout(this.tickTimeout)}getState({beginsAt:e,endsAt:t}){return{progress:B(e,t,Date.now()/1e3)}}setTickTimeout(){this.tickTimeout=window.setTimeout(this.tick,6e4-Date.now()%6e4)}render(){const e=this.props.className,t=this.state.progress;return t?s.createElement(H.c,{className:e,progress:t}):null}}const K=q;var Q=Object.defineProperty,$=(e,t,r)=>(((e,t,r)=>{t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Y extends s.Component{constructor(e,t){super(e,t),$(this,"_moreButtonID"),$(this,"onRecordPress",(e=>{this.setState({isSubscribeModalOpen:!0})})),$(this,"onSubscribeModalClose",(()=>{this.setState({isSubscribeModalOpen:!1})})),this.state={isSubscribeModalOpen:!1},this._moreButtonID=(0,F.c)()}shouldComponentUpdate(e,t){return(0,o.c)(this,e,t)}render(){const{className:e,serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,route:a,type:o,title:c,subscriptionType:l,isSubscribed:d,showLink:u,beginsAt:p,endsAt:m,showPlay:h,showRecord:y,onPlayLiveTVPress:g}=this.props,{isSubscribeModalOpen:f}=this.state;return s.createElement("div",{className:i()(e,"EPGPosterCardOverlay-overlay-ABr7ev")},s.createElement("div",{className:"EPGPosterCardOverlay-background-pkB7QG"}),d?s.createElement("div",{className:"EPGPosterCardOverlay-subscriptionBadge-Eqfzs9 MetadataPosterCardOverlay-badge-L1fayd"},s.createElement(U.c,{type:l})):null,u?s.createElement(j.c,{className:"EPGPosterCardOverlay-link-CB8q3P",to:a}):null,s.createElement(K,{beginsAt:p,className:"EPGPosterCardOverlay-progress-HGYvIY PosterCardOverlayProgress-progress-sKteKC",endsAt:m}),h?s.createElement(V.c,{circleClassName:"EPGPosterCardOverlay-playCircle-haZeDa MetadataPosterCardOverlay-playCircle-g9aUXW PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:u?"EPGPosterCardOverlay-playButton-d3dDtO RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF":"EPGPosterCardOverlay-playCoverButton-DoSJKa EPGPosterCardOverlay-playButton-d3dDtO RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterPlayButton",tabIndex:"-1",title:c,onPress:g}):null,!h&&y?s.createElement(_.c,{circleClassName:"EPGPosterCardOverlay-recordCircle-aeFjdK RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:u?"EPGPosterCardOverlay-recordButton-OIJXdp RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF":"EPGPosterCardOverlay-recordCoverButton-aaTUSB EPGPosterCardOverlay-recordButton-OIJXdp RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterRecordButton",iconClassName:"EPGPosterCardOverlay-recordIcon-jYuN57 RecordIcon-recordIcon-OWFVfW",tabIndex:"-1",title:c,onPress:this.onRecordPress}):null,h&&y?s.createElement(_.c,{circleClassName:"EPGPosterCardOverlay-recordCircleBottom-df3iiQ EPGPosterCardOverlay-recordCircle-aeFjdK RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:"EPGPosterCardOverlay-recordButtonBottom-B7GZWt EPGPosterCardOverlay-recordButton-OIJXdp RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterRecordButton",iconClassName:"EPGPosterCardOverlay-recordIconBottom-umyOEt RecordIcon-recordIcon-OWFVfW",tabIndex:"-1",title:c,onPress:this.onRecordPress}):null,s.createElement(W.c,{isOpen:f,metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,subscriptionType:o,onModalClose:this.onSubscribeModalClose}))}}const X=Y;var J=r(77231),Z=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,se=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&se(e,r,t[r]);if(re)for(var r of re(t))ie.call(t,r)&&se(e,r,t[r]);return e},oe=(e,t)=>ee(e,te(t));const ce=(0,x.c)(J.c),le=(0,M.c)((function(){return(0,d.M3)(((e,{type:t})=>t),((e,{listType:t})=>t),(0,h.c)(),b.c,v.c,S.c,(0,k.c)(),(0,d.M3)((0,h.c)(),(e=>e&&e.viewOffset?(0,g.c)(e.viewOffset,e.duration):0)),(0,y.c)(),(0,f.c)(),((e,t,r,n={},i={},s={},a,o,c,l)=>{const{subtype:d,title:p,viewCount:m,viewOffset:h,unviewedLeafCount:y,smart:g,icon:f,metadataState:v,mediaState:b,deletedAt:S,subscriptionID:E,subscriptionType:M,grandparentSubscriptionID:D,grandparentSubscriptionType:k,ratingKey:x,isFolder:L,isPlaylist:j,Media:U}=r,F=(0,A.gR)({server:n,provider:i,stableUser:s,metadataItem:r}),V=!!i.features.subscribe,_=(0,A.EH)({server:n,provider:i,stableUser:s,metadataItem:r}),W=t===C.Ww&&(0,A.Q$)({server:n,provider:i,stableUser:s,metadataItem:r}),B=t===C.Ww&&(0,A.Qt)({server:n,provider:i,stableUser:s,metadataItem:r}),H=(0,A.g5)({server:n,provider:i,stableUser:s,metadataItem:r}),z=C.GG(e),G=C.wH(e),q=!(!z||!G||z.id!==G.id),K=U.length,Q=null!=E||null!=D,$=!!g&&j,Y=f===P.gJ,X=v===I.AZ,J=v===I.Il||v===I.bW,Z=!X&&!J&&!!b,ee=X||J||Z,te=!ee&&!!S,re=!(!x||!c)&&u.c.allowSyncDownload;return{server:n,provider:i,route:a,title:p,viewCount:m,viewOffset:h,viewPercent:o,unviewedLeafCount:y,mediaCount:K,subscriptionType:M||k,type:e,subtype:d,isSubscribed:Q,isMultiVersion:T(r),isSmart:$,isFavorite:Y,isMatching:X,isProcessing:J,isAnalyzing:Z,isRefreshing:ee,isTrash:te,isLeafType:q,showLink:!!a,showUnplayedBadge:w(r,z),showUnplayedNumberBadge:O(r,G),showPlay:F,showRecord:V,showEdit:_,showFavorite:W,showUnfavorite:B,showSelect:H,showMore:!L,showAvailableOffline:re,beginsAt:l&&l.beginsAt,endsAt:l&&l.endsAt,source:c,ratingKey:x,hasOfflineFile:(0,R.c)(r),hasOwnSubscription:(0,N.c)(r)}}))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,itemServerEntityID:t.itemServerEntityID||t.serverEntityID,itemProviderEntityID:t.itemProviderEntityID||t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext}};return{onPlayPress(){e((0,m.wb)(oe(ae({},r),{options:{containerKey:t.containerKey,listType:t.listType}})))},onPlayLiveTVPress(){e((0,p.Ky)(oe(ae({},r),{options:{containerKey:t.containerKey,listType:t.listType}})))},onEditPress(){e((0,D.W_)(r))},onFavoritePress(){e((0,D.Sc)(r))},onUnfavoritePress(){e((0,D.is)(r))}}}),L.c)((function(e){const t=e,{server:r,provider:n}=t,i=((e,t)=>{var r={};for(var n in e)ne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&ie.call(e,n)&&(r[n]=e[n]);return r})(t,["server","provider"]),a=oe(ae({},i),{itemServerEntityID:e.itemServerEntityID||e.serverEntityID,itemProviderEntityID:e.itemProviderEntityID||e.providerEntityID});return n.protocols.livetv?s.createElement(X,ae({},a)):e.showSelect&&!e.showLinkOnly?s.createElement(ce,ae({},a)):s.createElement(J.c,ae({},a))})),de={poster:"MetadataPosterCardFace-poster-MwJE1t",face:"MetadataPosterCardFace-face-FcNn6A MetadataPosterCardFace-poster-MwJE1t",isSelected:"MetadataPosterCardFace-isSelected-VgFLbY",faceFront:"MetadataPosterCardFace-faceFront-h7AIDh",faceBack:"MetadataPosterCardFace-faceBack-P7IPxT"};var ue=Object.defineProperty,pe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,ye=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ge(e){const t=e,{className:r,serverEntityID:n,providerEntityID:a,metadataItemEntityID:o,itemServerEntityID:c,itemProviderEntityID:d,type:u,subtype:p,selectionType:m,activeSelectionType:h,isSelected:y,isOffscreen:g,visibleFace:f,imageWidth:v,imageHeight:b,imageUrl:S,disableCrossFade:P,icon:I,backgroundSize:E,isFolder:w,showOverlay:C,onImageLoad:O,onImageError:M,onSelectItem:T,onDeselectItem:D}=t,k=((e,t)=>{var r={};for(var n in e)me.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&pe)for(var n of pe(e))t.indexOf(n)<0&&he.call(e,n)&&(r[n]=e[n]);return r})(t,["className","serverEntityID","providerEntityID","metadataItemEntityID","itemServerEntityID","itemProviderEntityID","type","subtype","selectionType","activeSelectionType","isSelected","isOffscreen","visibleFace","imageWidth","imageHeight","imageUrl","disableCrossFade","icon","backgroundSize","isFolder","showOverlay","onImageLoad","onImageError","onSelectItem","onDeselectItem"]);return s.createElement("div",{className:i()(r,de[f],y&&de.isSelected)},s.createElement(l.c,{backgroundSize:E,disableCrossFade:P,height:b,icon:I,isFolder:w,isOffscreen:g,itemProviderEntityID:d,itemServerEntityID:c,providerEntityID:a,serverEntityID:n,subtype:p,type:u,url:S,width:v,onError:M,onLoad:O}),C?s.createElement(le,((e,t)=>{for(var r in t||(t={}))me.call(t,r)&&ye(e,r,t[r]);if(pe)for(var r of pe(t))he.call(t,r)&&ye(e,r,t[r]);return e})({activeSelectionType:h,isSelected:y,itemProviderEntityID:d,itemServerEntityID:c,metadataItemEntityID:o,providerEntityID:a,selectionID:o,selectionType:m,serverEntityID:n,type:u,onDeselectItem:D,onSelectItem:T},k)):null)}ge.defaultProps={className:de.face,showOverlay:!0};const fe=ge;var ve=Object.defineProperty,be=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,Ie=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ee=(e,t)=>{for(var r in t||(t={}))Se.call(t,r)&&Ie(e,r,t[r]);if(be)for(var r of be(t))Pe.call(t,r)&&Ie(e,r,t[r]);return e},we=(e,t,r)=>(Ie(e,"symbol"!=typeof t?t+"":t,r),r);const Ce="faceFront",Oe="faceBack",Me=(0,a.c)(c.c.posterFlipSpeed);class Te extends s.Component{constructor(e,t){super(e,t),we(this,"_flipTimeoutID"),we(this,"onImageLoad",(()=>{this.state.isLoadingFace&&this._flipCard()})),we(this,"onImageError",(()=>{this.state.isLoadingFace&&this._flipCard()})),we(this,"onFlipComplete",(()=>{this.setState({isFlippingFace:!1,previousImageUrl:null})})),this.state={visibleFace:Ce,isLoadingFace:!1,isFlippingFace:!1,previousImageUrl:null}}UNSAFE_componentWillReceiveProps(e){const t=this.props.imageUrl,r=e.imageUrl&&t!==e.imageUrl;this.props.metadataKey===e.metadataKey&&r&&this._prepareFlip(t)}shouldComponentUpdate(e,t){return(0,o.c)(this,e,t)}componentWillUnmount(){this._cancelFlip()}_prepareFlip(e){this._cancelFlip(),this.setState({isLoadingFace:!0,isFlippingFace:!0,previousImageUrl:e})}_flipCard(){this.setState((e=>({isLoadingFace:!1,visibleFace:e.visibleFace===Ce?Oe:Ce})),(()=>{this._flipTimeoutID=window.setTimeout(this.onFlipComplete,Me)}))}_cancelFlip(){this._flipTimeoutID&&(this._flipTimeoutID=window.clearTimeout(this._flipTimeoutID))}render(){const e=this.props,{className:t,cardClassName:r,cardFaceClassName:n,metadataKey:a,imageWidth:o,imageHeight:c,imageUrl:l}=e,d=((e,t)=>{var r={};for(var n in e)Se.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&be)for(var n of be(e))t.indexOf(n)<0&&Pe.call(e,n)&&(r[n]=e[n]);return r})(e,["className","cardClassName","cardFaceClassName","metadataKey","imageWidth","imageHeight","imageUrl"]),{visibleFace:u,isLoadingFace:p,isFlippingFace:m,previousImageUrl:h}=this.state,y={width:o,height:c};return s.createElement("div",{key:a,className:t,"data-testid":"metadataPosterCard--"+a},s.createElement("div",{className:i()(r,u===Oe&&"MetadataPosterCard-isFlipped-TEeFQN"),style:y},u===Ce||m?s.createElement(fe,Ee({key:Ce,className:n,disableCrossFade:m,imageHeight:c,imageUrl:u===Ce&&!p||u===Oe&&p?l:h,imageWidth:o,visibleFace:Ce,onImageError:this.onImageError,onImageLoad:this.onImageLoad},d)):null,u===Oe||m?s.createElement(fe,Ee({key:Oe,className:n,disableCrossFade:m,imageHeight:c,imageUrl:u===Oe&&!p||u===Ce&&p?l:h,imageWidth:o,visibleFace:Oe,onImageError:this.onImageError,onImageLoad:this.onImageLoad},d)):null))}}we(Te,"defaultProps",{className:"MetadataPosterCard-cardContainer-NlYfYM",cardClassName:"MetadataPosterCard-card-NZOemZ"});const De=Te},3408:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(89080),i=r.n(n),s=r(11504),a=r(55724),o=r(94512),c=r(98144),l=r(81808),d=r(43976);const u=function(e){const{className:t,type:r,width:n,height:u,icon:p}=e,m=function(e){switch(e){case a.qu:return o.default;case a.QD:return c.default;case a.s5:return l.default}}(p)||d.c[r];if(!m)return null;const h={fontSize:Math.max(14,Math.min(Math.round(n/4),42)),lineHeight:`${u}px`},y={width:`${n}px`,height:`${u}px`};return s.createElement("div",{className:i()(t,"MetadataIcon-container-H9R5NB"),style:y},s.createElement("div",{style:h},s.createElement(m,null)))},p=function(e){const{className:t,type:r,icon:n,width:o,height:c,isFolder:l}=e;return s.createElement(u,{className:i()(t,"MetadataPosterCardIcon-placeholderIcon-MZ_UL8"),height:c,icon:l?a.QD:n,type:r,width:o})}},67836:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(29524),s=r(3408);const a=function(e){const{serverEntityID:t,providerEntityID:r,itemServerEntityID:a,itemProviderEntityID:o,type:c,isOffscreen:l,url:d,src:u,width:p,height:m,icon:h,backgroundSize:y,isFolder:g,disableCrossFade:f,onLoad:v,onError:b}=e;return l?null:d||u?n.createElement(i.c,{backgroundPosition:"artist"===c?"center top":"center",backgroundSize:y,disableCrossFade:f,height:m,providerEntityID:o||r,serverEntityID:a||t,src:u,url:d,width:p,onError:b,onLoad:v}):n.createElement(s.c,{height:m,icon:h,isFolder:g,type:c,width:p})}},77231:(e,t,r)=>{"use strict";r.d(t,{c:()=>B});var n=r(89080),i=r.n(n),s=r(11504),a=r(65600),o=r(59396),c=r(71500),l=r(76485),d=r(49340),u=r(95292),p=r(75372),m=r(75274),h=r(41832),y=r(84596),g=r(18356),f=r(52280),v=r(89960),b=r(66472),S=r(61554),P=r(97628),I=r(3268),E=r.n(I),w=r(52908);function C(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-files-560"};i["aria-hidden"]=!t,i.style=n,i.className=w.c.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["path",{d:"m480 240l0 240-240 0 0-240 240 0m-40 40l-160 0 0 160 160 0 0-160m-40-120l0 40-200 0 0 200-40 0 0-240 240 0m-80-80l0 40-200 0 0 200-40 0 0-240 240 0"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}C.propTypes={"aria-label":E().string,className:E().string,style:E().object};const O=C;var M=r(13172),T=r(77740),D=r(90936),k=r(44916);function x(e){const{children:t,backgroundClassName:r,className:n,onMouseEnter:i}=e;return s.createElement("div",{className:n,onMouseEnter:i},s.createElement("div",{className:r}),t)}x.defaultProps={className:"PosterCardOverlay-overlay-l_hHxM",backgroundClassName:"PosterCardOverlay-background-hZYm3p"};const A=x;var R=r(97066);const N="MetadataPosterCardOverlay-overlay-FRiaEy PosterCardOverlay-overlay-l_hHxM",L="MetadataPosterCardOverlay-link-W0BYnl",j="MetadataPosterCardOverlay-selectCoverButton-xZlVyk MetadataPosterCardOverlay-coverButton-q22ofz",U="MetadataPosterCardOverlay-favoriteButton-sQftvV MetadataPosterCardOverlay-button-ZHSYaF",F="MetadataPosterCardOverlay-refreshingCircle-tRgtNG MetadataPosterCardOverlay-centerCircle-sN9W7e";var V=Object.defineProperty,_=(e,t,r)=>(((e,t,r)=>{t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class W extends s.Component{constructor(e,t){super(e,t),_(this,"_selectButtonID"),_(this,"onActionsMenuOpenChange",(e=>{this.setState({isActionsMenuOpen:e})})),this.state={isActionsMenuOpen:!1},this._selectButtonID=(0,d.c)()}render(){const{className:e,serverEntityID:t,providerEntityID:r,itemServerEntityID:n,itemProviderEntityID:d,metadataItemEntityID:I,containerKey:E,listType:w,metricsContext:C,route:x,title:V,viewPercent:_,unviewedLeafCount:W,mediaCount:B,hasOfflineFile:H,hasOwnSubscription:z,isSubscribed:G,isMultiVersion:q,isSmart:K,isFavorite:Q,isMatching:$,isProcessing:Y,isAnalyzing:X,isRefreshing:J,isTrash:Z,showUnplayedBadge:ee,showUnplayedNumberBadge:te,showLink:re,showLinkOnly:ne,showPlay:ie,showEdit:se,showSelect:ae,showMore:oe,showFavorite:ce,showUnfavorite:le,showRemove:de,showAvailableOffline:ue,canDrag:pe,hasActiveSelection:me,isSelected:he,isOtherItemSelected:ye,isConflictingTypeSelected:ge,isModifierKeyPressed:fe,isDragging:ve,isLeafType:be,source:Se,ratingKey:Pe,onMouseEnter:Ie,onPlayPress:Ee,onEditPress:we,onFavoritePress:Ce,onUnfavoritePress:Oe,onRemovePress:Me,onSelectPress:Te,onDeselectPress:De}=this.props,{isActionsMenuOpen:ke}=this.state,xe=ae&&(fe||ye);if(ne)return s.createElement("div",{className:i()(e,N)},re?s.createElement(c.c,{className:L,to:x}):null);const Ae=me||ve||fe||J||Z,Re=ke,Ne=ke||ve||J||Z,Le=G||z||be&&H;return s.createElement(A,{backgroundClassName:i()("MetadataPosterCardOverlay-background-QgYqRU PosterCardOverlay-background-hZYm3p",Ae&&"MetadataPosterCardOverlay-selectedBackground-QSrzqz PosterCardOverlay-selectedBackground-D7ycxS",Re&&"MetadataPosterCardOverlay-hoverBackground-LA0oVv PosterCardOverlay-hoverBackground-xWaPWd",Ne&&"MetadataPosterCardOverlay-visibleBackground-vsHAoI PosterCardOverlay-visibleBackground-oWQOGI"),className:i()(e,N,me&&"MetadataPosterCardOverlay-hasActiveSelection-d9HbjG",he&&"MetadataPosterCardOverlay-isSelected-bnymN5",ge&&"MetadataPosterCardOverlay-isConflictingTypeSelected-Xq8FSg",ae&&fe&&"MetadataPosterCardOverlay-isModifierKeyPressed-ACMOvM",ve&&"MetadataPosterCardOverlay-isDragging-IcNboQ",ke&&"MetadataPosterCardOverlay-isActionsMenuOpen-f7Ukj_"),onMouseEnter:Ie},ee?s.createElement("div",{className:"MetadataPosterCardOverlay-unplayedTagContainer-mxYXS9","data-testid":"metadataPosterUnwatchedBadge"},s.createElement("div",{className:"MetadataPosterCardOverlay-unplayedTag-VGxMvC MetadataPosterCardOverlay-unplayedBadge-FBTTQ2 MetadataPosterCardOverlay-badge-L1fayd"})):null,te?s.createElement("div",{className:"MetadataPosterCardOverlay-unplayedBadge-FBTTQ2 MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterUnwatchedNumberBadge"},W):null,q&&!Le?s.createElement("div",{className:"MetadataPosterCardOverlay-versionBadge-lbqUXP MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterMultipleVersionBadge"},s.createElement(O,{className:"MetadataPosterCardOverlay-versionBadgeIcon-phkIf_"}),B):null,!K||Q||Le?null:s.createElement("div",{className:"MetadataPosterCardOverlay-smartBadge-y4tGL1 MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterSmartBadge"},s.createElement(D.c,{className:"MetadataPosterCardOverlay-smartBadgeIcon-sZRyIF"})),K&&Q&&!Le?s.createElement("div",{className:"MetadataPosterCardOverlay-favoriteBadge-h4Nuw6 MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterFavoriteBadge"},s.createElement(P.c,{className:"MetadataPosterCardOverlay-favoriteBadgeIcon-ZskkRS"})):null,_?s.createElement(R.c,{className:"MetadataPosterCardOverlay-progress-Zh0uGv PosterCardOverlayProgress-progress-sKteKC",progress:_}):null,J?s.createElement("div",{className:"MetadataPosterCardOverlay-refreshingSpinnerContainer-K7t1sr"},s.createElement(p.c,{className:"MetadataPosterCardOverlay-refreshingSpinner-OBxD_L"})):null,$?s.createElement("div",{className:F},s.createElement(T.c,{"aria-label":(0,o.c)("Matching")})):null,Y?s.createElement("div",{className:F},s.createElement(k.c,{"aria-label":(0,o.c)("Downloading Metadata")})):null,X?s.createElement("div",{className:F},s.createElement(v.c,{"aria-label":(0,o.c)("Analyzing")})):null,Z?s.createElement("div",{className:"MetadataPosterCardOverlay-trashCircle-OHqHSD MetadataPosterCardOverlay-centerCircle-sN9W7e"},s.createElement(a.default,{accessibilityLabel:(0,o.c)("In Trash")})):null,re?s.createElement(c.c,{className:L,to:x}):null,xe&&!ge?s.createElement(c.c,{className:j,onPress:Te}):null,xe&&ge?s.createElement(l.c,{className:j,component:c.c,hideOnPress:!1,showOnFocus:!1,tooltip:(0,o.c)("A different type is selected"),tooltipAttachment:u.wA,tooltipTarget:this._selectButtonID}):null,ue?s.createElement(y.c,{className:"MetadataPosterCardOverlay-hasSubscriptionBadge-pren8V DownloadIcon-downloadIcon-x4iupc PlexIcon-plexIcon-a5zCNX MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd",hasOfflineFile:H,hasOwnSubscription:z,ratingKey:Pe,showShadow:!0,source:Se}):null,ue?s.createElement(g.c,{metadataItemEntityID:I,providerEntityID:d}):null,ie?s.createElement(m.c,{circleClassName:"MetadataPosterCardOverlay-playCircle-g9aUXW PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:re?"MetadataPosterCardOverlay-playButton-vL2csp PlayButton-playButton-vS1WII MetadataPosterCardOverlay-button-ZHSYaF":"MetadataPosterCardOverlay-playCoverButton-We6NqK MetadataPosterCardOverlay-playButton-vL2csp PlayButton-playButton-vS1WII MetadataPosterCardOverlay-button-ZHSYaF",component:pe?"div":"button","data-testid":"metadataPosterPlayButton",tabIndex:"-1",title:V,onPress:Ee}):null,se?s.createElement(c.c,{"aria-label":(0,o.c)("Edit {title}",{title:V}),className:"MetadataPosterCardOverlay-editButton-SiNXfV MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterEditButton",tabIndex:"-1",onPress:we},s.createElement(b.c,null)):null,ce&&!Le?s.createElement(c.c,{"aria-label":(0,o.c)("Add {title} to favorites",{title:V}),className:U,"data-testid":"metadataPosterFavoriteButton",tabIndex:"-1",onPress:Ce},s.createElement(S.c,null)):null,le&&!Le?s.createElement(c.c,{"aria-label":(0,o.c)("Remove {title} from favorites",{title:V}),className:U,"data-testid":"metadataPosterUnfavoriteButton",tabIndex:"-1",onPress:Oe},s.createElement(P.c,null)):null,de?s.createElement(c.c,{"aria-label":(0,o.c)("Remove {title}",{title:V}),className:"MetadataPosterCardOverlay-removeButton-qdOQvw MetadataPosterCardOverlay-button-ZHSYaF",tabIndex:"-1",onPress:Me},s.createElement(M.c,null)):null,oe?s.createElement(f.c,{className:"MetadataPosterCardOverlay-moreButton-l1UTa_ MetadataPosterCardOverlay-button-ZHSYaF",containerKey:E,"data-testid":"metadataPosterMoreButton",isMenuOpen:ke,itemProviderEntityID:d,itemServerEntityID:n,listType:w,metadataItemEntityID:I,metricsContext:C,providerEntityID:r,serverEntityID:t,showEdit:!1,showPlay:!1,showQueuePlexMix:!1,tabIndex:"-1",onMenuOpenChange:this.onActionsMenuOpenChange}):null,ae?s.createElement(h.c,{circleClassName:"MetadataPosterCardOverlay-selectCircle-alQxr1 SelectButton-selectCircle-TVtowg",className:"MetadataPosterCardOverlay-selectButton-ZI8nkD SelectButton-selectButton-_goGWp MetadataPosterCardOverlay-button-ZHSYaF",id:this._selectButtonID,isDisabled:ge,isSelected:he,tabIndex:"-1",title:V,onPress:Te}):null,he?s.createElement(c.c,{className:"MetadataPosterCardOverlay-deselectCoverButton-oohVAs MetadataPosterCardOverlay-coverButton-q22ofz",onPress:De}):null)}}const B=W},86108:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(89080),i=r.n(n),s=r(11504);const a=function(e){const{imageWidth:t,imageHeight:r,isSelected:n}=e,a={width:t,height:r};return s.createElement("div",{className:i()("MetadataPosterCardPlaceholder-placeholder-JeIFFv MetadataPosterCardFace-poster-MwJE1t",n&&"MetadataPosterCardPlaceholder-isSelected-Ld0GVF MetadataPosterCardFace-isSelected-VgFLbY"),style:a})}},82432:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(89080),i=r.n(n),s=r(11504);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){var t=e,{className:r,component:n,isSecondary:a,isDoubleLine:u,isSplitLine:p}=t,m=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(t,["className","component","isSecondary","isDoubleLine","isSplitLine"]);return s.createElement(n,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({className:i()(r,u?"MetadataPosterTitle-doubleLineTitle-uSHzce MetadataPosterTitle-title-bvCBDN":"MetadataPosterTitle-singleLineTitle-e8SSfL MetadataPosterTitle-title-bvCBDN",a&&"MetadataPosterTitle-isSecondary-lJfKBu",p&&"MetadataPosterTitle-isSplitLine-eazQzl")},m))}},97066:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504);var i,s=Object.defineProperty;class a extends n.Component{constructor(e,t){super(e,t),this.state={progress:e.progress}}UNSAFE_componentWillReceiveProps(e){this.setState({progress:e.progress})}render(){const e=this.props.className,t=this.state.progress;return n.createElement("div",{className:e},n.createElement("div",{className:"PosterCardOverlayProgress-progressTrack-qdWcXY"}),n.createElement("div",{className:"PosterCardOverlayProgress-progressBar-ghFq11",style:{transform:`translate3d(-${100-t}%, 0, 0)`}}))}}((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(a,"symbol"!=typeof(i="defaultProps")?i+"":i,{progress:"PosterCardOverlayProgress-progress-sKteKC"});const o=a},36940:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);const i={img:"AttributionLogo-img-yiDFML"};function s(e){const{attributionLogo:t}=e;return n.createElement("img",{className:i.img,src:t})}},35732:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(92264);const s=function({className:e,grandparentTitle:t}){return n.createElement(i.c,{className:e,title:t})}},60680:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(57864),i=r(4659),s=r(83095),a=r(65348),o=r(51796),c=r(39172),l=r(11504),d=r(84840);const u=(0,o.c)((function(){return(0,n.M3)(((e,{metricsContext:t})=>t),a.c,s.c,(0,i.c)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{grandparentTitle:n.grandparentTitle,grandparentRoute:(0,c.c)(t,r,n.grandparentKey,i)}}))}))((function({className:e,tabIndex:t,grandparentTitle:r,grandparentRoute:n}){return l.createElement(d.c,{className:e,route:n,tabIndex:t,title:r})}))},92264:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function({className:e,title:t}){return n.createElement("span",{className:e,title:t},t)}},61296:(e,t,r)=>{"use strict";r.d(t,{c:()=>b});var n=r(11504),i=r(34516),s=r(72052),a=r(69604),o=r(46308),c=r(6396),l=r(70184),d=r(82220),u=r(59396),p=r(17068),m=r(51268);var h=Object.defineProperty,y=(e,t,r)=>(((e,t,r)=>{t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const g=6e4;function f({beginsAt:e,endsAt:t,channel:r,showChannel:n,showFullTime:p,timeFormat:m}){if(!e)return(0,u.c)("No upcoming airings");if((0,d.c)(e,t)){const e=t-Date.now()/1e3;return e<=60?(0,u.c)("About to end"):(0,o.c)(e)}if((0,c.c)(e)&&(0,l.c)(e,{minutes:60})){const t=1e3*e-Date.now();if(t<=g)return n&&r?(0,u.c)("Starting now on {channel}",{channel:r}):(0,u.c)("Starting now");const i=(0,a.c)(t);return n&&r?(0,u.c)("Starting in {duration} on {channel}",{duration:i,channel:r}):(0,u.c)("Starting in {duration}",{duration:i})}return(p?i.c:s.c)(e,n&&r,{timeFormat:m})}class v extends n.Component{constructor(e,t){super(e,t),y(this,"tickTimeout"),y(this,"onTickTimeout",(()=>{this.setState(this.getState(this.props)),this.setTickTimeout()})),this.state=this.getState(e)}componentDidMount(){this.setTickTimeout()}UNSAFE_componentWillReceiveProps(e){const t=this.getState(e);t.title!==this.state.title&&this.setState(t)}shouldComponentUpdate(e,t){return(0,m.c)(this,e,t)}componentWillUnmount(){this.tickTimeout&&window.clearTimeout(this.tickTimeout)}getState(e){return{title:f(e)}}setTickTimeout(){this.tickTimeout=window.setTimeout(this.onTickTimeout,g-Date.now()%g)}render(){const{className:e,beginsAt:t,endsAt:r,channel:i,showChannel:s}=this.props,{title:a}=this.state,o=s&&!!i&&(0,d.c)(t,r);return n.createElement("span",{className:e},o?n.createElement("span",null,(0,u.c)("Now on {channel}",{channel:i}),n.createElement(p.c,{className:"MetadataTitleAirDate-separator-INgZna DashSeparator-separator-_3fMys"}),a):a)}}y(v,"defaultProps",{showFullTime:!1,showChannel:!1});const b=v},5116:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(27876),i=r(57864),s=r(4659),a=r(92264);const o=(0,n.Ul)((function(){return(0,i.M3)((0,s.c)(),((e={})=>({title:e.title})))}))(a.c)},65919:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(27876),i=r(57864),s=r(4659),a=r(11504),o=r(9968);const c=(0,n.Ul)((function(e,t){return(0,i.M3)((0,s.c)(),((e={})=>({rating:e.rating,ratingImage:e.ratingImage,audienceRating:e.audienceRating,audienceRatingImage:e.audienceRatingImage})))}))((function({className:e,rating:t,ratingImage:r,audienceRating:n,audienceRatingImage:i}){return t||n?a.createElement("span",{className:e},a.createElement(o.c,{audienceRating:n,audienceRatingImage:i,rating:t,ratingImage:r})):null}))},74556:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(69604);const s=function({className:e,duration:t}){return t?n.createElement("span",{className:e},(0,i.c)(t)):null}},1716:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(17068),s=r(84840),a=r(61384);const o=function({className:e,tabIndex:t,title:r,index:o,route:c,parentTitle:l,parentIndex:d,parentRoute:u,originallyAvailableAt:p}){return n.createElement("span",{className:e},n.createElement(a.c,{index:o,originallyAvailableAt:p,parentIndex:d,parentRoute:u,parentTitle:l,route:c,tabIndex:t,title:r}),r?n.createElement(i.c,null):null,r?n.createElement(s.c,{route:c,tabIndex:t,title:r}):null)}},78143:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(57864),i=r(4659),s=r(61500),a=r(85328),o=r(51796),c=r(39172),l=r(1716);const d=(0,o.c)((function(){return(0,n.M3)(((e,{metricsContext:t})=>t),a.c,s.c,(0,i.c)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{title:n.title,index:n.index,route:(0,c.c)(t,r,n.key,i),parentTitle:n.parentTitle,parentIndex:n.parentIndex,parentRoute:n.skipParent?null:(0,c.c)(t,r,n.parentKey,i),originallyAvailableAt:n.originallyAvailableAt}}))}))(l.c)},84840:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(71500);const s=function({className:e,tabIndex:t,title:r,route:s}){return r?s?n.createElement(i.c,{className:e,"data-testid":"metadataTitleLink",tabIndex:t,title:r,to:s},r):n.createElement("span",{className:e,title:r},r):null}},16116:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(57864),i=r(4659),s=r(51796),a=r(3960),o=r(84840);const c=(0,s.c)((function(){return(0,n.M3)((0,i.c)(),(0,a.c)(),((e={},t)=>({title:e.title,route:t})))}))(o.c)},28220:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(672);const s=function({className:e,originallyAvailableAt:t}){return n.createElement("span",{className:e},(0,i.c)(t,"MMM d, yyyy"))}},61384:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(87416),s=r(37156),a=r(17068),o=r(71500);const c=function(e){const{className:t,tabIndex:r,title:c,index:l,route:d,parentTitle:u,parentIndex:p,parentRoute:m,originallyAvailableAt:h}=e,y=(0,s.c)({seasonIndex:p,noLeadingZero:!0}),g=(0,i.c)({episodeIndex:l,date:h,noLeadingZero:!0});return d&&m?n.createElement("span",{className:t},l>0&&y?n.createElement(o.c,{tabIndex:r,title:u,to:m},y):null,l>0&&y?n.createElement(a.c,{separator:""}):null,n.createElement(o.c,{tabIndex:r,title:c,to:d},g)):n.createElement("span",{className:t},l>0&&y?n.createElement("span",null,y):null,l>0&&y?n.createElement(a.c,{separator:""}):null,n.createElement("span",null,g))}},22920:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(57864),i=r(4659),s=r(83095),a=r(65348),o=r(51796),c=r(39172),l=r(11504),d=r(17068),u=r(84840);const p=(0,o.c)((function(){return(0,n.M3)(((e,{metricsContext:t})=>t),((e,{skipGrandparent:t})=>t),a.c,s.c,(0,i.c)(),((e,t,r,n,i={})=>{const s={};return e&&(s.context=e),{skipParent:i.skipParent,skipGrandparent:t,parentTitle:i.parentTitle,parentRoute:(0,c.c)(r,n,i.parentKey,s),grandparentTitle:i.originalTitle||i.grandparentTitle,grandparentRoute:(0,c.c)(r,n,i.grandparentKey,s)}}))}))((function({className:e,tabIndex:t,skipParent:r,skipGrandparent:n,parentTitle:i,parentRoute:s,grandparentTitle:a,grandparentRoute:o}){return l.createElement("span",{className:e},n?null:l.createElement(u.c,{route:o,tabIndex:t,title:a}),!i||r||n?null:l.createElement(d.c,null),r?null:l.createElement(u.c,{route:s,tabIndex:t,title:i}))}))},72788:(e,t,r)=>{"use strict";r.d(t,{c:()=>C});var n=r(3268),i=r.n(n),s=r(11504),a=r(27876),o=r(57864),c=r(4659),l=r(83095),d=r(47611),u=r(99396),p=r(90044),m=r(51796),h=r(30388),y=r(62200),g=r(76032),f=r(59396);const v=function({className:e,value:t,onRatingChange:r}){return s.createElement("span",{className:e},s.createElement(g.Q,{accessibilityLabel:(0,f.c)("Rate"),value:null!=t?t:0,onChange:r}))};var b=Object.defineProperty,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const w=(0,a.Ul)(d.c)((0,m.c)((function(e,t){return(0,o.M3)(l.c,(0,c.c)(),(0,o.M3)(y.c,((e,{providerEntityID:t})=>t),((e,t)=>!!e&&e.providers.length>1&&e.providers.includes(t))),((e,{hideUnrated:t})=>t),((e,t={},r,n)=>{const i=e&&e.features[p.c.ACTIONS][u.c7]&&!t.isFolder&&!r,s=t.userRating||0;return{showRating:!(!i||n&&0===s),value:s}}))}),(function(e,t){return{onRatingChange(r){e((0,h.u2)({metadataItemEntityID:t.metadataItemEntityID,providerEntityID:t.itemProviderEntityID,rating:0===r?-1:r,metricsPage:t.metricsPage}))}}}))((function(e){const t=e,{showRating:r}=t,n=((e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r})(t,["showRating"]);return r?s.createElement(v,((e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e})({},n)):null})));w.propTypes={hideUnrated:i().bool};const C=w},4696:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function({className:e,year:t}){return n.createElement("span",{className:e,"data-testid":"metadataYear"},t)}},24680:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(27876),i=r(57864),s=r(4659),a=r(4696);const o=(0,n.Ul)((function(){return(0,i.M3)((0,s.c)(),((e={})=>({year:e.year})))}))(a.c)},46820:(e,t,r)=>{"use strict";r.d(t,{c:()=>D});var n=r(11504),i=r(17068),s=r(27876),a=r(57864),o=r(95420),c=r(47884),l=r(65723),d=r(86264),u=r(59396);var p=r(71264);var m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const S={audio:function(e){const{stream:t,separatorComponent:r}=e,i=[];var s,a;t.codec&&i.push((a=t.codec)?"dca"===a?"DTS":a.toUpperCase():""),t.channels&&i.push((s=t.channels,(s=parseInt(s,10))?s<2?(0,u.c)("Mono"):s<3?(0,u.c)("Stereo"):(s-1).toString()+".1":""));const o=(null==t?void 0:t.language)||(0,u.c)("Unknown"),c=i&&i.length>0?i.join(" "):null,l=c?(0,u.c)("{label}, {details}",{label:o,details:c}):o;return n.createElement("span",{"aria-label":l,"data-testid":"audioStream"},o,c?n.createElement(r,null):null,c)},subtitles:function(e){const{stream:t,separatorComponent:r}=e,i=[];t.codec&&i.push(t.codec.toUpperCase()),t.key&&i.push((0,u.c)("External")),t.forced&&i.push((0,u.c)("Forced"));const s=t.language||(0,u.c)("Unknown"),a=i&&i.length>0?i.join(" "):null,o=a?(0,u.c)("{label}, {details}",{label:s,details:a}):s;return n.createElement("span",{"aria-label":o,"data-testid":"subtitlesStream"},s,a?n.createElement(r,null):null,a)},video:function(e){const{mediaItem:t,separatorComponent:r}=e;let i;t.videoCodec&&(i=[t.videoCodec.toUpperCase()]);const s=(0,d.c)(t),a=s&&s.scanType,o=(0,p.c)(t.videoResolution,a)||(0,u.c)("Unknown"),c=i&&i.length>0?i.join(" "):null,l=c?(0,u.c)("{label}, {details}",{label:o,details:c}):o;return n.createElement("span",{"aria-label":l,"data-testid":"videoStream"},o,c?n.createElement(r,null):null,c)}},P=(0,s.Ul)((function(){return(0,a.M3)((0,c.c)(),(e=>({isDisplayTitleSupported:e.isCloud||(0,l.c)(e.shortVersion,o.default.streamDisplayTitles)})))}))((function(e){const t=e,{type:r,stream:i,mediaItem:s,isDisplayTitleSupported:a}=t,o=((e,t)=>{var r={};for(var n in e)f.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&g)for(var n of g(e))t.indexOf(n)<0&&v.call(e,n)&&(r[n]=e[n]);return r})(t,["type","stream","mediaItem","isDisplayTitleSupported"]);if(!i&&!s)return n.createElement("span",{"data-testid":`${r}Stream`},(0,u.c)("None"));if(a){let e;if("video"===r){const t=(0,d.c)(s);e=t?t.displayTitle:(0,u.c)("None")}else e=i.displayTitle||i.language;return n.createElement("span",{"aria-label":e,"data-testid":`${r}Stream`},e)}const c=S[r];return n.createElement(c,(l=((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e})({},o),h(l,y({mediaItem:s,stream:i}))));var l}));var I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const D=function(e){return n.createElement(P,(t=((e,t)=>{for(var r in t||(t={}))O.call(t,r)&&T(e,r,t[r]);if(C)for(var r of C(t))M.call(t,r)&&T(e,r,t[r]);return e})({},e),r={separatorComponent:i.c},E(t,w(r))));var t,r}},23812:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(58660),s=r(3008),a=r(41744),o=r(64776),c=r(9868),l=r(16852),d=r(59396);function u({children:e,errorMessage:t}){const r=(0,c.y)(),u=[t||(0,d.c)("There was an unexpected error."),(0,d.c)("Please visit our forums if you continue to experience problems.")];return n.createElement(o.wJ,{isOpen:r.isOpen,onOpenChange:r.onOpenChange},n.createElement(o.Qn,null,e),n.createElement(o.EX,{closeButtonAccessibilityLabel:(0,d.c)("Close"),header:(0,d.c)("There was an unexpected error"),size:"s",onClose:r.onClose},n.createElement(o.aU,null,n.createElement(s.ye,{gap:"l"},u.join(" "),n.createElement(a.c,{color:"accent",href:l.SE,target:"_self",onPress:r.onClose},(0,d.c)("Go to Forums")))),n.createElement(o._A,null,n.createElement(o.YB,null,n.createElement(i.q,{color:"accent",label:(0,d.c)("Okay"),onPress:r.onClose})))))}},28796:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(22632),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){return n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({},e))}d.defaultProps={className:"FullPage-container-yJVGyN FullPage-container-BafTyc"};const u=d},85332:(e,t,r)=>{"use strict";r.d(t,{c:()=>w});var n=r(11504),i=r(38828),s=r(97488),a=r(42764),o=r(76812),c=r(45416),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&y(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&y(e,r,t[r]);return e};const f=function(e){const t=e,{children:r,metricsPage:i,metricsProperties:s,isMetricsDelegated:l}=t,y=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["children","metricsPage","metricsProperties","isMetricsDelegated"]);return n.createElement(a.c,(f=g({},s),d(f,u({isDelegated:l,page:i}))),n.createElement(o.c,g({className:c.c.page},y),r));var f};var v=Object.defineProperty,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class E extends n.Component{constructor(e,t){super(e,t),this.state={hasError:!1}}componentDidCatch(e){i.c.error(e),this.setState({hasError:!0})}render(){const{hasError:e}=this.state;return e?n.createElement(s.c,null):n.createElement(f,((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(b)for(var r of b(t))P.call(t,r)&&I(e,r,t[r]);return e})({},this.props))}}const w=E},92048:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(76812);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){var t=e,{children:r,innerClassName:s}=t,d=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["children","innerClassName"]);return n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))c.call(t,r)&&l(e,r,t[r]);return e})({className:"PageContent-pageContent-rk0p0C"},d),n.createElement("div",{className:s},r))}d.defaultProps={innerClassName:"PageContent-innerPageContent-m6ARXd"};const u=d},76812:(e,t,r)=>{"use strict";r.d(t,{c:()=>m});var n=r(11504),i=r(62900),s=r(16512),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t,r)=>(d(e,"symbol"!=typeof t?t+"":t,r),r);class p extends n.Component{constructor(e,t){super(e,t),u(this,"_currentScrollTop"),u(this,"_positionKey"),u(this,"_restoreScroll"),u(this,"_restoreScrollDelay"),u(this,"_restoreScrollTimeoutID"),u(this,"onScrollPositionChange",(({scrollTop:e})=>{this.state.isScrolling||(this._currentScrollTop=e)})),this.state={isScrolling:!1},this._positionKey=s.c.getKey(e.scrollPositionKey),this._currentScrollTop=0,this._restoreScrollDelay=e.smoothScroll?e.smoothScrollDuration:e.restoreScrollDelay,this._restoreScroll=!1,this._restoreScrollTimeoutID=null}componentDidMount(){this._restoreScrollPosition()}componentDidUpdate(e){const{scrollPositionKey:t}=this.props;e.scrollPositionKey!==t&&(this._positionKey=s.c.getKey(t))}componentWillUnmount(){this._storeScrollPosition(),this._restoreScrollTimeoutID&&window.clearTimeout(this._restoreScrollTimeoutID)}_restoreScrollPosition(){const e=s.c.get(this._positionKey);e&&(this.setState({isScrolling:!0}),this._currentScrollTop=e.scrollTop,this._restoreScroll=!0,this._restoreScrollTimeoutID=window.setTimeout((()=>{this.setState({isScrolling:!1}),this._restoreScroll=!1}),this._restoreScrollDelay))}_storeScrollPosition(){s.c.set(this._positionKey,{scrollTop:this._currentScrollTop})}render(){const e=this.props,{children:t,className:r,restoreScrollDelay:s,scrollPositionKey:a}=e,u=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(e,["children","className","restoreScrollDelay","scrollPositionKey"]);return n.createElement(i.c,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({className:r,restoreScroll:this._restoreScroll,scrollTop:this._currentScrollTop,onScrollPositionChange:this.onScrollPositionChange},u),t)}}u(p,"defaultProps",{restoreScrollDelay:100,scrollPositionKey:"scrollPosition",smoothScroll:!0,smoothScrollDuration:400});const m=p},95e3:(e,t,r)=>{"use strict";r.d(t,{c:()=>ee});var n=r(3268),i=r.n(n),s=r(27876),a=r(57864),o=r(47884),c=r(32364),l=r(58320),d=r(37336),u=r(11504),p=r(75372),m=r(13778),h=r(89448);class y extends u.Component{componentDidMount(){this._populate(this.props)}componentDidUpdate(e){const{machineIdentifier:t}=this.props;t&&t!==e.machineIdentifier&&this._populate(this.props)}_populate(e){const{machineIdentifier:t,dispatchSetPrimaryServer:r}=e;t&&(0,h.SS)((()=>{r({machineIdentifier:t})}))}render(){return u.createElement(u.Fragment,null,this.props.children)}}const g={dispatchSetPrimaryServer:m.mo},f=(0,s.Ul)(null,g)(y);var v=r(98368),b=r(76332),S=r(70508),P=r(75560),I=r(85448),E=r(52180),w=r(66780),C=r(56960),O=r(59396),M=r(1292),T=r(71500),D=r(24808),k=r(87808),x=r(95460),A=r(32116),R=r(17484),N=r(69468);const L={dispatchDismissUnclaimedServer:P.mE},j=(0,s.Ul)((function(){return(0,a.M3)((0,o.c)(),S.c,((e,t)=>({machineIdentifier:e.machineIdentifier,friendlyName:e.friendlyName,isPlexAccountRequired:t})))}),L)((function(e){const{machineIdentifier:t,friendlyName:r,isPlexAccountRequired:n,dispatchDismissUnclaimedServer:i}=e,s=(0,I.Uz)(),a=(0,u.useCallback)((()=>{s.push(x.c.login)}),[s]),o=(0,u.useCallback)((()=>{(0,E.WI)("metrics").trackClick({page:C.kl,action:w.Uf})}),[]),c=(0,u.useCallback)((()=>{(0,E.WI)("metrics").trackClick({page:C.kl,action:w.Ke}),i({machineIdentifier:t})}),[t,i]);return u.createElement(R.c,{description:(0,O.c)("Claiming this server will associate it with your Plex account. This helps your devices find each other and helps keep your media safe."),title:(0,O.c)("{friendlyName} server is unclaimed and not secure",{friendlyName:r})},n?u.createElement(M.c,{kind:D.ac,size:k.OM,onPress:a},(0,O.c)("Sign in to claim this server")):u.createElement(M.c,{kind:D.ac,size:k.OM,to:(0,N.c)(t,"settings","general"),onPress:o},(0,O.c)("Claim it now")),u.createElement(A.c,null,u.createElement(T.c,{kind:D.ac,size:k.wH,onPress:c},(0,O.c)("Don't show this again"))))}));var U=r(95420),F=r(65723),V=r(76220),_=r(96504);const W=(0,s.Ul)((function(){return(0,a.M3)((0,o.c)(),(e=>({machineIdentifier:e.machineIdentifier,friendlyName:e.friendlyName,activeConnectionUri:e.activeConnection.uri,shouldUseNewSettingsRoutes:(0,F.c)(e.version,U.default.bundledWebAppNewSettingsRoutes),isShared:e.isShared})))}))((function(e){const{machineIdentifier:t,friendlyName:r,activeConnectionUri:n,shouldUseNewSettingsRoutes:i,isShared:s}=e;let a;r&&(a=(0,O.c)("The server {1} is out of date and cannot be used.",r)),a=a+" "+(0,O.c)("This version of {productName} requires Plex Media Server {minServerVersion} or higher.",{productName:V.c.prop("X-Plex-Product"),minServerVersion:"1.18.3"});let o="/web/index.html";return s||(o+=i?(0,N.c)(t,"settings","general"):"#!/settings/server"),u.createElement(R.c,{description:a,title:"Update your Plex Media Server"},u.createElement(M.c,{kind:D.ac,size:k.OM,target:"_self",to:_.c.join([n,o])},(0,O.c)("Open server directly")))}));var B=r(53728),H=r(49872),z=r(55e3);var G=Object.defineProperty,q=Object.defineProperties,K=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const J=(0,s.Ul)((function(){return(0,a.M3)((e=>e.isWaitingForServers),((e,{hideUnclaimedPage:t})=>t),(0,o.c)(),(0,l.c)(),d.c,((e,t,r,n,i)=>r?{hasServer:!0,showSpinner:!r.isConnected&&!r.isUnauthorized&&!r.isUnavailable,machineIdentifier:r.machineIdentifier,isUnauthorized:r.isUnauthorized,isUnavailable:r.isUnavailable,isOutOfDate:r.isOutOfDate,isInstallingServerUpdate:r.isInstallingServerUpdate,isUnclaimed:r.isConnected&&!r.isClaimed&&!i[r.machineIdentifier]&&!n&&!t,hasHttpsConnections:r.hasHttpsConnections,isHostedHttps:c.c.isHostedHttps}:{hasServer:!1,showSpinner:e}))}))((function(e){const{serverEntityID:t,children:r,hasServer:n,showSpinner:i,machineIdentifier:s,isUnauthorized:a,isUnavailable:o,isOutOfDate:c,isUnclaimed:l,isInstallingServerUpdate:d}=e;return i?u.createElement(B.c,null,u.createElement(p.c,null)):n?d?u.createElement(H.c,{serverEntityID:t}):o?u.createElement(b.c,{serverEntityID:t}):c?u.createElement(W,{serverEntityID:t}):a?u.createElement(v.c,null):l?u.createElement(j,{serverEntityID:t}):u.createElement(f,{machineIdentifier:s},r):u.createElement(z.c,null)}));var Z;J.propTypes=(Z=((e,t)=>{for(var r in t||(t={}))$.call(t,r)&&X(e,r,t[r]);if(Q)for(var r of Q(t))Y.call(t,r)&&X(e,r,t[r]);return e})({},J.propTypes),q(Z,K({serverEntityID:i().string.isRequired})));const ee=J},50249:(e,t,r)=>{"use strict";r.d(t,{c:()=>x});var n=r(11504),i=r(89064),s=r(18168),a=r(6084),o=r(3268),c=r.n(o),l=r(27876),d=r(57864),u=r(46800),p=r(14252),m=r(29632),h=r(75372),y=r(44152),g=r(53728),f=r(55e3),v=r(97488),b=r(24012);var S=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const M=(0,l.Ul)((function(){return(0,d.M3)((0,m.c)("isProvidersPopulated"),(0,m.c)("providersError"),(0,u.c)(),p.c,((e,t,r,n)=>r?{hasProvider:!0,hasError:!!r.error,isPending:!r.isPopulated}:{hasProvider:!1,isDownForMaintenance:n.isDownForMaintenance,isUnreachable:n.isUnavailable,hasError:!!t,isPending:!e}))}))((function(e){const{children:t,hasProvider:r,isDownForMaintenance:i,isUnreachable:s,hasError:a,isPending:o}=e;return i?n.createElement(y.c,null):s?n.createElement(b.c,null):a?n.createElement(v.c,null):o?n.createElement(g.c,null,n.createElement(h.c,null)):r?n.createElement(n.Fragment,null,t):n.createElement(f.c,null)}));var T;M.propTypes=(T=((e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&O(e,r,t[r]);return e})({},M.propTypes),P(T,I({providerEntityID:c().string.isRequired})));const D=M;var k=r(95e3);const x=function(e){const{children:t,machineIdentifier:r,providerIdentifier:o}=e,c=r===i.A?D:k.c,l=(0,s.c)(a.qe,r),d=(0,s.c)(a.SF,o,l);return n.createElement(c,{providerEntityID:d,serverEntityID:l},t)}},98368:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=r(16852),s=r(59396),a=r(98772),o=r(71500),c=r(24808),l=r(17484);const d=function(){return n.createElement(l.c,{description:n.createElement(n.Fragment,null,n.createElement("p",null,(0,s.c)("You do not have access to this server.")),n.createElement("p",null,n.createElement(a.c,{message:(0,s.c)('You may be able to claim it by choosing "Open Plex..." from the Plex menu in the macOS menu bar or Windows system tray. For more troubleshooting tips, see our {openLink}support article{closeLink}.'),tags:[{open:"openLink",close:"closeLink",component:o.c,kind:c.ac,to:i.eO,target:"_self"}]}))),title:(0,s.c)("Not authorized")})}},76332:(e,t,r)=>{"use strict";r.d(t,{c:()=>M});var n=r(11504),i=r(27876),s=r(57864),a=r(54268),o=r(47884),c=r(16852),l=r(8844),d=r(59396),u=r(96504),p=r(1292),m=r(71500),h=r(24808),y=r(75560),g=r(81180),f=r(98772),v=r(9464),b=r(17484);const S=function(e){const{friendlyName:t,isPending:r,onTryAgainPress:i}=e;return n.createElement(b.c,{description:n.createElement(f.c,{message:(0,d.c)("Verify you have a network connection and that the server is online, or see our {openLink}troubleshooting{closeLink} tips for further assistance."),tags:[{open:"openLink",close:"closeLink",component:m.c,kind:h.ac,to:"https://help.plex.tv/noserver",target:"_blank"}]}),title:t?(0,d.c)("{serverName} is currently unavailable",{serverName:t}):(0,d.c)("Server is currently unavailable")},n.createElement(v.c,{isSpinning:r,kind:h.ac,onPress:i},(0,d.c)("Retry connection")))};var P=r(89028),I=r(84512),E=r(53728);class w extends n.Component{render(){const{title:e,description:t,children:r}=this.props;return n.createElement(E.c,{description:n.createElement(n.Fragment,null,n.createElement(f.c,{message:(0,d.c)('Its "Secure connections" setting may be set to disabled, or you may need to adjust some settings on your network. You can {openLink}learn more about secure connections here{closeLink}.'),tags:[{open:"openLink",close:"closeLink",component:m.c,to:"https://support.plex.tv/hc/en-us/articles/206225077-How-to-Use-Secure-Server-Connections",kind:h.ac,target:"_blank"}]})),iconSrc:I,title:e},t?n.createElement("div",{className:"InsecureFallbackChoicePage-description-WUvYIm EmptyPageDescription-description-X4KZlh"},t):null,r)}}const C=w;var O=r(49056);const M=(0,i.Ul)((function(){return(0,s.M3)((0,o.c)(),(e=>{const t=e.connections.find((e=>"http"===e.scheme));return{friendlyName:e.friendlyName,bundledConnectionUri:null==t?void 0:t.uri,shouldShowInsecureAppMessage:O.g(e),shouldAllowInsecureFallback:O.s(e),isPending:e.isPending}}))}),(function(e,t){const r={serverEntityID:t.serverEntityID,metricsPage:t.metricsPage};return{onTryAgainPress(){e((0,y.W0)()),e(a.KN(r))}}}))((function(e){const{friendlyName:t,bundledConnectionUri:r,shouldShowInsecureAppMessage:i,shouldAllowInsecureFallback:s,isPending:a,onTryAgainPress:o}=e,{isOpen:y,onOpen:f,onClose:v}=(0,g.c)();if(i){const e="macos"===l.c.platformID||"windows"===l.c.platformID;return n.createElement(C,{title:(0,d.c)('app.plex.tv is unable to connect to "{serverName}" securely',{serverName:t})},e?n.createElement("div",{className:"ServerUnavailableErrorPageConnector-downloadButtonContainer-AZyOEA"},n.createElement(p.c,{kind:h.ac,target:"_blank",to:c._8},"windows"===l.c.platformID?(0,d.c)("Download Plex for Windows"):(0,d.c)("Download Plex for Mac"))):null,r?n.createElement(m.c,{kind:h.ac,to:u.c.join([r,"/web/index.html"])},e?(0,d.c)("Or you can try to navigate directly to Plex Media Server"):(0,d.c)("You can try to navigate directly to Plex Media Server")):null)}return s?n.createElement(C,{description:(0,d.c)("The app is loaded insecurely. You can attempt to use an insecure connection now."),title:(0,d.c)('The server "{serverName}" does not allow secure connections',{serverName:t})},n.createElement(P.c,{isOpen:y,serverEntityID:e.serverEntityID,onModalClose:v}),n.createElement(p.c,{kind:h.ac,onPress:f},(0,d.c)("Allow Insecure Connections"))):n.createElement(S,{friendlyName:t,isPending:a,onTryAgainPress:o})}))},7584:(e,t,r)=>{"use strict";r.d(t,{c:()=>te});var n=r(11504),i=r(27876),s=r(57864),a=r(92432),o=r(18580),c=r(89080),l=r.n(c),d=r(3008),u=r(77072),p=r(77224),m=r(59396),h=r(96504),y=r(98772),g=r(4304),f=r(51268),v=r(29016),b=r(5056),S=r(58660),P=r(9868),I=r(29164),E=r(46212),w=r(46572),C=r(32380),O=r(21040);function M({children:e,id:t,onClose:r}){const s=(0,i.w1)(I.c),{isDeleting:o,error:c}=(0,i.w1)(w.c),l=(0,O.c)(o),d=(0,i.OY)(),{addToast:u}=(0,a.Wo)(),p=(0,P.y)(),h=(0,n.useCallback)((()=>{d(C.c.actions.deleteUserAvatar({userId:t,server:s}))}),[d,t,s]);return(0,n.useEffect)((()=>{!o&&l&&(r(new Event("togglePress")),p.onClose())}),[o,p,r,l]),(0,n.useEffect)((()=>{!o&&l&&c&&(p.onClose(),u({color:"alert",description:c.message,type:"foreground"}))}),[u,c,o,p,l]),n.createElement(n.Fragment,null,n.createElement(S.c,{color:"accent",font:"body-2",onPress:p.onOpen},e),n.createElement(E.c,{confirmColor:"alert",confirmLabel:(0,m.c)("Delete"),declineLabel:(0,m.c)("Cancel"),description:(0,m.c)("Are you sure you'd like to delete your profile image?"),isWaiting:o,modalState:p,title:(0,m.c)("Delete Profile Image"),onSuccess:h}))}var T=r(3268),D=r.n(T),k=r(52908);function x(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-avatar-crop-max-560"};s["aria-hidden"]=!t,s.style=i,s.className=k.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"m560 0l0 560-560 0 0-560 560 0m-420 280c0 77.268 62.732 140 140 140 77.268 0 140-62.732 140-140 0-77.268-62.732-140-140-140-77.268 0-140 62.732-140 140"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}x.propTypes={"aria-label":D().string,className:D().string,style:D().object};const A=x;function R(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-avatar-crop-min-560"};s["aria-hidden"]=!t,s.style=i,s.className=k.c.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"m476 84l0 392-392 0 0-392 392 0m-336 196c0 77.268 62.732 140 140 140 77.268 0 140-62.732 140-140 0-77.268-62.732-140-140-140-77.268 0-140 62.732-140 140"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}R.propTypes={"aria-label":D().string,className:D().string,style:D().object};const N=R,L="AvatarEditor-sliderEnd-E4r1jr";var j=Object.defineProperty,U=Object.defineProperties,F=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,H=(e,t)=>{for(var r in t||(t={}))_.call(t,r)&&B(e,r,t[r]);if(V)for(var r of V(t))W.call(t,r)&&B(e,r,t[r]);return e},z=(e,t)=>U(e,F(t)),G=(e,t,r)=>(B(e,"symbol"!=typeof t?t+"":t,r),r);class q extends n.Component{constructor(e,t){super(e,t),G(this,"mounted",!1),G(this,"canvas"),G(this,"dropTargetEnteredCounter"),G(this,"image"),G(this,"imageHeight"),G(this,"imageWidth"),G(this,"initialHeight"),G(this,"initialWidth"),G(this,"setCanvasRef",(e=>{this.canvas=e})),G(this,"onMouseDown",(e=>{e.preventDefault(),this.startAvatarDrag(e.clientX,e.clientY)})),G(this,"onTouchStart",(e=>{e.preventDefault();const t=e.touches.item(0);t&&this.startAvatarDrag(t.clientX,t.clientY,!0)})),G(this,"onTouchMove",(e=>{const t=e.touches.item(0);t&&this.dragAvatar(t.clientX,t.clientY)})),G(this,"onMouseMove",(e=>{this.dragAvatar(e.clientX,e.clientY)})),G(this,"onMouseUp",(()=>{this.stopAvatarDrag()})),G(this,"onTouchEnd",(()=>{this.stopAvatarDrag()})),G(this,"onFileDrop",(e=>{let t;if(e.preventDefault(),this.setState({isOverDropTarget:!1}),this.dropTargetEnteredCounter=0,e.dataTransfer&&e.dataTransfer.files.length?t=e.dataTransfer.files[0]:e.target.files&&e.target.files.length&&(t=e.target.files[0]),t){const e=new window.FileReader;e.onload=e=>this.loadImage(e.target.result),e.readAsDataURL(t)}})),G(this,"onDragEnter",((e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter++,this.setOverDropTargetState()})),G(this,"onDragLeave",((e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter--,this.setOverDropTargetState()})),G(this,"onSliderChange",(({steppedValue:e})=>{this.setState((t=>{const{offsetX:r,offsetY:n}=t,i=this.initialWidth*e,s=this.initialHeight*e,a=(this.imageWidth-i)/2,o=(this.imageHeight-s)/2,c=this.props.width-i,l=this.props.height-s,d=Math.max(c,Math.min(r+a,0)),u=Math.max(l,Math.min(n+o,0));return z(H({},t),{scale:e,offsetX:d,offsetY:u})}),(()=>this.props.onChange(this.getImageDataUrl())))})),this.state={drag:!1,dragX:0,dragY:0,minScale:.1,maxScale:5,scale:.1,offsetX:0,offsetY:0,isOverDropTarget:!1},this.dropTargetEnteredCounter=0}componentDidMount(){window.addEventListener("dragover",this.onWindowDragOver),window.addEventListener("drop",this.onWindowDrop),this.paint(),this.loadImage(this.props.url,!0),this.mounted=!0}UNSAFE_componentWillReceiveProps(e){this.props.url!==e.url&&this.loadImage(e.url)}shouldComponentUpdate(e,t){return(0,f.c)(this,e,t)}componentDidUpdate(){this.paint()}componentWillUnmount(){window.removeEventListener("dragover",this.onWindowDragOver),window.removeEventListener("drop",this.onWindowDrop),this.stopListeningForDrag(),this.mounted=!1}listenForDrag(e){e?(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchcancel",this.onTouchEnd),document.addEventListener("touchend",this.onTouchEnd)):(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}stopListeningForDrag(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchcancel",this.onTouchEnd),document.removeEventListener("touchend",this.onTouchEnd)}startAvatarDrag(e,t,r){this.listenForDrag(r),this.setState({drag:!0,dragX:e,dragY:t})}dragAvatar(e,t){this.state.drag&&this.setState((r=>{const{offsetX:n,offsetY:i,dragX:s,dragY:a}=r,o=this.props.width-this.imageWidth,c=this.props.height-this.imageHeight,l=Math.max(o,Math.min(n+(e-s),0)),d=Math.max(c,Math.min(i+(t-a),0));return z(H({},r),{dragX:e,dragY:t,offsetX:l,offsetY:d})}))}stopAvatarDrag(){this.stopListeningForDrag(),this.setState({drag:!1},(()=>this.props.onChange(this.getImageDataUrl())))}loadImage(e,t,r=this.props){const n=new window.Image;n.onload=()=>this.onImageLoad(n,t),n.onerror=()=>{r.addToast({color:"alert",description:e.indexOf("image/heic")?(0,m.c)("HEIC format not supported"):(0,m.c)("Error loading image"),type:"foreground",testID:"error"})},/^https?:\/\//.test(e)&&n.setAttribute("crossOrigin","anonymous");let i=e;if(0!==e.indexOf("data:")){const t=(0,p.c)(),n={width:Math.round(r.width*t),height:Math.round(r.height*t),minSize:1},s=e.indexOf("?");s>-1?(i=h.c.join(e.substring(0,s),n),i+=-1===i.indexOf("?")?"?":"&",i+=e.substring(s+1)):i=h.c.join(i,n)}n.src=i}paint(){const{width:e,height:t}=this.props,r=this.canvas.getContext("2d");r.clearRect(0,0,e,t),this.image&&this.drawImage(r);const n=document.createElement("canvas"),i=n.getContext("2d");n.width=e,n.height=t,i.fillStyle="rgba(0,0,0,0.6)",i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-out",i.arc(e/2,t/2,e/2,0,2*Math.PI),i.fill(),r.drawImage(n,0,0)}drawImage(e){this.imageWidth=this.initialWidth*this.state.scale,this.imageHeight=this.initialHeight*this.state.scale,e.drawImage(this.image,this.state.offsetX,this.state.offsetY,this.imageWidth,this.imageHeight)}getImageDataUrl(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=this.props.height,e.width=this.props.width,this.drawImage(t),e.toDataURL()}setOverDropTargetState(){this.state.isOverDropTarget||0===this.dropTargetEnteredCounter||this.setState({isOverDropTarget:!0}),this.state.isOverDropTarget&&0===this.dropTargetEnteredCounter&&this.setState({isOverDropTarget:!1})}onImageLoad(e,t){if(!this.mounted)return;this.image=e,this.initialWidth=Math.max(this.props.width,e.width),this.initialHeight=Math.max(this.props.height,e.height);const r=e.width>e.height?e.height:e.width,n=r>this.props.width?this.props.width/r:1,i=r<=this.props.width?5:2.5;this.setState({drag:!1,dragX:0,dragY:0,minScale:n,maxScale:i,scale:n,offsetX:0,offsetY:0},t?null:()=>this.props.onChange(this.getImageDataUrl()))}onWindowDrop(e=window.event){e.preventDefault()}onWindowDragOver(e=window.event){e.preventDefault()}onDragStart(e=window.event){e.dataTransfer.effectAllowed="copyMove"}onDragOver(e=window.event){e.dataTransfer.dropEffect="copy"}render(){const{isOverDropTarget:e}=this.state;return n.createElement("div",{className:"AvatarEditor-avatarContainer-t9H8yn",onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onFileDrop},n.createElement("div",{className:"AvatarEditor-avatarPane-quja2_"},n.createElement("canvas",{ref:this.setCanvasRef,className:l()("AvatarEditor-avatar-VZbi00",e&&"AvatarEditor-isOverDropTarget-WPucpu",!this.image&&"AvatarEditor-avatarLoading-afjWUb",this.image&&"AvatarEditor-avatarLoaded-XkQCKx"),height:this.props.height,width:this.props.width,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart}),n.createElement("div",{className:"AvatarEditor-sliderContainer-rrWxBh"},n.createElement("span",{className:L},n.createElement(N,null)),n.createElement("span",{className:"AvatarEditor-sliderWrapper-NL9bp7"},n.createElement(v.c,{className:"AvatarEditor-slider-diJlEE Slider-slider-YdLxcK",max:this.state.maxScale,min:this.state.minScale,step:.1,value:this.state.scale,onChange:this.onSliderChange})),n.createElement("span",{className:L},n.createElement(A,null)))),n.createElement(d.ye,{gap:"s",paddingX:"l"},n.createElement(b.c,{accept:"image/*",buttonText:(0,m.c)("Choose Photo"),onChange:this.onFileDrop}),n.createElement(u.a,{color:"muted",font:"body-2"},n.createElement(y.c,{message:(0,m.c)("You can scale your photo using the slider below, and adjust the crop by dragging it within the circle. Or you can {openModal}delete your profile image{closeModal}."),tags:[{open:"openModal",close:"closeModal",component:M,onClose:this.props.onTogglePress,id:this.props.id}]}))))}}G(q,"defaultProps",{height:200,width:200,onChange(){}});const K=(0,g.c)(q);var Q=Object.defineProperty,$=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const te=(0,i.Ul)((function(){return(0,s.M3)((0,o.c)(),(e=>({url:e})))}))((function(e){const{addToast:t}=(0,a.Wo)();return n.createElement(K,(r=((e,t)=>{for(var r in t||(t={}))J.call(t,r)&&ee(e,r,t[r]);if(X)for(var r of X(t))Z.call(t,r)&&ee(e,r,t[r]);return e})({},e),$(r,Y({addToast:t}))));var r}))},80396:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(9868),s=r(59396),a=r(20232),o=r(2374),c=r(91712);function l(){const e=(0,i.y)();return n.createElement(n.Fragment,null,n.createElement(o.c,{className:c.c.input,closedNode:(0,s.c)("Manage which of your Plex activities are viewable by your friends on Plex."),editLabel:(0,s.c)("Edit"),title:(0,s.c)("Account Visibility & Activity Sharing"),onTogglePress:e.onOpen}),n.createElement(a.c,{buttonLabel:(0,s.c)("Save"),isOpen:e.isOpen,onClose:e.onClose}))}},89028:(e,t,r)=>{"use strict";r.d(t,{c:()=>w});var n=r(27876),i=r(57864),s=r(47884),a=r(36296),o=r(11504),c=r(82660),l=r(56960),d=r(59396),u=r(82468),p=r(90064),m=r(23384),h=r(79264),y=r(24808),g=r(87808),f=r(74428),v=r(44064),b=r(35456),S=Object.defineProperty;class P extends o.Component{constructor(e,t){var r;super(e,t),((e,t,r)=>{t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(r="onAllowFallbackConfirm")?r+"":r,(()=>{this.setState({isSubmitting:!0}),this.props.onAllowHttpFallback({serverEntityID:this.props.serverEntityID,allowHttpFallback:this.props.publicAddressMatches?c.c.SAME_NETWORK:c.c.ALWAYS})})),this.state={isSubmitting:!1}}render(){const{publicAddressMatches:e,isOpen:t,onModalClose:r}=this.props,{isSubmitting:n}=this.state;return o.createElement(v.c,{isOpen:t,metricsPage:l.qU,size:g.wH,onModalClose:r},o.createElement(b.c,{onModalClose:r},o.createElement(h.c,null,(0,d.c)("Allow Insecure Connections")),o.createElement(u.c,null,e?(0,d.c)("Insecure connections will only be allowed when you're on the same network as the server."):(0,d.c)("Insecure connections will be allowed to any server."),o.createElement("br",null),(0,d.c)("The Allow Fallback to Insecure Connections setting can be changed in Web Settings. Would you like to allow insecure connections?")),o.createElement(p.c,null,o.createElement(m.c,null,o.createElement(f.c,{isDisabled:n,kind:y.sT,onPress:r},(0,d.c)("Cancel")),o.createElement(f.c,{isSpinning:n,kind:y.od,onPress:this.onAllowFallbackConfirm},(0,d.c)("Allow"))))))}}const I=P,E={onAllowHttpFallback:a.s3},w=(0,n.Ul)((function(){return(0,i.M3)((0,s.c)(),(e=>({publicAddressMatches:e.publicAddressMatches})))}),E)(I)},44152:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(11504),i=r(16852),s=r(59396),a=r(71500),o=r(24808),c=r(17484);const l=function(){return n.createElement(c.c,{description:(0,s.c)("Don't worry, it will be back soon"),title:(0,s.c)("Plex is down for maintenance")},n.createElement(a.c,{kind:o.ac,target:"_blank",to:i.D9},"status.plex.tv"))}},53728:(e,t,r)=>{"use strict";r.d(t,{c:()=>g});var n=r(89080),i=r.n(n),s=r(11504),a=r(62900),o=r(24808),c=r(32116);const l={emptyPage:"EmptyPage-emptyPage-WAo6pH",content:"EmptyPage-content-r4ks5a",icon:"EmptyPage-icon-y0C5SN",default:"EmptyPage-default-K2VCHp",primary:"EmptyPage-primary-S2IZdy",success:"EmptyPage-success-eCETCB",danger:"EmptyPage-danger-xf3Czo",imgIcon:"EmptyPage-imgIcon-IKsvs2",title:"EmptyPage-title-mTbEoJ",footer:"EmptyPage-footer-XKevVP"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){const t=e,{className:r,contentClassName:n,iconClassName:o,titleClassName:d,footerClassName:y,children:g,kind:f,scrollDirection:v,iconComponent:b,iconSrc:S,title:P,description:I,footer:E}=t,w=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["className","contentClassName","iconClassName","titleClassName","footerClassName","children","kind","scrollDirection","iconComponent","iconSrc","title","description","footer"]);return s.createElement(a.c,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:r,scrollDirection:v},w),s.createElement("div",{className:n},S?s.createElement("img",{className:l.imgIcon,src:S}):null,b?s.createElement("span",{className:i()(o,l[f])},s.createElement(b,null)):null,P?s.createElement("div",{className:d},P):null,I?s.createElement(c.c,null,I):null,g),E?s.createElement("div",{className:y},E):null)}y.defaultProps={className:l.emptyPage,contentClassName:l.content,iconClassName:l.icon,titleClassName:l.title,footerClassName:l.footer,kind:o.sT};const g=y},32116:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);const i=function({children:e}){return n.createElement("div",{className:"EmptyPageDescription-description-X4KZlh"},e)}},17484:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(87396),s=r(53728),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){return n.createElement(s.c,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({iconComponent:i.default},e))}},57344:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(8212),s=r(53728),a=r(41420),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){return n.createElement(s.c,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({className:a.c.innerEmptyPage,contentClassName:a.c.innerEmptyPageContent,scrollDirection:i.KE},e))}},76872:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(11504),i=r(87396),s=r(57344),a=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){return n.createElement(s.c,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))l.call(t,r)&&d(e,r,t[r]);return e})({iconComponent:i.default},e))}},49872:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(27876),i=r(57864),s=r(54268),a=r(47884),o=r(75560),c=r(11504),l=r(84512),d=r(59396),u=r(9464),p=r(24808),m=r(53728);const h=(0,n.Ul)((function(){return(0,i.M3)((0,a.c)(),(e=>({friendlyName:e.friendlyName,isPending:e.isPending})))}),(function(e,t){const r={serverEntityID:t.serverEntityID};return{onTryAgainPress(){e((0,o.W0)()),e(s.KN(r))}}}))((function(e){const{friendlyName:t,isPending:r,onTryAgainPress:n}=e;return c.createElement(m.c,{description:(0,d.c)("Grab a cup of tea. This may take a couple of minutes."),iconSrc:l,title:(0,d.c)('The server "{serverName}" is installing an update',{serverName:t})},c.createElement(u.c,{isSpinning:r,kind:p.ac,onPress:n},(0,d.c)("Retry connection")))}))},55e3:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(11504),i=r(59396),s=r(71500),a=r(24808),o=r(17484);const c=function(){return n.createElement(o.c,{description:(0,i.c)("We can't find the page you're looking for"),title:(0,i.c)("Not found")},n.createElement(s.c,{kind:a.ac,to:"#"},(0,i.c)("Go Home")))}},97488:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(16852),s=r(59396),a=r(71500),o=r(24808),c=r(17484),l=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=function(e){const t=e,{children:r}=t,l=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement(c.c,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({description:(0,s.c)("Please visit our forums if you continue to experience problems"),title:(0,s.c)("There was an unexpected error")},l),n.createElement(a.c,{kind:o.ac,target:"_self",to:i.SE},(0,s.c)("Go to Forums")),r)}},24012:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(11504),i=r(59396),s=r(17484);const a=function(){return n.createElement(s.c,{description:(0,i.c)("We are unable to connect to plex.tv at this time. Please try again later."),title:(0,i.c)("Plex is not reachable")})}},13704:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e}){return n.createElement("div",{className:e})}i.defaultProps={className:"PrePlayDivider-divider-eQSBkm"};const s=i},45080:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PrePlayMetadataInnerContent-innerContent-ayrFIj"};const s=i},77292:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({children:e,className:t}){return n.createElement("div",{className:t,"data-testid":"preplayDetailsContainer"},e)}i.defaultProps={className:"PrePlayDetailsGroup-group-JrgaSL"};const s=i},41380:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{children:t,className:r,labelClassName:i,contentClassName:s,label:a}=e;return n.createElement("div",{className:r},n.createElement("div",{className:i},a),n.createElement("div",{className:s},t))}i.defaultProps={className:"PrePlayDetailsGroupItem-groupItem-eHId9r",labelClassName:"PrePlayDetailsGroupItem-label-_GUsYD",contentClassName:"PrePlayDetailsGroupItem-content-YyECd9"};const s=i},76492:(e,t,r)=>{"use strict";r.d(t,{c:()=>w});var n=r(11504),i=r(59396),s=r(4012),a=r(52432),o=r(2540),c=r(51268);var l=Object.defineProperty,d=(e,t,r)=>(((e,t,r)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class u extends n.Component{constructor(e,t){super(e,t),d(this,"onLineHeightRef",(e=>{e&&this.setState({lineHeight:e.clientHeight})})),d(this,"onMeasure",(({height:e})=>{this.setState({expandedHeight:e})})),d(this,"onTogglePress",(()=>{this.setState({isCollapsed:!this.state.isCollapsed,allowTransition:!0})})),this.state={isCollapsed:!0,allowTransition:!1,lineHeight:0,expandedHeight:0}}shouldComponentUpdate(e,t){return(0,c.c)(this,e,t)}render(){const{className:e,dangerouslySetInnerHTML:t,children:r,labelLess:i,labelMore:c,maxLines:l}=this.props,{isCollapsed:d,allowTransition:u,expandedHeight:p,lineHeight:m}=this.state,h=m*l,y=p>h,g={overflow:"hidden",maxHeight:d?h:p};return n.createElement("div",{className:e},m?null:n.createElement("div",{ref:this.onLineHeightRef,className:"CollapsibleText-lineHeightMeasure-eLxXue"}),n.createElement("div",{className:u?"CollapsibleText-contentTransition-LlzVNd":void 0,style:g},n.createElement(s.c,{ignorePosition:!0,ignoreWidth:!0,onMeasure:this.onMeasure},t?n.createElement("div",{dangerouslySetInnerHTML:t}):r)),y?n.createElement(a.c,{arrowClassName:"CollapsibleText-readMoreArrow-X9_6sn DisclosureArrowButton-disclosureArrow-iPIByG DisclosureArrow-disclosureArrow-NTDkGd",className:"CollapsibleText-readMore-wteMHG DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",direction:d?o.aK:o.UP,isSelected:!1,onPress:this.onTogglePress},d?c:i):null)}}d(u,"defaultProps",{labelLess:"Read Less",labelMore:"Read More",maxLines:3});const p=u;var m=Object.defineProperty,h=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&b(e,r,t[r]);return e};function P(e){return n.createElement(p,(t=S({},e),r={labelLess:(0,i.c)("Read Less"),labelMore:(0,i.c)("Read More")},h(t,y(r))));var t,r}P.defaultProps=S({},p.defaultProps);const I=P;function E({className:e,dangerouslySetInnerHTML:t,children:r}){const i=r?r.split("\n"):[];return n.createElement(I,{className:e,dangerouslySetInnerHTML:t},i.length>1?i.map(((e,t)=>n.createElement("p",{key:t},e))):r)}E.defaultProps={className:"PrePlaySummary-summary-uzepxD"};const w=E},98288:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PrePlayLeftTitle-leftTitle-VwQlIL"};const s=i},63988:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e,"data-testid":"preplay-mainTitle"},t)}i.defaultProps={className:"PrePlayPrimaryTitle-primaryTitle-iRxqZb"};const s=i},24264:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(65919),s=r(72788),a=r(62888);const o=function({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r}){return n.createElement(a.c,{className:"PrePlayRatingRightTitle-ratingRightTitle-aSEnsk PrePlayRightTitle-rightTitle-ikQT2o"},n.createElement(s.c,{className:"PrePlayRatingRightTitle-starRating-Kce73T",metadataItemEntityID:r,providerEntityID:t,serverEntityID:e}),n.createElement(i.c,{className:"PrePlayRatingRightTitle-criticRating-kW58Kc",metadataItemEntityID:r,providerEntityID:t,serverEntityID:e}))}},62888:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PrePlayRightTitle-rightTitle-ikQT2o"};const s=i},39272:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(3268),i=r.n(n),s=r(11504),a=r(27876),o=r(75560),c=Object.defineProperty;const l={dispatchRedirectToUrl:o.gt};class d extends s.Component{componentDidMount(){const{to:e,replace:t}=this.props;this.props.dispatchRedirectToUrl({url:e,replace:t})}render(){return null}}((e,t,r)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(d,"propTypes"+"",{to:i().string.isRequired,replace:i().bool,dispatchRedirectToUrl:i().func.isRequired});const u=(0,a.Ul)(null,l)(d)},56018:(e,t,r)=>{"use strict";r.d(t,{c:()=>V});var n=r(11504),i=r(27876),s=r(57864),a=r(85448),o=r(52180),c=r(60004),l=r(9852),d=r(95720),u=r.n(d);const p=function e(t){return function(e,t=u().identity){return Object.keys(e).forEach((r=>{e[r]=t(e[r])})),e}(function(e,t=u().identity){return Object.keys(e).forEach((r=>{t(e[r])||delete e[r]})),e}(t),(t=>u().isObject(t)?e(t):t))};var m=r(11360),h=r(64984),y=r(15372),g=Object.defineProperty,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))b.call(t,r)&&S(e,r,t[r]);return e};var I=r(96504),E=r(14556),w=r(73416),C=r(8436),O=r(35200),M=r(95460),T=Object.defineProperty,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const R=function(){return(0,s.M3)(((e,{signUp:t})=>t),((e,{email:t})=>t),((e,{providerID:t})=>t),((e,{userAuthToken:t})=>t),((e,{code:t})=>t),((e,{pinID:t})=>t),((e,{errorMessage:t})=>t),(e=>e.clientID),C.c,c.c,((e,t,r,n,i,s,c,d,u,g)=>{const f=function(e){const t=e.context||{},{user:r}=t,n=((e,t)=>{var r={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&D)for(var n of D(e))t.indexOf(n)<0&&x.call(e,n)&&(r[n]=e[n]);return r})(t,["user"]);return p(((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))x.call(t,r)&&A(e,r,t[r]);return e})({},n))}((0,o.WI)("metrics").toJSON());if(e){const{base:e}=(0,y.c)(window.location.href),t={forwardUrl:e,twop:"1",context:f};return g&&(t.lang=g),u.anonymous&&(t.guestToken=u.authToken),I.c.join((0,l.ci)("sign-up/"),t,{trailingSlash:!0})}{const e={clientID:d,context:f};if(!(0,w.c)()){const t=s?function(e,t){const{base:r,searchParams:n,hashPath:i,hashParams:s}=(0,y.c)(e),a=(0,m.c)(s);return`${r}${n}#${i}?${(0,h.c)(P(P({},a),t))}`}(window.location.href,{pinID:s}):window.location.href;e.forwardUrl=t,(0,a.ot)(O.c.location.pathname,{path:M.c.serverSetup})&&(e.skipSignInUrl=(0,E.c)(window.location.href,I.c.join(["#!/setup"],{forwardUrl:t},{trailingSlash:!0})))}return i&&(e.code=i),r&&(e.provider=r),t&&(e.email=t),n&&(e.authToken=n),c&&(e.error=c),g&&(e.language=g),u.anonymous&&(e.guestToken=u.authToken),I.c.join([(0,l.AL)(),I.c.join(["#!/"],e)],{},{recognizeHash:!0,trailingSlash:!0})}}))};var N=Object.defineProperty,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=(0,i.Ul)((function(){return(0,s.M3)(R(),(e=>({serviceAuthUrl:e})))}),{})((function(e){const t=e,{component:r,serviceAuthUrl:i}=t,s=((e,t)=>{var r={};for(var n in e)j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&U.call(e,n)&&(r[n]=e[n]);return r})(t,["component","serviceAuthUrl"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))j.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))U.call(t,r)&&F(e,r,t[r]);return e})({to:i},s))}))},85488:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(89080),i=r.n(n),s=r(11504),a=r(59396),o=r(71500),c=r(24808),l=r(59292),d=r(24792);const u=function(e){const{children:t,className:r,closedNode:n,errorMessage:u,isOpen:p,editLabel:m,onTogglePress:h}=e;return s.createElement(l.c,{className:i()(p?"CloseableFormSection-isOpen-XKHc3s":"CloseableFormSection-isClosed-bI4WCF CloseableFormSection-isPressable-eZi8MN",r),errorMessage:p?u:null,onPress:p?null:h},s.createElement(d.c,null,p?s.createElement(o.c,{kind:c.ac,onPress:h},(0,a.c)("Cancel")):null,p?null:s.createElement(o.c,{kind:c.ac},m||(0,a.c)("Edit"))),p?t:n)}},96272:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(11504),i=r(3008),s=r(77072);const a={background:"SettingsCategoryHeader-background-MYNIPO"};function o({title:e}){return n.createElement("div",{className:a.background},n.createElement(i.ye,{height:"xxl",orientation:"horizontal",width:"100%"},n.createElement(s.a,{color:"muted",font:"body-2"},e)))}},59292:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(89080),i=r.n(n),s=r(11504),a=r(71500),o=r(9176);const c="SettingsFormSection-sectionWrapper-DuWwYc",l="SettingsFormSection-section-BFpkKP";function d(e){const{children:t,className:r,onPress:n}=e;return s.createElement(a.c,{className:i()(c,r),component:"div",onPress:n},t)}function u(e){const{children:t,className:r}=e;return s.createElement("div",{className:i()(c,r)},t)}const p=function(e){const{errorMessage:t,children:r,className:n,onPress:i}=e,a=i?d:u;return s.createElement(a,{className:n,onPress:i},t?s.createElement(o.c,{errorMessage:t}):null,s.createElement("div",{className:l},r))}},24792:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{children:t,className:r}=e;return n.createElement("div",{className:r},t)}i.defaultProps={className:"SettingsFormSectionActionLinks-actionLinks-Zeubmp"};const s=i},40084:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e){const{className:t,children:r}=e;return n.createElement("div",{className:t},r)}i.defaultProps={className:"SettingsFormSectionDetails-sectionDetails-YYUcAA"};const s=i},2374:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(11504),i=r(59396),s=r(84536),a=r(85032),o=r(24808),c=r(75372),l=r(74428),d=r(85488),u=r(40084),p=r(84632);const m="SubmittableFormSection-label-lSXbIE FormLabel-label-KQvmHO CloseableFormSection-isPressable-eZi8MN";function h(e){const{className:t,children:r,closedNode:o,title:p,errorMessage:h,buttonKind:y,buttonText:g,isDirty:f,isOpen:v,isValidating:b,isUpdating:S,showButton:P,showButtonEnabled:I,showSpinner:E,editLabel:w,isDisabled:C,onFormChange:O,onSubmit:M,onTogglePress:T}=e;return n.createElement(d.c,{className:t,closedNode:n.createElement(u.c,{className:"SubmittableFormSection-sectionDetails-bHasEj CloseableFormSection-isPressable-eZi8MN SettingsFormSectionDetails-sectionDetails-YYUcAA"},n.createElement(a.c,{className:m},p),o),editLabel:w,errorMessage:h,isOpen:v,onTogglePress:T},E?n.createElement(a.c,{className:m},p):null,E?n.createElement("div",{className:"SubmittableFormSection-spinnerContainer-XD6K5l"},n.createElement(c.c,null)):null,!E&&P?n.createElement(s.cp,{onChange:O,onSubmit:M},r,n.createElement("div",{className:"SubmittableFormSection-submitButton-iGbWN7"},n.createElement(l.c,{isDisabled:!I&&!f||C,isSpinning:S||b,kind:y,type:"submit"},g||(0,i.c)("Save Changes")))):null,E||P?null:r)}h.defaultProps={buttonKind:o.ac,showButton:!0,showButtonEnabled:!1};const y=(0,p.c)(h,{isUpdatingPropName:"isUpdating",errorPropName:"errorMessage",clearDirtyOnChangePropName:"isOpen"})},43684:(e,t,r)=>{"use strict";r.d(t,{c:()=>R});var n=r(27876),i=r(57864),s=r(11852),a=r(35688),o=r(60004),c=r(66780),l=r(11504),d=r(56960),u=r(59396),p=r(71500),m=r(68064),h=r(82468),y=r(90064),g=r(23384),f=r(79264),v=r(24808),b=r(87808),S=r(74428),P=r(44064),I=r(35456);const E={message:"ConfirmAdvertisingNotice-message-HDrf_r"};var w=Object.defineProperty,C=Object.defineProperties,O=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&k(e,r,t[r]);if(M)for(var r of M(t))D.call(t,r)&&k(e,r,t[r]);return e},A=(e,t)=>C(e,O(t));const R=(0,n.Ul)((function(){return(0,i.M3)((e=>e.ui.advertisingNoticeModal),o.c,((e,t)=>{var r;return A(x({},e),{language:t,vendorsCount:null==(r=e.vendors)?void 0:r.length})}))}),(function(e,{playerType:t,advertisingNoticePayload:r,onModalClose:n}){return{onFetchVendors(){e((0,s.Kl)())},onContinue(t,r){e((0,s.cD)({language:r,consent:t}))},onCancel(i){e((0,s.Wy)({advertisingNoticePayload:r,action:c.i0})),t&&i&&e((0,a._U)({playerType:t})),null==n||n()},onSaveComplete(i){e((0,s.Wy)({advertisingNoticePayload:r,action:i?c.cz:c.Gq})),t&&r&&e((0,a.wb)(A(x({},r),{playerType:t,confirmAdvertisingNotice:!0}))),e((0,s.k3)()),null==n||n()}}}))((function(e){const{language:t,vendorsCount:r=0,isOpen:n,isSaving:i,isSaved:s,isVendorsPending:a,isVendorsPopulated:o,vendorsError:w,onFetchVendors:C,onContinue:O,onCancel:M,onSaveComplete:T}=e,D=o&&n,k=function(e){switch(e){case"es":case"pt":case"de":case"fr":case"it":case"en":return e;default:return"en"}}(t),x=i||s,[A,R]=(0,l.useState)(!1),N=(0,l.useCallback)((()=>{R(!0),O(!0,k)}),[O,k]),L=(0,l.useCallback)((()=>{R(!1),O(!1,k)}),[O,k]),j=(0,l.useCallback)((()=>{M(!0)}),[M]);(0,l.useEffect)((()=>{o||w?!a&&w&&M(!1):C()}),[a,o,M,C,w]),(0,l.useEffect)((()=>{s&&T(A)}),[A,s,T]);const U=function(e,t){const r=l.createElement(p.c,{kind:v.ac,target:"_blank",to:"https://www.plex.tv/vendors"},"www.plex.tv/vendors");switch(e){case"es":return[l.createElement(l.Fragment,null,"Para poder ofrecer pelculas, TV en directo, y series en directo de manera gratuita, Plex muestra anuncios antes y durante la reproduccin. No es posible eliminar estos anuncios, pero s podemos brindarle la mejor y ms relevante experiencia publicitaria en caso de que acepte las siguientes condiciones."),l.createElement(l.Fragment,null,"Doy mi consentimiento para que Plex almacene y/o acceda a cierta informacin personal (identificadores de publicidad, direccin IP, contenido que se est viendo) en mi(s) dispositivo(s) y comparta esa informacin con los ",t," socios publicitarios de Plex, que figuran en ",r,". Esta informacin personal se utiliza con el fin de entregar y presentar publicidad y contenido. Cierta informacin (como una direccin IP, capacidades del dispositivo, contenido que se est viendo) se utiliza para garantizar la compatibilidad tcnica del contenido o la publicidad y para facilitar la transmisin del contenido o la publicidad a su dispositivo. Al mirar contenido con publicidad, se le mostrarn anuncios que se entregan en su dispositivo. Para lograr esto, (1) su dispositivo enva una solicitud con su informacin a un intermediario publicitario vinculado a la aplicacin Plex, (2) el intermediario publicitario utiliza esa informacin para determinar qu anuncio relevante entregar de varios anunciantes en su red, y (3) entrega el anuncio relevante. Tcnicamente, dicho intercambio de informacin es necesario para ofrecerle anuncios relevantes.")];case"pt":return[l.createElement(l.Fragment,null,"A Plex oferece filmes, sries de televiso e TV em direto de forma gratuita e exibe anncios antes e durante a reproduo. Embora no seja possvel desativar esses anncios, a Plex fornece-lhe a melhor e mais relevante experincia de publicidade, se concordar com os termos abaixo."),l.createElement(l.Fragment,null,"Autorizo que a Plex armazene e/ou acesse determinadas informaes pessoais (identificadores de publicidade, endereo IP, contedo assistido) em meu(s) dispositivo(s) e compartilhe essas informaes com os parceiros de publicidade da Plex ",t,", listados em"," ",r,". Estas informaes pessoais so utilizadas com a finalidade de fornecer, apresentar publicidade e contedo. Certas informaes (como endereo IP, capacidades do dispositivo, contedo assistido) so usadas para garantir a compatibilidade tcnica do contedo ou publicidade, e para facilitar a transmisso do contedo ou anncio para o seu dispositivo. Assistir a contedo suportado por anncios resultar na exibio de anncios enviados para o seu dispositivo. Para conseguir isso, (1) o seu dispositivo envia uma solicitao com as suas informaes a um intermedirio de publicidade vinculado ao aplicativo Plex, (2) o intermedirio de publicidade usa essas informaes para determinar que anncio relevante ser entregue pelos vrios anunciantes na sua rede, e (3) entrega o anncio relevante. Tecnicamente, essa troca de informaes  necessria para lhe entregar anncios relevantes.")];case"de":return[l.createElement(l.Fragment,null,"Plex bietet kostenlose Filme, Shows und Live-TV an, in denen Anzeigen vor und whrend der Wiedergabe geschaltet werden. Es ist nicht mglich, die Werbung zu deaktivieren  aber wir knnen Dir trotzdem das beste und relevanteste Werbeerlebnis bieten, wenn Du den nachstehenden Bedingungen zustimmst."),l.createElement(l.Fragment,null,"Ich bin damit einverstanden, dass Plex bestimmte persnliche Informationen (Werbekennungen, IP-Adresse, angesehene Inhalte) auf meinen Gerten speichert und/oder darauf zugreift und diese Informationen an die ",t,"-Werbepartner von Plex weitergibt, die unter ",r," aufgefhrt sind. Diese personenbezogenen Daten werden zum Zweck der Auslieferung und Darstellung von Werbung und Inhalten verwendet. Bestimmte Informationen (wie eine IP-Adresse, Gertefunktionen, angesehene Inhalte) werden verwendet, um die technische Kompatibilitt des Inhalts oder der Werbung sicherzustellen und die bertragung des Inhalts oder der Werbung auf Dein Gert zu erleichtern. Wenn Du werbefinanzierte Inhalte ansiehst, werden Dir Werbeanzeigen auf deinem Gert angezeigt. Um dies zu erreichen, (1) sendet dein Gert eine Anfrage mit den o.g. Informationen an einen Werbevermittler der mit der Plex-Anwendung verknpft ist, (2) der Werbevermittler verwendet diese Informationen um zu bestimmen, welche relevante Anzeige von verschiedenen Werbetreibenden in seinem Netzwerk geliefert werden soll, und (3) liefert die relevante Anzeige. Technisch gesehen ist ein solcher Informationsaustausch notwendig, um Dir relevante Werbung zukommen zu lassen.")];case"fr":return[l.createElement(l.Fragment,null,"Plex propose gratuitement des films, des sries et la tlvision en direct en affichant des publicits avant et pendant la lecture. Bien qu'il ne soit pas possible de refuser la publicit, nous pouvons vous fournir une exprience publicitaire plus pertinente si vous acceptez les conditions ci-dessous."),l.createElement(l.Fragment,null,"J'autorise Plex  stocker et/ou  accder  certaines informations personnelles (identifiants publicitaires, adresse IP, contenu regard) sur mon (mes) appareil(s) et  partager ces informations avec les"," ",t," partenaires publicitaires de Plex, rpertoris sur"," ",r,". Ces informations personnelles sont utilises dans le but de diffuser et de prsenter de la publicit et du contenu. Certaines informations (comme une adresse IP, les capacits de l'appareil, le contenu regard) sont utilises pour garantir la compatibilit technique du contenu ou de la publicit, et pour faciliter la transmission du contenu ou de la publicit sur votre appareil. Si vous regardez du contenu financ par la publicit, des publicits vous seront prsentes sur votre appareil. Pour y parvenir, (1) votre appareil envoie une demande contenant vos informations  un intermdiaire publicitaire li  l'application Plex, (2) l'intermdiaire publicitaire utilise ces informations pour dterminer quelle publicit pertinente diffuser auprs des diffrents annonceurs de son rseau, et (3) diffuse l'annonce pertinente. Techniquement, un tel change dinformations est ncessaire pour vous proposer des publicits pertinentes.")];case"it":return[l.createElement(l.Fragment,null,"Plex offre film, programmi e serie TV in diretta gratuiti, visualizzando annunci prima e durante la riproduzione. Sebbene non sia possibile disattivare la pubblicit, accettando i termini riportati qui di seguito potremo fornirti una migliore esperienza pubblicitaria mostrando degli annunci pi pertinenti."),l.createElement(l.Fragment,null,"Acconsento a Plex di archiviare e/o accedere a determinate informazioni personali (identificatori pubblicitari, indirizzo IP, contenuto guardato) sui miei dispositivi e condividere tali informazioni con i ",t," partner pubblicitari di Plex, elencati su ",r,". Queste informazioni personali vengono utilizzate allo scopo di fornire e presentare pubblicit e contenuti. Alcune informazioni (come indirizzo IP, funzionalit del dispositivo, contenuto guardato) vengono utilizzate per garantire la compatibilit tecnica del contenuto o della pubblicit e per facilitare la trasmissione del contenuto o della pubblicit al tuo dispositivo. La visione di contenuti supportati da pubblicit comporter la visualizzazione di annunci pubblicitari visualizzati sul tuo dispositivo. Per raggiungere questo obiettivo, (1) il tuo dispositivo invia una richiesta con le tue informazioni a un intermediario pubblicitario collegato all'applicazione Plex, (2) l'intermediario pubblicitario utilizza tali informazioni per determinare quale annuncio pertinente fornire dai vari inserzionisti nella sua rete e (3) pubblica l'annuncio pertinente. Tecnicamente, tale scambio di informazioni  necessario per fornirti annunci pubblicitari pertinenti.")];default:return[l.createElement(l.Fragment,null,"Plex provides free-to-watch movies, shows, and live TV by displaying ads before and during playback. While it is not possible to opt out of advertising, we can provide you the best and most relevant advertising experience if you agree to the terms below."),l.createElement(l.Fragment,null,"I consent to Plex to store and/or access certain personal information (advertising identifiers, IP address, content being watched) on my device(s) and share that information with Plex's ",t," ","advertising partners, who are listed at ",r,". This personal information is used for the purpose of delivering and presenting advertising and content. Certain information (like an IP address, device capabilities, content being watched) is used to ensure the technical compatibility of the content or advertising, and to facilitate the transmission of the content or ad to your device. Watching ad-supported content will result in you being shown ads that are delivered to your device. To achieve this, (1) your device sends a request with your information to an advertising intermediary linked to the Plex application, (2) the advertising intermediary uses that information to determine what relevant ad to deliver from various advertisers in its network, and (3) delivers the relevant ad. Technically, such exchange of information is necessary to deliver relevant advertisements to you.")]}}(k,r),[F,V]=function(e){switch(e){case"es":return["Estoy de acuerdo","No estoy de acuerdo"];case"pt":return["Eu concordo","Eu no concordo"];case"de":return["Einverstanden","Ich stimme nicht zu"];case"fr":return["Je suis d'accord","Je ne suis pas d'accord"];case"it":return["Sono d'accordo","Non sono d'accordo"];default:return["I Agree","I Do Not Agree"]}}(k);return l.createElement(P.c,{isOpen:D,metricsPage:d.mq,size:b.wH,onModalClose:j},l.createElement(I.c,{onModalClose:j},l.createElement(f.c,null,(0,u.c)("Consent")),l.createElement(h.c,null,U.map(((e,t)=>l.createElement("div",{key:t,className:E.message},e)))),l.createElement(y.c,null,l.createElement(g.c,null,l.createElement(m.c,{action:c.Gq,metricsProperties:{page:d.mq}},l.createElement(S.c,{className:E.confirmButton,isSpinning:x&&!A,onPress:L},V)),l.createElement(m.c,{action:c.cz,metricsProperties:{page:d.mq}},l.createElement(S.c,{className:E.confirmButton,"data-autofocus":!0,isSpinning:x&&A,onPress:N},F))))))}))},42176:(e,t,r)=>{"use strict";r.d(t,{c:()=>Ge});var n=r(3268),i=r.n(n),s=r(11504),a=r(57864),o=r(50148),c=r(61500),l=r(18480),d=r(47884),u=r(85328),p=r(19264),m=r(97024),h=r(37660),y=r(35860),g=r(12612),f=r(91224),v=r(27816),b=r(51796);const S=i().shape({key:i().string,directoryID:i().string,directoryIcon:i().string,sourceType:i().string,title:i().string,titleDetail:i().string,detail:i().string,route:i().string,machineIdentifier:i().string,providerIdentifier:i().string,providerMetricsIdentifier:i().string,isUnavailable:i().bool,isOutOfDate:i().bool,isUnclaimedServer:i().bool,isSelected:i().bool,isCloud:i().bool});var P=r(75560),I=r(28436),E=r(36296),w=r(44100),C=r(81764),O=r(37984),M=r(43168),T=r(19576),D=r(9868),k=r(56960),x=r(59396),A=r(13436),R=r(24808),N=r(54444),L=r(27876),j=r(93808),U=r(85712),F=r(4644),V=r(99192),_=r(5806),W=r(16932),B=r(58196),H=r(23208),z=r(79240),G=r(37768),q=r(58724),K=r(16648),Q=r(84480),$=r(72840),Y=r(24252),X=r(42784),J=r(16256),Z=r(2100);const ee=(0,a.M3)(Z.c,(e=>e.importPlaylists)),te={description:"ImportPlaylistsModal-description-HHiaI4",row:"ImportPlaylistsModal-row-GfMdCk",overwrite:"ImportPlaylistsModal-overwrite-b4G7sb",library:"ImportPlaylistsModal-library-naO92u",buttonBar:"ImportPlaylistsModal-buttonBar-a5L1Wc ModalFooterButtonBar-buttonBar-xxZyHc"};function re({isOpen:e,onModalClose:t}){var r;const[n,i]=(0,O.c$)(),a=(0,L.OY)(),{isImporting:o,isImported:c,importError:l}=(0,L.w1)(ee),d=(0,F.c)(i,U.Aj.Content),u=(null!=(r=null==d?void 0:d.directories)?r:[]).filter((e=>e.type===j.WW.Artist)).map((({id:e,title:t})=>({value:e,label:t}))),{register:p,handleSubmit:m}=(0,N.aS)({defaultValues:{importAll:!1,sectionID:null==u?void 0:u[0].value}}),h=m((({importAll:e,sectionID:t})=>{if(!u.length)return;const r=null!=t?t:u[0].value;a(J.c.actions.importRequested({server:n,importAll:e,sectionID:r}))}));return(0,s.useEffect)((()=>{c&&t()}),[a,c,t]),(0,s.useEffect)((()=>{e||a(J.c.actions.reset())}),[a,e]),s.createElement(H.c,{isOpen:e,size:X.c.Small,onModalClose:t},s.createElement(G.c,{onModalClose:t},s.createElement($.c,null,(0,x.c)("Import from iTunes")),l?s.createElement(q.c,{message:(0,x.c)("Something went wrong. Make sure the server is available and try again.")}):null,s.createElement("form",{onSubmit:h},s.createElement(z.c,null,s.createElement("div",{className:te.description},(0,x.c)("Importing from iTunes will import your music playlists. It will also import your ratings, the date you added the music, as well as play and skip counts for tracks in your library. Depending on how many tracks you have, this process can take many minutes to complete.")),s.createElement("label",{className:te.row},s.createElement(W.c,{ref:p,name:"importAll"}),s.createElement("span",{className:te.overwrite},(0,x.c)("Overwrite existing playlists"))),u.length>1?s.createElement("label",{className:te.row},s.createElement("span",{className:te.library},(0,x.c)("Add to library:")),s.createElement(B.c,{ref:p,name:"sectionID"},u.map((({value:e,label:t},r)=>s.createElement("option",{key:r,value:e},t))))):null),s.createElement(K.c,null,s.createElement(Q.c,{className:te.buttonBar},s.createElement(V.c,{onPress:t},(0,x.c)("Cancel")),s.createElement(_.c,{className:te.button,isSpinning:o,kind:Y.c.Primary,type:"submit"},(0,x.c)("Import")))))))}var ne=r(63136),ie=r(50704),se=r(42440),ae=r(66456),oe=r(79372),ce=r(36728),le=r(55588),de=r(78352),ue=r(64388);function pe(e){const{sourceDirectory:t,isUnavailable:r,onMenuClose:n,onCancelScanLibraryPress:i,onScanLibraryPress:a,onSharePress:o,onEditLibraryPress:c,onRefreshAllLibraryMetadataPress:l,onEmptyLibraryTrashPress:d,onAnalyzeLibraryPress:u,onDeleteLibraryPress:p}=e,m=r||!t;return s.createElement(s.Fragment,null,t&&t.refreshing?s.createElement(ce.c,{onPress:(0,le.c)(n,i)},(0,x.c)("Cancel Scan")):s.createElement(ce.c,{isDisabled:m,onPress:(0,le.c)(n,a)},(0,x.c)("Scan Library Files")),s.createElement(ce.c,{isDisabled:m,onPress:(0,le.c)(n,o)},(0,x.c)("Grant Access")),s.createElement(ue.c,{isDisabled:m,label:(0,x.c)("Manage Library"),onMenuClose:n},s.createElement(ce.c,{onPress:(0,le.c)(n,c)},(0,x.c)("Edit...")),s.createElement(ce.c,{onPress:(0,le.c)(n,l)},(0,x.c)("Refresh All Metadata")),s.createElement(ce.c,{onPress:(0,le.c)(n,d)},(0,x.c)("Empty Trash")),s.createElement(ce.c,{onPress:(0,le.c)(n,u)},(0,x.c)("Analyze")),s.createElement(ce.c,{kind:R.od,onPress:(0,le.c)(n,p)},(0,x.c)("Delete"))))}var me=r(69468),he=Object.defineProperty,ye=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,ve=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))ge.call(t,r)&&ve(e,r,t[r]);if(ye)for(var r of ye(t))fe.call(t,r)&&ve(e,r,t[r]);return e};function Se(e){const{machineIdentifier:t,isGuideRefreshing:r,isUnavailable:n,onMenuClose:i,onCancelRefreshGuidePress:a,onRefreshGuidePress:o}=e,c=n;return s.createElement(s.Fragment,null,s.createElement(ce.c,{isDisabled:c,to:(0,me.c)(t,"manage","dvr"),onPress:i},(0,x.c)("Settings")),r?s.createElement(ce.c,{onPress:(0,le.c)(i,a)},(0,x.c)("Cancel Refresh")):s.createElement(ce.c,{isDisabled:c,onPress:(0,le.c)(i,o)},(0,x.c)("Refresh Guide")))}function Pe(e){const{onMenuClose:t,onImportPlaylistsPress:r}=e;return s.createElement(ce.c,{onPress:(0,le.c)(t,r)},(0,x.c)("Import from iTunes..."))}const Ie=function(e){const{provider:t,hasProviderSettings:r,hasDiscoverActions:n,hasLibraryActions:i,hasDVRActions:a,hasPlaylistsActions:o,isPinned:c,isReorderable:l,isUnavailable:d,toggleServiceMenuItem:u,onMenuClose:p,onTogglePinSources:m,onReorderPinSources:h,onStreamingServicesPress:y}=e;return s.createElement(s.Fragment,null,e.machineIdentifier&&e.sourceDirectory?s.createElement(de.c,{machineIdentifier:e.machineIdentifier,server:e.server,sourceDirectory:e.sourceDirectory,onMenuClose:p}):null,s.createElement(ce.c,{onPress:(0,le.c)(p,m)},c?(0,x.c)("Unpin"):(0,x.c)("Pin")),l?s.createElement(ce.c,{onPress:(0,le.c)(p,h)},(0,x.c)("Reorder")):null,n?s.createElement(ce.c,{onPress:(0,le.c)(p,y)},(0,x.c)("Manage Streaming Services")):null,r&&!d?s.createElement(ce.c,{to:`#!/provider/${encodeURIComponent(t.identifier)}/settings`,onPress:p},(0,x.c)("Personalize")):null,i?s.createElement(pe,be({},e)):null,a?s.createElement(Se,be({},e)):null,o?s.createElement(Pe,be({},e)):null,u)};var Ee=r(42466),we=Object.defineProperty,Ce=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const xe=function(e){const t=e,{machineIdentifier:r,providerIdentifier:n,serverEntityID:i,source:a,sourceDirectory:o,service:c,target:l,menuOptions:d,hasDiscoverActions:u,hasLibraryActions:p,hasPlatformActions:m,hasPlaylistsActions:h,isDeletingLibrary:y,isOverflowMenuOpen:g,onOverflowMenuClose:f,onAnalyzeLibraryPress:v,onEmptyLibraryTrashPress:b,onRefreshAllLibraryMetadataPress:S,onDeleteLibraryPress:P}=t,I=((e,t)=>{var r={};for(var n in e)Te.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Me)for(var n of Me(e))t.indexOf(n)<0&&De.call(e,n)&&(r[n]=e[n]);return r})(t,["machineIdentifier","providerIdentifier","serverEntityID","source","sourceDirectory","service","target","menuOptions","hasDiscoverActions","hasLibraryActions","hasPlatformActions","hasPlaylistsActions","isDeletingLibrary","isOverflowMenuOpen","onOverflowMenuClose","onAnalyzeLibraryPress","onEmptyLibraryTrashPress","onRefreshAllLibraryMetadataPress","onDeleteLibraryPress"]),E=(0,D.y)(),w=(0,Ee.c)(),C=(0,Ee.c)(S),O=(0,Ee.c)(b),M=(0,Ee.c)(v),T=(0,Ee.c)(),N=(0,Ee.c)(),L=(0,A.c)(y),{onToggleService:j,confirmServiceToggleModal:U,toggleServiceMenuItem:F}=(0,se.c)({service:c,onMenuClose:f});(0,s.useEffect)((()=>{L&&!y&&T.onClose()}),[y,L,T]);const V=!!(u&&r&&n);return s.createElement(s.Fragment,null,s.createElement(oe.c,{isOpen:g,options:d,target:l,onMenuClose:f},s.createElement(Ie,(_=((e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&ke(e,r,t[r]);if(Me)for(var r of Me(t))De.call(t,r)&&ke(e,r,t[r]);return e})({},I),W={hasDiscoverActions:V,hasLibraryActions:p,hasPlatformActions:m,hasPlaylistsActions:h,machineIdentifier:r,provider:e.provider,providerEntityID:e.providerEntityID,server:e.server,sourceDirectory:o,toggleServiceMenuItem:F,onAnalyzeLibraryPress:M.onOpen,onDeleteLibraryPress:T.onOpen,onEmptyLibraryTrashPress:O.onOpen,onImportPlaylistsPress:N.onOpen,onMenuClose:f,onRefreshAllLibraryMetadataPress:C.onOpen,onSharePress:E.onOpen,onStreamingServicesPress:w.onOpen,onToggleServicePress:j},Ce(_,Oe(W))))),V?s.createElement(ie.c,{isOpen:w.isOpen,onClose:w.onClose}):null,p?s.createElement(s.Fragment,null,s.createElement(ne.c,{isExternallyTriggered:!0,listType:["PlexAccounts","HomeUsers"],modalState:E,selectedMachineIdentifier:r,sourceDirectory:o,type:"ShareLibrary"}),s.createElement(ae.c,{confirmLabel:(0,x.c)("Refresh"),isOpen:C.isOpen,message:(0,x.c)("Forces a download of fresh media information from the internet. This can take a long time. Any locked fields are not modified."),metricsPage:k.Kc,title:(0,x.c)("Refresh All Metadata"),onCancel:C.onClose,onConfirm:C.onConfirm}),s.createElement(ae.c,{confirmLabel:(0,x.c)("Empty"),isOpen:O.isOpen,message:(0,x.c)("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),metricsPage:k.I5,title:(0,x.c)("Empty Trash"),onCancel:O.onClose,onConfirm:O.onConfirm}),s.createElement(ae.c,{confirmLabel:(0,x.c)("Analyze"),isOpen:M.isOpen,message:(0,x.c)("Analyzes all the media files in the library. The analysis captures information about the media which helps Plex decide how to optimally play back the media."),metricsPage:k.uS,title:(0,x.c)("Analyze Library"),onCancel:M.onClose,onConfirm:M.onConfirm}),s.createElement(ae.c,{accordMessage:(0,x.c)('Yes, delete the library "{libraryName}"',{libraryName:a.title}),confirmLabel:(0,x.c)("Delete"),isCancelButtonDisabled:y,isConfirmButtonSpinning:y,isOpen:T.isOpen,kind:R.od,message:(0,x.c)('The library "{libraryName}" will be removed from this server. Your media files will not be affected. This can\'t be undone. Continue?',{libraryName:a.title}),metricsPage:k.Qj,title:(0,x.c)("Delete Library"),onCancel:T.onClose,onConfirm:P})):null,h?s.createElement(re,{isOpen:N.isOpen,onModalClose:N.onClose}):null,m&&U?U:null);var _,W};var Ae=Object.defineProperty,Re=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Fe=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ve=(e,t)=>{for(var r in t||(t={}))je.call(t,r)&&Fe(e,r,t[r]);if(Le)for(var r of Le(t))Ue.call(t,r)&&Fe(e,r,t[r]);return e},_e=(e,t)=>Re(e,Ne(t)),We=(e,t,r)=>(Fe(e,"symbol"!=typeof t?t+"":t,r),r);const Be={dispatchScanLibraryFiles:I.Cm,dispatchCancelScanLibraryFiles:I.Cu,dispatchEditLibrary:I.Gq,dispatchRefreshAllLibraryMetadata:I.u4,dispatchEmptyLibraryTrash:I.iI,dispatchAnalyzeLibrary:I.Ef,dispatchDeleteLibrary:I.Gg,dispatchRedirectToRoute:P.C8,dispatchReloadGuide:w.tq,dispatchCancelReloadGuide:w.MN,dispatchPopulateHasiTunes:E.C4,dispatchPinSources:C.Nl,dispatchUnpinSources:C.eg};class He extends s.Component{constructor(){super(...arguments),We(this,"onScanLibraryPress",(()=>{this.props.dispatchScanLibraryFiles({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})})),We(this,"onCancelScanLibraryPress",(()=>{this.props.dispatchCancelScanLibraryFiles({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})})),We(this,"onEditLibraryPress",(()=>{this.props.dispatchEditLibrary({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})})),We(this,"onRefreshAllLibraryMetadataPress",(()=>{this.props.dispatchRefreshAllLibraryMetadata({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})})),We(this,"onEmptyLibraryTrashPress",(()=>{this.props.dispatchEmptyLibraryTrash({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})})),We(this,"onAnalyzeLibraryPress",(()=>{this.props.dispatchAnalyzeLibrary({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})})),We(this,"onDeleteLibraryPress",(()=>{this.props.dispatchDeleteLibrary({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage}),this.props.source.isSelected&&this.props.dispatchRedirectToRoute({route:"home"})})),We(this,"onRefreshGuidePress",(()=>{this.props.dispatchReloadGuide({serverEntityID:this.props.serverEntityID,dvrID:this.props.provider.parentID,metricsPage:this.props.metricsPage})})),We(this,"onCancelRefreshGuidePress",(()=>{this.props.dispatchCancelReloadGuide({serverEntityID:this.props.serverEntityID,dvrID:this.props.provider.parentID,metricsPage:this.props.metricsPage})})),We(this,"onTogglePinSources",(()=>{this.props.isPinned?this.props.dispatchUnpinSources({sources:[this.props.source]}):this.props.dispatchPinSources({sources:[this.props.source]})}))}componentDidMount(){const{isOwnedPlaylistSource:e,isConnected:t}=this.props;e&&t&&this._populateHasiTunes(this.props)}componentDidUpdate(e){const{isOwnedPlaylistSource:t,isConnected:r}=this.props;t&&r&&!e.isConnected&&this._populateHasiTunes(this.props)}_populateHasiTunes(e){this.props.dispatchPopulateHasiTunes({serverEntityID:e.serverEntityID})}render(){const e=this.props,{machineIdentifier:t,providerIdentifier:r,metricsPage:n,isConnected:i,isOwnedPlaylistSource:a,dispatchScanLibraryFiles:o,dispatchCancelScanLibraryFiles:c,dispatchEditLibrary:l,dispatchReloadGuide:d,dispatchCancelReloadGuide:u,dispatchPopulateHasiTunes:p,dispatchPinSources:m,dispatchUnpinSources:h}=e,y=((e,t)=>{var r={};for(var n in e)je.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Le)for(var n of Le(e))t.indexOf(n)<0&&Ue.call(e,n)&&(r[n]=e[n]);return r})(e,["machineIdentifier","providerIdentifier","metricsPage","isConnected","isOwnedPlaylistSource","dispatchScanLibraryFiles","dispatchCancelScanLibraryFiles","dispatchEditLibrary","dispatchReloadGuide","dispatchCancelReloadGuide","dispatchPopulateHasiTunes","dispatchPinSources","dispatchUnpinSources"]),g=s.createElement(xe,_e(Ve({},y),{machineIdentifier:t,providerIdentifier:r,onAnalyzeLibraryPress:this.onAnalyzeLibraryPress,onCancelRefreshGuidePress:this.onCancelRefreshGuidePress,onCancelScanLibraryPress:this.onCancelScanLibraryPress,onDeleteLibraryPress:this.onDeleteLibraryPress,onEditLibraryPress:this.onEditLibraryPress,onEmptyLibraryTrashPress:this.onEmptyLibraryTrashPress,onRefreshAllLibraryMetadataPress:this.onRefreshAllLibraryMetadataPress,onRefreshGuidePress:this.onRefreshGuidePress,onScanLibraryPress:this.onScanLibraryPress,onTogglePinSources:this.onTogglePinSources}));return t&&r?s.createElement(O.cp,{machineIdentifier:t,providerIdentifier:r},g):g}}const ze=(0,b.c)((function(){return(0,a.M3)(((e,{source:t})=>t),((e,{hubsListSourceURI:t})=>t),M.c,p.c,u.c,c.c,m.c,(0,l.M3)(),(0,a.M3)((0,d.c)(),(e=>e&&e.desktop.hasiTunes)),(0,o.c)(),((e,t,r,n,i,s,a,o,c,l)=>{const d=a.some((t=>!!e&&t.key===e.key));if(!i||!s||!e||i.isOutOfDate)return{isUnavailable:!0,isPinned:d};const u=e.sourceType===f.Eq,p=e.sourceType===f.Im,m=p&&(0,T.c)(t),b=m?r.slug:void 0,S=e.sourceType===f.uO,{features:{content:{directories:P=[]}={}}={}}=s||{},I=P.find((t=>t.id===e.directoryID)),E=i.isFullOwnedServer&&s.isLibraryProvider&&I&&/(\d+)$/.test(I.id)&&!u,w=i.isFullOwnedServer&&e.sourceType===f.EB,C=!!P.find((({type:e})=>e===g.iI)),O=s.features.settings;return{sourceDirectory:I,machineIdentifier:i.machineIdentifier,provider:s,providerIdentifier:s.identifier,server:i,hasProviderSettings:!!O&&(0,v._)(n,O)&&e.directoryID!==h._w&&!S&&(!p||!y.QJ(s.identifier)),hasDiscoverActions:p&&e.directoryID!==h._w,hasPlatformActions:m,service:b,hasLibraryActions:E,hasDVRActions:i.isFullOwnedServer&&S,hasPlaylistsActions:w&&c&&C,isConnected:i.isConnected,isUnavailable:i.isUnavailable,isPinned:d,isDeletingLibrary:!!o,isGuideRefreshing:!!l,isOwnedPlaylistSource:w}}))}),Be)(He);ze.propTypes=_e(Ve({},ze.propTypes),{source:S,serverEntityID:i().string,providerEntityID:i().string});const Ge=ze},66456:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(63300);var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){return n.createElement(i.c,(t=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(t,o({containerClassName:"SourceSidebarConfirmModal-modalContainer-EmjMVe Modal-modalContainer-iz5oBP"}))));var t}},79372:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(11504),i=r(24752);var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){return n.createElement(i.c,(t=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(t,o({portalClassName:"SourceSidebarMenu-menuPortal-NUdeiw Menu-menuPortal-EGqW0f"}))));var t}},11724:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(57864),i=r(18480),s=r(51796),a=r(36296),o=r(99472),c=r(11504),l=r(9868),d=r(56960),u=r(59396),p=r(36728),m=r(64388),h=r(55588),y=r(63136),g=r(42466),f=r(69468),v=r(66456),b=r(79372);const S={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,-10]}}]},P=(0,s.c)((function(){return(0,n.M3)((0,n.M3)((0,o.c)(),(e=>e.some((e=>e.refreshing)))),(0,i.qc)(),(0,i.Cw)(),((e,t,r)=>({isLibraryRefreshing:e,isOptimizeDatabaseInProgress:!!t,isCleanBundlesInProgress:!!r})))}),(function(e,t){const r={serverEntityID:t.serverEntityID,metricsPage:t.metricsPage};return{onScanLibrariesPress(){e(a.ui(r))},onCancelScanLibrariesPress(){e(a.yK(r))},onEmptyTrashPress(){e(a.G8(r))},onOptimizeDatabasePress(){e(a.P(r))},onCleanBundlesPress(){e(a.I9(r))}}}))((function(e){const{machineIdentifier:t,overflowMenuButtonID:r,isLibraryRefreshing:n,isOptimizeDatabaseInProgress:i,isCleanBundlesInProgress:s,isOverflowMenuOpen:a,onScanLibrariesPress:o,onCancelScanLibrariesPress:P,onEmptyTrashPress:I,onOptimizeDatabasePress:E,onCleanBundlesPress:w,onOverflowMenuClose:C}=e,O=(0,l.y)(),M=(0,g.c)(I),T=(0,g.c)(E),D=(0,g.c)(w);return c.createElement(c.Fragment,null,c.createElement(b.c,{isOpen:a,options:S,target:r,onMenuClose:C},c.createElement(p.c,{onPress:(0,h.c)(C,O.onOpen)},(0,u.c)("Grant Access")),n?c.createElement(p.c,{onPress:P},(0,u.c)("Cancel Scan")):c.createElement(p.c,{onPress:o},(0,u.c)("Scan Library Files")),c.createElement(m.c,{label:(0,u.c)("Manage Server"),onMenuClose:C},c.createElement(p.c,{to:(0,f.c)(t,"settings","general")},(0,u.c)("Settings")),c.createElement(p.c,{onPress:M.onOpen},(0,u.c)("Empty Trash")),c.createElement(p.c,{isDisabled:i,onPress:T.onOpen},(0,u.c)("Optimize Database")),c.createElement(p.c,{isDisabled:s,onPress:D.onOpen},(0,u.c)("Clean Bundles")))),c.createElement(y.c,{isExternallyTriggered:!0,listType:["PlexAccounts","HomeUsers"],modalState:O,type:"ShareLibrary"}),c.createElement(v.c,{confirmLabel:(0,u.c)("Empty"),isOpen:M.isOpen,message:(0,u.c)("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),metricsPage:d.W,title:(0,u.c)("Empty Trash"),onCancel:M.onClose,onConfirm:M.onConfirm}),c.createElement(v.c,{confirmLabel:(0,u.c)("Optimize"),isOpen:T.isOpen,message:(0,u.c)("Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library."),metricsPage:d.cJ,title:(0,u.c)("Optimize Database"),onCancel:T.onClose,onConfirm:T.onConfirm}),c.createElement(v.c,{confirmLabel:(0,u.c)("Clean"),isOpen:D.isOpen,message:(0,u.c)("The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the internet. Running this task deletes any bundles which are no longer in use."),metricsPage:d.QL,title:(0,u.c)("Clean Bundles"),onCancel:D.onClose,onConfirm:D.onConfirm}))}))},27248:(e,t,r)=>{"use strict";r.d(t,{Q:()=>C,e:()=>M});var n=r(11504),i=r(27876),s=r(16852),a=r(56960),o=r(59396),c=r(98772),l=r(1292),d=r(71500),u=r(74860),p=r(84536),m=r(82468),h=r(79264),y=r(24808),g=r(87808),f=r(28436),v=r(7948),b=r(16648),S=r(84480),P=r(44064),I=r(35456),E=r(42466);const w={modalContainer:"AgentUpgradeLibraryModals-modalContainer-SxT81Z Modal-modalContainer-iz5oBP",note:"AgentUpgradeLibraryModals-note-n95EWI",checkInputGroup:"AgentUpgradeLibraryModals-checkInputGroup-kuIjXH"};function C(e,t,r,n,i){t.filter((([e,,,t])=>!(n&&e!==n||i&&t!==i&&!r.upgradeAllLibraries))).forEach((([,t,n,i])=>{e((0,f.Qb)({serverEntityID:t,providerEntityID:n,contentDirectory:i,options:{refreshMetadata:r.refreshMetadata}}))}))}function O(e){const t=(0,i.OY)(),r=(0,i.w1)(v.c),f=(0,n.useMemo)((()=>r.filter((([t])=>t===e.machineIdentifier))),[r,e.machineIdentifier]),{onClose:E}=e,O=(0,n.useCallback)((r=>{E(),C(t,f,r,e.machineIdentifier,e.sourceDirectory)}),[f,t,E,e.machineIdentifier,e.sourceDirectory]);return n.createElement(P.c,{containerClassName:w.modalContainer,isOpen:e.isOpen,metricsPage:a.c5,size:g.wH,onModalClose:e.onClose},n.createElement(p.cp,{onSubmit:O},n.createElement(I.c,{onModalClose:e.onClose},n.createElement(h.c,null,(0,o.c)("Upgrade Library")),n.createElement(m.c,null,n.createElement(c.c,{message:(0,o.c)("This library is currently using a legacy agent to match items and fetch artwork and other metadata. {openLink}There is a newer, faster, and more accurate agent available{closeLink} for this type of media. Would you like to upgrade the library now?"),tags:[{open:"openLink",close:"closeLink",component:d.c,kind:y.ac,to:s.Y,target:"_blank"}]}),n.createElement("div",{className:w.note},(0,o.c)("Note: Metadata for existing items in this library will not be affected until they are refreshed. We can refresh metadata immediately after updating this library or you can wait for the next scheduled update.")),n.createElement(u.c,{checkboxText:(0,o.c)("Refresh metadata for this library after upgrading"),formGroupClassName:w.checkInputGroup,initialValue:!0,name:"refreshMetadata",size:g.wH})),n.createElement(b.c,null,f.length>1?n.createElement(u.c,{checkboxText:(0,o.c)("Upgrade all libraries"),formGroupClassName:w.checkInputGroup,initialValue:!1,name:"upgradeAllLibraries",size:g.wH}):null,n.createElement(S.c,null,n.createElement(l.c,{onPress:e.onClose},(0,o.c)("No thanks")),n.createElement(l.c,{kind:y.ac,type:"submit"},(0,o.c)("Upgrade")))))))}function M(e,t,r){const{isOpen:i,onClose:s,onOpen:a}=(0,E.c)(),o=(0,n.useCallback)((()=>{s(),null==r||r()}),[r,s]);return{Modal:(0,n.useCallback)((()=>n.createElement(O,{isOpen:i,machineIdentifier:e,sourceDirectory:t,onClose:o,onOpen:a})),[i,e,o,a,t]),onOpen:a}}},95392:(e,t,r)=>{"use strict";r.d(t,{c:()=>te});var n=r(11504),i=r(52180),s=r(66780),a=r(56960),o=r(87808),c=r(51268),l=r(44064),d=r(27876),u=r(57864),p=r(70068),m=r(9852),h=r(96504),y=r(81764),g=r(89080),f=r.n(g),v=r(59396),b=r(1292),S=r(71500),P=r(68064),I=r(82468),E=r(90064),w=r(79264),C=r(24808),O=r(75372),M=r(35456);const T=function({img:e,title:t,description:r}){return n.createElement("div",{className:"PlexPassFeature-feature-g2cqrl"},n.createElement("div",{className:"PlexPassFeature-featurePadding-HlzHf1"},n.createElement("img",{className:"PlexPassFeature-featureImage-Cu_YWf",src:e}),n.createElement("div",{className:"PlexPassFeature-featureContainer-weVg5v"},n.createElement("div",{className:"PlexPassFeature-featureTitle-MjXZRx"},t),n.createElement("div",{className:"PlexPassFeature-featureDescription-PzPjOw"},r))))},D="PlexPassModalContent-planButton-Llj7fU";var k=Object.defineProperty,x=Object.defineProperties,A=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&j(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&j(e,r,t[r]);return e},F=(e,t)=>x(e,A(t));const V=function(e){const{metricsProperties:t,subscribeUrl:r,infoUrl:i,plans:a,isPlansPending:c,isPlansPopulated:l,plansError:d,onModalClose:u}=e;return n.createElement(M.c,{onModalClose:u},n.createElement(w.c,{className:"PlexPassModalContent-header-xdr0aX ModalHeader-modalHeader-nb9ueN"},n.createElement("div",{className:"PlexPassModalContent-plexPassTitle-nn8Har"},(0,v.c)("Plex Pass")),(0,v.c)("Enhance your Plex experience with exclusive premium features")),n.createElement(I.c,{innerClassName:"PlexPassModalContent-body-HYN68L ModalBody-innerModalBody-T6u3sU"},n.createElement(T,{description:(0,v.c)("Enjoy your media offline on Android and iOS devices"),img:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3e %3cg fill='%23CC7B19' transform='translate(10 4)'%3e %3cpath d='M15.951%2c16.444 C15.85%2c16.193 15.608%2c16.029 15.339%2c16.028 L12.667%2c16.005 L12.667%2c10 C12.667%2c9.632 12.368%2c9.333 12%2c9.333 L8%2c9.333 C7.632%2c9.333 7.333%2c9.632 7.333%2c10 L7.333%2c16 L4.61%2c16 C4.341%2c16 4.097%2c16.163 3.994%2c16.412 C3.89%2c16.661 3.947%2c16.948 4.138%2c17.139 L9.471%2c22.472 C9.602%2c22.601 9.772%2c22.667 9.943%2c22.667 C10.111%2c22.667 10.28%2c22.603 10.411%2c22.475 L15.8%2c17.17 C15.992%2c16.981 16.052%2c16.695 15.949%2c16.445 L15.951%2c16.444 Z M9.948%2c21.061 L6.22%2c17.333 L8%2c17.333 C8.368%2c17.333 8.667%2c17.034 8.667%2c16.666 L8.667%2c10.666 L11.334%2c10.666 L11.334%2c16.666 C11.334%2c17.031 11.629%2c17.33 11.995%2c17.333 L13.719%2c17.348 L9.948%2c21.061 Z'/%3e %3cpath d='M16%2c7.88860905e-31 L4%2c7.88860905e-31 C2.163%2c7.88860905e-31 0.667%2c1.495 0.667%2c3.333 L0.667%2c28.666 C0.667%2c30.505 2.163%2c31.999 4%2c31.999 L16%2c31.999 C17.837%2c31.999 19.333%2c30.504 19.333%2c28.666 L19.333%2c3.333 C19.333%2c1.494 17.837%2c-1.77635684e-15 16%2c7.88860905e-31 Z M2%2c6.667 L18%2c6.667 L18%2c25.334 L2%2c25.334 L2%2c6.667 Z M4%2c1.333 L16%2c1.333 C17.103%2c1.333 18%2c2.23 18%2c3.333 L18%2c5.333 L2%2c5.333 L2%2c3.333 C2%2c2.23 2.897%2c1.333 4%2c1.333 Z M16%2c30.667 L4%2c30.667 C2.897%2c30.667 2%2c29.77 2%2c28.667 L2%2c26.667 L18%2c26.667 L18%2c28.667 C18%2c29.77 17.103%2c30.667 16%2c30.667 Z'/%3e %3cpath d='M6.667 4L13.334 4C13.702 4 14.001 3.701 14.001 3.333 14.001 2.965 13.702 2.666 13.334 2.666L6.667 2.666C6.299 2.666 6 2.965 6 3.333 6 3.701 6.299 4 6.667 4zM11.333 28.667C11.333 29.403 10.736 30 10 30 9.264 30 8.667 29.403 8.667 28.667 8.667 27.931 9.264 27.334 10 27.334 10.736 27.334 11.333 27.931 11.333 28.667z'/%3e %3c/g%3e %3c/svg%3e",title:(0,v.c)("Downloads")}),n.createElement(T,{description:(0,v.c)("Connect a tuner and antenna to record free OTA broadcasts"),img:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3e %3cg fill='%23CC7B19' transform='translate(3 4)'%3e %3cpath d='M25%2c16 C20.588%2c16 17%2c19.588 17%2c24 C17%2c28.412 20.588%2c32 25%2c32 C29.412%2c32 33%2c28.412 33%2c24 C33%2c19.588 29.412%2c16 25%2c16 Z M25%2c30.667 C21.324%2c30.667 18.333%2c27.676 18.333%2c24 C18.333%2c20.324 21.324%2c17.333 25%2c17.333 C28.676%2c17.333 31.667%2c20.324 31.667%2c24 C31.667%2c27.676 28.676%2c30.667 25%2c30.667 Z'/%3e %3cpath d='M25%2c20 C22.795%2c20 21%2c21.795 21%2c24 C21%2c26.205 22.795%2c28 25%2c28 C27.205%2c28 29%2c26.205 29%2c24 C29%2c21.795 27.205%2c20 25%2c20 Z M25%2c26.667 C23.529%2c26.667 22.333%2c25.471 22.333%2c24 C22.333%2c22.529 23.529%2c21.333 25%2c21.333 C26.471%2c21.333 27.667%2c22.529 27.667%2c24 C27.667%2c25.471 26.471%2c26.667 25%2c26.667 Z'/%3e %3cpath d='M32.333 9.333L1.666 9.333C1.298 9.333.999 9.632.999 10L.999 26.801C.999 28.197 2.158 29.333 3.583 29.333L14.332 29.333 14.332 28 3.583 28C2.892 28 2.332 27.463 2.332 26.801L2.332 10.666 31.665 10.666 31.665 15.993 32.998 15.993 32.998 10C32.998 9.632 32.699 9.333 32.331 9.333L32.333 9.333zM31 0L3 0C1.897 0 1 .897 1 2.001L1 7.333C1 7.701 1.299 8 1.667 8L32.334 8C32.702 8 33.001 7.701 33.001 7.333L33.001 2.001C33.001.897 32.104 4.4408921e-16 31.001 4.4408921e-16L31 0zM31.62 1.772L26.725 6.667 23.277 6.667 28.61 1.334 30.999 1.334C31.286 1.334 31.526 1.518 31.619 1.773L31.62 1.772zM12.611 1.333L16.059 1.333 10.726 6.666 7.278 6.666 12.611 1.333zM5.392 6.667L2.611 6.667 7.944 1.334 10.725 1.334 5.392 6.667zM17.944 1.333L21.392 1.333 16.059 6.666 12.611 6.666 17.944 1.333zM23.277 1.333L26.725 1.333 21.392 6.666 17.944 6.666 23.277 1.333zM3 1.333L6.059 1.333 2.334 5.058 2.334 2.001C2.334 1.633 2.633 1.333 3.001 1.333L3 1.333zM28.611 6.667L31.667 3.611 31.667 6.667 28.611 6.667z'/%3e %3c/g%3e %3c/svg%3e",title:(0,v.c)("Live TV & DVR")}),n.createElement(T,{description:(0,v.c)("Set up managed user accounts to create custom access restrictions"),img:"data:image/svg+xml,%3csvg width='40' height='40' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M35.333 26.667h-.667V26a4.672 4.672 0 0 0-4.667-4.667A4.672 4.672 0 0 0 25.332 26v.667h-.667a.667.667 0 0 0-.667.667v8c0 .368.299.667.667.667h10.667a.667.667 0 0 0 .667-.667v-8a.667.667 0 0 0-.667-.667h.001zM26.667 26A3.338 3.338 0 0 1 30 22.667 3.338 3.338 0 0 1 33.333 26v.667h-6.667V26h.001zm8 8.667h-9.333V28h9.333v6.667zM30 29.333h.002c.734 0 1.333.598 1.333 1.333 0 .487-.276.896-.667 1.128v.872a.667.667 0 0 1-1.334 0v-.872c-.391-.232-.667-.641-.667-1.128 0-.734.598-1.333 1.333-1.333zm-5.349-16.666h.002c0 3.028-1.321 5.693-3.317 7.244v3.423h-1.333v-2.609a6.323 6.323 0 0 1-2.683.609 6.317 6.317 0 0 1-2.651-.595v2.595a.669.669 0 0 1-.443.628l-6.68 2.385a3.34 3.34 0 0 0-2.211 3.139v2.515h15.333v1.333h-16a.667.667 0 0 1-.667-.667v-3.181a4.676 4.676 0 0 1 3.096-4.395l6.237-2.228v-2.931c-2.013-1.546-3.349-4.222-3.349-7.265C9.985 7.888 13.274 4 17.318 4c4.044 0 7.333 3.888 7.333 8.667zm-7.334-7.334l-.001.001c-2.835 0-5.21 2.416-5.835 5.651a4.68 4.68 0 0 0 1.835.349c1.745 0 3.815-1.035 4.428-2.215a.665.665 0 0 1 .579-.359.625.625 0 0 1 .592.336c1.139 1.992 2.338 2.624 4.275 2.249l.024-.001c-.512-3.414-2.958-6.011-5.897-6.011zm-6 7.334c0 4.044 2.692 7.333 6 7.333s6-3.289 6-7.332a6.504 6.504 0 0 1-1.113.113c-1.592 0-2.844-.702-3.907-2.181-1.139 1.196-3.147 2.067-4.98 2.067-.714 0-1.36-.11-1.987-.321-.004.108-.013.213-.013.321z' fill='%23CC7B19' fill-rule='nonzero'/%3e %3c/svg%3e",title:(0,v.c)("Parental Controls")}),n.createElement(T,{description:(0,v.c)("Connect your media server to your home automation system"),img:"data:image/svg+xml,%3csvg width='40' height='40' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M9.497 7.438a.688.688 0 1 1-1.375 0 .688.688 0 0 1 1.375 0zm2.75 0a.688.688 0 1 1-1.375 0 .688.688 0 0 1 1.375 0zm2.75 0a.688.688 0 1 1-1.375 0 .688.688 0 0 1 1.375 0zm2.063 18.56v-.001a.688.688 0 1 1 0 1.375H7.438A3.44 3.44 0 0 1 4 23.936v-16.5A3.44 3.44 0 0 1 7.437 4h21.998a3.44 3.44 0 0 1 3.437 3.437v11a.688.688 0 1 1-1.376 0v-7.562H5.374v13.062c0 1.137.924 2.062 2.062 2.062h9.624zM7.435 5.377a2.064 2.064 0 0 0-2.063 2.062V9.5h26.123V7.438a2.064 2.064 0 0 0-2.062-2.062H7.435zM36.654 30.15l.002-.002a.685.685 0 0 1 .252.938l-2.062 3.572a.677.677 0 0 1-.417.32.701.701 0 0 1-.523-.07l-1.092-.632c-.41.3-.852.554-1.317.76v1.274c0 .38-.308.687-.688.687h-4.124a.688.688 0 0 1-.688-.687v-1.268a7.311 7.311 0 0 1-1.337-.762l-1.108.635a.69.69 0 0 1-.937-.252l-2.063-3.572a.688.688 0 0 1 .252-.94l1.094-.634a6.328 6.328 0 0 1 .001-1.535l-1.094-.632a.687.687 0 0 1-.25-.94l2.063-3.572a.69.69 0 0 1 .937-.252l1.105.635c.418-.3.866-.555 1.336-.762v-1.274c0-.38.308-.687.688-.687h4.124c.38 0 .688.308.688.687v1.274c.464.206.905.46 1.316.759l1.089-.632a.679.679 0 0 1 .523-.07.69.69 0 0 1 .417.32l2.063 3.572c.19.33.077.75-.252.94l-1.096.634c.059.51.06 1.024 0 1.534l1.098.634zm-2.656 3.226l1.373-2.379-.907-.524a.687.687 0 0 1-.331-.72c.062-.336.094-.673.094-1.003a5.5 5.5 0 0 0-.095-1.002.685.685 0 0 1 .33-.721l.907-.524-1.374-2.38-.895.521a.69.69 0 0 1-.792-.073 5.847 5.847 0 0 0-1.74-1.004.687.687 0 0 1-.446-.644v-1.048h-2.75v1.048a.696.696 0 0 1-.447.648c-.666.247-1.29.603-1.756 1.003a.687.687 0 0 1-.789.074l-.912-.525-1.377 2.383.904.524c.25.146.383.433.331.719a5.452 5.452 0 0 0-.098 1.002c0 .336.033.672.096 1.002a.687.687 0 0 1-.333.72l-.904.523 1.376 2.383.916-.525a.686.686 0 0 1 .789.075c.466.4 1.09.755 1.754 1.003.27.1.449.357.448.644v1.048h2.75v-1.048c0-.287.18-.544.45-.644a5.744 5.744 0 0 0 1.737-1.004.69.69 0 0 1 .792-.073l.899.52zm-5.272-8.064a3.44 3.44 0 0 1 3.437 3.437 3.44 3.44 0 0 1-3.437 3.437 3.44 3.44 0 0 1-3.437-3.437 3.44 3.44 0 0 1 3.437-3.437zm0 5.5a2.064 2.064 0 0 0 2.063-2.063 2.064 2.064 0 0 0-2.063-2.062 2.064 2.064 0 0 0-2.062 2.062c0 1.137.925 2.062 2.062 2.062z' fill='%23CC7B19' fill-rule='nonzero'/%3e %3c/svg%3e",title:(0,v.c)("Webhooks")}),n.createElement(T,{description:(0,v.c)("See the play history, bandwidth, and top users on your media server"),img:"data:image/svg+xml,%3csvg width='40' height='40' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.708 14.667a5.34 5.34 0 0 1-5.333-5.333 5.339 5.339 0 0 1 5.333-5.333 5.339 5.339 0 0 1 5.333 5.333 5.339 5.339 0 0 1-5.333 5.333zm0-9.334c-2.205 0-4 1.795-4 4s1.795 4 4 4 4-1.795 4-4-1.795-4-4-4zM20.041 16c.37 0 .667.299.667.667 0 4.737-1.695 8.492-4.667 10.377v8.289a.667.667 0 0 1-.667.667h-5.333a.667.667 0 0 1-.667-.667v-8.289c-2.972-1.884-4.667-5.638-4.667-10.377 0-.368.299-.667.667-.667h14.667zm-7.28 1.333h-.108l-.589 7.081.643.643.643-.643-.589-7.081zm2.284 8.754l-.001-.001c2.612-1.485 4.166-4.654 4.317-8.753h-5.264l.608 7.279a.668.668 0 0 1-.193.527l-1.333 1.333a.669.669 0 0 1-.472.195.654.654 0 0 1-.469-.196l-1.333-1.333a.67.67 0 0 1-.193-.527l.607-7.277H6.055c.151 4.1 1.705 7.268 4.316 8.753.208.119.337.34.337.58v8h4v-8c0-.24.129-.461.337-.58zM35.333 5.333c.368 0 .667.299.667.667v18.667a.667.667 0 0 1-.667.667H22.666a.667.667 0 0 1 0-1.334h12V6.667H21.333a.667.667 0 0 1 0-1.334h14zM23.017 20.541v-.002a.666.666 0 0 1-.392-.856l2.5-6.717a.67.67 0 0 1 .385-.392.68.68 0 0 1 .548.031l3.389 1.772 1.752-5.257a.666.666 0 1 1 1.264.423l-2 6a.67.67 0 0 1-.383.408.674.674 0 0 1-.557-.028l-3.413-1.785-2.236 6.011a.669.669 0 0 1-.857.392z' fill='%23CC7B19' fill-rule='nonzero'/%3e %3c/svg%3e",title:(0,v.c)("Server Dashboard")}),n.createElement(T,{description:(0,v.c)("Sweet Fades, Loudness Leveling, Lyrics, and more"),img:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3e %3cg fill='%23CC7B19' transform='translate(4 4)'%3e %3cpath d='M12.532 15.272C11.232 16.572 11.232 18.688 12.532 19.987 13.163 20.616 13.999 20.962 14.889 20.962 15.779 20.962 16.616 20.615 17.246 19.987 18.546 18.687 18.546 16.571 17.246 15.272 15.985 14.015 13.793 14.015 12.531 15.272L12.532 15.272zM16.304 19.044C15.549 19.799 14.231 19.799 13.476 19.044 12.696 18.264 12.696 16.995 13.476 16.215 13.853 15.838 14.356 15.631 14.891 15.631 15.426 15.631 15.927 15.838 16.306 16.215 17.083 16.995 17.083 18.264 16.305 19.044L16.304 19.044zM5.932 22.815C5.672 22.555 5.249 22.555 4.989 22.815 4.729 23.075 4.729 23.498 4.989 23.758L8.76 27.529C8.891 27.66 9.061 27.724 9.232 27.724 9.403 27.724 9.573 27.659 9.704 27.529 9.964 27.269 9.964 26.846 9.704 26.586L5.932 22.815z'/%3e %3cpath d='M31.461%2c5.333 L32.322%2c4.472 C32.582%2c4.212 32.582%2c3.789 32.322%2c3.529 L28.989%2c0.196 C28.729%2c-0.064 28.306%2c-0.064 28.046%2c0.196 L27.185%2c1.057 L26.324%2c0.196 C26.064%2c-0.064 25.641%2c-0.064 25.381%2c0.196 C25.121%2c0.456 25.121%2c0.879 25.381%2c1.139 L26.242%2c2 L25.185%2c3.057 L24.324%2c2.196 C24.064%2c1.936 23.641%2c1.936 23.381%2c2.196 C23.121%2c2.456 23.121%2c2.879 23.381%2c3.139 L24.242%2c4 L22.714%2c5.528 C22.454%2c5.788 22.454%2c6.211 22.714%2c6.471 L22.909%2c6.667 L18.428%2c11.148 C17.304%2c10.475 16.088%2c10.121 14.88%2c10.121 C12.105%2c10.121 9.903%2c11.912 9.307%2c14.554 C5.694%2c14.01 2.802%2c15.493 1.576%2c18.449 C0.253%2c21.642 1.247%2c25.669 4.048%2c28.47 C5.985%2c30.407 8.54%2c31.518 11.057%2c31.518 C13.325%2c31.518 15.354%2c30.617 16.625%2c29.046 C17.5%2c27.963 18.402%2c26.095 17.962%2c23.209 C19.718%2c22.808 21.155%2c21.668 21.883%2c20.064 C22.72%2c18.219 22.523%2c16.023 21.37%2c14.092 L25.851%2c9.611 L26.046%2c9.806 C26.306%2c10.066 26.729%2c10.066 26.989%2c9.806 L28.517%2c8.278 L29.378%2c9.139 C29.51%2c9.268 29.681%2c9.334 29.851%2c9.334 C30.021%2c9.334 30.192%2c9.269 30.323%2c9.139 C30.583%2c8.879 30.583%2c8.456 30.323%2c8.196 L29.46%2c7.333 L30.517%2c6.276 L31.378%2c7.137 C31.509%2c7.268 31.679%2c7.333 31.85%2c7.333 C32.021%2c7.333 32.191%2c7.268 32.322%2c7.138 C32.582%2c6.878 32.582%2c6.455 32.322%2c6.195 L31.459%2c5.332 L31.461%2c5.333 Z M26.519%2c8.391 L26.324%2c8.196 C26.064%2c7.936 25.641%2c7.936 25.381%2c8.196 L20.048%2c13.529 C19.82%2c13.757 19.788%2c14.116 19.972%2c14.381 C21.119%2c16.029 21.38%2c17.949 20.669%2c19.514 C20.033%2c20.917 18.736%2c21.823 17.11%2c22.005 C16.923%2c22.026 16.753%2c22.125 16.643%2c22.278 C16.532%2c22.43 16.492%2c22.623 16.532%2c22.806 C17.001%2c24.994 16.673%2c26.862 15.587%2c28.209 C14.571%2c29.466 12.92%2c30.186 11.056%2c30.186 C8.889%2c30.186 6.677%2c29.217 4.989%2c27.529 C2.565%2c25.105 1.688%2c21.662 2.806%2c18.961 C3.645%2c16.936 5.482%2c15.776 7.846%2c15.776 C8.435%2c15.776 9.063%2c15.847 9.71%2c15.985 C9.894%2c16.02 10.087%2c15.985 10.239%2c15.873 C10.391%2c15.764 10.491%2c15.594 10.512%2c15.406 C10.771%2c13.081 12.565%2c11.455 14.877%2c11.455 C15.982%2c11.455 17.108%2c11.832 18.134%2c12.546 C18.398%2c12.731 18.757%2c12.698 18.986%2c12.47 L24.319%2c7.137 C24.579%2c6.877 24.579%2c6.454 24.319%2c6.194 L24.124%2c5.999 L28.515%2c1.608 L30.906%2c3.999 L26.515%2c8.39 L26.519%2c8.391 Z'/%3e %3c/g%3e %3c/svg%3e",title:(0,v.c)("Premium Music Magic")}),n.createElement("div",{className:"PlexPassModalContent-moreFeatures-bRy2FB"},n.createElement(S.c,{className:"PlexPassModalContent-link-g5YUvW",target:"_self",to:i},(0,v.c)("...plus more exclusive features!")))),n.createElement(E.c,{className:"PlexPassModalContent-footer-ZCY4ih ModalFooter-modalFooter-IDP5sZ"},c?n.createElement("div",{className:"PlexPassModalContent-spinnerContainer-dky0KZ"},n.createElement(O.c,null)):null,n.createElement("div",{className:f()("PlexPassModalContent-plansContainer-KFjXra",c&&"PlexPassModalContent-isPlansPending-aAkb00")},!c&&l?a.map((e=>n.createElement(P.c,F(U({key:e.id},t),{action:s.Tx,plan:e.id}),n.createElement(b.c,{className:D,kind:C.ac,size:o.OM,target:"_self",to:h.c.join(r,{plan:e.id,continue:window.location.href})},e.formattedPrice,"  ",e.name)))):null,!c&&d?n.createElement(P.c,F(U({},t),{action:s.Tx,plan:"unknown"}),n.createElement(b.c,{className:D,kind:C.ac,size:o.OM,target:"_self",to:r},(0,v.c)("Subscribe"))):null)))};var _=Object.defineProperty,W=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class G extends n.Component{UNSAFE_componentWillMount(){this.props.isSignedIn&&this.props.fetchPlans()}UNSAFE_componentWillReceiveProps(e){e.isSignedIn&&e.isSignedIn!==this.props.isSignedIn&&e.fetchPlans()}render(){return n.createElement(V,((e,t)=>{for(var r in t||(t={}))B.call(t,r)&&z(e,r,t[r]);if(W)for(var r of W(t))H.call(t,r)&&z(e,r,t[r]);return e})({},this.props))}}const q=(0,d.Ul)((function(){return(0,u.M3)(((e,{origin:t})=>t),p.c,((e,t)=>{const r=t.desktop,n={utm_source:"app.plex.tv",utm_medium:"app",utm_campaign:"PP_in-app-upsell_01"};return e&&(n.utm_content=e),{isSignedIn:t.isSignedIn,plans:r.plans,isPlansPending:r.isPlansPending,isPlansPopulated:r.isPlansPopulated,plansError:r.plansError,subscribeUrl:h.c.join((0,m.ci)("/plex-pass/purchase"),n),infoUrl:(0,m.ci)("/plex-pass")}}))}),{fetchPlans:y.uU})(G);var K=Object.defineProperty,Q=Object.defineProperties,$=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class ee extends n.Component{constructor(){var e,t;super(...arguments),t=()=>{var e,t;(0,i.WI)("metrics").trackClick((e=((e,t)=>{for(var r in t||(t={}))X.call(t,r)&&Z(e,r,t[r]);if(Y)for(var r of Y(t))J.call(t,r)&&Z(e,r,t[r]);return e})({},this.props.metricsProperties),t={page:a._m,action:s.cx},Q(e,$(t)))),this.props.onModalClose()},Z(this,"symbol"!=typeof(e="onModalClose")?e+"":e,t)}shouldComponentUpdate(e,t){return(0,c.c)(this,e,t)}render(){const{origin:e,isOpen:t,metricsProperties:r}=this.props;return n.createElement(l.c,{isOpen:t,metricsPage:a._m,metricsProperties:r,size:o.OM,onModalClose:this.onModalClose},n.createElement(q,{metricsProperties:r,origin:e,onModalClose:this.onModalClose}))}}const te=ee},84632:(e,t,r)=>{"use strict";r.d(t,{c:()=>y});var n=r(3268),i=r.n(n),s=r(11504),a=(r(79268),r(50492)),o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t,r)=>(m(e,"symbol"!=typeof t?t+"":t,r),r);const y=function(e,t){var r;const{isUpdatingPropName:n,errorPropName:o,clearDirtyOnChangePropName:y}=t;return r=class extends s.Component{constructor(e,t){super(e,t),h(this,"onFormChange",((e,t)=>{this.props.onFormChange&&this.props.onFormChange(e),this.setState({isDirty:JSON.stringify(e)!==JSON.stringify(t)})})),this.state={isDirty:!1}}UNSAFE_componentWillReceiveProps(e){let t=!1;y&&(t=this.props[y]!==e[y]);const r=this.props[n]&&!e[n]&&null===e[o];this.state.isDirty&&(t||r)&&this.setState({isDirty:!1})}render(){return s.createElement(e,(t=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({isDirty:this.state.isDirty},this.props),r={onFormChange:this.onFormChange},c(t,l(r))));var t,r}},h(r,"propTypes",{onFormChange:i().func}),h(r,"displayName",`DirtyAware(${(0,a.c)(e)})`),h(r,"WrappedComponent",e),r}},19912:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(11504),i=r(6968),s=r(50492),a=r(51268),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t,r)=>(u(e,"symbol"!=typeof t?t+"":t,r),r);const m={[i._u]:!0,[i.s9]:!0,[i.OO]:!0,[i.Yb]:!0,[i.yc]:!0},h=function(e){var t;return t=class extends n.Component{constructor(e,t){super(e,t),p(this,"_isMouseDown"),p(this,"onKeyDown",(e=>{const{pressedModifierKeys:t}=this.state;m[e.which]&&-1===t.indexOf(e.which)&&this.setState({pressedModifierKeys:t.concat(e.which)})})),p(this,"onKeyUp",(e=>{const{pressedModifierKeys:t}=this.state,r=t.indexOf(e.which);r>-1&&this.setState({pressedModifierKeys:t.slice(0,r).concat(t.slice(r+1))})})),p(this,"onMouseDown",(e=>{this._isMouseDown=!0})),p(this,"onMouseUp",(e=>{this._isMouseDown=!1})),p(this,"onFocusChange",(e=>{this.state.pressedModifierKeys.length&&this.setState({pressedModifierKeys:[]}),this._isMouseDown=!1})),p(this,"onMouseEnter",(e=>{const{selectionType:t,activeSelectionType:r}=this.props;this._isMouseDown&&r&&r===t&&this.onSelectPress(e)})),p(this,"onSelectPress",(e=>{const{selectionID:t,selectionType:r,isSelected:n,onSelectItem:i}=this.props;n||i({id:t,type:r,isRangeSelect:e.shiftKey})})),p(this,"onDeselectPress",(e=>{const{selectionID:t,isSelected:r,onDeselectItem:n}=this.props;r&&n({id:t})})),this.state={pressedModifierKeys:[]}}componentDidMount(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("dragstart",this.onFocusChange),document.addEventListener("contextmenu",this.onFocusChange),window.addEventListener("blur",this.onFocusChange)}shouldComponentUpdate(e,t){return(0,a.c)(this,e,t)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("dragstart",this.onFocusChange),document.removeEventListener("contextmenu",this.onFocusChange),window.removeEventListener("blur",this.onFocusChange)}render(){const t=this.props,{selectionType:r,activeSelectionType:i,isSelected:s}=t,a=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["selectionType","activeSelectionType","isSelected"]),{pressedModifierKeys:o}=this.state,p=!!i;return n.createElement(e,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({hasActiveSelection:p,isConflictingTypeSelected:p&&i!==r,isModifierKeyPressed:o.length>0,isOtherItemSelected:p&&!s,isSelected:s,onDeselectPress:this.onDeselectPress,onMouseEnter:this.onMouseEnter,onSelectPress:this.onSelectPress},a))}},p(t,"displayName",`Selectable(${(0,s.c)(e)})`),p(t,"WrappedComponent",e),p(t,"defaultProps",{disableSelection:!1}),t}},2608:(e,t,r)=>{"use strict";r.d(t,{AJ:()=>a,YL:()=>o,cD:()=>s,o1:()=>i,w3:()=>n});const n="RECORDING_PRIORITY_SUBSCRIPTION",i="PLAY_QUEUE_ITEM",s="PLAYLIST_ITEM",a="ALBUM_ITEM",o="SOURCE_ITEM"},72952:(e,t,r)=>{"use strict";function n(e,t){const{x:r,y:n}=e,i=`translate3d(${r}px, ${n}px, 0)`;return{WebkitTransform:i,msTransform:i,transform:i,width:t?`${t}px`:"100%"}}r.d(t,{c:()=>n})},47748:(e,t,r)=>{"use strict";r.d(t,{M:()=>i,c:()=>s});var n=r(43108),i=(e=>(e.Dvr="dvr",e.Episode="episode",e.Home="home",e.Movies="movies",e.Music="music",e.Photos="photos",e.Playlists="playlists",e.Tv="tv",e.Videos="videos",e.Shared="shared",e.Watchlist="watchlist",e))(i||{});function s(e,t){return t.isCloud?null==e?void 0:e.providerSourceTitle:t.isEmbedded?void 0:t.isFullOwnedServer?e?e.serverFriendlyName:void 0:e?`${e.serverSourceTitle}  ${e.serverFriendlyName}`:(0,n.c)(t)}},52200:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504);function i(e,t){return e&&e[t]?e[t].split(","):[]}function s(e,t,r){const s=i(e,t),a=i(e,r),[o,c]=(0,n.useState)(s),[l,d]=(0,n.useState)(a);return{initialAllowTags:s,initialExcludeTags:a,allowTags:o,excludeTags:l,onAllowTagsChange:(0,n.useCallback)((e=>{c(e)}),[]),onExcludeTagsChange:(0,n.useCallback)((e=>{d(e)}),[])}}},27768:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(11504),i=r(87440);function s(){const e=(0,i.c)(),[t,r]=(0,n.useState)(!1),s=(0,n.useCallback)((()=>{r(!t)}),[t,r]),a=(0,n.useCallback)((()=>{r(!1)}),[r]);return{menuButtonID:e,isMenuOpen:t,onMenuButtonPress:s,onMenuClose:a}}},42466:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(11504);function i(e){const[t,r]=(0,n.useState)(!1);return{isOpen:t,onOpen:(0,n.useCallback)((()=>r(!0)),[]),onClose:(0,n.useCallback)((()=>r(!1)),[]),onConfirm:(0,n.useCallback)((()=>{r(!1),e&&e()}),[e])}}},49056:(e,t,r)=>{"use strict";r.d(t,{g:()=>o,s:()=>c});var n=r(99112),i=r(32364);function s(){return!i.c.isHostedHttps||!!n.c.allowMixedContent}function a(e){return e.isFullServer&&!!e.presence&&!e.httpsRequired}function o(e){return!s()&&a(e)}function c(e){const t=e.hasHttpsConnections&&!e.hasFallbackConnections;return s()&&a(e)&&t}},93864:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(13120),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e};function d(e=40,t=10,r){return(0,n.cp)(l({direction:n.Mn,columns:1,overscan:t,getCellWidth:e=>e.innerViewportWidth,getCellHeight:()=>e},r))}},13796:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(81807),i=r(49579),s=r(95156);function a({type:e,aspectRatio:t,titleCount:r,context:a}){const o=parseInt(s.c.posterTitleHeight,10);let c,l,d,u,p,m=parseInt(s.c.posterTitlePadding,10);return(0,n.c)(a)?(c=Math.max(2,r-1),l=300,d=200,p=2,u=6,m*=2):(c=e===i.ee?r+3:r,d=t>1?180:80,l=t>1?240:120,p=t>1?2:3,u=t>1?8:11),{titleHeight:c?c*o+m:0,minCellWidth:d,preferredCellWidth:l,minColumns:p,maxColumns:u}}},4968:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(11504),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&c(e,r,t[r]);return e};function d(e,t){return function(r){return n.createElement(t,l(l({},e),r))}}},34228:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(95156);const i=parseFloat(n.c.prePlayPosterWidthRatio,10),s=parseInt(n.c.prePlayPosterMinWidth,10),a=parseInt(n.c.prePlayPosterMaxWidth,10),o=function(e,t){const r=-1*t+1,n=e*(r/30+i);return Math.max(Math.min(n,a+30*r),s)}},17544:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(83052),i=r(12612);function s(e,t=""){const{type:r,title:s,parentTitle:a,grandparentTitle:o,index:c,parentIndex:l,originallyAvailableAt:d}=e;switch(r){case i.EPISODE:{let e=`${o} ${t} ${(0,n.c)({seasonIndex:l,episodeIndex:c,date:d,noLeadingZero:!0,separator:"  "})}`;return s&&(e+=` ${t} ${s}`),e}case i.SEASON:case i.ec:return`${a} ${t} ${s}`;case i.UJ:return`${o} ${t} ${a} ${t} ${s}`;default:return s}}},51988:(e,t,r)=>{"use strict";r.d(t,{AP:()=>D,Ar:()=>A,EH:()=>k,EX:()=>L,Q$:()=>O,QP:()=>w,Qb:()=>x,Qt:()=>M,S_:()=>T,a2:()=>P,cp:()=>U,g5:()=>j,gR:()=>S,qC:()=>N});var n=r(95720),i=r.n(n),s=r(99112),a=r(90044),o=r(74964),c=r(35860),l=r(42728),d=r(64620),u=r(79268),p=r(79084),m=r(12612),h=r(1868),y=r(27816),g=r(40352),f=r(42336);const v={showPlay:S,showPlayVersion:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!S({server:e,provider:t,stableUser:r,metadataItem:n})&&(t.isLibraryProvider&&n.Media&&n.Media.length>1)},showPlayAll:S,showShuffle:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!n.radio&&(S({server:e,provider:t,stableUser:r,metadataItem:n})&&!!t.features.playqueue)},showQueue:P,showPlayTrailer:I,showPlayPlexMix:E,showQueuePlexMix:function({server:e,provider:t,stableUser:r,metadataItem:n}){return E({server:e,provider:t,stableUser:r,metadataItem:n})},showPlayMusicVideo:I,showPlayRadio:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!n.hasRadioStation},showPlayArtistTV:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!n.hasArtistTVStation},showAddToWatchlist:function({provider:e,stableUser:t}){return!!(e.features.actions&&e.features.actions.addToWatchlist&&(0,y._)(t,e.features.actions.addToWatchlist))},showAddToPicks:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!(r.features[l.w5]&&t.features.actions&&t.features.actions.pick)},showAddToPlaylist:w,showAddToSaved:function({server:e,provider:t,stableUser:r,metadataItem:n}){if(!t)return!1;const i=t.features.actions.save;return!(!i||!(0,y._)(r,i))&&null!=n.saved},showAddToLibrary:function({server:e,provider:t,stableUser:r,metadataItem:n}){if(!t)return;const i=n.type===m.UJ||n.type===m.ec||n.type===m.iI,s=c._u(t.identifier,c.y6),a=!!r.features[l.sv],o=(0,y._)(r,{requires:d.W});return i&&s&&a&&o},showFavorite:O,showUnfavorite:M,showMarkPlayed:T,showMarkUnplayed:D,showSettings:function({server:e,provider:t,stableUser:r,metadataItem:n}){const{preferences:i}=n;return!t.features.manage&&null!=i},showEdit:k,showModifySmartPlaylist:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!k({server:e,provider:t,stableUser:r,metadataItem:n})&&!!n.smart},showRefresh:x,showAnalyze:A,showFixMatch:R,showMatch:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!k({server:e,provider:t,stableUser:r,metadataItem:n})&&(!!n.guid&&!R({server:e,provider:t,stableUser:r,metadataItem:n}))},showUnmatch:function({server:e,provider:t,stableUser:r,metadataItem:n}){return R({server:e,provider:t,stableUser:r,metadataItem:n})},showSplitApart:function({server:e,provider:t,stableUser:r,metadataItem:n}){if(!k({server:e,provider:t,stableUser:r,metadataItem:n}))return!1;let s;return s=m.Av(n.type)?n.Location:i().filter(n.Media,(e=>!e.proxyType)),s.length>1},showSyncDownload:function({server:e,provider:t,metadataItem:r}){if(!s.c.allowSyncDownload)return!1;if(!t)return!1;if(!c.y2.includes(t.identifier))return!1;if(r.isPlaylist&&r.playlistType===h.Ww)return!1;if(r.isDownloaded&&!r.downloadSubscriptionID)return!1;if(!r.hasOwnProperty("guid"))return!1;if(r.remoteMedia)return!1;const n=t.features[a.c.SUBSCRIBE],i=(null==n?void 0:n.flavor)===o.Qv;return t.isLibraryProvider?e.allowSync&&i:i},showOptimize:N,showDownload:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!s.c.allowDirectDownload&&(!!t.protocols.download&&!n.isExtra&&!n.remoteMedia)},showShare:function({server:e,provider:t,stableUser:r,metadataItem:n}){return e.isFullOwnedServer&&t.isLibraryProvider&&!n.isExtra&&!n.remoteMedia},showDelete:L,showDeleteVersion:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!k({server:e,provider:t,stableUser:r,metadataItem:n})&&(!!e.allowMediaDeletion&&i().filter(n.Media,(e=>!!e.proxyType)).length>0)},showViewPlayHistory:function({server:e,provider:t,stableUser:r,metadataItem:n}){return e.isFullOwnedServer&&!(0,g.c)(e)},showWatchTogether:function({server:e,provider:t,stableUser:r,metadataItem:n}){const i=!!r.features[l.s5],s=c._u(t.identifier,[c.Qh,c.Sg]),a=n.isExtra;return i&&s&&!a},showGetInfo:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!t&&t.isLibraryProvider&&!n.isExtra&&!n.indirect},showSelect:j},b={[m.MOVIE]:["showPlay","showPlayVersion","showQueue","showPlayTrailer","showAddToWatchlist","showAddToPlaylist","showMarkPlayed","showMarkUnplayed","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showWatchTogether","showGetInfo","showSelect"],[m.M7]:["showPlay","showPlayAll","showShuffle","showQueue","showPlayTrailer","showAddToPicks","showAddToWatchlist","showAddToPlaylist","showAddToSaved","showMarkPlayed","showMarkUnplayed","showEdit","showSettings","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showShare","showDelete","showViewPlayHistory","showSelect"],[m.SEASON]:["showPlay","showPlayAll","showShuffle","showQueue","showAddToPlaylist","showMarkPlayed","showMarkUnplayed","showEdit","showAnalyze","showSyncDownload","showOptimize","showShare","showDelete","showViewPlayHistory","showSelect"],[m.EPISODE]:["showPlay","showPlayVersion","showQueue","showAddToPlaylist","showMarkPlayed","showMarkUnplayed","showEdit","showRefresh","showAnalyze","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showWatchTogether","showGetInfo","showSelect"],[m.iI]:["showPlay","showShuffle","showPlayRadio","showPlayArtistTV","showQueue","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.ec]:["showPlay","showShuffle","showQueue","showAddToPicks","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.UJ]:["showPlay","showQueue","showPlayPlexMix","showQueuePlexMix","showPlayMusicVideo","showAddToPlaylist","showAddToSaved","showAddToLibrary","showMarkPlayed","showMarkUnplayed","showEdit","showAnalyze","showSyncDownload","showDownload","showShare","showDelete","showViewPlayHistory","showGetInfo","showSelect"],[m.iI]:["showPlay","showShuffle","showPlayRadio","showPlayArtistTV","showQueue","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.ec]:["showPlay","showShuffle","showQueue","showAddToPicks","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.UJ]:["showPlay","showQueue","showPlayPlexMix","showQueuePlexMix","showPlayMusicVideo","showAddToPlaylist","showAddToSaved","showAddToLibrary","showMarkPlayed","showMarkUnplayed","showEdit","showAnalyze","showSyncDownload","showDownload","showShare","showDelete","showViewPlayHistory","showGetInfo","showSelect"],[m.Co]:["showPlay","showShuffle","showAddToPlaylist","showEdit","showAnalyze","showShare","showSelect"],[m.Ww]:["showPlay","showAddToPlaylist","showFavorite","showUnfavorite","showEdit","showAnalyze","showDownload","showShare","showDelete","showGetInfo","showSelect"],[m.YH]:["showPlay","showPlayVersion","showQueue","showPlayTrailer","showAddToPlaylist","showAddToSaved","showMarkPlayed","showMarkUnplayed","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showWatchTogether","showGetInfo","showSelect"],[m.yy]:["showDelete","showEdit","showPlay","showQueue","showShuffle","showAddToSaved","showSyncDownload","showShare","showSelect","showEdit","showModifySmartPlaylist"],[m.sl]:["showPlay","showQueue","showShuffle","showAddToPlaylist","showEdit","showDelete"]};function S({server:e,provider:t,stableUser:r,metadataItem:n}){return(0,f.c)(e,t,r.features,n)}function P({server:e,provider:t,stableUser:r,metadataItem:n}){const i=S({server:e,provider:t,stableUser:r,metadataItem:n}),s=n.isExtra&&n.isPremium;return i&&!!t.features.playqueue&&!s}function I({server:e,provider:t,stableUser:r,metadataItem:n}){return!!n.primaryExtraKey}function E({server:e,provider:t,stableUser:r,metadataItem:n}){return!(!n.related||!n.related.find((e=>/similarPlaylist/.test(e))))}function w({server:e,provider:t,stableUser:r,metadataItem:n}){if(!t)return!1;const i=t.features.playlist;return!(!i||!(0,y._)(r,i))&&!(n.isExtra&&n.isPremium||(0,g.c)(e))}function C({provider:e,stableUser:t,metadataItem:r}){return!(!e.features.actions.rate||m.ue(r.type)||r.isFolder)}function O({server:e,provider:t,stableUser:r,metadataItem:n}){return C({provider:t,stableUser:r,metadataItem:n})&&!(0,p.cp)(n)}function M({server:e,provider:t,stableUser:r,metadataItem:n}){return C({provider:t,stableUser:r,metadataItem:n})&&(0,p.cp)(n)}function T({server:e,provider:t,stableUser:r,metadataItem:n}){return!(!(t&&t.features.actions&&t.features.actions.scrobble&&t.features.actions.scrobble.key)||t.protocols.livetv||n.type===m.UJ||null!=n.saved&&!n.saved&&!n.viewOffset||n.isExtra)&&(m.Av(n.type)?n.unviewedLeafCount>0:!n.viewCount||!!n.viewOffset)}function D({server:e,provider:t,stableUser:r,metadataItem:n}){return!(!(t&&t.features.actions&&t.features.actions.scrobble&&t.features.actions.scrobble.reverseKey)||t.protocols.livetv||n.type===m.UJ||null!=n.saved&&!n.saved||n.isExtra)&&(m.Av(n.type)?n.viewedLeafCount>0:!!n.viewCount||!!n.viewOffset)}function k({server:e,provider:t,stableUser:r,metadataItem:n}){const{isLibraryItem:i,isPlaylist:s,isExtra:a,isFolder:o,radio:c,readOnly:l}=n,d=i&&!a&&!o&&!c;return s?!l:!!(t&&t.features.manage&&d)}function x({server:e,provider:t,stableUser:r,metadataItem:n}){return k({server:e,provider:t,stableUser:r,metadataItem:n})}function A({server:e,provider:t,stableUser:r,metadataItem:n}){return!n.indirect&&!n.remoteMedia&&k({server:e,provider:t,stableUser:r,metadataItem:n})}function R({server:e,provider:t,stableUser:r,metadataItem:n}){return!!k({server:e,provider:t,stableUser:r,metadataItem:n})&&!(!n.guid||/(local|none):\/\//.test(n.guid))}function N({server:e,provider:t,stableUser:r,metadataItem:n}){return!!k({server:e,provider:t,stableUser:r,metadataItem:n})&&!(!e.transcoderVideo||!e.backgroundProcessing)}function L({server:e,provider:t,stableUser:r,metadataItem:n}){return!!k({server:e,provider:t,stableUser:r,metadataItem:n})&&!!(n.isPlaylist||n.type===m.sl||n.remoteMedia||e.allowMediaDeletion)}function j({server:e,provider:t,stableUser:r,metadataItem:n}){return!n.radio&&t.isLibraryProvider&&!n.isFolder}function U({server:e,provider:t,stableUser:r,metadataItem:n}){const{type:s}=n,a=b[s];return a?a.reduce(((a,o)=>{const c=v[o];return(0,u.c)(i().isFunction(c),`getMetadataActionProps: Invalid action, ${o}, for ${s}`),a[o]=!!(e&&t&&n)&&c({server:e,provider:t,stableUser:r,metadataItem:n}),a}),{}):{}}},33356:(e,t,r)=>{"use strict";r.d(t,{c:()=>l,o:()=>c});var n=r(12612),i=r(85612),s=r(49852);function a(e){return e.thumb||e.parentThumb||e.grandparentThumb}function o(e){return e.art||e.parentArt||e.grandparentArt}function c(e,t,r){if(r)switch(r){case i.I9:switch(e){case n.SEASON:case n.EPISODE:case n.ec:case n.UJ:return t.thumb}break;case i.Su:case i.s5:switch(e){case n.MOVIE:return o(t);case n.EPISODE:return o(t)||t.thumb}break;case i.KW:switch(e){case n.MOVIE:return o(t);case n.EPISODE:return t.thumb||o(t)}break;case i.wH:case i.yy:case i.wp:case i.Ef:if(e===n.EPISODE)return t.thumb}switch(e){case n.MOVIE:case n.M7:return t.thumb;case n.SEASON:return a(t);case n.EPISODE:return t.grandparentThumb;case n.iI:return t.thumb;case n.ec:case n.UJ:return a(t);case n.Ww:case n.Co:case n.YH:return t.thumb;case n.yy:return t.thumb||t.composite;default:return t.thumb}}function l(e,t,r,n,i){const a=null==e?(0,s.K6)(t,r,i):e,o=null==t?(0,s.YF)(e,r,i):t;return{url:c(r,n,i),width:a,height:o}}},59476:(e,t,r)=>{"use strict";r.d(t,{q:()=>ke,c:()=>Ae});var n=r(11504),i=r(35860),s=r(12612),a=r(85612),o=r(49579),c=r(27876),l=r(57864),d=r(83095),u=r(61500),p=r(65348),m=r(85328),h=r(59396);const y=(0,c.Ul)((function(){return(0,l.M3)(m.c,u.c,p.c,d.c,((e,t,r,n)=>e&&r&&e.machineIdentifier!==r.machineIdentifier?{sourceTitle:r.sourceTitle||r.friendlyName}:{}))}))((function(e){const{className:t,sourceTitle:r}=e;return r?n.createElement("span",{className:t},(0,h.c)("from {sourceTitle}",{sourceTitle:r})):null}));var g=r(4659);const f=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),(e=>({attributionLogo:e.attributionLogo})))}))((function(e){const{attributionLogo:t,className:r}=e;return t?n.createElement("span",{className:r},n.createElement("img",{className:"MetadataAttributionLogoTitle-img-iWdQbX",src:t})):null}));var v=r(60680),b=r(51796),S=r(39172),P=r(84840);const I=(0,b.c)((function(){return(0,l.M3)(((e,{metricsContext:t})=>t),p.c,d.c,(0,g.c)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{parentTitle:n.parentTitle,parentRoute:(0,S.c)(t,r,n.parentKey,i)}}))}))((function({className:e,tabIndex:t,parentTitle:r,parentRoute:i}){return n.createElement(P.c,{className:e,route:i,tabIndex:t,title:r})}));var E=r(95720),w=r.n(E),C=r(76648),O=r(12500),M=r(61296);const T=(0,c.Ul)((function(){return(0,l.M3)(O.c,(0,C.c)(),(0,l.M3)((0,g.c)(),(0,C.c)(),((e,t)=>{if(e&&t)return w().findWhere(e.Channel,{id:t.channelID})})),((e,t,r)=>({beginsAt:t&&t.beginsAt,endsAt:t&&t.endsAt,channel:r&&r.tag,timeFormat:e})))}))(M.c);var D=r(48168),k=r(16116);var x=Object.defineProperty,A=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const j=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({attribution:e.attribution})))}))((function(e){var t=e,{className:r,attribution:i}=t,s=((e,t)=>{var r={};for(var n in e)R.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&A)for(var n of A(e))t.indexOf(n)<0&&N.call(e,n)&&(r[n]=e[n]);return r})(t,["className","attribution"]);return n.createElement("span",{className:r},n.createElement("div",{className:"MetadataTitleAttributedLink-container-KBhWLu"},n.createElement(D.c,{attribution:i,className:"MetadataTitleAttributedLink-badge-t9hd1e"}),n.createElement(k.c,((e,t)=>{for(var r in t||(t={}))R.call(t,r)&&L(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&L(e,r,t[r]);return e})({className:"MetadataTitleAttributedLink-title-xasS9B"},s))))})),U=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({childCount:e.childCount,subtype:e.subtype})))}))((function({className:e,childCount:t,subtype:r}){let i;if(null!=t){const e=1===t,n={itemCount:t};i=r===s.MOVIE?e?(0,h.c)("{itemCount} movie",n):(0,h.c)("{itemCount} movies",n):r===s.M7?e?(0,h.c)("{itemCount} show",n):(0,h.c)("{itemCount} shows",n):e?(0,h.c)("{itemCount} item",n):(0,h.c)("{itemCount} items",n)}return n.createElement("span",{className:e},i)}));var F=r(5116),V=r(96516),_=r(88640);const W=(0,c.Ul)((function(){return(0,l.M3)(O.c,(0,V.c)(),((e,t)=>({beginsAt:t&&t.beginsAt,endsAt:t&&t.endsAt,timeFormat:e})))}))((function(e){const{className:t,beginsAt:r,endsAt:i,timeFormat:s}=e,a=(0,_.c)(r,i,{includeMinuteZero:!1,timeFormat:s});return n.createElement("span",{className:t},a)}));var B=r(672);const H=function({className:e,date:t}){return t?n.createElement("span",{className:e},(0,B.c)(t)):null},z=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({addedAt:e.addedAt})))}))((function({className:e,addedAt:t}){return t?n.createElement(H,{className:e,date:1e3*t}):null}));var G=r(78143),q=r(2684);const K=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({extraType:e.extraType})))}))((function({className:e,extraType:t}){const r=q.cp.get(t);return n.createElement("span",{className:e},r?r.title:"")}));var Q=r(64824),$=r(74556);const Y=function({className:e,leafCount:t}){let r;return null!=t&&(r=1===t?(0,h.c)("{itemCount} item",{itemCount:t}):(0,h.c)("{itemCount} items",{itemCount:t})),n.createElement("span",{className:e},r)},X=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({playlistType:e.playlistType,duration:e.duration,leafCount:e.leafCount})))}))((function(e){const{className:t,playlistType:r,duration:i,leafCount:s}=e;return r===Q.Ww?n.createElement(Y,{className:t,leafCount:s}):n.createElement($.c,{className:t,duration:i})})),J=function({className:e,leafCount:t}){let r;return null!=t&&(r=1===t?(0,h.c)("{episodeCount} episode",{episodeCount:t}):(0,h.c)("{episodeCount} episodes",{episodeCount:t})),n.createElement("span",{className:e},r)},Z=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({skipChildren:e.skipChildren,childCount:e.childCount,leafCount:e.leafCount})))}))((function({className:e,skipChildren:t,childCount:r,leafCount:i}){if(t)return n.createElement(J,{className:e,leafCount:i});if(!r)return null;const s=1===r?(0,h.c)("{seasonCount} season",{seasonCount:r}):(0,h.c)("{seasonCount} seasons",{seasonCount:r});return n.createElement("span",{className:e},s)}));var ee=r(61384);const te=(0,b.c)((function(){return(0,l.M3)(((e,{metricsContext:t})=>t),m.c,u.c,(0,g.c)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{title:n.title,index:n.index,route:(0,S.c)(t,r,n.key,i),parentTitle:n.parentTitle,parentIndex:n.parentIndex,parentRoute:n.skipParent?null:(0,S.c)(t,r,n.parentKey,i),originallyAvailableAt:n.originallyAvailableAt}}))}))(ee.c);var re=r(22920),ne=r(17068);const ie=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({year:e.year,editionTitle:e.editionTitle})))}))((function({className:e,year:t,editionTitle:r}){return n.createElement("div",{className:e},t?n.createElement("span",{"data-testid":"metadataYear"},t):null,t&&r?n.createElement(ne.c,{separator:""}):null,r?n.createElement("span",{"data-testid":"metadataEdition"},r):null)}));ie.displayName="MetadataTitleYearAndEditionConnector";const se=ie;var ae=r(50684),oe=Object.defineProperty,ce=(e,t,r)=>(((e,t,r)=>{t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function le(e,t){const r=Math.abs(Date.now()-1e3*e),n=36e5;return r<n?window.setTimeout(t,6e4):r<864e5?window.setTimeout(t,n):void 0}class de extends n.Component{constructor(e,t){super(e,t),ce(this,"timeoutID"),ce(this,"trackTime",(()=>{const{timestamp:e}=this.props,t=(0,ae.c)(e);this.setState({title:t}),this.timeoutID=le(e,this.trackTime)}));const{timestamp:r}=this.props,n=(0,ae.c)(r);this.state={title:n},this.timeoutID=le(r,this.trackTime)}UNSAFE_componentWillReceiveProps(e){if(e.timestamp!==this.props.timestamp){const t=(0,ae.c)(e.timestamp);this.setState({title:t})}}componentWillUnmount(){this.timeoutID&&(this.timeoutID=window.clearTimeout(this.timeoutID))}render(){const{className:e}=this.props,{title:t}=this.state;return n.createElement("span",{className:e},t)}}const ue=de,pe=(0,c.Ul)((function(e,t){return(0,l.M3)((0,g.c)(),((e={})=>({addedAt:e.addedAt})))}))((function({className:e,addedAt:t}){return n.createElement(ue,{className:e,timestamp:t})}));var me=r(63188),he=r(96736),ye=r(40604);const ge=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>{const t=(0,s.GG)(e.type),r=e.Media&&e.Media[0];return{type:t&&t.mediaType,bitrate:r&&r.bitrate}}))}))((function(e){const{className:t,type:r,bitrate:i}=e;if(null==i)return null;const s=r===ye.KI?(0,me.c)(i):(0,he.c)(i);return n.createElement("span",{className:t},s)}));var fe=r(42592);const ve=(0,c.Ul)((function(e,t){return(0,l.M3)((0,g.c)(),((e={})=>({contentRating:e.contentRating})))}))((function({className:e,contentRating:t}){return n.createElement("span",{className:e},(0,fe.c)(t))}));var be=r(65919);const Se=(0,c.Ul)((function(e,t){return(0,l.M3)((0,g.c)(),((e={})=>{const{duration:t}=e;return{duration:t}}))}))($.c),Pe=(0,c.Ul)((function(e,t){return(0,l.M3)((0,g.c)(),((e={})=>({lastViewedAt:e.lastViewedAt})))}))((function({className:e,lastViewedAt:t}){return n.createElement(ue,{className:e,timestamp:t})})),Ie=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>({viewCount:e.viewCount})))}))((function({className:e,viewCount:t}){const r=(t>1?(0,h.c)("{viewCount} Plays",{viewCount:t}):null)||(t>0?(0,h.c)("{viewCount} Play",{viewCount:t}):null)||(0,h.c)("Unplayed");return n.createElement("span",{className:e},r)}));var Ee=r(28220);const we=(0,c.Ul)((function(e,t){return(0,l.M3)((0,g.c)(),((e={})=>{const{originallyAvailableAt:t}=e;return{originallyAvailableAt:t}}))}))(Ee.c);var Ce=r(71264);const Oe=(0,c.Ul)((function(){return(0,l.M3)((0,g.c)(),((e={})=>{const t=e.Media&&e.Media[0];return{videoResolution:t&&t.videoResolution}}))}))((function({className:e,videoResolution:t}){return n.createElement("span",{className:e},(0,Ce.c)(t))}));var Me=r(72788),Te=r(24680);function De(e,t,r){if("mixed"===e)return[];switch(r){case a.wH:case a.KW:case a.yy:case a.QP:if("musicVideo"===t&&"clip"===e)return[k.c,re.c];switch(e){case"episode":return[v.c,G.c];case"clip":return[k.c,z];case"track":return[k.c,re.c]}break;case a.gr:if("participant"===e)return[k.c]}switch(e){case"channels":return[F.c,T];case"movie":return[k.c,se];case"show":return[k.c,Z];case"season":return[I,k.c];case"episode":return[v.c,k.c,te];case"artist":case"photoalbum":case"clip":return[k.c];case"album":return[I,j];case"track":return[v.c,k.c];case"photo":return[F.c];case"extra":return[F.c,K];case"musicVideo":return[v.c,F.c];case"playlist":return[k.c,X];case"collection":return[k.c,U];case"directory":case"genre":case"content":case"channel":return[]}return[F.c]}function ke(e,t,r,n,i,a){const c=t===o.ee,l=t===o.Ww,d=r===s.sl;if(a)return xe(a);if(!c&&!l&&!d)return e;const u=De(r,n,i),p=De(t,n,i),m=e.filter((e=>!p.includes(e)));return u.concat(m)}function xe(e){return e.map((e=>{switch(e){case"attributionLogo":return f;case"episodeIdentifier":case"index":return te;case"grandparentTitle":return v.c;case"parentTitle":return I;case"title":return k.c;default:return()=>null}}))}function Ae(e,t,r={}){const{subtype:n,activeSort:s,isExternal:o,providerEntityID:c,displayFields:l}=r;if(l)return xe(l);const d=De(e,n,t);if(o&&d.push(y),i._u(c,i._0)&&("movie"===e||"episode"===e||"mixed"===e))switch(t){case a.wH:case a.KW:d.push(W);break;case a.QP:break;default:d.push(T)}if(s){const e=function(e){const[t]=e.split(":");switch(t){case"addedAt":return pe;case"duration":return Se;case"lastViewedAt":return Pe;case"originallyAvailableAt":return we;case"rating":case"audienceRating":return be.c;case"userRating":return Me.c;case"viewCount":return Ie;case"mediaBitrate":return ge;case"contentRating":return ve;case"mediaHeight":return Oe;case"year":return Te.c}}(s);e&&!d.includes(e)&&d.push(e)}return d}},10672:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return!(!e||!e.isDownloaded)}},27376:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=function(e){return!(!e||!e.downloadSubscriptionID)}},49852:(e,t,r)=>{"use strict";r.d(t,{Aj:()=>i,K6:()=>c,YF:()=>l,cr:()=>a,eg:()=>s,u2:()=>o});var n=r(85612);const i=1/1.5,s=1,a=16/9;function o(e,t){if(t)switch(t){case n.I9:case n.gr:if("episode"===e)return a;break;case n.Su:case n.s5:return a;case n.KW:switch(e){case"movie":case"episode":return a}break;case n.wH:case n.yy:case n.wp:case n.Ef:if("episode"===e)return a;break;case n.P7:if("clip"===e)return s;break;case n.ET:case n.QP:if("clip"===e)return i}switch(e){case"channels":case"artist":case"album":case"track":case"photo":case"photoalbum":case"content":case"channel":case"hub":case"list":default:return s;case"movie":case"show":case"season":case"episode":case"collection":case"mixed":return i;case"clip":case"extra":case"musicVideo":case"platform":case"directory":case"genre":return a}}function c(e,t,r){const n=o(t,r);return Math.round(e*n)}function l(e,t,r){const n=o(t,r);return Math.round(e/n)}},32636:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&o(e,r,t[r]);if(i)for(var r of i(t))a.call(t,r)&&o(e,r,t[r]);return e};function l(e,t,r){return c(c(c({},e),r),t)}},72884:(e,t,r)=>{"use strict";r.d(t,{MOSAIC:()=>s,POSTER:()=>i,SIMPLE_SUMMARY:()=>o,SUMMARY:()=>c,TABLE:()=>a,Uv:()=>l,WU:()=>u,cT:()=>d,gF:()=>p,uk:()=>m});var n=r(3268);const i="poster",s="mosaic",a="table",o="simpleSummary",c="summary",l="epgEpisode",d="sharedItems";function u(e,t){return p(t)||m(e)}function p(e){return e===i||e===s}function m(e){return e.length>1}r.n(n)().oneOf([i,s,a,o,c,l,d])},17600:(e,t,r)=>{"use strict";r.d(t,{OK:()=>n,Q7:()=>s,_Y:()=>i});const n="calendar",i="agenda",s=[n,i]},38356:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(96504);const i="#!/downloads";function s(e){return n.c.join(i,e)}},51792:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(12612),i=r(49956),s=r(17544),a=r(55383);function o(e,t,r){let o=`metadataItemID=${t.ratingKey}`;return r&&(o+=`&viewedAt=${(0,i.GV)(r)}`),(0,a.c)(e,{filters:o,filterTitle:(0,s.c)(t),activeTimePeriod:r,isParentType:(0,n.Av)(t.type)})}},55383:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(96504);function i(e,t){return n.c.join(`#!/server/${encodeURIComponent(e)}/playHistory`,t)}},39172:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(40604),i=r(96504),s=r(66436);function a(e,t,r,a,o){if(!e||!t||!r)return;const c=(0,s.c)(e,t),l=encodeURIComponent(r),d={[n.Ww]:"album",[n.im]:"playlist",[n.KI]:"playlist"},u=`#!${c}/${o?d[o]:"details"}?key=${l}`;return i.c.join(u,a)}},69468:(e,t,r)=>{"use strict";function n(e,t,r){return`#!/settings/server/${encodeURIComponent(e)}/${t}/${r}`}r.d(t,{c:()=>n})},29372:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});let n,i={};function s(e,t){if(!e||null==t)return!1;if(e===n&&i.hasOwnProperty(t))return i[t];e!==n&&(n=e,i={});const r=-1!==e.indexOf(t);return i[t]=r,r}},19172:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(95720),i=r.n(n);const s=function(e,t){const r=i().groupBy(e,(e=>e.advanced||t&&t.has(e.id)?"advanced":"basic"));return r.basic=i().indexBy(r.basic,"id"),r}},99424:(e,t,r)=>{"use strict";function n(e){return`${e}`}r.d(t,{Q:()=>n})},57708:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(83216);const i=Object.assign({},n.c,{posterFlipSpeed:"0.8s",overlaySpeed:"0.3s",chartOpacitySpeed:"0.3s"})},32716:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(49304);const i="#e5a00d",s="#fafafa",a="#a0aab1",o="#1f2326",c="#343a3f",l=Object.assign({},n.c,{v4AccentLight:i,v4AltLight:s,v4AltMedium:a,v4AltMediumDark:"#737e87",v4AltMediumLight:"#d6dcdf",v4BaseDark:o,v4BaseLight:"#444f56",v4BaseMedium:"#2a3136",v4BaseMediumLight:c,v4DefaultColor:s,v4DividerColor:o,primaryButtonColor:o,selectBackground:"#525252",dragPreviewBackgroundColor:"rgba(76, 76, 76, 0.7)",dragPreviewOpacity:"0.9",dragPreviewLowOpacity:"0.35",dropLocationColor:"#f9be03",sliderTrackBackgroundColor:"rgba(255, 255, 255, 0.2)",sliderThumbBackgroundColor:"#ddd",sliderThumbHoverBackgroundColor:"#fff",avatarLoadingBackgroundColor:"#999",avatarBackgroundColor:"#EEEEEE",detailsShadowColor:"#000",playerBackgroundColor:"#232426",playerTopControlsBackgroundColor:"rgba(35, 36, 38, 0.45)",playerBottomControlsBackgroundColor:"rgba(35, 36, 38, 0.8)",playerPrimaryButtonBackgroundColor:"rgba(0, 0, 0, 0.45)",miniPlayerBackgroundColor:n.c.blackDarkerTranslucentBackgroundColor,playerSecondaryOverlayColor:"rgba(0, 0, 0, 0.5)",playerPosterActionColor:n.c.blackDarkTranslucentBackgroundColor,playerPanelColor:"rgba(0, 0, 0, 0.6)",playerDisabledLinkColor:"rgba(255, 255, 255, 0.15)",playerShadowColor:"rgba(0, 0, 0, 0.45)",seekBarTrackColor:"rgba(0, 0, 0, 0.75)",seekBarTrackColorHover:"rgba(255, 255, 255, 0.15)",seekBarFillColor:"#cc7b19",seekBarBufferColor:"rgba(204, 123, 25, 0.3)",seekBarThumbnailShadowColor:"rgba(0, 0, 0, 0.45)",seekBarTooltipBackgroundColor:"#000",seekBarTooltipShadowColor:"rgba(0, 0, 0, 0.5)",thumbnailBackgroundColor:"rgba(0, 0, 0, 0.45)",adSeekBarFillColor:"#f9be03",equalizerBarColor:"#f9be03",htmlMediaElementBackgroundColor:"#000",toastBackgroundColor:"rgba(1, 1, 1, 0.50)",posterBackgroundColor:"rgba(0, 0, 0, 0.45)",posterHoverBackgroundColor:"radial-gradient(farthest-corner at 50% 50%, rgba(50, 50, 50, 0.5) 50%, rgb(50, 50, 50) 100%)",posterSelectedBackgroundColor:"rgba(30, 30, 30, 0.5)",posterBlendedSelectedBackgroundColor:"rgba(19, 19, 19, 0.78);",posterPlaceholderIconColor:"rgba(255, 255, 255, 0.15)",posterCenterCircleBackgroundColor:"rgba(0, 0, 0, 0.45)",posterBadgeShadowColor:"rgba(0, 0, 0, 0.6)",posterProgressTrackBackgroundColor:"rgba(0, 0, 0, 0.75)",posterVersionBadgeColor:"#556688",posterSmartBadgeColor:"rgb(142, 97, 145)",posterFavoriteBadgeColor:"rgb(229, 172, 182)",v4CardBackgroundColor:"rgba(0, 0, 0, 0.45)",v4CardShimmerBackgroundColor:"rgba(0, 0, 0, 0.3)",v4CardShadowColor:"rgba(0, 0, 0, 0.3)",v4CardHoverBackgroundColor:"rgba(30, 30, 30, 0.6)",v4CardHoverBorderColor:i,recordColor:"#f53",recordHoverColor:"lighten(#f53, 0.1)",recordBackgroundColor:"#b32",recordActiveBackgroundColor:"darken(#b32, 0.1)",dayOfWeekBackgroundColor:"rgba(255, 255, 255, 0.1)",dayOfWeekColor:"rgba(255, 255, 255, 0.75)",todayBackgroundColor:"rgba(255, 255, 255, 0.3)",todayColor:"rgba(255, 255, 255, 0.1)",calendarEventSuccessBackgroundColor:"rgba(0, 102, 153, 0.15)",calendarEventSuccessAlternateBackgroundColor:"rgba(31, 120, 165, 0.17)",calendarEventSuccessHoverBackgroundColor:"rgba(76, 148, 183, 0.20)",calendarEventErrorBackgroundColor:"rgba(187, 51, 34, 0.3)",calendarEventErrorAlternateBackgroundColor:"rgba(191, 64, 48, 0.31)",calendarEventErrorHoverBackgroundColor:"rgba(199, 87, 73, 0.34)",recordingIconColor:"#ff5533",playColor:"rgba(255, 255, 255, 0.75)",channelGridTimelineLabelColor:a,channelGridSelectedItemDetailsBackgroundColor:"rgba(0, 0, 0, 0.2)",channelGridBorderColor:c,channelGridHoverColor:"rgba(255, 255, 255, 0.2)",channelGridBackgroundColor:"rgba(160, 170, 177, 0.1)",channelGridOnAirBackgroundColor:"rgba(160, 170, 177, 0.1)",channelGridFinishedAiringBackgroundColor:"rgba(160, 170, 177, 0.3)",channelGridProgressColor:"rgba(160, 170, 177, 0.1)",channelGridMissingItemBackgroundColor:"rgba(0, 0, 0, 0)",channelGridChannelThumbBackgroundColor:"rgba(42, 49, 54, 0.5)",channelGridRecentChannelThumbBackgroundColor:"rgba(255, 255, 255, 0.05)",channelGridChannelIdentifierBackroundColor:"rgba(42, 49, 54, 0.5)",channelGridNewBadgeColor:"rgba(84, 84, 84)",filterBuilderInputBackgroundColor:"#1e2121",altFilterBuilderInputBackgroundColor:n.c.blackDarkerTranslucentBackgroundColor,dvrBackgroundColor:n.c.blackDarkTranslucentBackgroundColor,prePlayUnavailableButtonBackgroundColor:"rgba(255, 84, 50, 0.6)",prePlayPartialButtonBackgroundColor:"rgba(204, 123, 25, 0.6)",preferredServerButtonBackgroundColor:"rgba(0, 0, 0, 0.45)",sortableHomeHubsContainerBackgroundColor:"rgba(255, 255, 255, 0.03)",sortableHomeHubsRowBackgroundColor:"rgba(255, 255, 255, 0.02)",chartTranslucentOpacity:"0.25",serverDashboardTileRowBackgroundPrimaryColor:"rgba(229, 160, 13, 0.2)",serverDashboardTileRowBackgroundSecondaryColor:"rgba(229, 160, 13, 0.15)",serverDashboardTileRowBackgroundTertiaryColor:"rgba(229, 160, 13, 0.1)",serverDashboardTileRowBackgroundQuaternaryColor:"rgba(229, 160, 13, 0.05)",sessionStopBackgroundColor:"#701f29",sessionStopIconColor:"rgba(255, 255, 255, 0.5)",sourceSidebarSelectedColor:"rgba(255, 255, 255, 0.07)",liveTVSettingsTuner1Color:"#7EB0D5",liveTVSettingsTuner2Color:"#BC9BB7",liveTVSettingsTuner3Color:"#8f9148",liveTVSettingsTuner4Color:"#7a3d84",liveTVSettingsTuner5Color:"#ca5f5a"})},95156:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(35624);const i=Object.assign({},n.c,{sliderTrackSize:"60px",sliderThumbSize:"12px",serverMenuItemHeight:"60px",sourceMenuItemHeight:"65px",sourceMenuItemGutter:"25px",posterCenterCircleSize:"42px",posterBadgeHeight:"24px",posterHoverSlideDistance:"10px",posterIconPadding:"20px",posterProgressHeight:"4px",v4CardBorderRadius:"4px",v4CardShadowSize:"4px",v4CardTitleGap:"8px",v4CardTitleHeight:"24px",v4CardCircleSize:"42px",listButtonHeight:"40px",hubCellHeaderBottomPadding:"5px",hubCellHeaderTopPadding:"25px",v4ListSpacing:"40px",v4SpotlightHeight:"350px",pagePadding:"48px",v4PagePadding:"40px",v4PagePaddingAlt:"16px",pageHeaderRowHeight:"50px",pageHeaderLeftMargin:"40px",pageHeaderTabButtonLeftRightMargin:"5px",pageHeaderTabButtonHeight:"40px",recordingPriorityPaneWidth:"360px",recordingPriorityPaneBorderWidth:"4px",recordingPriorityDragHandleWidth:"62px",channelGridRowHeight:"60px",channelGridTitleColumnWidth:"145px",channelGridChannelColumnWidth:"250px",channelGridChannelOverflowWidth:"100px",channelGridChannelIconWidth:"80px",channelGridBorderSize:"1.5px",jumpBarCharacterHeight:"25px",jumpBarCharacterPadding:"10px",jumpBarGutter:"30px",jumpBarMargin:"10px",playCellWidth:"42px",actionsCellWidth:"82px",actionsCellPadding:"10px",summaryCellHeight:"136px",simpleSummaryCellHeight:"90px",summaryCellPadding:"20px",trackCellHeight:"60px",trackCellPadding:"10px",mosaicCellPadding:"5px",timelineGutter:"60px",prePlaySummaryMaxWidth:"750px",prePlayPosterMinWidth:"150px",prePlayPosterMaxWidth:"230px",prePlayPosterWidthRatio:"0.15",prePlayContentPadding:"20px",prePlayRatingBase:"1em",v4PrePlayListTitleGap:"20px",v4PrePlayDividerHeight:"2px",v4PrePlayAvailabilityWidth:"288px",v4PrePlayAvailabilityHeight:"84px",v4PrePlayAvailabilityGap:"16px",v4PrePlayAvailabilityThumbSize:"48px",postPlayPosterWidth:"260px",postPlayTitleHeight:"40px",postPlayAutoPlayHeight:"55px",dvrSetupImageWidth:"193px",dvrSetupChannelMappingItemHeight:"40px",dvrSetupSpinnerSize:"100px",playerControlsHeight:"100px",playerControlsMinWidth:"640px",playerControlsNarrowHeight:"140px",playerControlsNarrowBreakpoint:"960px",playerControlsPosterHeight:"80px",playerControlsPosterLeftGutter:"8px",playerControlsPosterBottomGutter:"8px",playerControlsNarrowPosterBottomGutter:"48px",playerControlsContentSpacing:"20px",playerControlsSquarePosterWidth:"80px",playerControlsLandscapePosterWidth:`${Math.round(16/9*80)}px`,playerInfoBarHeight:"45px",playerTopControlsHeight:"60px",playerSideControlsWidth:"100px",playerOverlayActionEdgeGutter:"20px",playerIconButtonSize:"30px",playerIconButtonSpacing:"5px",playerVolumeSliderWidth:"32px",playerVolumeSliderHeight:"60px",seekBarHeight:"4px",seekBarTooltipMarginBottom:"4px",seekBarTooltipHeight:"23px",seekBarTooltipSmallWidth:"60px",seekBarTooltipLargeWidth:"90px",playQueueItemHeight:"68px",playQueueMoveButtonWidth:"54px",playQueueSidePadding:"60px",lyricsLineHeight:"30px",lyricsLineWidth:"640px",playerMediaOverlayInnerMargin:"1vw",playerMediaOverlayOuterMargin:"2vw",playlistItemCardWidth:"64px",playlistBadgeSize:"30px",navigationIconSize:"24px",sourceSidebarIconSize:"24px",sourceSidebarWidth:"64px",sourceSidebarExpandedWidth:"260px",sourceSidebarLeftGutter:"12px",sourceSidebarItemHeight:"50px",sourceSidebarLinkHoverStatusbarAllowance:"20px",sourceSidebarServerHeaderIconSize:"24px",homeServerListItemHeight:"40px",serverSelectMenuWidth:"260px",heroBadgeHeight:"90px",heroPageMinHeight:"600px",serverShareListRowHeight:"40px",spotlightHubCellHeight:"324px",spotlightHubCellGap:"25px",watchTogetherLobbyPosterWidth:"260px",watchTogetherLobbyTitleHeight:"40px",downloadCellHeight:"120px",liveTVSettingsDeviceGap:"2px",liveTVSettingsDeviceWidth:"270px",liveTVSettingsBorderRadius:"4px",liveTVSettingsDeviceBorderSize:"8px",liveTVSettingsChannelItemHeight:"50px",liveTVSettingsChannelItemWidth:"450px",liveTVSettingsChannelThumbWidth:"60px",liveTVSettingsChannelThumbHeight:"40px",platformThumbSize:"50px",resultSelectIconSize:"40px",commentInputHeight:"54px",commentPageMarginBottom:"45px"})},75840:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={allowFlash:!0,allowHttpsMediaServerConnections:!0,allowIPv6ServerConnections:!0,allowMediaServerRelayConnections:!0,allowMultipleWebSocketConnections:!0,shouldCreateFlexModels:!0,shouldCreateStateTree:!0,shouldRequestHTMLFromCloudProvider:!0,allowCloudPubSub:!0,allowLoopbackDiscovery:"http:"===window.location.protocol,allowSSO:!1,bufferingDetectionLimit:500,allowSyncSettings:!0,allowSync:!0,allowDirectDownload:!0,allowSyncDownload:!1}},16236:(e,t,r)=>{"use strict";var n={};r.r(n),r.d(n,{abortServerConnectionTest:()=>We,analyzeItems:()=>qe,analyzeSection:()=>Qe,authenticateWithHash:()=>wn,authenticateWithServer:()=>En,autoMatch:()=>ft,changeArtwork:()=>bt,cleanBundles:()=>ht,connectServer:()=>Xt,deleteAllVersionGenerators:()=>qt,deleteFile:()=>Et,deleteItem:()=>_t,deleteItems:()=>tt,deleteMediaItem:()=>at,deletePlaylist:()=>ut,deleteSection:()=>lt,deleteSectionThumbnails:()=>dt,deleteVersionGenerator:()=>zt,deleteVersions:()=>ot,disableVersionGenerator:()=>Bt,emptyTrash:()=>yt,enableVersionGenerator:()=>Wt,match:()=>gt,merge:()=>Je,optimize:()=>mt,populateServerIdentity:()=>Be,rate:()=>St,reconnectServer:()=>Jt,refreshMetadata:()=>Ge,removeDevice:()=>Cn,removeServer:()=>rr,reprocessVersionGenerator:()=>Ht,resetUser:()=>nn,selectStream:()=>It,signInServer:()=>er,signOut:()=>Tn,splitApart:()=>Xe,switchUser:()=>cn,testServerConnection:()=>_e,uninstallChannel:()=>$t,unmatch:()=>$e,updateChannel:()=>Kt,updateLibrary:()=>pt});var i={};r.r(i),r.d(i,{BACKGROUND_TRANSCODE_JOBS:()=>yT,FRIEND:()=>om.Yh,HOME_USER:()=>om.q0,HUB:()=>om.oB,LIBRARY:()=>om.Qh,LIVE_TV_SESSION:()=>om.iy,MEDIA_SUBSCRIPTION:()=>om.y$,METADATA_ITEM:()=>om.Qv,METADATA_LIST:()=>om._M,PLAYLIST_ITEM:()=>om.cD,PLAY_QUEUE_ITEM:()=>om.o1,PROVIDER:()=>om.SF,RESOURCE:()=>om.kH,SERVER:()=>om.qe,TRANSCODE_JOBS:()=>om.oV,USER:()=>om.MN,WATCH_TOGETHER_ROOM:()=>om.Af}),r(20824);var s=r(99156);r(43328),r(86608),r(32868),r(18352),r(86104),r(75428),document.body.className=s.U;var a=r(44060),o=r(37588),c=r.n(o),l=r(11504),d=r(31288),u=r(81028),p=r(97104),m=r(27876),h=r(85448),y=r(9220),g=r(52180),f=r(95720),v=r.n(f),b=r(38828),S=r(96504);const P={PUT:!0,DELETE:!0},I={Accept:!0,"Accept-Language":!0,"Content-Language":!0,"Content-Type":!0},E=/^(text\/plain|multipart\/form-data|application\/x-www-form-urlencoded)/,w=/(^X-Plex-[^=]+)/i,C=/(^[^?]+)\?(.+$)/;function O(e){const{type:t,contentType:r,headers:n,allowHeadersInUrl:i,allowBlacklistedMethodHeaders:s}=e;if(!i)return;if(P[t]&&!s)return;const a={};let o=!1;if(v().each(n,((e,t)=>{I[t]||(w.test(t)?(o=!0,a[t]=e,delete n[t]):b.c.warn('Did not move header "%s" to query string. This can result in an unnecessary OPTIONS preflight request.',t))})),o){const r=e.url.match(C),[,n,i]=r||[null,e.url,null],s=i?i.split("&"):[],[o,c]=v().partition(s,(e=>w.test(e))),l=e.data;"GET"===t&&l&&(c.push(v().isString(l)?l:S.c.stringifyParams(l)),delete e.data),o.forEach((e=>{const t=e.match(w);t&&delete a[t[1]]}));const d=S.c.stringifyParams(a);d&&o.push(d),e.url=`${n}?${c.concat(o).join("&")}`}r&&!E.test(r)&&b.c.warn('Sending %s request with Content-Type "%s". This can result in an unnecessary OPTIONS preflight request.',t,r)}var M=r(5620);function T(){return c().ajaxPrefilter(O),M.c.startListening(),c().Deferred().resolve().promise()}var D=r(7980),k=r(15976),x=r(58938),A=r(76220),R=r(23228),N=Object.defineProperty,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=["X-Plex-Device","X-Plex-Model","X-Plex-Platform","X-Plex-Platform-Version","X-Plex-Product","X-Plex-Version"];var _=r(57496),W=r(79268);const B=function(e){const{hostname:t,protocol:r}=e,n="file:"===r;let i;return"https:"===r?i="https":"http:"===r?i=(0,_.gd)(t)?"http-loopback":"http":n&&(i="file"),i};var H=r(11360),z=r(47840),G=r(15372),q=Object.defineProperty,K=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&J(e,r,t[r]);if($)for(var r of $(t))X.call(t,r)&&J(e,r,t[r]);return e},ee=(e,t)=>K(e,Q(t));const te=/^utm_/;function re(){const{searchParams:e,hashParams:t}=(0,G.c)(window.location.href),r=Z(Z({},(0,H.c)(t)),(0,H.c)(e));return Object.keys(r).reduce(((e,t)=>(te.test(t)&&(e[t.replace(te,"")]=r[t]),e)),{})}function ne(e={}){const t=(0,g.WI)("metrics"),{context:r={}}=e;return t.set({deviceIdentifier:A.c.prop("X-Plex-Client-Identifier"),context:ee(Z({},r),{campaign:re(),device:{product:A.c.prop("X-Plex-Product"),version:A.c.prop("X-Plex-Version"),platform:A.c.prop("X-Plex-Platform"),platformVersion:A.c.prop("X-Plex-Platform-Version"),device:A.c.prop("X-Plex-Device"),model:A.c.prop("X-Plex-Model"),screenResolution:A.c.prop("X-Plex-Device-Screen-Resolution"),layout:"desktop",protocol:B(window.location)}})}),(0,z.c)(t.start())}function ie(){return(0,b.c)("[Sources] Initializing..."),(0,g.WI)("sourceManager").start(),(0,b.c)("[Sources] Finished initialization"),c().Deferred().resolve().promise()}r(55192),r(57936),r(7184),r(34712);var se=r(99112),ae=r(37588);function oe(){return ae.Deferred().resolve().promise()}var ce=r(91600),le=r(21248),de=r(43352);const ue=ce.c.extend({mixins:[de.c],initialize(){this.modals=[]},start(){this.listenTo(le.c,{"show:modal":this.showModal,"hide:modal":this.hideModal,restoreTempHiddenModals:this.restoreTempHiddenModals,tempHideModals:this.tempHideModals})},showModal(e){this.modals.push(e);const t=c()("body");e.transparent&&t.addClass("show-modal-transparent"),t.append(e.render().el)},hideModal(e){const t=v().indexOf(this.modals,e);t>-1&&this.modals.splice(t,1)[0].close(),e.transparent&&!v().findWhere(this.modals,{transparent:!0})&&c()("body").removeClass("show-modal-transparent")},tempHideModals(){for(let e=0;e<this.modals.length;e++)this.modals[e].tempHide();c()(".modal-backdrop").addClass("backdrop-temp-hidden")},restoreTempHiddenModals(){c()(".modal-backdrop").removeClass("backdrop-temp-hidden");for(let e=0;e<this.modals.length;e++)this.modals[e].restoreTempHidden()}});function pe(){(new ue).start()}var me=r(65026),he=r(84392),ye=r(14252),ge=r(8436),fe=r(17920);function ve({children:e}){const{isReady:t,user:r}=function(){const e=(0,m.w1)(ge.c),t=(0,fe.c)(),r=A.c.prop("X-Plex-Platform"),n=A.c.prop("X-Plex-Client-Identifier"),i=(0,m.w1)(ye.c),s=(0,l.useMemo)((()=>{var e;return null==(e=null==i?void 0:i.resources)?void 0:e.some((e=>e.owned&&e.productVersion))}),[null==i?void 0:i.resources]),a=(0,l.useMemo)((()=>{var e;return null==(e=null==i?void 0:i.resources)?void 0:e.some((e=>!e.owned&&e.productVersion))}),[null==i?void 0:i.resources]);return(0,l.useMemo)((()=>({isReady:t&&(i.isResourcesPopulated||i.hasFailedResources)&&!i.isResourcesPending,user:{userID:null==e?void 0:e.id,custom:{platform:r,anonymous:null==e?void 0:e.anonymous,employee:null==e?void 0:e.isEmployee,hasOwnedServer:s,hasSharedServer:a},customIDs:{deviceIdentifier:n}}})),[t,i.isResourcesPopulated,i.hasFailedResources,i.isResourcesPending,null==e?void 0:e.id,null==e?void 0:e.anonymous,null==e?void 0:e.isEmployee,r,s,a,n])}();return l.createElement(he.StatsigProvider,{options:{api:"https://features.plex.tv/v1",environment:{tier:"production"},localMode:!1},sdkKey:"client-I4Prcw4FFIB3irLt7cJGBw4a1XjC7MPaL5nlKlvX2up",shutdownOnUnmount:!0,user:t?r:{},waitForInitialization:!1},e)}var be=r(35200),Se=r(95600),Pe=r(32364),Ie=r(33040);const Ee=function(){if(!Pe.c.hasReplaceState)return c().Deferred().resolve().promise();const e=c().Deferred(),t=window.location,r=Ie.c.parseQueryString(t.search);let n;try{n=JSON.parse(r.alerts),delete r.alerts}catch(e){}if(n){Se.c.push(...n);const e=`${S.c.join([`${t.origin}${t.pathname}`],r)}${t.hash}`;window.history.replaceState({},"",e)}return e.resolve().promise()};var we=r(46235),Ce=r(65284),Oe=r(39036);function Me(e){return v().isString(e)&&e.trim().length>0}function Te(e,t){const r=(0,Oe.c)();return(0,b.c)("[appModelInitializer] Generating new %s [%s]",t,r),e.set(t,r),we.c.set(t,r)}function De(e,t){let r;const n=e.get(t);return Me(n)?r=we.c.set(t,n):(r=we.c.get(t),r=r.then((r=>{if(!Me(r))return b.c.error("[appModelInitializer] Invalid %s found in storage [%s]",t,n),Te(e,t);e.set(t,r)}),(()=>((0,b.c)("[appModelInitializer] Failed to read %s from storage",t),Te(e,t))))),r}function ke(e){const t=we.c.get("skipSignIn");return t.always((t=>{e.set("skipSignIn","1"===t)})),t}function xe(){const e=(0,g.WI)("appModel");return(0,Ce.c)([De(e,"clientID"),De(e,"anonymousClientID"),ke(e)])}var Ae=r(55672),Re=r(87228);const Ne=ce.c.extend({lastModified:null,eTag:null,mixins:de.c,url:function(){const e=g.WI("appModel"),t=e.get("user"),r="/sub/"+this.requestType+"/"+t.id+"/"+e.get("clientID"),n=new Ae.c({scheme:"websockets"===this.requestType?"wss":"https",address:"pubsub.plex.tv"});return this.server.resolveUrl(r,{connection:n,appendToken:!0})},initialize:function(e){v().bindAll(this,"onSocketOpen","onSocketClose","onSocketError","onSocketMessage","onPingTimeout","onPollSuccess","onPollError"),this.server=e.server},open:function(){return(this.socket||this.pollRequest)&&this.close(),Pe.c.hasWebSocket?(this._deferred=c().Deferred(),this.requestType="websockets",this.socket=new window.WebSocket(v().result(this,"url")),this.socket.onopen=this.onSocketOpen,this.socket.onclose=this.onSocketClose,this.socket.onerror=this.onSocketError,this.socket.onmessage=this.onSocketMessage,this._deferred.promise()):this.poll()},close:function(){this.pollRequest&&(M.c.abort(this.pollRequest.rid),this.pollRequest=null),this._deferred&&"pending"===this._deferred.state()&&this._deferred.reject(),this.socket&&(this.cancelPing(),this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null)},schedulePing:function(){this.cancelPing(),this._pingTimeoutID=window.setTimeout(this.onPingTimeout,3e4)},cancelPing:function(){this._pingTimeoutID&&(window.clearTimeout(this._pingTimeoutID),this._pingTimeoutID=null)},poll:function(){this.requestType="longpolling",this.pollUrl=S.c.join(v().result(this,"url"),{ttl:String(30)+"s"});const e=this.server.getXHROptions(this.pollUrl,{timeout:35e3});return e.headers["If-Modified-Since"]=this.lastModified?this.lastModified:"Thu, 01 Jan 1970 00:00:00 GMT",this.eTag&&(e.headers["If-None-Match"]=this.eTag),this.pollRequest=c().ajax(e).done(this.onPollSuccess).fail(this.onPollError),this.pollRequest.promise()},handleResponse:function(e){if(!e)return;const t=Re.c.parseXML(e);if(v().isObject(t)){const e=t.command;le.c.trigger(`cloudServer:${e}`,t)}},onSocketOpen:function(e){this.server.set("hasEventConnection",!0),this.trigger("open",this.server,e),this._deferred.resolve(this.server,e),this.schedulePing()},onSocketClose:function(e){this.close(),this.server.set("hasEventConnection",!1),this.trigger("close",this.server,e),this._deferred.reject(this.server,e)},onSocketError:function(e){this.close(),this.trigger("error",this.server,e),this._deferred.reject(this.server,e)},onSocketMessage:function(e){this.handleResponse(e.data)},onPingTimeout:function(){this._pingTimeoutID=null,this.socket.send("hello"),this.schedulePing()},onPollSuccess:function(e,t,r){this.trigger("open",this.server,e),this.lastModified=r.getResponseHeader("Last-Modified"),this.eTag=r.getResponseHeader("ETag"),this.handleResponse(e),this.poll()},onPollError:function(e,t){"abort"===t?this.poll():this.pollRequest.aborting||this.trigger("error",this.server,e)}});var Le=r(92444);const je=Le.c.extend({supportsRetry:e=>e.get("isCloud")});var Ue=r(58192);function Fe(e){return e.get("isCloud")}var Ve=r(43876);const _e=function(e){return(0,g.WI)("serverConnectionTestManager").queueConnectionTest(e)},We=function(e){return(0,g.WI)("serverConnectionTestManager").abortConnectionTest(e)},Be=function(e){const{server:t,connection:r}=e;if(t.id)return c().Deferred().resolve(t.id).promise();const n=t.resolveUrl("/identity",{connection:r}),i=v().extend(t.getXHROptions(n),{timeout:t.connectionTestTimeout});(0,b.c)(`[Identity] Requesting the machine identifier of ${t.get("debugName")} at ${n}`);let s=c().ajax(i).promise();return s=s.then((e=>{const r=c().Deferred(),n=Ie.c.parseXML(e),i=n&&n.machineIdentifier;return i?((0,b.c)(`[Identity] Machine identifier found for ${t.get("debugName")}: ${i}`),!t.collection||t.collection.get(i)?r.resolve(i):(t.collection.populateServer({isCloud:!0}).done((e=>{e.get("resources").populate().always((()=>{r.resolve(i)}))})),t.collection.findServer({isCloud:!0}).done((e=>{e.populate().fail((()=>{r.resolve(i)}))})).fail((()=>{r.resolve(i)})))):r.reject(),r.promise()})),s.fail((()=>{b.c.warn(`[Identity] Machine identifier not found for ${t.get("debugName")} at ${n}`)})),s};var He=r(59396),ze=r(59044);const Ge=function(e){let t,r;return e.item?(t=e.item,r=[t]):(r=e.items,t=r[0]),c().when.apply(c(),v().map(r,(function(e){const r="/library/metadata/"+e.id+"/refresh",n=v().extend(t.server.getXHROptions(r),{type:"PUT"});return c().ajax(n).promise()}))).fail((function(e){503===e.status?le.c.trigger("show:modal",new ze.c({model:t.server})):le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem refreshing.")})}))},qe=function(e){const t=e.items;return c().when.apply(c(),v().map(t,(function(e){const t="/library/metadata/"+e.id+"/analyze",r=v().extend(e.server.getXHROptions(t),{type:"PUT"});return c().ajax(r).promise()})))};var Ke=r(46724);const Qe=function(e){const t=c().Deferred(),r=e.section,n="/library/sections/"+r.id+"/analyze",i=v().extend(r.server.getXHROptions(n),{type:"PUT"}),s=new Ke.c({title:(0,He.c)("Analyze Library"),message:(0,He.c)("Analyzes all the media files in the library. The analysis captures information about the media which helps Plex decide how to optimally play back the media."),confirmLabel:(0,He.c)("Analyze"),cancelLabel:(0,He.c)("Cancel"),async:!0}),a=s.promise;return a.done((function(){const e=c().ajax(i);e.done((function(){t.resolve()})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem analyzing the library.")}),t.reject(e)})),e.always((function(e){s.hide()}))})),a.fail((function(){t.reject()})),le.c.trigger("show:modal",s),t.promise()},$e=function(e){const t=e.item,r="/library/metadata/"+t.id+"/unmatch",n=v().extend(t.server.getXHROptions(r),{type:"PUT"}),i=c().ajax(n);return i.fail((function(){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem unmatching this item.")})})),i.promise()};var Ye=r(13778);const Xe=function(e){const t=c().Deferred(),r=e.item,n="/library/metadata/"+r.id+"/split",i=new Ke.c({title:(0,He.c)("Split Apart"),message:(0,He.c)("Are you sure you want to split this item apart?"),async:!0}),s=i.promise;return s.done((function(){const s=v().extend(r.server.getXHROptions(n),{type:"PUT"}),a=c().ajax(s);a.done((function(){const n=r.get("type");let i;i="show"===n||"artist"===n||"album"===n?"Location":"Media",r.set(i,r.get(i).slice(0,1)),e.skipNavigate||(0,g.WI)("appStore").dispatch((0,Ye.eo)()),t.resolve()})),a.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem splitting this item apart.")}),t.reject(e)})),a.always((function(e){i.hide()}))})),s.fail((function(){t.reject()})),le.c.trigger("show:modal",i),t.promise()},Je=function(e){const t=c().Deferred(),r=e.item,n=v().pluck(e.items,"id").join(","),i="/library/metadata/"+r.id+"/merge?ids="+n,s=v().extend(r.server.getXHROptions(i),{type:"PUT"}),a=new Ke.c({title:(0,He.c)("Merge"),message:(0,He.c)("Are you sure you want to merge these items together?"),async:!0}),o=a.promise;return o.done((function(){const e=c().ajax(s);e.done((function(){t.resolve()})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem merging these items.")}),t.reject(e)})),e.always((function(e){a.hide()}))})),o.fail((function(){t.reject()})),le.c.trigger("show:modal",a),t.promise()};var Ze=r(12612);function et(e,t){return v().map(e,(function(e){return Ve.c.execute("deleteItem",{item:e,skipRedirect:t})}))}const tt=function(e){let t=e.items,r=e.item;const n=e.skipConfirmation,i=e.skipRedirect;t||(t=[r]),r||(r=v().first(t));const s=r.get("Media");if(1===t.length&&s.length>1&&!r.get("remoteMedia")&&r.server.supports("specificMediaDeletion"))return Ve.c.execute("deleteMediaItem",{item:r});let a;if(n)a=c().when.apply(c(),et(t,i));else{const e=function(e){const t=e.item,r=e.items,n=r.length>1,i=t.get("remoteMedia"),s=t.get("type"),a=Ze.GG(s);let o,c;i&&!n?(o=a.title,c=(0,He.c)("Are you sure you want to remove {1}?",t.get("title"))):n&&r.every((e=>e.get("remoteMedia")))?(o=a.plural,c=(0,He.c)("Are you sure you want to remove {1} items?",r.length)):s===Ze.sl?(o=a.title,c=(0,He.c)("Are you sure you want to delete {1}? This cannot be undone.",t.get("title"))):n?(o=a.plural,c=(0,He.c)("Are you sure you want to delete {1} items from your filesystem?",r.length)):(o=a.title,c=(0,He.c)("Are you sure you want to delete this item from your filesystem?"));const l={title:i?(0,He.c)("Remove {typeLabel}",{typeLabel:o}):(0,He.c)("Delete {typeLabel}",{typeLabel:o}),message:c,confirmLabel:i?(0,He.c)("Remove"):(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0};(n||Ze.Av(s))&&(l.requireDoubleConfirm=!0,l.doubleConfirmMessage=i?(0,He.c)("Multiple files may be removed."):(0,He.c)("Multiple items may be deleted."),l.doubleConfirmLabel=(0,He.c)("Yes, I'm sure"));const d=new Ke.c(l);return le.c.trigger("show:modal",d),d}({item:r,items:t});a=e.promise.then((function(){return c().when.apply(c(),et(t,i)).always((function(){e.hide()}))}))}return a};var rt=r(81543),nt=r(22624),it=r.n(nt);const st=rt.c.extend({name:"SelectMediaFileModal",template:it(),serializeData:function(){return{medias:this.model.get("Media")}}}),at=function(e){let t=function(e){const t=c().Deferred(),r=e.item,n=r.get("Media");if(e.index in n)return t.resolve(n[e.index]).promise();const i=new st({model:r}),s=i.promise;return s.done((function(e){t.resolve(n[e])})),s.fail((function(){t.reject()})),le.c.trigger("show:modal",i),t.promise()}(e);return t=t.then((function(t){const r=function(){const e=new Ke.c({title:(0,He.c)("Delete File"),message:(0,He.c)("Are you sure you want to delete this file from your filesystem?"),confirmLabel:(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});return le.c.trigger("show:modal",e),e}();return r.promise.then((function(){return Ve.c.execute("deleteFile",{item:e.item,media:t}).always((function(){r.hide()}))}))})),t},ot=function(e){const t=e.item,r=t.server,n=t.get("Media"),i=v().filter(n,(function(e){return!!e.proxyType})),s=function(e){const t=e.item,r=e.versions,n=r.length>1;let i;if(n)i=(0,He.c)("Are you sure you want to delete {1} versions of {2}?",r.length,t.get("title"));else{const e=v().first(r);i=(0,He.c)("Are you sure you want to delete the {1} version of {2}?",e.title,t.get("title"))}const s=new Ke.c({title:n?(0,He.c)("Delete Versions"):(0,He.c)("Delete Version"),message:i,confirmLabel:(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});return le.c.trigger("show:modal",s),s}({item:t,versions:i});return s.promise.then((function(){const e=S.c.join(["/library/metadata/",t.id],{proxy:1}),a=v().extend(r.getXHROptions(e),{type:"DELETE"}),o=c().ajax(a);return o.done((function(){v().each(i,(function(e){n.splice(v().indexOf(n,e),1)})),t.trigger("change:Media",t,t.get("Media"))})),o.fail((function(e){const t=403===e.status?(0,He.c)("Ensure that media deletion is enabled for library content in your server settings."):(0,He.c)("There was a problem deleting these versions.");le.c.trigger("show:alert",{type:"error",message:t})})),o.always((function(){s.hide()})),o.promise()}))};var ct=r(59740);const lt=function(e){const t=c().Deferred(),r=e.section,n=new Ke.c({title:(0,He.c)("Delete Library"),message:(0,He.c)("Are you sure you want to delete {1}?",r.get("title")),confirmLabel:(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),requireDoubleConfirm:!0,doubleConfirmMessage:(0,He.c)("This cannot be undone."),doubleConfirmLabel:(0,He.c)("Yes, I'm sure"),async:!0,hasDanger:!0}),i=n.promise;return i.done((function(){const e=r.destroy({wait:!0});e?(e.done((function(){const e=g.WI("appStore").dispatch,n=r.server.entityID();n&&e((0,ct.SK)({serverEntityID:n})),t.resolve()})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem deleting the library.")}),t.reject(e)}))):t.resolve()})),i.fail((function(){t.reject()})),le.c.trigger("show:modal",n),t.promise().always((()=>{n.hide()})),t.promise()},dt=function(e){const t=e.section,r="/library/sections/"+t.id+"/indexes",n=v().extend(t.server.getXHROptions(r),{type:"DELETE"}),i=new Ke.c({title:(0,He.c)("Delete Preview Thumbnails"),message:(0,He.c)("Are you sure you want to delete the preview thumbnails for items in this library? This cannot be undone."),confirmLabel:(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});let s=i.promise;return s=s.then((function(){return function(){const e=c().ajax(n);return e.done((function(e){le.c.trigger("show:alert",{type:"success",message:(0,He.c)("The preview thumbnails for items in this library were deleted.")})})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem deleting the preview thumbnails for items in this library.")})})),e.always((function(e){i.hide()})),e}()})),le.c.trigger("show:modal",i),s},ut=function(e){const t=c().Deferred(),r="photo"===e.item.get("playlistType"),n=new Ke.c({title:r?(0,He.c)("Delete Album"):(0,He.c)("Delete Playlist"),message:(0,He.c)("Are you sure you want to delete {1}? This cannot be undone.",e.item.get("title")),confirmLabel:(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0}),i=n.promise;return i.done((function(){const i=e.item.destroy();i.done((function(){e.skipRedirect||(0,g.WI)("appStore").dispatch((0,Ye.eo)()),t.resolve()})),i.fail((function(e){le.c.trigger("show:alert",{type:"error",message:r?(0,He.c)("There was a problem deleting the album."):(0,He.c)("There was a problem deleting the playlist.")}),t.reject(e)})),i.always((function(e){n.hide()}))})),i.fail((function(){t.reject()})),le.c.trigger("show:modal",n),t.promise()},pt=function(e){const t=c().Deferred(),r=e.section,n=r?r.id:"all",i=e.cancel,s=r?r.server:e.server,a={};(e.params||{}).force&&(a.force=1);const o="/library/sections/"+n+"/refresh",l=v().extend(s.getXHROptions(o),{data:a});function d(){const e=c().ajax(l);e.done((function(){t.resolve()})),e.fail((function(e){if(503===e.status)le.c.trigger("show:modal",new ze.c({model:s}));else{const e=i?(0,He.c)("There was a problem canceling the update."):(0,He.c)("There was a problem updating the library.");le.c.trigger("show:alert",{type:"error",message:e})}t.reject(e)}))}if(i&&(l.type="DELETE",r&&r.set("refreshing",!1)),a.force){const e=new Ke.c({title:(0,He.c)("Refresh All"),message:(0,He.c)("Forces a download of fresh media information from the internet. This can take a long time. Any locked fields are not modified."),confirmLabel:(0,He.c)("Refresh"),cancelLabel:(0,He.c)("Cancel")}),r=e.promise;r.done(d),r.fail((function(){t.reject()})),le.c.trigger("show:modal",e)}else d();return t.promise()},mt=function(e){const t=c().Deferred(),r=e.server,n=v().extend(r.getXHROptions("/library/optimize"),{type:"PUT"}),i=new Ke.c({title:(0,He.c)("Optimize Database"),message:(0,He.c)("Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library."),confirmLabel:(0,He.c)("Optimize"),cancelLabel:(0,He.c)("Cancel"),async:!0}),s=i.promise;return s.done((function(){const e=c().ajax(n);e.done((function(){le.c.trigger("show:alert",{type:"success",message:(0,He.c)("The database was optimized.")}),t.resolve()})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem optimizing this database.")}),t.reject(e)})),e.always((function(e){i.hide()}))})),s.fail((function(){t.reject()})),le.c.trigger("show:modal",i),t.promise()},ht=function(e){const t=c().Deferred(),r=e.server,n=v().extend(r.getXHROptions("/library/clean/bundles"),{type:"PUT"}),i=new Ke.c({title:(0,He.c)("Clean Bundles"),message:(0,He.c)("The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the internet. Running this task deletes any bundles which are no longer in use."),confirmLabel:(0,He.c)("Clean"),cancelLabel:(0,He.c)("Cancel"),async:!0}),s=i.promise;return s.done((function(){const e=c().ajax(n);e.done((function(){le.c.trigger("show:alert",{type:"success",message:(0,He.c)("Unused bundles are being removed.")}),t.resolve()})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem removing unused bundles.")}),t.reject(e)})),e.always((function(e){i.hide()}))})),s.fail((function(){t.reject()})),le.c.trigger("show:modal",i),t.promise()},yt=function(e){const t=c().Deferred(),r=e.section,n=r?r.server:e.server,i=[],s=[];r?i.push(r.id):n.get("sections").each((function(e){i.push(e.id)}));const a=new Ke.c({title:(0,He.c)("Empty Trash"),message:(0,He.c)("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),confirmLabel:(0,He.c)("Empty"),cancelLabel:(0,He.c)("Cancel"),async:!0}),o=a.promise;return o.done((function(){v().each(i,(function(e){const t="/library/sections/"+e+"/emptyTrash",r=v().extend(n.getXHROptions(t),{type:"PUT"});s.push(c().ajax(r))}));const e=c().when.apply(c(),s);e.done((function(){le.c.trigger("show:alert",{type:"success",message:(0,He.c)("The trash was emptied.")}),t.resolve()})),e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem emptying the trash.")}),t.reject(e)})),e.always((function(e){a.hide()}))})),o.fail((function(){t.reject()})),le.c.trigger("show:modal",a),t.promise()},gt=function(e){const t=e.item,r={guid:e.guid,name:e.name,year:e.year};"album"===t.get("type")&&e.children&&e.children.reduce((function(e,t){const r=t.get("id");return r&&(e["guid["+r+"]"]=t.get("guid")),e}),r);const n=S.c.join(["/library/metadata/",t.id,"/match"],r),i=v().extend(t.server.getXHROptions(n),{type:"PUT"});return c().ajax(i).promise()},ft=function(e){const t=c().Deferred(),r=e.item;let n={agent:e.agent.id,manual:0};const i=S.c.join(["/library/metadata/",r.id,"/matches"],n),s=v().extend(r.server.getXHROptions(i)),a=c().ajax(s);return a.done((function(e){const i=v().isObject(e)?e:Re.c.parseXML(e);if(i.SearchResult){let e=i.SearchResult;Array.isArray(i.SearchResult)&&(e=i.SearchResult[0]),n={guid:e.guid,name:e.name};const s=S.c.join(["/library/metadata/",r.id,"/match"],n),a=v().extend(r.server.getXHROptions(s),{type:"PUT"}),o=c().ajax(a);o.done((function(){t.resolve()})),o.fail((function(){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem matching this item.")}),t.reject()}))}else le.c.trigger("show:alert",{type:"error",message:(0,He.c)("No matches were found using this agent.")}),t.reject()})),a.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem searching for matches.")}),t.reject(e)})),t.promise()},vt={poster:"thumb",art:"art"},bt=function(e){const t=e.item,r={url:e.artworkRatingKey},n=S.c.join(["/library/metadata/",t.id,e.artworkType],r),i=v().extend(t.server.getXHROptions(n),{type:"PUT"}),s=c().ajax(i);return s.done((function(r){t.set(vt[e.artworkType],r)})),s.promise()},St=function(e){const t=e.item,r=e.rating,n=t.get("userRating");if(-1===r?t.unset("userRating"):t.set("userRating",r),e.passive)return c().Deferred().resolve().promise();const i={key:t.get("ratingKey"),identifier:t.get("identifier"),rating:r},s=S.c.join("/:/rate",i),a=c().ajax(t.server.getXHROptions(s));return a.fail((function(){t.set("userRating",n),le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem rating this item.")})})),a.promise()};var Pt=r(27904);const It=function(e){const t=c().Deferred(),r=e.item,n=r.server,i=e.media||v().first(r.get("Media")),s=e.part||i&&v().first(i.Part),a=e.streamType,o=e.streamID;if(!i||!s)return t.reject().promise();const l={};l[a.key]=o,!e.media&&n.supports("allPartsStreamSelection")&&(l.allParts=1);const d=S.c.join(["/library/parts/",s.id],l),u=v().extend(n.getXHROptions(d),{type:"PUT"}),p=c().ajax(u);return p.done((function(){(function(e,t,r){if(e){const n=(0,Pt.c)(e,{streamType:t.id});v().each(n,(e=>{e.selected=e.id===r}))}})(i,a,o),r.trigger("change:streams"),t.resolve()})),p.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem selecting the stream for this item.")}),t.reject(e)})),t.promise()},Et=function(e){const t=e.item,r=e.media,n=t.server;let i;if(r){const s="/library/metadata/"+t.id+"/media/"+r.id,a=v().extend(n.getXHROptions(s),{type:"DELETE"});i=c().ajax(a),i.done((function(){const n=e.item.get("Media");n.splice(v().indexOf(n,r),1),t.trigger("change:Media",t,t.get("Media"))}))}else i=t.destroy({wait:!0});return i.fail((function(e){const t=403===e.status?(0,He.c)("Ensure that media deletion is enabled for library content in your server settings."):(0,He.c)("There was a problem deleting this item.");le.c.trigger("show:alert",{type:"error",message:t})})),i};var wt=r(15568),Ct=r(14224),Ot=r(90044),Mt=r(19204),Tt=Object.defineProperty,Dt=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,Nt=(e,t,r)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lt=(e,t)=>{for(var r in t||(t={}))At.call(t,r)&&Nt(e,r,t[r]);if(xt)for(var r of xt(t))Rt.call(t,r)&&Nt(e,r,t[r]);return e},jt=(e,t)=>Dt(e,kt(t));function Ut(e,t){if(!e)return!1;const r=new Ct.c({key:e},{server:t.item.server,onlyIfCached:!0});return!v().isEmpty(r)&&r}function Ft(e){if(e.skipRedirect)return;const t=e.item,r=t.get("isLibraryItem")&&t.parent,n=t.get("librarySectionKey")||(null==r?void 0:r.get("librarySectionKey"));if(!n)return void(0,g.WI)("appStore").dispatch((0,Ye.eo)());const i=function(e,t){const r=e.get("features").get(Ot.c.CONTENT),n=r.get("directories");if(!r||!n)return null;const i=n.find((e=>e.get("hubKey")===t||e.get("key")===t));return i?i.toJSON():null}(t.provider,n),s=(0,Mt.c)(t.server.toJSON(),t.provider.toJSON(),i);s?(0,g.WI)("appStore").dispatch((0,Ye.IB)({pathname:s,replace:!0})):(0,g.WI)("appStore").dispatch((0,Ye.eo)())}function Vt(e,t){t.skipRedirect||(0,g.WI)("appStore").dispatch((0,Ye.wL)({serverEntityID:e.server.entityID(),providerEntityID:e.provider.entityID(),key:e.get("key"),replace:!0}))}const _t=function(e){const t=Ve.c.execute("deleteFile",e);return t.done((function(){const t=e.item,r=Ut(t.get("parentKey"),e);if(!r)return void Ft(e);const n=new wt.c({containerKey:r.get("childrenKey")},{server:r.server,provider:r.provider,skipCache:!0});n.fetchRange({size:1}).then((()=>{if(n.getCollection().length>0)return void Vt(r,e);r.trigger("destroy",r,r.collection);const i=Ut(t.get("grandparentKey"),e);if(!i)return void Ft(jt(Lt({},e),{skipRedirect:!1}));const s=new wt.c({containerKey:i.get("childrenKey")},{server:i.server,provider:i.provider,skipCache:!0});s.fetchRange({size:1}).then((()=>{s.getCollection().length>0?Vt(i,jt(Lt({},e),{skipRedirect:!1})):Ft(e)}))}))})),t},Wt=function(e){const t=e.generator,r=v().result(t,"url")+"/"+e.ratingKey+"/enable",n=v().extend(t.server.getXHROptions(r),{type:"PUT"}),i=c().ajax(n).promise();return i.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem enabling this version.")})})),i},Bt=function(e){const t=e.generator,r=v().result(t,"url")+"/"+e.ratingKey+"/disable",n=function(){const e=new Ke.c({title:(0,He.c)("Remove Version"),message:(0,He.c)("Are you sure you want to delete this version? You can enable it again in Optimized Versions Settings."),confirmLabel:(0,He.c)("Remove"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});return le.c.trigger("show:modal",e),e}();return n.promise.then((function(){const e=v().extend(t.server.getXHROptions(r),{type:"PUT"}),i=c().ajax(e).promise();return i.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem disabling this version.")})})),i.always((function(){n.hide()})),i}))},Ht=function(e){const t=e.generator,r=e.ratingKey;let n=v().result(t,"url");r&&(n+="/"+r),n+="/reprocess";const i=v().extend(t.server.getXHROptions(n),{type:"PUT"}),s=c().ajax(i).promise();return s.fail((function(e){const t=r?(0,He.c)("There was a problem processing this item."):(0,He.c)("There was a problem processing these items.");le.c.trigger("show:alert",{type:"error",message:t})})),s},zt=function(e){const t=e.generator,r=function(e){const t=e.generator.get("title"),r=t?(0,He.c)("Removing this item will delete all versions created by {1}. Are you sure you want to continue?",t):(0,He.c)("Removing this item will delete all related versions. Are you sure you want to continue?"),n=new Ke.c({title:(0,He.c)("Delete Versions"),message:r,confirmLabel:(0,He.c)("Remove"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});return le.c.trigger("show:modal",n),n}(e);return r.promise.then((function(){const e=t.destroy();return e.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("Unable to stop generating these versions.")})})),e.always((function(){r.hide()})),e}))};var Gt=r(60976);const qt=function(e){const t=function(){const e=new Ke.c({title:(0,He.c)("Delete All Versions"),message:(0,He.c)("Are you sure you want to delete all versions? This cannot be undone."),confirmLabel:(0,He.c)("Delete"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});return le.c.trigger("show:modal",e),e}();let r=t.promise;return r=r.then((function(){const r="/playlists/generators?type="+Gt.c.LOCAL,n=v().extend(e.server.getXHROptions(r),{type:"DELETE"}),i=c().ajax(n).promise();return i.fail((function(e){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem deleting all versions.")})})),i.always((function(){t.hide()})),i.promise()})),r},Kt=function(e){const t=c().Deferred(),r=e.channel,n=r?r.server:e.server,i=e.silent;let s;if(r){const e=r.get("identifier");s=(e?"/system/appstore/apps/"+e:r.get("key"))+"/update"}else s="/system/appstore/updates";const a=c().ajax(n.getXHROptions(s));function o(e){i||le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem checking for updates.")}),t.reject(e)}return a.done((function e(r){const s=v().isObject(r)?r:Re.c.parseXML(r);if(s&&(s.message||s.Directory))if(s.message)i||le.c.trigger("show:alert",{type:"success",message:s.message}),t.resolve();else{Re.c.parseArray(s,"Directory");const t=s.Directory[0].key,r=c().ajax(n.getXHROptions(t));r.done(e),r.fail(o)}else o()})),a.fail(o),t.promise()};var Qt=r(11420);const $t=function(e){const t=c().Deferred(),r=e.channel,n=r.get("identifier"),i=(n?"/system/appstore/apps/"+n:r.get("key"))+"/uninstall",s=r.server.getXHROptions(i);function a(){const n=c().ajax(s);n.done((function(n){const i=v().isObject(n)?n:Re.c.parseXML(n);r.set("installed",!1),i.message&&!e.skipConfirmation&&le.c.trigger("show:alert",{type:"success",message:i.message}),t.resolve()})),n.fail((function(e){if(400===e.status){const e=new Ke.c({title:(0,He.c)("Unable to Uninstall Plugin"),message:(0,He.c)("This plugin could not be uninstalled, but you can disable it in the server settings."),confirmLabel:(0,He.c)("OK"),cancelLabel:(0,He.c)("Ignore")});e.promise.done((function(){(0,Qt.c)("serverSettings",{machineIdentifier:r.server.id,settingsSection:"settings",settingsGroup:"channels"})})),le.c.trigger("show:modal",e)}else le.c.trigger("show:alert",{type:"error",message:(0,He.c)("This plugin could not be uninstalled.")});t.reject(e)}))}if(e.skipConfirmation)a();else{const e=new Ke.c({title:(0,He.c)("Uninstall Plugin"),message:(0,He.c)("Are you sure you want to uninstall this plugin?")}),r=e.promise;r.done(a),r.fail((function(){t.reject()})),le.c.trigger("show:modal",e)}return t.promise()};var Yt=r(64892);const Xt=function(e){const t=e.cloudAccount,r=t.server.get("desktop").get("settings").get("PublishServerOnPlexOnlineKey"),n=c().Deferred();let i;if(!t.get("isWaiting")){const r=e.value?Yt._I:Yt.kv;t.set("remoteAccessState",r)}const s=t.previous("remoteAccessState"),a=r.save({PublishServerOnPlexOnlineKey:e.value},{timeout:0});return a.done((function r(){t.fetch().done((function(){const s=t.get("mappingState"),a=e.value&&s===Yt.Ge,o=!e.value&&s===Yt.Yr;s===Yt.QR||a||o?i||(i=window.setInterval(r,500)):(i=window.clearInterval(i),t.get("isWaiting")&&t.set("remoteAccessState",Yt.OO),n.resolve())}))})),a.fail((function(r){let i;i=e.value?(0,He.c)("There was a problem connecting your server."):(0,He.c)("There was a problem disconnecting your server."),le.c.trigger("show:alert",{type:"error",message:i}),t.set("remoteAccessState",s),n.reject(r)})),n.promise()},Jt=function(e){const t=e.cloudAccount,r={cloudAccount:t,value:!1};let n=Ve.c.execute("connectServer",r);return n=n.then((function(){return r.value=!0,Ve.c.execute("connectServer",r)})),n=n.then((function(){if(t.get("mappingError"))return c().Deferred().reject().promise()})),n};var Zt=r(59501);const er=function(e){const{cloudAccount:t,username:r,password:n,claim:i=!1}=e,s=c().Deferred(),a=t.server,o=(0,g.WI)("appModel"),l=o.get("user"),d=o.get("cloudServer"),u=a.get("accessToken");a.set("accessToken",l.get("authToken"));const p=i?function(e,t){const r=t.getXHROptions("/api/claim/token");let n=c().ajax(r).promise();return n=n.then((t=>{const{token:r}=Ie.c.parseXML(t),n=S.c.join("/myplex/claim",{token:r}),i=e.getXHROptions(n,{type:"POST"});return c().ajax(i).promise()})),n}(a,d):function(e,t,r){const n=S.c.join("/myplex/account",{username:e,password:t}),i=r.getXHROptions(n,{type:"PUT"});return c().ajax(i).promise()}(r,n,a);return p.done((e=>{const r=v().isObject(e)?e:Ie.c.parseXML(e);r&&"invalid"===r.signInState?(le.c.trigger("show:alert",{type:"error",message:(0,He.c)("The username or password is incorrect.")}),s.reject()):(a.set({myPlexSigninState:Zt.C1,myPlexUsername:l.get("email")}),t.set({signedIn:!0,username:l.get("email")}),s.resolve())})),p.fail((e=>{let r;a.set("accessToken",u),!0===t.get("signedIn")&&t.set("signedIn",!1),r=401===e.status?(0,He.c)("The username or password is incorrect."):(0,He.c)("There was a problem signing in to Plex."),le.c.trigger("show:alert",{type:"error",message:r}),s.reject(e)})),s.promise()};function tr(e){e.trigger("destroy",e,e.collection),e.cache.remove(e)}const rr=function(e){const t=g.WI("appModel").get("user"),r=e.device,n=e.server||function(e){const t=new Zt.default({machineIdentifier:e},{onlyIfCached:!0});if(!v().isEmpty(t))return t}(r.get("clientIdentifier"));let i;i=r?(0,He.c)("If you remove the server, all syncs and shares associated with the server will be lost and you will need to sign the server in again to restore access to Plex."):(0,He.c)("Are you sure you want to remove this server?");const s={title:(0,He.c)("Remove Server"),message:i,confirmLabel:(0,He.c)("Remove"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0};r&&(s.requireDoubleConfirm=!0,s.doubleConfirmMessage=(0,He.c)("Are you sure you want to remove this server?"),s.doubleConfirmLabel=(0,He.c)("Yes, I'm sure"));const a=new Ke.c(s);let o=a.promise;return o=o.then((function(){return function(){let e;if(r)e=r.destroy({wait:!0});else{const r="/api/servers/"+n.id,i=v().extend(t.server.getXHROptions(r),{type:"DELETE"});e=c().ajax(i)}if(n){if(n.get("connected")&&n.get("myPlexSigninState")===Zt.C1){const t=n.get("desktop").get("cloudAccount");e=e.then((function(){return t.fetch()})),e=e.then((function(){return function(e){const t=e.get("desktop").get("cloudAccount").destroy();return t.done((function(){e.set({accessToken:void 0,myPlexSigninState:Zt.Yj,myPlexSubscription:!1})})),t}(n)}))}!1===n.get("connected")?tr(n):e.always((function(){le.c.trigger("test:server",n),n.populate().fail((function(){tr(n)}))}))}return e.always((function(){a.hide()})),e.promise()}()})),le.c.trigger("show:modal",a),o};var nr=r(44212),ir=r(57512);const sr=(0,nr.Uh)("v4/query/reset");var ar=r(55336),or=r(34708),cr=r(44688),lr=r(96048),dr=r(11822),ur=r(39604),pr=r(96744),mr=r(81996),hr=r(64752),yr=r(31004),gr=r(34956),fr=r(54192),vr=r(59936),br=r(95944),Sr=r(86960),Pr=r(32380),Ir=r(12396),Er=r(40415);const wr=(0,ar.TL)({friends:or.c.reducer,metadataItem:cr.c.reducer,metadataItemState:lr.c.reducer,metadataLists:dr.c.reducer,metadataTimelineState:ur.c.reducer,user:Pr.c.reducer,serverAccounts:pr.c.reducer,serverActivities:mr.c.reducer,serverSections:fr.cp.reducer,serverDevices:yr.c.reducer,serverNowPlayingSessions:gr.c.reducer,serverDetails:hr.c.reducer,servers:vr.c.reducer,sharedItemSources:br.c.reducer,sharedServers:Sr.c.reducer,userLibraryAccess:Er.cp.reducer,viewState:Ir.c.reducer});var Cr=r(59382),Or=r(900),Mr=r(66480),Tr=r(3232),Dr=r(77664),kr=r(28768),xr=r(88524),Ar=r(99748),Rr=r(87844);const Nr=(0,ar.TL)({bandwidth:Dr.c.reducer,playHistory:kr.c.reducer,resources:xr.c.reducer,topPlayed:Ar.c.reducer,topUsers:Rr.c.reducer});var Lr=r(4992),jr=r(69096),Ur=r(95932),Fr=r(33696);const Vr=(0,ar.TL)({dvrSetup:Ur.cp.reducer,epgSettings:Fr.cp.reducer});var _r=r(13648),Wr=r(16256),Br=r(81564),Hr=r(22436),zr=r(98616),Gr=r(42412),qr=r(71040),Kr=r(87220),Qr=r(23236),$r=r(77560),Yr=r(31212),Xr=r(76592),Jr=r(48708),Zr=r(86368);const en=(0,ar.TL)({activity:Cr.c.reducer,advancedFilters:Or.c.reducer,curatedLists:Mr.c.reducer,customChannels:Tr.c.reducer,dashboard:Nr,directory:Lr.c.reducer,downloads:jr.c.reducer,dvrManagement:Vr,home:_r.c.reducer,importPlaylists:Wr.c.reducer,libraryManagement:Br.c.reducer,livetv:Hr.cp.reducer,metadataMultiselect:zr.c.reducer,optOuts:Gr.c.reducer,players:Kr.c.reducer,playHistory:qr.c.reducer,prePlay:Qr.c.reducer,showTracking:$r.c.reducer,twoFactorAuth:Yr.c.reducer,universalSearch:Xr.c.reducer,verificationEmail:Zr.c.reducer,whereToWatch:Jr.cp.reducer}),tn=(0,ar.TL)({core:wr,features:en}),rn=(0,nr.Uh)("v4/root/reset"),nn=function(){const e=(0,g.WI)("appStore"),t=(0,g.WI)("appModel"),r=t.get("ui"),n=t.get("user"),i=t.get("fakeRouter"),s=n.server;let a=n.clearAccessToken();return a=a.fail((()=>{b.c.warn("Failed to clear the access token and user storage")})).always((()=>{t.set("history",[]),e.dispatch(rn()),e.dispatch(sr()),r&&r.restoreDefaults(),i&&i.restoreDefaults(),M.c.abortAll(),n.signOut(),n.uninitialize(),n.initialize(),le.c.trigger("clear:servers"),e.dispatch((0,Ye.Ml)({budget:1/0})),le.c.trigger("clearAll:cache"),s.cache.store(s)})),(0,z.c)(a)};var sn=r(95188),an=r(65080),on=r(1692);const cn=function(e={}){const t=(0,g.WI)("appModel").get("user"),r=t.get("signedIn"),n=t.id!==e.homeUser.id,i=e.allowGuestLock,s=n||i,a=!1!==e.shouldUnlock;let o=r?Ve.c.execute("authenticateWithServer",e):Ve.c.execute("authenticateWithHash",e);return r&&s?o=o.then((t=>function(e,t){const r=(0,g.WI)("appModel").get("user");let n=Ve.c.execute("resetUser");return n=n.then((()=>{r.activateStoredUser(t.homeUser.id);const n=an.c.getActiveUser();n&&n.copyToModel(r),le.c.trigger("init:servers");const i={};return!1!==t.shouldUnlock&&(i.lockState=on.Z9.Unlocked),r.signIn(e,i)})),n.done((()=>{(0,g.WI)("metrics").trackEvent({event:sn.gl,interaction:!0})})),n}(t,e))):o.done((()=>{const e={};a&&(e.lockState=on.Z9.Unlocked),t.set(e)})),o.done((()=>{e.openAddManagedUser?(0,Qt.c)("plexHome",{},{addManagedUser:1}):n&&(0,Qt.c)("home")})),o};var ln=r(41064),dn=Object.defineProperty,un=Object.getOwnPropertySymbols,pn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,hn=(e,t,r)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function yn(e,t={}){return((e,t)=>{for(var r in t||(t={}))pn.call(t,r)&&hn(e,r,t[r]);if(un)for(var r of un(t))mn.call(t,r)&&hn(e,r,t[r]);return e})({includeSubscriptions:1,includeProviders:1,includeSettings:se.c.allowSyncSettings?1:0,includeSharedSettings:(0,ln.c)(e)?1:0},t)}var gn=Object.defineProperty,fn=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,Sn=(e,t,r)=>t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pn=(e,t)=>{for(var r in t||(t={}))vn.call(t,r)&&Sn(e,r,t[r]);if(fn)for(var r of fn(t))bn.call(t,r)&&Sn(e,r,t[r]);return e};const In=function(e){return e.headers=Pn(Pn({},A.c.getInstance()),e.headers||{}),c().ajax(e)},En=function(e){const t=e.homeUser,r=g.WI("appModel").get("user"),n=t.get("uuid")||r.get("uuid"),i=yn(r,{pin:e.pin}),s=S.c.join(["/api/v2/home/users/",n,"/switch"],i),a=t.server.getXHROptions(s,{type:"POST",xhrFields:{withCredentials:se.c.allowSSO}});return In(a)},wn=function(e){const t=c().Deferred().resolve().promise(),r=c().Deferred().reject().promise(),n=an.c.getActiveUser();if(!n)return r;const i=n.get("pin"),s=n.get("authToken");return i||e.pin?i===(0,g.WI)("appModel").get("user").hashPIN(e.pin,s)?t:r:t},Cn=function(e){const t=e.device,r=(0,He.c)("If you remove this device, you will need to sign in again on the device to restore access to Plex."),n=new Ke.c({title:(0,He.c)("Remove Device"),message:r,confirmLabel:(0,He.c)("Remove"),cancelLabel:(0,He.c)("Cancel"),async:!0,hasDanger:!0});let i=n.promise;return i=i.then((function(){return function(){const e=t.destroy({wait:!0});return e.fail((function(){le.c.trigger("show:alert",{type:"error",message:(0,He.c)("There was a problem removing this device.")})})),e.always((function(){n.hide()})),e.promise()}()})),le.c.trigger("show:modal",n),i};var On=r(9852);const Mn=function(e){return(0,z.c)(In({url:(0,On.wn)("/api/v2/users/signout"),headers:{"X-Plex-Token":e.accessToken},type:"DELETE",xhrFields:{withCredentials:!1}}))},Tn=function(){(0,g.WI)("metrics").trackEvent({event:sn.SW,interaction:!0});const e=se.c.allowSSO,t=(0,g.WI)("appModel").get("user").get("authToken");return(0,z.c)(e?Mn({accessToken:t}):c().Deferred().resolve().promise()).then((()=>Ve.c.execute("resetUser"))).then((()=>(an.c.restoreDefaults(),an.c.save()))).then((()=>{e&&Mn({accessToken:t}),le.c.trigger("init:servers")}))};function Dn(){return Ve.c.registerAll(n),c().Deferred().resolve().promise()}function kn(){const e=(0,g.WI)("appModel");return(0,Ce.c)([e.get("settings").populate(),e.get("deviceSettings").populate()])}const xn=ce.c.extend({getStorage(){},get(e){return this._catchStorageError((t=>{const r=window.PLEXWEB,n=r&&e in r?r[e]:t.getItem(e);if(null==n)throw new Error(`${e} is not in ${this.name}`);return n}))},set(e,t){return this._catchStorageError((r=>{if(!e)throw new Error(`Unable to set value in ${this.name} without a key`);if(null==t)throw new Error(`Unable to set null or undefined value for ${e} in ${this.name}. Use the remove function.`);return r.setItem(e,t)}))},remove(e){return this._catchStorageError((t=>t.removeItem(e)))},clear(){return this._catchStorageError((e=>e.clear()))},_catchStorageError(e){const t=c().Deferred();try{t.resolve(e(this.getStorage()))}catch(e){b.c.warn(e.message),t.reject(e)}return t.promise()}}),An=xn.extend({name:"BasicVolatileStorage",initialize(){const e={};this.api={getItem:t=>e[t],setItem(t,r){e[t]=r},removeItem(t){delete e[t]},clear(){for(const t in e)e.hasOwnProperty(t)&&delete e[t]}}},getStorage(){return this.api}}),Rn=new(r(23247).c)({interface:["get","set","remove","clear"]});var Nn=r(81240);function Ln(e,t){return we.c.get(e).then((e=>(0,Nn.c)(e,t)),(()=>{if(t)return c().Deferred().resolve(t).promise()}))}function jn(e,t){return we.c.set(e,JSON.stringify(t))}var Un=Object.defineProperty,Fn=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable,Wn=(e,t,r)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bn=(e,t)=>{for(var r in t||(t={}))Vn.call(t,r)&&Wn(e,r,t[r]);if(Fn)for(var r of Fn(t))_n.call(t,r)&&Wn(e,r,t[r]);return e};const Hn=function(e){return e.isDirty=!0,Ln(an.c.storageKey).then((t=>{if(t.users)return t.users.forEach((t=>{t.experienceSettings=Bn(Bn({},t.experienceSettings),e)})),jn(an.c.storageKey,t)}))};var zn=Object.defineProperty,Gn=Object.getOwnPropertySymbols,qn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Qn=(e,t,r)=>t in e?zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$n=(e,t)=>{for(var r in t||(t={}))qn.call(t,r)&&Qn(e,r,t[r]);if(Gn)for(var r of Gn(t))Kn.call(t,r)&&Qn(e,r,t[r]);return e};const Yn=["homeSettings"],Xn=function(){const e=(0,g.WI)("StoredUserExperienceSettingsModel"),t=Object.keys($n($n({},e.prototype.syncedAttrs),e.prototype.syncedRelations)),r=v().without(t,...Yn),n=Ln("experience").then((e=>{const t=v().pick(e,r);return Hn(t).then((()=>we.c.remove("experience")))}));return(0,z.c)(n)};var Jn=r(16872),Zn=r(41932),ei=r(9248),ti=r(29680),ri=r(33428),ni=r(35860),ii=r(32132);const si=Zn.c.extend({name:"DeviceSettingsModel",storageKey:"deviceSettings",sessionAttrs:{isSaving:Jn.c.boolean,saveError:Jn.c.object},syncedAttrs:{autoLogin:Jn.c.boolean,chromecastAppID:Jn.c.string,chromecastCustomAppID:Jn.c.string,sonosCustomBaseURL:Jn.c.string,debugAdKind:Jn.c.integer,debugLevel:Jn.c.integer,communityProvider:Jn.c.string,searchProviderEnvironment:Jn.c.oneOf(...Object.values(ni.tE)),showMetadataCopyKeyAction:Jn.c.boolean,debugVideoQualityOverlay:Jn.c.boolean,directPlay:Jn.c.boolean,directStream:Jn.c.boolean,rejectDirectConnections:Jn.c.boolean,restorePlayQueue:Jn.c.object,shouldSyncSettings:Jn.c.boolean,hasDismissedServerDownloadMessage:Jn.c.boolean,dismissedUnclaimedServers:Jn.c.object,dismissedServerUpdateVersions:Jn.c.object,volume:Jn.c.integer,serverUpdateDismissedVersion:Jn.c.string},defaults:()=>({isSaving:!1,saveError:null,autoLogin:!1,chromecastAppID:ii.c.PRODUCTION,debugAdKind:ti.c.NONE,debugLevel:ri.c.DISABLED,communityProvider:ei.G.Production,searchProviderEnvironment:ni.tE.Production,showMetadataCopyKeyAction:!1,debugVideoQualityOverlay:!1,directPlay:!0,directStream:!0,rejectDirectConnections:!1,restorePlayQueue:null,shouldSyncSettings:se.c.allowSyncSettings,hasDismissedServerDownloadMessage:!1,dismissedUnclaimedServers:{},dismissedServerUpdateVersions:{},volume:90})});var ai=Object.defineProperty,oi=Object.getOwnPropertySymbols,ci=Object.prototype.hasOwnProperty,li=Object.prototype.propertyIsEnumerable,di=(e,t,r)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ui=(e,t)=>{for(var r in t||(t={}))ci.call(t,r)&&di(e,r,t[r]);if(oi)for(var r of oi(t))li.call(t,r)&&di(e,r,t[r]);return e};const pi=["debugVideoQualityOverlay","restorePlayQueue","volume"],mi=function(){const e=si.prototype.storageKey,t=Ln("experience").then((t=>{const r=v().pick(t,pi);if(0!==Object.keys(r).length)return Ln(e,{}).then((t=>{const n=ui(ui({},t),r);return jn(e,n)}))}));return(0,z.c)(t)};var hi=r(37660),yi=r(97612);const gi={"home.continue":[/^(movie|tv)\.inprogress\.([0-9]+)/],"home.movies.recent":[/^movie\.recentlyadded\.([0-9]+)/],"home.music.recent":[/^music\.recent\.added\.([0-9]+)/],"home.photos.recent":[/^photo\.recent\.([0-9]+)/],"home.ondeck":[/^tv\.ondeck\.([0-9]+)/],"home.television.recent":[/^tv\.recentlyadded\.([0-9]+)/],"home.videos.recent":[/^video\.recent\.([0-9]+)/]};function fi(e,t){return t.some((t=>t.test(e)))}var vi=r(22032),bi=r(82660),Si=r(4448),Pi=r(72484),Ii=r(40716),Ei=r(24696);function wi(e){const t=window.navigator;let r;return e?r=[e]:t.languages?r=t.languages:t.language?r=[t.language]:t.userLanguage&&(r=[t.userLanguage]),(0,Ei.c)(r)||"en"}var Ci=r(33964),Oi=r(26684),Mi=r(85612),Ti=r(72884),Di=r(17600),ki=r(71684),xi=r(11364);const Ai=xi.c.extend({name:"ReminderModel",syncedAttrs:{data:Jn.c.object,id:Jn.c.string.isRequired,remindAfter:Jn.c.string.isRequired,times:Jn.c.integer.isRequired}}),Ri=ki.c.extend({name:"ReminderCollection",model:Ai});var Ni=r(70432),Li=Object.defineProperty,ji=Object.defineProperties,Ui=Object.getOwnPropertyDescriptors,Fi=Object.getOwnPropertySymbols,Vi=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,Wi=(e,t,r)=>t in e?Li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bi=(e,t)=>{for(var r in t||(t={}))Vi.call(t,r)&&Wi(e,r,t[r]);if(Fi)for(var r of Fi(t))_i.call(t,r)&&Wi(e,r,t[r]);return e},Hi=(e,t)=>ji(e,Ui(t));const zi=Oi.c.ORIGINAL,Gi=Zn.c.extend({name:"UserExperienceSettingsModel",sessionAttrs:Hi(Bi({},Ni.c.sessionAttrs),{isRemoteSchemaVersionNewer:Jn.c.boolean}),syncedAttrs:Hi(Bi({},Ni.c.syncedAttrs),{schemaVersion:Jn.c.integer,language:Jn.c.string,playThemeMusic:Jn.c.boolean,allowHttpFallback:Jn.c.string,timeFormat:Jn.c.string,dismissedWhatsNewFeatures:Jn.c.object,messageRecipients:Jn.c.array,dismissProfileGetStartedCard:Jn.c.boolean,hasSeenViewStateSyncModal:Jn.c.boolean,autoAdjustQuality:Jn.c.boolean,remoteSmallVideoAtOriginalQuality:Jn.c.boolean,useHomeStreamingRecommendedSettings:Jn.c.boolean,localQuality:Jn.c.integer,remoteQuality:Jn.c.integer,audioBoost:Jn.c.integer,subtitleColor:Jn.c.string,subtitlePosition:Jn.c.string,subtitleSize:Jn.c.integer,subtitlesBurnLevel:Jn.c.string,extrasPrefixCount:Jn.c.integer,audioForceMultiChannel:Jn.c.boolean,forceTranscodeProtocolHLS:Jn.c.boolean,autoPlay:Jn.c.boolean,calendarViewType:Jn.c.string,columnAdjustment:Jn.c.integer,columnWidthMultiplier:Jn.c.float,dashboardNowPlayingShowDetails:Jn.c.boolean,hasDismissedDVRUpsell:Jn.c.boolean,hasDismissedServerDashboardUpsell:Jn.c.boolean,hasDismissedHubPromotionWarning:Jn.c.boolean,isSidebarCollapsed:Jn.c.boolean,libraryTableColumns:Jn.c.object,listStyles:Jn.c.object,prePlayListStyles:Jn.c.object,directoryListStyles:Jn.c.object,directoryTableColumns:Jn.c.object,savedDirectoryListKeys:Jn.c.object,relayReminders:Jn.c.object,showAdvancedSettings:Jn.c.boolean,showPrePlayArtwork:Jn.c.boolean,musicDownloadQuality:Jn.c.integer,videoDownloadQuality:Jn.c.integer,recentSearches:Jn.c.array,searchExperiments:Jn.c.object,searchAllServers:Jn.c.boolean,libraryRoutes:Jn.c.object,hasDismissedNewsSunsetBanner:Jn.c.boolean,hasDismissedCustomHomeSunset:Jn.c.boolean}),syncedRelations:Hi(Bi({},Ni.c.syncedRelations),{reminders:{relationClass:Ri}}),defaults:()=>Hi(Bi({},Ni.c.defaults),{isRemoteSchemaVersionNewer:!1,language:wi(),playThemeMusic:!1,allowHttpFallback:bi.c.NEVER,timeFormat:"h:mma",dismissedWhatsNewFeatures:{},messageRecipients:[],dismissProfileGetStartedCard:!1,hasSeenViewStateSyncModal:!1,autoAdjustQuality:!1,remoteSmallVideoAtOriginalQuality:!0,useHomeStreamingRecommendedSettings:!0,localQuality:zi,remoteQuality:11,audioBoost:vi.WE,subtitleColor:Si.c.WHITE,subtitlePosition:Pi.c.BOTTOM,subtitleSize:100,subtitlesBurnLevel:Ii.c.AUTO,extrasPrefixCount:0,audioForceMultiChannel:!1,forceTranscodeProtocolHLS:!1,autoPlay:!0,calendarViewType:Di.OK,columnAdjustment:0,columnWidthMultiplier:1.5,dashboardNowPlayingShowDetails:!1,hasDismissedServerDashboardUpsell:!1,isSidebarCollapsed:!1,libraryTableColumns:{},listStyles:{[Mi.Qh]:{episode:Ti.TABLE,track:Ti.TABLE},[Mi.I9]:{track:Ti.TABLE}},prePlayListStyles:{},directoryListStyles:{},directoryTableColumns:{},savedDirectoryListKeys:{},relayReminders:{},showAdvancedSettings:!1,showPrePlayArtwork:!1,musicDownloadQuality:Oi.c.ORIGINAL,videoDownloadQuality:Oi.c.ORIGINAL,recentSearches:[],searchExperiments:{},searchAllServers:!1,libraryRoutes:{},hasDismissedNewsSunsetBanner:!1,hasDismissedCustomHomeSunset:!1}),initialize(){this.set({schemaVersion:Gi.schemaVersion})},augmentResponse(e){if(e.schemaVersion>Gi.schemaVersion)return b.c.warn(`[Settings] Received settings with schemaVersion of ${e.schemaVersion}; expected ${Gi.schemaVersion} or less.  Settings sharing is now disabled.`),Hi(Bi({},this.toJSON()),{isRemoteSchemaVersionNewer:!0});e=ns(e);const t=this.get("isDirty"),r=this.get("updatedAt"),n=(0,Ci.c)(e.updatedAt),i=r&&n&&r<n;if(t&&r===n||r&&n&&r>n)return this.toJSON();t&&i&&(e.isDirty=!1),e.isRemoteSchemaVersionNewer=!1;const s=this.has("dismissedWhatsNewFeatures");return!e.hasOwnProperty("dismissedWhatsNewFeatures")&&s&&(b.c.warn("[Settings] Overwriting dismissedWhatsNewFeatures with local value."),e.dismissedWhatsNewFeatures=this.get("dismissedWhatsNewFeatures")),e}},{schemaVersion:12}),qi=Gi;var Ki=r(22308);function Qi(e){if(e)return e.split("--")}function $i(e){Object.keys(e).forEach((t=>{const r=function(e){const t=Qi(e);if(t.length<3)return e;const[r,n,i,s]=t,a=(0,Ki.c)(i);return(0,yi.c)(r,n,a,s)}(t);if(r!==t){const n=e[t];e[r]=n,delete e[t]}}))}var Yi=r(96388),Xi=r(80896),Ji=r(54844);function Zi(e){e.isHidden&&!e.hiddenAt&&(e.hiddenAt=Date.now())}const es={1:rs,2:function(e){const{lastSourcePivots:t,savedPivotParams:r,sidebarSettings:{pinnedSources:n}={}}=e;return t&&$i(t),r&&$i(r),n&&n.forEach((e=>{const t=Qi(e.key);if(!t)return;const r=t.pop(),n=(0,Ki.c)(r);if(n!==r){const r=(0,yi.c)(...t,n);e.directoryID||(e.directoryID=n),e.key=r}})),e},3:rs,4:function(e){if(!e.relayReminders)return e;e.reminders=e.reminders||[];for(const t in e.relayReminders){const r=(0,Ji.c)(Xi.c.Relay,t);if(e.reminders.some((e=>e.id===r)))continue;const n=e.relayReminders[t],i={id:r,remindAfter:(0,Yi.c)(n.remindAfter).toISOString(),times:Math.max(0,n.times-1)};e.reminders.push(new Ai(i).toJSON())}return delete e.relayReminders,e},5:rs,6:rs,7:rs,8:rs,9:rs,10:rs,11:function(e){const{autoPinnedProviders:t}=e;return t&&(r=t).forEach(((e,t)=>{const n=function(e){const t=null==e?void 0:e.split("--");if(t.length>2)return e;const[r,n]=t,i=ni._u(n,ni.Sg)?hi.GG:hi.qU;return(0,yi.c)(r,n,i)}(e);n!==e&&r.splice(t,1,n)})),e;var r},12:rs},ts=[function(e){if(null!=e.autoHomeHubsEnabled)return e;const t=e.homeSettings;return t&&t.hasCustomizations?e.autoHomeHubsEnabled=!1:e.autoHomeHubsEnabled=!0,e},function(e){const t=e.sidebarSettings;t&&t.pinnedSources&&t.pinnedSources.forEach(Zi);const r=e.homeSettings;return r&&r.hubs&&r.hubs.forEach(Zi),e},function(e){const{audioBoost:t}=e;if(null!=t){const r=t===vi.Iv?vi.WE:vi.ie,n=qi.prototype.defaults().audioBoost;r!==t&&r!==n&&(e.audioBoost=r)}return e},function(e){var t;const r=e.homeSettings;return r&&!e.autoHomeHubsEnabled&&(r.hubs=null==(t=r.hubs)?void 0:t.reduce(((e,t)=>{const r=function(e){for(const t in gi)if(fi(e,gi[t]))return t;return e}(t.hubIdentifier);return"/hubs/promoted"===t.directoryKey&&t.provider.identifier===ni.Qh?e.find((e=>{var n,i,s,a;return e.hubIdentifier===r&&(null==(n=e.provider)?void 0:n.identifier)===(null==(i=t.provider)?void 0:i.identifier)&&(null==(s=e.server)?void 0:s.machineIdentifier)===(null==(a=t.server)?void 0:a.machineIdentifier)}))||(t.directoryKey="/hubs",t.hubIdentifier=r,e.push(t)):e.push(t),e}),[])),e}];function rs(e){return e}function ns(e={}){let t=e.schemaVersion||0;for(;t<qi.schemaVersion;)e.schemaVersion=++t,es[t](e);return ts.forEach(((t,r)=>{try{t(e)}catch(e){b.c.error("[User] Setting migration[%d] error",r,e)}})),e}function is(){const e=Ln(an.c.storageKey).then((e=>{if(e.users&&e.users.some((e=>e.experienceSettings&&e.experienceSettings.schemaVersion!==qi.schemaVersion)))return e.users.forEach((e=>{e.experienceSettings=ns(e.experienceSettings)})),jn(an.c.storageKey,e)}));return(0,z.c)(e)}const ss="samenetwork",as="always",os=Zn.c.extend({name:"DesktopSettingsModel",storageKey:"settingsv2",syncedAttrs:{preferInsecureConnections:Jn.c.string,"syncQuality!video":Jn.c.integer,"syncQuality!music":Jn.c.integer,"syncQuality!photo":Jn.c.integer,viewedUnclaimedServers:Jn.c.list,dismissedUnclaimedServers:Jn.c.list},defaults:()=>({preferInsecureConnections:se.c.shouldPreferInsecureLocalConnections?ss:"never","syncQuality!video":8,"syncQuality!music":2,"syncQuality!photo":2,viewedUnclaimedServers:[],dismissedUnclaimedServers:[]})});var cs=Object.defineProperty,ls=Object.getOwnPropertySymbols,ds=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,ps=(e,t,r)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ms=(e,t)=>{for(var r in t||(t={}))ds.call(t,r)&&ps(e,r,t[r]);if(ls)for(var r of ls(t))us.call(t,r)&&ps(e,r,t[r]);return e};const hs=["autoLogin","chromecastAppID","chromecastCustomAppID","debugLevel","directPlay","directStream","rejectDirectConnections","serverUpdateDismissedVersion"],ys=function(){const e=os.prototype.storageKey,t=si.prototype.storageKey,r=Ln(e).then((r=>{const n=v().pick(r,hs);if(0!==Object.keys(n).length)return Ln(t,{}).then((e=>{const r=ms(ms({},e),n);return jn(t,r)})).then((()=>jn(e,v().omit(r,hs))))}));return(0,z.c)(r)},gs=["allowHttpFallback","audioBoost","language"],fs=function(){const e=Ln(os.prototype.storageKey).then((e=>{const t=v().pick(e,gs);if(0!==Object.keys(t).length)return Hn(t).then((()=>jn(os.prototype.storageKey,v().omit(e,gs))))}));return(0,z.c)(e)},vs="plexTestToken";function bs(){const e=c().Deferred(),t=we.c.set(vs,1);return t.done((()=>{we.c.remove(vs),e.resolve()})),t.fail((t=>{const r=new An;b.c.warn(`Storage module swapped for ${r.name} due to exception: "${t}"`),Rn.register(r),we.c.register(r,{ignorePrevious:!0}),e.resolve()})),e.promise()}function Ss(){return function(){const e=c().Deferred(),t=Rn.get("myPlexAccessToken");return t.done((()=>{window.PLEXWEB&&window.PLEXWEB.myPlexAccessToken||we.c.register(Rn.getInstance())})),t.always((()=>{e.resolve()})),e.promise()}().then(bs).then(ys).then(mi).then(Xn).then(fs).then(is)}var Ps=r(72152),Is=r(89212);const Es={[Is.FAIRPLAY]:Ps.FAIRPLAY,[Is.PLAYREADY]:Ps.PLAYREADY,[Is.WIDEVINE]:Ps.WIDEVINE};function ws(e,t){return window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess(e,t):Promise.reject(new Error("NotSupportedError"))}function Cs(e,t,r){return window.MediaKeys||window.WebKitMediaKeys||window.MSMediaKeys?new Promise(((n,i)=>{const{audioCapabilities:s=[],videoCapabilities:a=[]}=r[0],o=s.concat(a).map((e=>e.contentType));o&&o.length&&o.every((r=>e.isTypeSupported(t,r)))?n({keySystem:t}):i(new Error("NotSupportedError"))})):Promise.reject(new Error("NotSupportedError"))}const Os=function(e,t=Object.values(Is)){const{audioCapabilities:r,videoCapabilities:n}=e,i=[{initDataTypes:["cenc"],audioCapabilities:r,videoCapabilities:n}],s=c().Deferred(),a=window.WebKitMediaKeys,o=a?Cs.bind(null,a):ws,l=t.map((e=>o(e,i)));return Promise.allSettled(l).then((e=>{const r=e.reduce(((e,r,n)=>{const{status:i,reason:s,value:a}=r;return"fulfilled"===i?((0,b.c)("[Player] %s is available",a.keySystem),e.push(a.keySystem)):(0,b.c)("[Player] %s is unavailable: %s",t[n],s.message),e}),[]);r.length?s.resolve(r):s.reject()})),s.promise()},Ms=function(){return Os({videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}).then((e=>{const t=function(e){let t;for(const r of e)if(t=Es[r],t)break;return t}(e);return(0,b.c)("[Player] Supported key systems:",e),(0,b.c)("[Player] Selected DRM type:",t),t}))};var Ts=r(83860);function Ds(){const e=(0,g.WI)("appModel"),t=se.c.drmType;return(t!==Ps.NONE?c().Deferred().resolve(t).promise():(0,z.c)(Ms())).then((t=>{e.set("drmType",t),Ts.c.setOption("drmType",t)}),(()=>{e.unset("drmType"),Ts.c.setOption("drmType",Ps.NONE)}))}var ks=r(87392),xs=r.n(ks),As=r(89448),Rs=r(419),Ns=r(82852);const Ls=function(){const{hashParams:e}=(0,G.c)(window.location.href),t=xs().parse(e.substr(1)),r=(0,Ci.c)(t.pinID);if(r){const e=(0,g.WI)("appModel");(0,Ns.c)(e).set({pinIDInitial:r}),(0,As.SS)(),window.history.replaceState(null,null,(0,Rs.c)(window.location.href,"pinID"))}return c().Deferred().resolve().promise()};var js=r(75560);function Us(){const e=(0,g.WI)("fullscreenManager").initialize({dispatchEnterFullscreen(){(0,g.WI)("appStore").dispatch((0,js.sR)())},dispatchExitFullscreen(){(0,g.WI)("appStore").dispatch((0,js.G1)())}});return(0,z.c)(e)}var Fs=r(39616),Vs=r.n(Fs);function _s(){const e=(0,g.WI)("keyboardShortcuts");let t=!0;function r(r,n,i){if(t||n instanceof window.KeyboardEvent&&"esc"===i)return e[r.fn](e,n,i)}return le.c.on("anyModalOpen",(()=>{t=!1})),le.c.on("allModalsClosed",(()=>{t=!0})),e.shortcuts.forEach((e=>{Vs().bind(e.keys,r.bind(null,e))})),c().Deferred().resolve().promise()}var Ws=r(37952);function Bs(){const e=(0,g.WI)("settingFinder").find("language");return Ts.c.setOption("language",e),(0,z.c)(Ws.c.load(e))}const Hs="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=";var zs=r(86796),Gs=r(95008);const qs=["touchstart","mousedown","click","keydown","keypress"];function Ks(){function e(){qs.forEach((t=>{document.body.removeEventListener(t,e,!0)}));const t=(0,zs.i_)("audio",!0);function r(){t.removeEventListener("playing",r),t.removeEventListener("error",r),t.src="",t.removeAttribute("src"),(0,zs.Ah)(t)}t.addEventListener("playing",r),t.addEventListener("error",r),t.src=Hs;const n=t.play();n&&n.then&&n.catch((()=>{}))}return(0,Gs.uG)()||qs.forEach((t=>{document.body.addEventListener(t,e,!0)})),c().Deferred().resolve().promise()}var Qs=r(16728);function $s(e){return e.get("isFullOwnedServer")||e.get("isFullServer")}function Ys(){let e;return Pe.c.hasWebSocket&&(e=new Ue.c({name:"MediaServerEventManager",appModel:(0,g.WI)("appModel"),isValidServer:$s,supportsLongPolling:!1,allowMultipleConnections:se.c.allowMultipleWebSocketConnections,ServerEventConnection:(0,g.WI)("mediaServerEventConnection"),ServerRetryManager:Qs.c}),e.start()),c().Deferred().resolve().promise()}const Xs=ce.c.extend({mixins:de.c,name:"AbstractReporter",enabled:!1,destroyed:!1,_suspended:!1,initialize(e={}){!1!==e.enabled&&this.enable()},hasSupport:()=>!0,enable(){this.enabled||this.destroyed||!this.hasSupport()||(this.enabled=!0,this.listenTo(le.c,{"log:message":this.onLog,"log:group":this.onLog,"log:groupCollapsed":this.onLog,"log:groupEnd":this.onLog}),this.onEnabled())},disable(){this.enabled&&(this.enabled=!1,this.stopListening(),this.onDisabled())},destroy(){this.destroyed||(this.disable(),this.destroyed=!0,this.onDestroyed())},_suspend(){this._suspended||(this._suspended=!0,this.onSuspended())},_resume(){this._suspended&&(this._suspended=!1,this.onResumed())},onLog(e){if(this._suspended)Pe.c.hasConsole&&window.console.warn("[Logging] Ignored log reentrancy:",JSON.stringify(e));else{switch(this._suspend(),e.type){case"log:message":this.onLogMessage(e);break;case"log:group":this.onLogGroup(e);break;case"log:groupCollapsed":this.onLogGroupCollapsed(e);break;case"log:groupEnd":this.onLogGroupEnd(e)}this._resume()}},onLogMessage(){},onLogGroup(){},onLogGroupCollapsed(){this.onLogGroup.apply(this,arguments)},onLogGroupEnd(){},onEnabled(){},onDisabled(){},onResumed(){},onSuspended(){},onDestroyed(){}}),Js=Xs,Zs={[b.c.LEVEL_LOG]:"log",[b.c.LEVEL_DEBUG]:"debug",[b.c.LEVEL_INFO]:"info",[b.c.LEVEL_WARN]:"warn",[b.c.LEVEL_ERROR]:"error"},ea=Js.extend({name:"ConsoleReporter",hasSupport:()=>Pe.c.hasConsole,onLogMessage(e){const t=e.message,r=Zs[e.level];(window.console[r]||window.console.log).call(window.console,t)},onLogGroup(e){(window.console.group||window.console.log).call(window.console,e.message)},onLogGroupCollapsed(e){(window.console.groupCollapsed||window.console.log).call(window.console,e.message)},onLogGroupEnd(){window.console.groupEnd&&window.console.groupEnd()}});function ta(){return new ea,c().Deferred().resolve().promise()}var ra=r(38668);function na(){(0,b.c)("[Servers] Initializing..."),function(){const e=(0,g.WI)("appModel"),t=e.get("servers"),r=e.get("cloudServer");r.addConnection((0,ra.c)()),t.add(r)}(),function(e){const t=(0,g.WI)("appModel"),r=t.get("servers"),n=an.c.getActiveServers();n&&n.each((e=>{if(e.get("connections").length)try{const n=new Zt.default(e.toJSON(),{parent:t}),i=n.get("connections");i.reset(i.filter((e=>!e.get("relay")))),!n.get("isMobileServer")&&i.length>0&&(sa(n),r.add(n))}catch(e){b.c.warn(e)}}))}(),function(){const e=(0,g.WI)("appModel"),t=e.get("servers"),r=se.c.primaryServer;if(!r)return;const n=new Zt.default({machineIdentifier:r.machineIdentifier,friendlyName:r.name,isShared:r.shared,superToken:r.superToken,accessToken:r.accessToken,sourceTitle:r.sourceTitle},{parent:e});n.addConnection({scheme:r.scheme,address:r.address,port:r.port}),t.add(n)}(),function(){const e=(0,g.WI)("appModel"),t=e.get("servers"),r=new Zt.default({isBundled:!0},{parent:e});r.addConnection({scheme:window.location.protocol.replace(":",""),address:window.location.hostname,port:window.location.port,isBundled:!0}),sa(r),t.add(r)}(),function(){if(!se.c.allowLoopbackDiscovery)return;const e=(0,g.WI)("appModel"),t=e.get("servers"),r=new Zt.default({},{parent:e});r.addConnection({scheme:"http",address:"127.0.0.1",port:"32400"}),sa(r),t.add(r)}(),(0,g.WI)("serverManager").start(),(0,g.WI)("primaryServerManager").start(),(0,g.WI)("serverConnectionManager").start(),(0,g.WI)("companionServerManager").start(),(0,g.WI)("providerManager").start(),(0,g.WI)("serverUpdateManager").start(),(0,b.c)("[Servers] Finished initialization")}function ia(){(0,b.c)("[Servers] Clearing...");const e=(0,g.WI)("appModel"),t=e.get("servers");(0,g.WI)("serverManager").stop(),(0,g.WI)("primaryServerManager").stop(),(0,g.WI)("serverConnectionManager").stop(),(0,g.WI)("serverConnectionTestManager").reset(),(0,g.WI)("companionServerManager").stop(),(0,g.WI)("providerManager").stop(),(0,g.WI)("serverUpdateManager").stop(),t.uninitialize(),t.reset(),t.initialize(),e.unset("primaryServer"),e.unset("companionServer")}function sa(e){const t=e.get("connections").map((e=>e.get("uri")));(0,b.c)("[Servers]","Initialize server",e.get("accessToken")?"with token,":"without token,",v().compact([e.get("debugName"),e.get("machineIdentifier"),...t]).join(", "))}function aa(){return na(),le.c.on("clear:servers",ia),le.c.on("init:servers",na),c().Deferred().resolve().promise()}const oa=ce.c.extend({mixins:de.c,announcementsUpdateDelay:36e5,initialize(){this.user=(0,g.WI)("appModel").get("user"),v().bindAll(this,"updateAnnouncements","onSignedInChange")},start(){const e=v().debounce(this.onSignedInChange);this.listenTo(this.user,"change:signedIn",e),this.user.populate().fail(e)},stop(){window.clearTimeout(this.announcementsUpdateTimeout),this.user.get("desktop").get("announcements").clear(),this.stopListening()},updateAnnouncements(){this.user.get("restricted")||this.user.get("anonymous")||!this.user.server.get("isConnected")||(this.user.get("desktop").get("announcements").fetch(),this.announcementsUpdateTimeout&&window.clearTimeout(this.announcementsUpdateTimeout),this.announcementsUpdateTimeout=window.setTimeout(this.updateAnnouncements,this.announcementsUpdateDelay))},onSignedInChange(){this.user.get("desktop").get("announcements").clear(),this.updateAnnouncements()}});var ca=r(45771),la=r(8284);const da=["plex_tv_auth","plex_tv_lang"];var ua=r(84676),pa=r(81764),ma=Object.defineProperty,ha=Object.defineProperties,ya=Object.getOwnPropertyDescriptors,ga=Object.getOwnPropertySymbols,fa=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable,ba=(e,t,r)=>t in e?ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Sa=ce.c.extend({mixins:de.c,initialize(e){this.user=e,this.debouncedChangeTimeout=null},start(){const e=this.user;this.previousUserID=e.id,this.listenTo(e,{change:this.onUserChange,"change:hasInvalidToken":this.onHasInvalidTokenChange,"change:isSignedIn":this.onIsSignedInChange}),this.listenTo(le.c,{[`cloudServer:${la._8}`]:this.onNotifyAccountChange});const t=e.get("hasInvalidToken"),r=e.get("isSignedIn");t&&this.onHasInvalidTokenChange(e,t),r&&this.onIsSignedInChangeHandleToken(e,r);const n=(0,g.WI)("settingFinder").find("autoLogin")||e.get("isUnlocked");(0,b.c)("[UserManager] autoLogin",n),n||this._lockIfInHome()},handleInvalidToken(){const e=new Ke.c({title:(0,He.c)("Invalid Credentials"),message:(0,He.c)("Your credentials have expired. Please sign in again."),confirmLabel:(0,He.c)("OK"),cancelLabel:(0,He.c)("Ignore")});e.promise.done((()=>{(0,Qt.c)("login")})),le.c.trigger("show:modal",e)},_lockIfInHome(){const e=an.c.getActiveUser();(null==e?void 0:e.get("home"))&&this.user.set("lockState",on.Z9.Locked)},_updateUser(e,t){if(t){const r={};t.id!==e.id&&(r.included=["experienceSettings"]),t.copyFromModel(e,r)}else an.c.get("users").add(e.toJSON(),{parse:!0});an.c.debouncedSave()},onHasInvalidTokenChange(e,t){t&&this.handleInvalidToken()},onUserChange(e){this.debouncedChangeTimeout&&window.clearTimeout(this.debouncedChangeTimeout);const t=an.c.getActiveUser();this.debouncedChangeTimeout=window.setTimeout(this._updateUser.bind(this,e,t),0)},onIsSignedInChange(e,t){this.onIsSignedInChangeHandleToken(e,t),this.onIsSignedInChangeHandleSyncSettings(e,t),this.onIsSignedInChangeHandlePopulateUser(e,t)},onIsSignedInChangeHandleToken(e,t){var r;if(this.stopListening(e,"change:hasInvalidToken",this.onHasInvalidTokenChange),t){if(t&&e.get("isLocked")&&(this.previousUserID=e.id),t&&e.get("restricted")&&document.cookie.split(";").forEach((e=>{const[t]=e.trim().split("=");t&&!da.includes(t)&&(document.cookie=`${t}=; Domain=plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${t}=; Domain=.plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${t}=; Domain=.app.plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`)})),e.get("isFullUser")&&t){const t=e.server.getXHROptions("/api/claim/subscribe");c().ajax((r=((e,t)=>{for(var r in t||(t={}))fa.call(t,r)&&ba(e,r,t[r]);if(ga)for(var r of ga(t))va.call(t,r)&&ba(e,r,t[r]);return e})({},t),ha(r,ya({type:"POST"}))))}}else e.get("hasInvalidToken")&&this.handleInvalidToken()},onIsSignedInChangeHandleSyncSettings(e,t){if(!t)return;const r=(0,g.WI)("appStore").dispatch,n=e.get("settings"),i=e.get("experienceSettings"),s=n.reduce(((e,t)=>(t.get("isDirty")&&e.push(t.get("id")),e)),[]);i.get("isDirty")&&r((0,pa.i4)()),s.length&&r((0,pa.zD)(s))},onIsSignedInChangeHandlePopulateUser(e,t){if(!t)return e.get("features").clear(),void e.get("optOuts").clear();const r=(0,g.WI)("appStore").dispatch,n={reset:!0};e.get("homeDetails").populate(n),e.get("homeUsers").populate(n),e.get("consent").populate(n),e.get("geo").populate(n);const i=e.get("desktop");i.get("cloudCompanions").populate(n),i.get("devices").populate(n),i.get("invites").populate(n),i.get("socialNetworks").populate(n),e.get("features").populate(n),e.get("optOuts").populate(n).done((()=>{e.set({isOptOutsPending:!1,isOptOutsPopulated:!0,optOutsError:null})})).fail((t=>{e.set({isOptOutsPending:!1,isOptOutsPopulated:!1,optOutsError:(0,ua.c)(t)})})).always((()=>{r((0,ca.Uv)())})),r((0,pa.AN)())},onNotifyAccountChange(){this.user.fetch().then((()=>{(0,b.c)("[User] updated account following account change notification")}),(e=>{b.c.error("[User] Unable to update account following account change notification",e)}))}}),Pa=Sa;function Ia(){let e=(0,z.c)(an.c.populate());return e=e.then((()=>we.c.get("myPlexAccessToken"))),e=e.then((e=>{const t=(0,g.WI)("appModel").get("user"),r=an.c.get("users").findWhere({authToken:e});r&&(t.activateStoredUser(r.id),r.copyToModel(t))}),(()=>{const e=(0,g.WI)("appModel").get("user");e.activateStoredUser(0);const t=an.c.getActiveUser();t&&t.copyToModel(e)})),(0,z.c)(e).then((()=>{const e=(0,g.WI)("appModel").get("user");new Pa(e).start(),(new oa).start()}))}function Ea(){return(0,g.WI)("watchTogetherRoomsManager").start(),(0,g.WI)("syncplaySessionManager").start(),c().Deferred().resolve().promise()}function wa(){return p.render(l.createElement(m.C_,{store:(0,g.WI)("appStore")},l.createElement(h.E5,{history:be.c},l.createElement(d.q,{backend:u.i6},l.createElement(ve,null,l.createElement(y._,null,l.createElement(me.c,null)))))),document.getElementById("plex")),c().Deferred().resolve().promise()}function Ca(){let e=function(e={},t={}){const r=((e,t)=>{for(var r in t||(t={}))j.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))U.call(t,r)&&F(e,r,t[r]);return e})({allowUrls:[new RegExp((0,R.c)("-plex-4.125.1-c17e55e"))],debug:!1,dsn:"https://54c24aee6403406294dd6094728f20e0@o17675.ingest.sentry.io/5594889",environment:"public",ignoreErrors:["ResizeObserver","songId",/^Non-Error promise rejection captured/,/^SecurityError: The operation is insecure/],integrations:[new D.GS.Breadcrumbs({fetch:!1,xhr:!1})],release:"desktop-desktop@4.125.1-c17e55e",sampleRate:.05,version:"4.125.1"},e),n=V.reduce(((e,t)=>(e.hasOwnProperty(t)||(e[t]=A.c.prop(t)),e)),t);return k._6(r),Object.entries(n).forEach((([e,t])=>{x.rr(e,t)})),c().Deferred().resolve().promise()}();return e=e.then(oe),e=e.then(ta),e=e.then(Dn),e=e.then(Ss),e=e.then(Ee),e=e.then(xe),e=e.then(Ds),e=e.then(T),e=e.then(kn),e=e.then(Ia),e=e.then(Bs),se.c.allowCloudPubSub&&(e=e.then((()=>function(){let e;return Pe.c.hasWebSocket&&(e=new Ue.c({name:"CloudServerEventManager",appModel:(0,g.WI)("appModel"),isValidServer:Fe,supportsLongPolling:!0,allowMultipleConnections:!0,ServerEventConnection:Ne,ServerRetryManager:je}),e.start()),c().Deferred().resolve().promise()}()))),e=e.then(Ys),e=e.then(ie),e=e.then(aa),e=e.then(Ks),e=e.then(_s),e=e.then(Ls),e=e.then(Us),e=e.then(pe),e=e.then(ne),e=e.then(wa),e=e.then(Ea),e}var Oa=r(13624),Ma=r.n(Oa),Ta=r(85192),Da=r.n(Ta),ka=r(39724),xa=r.n(ka),Aa=r(94504),Ra=r.n(Aa),Na=r(38880),La=r.n(Na),ja=r(36480),Ua=r.n(ja),Fa=r(43956),Va=r.n(Fa),_a=r(14032),Wa=r.n(_a);Ma().registerPartial("setting",Va()),Ma().registerPartial("lockableTagInput",La()),Ma().registerPartial("lockableTextInput",Ua()),Ma().registerPartial("lockableNumericInput",Ra()),Ma().registerPartial("textInput",Wa()),Ma().registerPartial("autocompleteTextInput",Da()),Ma().registerPartial("connectError",xa());const Ba=Zn.c.extend({name:"SessionStatsModel",storageKey:"sessionstats",syncedAttrs:{heartbeatTime:Jn.c.integer,playbackCount:Jn.c.integer,playbackTime:Jn.c.integer,sessionId:Jn.c.string,anonymousSessionId:Jn.c.string,startTime:Jn.c.integer,lastInteractionTime:Jn.c.integer},defaults:{playbackCount:0,playbackTime:0}});var Ha=r(99204),za=r(42728),Ga=r(57864),qa=r(47456),Ka=r(35688),Qa=r(17472),$a=r(1764),Ya=r(15508),Xa=r(99252),Ja=r(64744),Za=r(17260),eo=r(55156),to=r(4008);function ro(e){return new Promise(((t,r)=>{function n(e){var t;e&&(null==(t=a.parentNode)||t.removeChild(a)),a.removeEventListener("load",i),a.removeEventListener("error",s)}function i(){n(!1),t()}function s(){n(!0),r(new Error(`Unable to load: ${e}`))}const a=document.createElement("script");try{!function(e){const t=document.getElementsByTagName("SCRIPT");return Array.from(t).some((t=>t.src===e))}(e)?(a.addEventListener("error",s),a.addEventListener("load",i),a.type="text/javascript",a.src=e,document.body.appendChild(a)):t()}catch(e){n(!0),r(e)}}))}var no=Object.defineProperty,io=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,oo=(e,t,r)=>t in e?no(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,co=(e,t)=>{for(var r in t||(t={}))so.call(t,r)&&oo(e,r,t[r]);if(io)for(var r of io(t))ao.call(t,r)&&oo(e,r,t[r]);return e};const lo="//imasdk.googleapis.com/pal/sdkloader/pal.js",uo=window.ResizeObserver||eo.Q,po=(0,l.createContext)(void 0),mo=function(e){const[t,r]=(0,l.useState)({state:0,nonceLoader:void 0}),n=(0,l.useRef)(),i=(0,l.useMemo)((()=>({stateMachine:t,videoDimensions:n.current,onFetch:()=>{0===t.state&&(r({state:1,nonceLoader:void 0}),(b.c.info("[PAL] Loading SDK",lo),ro(lo)).then((()=>{b.c.info("[PAL] Loaded SDK",lo);const e=new goog.pal.ConsentSettings;e.allowStorage=!1,r({state:3,nonceLoader:new goog.pal.NonceLoader(e)})}),(()=>{b.c.error("[PAL] Failed to load SDK"),r({state:2,nonceLoader:void 0})})))}})),[t]),[s,{height:a,width:o}]=(0,Za.c)(co({polyfill:uo},undefined));return(0,l.useEffect)((()=>{e.testVideoDimensions?n.current=e.testVideoDimensions:a&&o&&(n.current={videoWidth:o,videoHeight:a})}),[e.testVideoDimensions,a,o]),l.createElement("div",{ref:s,className:"PalNonceProvider-container-YUpcLH"},l.createElement(po.Provider,{value:i},e.children))};var ho=r(30072),yo=r(49716),go=r(57288),fo=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,bo=Object.prototype.propertyIsEnumerable;const So=(0,go.c)((function(e={},t){const r=function(e){const t=e,{mimeType:r,codecs:n}=t,i=((e,t)=>{var r={};for(var n in e)vo.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fo)for(var n of fo(e))t.indexOf(n)<0&&bo.call(e,n)&&(r[n]=e[n]);return r})(t,["mimeType","codecs"]);if(!r)return"";const s=[r];if(n&&s.push(`codecs="${n}"`),i)for(const e in i)s.push(`${e}="${i[e]}"`);return s.join("; ")}(e),n=(0,zs.i_)("video",!0),i=n.canPlayType(r);return(0,zs.Ah)(n),e.codecs?"probably"===i:"probably"===i||"maybe"===i}));var Po=r(40604),Io=r(78504),Eo=Object.defineProperty,wo=Object.defineProperties,Co=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,Mo=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,Do=(e,t,r)=>t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ko=(e,t,r)=>(Do(e,"symbol"!=typeof t?t+"":t,r),r);const xo=(0,yo.c)()?100:0;function Ao(e){return!!(0,yo.c)()||"progressive"===e.deliveryType&&So(e)}class Ro extends l.Component{constructor(e,t){super(e,t),ko(this,"_adPod"),ko(this,"_adPodPromise"),ko(this,"_isAdLoaded"),ko(this,"_lastOnPositionMillisecondsChange"),ko(this,"_lastPositionMilliseconds"),ko(this,"_loadTimeoutID"),ko(this,"_mediaComponent"),ko(this,"_playbackTimeoutID"),ko(this,"_vmapClient"),ko(this,"bufferingDetectionLimit"),ko(this,"_onLoadTimeout",(()=>{this._isAdLoaded||this.onError(ho._2.VAST_MEDIA_FILE_TIMEOUT)})),ko(this,"_onPlaybackTimeout",(()=>{this.onError(ho._2.VAST_MEDIA_FILE_TIMEOUT)})),ko(this,"onAdStart",(()=>{this.props.onAdStart()})),ko(this,"onAdClick",(()=>{this.props.onAdClick()})),ko(this,"onMediaError",(()=>{this.onError(ho._2.VAST_PROBLEM_DISPLAYING_MEDIA)})),ko(this,"onEnd",(()=>{this._lastPositionMilliseconds=null,this._lastOnPositionMillisecondsChange=null,this._clearPlaybackTimeout(),this._playNextAdOrResume()})),ko(this,"onError",((e=ho._2.UNDEFINED_ERROR)=>{this._adPod&&this._adPod.error(e),this._playNextAdOrResume()})),ko(this,"onPositionMillisecondsChange",(e=>{this._isAdLoaded||(this._isAdLoaded=!0),e!==this._lastPositionMilliseconds&&(this._setPlaybackTimeout(),this._lastPositionMilliseconds=e),this._adPod?this._adPod.progress(e):b.c.error("[AdPlayer] Unexpected position update without an adPod"),(!this._lastOnPositionMillisecondsChange||e>=this._lastOnPositionMillisecondsChange+xo)&&(this._lastOnPositionMillisecondsChange=e,this.props.onPositionMillisecondsChange(e))})),this._vmapClient=null,this._adPod=null,this._adPodPromise=null,this._isAdLoaded=!1,this._loadTimeoutID=null,this._playbackTimeoutID=null,this._lastPositionMilliseconds=null,this._lastOnPositionMillisecondsChange=null,this._mediaComponent=(0,g.WI)("mediaComponent"),this.bufferingDetectionLimit=se.c.bufferingDetectionLimit}componentDidMount(){const{url:e,playerPositionSeconds:t,followsManualRedirect:r}=this.props;this._vmapClient=new ho.QP({url:new window.URL(e),canPlayMedia:Ao,followsManualRedirect:r,adEventListeners:{clickthrough:this.onAdClick,start:this.onAdStart}}),this._handlePositionUpdate(1e3*t,!0)}componentDidUpdate(e,t){const{ad:r,playerPositionSeconds:n,isMiniPlayer:i,isFullscreen:s,isPaused:a,isIdle:o,url:c,followsManualRedirect:l,volume:d}=this.props;c!==e.url&&(this.onEnd(),delete this._adPodPromise,this._adPod&&(this._adPod.dispose(),delete this._adPod),this._vmapClient&&this._vmapClient.dispose(),this._vmapClient=new ho.QP({url:new window.URL(c),canPlayMedia:Ao,followsManualRedirect:l,adEventListeners:{clickthrough:this.onAdClick,start:this.onAdStart}}));const u=!o&&e.isIdle;if(u||n!==e.playerPositionSeconds){const t=n-e.playerPositionSeconds,r=t<0||t>1;this._handlePositionUpdate(1e3*n,r||u)}this._adPod&&r&&(i!==e.isMiniPlayer&&(this._adPod.expanded=!i),s!==e.isFullscreen&&(this._adPod.fullscreen=s),d!==e.volume&&(this._adPod.muted=0===d),a!==e.isPaused&&(this._adPod.paused=a,a?this._clearPlaybackTimeout():this._setPlaybackTimeout()))}componentWillUnmount(){this._loadTimeoutID&&(this._loadTimeoutID=window.clearTimeout(this._loadTimeoutID)),this._playbackTimeoutID&&(this._playbackTimeoutID=window.clearTimeout(this._playbackTimeoutID)),delete this._adPodPromise,this._adPod&&(this.props.ad&&!this._isAdLoaded&&this._adPod.error(ho._2.VAST_MEDIA_FILE_TIMEOUT),this._adPod.dispose(),delete this._adPod),this._vmapClient&&this._vmapClient.dispose(),this.props.onUpdateAddToWatchlistGuid({metadataItemEntityID:this.props.metadataItem.entityID,guid:this.props.metadataItem.primaryGuid})}_handlePositionUpdate(e,t){const{isIdle:r}=this.props;if(!r)if(t&&this._vmapClient&&!this._adPodPromise&&!this.props.ad){const t=this._vmapClient.resolveAdPod(e);this._adPodPromise=t,t.then((e=>{let r;t===this._adPodPromise&&e&&(this._adPod=e,r=e.next()),r?this._playAd(r,e):(this._adPod&&(this._adPod.dispose(),delete this._adPod),delete this._adPodPromise,this.onEnd())}),(()=>{delete this._adPodPromise,this.onEnd()}))}else if(this._adPod){if(this._adPod.timeOffset>e)return;const t=this._adPod.next();t?this._playAd(t,this._adPod):(this._adPod.dispose(),delete this._adPod,delete this._adPodPromise)}else if(!this._adPodPromise&&this._vmapClient){const t=this._vmapClient.resolveNextAdPod(e);this._adPodPromise=t,t.then((e=>{t===this._adPodPromise&&(this._adPod=e,e||delete this._adPodPromise)}),(()=>{t===this._adPodPromise&&delete this._adPodPromise}))}}_playAd(e,t){var r,n;const{volume:i,isMiniPlayer:s,isFullscreen:a,isPaused:o}=this.props;t.expanded=s,t.fullscreen=a,t.muted=0===i,t.paused=o,this._isAdLoaded=!1,this._loadTimeoutID=window.setTimeout(this._onLoadTimeout,8e3),this.props.onAdChange(e);const c=null==(n=null==(r=t._ad.vastAd)?void 0:r.impressionURLTemplates)?void 0:n.find((e=>e.includes("provider-static.plex.tv/ads/1x1.png?action="))),{params:{action:l,guid:d}}=S.c.parseUri(null!=c?c:"");d&&"watchlist"===l?((0,As.SS)((()=>{this.props.onUpdateAddToWatchlistGuid({metadataItemEntityID:this.props.metadataItem.entityID,guid:d})})),this.props.onPlayAd({metadataItemEntityID:this.props.metadataItem.entityID,providerEntityID:this.props.providerEntityID})):this.props.onUpdateAddToWatchlistGuid({metadataItemEntityID:this.props.metadataItem.entityID,guid:this.props.metadataItem.primaryGuid})}_playNextAdOrResume(){const e=this._adPod?this._adPod.next():null;this.props.onUpdateAddToWatchlistGuid({metadataItemEntityID:this.props.metadataItem.entityID,guid:this.props.metadataItem.primaryGuid}),e?this._playAd(e,this._adPod):(this._adPod&&this._adPod.dispose(),delete this._adPod,delete this._adPodPromise,this.props.onAdChange(e))}_setPlaybackTimeout(){this._clearPlaybackTimeout(),this.props.isPaused||(this._playbackTimeoutID=window.setTimeout(this._onPlaybackTimeout,8e3))}_clearPlaybackTimeout(){this._playbackTimeoutID=window.clearTimeout(this._playbackTimeoutID)}render(){var e,t,r,n;const i=this.props,{ad:s,url:a,isAdCountdownTimerEnabled:o,isMiniPlayer:c,isPaused:d,positionSeconds:u,playerPositionSeconds:p,statusOverlayClassName:m}=i,h=((e,t)=>{var r={};for(var n in e)Mo.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Oo)for(var n of Oo(e))t.indexOf(n)<0&&To.call(e,n)&&(r[n]=e[n]);return r})(i,["ad","url","isAdCountdownTimerEnabled","isMiniPlayer","isPaused","positionSeconds","playerPositionSeconds","statusOverlayClassName"]),y=this._adPod?Math.round((this._adPod.timeOffset-1e3*p)/1e3):Io.Ou,g=null!=(t=null==(e=this._adPod)?void 0:e.hasAnyCreative)&&t&&!c,f=!!(null==s?void 0:s.url),v=f?this._mediaComponent.getComponent({protocol:"http",isDirectPlay:!0}):null;return l.createElement(l.Fragment,null,f?l.createElement(v,(b=((e,t)=>{for(var r in t||(t={}))Mo.call(t,r)&&Do(e,r,t[r]);if(Oo)for(var r of Oo(t))To.call(t,r)&&Do(e,r,t[r]);return e})({},h),S={key:s.url.href,bufferingDetectionLimit:this.bufferingDetectionLimit,mediaType:Po.im,paused:d,positionSeconds:u,src:s.url.href,onEnd:this.onEnd,onError:this.onMediaError,onPositionMillisecondsChange:this.onPositionMillisecondsChange},wo(b,Co(S)))):null,g?l.createElement(Io.cp,{className:m,displayIndex:null!=(r=null==s?void 0:s.displayIndex)?r:Io.q0,displayTotal:null!=(n=null==s?void 0:s.displayTotal)?n:Io.K_,isAdCountdownTimerEnabled:o,secondsRemaining:s&&null!=u?s.totalDurationRemaining-u:void 0,secondsTotal:null==s?void 0:s.totalDuration,secondsUntilAd:y}):null);var b,S}}ko(Ro,"defaultProps",{isIdle:!1,followsManualRedirect:!1});const No=Ro;var Lo=Object.defineProperty,jo=Object.defineProperties,Uo=Object.getOwnPropertyDescriptors,Fo=Object.getOwnPropertySymbols,Vo=Object.prototype.hasOwnProperty,_o=Object.prototype.propertyIsEnumerable,Wo=(e,t,r)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bo=(e,t)=>{for(var r in t||(t={}))Vo.call(t,r)&&Wo(e,r,t[r]);if(Fo)for(var r of Fo(t))_o.call(t,r)&&Wo(e,r,t[r]);return e};function Ho(e){const{url:t,onAdClick:r,onAdStart:n}=function({descriptionUrl:e,url:t,volume:r}){const n=(0,l.useContext)(po);if(void 0===n)throw new Error("usePal must be used within a PalNonceProvider context");const i=(0,l.useRef)(r),[s,a]=(0,l.useState)({state:0,nonceManager:void 0}),{onFetch:o}=n;(0,l.useEffect)((()=>{0===n.stateMachine.state&&o()}),[n.stateMachine.state,o]),(0,l.useEffect)((()=>{3===n.stateMachine.state&&0===s.state&&t&&e&&n.videoDimensions&&a({state:1,nonceManager:void 0})}),[n.stateMachine.nonceLoader,n.stateMachine.state,n.videoDimensions,e,s.state,t]),(0,l.useEffect)((()=>{if(3===n.stateMachine.state&&t&&n.videoDimensions){let t=!1;return n.stateMachine.nonceLoader.loadNonceManager(co({adWillAutoPlay:!0,adWillPlayMuted:0===i.current,continuousPlayback:!1,descriptionUrl:e,iconsSupported:!0,nonceLengthLimit:Number.MAX_SAFE_INTEGER,omidPartnerName:"Google1",omidPartnerVersion:"h.3.509.0",omidVersion:"1.3",playerType:to.k9,playerVersion:"4.125.1",ppid:"",sessionId:(0,g.WI)("sessionStats").get("sessionId"),supportedApiFrameworks:[7],url:e},n.videoDimensions)).then((e=>{t||a({state:3,nonceManager:e})}),(()=>{t||(b.c.error("[PAL] Failed to load nonceManager"),a({state:2,nonceManager:void 0}))})),()=>{t=!0}}}),[n.stateMachine.nonceLoader,n.stateMachine.state,n.videoDimensions,e,t]);const{nonceManager:c}=s;return(0,l.useMemo)((()=>{let e;if(2===n.stateMachine.state||2===s.state)e=t;else if(c&&t){const r=new window.URL(t);r.searchParams.append("paln",c.getNonce()),e=r.href}return{url:e,onAdClick:()=>{null==c||c.sendAdClick()},onAdStart:()=>{null==c||c.sendAdImpression()}}}),[n.stateMachine.state,c,s.state,t])}({url:e.url,descriptionUrl:e.metadataItem.publicPagesURL,volume:e.volume});return t?l.createElement(No,(i=Bo({},e),s={ad:e.ad,url:t,onAdClick:r,onAdStart:n},jo(i,Uo(s)))):null;var i,s}const zo=(0,m.Ul)((function(){return(0,Ga.M3)((0,Ja.c)(za.El),(0,Ya.c)(["isPaused","positionSeconds","durationSeconds","providerEntityID"]),(0,$a.c)(),Xa.c,((e,{volume:t})=>t),((e,t,r,n,i)=>({metadataItem:r,isAdCountdownTimerEnabled:e,volume:n||i||0,isPaused:t.isPaused,playerPositionSeconds:t.positionSeconds,playerDurationSeconds:t.durationSeconds,providerEntityID:t.providerEntityID})))}),(function(e,t){const{playerType:r}=t;return{onBufferingChange(t){e((0,Qa.EB)({playerType:r,isBuffering:t}))},onPause(){e((0,Qa.U$)({playerType:r,isApplicationInitiated:!0}))},onPlay(){e((0,Qa.Eb)({playerType:r,isApplicationInitiated:!0}))},onMetricsPlayerChange(t){e((0,Ka.i)({playerType:r,metricsPlayer:t}))},onUpdateAddToWatchlistGuid(t){e((0,qa.uK)(t))},onPlayAd(t){e((0,qa.IL)(t))}}}))((e=>l.createElement(mo,null,l.createElement(Ho,Bo({},e)))));var Go=r(10596);const qo={default:zo},Ko=l.lazy((()=>{return void 0,null,e=function*(){try{const e=(0,Go.c)()?"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js":"//imasdk.googleapis.com/js/sdkloader/ima3.js";(0,Go.c)()&&(0,b.c)("[IMA] SDK loading from",e),yield ro(e)}catch(e){return b.c.error("[IMA] SDK load failed",e),qo}try{return(0,Go.c)()&&(0,b.c)("[IMA] SDK %s loaded",window.google.ima.VERSION),(0,Go.c)()&&(0,b.c)("[IMA] Enabling VPAID"),window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.ENABLED),(0,Go.c)()&&(0,b.c)("[IMA] Loading ImaPlayer"),yield r.e(9344).then(r.bind(r,63960))}catch(e){return b.c.error("[IMA] Player failed to initialize",e),qo}},new Promise(((t,r)=>{var n=t=>{try{s(e.next(t))}catch(e){r(e)}},i=t=>{try{s(e.throw(t))}catch(e){r(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,i);s((e=e.apply(undefined,null)).next())}));var e})),Qo={getComponent:()=>(0,Ha.c)((0,g.WI)("appModel"),za.G)?Ko:zo};function $o(){return So({mimeType:"application/x-mpegURL"})}var Yo=r(95164);const Xo=l.lazy((()=>Promise.all([r.e(8444),r.e(4956)]).then(r.bind(r,74956)))),Jo=l.lazy((()=>Promise.all([r.e(7636),r.e(8744)]).then(r.bind(r,28744)))),Zo={getComponent:e=>e?"dash"===e.protocol||e.drm===Ps.WIDEVINE&&"hls"===e.protocol||e.drm===Ps.FAIRPLAY&&"hls"===e.protocol&&$o()?Jo:"hls"===e.protocol&&$o()?Yo.c:"hls"===e.protocol?Xo:Yo.c:Yo.c};var ec=r(64964),tc=r(54064);const rc=function(){const e=window.MediaSource||window.WebkitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer;return!(!e||"function"!=typeof e.isTypeSupported||t&&(!t.prototype||"function"!=typeof t.prototype.appendBuffer||"function"!=typeof t.prototype.remove))};var nc=Object.getOwnPropertySymbols,ic=Object.prototype.hasOwnProperty,sc=Object.prototype.propertyIsEnumerable,ac=r(86264);var oc=Object.defineProperty,cc=Object.getOwnPropertySymbols,lc=Object.prototype.hasOwnProperty,dc=Object.prototype.propertyIsEnumerable,uc=(e,t,r)=>t in e?oc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pc=(e,t)=>{for(var r in t||(t={}))lc.call(t,r)&&uc(e,r,t[r]);if(cc)for(var r of cc(t))dc.call(t,r)&&uc(e,r,t[r]);return e};const mc={videoResolution:!0},hc={width:1920,height:1080,bitDepth:8,frameRate:30};function yc(e,t){return v().pick(e,((e,r)=>0===r.indexOf(t)))}function gc(e,t,r,n){const i=pc(pc({},yc(e,n)),yc(t,n));return v().map(i,((e,i)=>{return{codec:v().has(t,i)?r:null,name:(s=i.slice(n.length),s?s.charAt(0).toLowerCase()+s.slice(1):""),value:e};var s}))}var fc=r(86048);function vc(e=ec.c.prop("video")){var t,r,n,i,s,a,o;const c=(null==(i=null==(n=null==(r=null==(t=e.directPlay)?void 0:t.mp4)?void 0:r.video)?void 0:n.codecs)?void 0:i.hevc)||(null==(o=null==(a=null==(s=e.directStream)?void 0:s.video)?void 0:a.codecs)?void 0:o.hevc);return(null==c?void 0:c.maxBitDepth)>=10}var bc=r(51956),Sc=r(39835),Pc=r(28476);function Ic(e,t){return!e||!!t&&e>=t}var Ec=r(99052),wc=Object.defineProperty,Cc=Object.getOwnPropertySymbols,Oc=Object.prototype.hasOwnProperty,Mc=Object.prototype.propertyIsEnumerable,Tc=(e,t,r)=>t in e?wc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dc=(e,t)=>{for(var r in t||(t={}))Oc.call(t,r)&&Tc(e,r,t[r]);if(Cc)for(var r of Cc(t))Mc.call(t,r)&&Tc(e,r,t[r]);return e};const kc=function e(t,r,n,i={},s){const a=(0,g.WI)("appModel"),o=a.get("user").get("experienceSettings"),c=a.get("deviceSettings"),l=ec.c.prop("video"),d=function(e,t){return!(!(0,Ec.c)()||!t.server.get("hasAdaptiveBitrate")||e.get("remotePlayer"))}(a,t),u=function(e){const{profile:t,metadataItem:r,mediaItem:n,canPlayAdaptiveBitrate:i,settings:s}=e;let{qualityIndex:a}=e;const o=n?[n]:r.get("Media"),c=Sc.c.getAvailableQualitiesFor(o,r.server,{lowestQualityIndex:t.lowestQualityIndex,highestQualityIndex:t.highestQualityIndex});return null==a?a=function(e){const{mediaItems:t,transcodeServer:r,metadataItem:n,canPlayAdaptiveBitrate:i,settings:s,availableQualities:a}=e,o=function(e){return Math.max.apply(Math,e.map((e=>e.bitrate)))}(t),c=r.get("maxUploadBitrate"),l=r.get("isPrivateConnection"),d=i&&s.get("autoAdjustQuality");let{localQualityDefault:u}=s;void 0===u&&(u=Sc.c.ORIGINAL);const p=(0,Pc.c)(n,l),m=(0,bc.c)(n,l),h=Sc.c.getQualityByIndex(s.get(m));if(p){const e=s.get("useHomeStreamingRecommendedSettings")?u:h.index,t=Sc.c.getQualityByIndex(e),r=Sc.c.isExplicitQuality(t.index)&&Ic(t.bitrate,o);return t.index===Sc.c.ORIGINAL||r?Sc.c.ORIGINAL:d?Sc.c.CONVERT_AUTOMATICALLY:Sc.c.getBestAvailableQuality(t,a)}const y=Ic(c,o),g=h.index===Sc.c.ORIGINAL,f=Ic(h.bitrate,o);return s.get("remoteSmallVideoAtOriginalQuality")&&y&&(g||f)?Sc.c.ORIGINAL:d?Sc.c.CONVERT_AUTOMATICALLY:g&&y?Sc.c.ORIGINAL:Sc.c.getBestAvailableQuality(h,a)}({mediaItems:o,transcodeServer:r.server,metadataItem:r,canPlayAdaptiveBitrate:i,settings:s,availableQualities:c}):Sc.c.isExplicitQuality(a)&&!c.find((e=>e.index===a))&&(a=Sc.c.ORIGINAL),{availableQualities:c,quality:Sc.c.getQualityByIndex(a),qualityIndex:a}}({profile:l,metadataItem:t,qualityIndex:r,mediaItem:s,canPlayAdaptiveBitrate:d,settings:o}),p=u.qualityIndex,m=p===Sc.c.CONVERT_AUTOMATICALLY&&d,h=c.get("directPlay")&&!m,y=c.get("directStream")&&!m?1:0,f=d&&o.get("autoAdjustQuality")&&!Sc.c.isExplicitQuality(p);let v,b=u.quality;return m&&(b=function(e,t){const r=e.server.get("isPrivateConnection");if((0,Pc.c)(e,r)&&t.get("useHomeStreamingRecommendedSettings")){const e=t.defaults().localQuality;return Sc.c.getQualityByIndex(e)}const n=(0,bc.c)(e,r),i=t.get(n);return Sc.c.getQualityByIndex(i)}(t,o)),p!==Sc.c.ORIGINAL&&(v=e(t,Sc.c.ORIGINAL,n,i,s)),Dc({type:tc.c.types.VIDEO,profile:l,allowDirectPlay:h,allowDirectStreamVideoWithSoftSubtitles:!0,allowIncompleteSegments:!0,allowMultiTrackAudio:t.server.get("isCloud"),subtitlesBurnLevel:o.get("subtitlesBurnLevel"),availableQualities:u.availableQualities,qualityIndex:p,quality:b,transcoderOptions:Dc({addDebugOverlay:c.get("debugVideoQualityOverlay")?1:0,autoAdjustQuality:f||m?1:0,directStream:y,directStreamAudio:y,audioBoost:o.get("audioBoost")},i),originalQualityDecisionOptions:v},n)},xc=rc(),Ac=rc()||$o(),Rc=xc?"dash":"hls";function Nc(e,t,r){const n=(0,g.WI)("appModel").get("user").get("experienceSettings"),i={hasNativeHLS:Ac,hasDASH:xc,hasStreamingMKV:!1,canDisplayHDR:vc(),canDisplayDolbyVision:!1,subtitlesBurnLevel:n.get("subtitlesBurnLevel"),transcoder:fc.c,transcodeProtocol:Rc,preferredDirectPlayProtocol:Rc,profileExtra(e){const t=function(e){const t=e.finalProfile.directStream.video,r=(0,ac.c)(e.media),n=r&&r.codec,i=t.codecs&&t.codecs[n],s=gc(t,i,n,"min");let a=gc(t,i,n,"max");if(!r)return[];const o={width:r.width<=hc.width,height:r.height<=hc.height,bitDepth:r.bitDepth<=hc.bitDepth,frameRate:r.frameRate<=hc.frameRate};a=a.filter((e=>{return!0!==o[e.name]&&!0!==mc[e.name]&&(t=e.name,r=e.value,!hc[t]||hc[t]<r);var t,r}));const c=[...s.map((({codec:e,name:t,value:r})=>function({codec:e,name:t,value:r}){return`add-limitation(scope=videoCodec&scopeName=${encodeURIComponent(e||"*")}&type=lowerBound&name=video.${encodeURIComponent(t)}&value=${encodeURIComponent(r)}&replace=true)`}({codec:e,name:t,value:r}))),...a.map((({codec:e,name:t,value:r})=>function({codec:e,name:t,value:r}){return`add-limitation(scope=videoCodec&scopeName=${encodeURIComponent(e||"*")}&type=upperBound&name=video.${encodeURIComponent(t)}&value=${encodeURIComponent(r)}&replace=true)`}({codec:e,name:t,value:r})))];return i&&"h264"!==n&&c.push(function(e){const{protocol:t,codec:r}=e;return`append-transcode-target-codec(type=videoProfile&context=streaming&protocol=${encodeURIComponent(t)}&videoCodec=${encodeURIComponent(r)})`}({protocol:e.protocol,codec:n})),c}(e),r=e.finalProfile.directStream.video.codecs.hevc;if("hevc"===e.media.videoCodec&&r){const{maxBitDepth:n}=r;t.push(function(e={}){const{maxBitDepth:t=8,protocol:r,supportsHDR:n=!1,supportsDolbyVision:i=!1}=e,s=["bt709","bt470m","bt470bg","smpte170m","smpte240m"];return t>=10&&s.push("bt2020-10"),t>=12&&s.push("bt2020-12"),t>=10&&(n||i)&&s.push("smpte2084"),`add-limitation(scope=videoTranscodeTarget&scopeName=hevc&scopeType=videoCodec&context=streaming&protocol=${r}&type=match&name=video.colorTrc&list=${s.join("|")}&isRequired=false)`}({protocol:e.protocol,maxBitDepth:n,supportsHDR:e.canDisplayHDR,supportsDolbyVision:e.canDisplayDolbyVision}))}let n=Object.keys(e.finalProfile.directStream.audio.codecs);return"dash"===e.protocol&&(n=n.filter((e=>!1===/^e?ac3$/.test(e)))),t.push(function(e){const t=e,{type:r="videoProfile",context:n="streaming",videoCodec:i,audioCodec:s,subtitleCodec:a}=t,o=((e,t)=>{var r={};for(var n in e)ic.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&nc)for(var n of nc(e))t.indexOf(n)<0&&sc.call(e,n)&&(r[n]=e[n]);return r})(t,["type","context","videoCodec","audioCodec","subtitleCodec"]),c={type:r,context:n};return i&&(c.videoCodec=Array.isArray(i)?i.join(","):i),s&&(c.audioCodec=Array.isArray(s)?s.join(","):s),a&&(c.subtitleCodec=Array.isArray(a)?a.join(","):a),Object.assign(c,o),`append-transcode-target-codec(${S.c.stringifyParams(c)})`}({protocol:e.protocol,audioCodec:n.join(",")})),t.join("+")}},s=(0,g.WI)("appModel").get("user").get("experienceSettings");s.get("forceTranscodeProtocolHLS")&&"dash"===i.transcodeProtocol&&(Ac?s.get("autoAdjustQuality")?b.c.warn("[Player] Experimental alternate streaming protocol for video playback is disabled because automatic quality adjustment is enabled"):(b.c.warn("[Player] Experimental alternate streaming protocol for video playback is enabled"),i.transcodeProtocol="hls"):b.c.warn("[Player] Experimental alternate streaming protocol for video playback is unsupported by this browser"));const a={subtitleSize:n.get("subtitleSize"),mediaBufferSize:102400},o=r||e.get("Media")[0];return o&&"livetv"===o.origin&&(i.allowDirectPlay=!1),kc(e,t,i,a,r)}const Lc=function(e,t,r){const n=Ze.GG(e.get("type"));return(null==n?void 0:n.mediaType)===Po.KI?function(){const e=[];return xc&&e.push("add-transcode-target(type=musicProfile&context=streaming&protocol=dash&container=mp4&audioCodec=aac)"),Ac&&e.push("add-transcode-target(type=musicProfile&context=streaming&protocol=hls&container=mpegts&audioCodec=aac,mp3)"),{type:tc.c.types.MUSIC,profile:ec.c.prop("music"),allowDirectPlay:!0,hasNativeHLS:Ac,hasDASH:xc,transcoder:fc.c,transcodeProtocol:Rc,preferredDirectPlayProtocol:Rc,transcoderOptions:{directStreamAudio:1,mediaBufferSize:12288},profileExtra:e.length?e.join("+"):null}}():Nc(e,t,r)},jc=ce.c.extend({mixins:[de.c],name:"AjaxQueue",queue:null,request:null,enabled:!1,destroyed:!1,initialize(e={}){this.queue=[],!1!==e.enabled&&this.enable()},enable(){this.enabled||this.destroyed||(this.enabled=!0,this.onEnabled())},disable(){this.enabled&&(this.enabled=!1,this.request=null,this.onDisabled())},destroy(){this.destroyed||(this.disable(),this.queue.length=0,this.destroyed=!0,this.onDestroyed())},send(e){e&&(this.queue.push(e),this._next())},_next(){if(!this._canNext())return;const e=this.queue.shift(),t=e&&this._getAjaxOptions(e);if(t){const e=c().ajax(t);e.always(this.onAjaxAlways.bind(this,e)),this.request=e}},_canNext(){return this.enabled&&!this.request},_getAjaxOptions:e=>e,onAjaxAlways(e){this.enabled&&e===this.request&&(this.request=null,this._next())},onEnabled(){this._next()},onDisabled(){},onDestroyed(){}});function Uc(){const e=new jc;let t=null;return{setBaseUrl(e){t=e},trackEvent(r){if(!t)return void(0,W.c)(!1,"Network metrics reporters requires a base URL to be set before tracking events");const n=S.c.join([t,"collect/event"]),i=JSON.stringify(r);window.navigator.sendBeacon?window.navigator.sendBeacon(n,i):e.send({type:"POST",url:n,contentType:"text/plain",data:i})}}}r(16852);const Fc=["enable","disable","set","start","trackClick","trackEvent","trackView","incrementPlaybackCount","addPlaybackTime","toJSON"],Vc=["setBaseUrl","trackEvent"];var _c=r(23156),Wc=r(70776),Bc=r(17736),Hc=r(30137),zc=Object.defineProperty,Gc=Object.defineProperties,qc=Object.getOwnPropertyDescriptors,Kc=Object.getOwnPropertySymbols,Qc=Object.prototype.hasOwnProperty,$c=Object.prototype.propertyIsEnumerable,Yc=(e,t,r)=>t in e?zc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xc=(e,t)=>{for(var r in t||(t={}))Qc.call(t,r)&&Yc(e,r,t[r]);if(Kc)for(var r of Kc(t))$c.call(t,r)&&Yc(e,r,t[r]);return e},Jc=(e,t)=>Gc(e,qc(t));const Zc=101,el=102;function tl(e,t){const{server:r}=t,n=r.get("debugName");return b.c.warn("[Connections] Aborting connection test for %s at %s because secure connections are disallowed",n,e),rl(0,t)}function rl(e,t){const{connection:r}=t,n=c().Deferred();return v().defer((()=>{r.set({currentTest:null,testState:_c.YV}),n.reject(r)})),n.promise()}function nl(e){const{server:t,connection:r}=e,n=t.resolveUrl(e.url||"/media/providers",{connection:r}),i=(0,g.WI)("appModel"),s=i.get("settings"),a=i.get("deviceSettings");if(!se.c.allowHttpsMediaServerConnections&&r.get("isHttps")&&!t.get("isCloud"))return tl(n,e);const o=s&&s.get("preferInsecureConnections");if(!t.get("httpsRequired")&&!t.get("isCloud")&&r.get("isHttps")&&o===as)return tl(n,e);if(!t.get("httpsRequired")&&r.get("isHttps")&&o===ss&&r.get("isPrivate")&&t.get("publicAddressMatches"))return function(e,t){const{server:r}=t,n=r.get("debugName");return b.c.warn("[Connections] Aborting connection test for %s at %s because insecure connections are preferred",n,e),rl(0,t)}(n,e);if(!se.c.allowMixedContent&&Pe.c.isHostedHttps&&!r.get("isHttps"))return function(e,t){const{server:r}=t,n=r.get("debugName");return b.c.warn("[Connections] Aborting connection test for %s at %s due to mixed content prevention",n,e),rl(0,t)}(n,e);const l=a&&a.get("rejectDirectConnections");return t.get("isCloud")||r.get("relay")||!l&&!se.c.rejectDirectConnections?function(e,t){const{server:r,connection:n}=t,i=c().Deferred(),s=r.get("debugName"),a=(0,Wc.c)(r),o=Date.now();(0,b.c)("[Connections] Testing connection for %s at %s",s,e);const l=[],d={dataType:"text",headers:{Accept:a.accept},timeout:r.connectionTestTimeout};l.push(r.getXHROptions(e,d));const u=!(0,Hc.c)(r);if(null==t.url&&u){const e=r.resolveUrl("/",{connection:n});(0,b.c)("[Connections] Testing legacy connection for %s at %s",s,e),l.push(r.getXHROptions(e,d))}if(se.c.emulateBrokenHTTPS){const e=n.get("isHttps")&&!r.get("isCloud"),t="private"!==se.c.emulateBrokenHTTPS||n.get("isPrivate");e&&t&&function(e){e.forEach((e=>{e.url="fail"+e.url}))}(l)}const p=l.map((e=>{const t=c().ajax(e);return window.setTimeout((function(){t&&4!==t.readyState&&r.set("isBlockingUI",!0)}),r.uiTimeout),t})),m=(0,Ce.c)(p);function h(e){n.get("relay")&&(0,g.WI)("metrics").trackEvent({event:sn.gX,interaction:!1,properties:Jc(Xc({},e),{reason:1===n.server.get("connections").length?Zc:el,serverType:n.server.get("isShared")?"shared":"owned",latency:Date.now()-o})})}function y(t){(0,b.c)("[Connections] %s connected at %s",s,e),n.set({currentTest:null,testState:_c.iU}),h({status:"success"}),i.resolve(n,t)}function f(t,r){const a={currentTest:null};if(t.some((e=>e.aborting)))(0,b.c)("[Connections] Aborted pending connection test for %s at %s",s,e),a.testState=_c.wp;else{const n=function(e){return 401===e||403===e||406===e}(r),i=n?_c.Q9:_c.YV;h({status:"failure",error:r}),t.forEach((t=>{b.c.warn("[Connections] %s is %s at %s (Status %s)",s,i,e,t.status)})),a.testState=i}n.set(a),i.reject(n,t)}return n.set({currentTest:p,testState:_c.Si}),m.done((()=>{const[t,n]=p;let i;if(200!==t.status&&404!==t.status?i=t.status:n&&200!==n.status&&(i=n.status),void 0!==i)return void f(p,i);if(r.get("isCloud"))return void y();const o=a.parse(t.responseText),l=n?a.parse(n.responseText):void 0,d=r.parseResponse(c().extend(!0,{},o,l)),u=d.machineIdentifier,m=r.get("machineIdentifier");if(!u||m&&u!==m)b.c.warn("[Connections] %s has an unexpected machine identifier at %s",s,e),f(p);else{!0===d.mediaProviders?d.mediaProviders=1:!1===d.mediaProviders?d.mediaProviders=0:n||(d.mediaProviders=1);const e=r.parse(d);e.isInstallingServerUpdate=!1,e.isProvidersPending=!1,e.isProvidersPopulated=!0,(0,Bc.c)(e.providers,r),y(e)}})),i.promise()}(n,e):function(e,t){const{server:r}=t,n=r.get("debugName");return b.c.warn("[Connections] Aborting connection test for %s at %s due to reject direct connection debug setting",n,e),rl(0,t)}(n,e)}var il=r(42444),sl=r(55272);const al=function(){const e=(0,g.WI)("appModel").get("ui"),t=e.get("audioVideoPlayer"),r=e.get("photoPlayer"),n=(0,il.c)(t),i=(0,il.c)(r);return n===sl.U$||i===sl.U$};var ol=r(13671);const cl=(0,Ga.M3)(ol.c,(e=>e.volume));var ll=r(72528),dl=r(65724),ul=r(93596);function pl(e){const t=e.get("ui").get("audioVideoPlayer"),r=e.get("ui").get("photoPlayer");return t.get("openState")===dl.m||r.get("openState")===dl.m}function ml(e){return{shortcuts:[{keys:["?"],fn:"help",group:"navigation",label:()=>(0,He.c)("Open Keyboard Shortcuts")},{keys:["esc"],fn:"escape",group:"navigation",label:()=>(0,He.c)("Close Modal or Menu")},{keys:["g h"],fn:"home",group:"navigation",label:()=>(0,He.c)("Navigate to Home")},{keys:["g s"],fn:"settings",group:"navigation",label:()=>(0,He.c)("Navigate to Settings")},{keys:["g d"],fn:"activity",group:"navigation",label:()=>(0,He.c)("Navigate to Dashboard")},{keys:["g u"],fn:"plexHome",group:"navigation",label:()=>(0,He.c)("Navigate to Plex Home")},{keys:["g j"],fn:"manageLibraryAccess",group:"navigation",label:()=>(0,He.c)("Navigate to Manage Library Access")},{keys:["g b"],fn:"debug",group:"navigation",label:()=>(0,He.c)("Navigate to Debug Settings"),visible:()=>e.get("user").isEmployee()||e.get("user").isNinja()},{keys:["/"],fn:"search",group:"actions",label:()=>(0,He.c)("Focus Search"),disabled:()=>pl(e)},{keys:["p"],fn:"playSelected",group:"actions",label:()=>(0,He.c)("Open Player"),disabled:()=>pl(e)},{keys:["w"],fn:"togglePlayed",group:"actions",label:()=>(0,He.c)("Toggle as Played/Unplayed"),disabled:()=>pl(e)},{keys:["e"],fn:"edit",group:"actions",label:()=>(0,He.c)("Edit Metadata"),disabled:()=>pl(e)},{keys:["i"],fn:"info",group:"actions",label:()=>(0,He.c)("Get Info")},{keys:["shift+s"],fn:"save",group:"actions",label:()=>(0,He.c)("Save Changes"),disabled:()=>pl(e)},{keys:["space"],fn:"playPause",group:"player",label:()=>(0,He.c)("Play or Pause")},{keys:["play"],fn:"play",group:"player",label:()=>(0,He.c)("Play")},{keys:["pause"],fn:"pause",group:"player",label:()=>(0,He.c)("Pause")},{keys:["f","\\"],fn:"toggleFullScreen",group:"player",label:()=>(0,He.c)("Toggle FullScreen")},{keys:["down"],fn:"decreaseVolume",group:"player",label:()=>(0,He.c)("Decrease Volume")},{keys:["up"],fn:"increaseVolume",group:"player",label:()=>(0,He.c)("Increase Volume")},{keys:[",","left"],fn:"seekBackward",group:"player",label:()=>(0,He.c)("Seek Backward (10 seconds)")},{keys:[".","right"],fn:"seekForward",group:"player",label:()=>(0,He.c)("Seek Forward (30 seconds)")},{keys:["[","alt+left"],fn:"stepBackward",group:"player",label:()=>(0,He.c)("Step Backward (10 minutes)")},{keys:["]","alt+right"],fn:"stepForward",group:"player",label:()=>(0,He.c)("Step Forward (10 minutes)")},{keys:["shift+left"],fn:"skipPrevious",group:"player",label:()=>(0,He.c)("Skip to Previous Item")},{keys:["shift+right"],fn:"skipNext",group:"player",label:()=>(0,He.c)("Skip to Next Item")},{keys:["x"],fn:"stop",group:"player",label:()=>(0,He.c)("Close Player")},{keys:["up up down down left right left right"],fn:"reportProblem",group:"actions",label:()=>(0,He.c)("Report a problem"),visible:()=>(0,Ha.c)(e,za.KY)}],triggerShortcut(e){const t="shortcut:"+e,r=this.shortcuts.find((t=>t.fn===e));return!(le.c.hasListener(t)&&!(r&&r.disabled&&r.disabled())&&(le.c.trigger(t),1))},help(){le.c.trigger("show:modal",new ul.c({shortcuts:this.shortcuts}))},escape(){le.c.trigger("shortcut:escape")},home(){(0,Qt.c)("home")},settings(){(0,Qt.c)("webSettings",{settingsSubset:"general"})},activity(){const e=g.WI("appModel").get("primaryServer");e&&!e.get("isShared")&&(0,Qt.c)("serverSettings",{machineIdentifier:e.id,settingsSection:"status",settingsGroup:"server-dashboard"})},plexHome(){(0,Qt.c)("plexHome")},manageLibraryAccess(e){(0,Qt.c)("manageLibraryAccess")},debug(){(0,As.SS)((()=>{g.WI("appStore").dispatch((0,ll.SI)({showAdvancedSettings:!0}))})),(0,Qt.c)("webSettings",{settingsSubset:"debug"})},search(){return this.triggerShortcut("search")},playSelected(){return this.triggerShortcut("playSelected")},togglePlayed(){return this.triggerShortcut("togglePlayed")},edit(){return this.triggerShortcut("edit")},info(){return this.triggerShortcut("info")},save(){return this.triggerShortcut("save")},reportProblem(){return this.triggerShortcut("reportProblem")},playPause(){return this.triggerShortcut("playPause")},play(){return this.triggerShortcut("play")},pause(){return this.triggerShortcut("pause")},toggleFullScreen(){return this.triggerShortcut("toggleFullScreen")},decreaseVolume(){return this.triggerShortcut("decreaseVolume")},increaseVolume(){return this.triggerShortcut("increaseVolume")},seekBackward(){return this.triggerShortcut("seekBackward")},seekForward(){return this.triggerShortcut("seekForward")},stepBackward(){return this.triggerShortcut("stepBackward")},stepForward(){return this.triggerShortcut("stepForward")},skipPrevious(){return this.triggerShortcut("skipPrevious")},skipNext(){return this.triggerShortcut("skipNext")},stop(){return this.triggerShortcut("stop")}}}function hl(e){const t=()=>e.get("deviceSettings"),r=()=>e.get("user").get("experienceSettings"),n={autoPlay:r,autoLogin:t,language:r,shouldSyncSettings:t,subtitleColor:r,subtitlePosition:r,subtitleSize:r,volume:t};return{find:e=>n[e]().get(e)}}function yl(e){return!!(function(e){return!(!e||e.get("isCloud")||"iOS"===e.get("platform"))}(e)&&(t=e.get("activeConnection"),t&&t.get("isPrivate")&&t.get("isConnected")));var t}function gl(e){return!(!yl(e)||e.get("isShared"))}const fl=ce.c.extend({mixins:[de.c],name:"CompanionServerManager",initialize(e){this.appModel=e.appModel,this.servers=this.appModel.get("servers"),this._throttlePickCompanionServer=v().throttle(this._pickCompanionServer,2e3)},start(e){this.stop(),this.listenTo(this.servers,"change:connected change:activeConnection update",this._throttlePickCompanionServer),this.started=!0,this._pickCompanionServer()},stop(){this.stopListening(),this.started=!1},_pickCompanionServer(){this.started&&(this.companionServer&&yl(this.companionServer)&&this.servers.contains(this.companionServer)||(this.companionServer=this.servers.find(gl)||this.servers.find(yl),this.companionServer?((0,g.WI)("appStore").dispatch((0,Ye.c5)({serverEntityID:this.companionServer.entityID()})),b.c.info("[Companion] Found companion",this.companionServer.get("debugName"))):((0,g.WI)("appStore").dispatch((0,Ye.S2)()),b.c.warn("[Companion] No companion found"))))}}),vl=ce.c.extend({mixins:[de.c],browserConnectionChangeDelay:2e3,initialize(e){v().bindAll(this,"onBrowserConnectionChange"),this.appModel=e.appModel,this.servers=this.appModel.get("servers"),this.settings=this.appModel.get("settings")},start(){this.stop();const e=c()(window);e.on("online",this.onBrowserConnectionChange),e.on("offline",this.onBrowserConnectionChange),this.listenTo(le.c,{"test:servers":this.onTestAllServers,"test:server":this.onTestServer}),this.listenTo(this.servers,{add:this.onServerAdd,remove:this.onServerRemove,reset:this.onServersReset,"error:connection":this.onServerConnectionError,"change:connections.add":this.onServerConnectionAdd,"change:connections.remove":this.onServerConnectionRemove,"change:connections.reset":this.onServerConnectionsReset,"change:connections.change:isConnected":this.onServerConnectionConnectedChange,"change:connections.change:sources.change":this.onServerConnectionSourcesChange,"change:accessToken":this.onServerAccessTokenChange,"change:isConnected":this.onServerConnectedChange,"change:isUnavailable":this.onServerUnavailableChange,"change:publicAddressMatches":this.onServerPublicAddressMatchesChange}),this.listenTo(this.settings,"sync",this.onSettingsSave),this.servers.invoke("testOnlyUntestedConnections")},stop(){this.stopListening();const e=c()(window);e.off("online",this.onBrowserConnectionChange),e.off("offline",this.onBrowserConnectionChange)},retryServerConnections:function(e){e.testAllConnections()},startFailedServerRetries(e){},stopFailedServerRetries(e){},_removeConnection(e){const{server:t}=e,r=an.c.getActiveServers();if((0,b.c)("[Connections] Removed connection %s from %s",e.id,t.get("debugName")),t.abortConnectionTest(e),r){const n=r.get(t.id),i=n&&n.get("connections");i&&i.get(e.id)&&(i.remove(e.id),i.length||r.remove(t.id),an.c.debouncedSave())}},onBrowserConnectionChange(e){(0,b.c)("[Connections] Browser online status changed to",window.navigator.onLine),window.clearTimeout(this.browserConnectionChangeTimeout),this.browserConnectionChangeTimeout=window.setTimeout((()=>{this.servers.invoke("testAllConnections")}),this.browserConnectionChangeDelay)},onTestAllServers(){this.servers.invoke("testAllConnections")},onTestServer(e){e.testAllConnections()},onServerAdd(e){e.testOnlyUntestedConnections()},onServerRemove(e){const t=an.c.getActiveServers();let r;if(e.abortAllConnectionTests(),this.stopFailedServerRetries(e),t)if(e.get("isMerged")){const n=e.previous("machineIdentifier");n&&(r=t.get(n),r&&(r.set("machineIdentifier",e.id),an.c.debouncedSave()))}else r=t.get(e.id),r&&(t.remove(e.id),an.c.debouncedSave())},onServersReset(e,t){const r=t.previousModels;v().each(r,(t=>{e.contains(t)||(t.abortAllConnectionTests(),this.stopFailedServerRetries(t))}))},onServerConnectionError(e){b.c.warn("[Connections] Possible connection error for %s, retrying connection tests",e.get("debugName")),e.get("isCloud")?this.appModel.get("user").signInUnsupervised():e.testAllConnections()},onServerConnectionAdd(e){const{server:t}=e;(0,b.c)("[Connections] Added connection %s for %s",e.id,t.get("debugName")),e.get("relay")?t.get("connections").hasFailedEveryDirectConnection()&&t.testAllConnections():t.testConnection(e)},onServerConnectionRemove(e){this._removeConnection(e)},onServerConnectionsReset(e,t){const r=t.previousModels;v().each(r,(t=>{e.contains(t)||this._removeConnection(t)}))},onServerConnectionConnectedChange(e,t){const{server:r}=e,n=e.get("isBundled"),i=e.get("isFallback"),s=e.get("relay"),a=t&&!n&&!i&&!s,o=an.c.getActiveServers();if(r.id&&!r.get("isCloud")&&a&&o){let t=o.get(r.id);if(t)t.copyFromModel(r);else{const e=v().omit(r.toJSON(),"connections");t=o.add(e,{merge:!0,parse:!0})}t.get("connections").add(e.toJSON(),{merge:!0,parse:!0}),an.c.debouncedSave()}},onServerConnectionSourcesChange(e,t){const{server:r}=e,n=an.c.getActiveServers(),i=n&&n.get(r.id);if(i){const r=i.get("connections").get(e.id);r&&(r.get("sources").set(t.toJSON()),an.c.debouncedSave())}},onServerAccessTokenChange(e,t){if(!e.get("isCloud")){(0,b.c)("[Connections] Access token for %s changed to %s",e.get("debugName"),t);const r=an.c.getActiveServers(),n=r&&r.get(e.id);n&&(n.set("accessToken",t),an.c.debouncedSave()),e.get("isUnauthorized")&&e.set("connectionTestResult",Zt.default.connectionTestResults.PENDING),e.testAllConnections()}},onServerConnectedChange(e,t){t&&this.stopFailedServerRetries(e)},onServerUnavailableChange(e,t){t&&this.startFailedServerRetries(e)},onServerPublicAddressMatchesChange(e,t){void 0!==t&&e.testAllConnections()},onSettingsSave(e){e.changed.hasOwnProperty("preferInsecureConnections")&&this.servers.invoke("testAllConnections")}}),bl=vl.extend({initialize(e){vl.prototype.initialize.apply(this,arguments),this._serverRetryManager=new Le.c({callback:this.retryServerConnections.bind(this),logFormat:"[Connections] Retrying connection tests for %s in %s seconds"})},stop(){vl.prototype.stop.apply(this,arguments),this._serverRetryManager.stopAll()},startFailedServerRetries(e){this._serverRetryManager.start(e)},stopFailedServerRetries(e){this._serverRetryManager.stop(e)}});Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Sl=["page","type","style","mode"];var Pl=r(24952),Il=r(94336),El=r(15036);const wl=/0/g,Cl=()=>(0|16*Math.random()).toString(16),Ol=function(){return"00000000-0000-4000-8000-000000000000".replace(wl,Cl)};var Ml=r(29208),Tl=Object.defineProperty,Dl=Object.defineProperties,kl=Object.getOwnPropertyDescriptors,xl=Object.getOwnPropertySymbols,Al=Object.prototype.hasOwnProperty,Rl=Object.prototype.propertyIsEnumerable,Nl=(e,t,r)=>t in e?Tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ll=(e,t)=>{for(var r in t||(t={}))Al.call(t,r)&&Nl(e,r,t[r]);if(xl)for(var r of xl(t))Rl.call(t,r)&&Nl(e,r,t[r]);return e},jl=(e,t)=>Dl(e,kl(t));const Ul=36e5,Fl=ce.c.extend({mixins:de.c,initialize(e){this.privacySettings=null,this.defaults={},this._pendingPrivacyRequest=null,this._pendingEvents=[],this.debouncedFetchPrivacySettings=v().debounce(this.fetchPrivacySettings,250),this.isPlaybackActive=e.isPlaybackActive,this.enable()},enable(){this.enabled=!0},disable(){this.enabled=!1},set(e){this.defaults=Ll(Ll({},this.defaults),e)},setUser(e){this.set({userId:e.id}),this.defaults.context||(this.defaults.context={}),this.defaults.context.user=e.get("subscriptions").reduce(((e,t)=>(e[t.get("type")]=t.get("mode"),e)),{anonymous:e.get("anonymous")})},fetchPrivacySettings(){this.privacySettings=null,this._pendingPrivacyRequest&&(this._pendingPrivacyRequest.abort(),this._pendingPrivacyRequest=null);const e=(0,g.WI)("appModel").get("user");if(!e.server.get("isConnected"))return c().Deferred().reject().promise();const t=e.server.getXHROptions("/api/v2/user/privacy",{dataType:"json",headers:{accept:"application/json"}});return this._pendingPrivacyRequest=c().ajax(t),this._pendingPrivacyRequest.promise().done((t=>{this.setUser(e),this.setPrivacySettings(t),this.trackPendingEvents(),this.sendMMPEvent()})).always((()=>{this._pendingPrivacyRequest=null}))},setPrivacySettings(e){e&&e.metrics&&(this.privacySettings=jl(Ll({},e),{metrics:e.metrics.reduce(((e,t)=>(e[t.event]=t.status,e)),{})}),(0,g.WI)("metricsReporter").setBaseUrl(e.baseUrl))},sendMMPEvent(){},incrementPlaybackCount(){const e="playbackCount",t=(0,g.WI)("sessionStats");t.save(e,t.get(e)+1)},addPlaybackTime(e){const t="playbackTime",r=(0,g.WI)("sessionStats");r.save(t,r.get(t)+e)},trackView(e,t){const r=Pl.cp.measureStartupDuration("pageReadyTime");if(void 0!==r){const t=Math.round(Pl.cp.getMeasureDurationTotal(sn.Yl));this.trackEvent({event:sn.Yl,interaction:!0,properties:{initializationTime:t,latency:t,mode:"uno",pageReadyTime:Math.round(r),pinnedPMSSources:e.pinnedPMSSources,pinnedProviderSources:e.pinnedProviderSources}})}const n=Ll({event:sn.uu,interaction:!0,properties:e},t),i=Pl.cp.measure(function(e,t){let r=e;for(let e=0;e<Sl.length;e++){const n=t[Sl[e]];null!=n&&(r=`${r}:${n}`)}return r}(sn.uu,e),`${sn.uu}:${e.page}-start`);i&&(n.properties=jl(Ll({},n.properties),{latency:Math.round(i.duration)})),this.trackEvent(n)},trackClick(e,t){this.trackEvent(Ll({event:sn.Wi,interaction:!0,properties:e},t))},trackEvent(e){var t;if(!this.enabled)return;const r=null==(t=e.properties)?void 0:t.contextTuple;r&&(delete e.properties.contextTuple,Object.assign(e.properties,(0,Ml._i)(r)));const n=(0,g.WI)("sessionStats"),i=n.get("sessionId"),s=n.get("anonymousSessionId");if(!this.privacySettings)return void this._pendingEvents.push(jl(Ll({},e),{sessionIdentifier:i,anonymousSessionIdentifier:s}));const a=c().extend(!0,{},this.defaults,e);a.sessionIdentifier||(a.sessionIdentifier=i),a.anonymousSessionIdentifier||(a.anonymousSessionIdentifier=s);const o=Date.now();if(e.event!==sn.kg&&e.event!==sn.Yl&&o-n.get("lastInteractionTime")>Ul)return void this.flushSession(!0).then((()=>{this.trackEvent(e)}));const l=this.privacySettings.metrics[a.event];l&&("off"===l||(a.interaction&&(0,El.c)(),"anonymous"===l&&(delete a.userId,a.deviceIdentifier=(0,g.WI)("appModel").get("anonymousClientID"),a.sessionIdentifier=a.anonymousSessionIdentifier),delete a.anonymousSessionIdentifier,(0,g.WI)("metricsReporter").trackEvent(a)))},trackPendingEvents(){const e=this._pendingEvents;let t=0;for(;t<e.length;)this.trackEvent(e[t]),t++;this._pendingEvents=[]},start(){Pl.cp.measure(sn.Yl,Pl.uG);const e=(0,g.WI)("appModel").get("user");return this.flushSession(!1,!0).then((()=>(0,z.c)(e.server.populate()))).then((()=>this.fetchPrivacySettings())).always((()=>{this.listenTo(e.server,"change:isConnected",this.onCloudServerChange),this.listenTo(e,"change:id",this.onUserIDChange)})),c().Deferred().resolve().promise()},flushSession(e,t){const r=(0,g.WI)("sessionStats"),n=r.populate().then((()=>{t&&r.get("sessionId")&&this.trackClientShutdown(),this.startSession(e)}),(()=>{this.startSession(e)}));return(0,z.c)(n)},startSession(e){const t=Date.now(),r=(0,g.WI)("sessionStats");if(!this.interval){const e=se.c.heartbeatInterval;this.interval=window.setInterval((()=>{const e=Date.now(),t={heartbeatTime:e};this.isPlaybackActive()&&(t.lastInteractionTime=e),r.set(t)}),e)}const n=r.get("sessionId"),i=r.get("lastInteractionTime");!n||e||t-i>Ul?r.save({sessionId:Ol(),anonymousSessionId:Ol(),lastInteractionTime:t,heartbeatTime:t}):r.save({lastInteractionTime:t,heartbeatTime:t})},trackClientShutdown(){const e=(0,g.WI)("sessionStats"),t=e.get("heartbeatTime"),r=e.get("playbackCount"),n=e.get("playbackTime"),i=e.get("startTime");this.trackEvent({event:sn.kg,interaction:!1,properties:{sessionLength:Math.floor((t-i)/1e3),playbackCount:r,playbackTime:(0,Il.c)(n)}});const s=Date.now();e.save({startTime:s,lastInteractionTime:s,heartbeatTime:s,playbackCount:0,playbackTime:0})},toJSON(){return Ll({},this.defaults)},onCloudServerChange(e,t){t?this.fetchPrivacySettings():this.privacySettings=null},onUserIDChange(){this._appsflyerIntervalID&&window.clearInterval(this._appsflyerIntervalID),this._appsflyerTimeoutID&&window.clearTimeout(this._appsflyerTimeoutID),this.privacySettings=null,this.debouncedFetchPrivacySettings()}}),Vl=Fl;var _l=r(54268),Wl=r(84508);const Bl=ce.c.extend({mixins:[de.c],initialize(e){this.appModel=e.appModel,this.servers=this.appModel.get("servers")},start(e){this.stop(),this.listenTo(this.appModel,{"change:primaryServer":this.onPrimaryServerChange,"change:primaryServer.change:isPrimaryEligible":this.onPrimaryServerEligibleChange,"change:primaryServer.change:isOutOfDate":this.onPrimaryServerOutOfDateChange,"change:isWaitingForServers":this.onWaitingForServersChange,"change:primaryServer.change:isRelayed":this.onPrimaryServerIsRelayedChange}),this.listenTo(this.servers,{"update reset":this.onServersUpdate}),this._setPrimaryServer(Wl.STARTUP)},stop(){this.stopListening(),this._primaryServerPromise=null},_setPrimaryServer(e){if(this._primaryServerPromise)return this._primaryServerPromise;const t=(0,g.WI)("appStore");t.dispatch((0,Ye.Il)());const r=this._waitForPrimaryServer();return this._primaryServerPromise=r,r.done((n=>{if(r===this._primaryServerPromise){if(this._primaryServerPromise=null,this.appModel.get("primaryServer"))return;const r=!n.get("version")&&!n.get("isRejected");n.get("isOutOfDate")||r?((0,b.c)("[Primary Server] The server, %s, is waiting for a version",n.get("debugName")),this._setPrimaryServer(e)):t.dispatch((0,Ye.WG)({machineIdentifier:n.id,metricsProperties:{context:e}}))}})).fail((()=>{r===this._primaryServerPromise&&(this._primaryServerPromise=null,this.appModel.set("isWaitingForPrimaryServer",!1))})),r},_waitForPrimaryServer(){const e=this.appModel.get("user").get("lastPrimaryServerID");let t;return e?((0,b.c)("[Primary Server] Waiting for the last primary server, %s, to connect",e),t=this.servers.populateServer({machineIdentifier:e,isPrimaryEligible:!0,isOutOfDate:!1})):t=c().Deferred().reject().promise(),t=t.then(null,(()=>((0,b.c)("[Primary Server] Waiting for any owned server to connect"),this.servers.populateServer({isFullOwnedServer:!0,isPrimaryEligible:!0,isOutOfDate:!1})))),t=t.then(null,(()=>((0,b.c)("[Primary Server] Waiting for any eligible server to connect"),this.servers.populateServer({isPrimaryEligible:!0,isOutOfDate:!1})))),t=t.then(null,(()=>((0,b.c)("[Primary Server] Waiting for any eligible server"),this.servers.findServer({isPrimaryEligible:!0,isOutOfDate:!1})))),t},onPrimaryServerChange(e,t){an.c.flushDebouncedSave();const r=e.previous("primaryServer");r&&this.stopListening(r),t?(b.c.info("[Primary Server] %s is now the primary server",t.get("debugName")),e.get("user").set("lastPrimaryServerID",t.id),t.get("isRelayed")&&(0,g.WI)("appStore").dispatch((0,_l.Wv)({machineIdentifier:t.id,serverName:t.get("friendlyName")}))):e.get("isWaitingForPrimaryServer")?(0,b.c)("[Primary Server] Waiting to set the primary server"):b.c.warn("[Primary Server] No primary server found")},onPrimaryServerEligibleChange(e,t){const r=this.appModel.get("user");t||((0,b.c)("[Primary Server] The previous primary server, %s, is unauthorized",e.get("debugName")),r.unset("lastPrimaryServerID"),this._setPrimaryServer(Wl.FALLBACK))},onPrimaryServerOutOfDateChange(e,t){const r=this.appModel.get("user");t&&((0,b.c)("[Primary Server] The previous primary server, %s, is out of date",e.get("debugName")),r.unset("lastPrimaryServerID"),this._setPrimaryServer(Wl.FALLBACK))},onWaitingForServersChange(e,t){if(t){const t=e.get("primaryServer"),r=!t||!this.servers.get(t.id),n=e.get("isWaitingForPrimaryServer");r&&!n&&this._setPrimaryServer(Wl.FALLBACK)}},onPrimaryServerIsRelayedChange(e,t){t&&(0,g.WI)("appStore").dispatch((0,_l.Wv)({machineIdentifier:e.id,serverName:e.get("friendlyName")}))},onServersUpdate(){const e=this.appModel.get("user"),t=this.appModel.get("primaryServer");t?t&&!this.servers.get(t.id)&&((0,b.c)("[Primary Server] The previous primary server, %s, was removed",t.get("debugName")),e.unset("lastPrimaryServerID"),this._setPrimaryServer(Wl.FALLBACK)):this._setPrimaryServer(Wl.STARTUP)}}),Hl=ce.c.extend({mixins:[de.c],initialize(e){this.appModel=e.appModel},start(){const e=this.appModel.get("user");this.populateCloudProviders(e.get("providers")),this.listenTo(this.appModel,{"change:user.change:providers.add":this.onProviderAdd})},stop(){this.stopListening()},populateCloudProviders(e){e.each((e=>{this.populateCloudProvider(e)}))},populateCloudProvider(e){e.get("isPopulated")||(0,g.WI)("appStore").dispatch((0,ca.qm)({providerEntityID:e.entityID(),options:{merge:!0}}))},onProviderAdd(e){this.populateCloudProvider(e)}});function zl(e,t,r){return function(n){return n.server===e&&n.connection.id===t.id&&n.url===r}}const Gl=ce.c.extend({initialize(e){this.appModel=e.appModel,this.queued=[],this.executing=[],this.maximumConcurrent=se.c.maximumConcurrentConnectionTests,this.throttledStartProcessing=v().throttle(this._startProcessing.bind(this),50,{leading:!1})},queueConnectionTest({server:e,connection:t,url:r}){const n=this._queuedOrExecuting(e,t,r);if(n)return n.deferred.promise();const i=c().Deferred();return this.queued.push({server:e,connection:t,url:r,deferred:i}),this._sortQueue(),this.throttledStartProcessing(),i.promise()},abortConnectionTest({server:e,connection:t,url:r}){return this._abortCurrentTest(e,t,r),this._removeQueuedOrExecuting(e,t,r),c().Deferred().resolve().promise()},reset(){for(this.queued.length=0;this.executing.length>0;)this.abortConnectionTest(this.executing[0])},_sortQueue(){const e=this.appModel.get("user").get("lastPrimaryServerID");this.queued.sort(((t,r)=>{const n=t.server,i=r.server,s=t.connection,a=r.connection,o=this._isManualConnection(s),c=this._isManualConnection(a),l=this._isMatchingLocation(n,s),d=this._isMatchingLocation(i,a);return n.id===e&&i.id!==e?-1:i.id===e&&n.id!==e?1:n.get("isCloud")&&!i.get("isCloud")?-1:i.get("isCloud")&&!n.get("isCloud")?1:!s.get("relay")&&a.get("relay")?-1:!a.get("relay")&&s.get("relay")?1:!s.get("isConnected")&&a.get("isConnected")?-1:!a.get("isConnected")&&s.get("isConnected")?1:!n.get("isShared")&&i.get("isShared")?-1:!i.get("isShared")&&n.get("isShared")?1:n.get("isFullServer")&&!i.get("isFullServer")?-1:i.get("isFullServer")&&!n.get("isFullServer")?1:o&&!c?-1:c&&!o?1:s.get("isBundled")&&!a.get("isBundled")?-1:a.get("isBundled")&&!s.get("isBundled")?1:l&&!d?-1:d&&!l?1:0}))},_startProcessing(){v().times(this.maximumConcurrent-this.executing.length,this._process.bind(this))},_process(){if(this.executing.length>=this.maximumConcurrent)return;if(!this.queued.length)return;const e=this.queued.shift(),{server:t,connection:r,url:n}=e;this._abortCurrentTest(t,r,n);const i=(0,g.WI)("testServerConnection")({server:t,connection:r,url:n});this.executing.push(e),i.done(((t,r)=>{e.deferred.resolve(t,r)})),i.fail(((t,r)=>{e.deferred.reject(t,r)})),i.always((()=>{const t=this.executing.indexOf(e);this.executing.splice(t,1),this._process()}))},_abortCurrentTest(e,t,r){t.get("currentTest")&&t.get("currentTest").forEach((n=>{const i=e.resolveUrl(r||n.url,{connection:t});n&&"pending"===n.state()&&((0,b.c)("[Connections] Aborting pending connection test for %s at %s",e.get("debugName"),i),M.c.abort(n.rid),n.abort())}))},_isManualConnection:e=>e.get("sources").some((e=>0===e.id.indexOf("manualServer"))),_isMatchingLocation(e,t){const r=e.get("publicAddressMatches"),n=t.get("isPrivate");return r&&n||!r&&!n},_queuedOrExecuting(e,t,r){const n=zl(e,t,r);return v().find(this.executing,n)||v().find(this.queued,n)},_removeQueuedOrExecuting(e,t,r){const n=zl(e,t,r),i=v().findIndex(this.executing,n),s=v().findIndex(this.queued,n);i>=0&&this.executing.splice(i,1),s>=0&&this.queued.splice(s,1)}}),ql=Gl;var Kl=r(26960),Ql=r(26500),$l=r(8712),Yl=r(36296),Xl=r(11695),Jl=Object.defineProperty,Zl=Object.getOwnPropertySymbols,ed=Object.prototype.hasOwnProperty,td=Object.prototype.propertyIsEnumerable,rd=(e,t,r)=>t in e?Jl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function nd(e){const t=((e,t)=>{for(var r in t||(t={}))ed.call(t,r)&&rd(e,r,t[r]);if(Zl)for(var r of Zl(t))td.call(t,r)&&rd(e,r,t[r]);return e})({entityID:e.entityID()},e.toJSON());return(0,Xl.c)(t)}const id=Object.keys($l.c.prototype.syncedAttrs),sd=ce.c.extend({mixins:[de.c],initialize(e){this.appModel=e.appModel,this.servers=this.appModel.get("servers")},start(){this.stop(),this.listenTo(this.servers,{"change:promiseState":this.onServerPromiseStateChange,remove:this.onServerRemove,"update reset":this.onServersUpdateReset,"change:resources.add":this.onResourceAdd,"change:resources.remove":this.onResourceRemove,"change:resources.update":this.onResourcesUpdate,"change:resources.reset":this.onResourcesReset,"change:resources.change:presence":this.onResourcesPresenceChange,"change:resources.change:connections.update":this.onResourceConnectionsUpdate,"change:isConnected":this.onConnectedChange,"change:desktop.change:isSettingsPopulated":this.onSettingsPopulatedChange}),id.forEach((e=>{this.listenTo(this.servers,"change:"+e,this.onStoredServerAttributeChange.bind(this,e))})),this.listenTo(le.c,"discover:servers",this.onDiscoverServers),this._setAuthorized(),this._checkFoundAllServers()},stop(){this.stopListening()},_checkFoundAllServers(){this.servers.shouldWaitForInitialServers()||this.servers.shouldWaitForResources()||this.servers.shouldWaitForPendingServers()?this._waitForServers():this._foundAllServers()},_waitForServers(){this.servers.waitForServers(),(0,As.SS)((()=>{this.appModel.set("isWaitingForServers",!0)}))},_foundAllServers(){this.servers.foundAllServers(),(0,As.SS)((()=>{this.appModel.set("isWaitingForServers",!1)}))},_fetchResources(e){if(e.get("isRejected"))return b.c.warn("[Servers] Failed to request resources through %s",e.get("debugName")),e.set({isResourcesPending:!1,hasFailedResources:!0,isDownForMaintenance:!1}),c().Deferred().reject().promise();if(!e.get("isResolved"))return(0,b.c)("[Servers] Finding resources through unresolved cloud server %o, resolving",e.get("debugName")),e.populate().then((()=>this._fetchResources(e)));(0,b.c)("[Servers] Finding resources through %s",e.get("debugName")),this._waitForServers(),e.set("isResourcesPending",!0);const t=e.get("resources");return t.fetch().done((()=>{(0,b.c)("[Servers] Found %s resources through %s",t.length,e.get("debugName")),e.set({isResourcesPending:!1,isResourcesPopulated:!0,hasFailedResources:!1,isDownForMaintenance:!1})})).fail(((t,r)=>{b.c.warn("[Servers] Failed to request resources through %s",e.get("debugName")),e.set({isResourcesPending:!1,hasFailedResources:!0,isDownForMaintenance:503===r.status})})).always((()=>{this._checkFoundAllServers()}))},_convertResourceToServer:e=>((0,b.c)("[Servers] %s was found through %s",e.get("name"),e.server.get("debugName")),(0,Kl.c)(e)),_removeResource(e){(0,b.c)("[Servers] %s was removed as a resource from %s",e.get("name"),e.server.id);const t=this.servers.get(e.id);t&&t.removeSource(e.server.id)},_pruneStaleSources(e){const t=e.get("resources");let r=this.servers.length-1;for(;r>=0;){const n=this.servers.at(r),i=t.get(n.id);if(i){const t=n.get("connections");let r=t.length-1;for(;r>=0;){const n=t.at(r);n.get("sources").get(e.id)&&(i.get("connections").get(n.id)||n.get("sources").remove(e.id)),r--}}else n.removeSource(e.id);r--}},_setAuthorized(){const e=!!this.servers.findWhere({isConnected:!0,isCloud:!1}),t=!!this.servers.findWhere({isResolved:!0,isCloud:!0});this.appModel.set("authorized",e||t)},onServerPromiseStateChange(e,t){e.get("resources")&&this._fetchResources(e),this._setAuthorized(),this._checkFoundAllServers()},onStoredServerAttributeChange(e,t,r){const n=an.c.getActiveServers(),i=n&&n.get(t.id);i&&null!=r&&i.get(e)!==r&&(i.set(e,r),an.c.debouncedSave())},onServerRemove(e){b.c.warn("[Servers] %s was removed",e.get("debugName")),e.cache.remove(e),le.c.trigger("clearWhere:cache",{server:e})},onServersUpdateReset(){this._setAuthorized(),this._checkFoundAllServers()},onDiscoverServers(){const e=this.appModel.get("cloudServer");this._fetchResources(e)},onResourceAdd(e){if(v().contains(e.get("provides"),"server")){const t=this._convertResourceToServer(e);t.get("isMobileServer")||this.servers.add(t)}},onResourceRemove(e){this._removeResource(e)},onResourcesUpdate(e){this._pruneStaleSources(e.server),this._checkFoundAllServers()},onResourcesReset(e,t){const r=t.previousModels;v().each(r,(t=>{e.contains(t)||this._removeResource(t)})),this._checkFoundAllServers()},onResourcesPresenceChange(e){const t=this.servers.get(e.id);t&&t.set("presence",e.get("presence"))},onResourceConnectionsUpdate(e){const t=e.parent,r=this.servers.get(t.id);r&&((0,Ql.c)(r,t),this._pruneStaleSources(e.server),this._checkFoundAllServers())},onConnectedChange(e,t){const r=(0,g.WI)("appStore"),n=nd(e);r.dispatch(vr.c.actions.connectionChanged({server:n})),t&&e.get("isFullOwnedServer")&&(r.dispatch(gr.c.actions.fetchRequested({server:n})),r.dispatch((0,Yl.GQ)({serverEntityID:e.entityID()})))},onSettingsPopulatedChange(e,t){if(t){const t=e.get("settings"),r=t.get("AcceptedEULA");r&&!1===r.get("value")&&!window.location.hash.includes("/setup")&&(0,Qt.c)("serverSetup",{machineIdentifier:t.server.id})}}});var ad=r(28016);const od=ce.c.extend({mixins:[de.c],initialize(e){this.appModel=e.appModel},start(){this.stop(),this.listenTo(this.appModel.get("servers"),{"change:isConnected":this.onServerIsConnectedChange,"change:isInstallingServerUpdate":this.onIsInstallingServerUpdateChange})},stop(){this.stopListening()},onServerIsConnectedChange(e,t){t&&g.WI("appStore").dispatch((0,ad.Oe)({serverEntityID:e.entityID()}))},onIsInstallingServerUpdateChange(e,t){t||g.WI("appStore").dispatch((0,ad.Oe)({serverEntityID:e.entityID()}))}});var cd=r(84833),ld=r(62288),dd=r(86616),ud=r(46207),pd=r(1904),md=r(91224),hd=r(90012),yd=r(28012),gd=r(23276);const fd=ce.c.extend({mixins:[de.c],initialize(e){this.appModel=e.appModel,this.debouncedSaveTimeout=null,this.shouldExcludeDiscoverSources=!1},start(){this.listenTo(this.appModel,{"change:user.change:providers.add":this.onCloudProviderAdd,"change:user.change:providers.change:isPending":this.onCloudProviderIsPendingChange,"change:user.change:isProvidersPending":this.onCloudProvidersIsPendingChange,"change:user.change:optOuts.change":this.onUserOptOutsChange}),this.listenTo(this.appModel.get("servers"),{"change:isConnected":this.onServerIsConnectedChange,"change:isProvidersPending":this.onServerIsProvidersPendingChange,add:this.onServerAdd,"change:friendlyName":this.onServerAttrChanged,"change:sourceTitle":this.onServerAttrChanged}),this.listenTo(this.appModel.get("cloudServer"),{"change:isResourcesPending":this.onCloudReadyChange,"change:hasFailedResources":this.onCloudReadyChange})},_getPinnedSources(){return this.appModel.get("user").get("experienceSettings").get("sidebarSettings").get("pinnedSources")},_shouldRemoveHiddenSource(e){const t=e.get("hiddenAt");return t>0&&Date.now()-t>604800},_hidePinnedSources(e){e.forEach((e=>{e.get("isHidden")?this._shouldRemoveHiddenSource(e)&&(e.trigger("destroy",e,e.collection),this._debouncedSaveExperienceSettings()):(e.set({isHidden:!0,hiddenAt:Date.now()}),this._debouncedSaveExperienceSettings())}))},_hideSourcesWithNoServer(){const e=this.appModel.get("servers"),t=this._getPinnedSources().filter((t=>!e.get(t.get("machineIdentifier"))));this._hidePinnedSources(t)},_toggleShouldExcludeDiscoverSources(){const e=this.appModel.get("user"),t=e.get("optOuts"),r=!e.get("isFullUser"),n=t.findWhere({key:hd.s.IncludeDiscoverSource});this.shouldExcludeDiscoverSources=r?(null==n?void 0:n.get("value"))!==hd.M.OptIn:(null==n?void 0:n.get("value"))===hd.M.OptOut,this.onShouldExcludeDiscoverSourcesChange()},_hideSourcesWithNoProvider(e,t,r,n){if(e.get("isConnected")&&r&&!n){const r=e.get("machineIdentifier"),n=this._getPinnedSources().filter((e=>{const n=e.get("machineIdentifier"),i=e.get("providerIdentifier");return n===r&&!t.get(i)}));this._hidePinnedSources(n)}},_hideCloudSourcesWithNoProvider(e){const t=this.appModel.get("cloudServer");this._hideSourcesWithNoProvider(t,e.get("providers"),e.get("isProvidersPopulated"),e.get("providersError"))},_hideServerSourcesWithNoProvider(e){this._hideSourcesWithNoProvider(e,e.get("providers"),e.get("isProvidersPopulated"),e.get("providersError"))},_updateStoredPinnedSources(e,t,r){const n=[];this._getPinnedSources().forEach((i=>{const s=(0,dd.c)(i.toJSON());if(s.machineIdentifier!==e.machineIdentifier||s.providerIdentifier!==t.identifier||s.directoryID!==r.id)return;const a=(0,yd.c)(t,s.directoryID),o=ni._u(s.providerIdentifier,ni.Im)&&s.directoryID===hi.qU;if(!a||this.shouldExcludeDiscoverSources&&o)return void(e.isConnected&&t.isPopulated&&n.push(i));const c=(0,pd.c)(t,r),l=(0,dd.c)((0,ld.c)({sourceType:c?c.key:null,sourceServer:e,sourceProvider:t,sourceDirectory:r}));i.get("isHidden")&&(l.isHidden=!1,l.hiddenAt=null),(0,gd.c)(s,l)||(i.set(l),this._debouncedSaveExperienceSettings())})),this._hidePinnedSources(n)},_autoPinSources(e,t,r){const n=this.appModel.get("user").get("experienceSettings"),i=n.get("dismissedWhatsNewFeatures"),s=n.get("autoPinnedProviders"),a=n.get("sidebarSettings"),o=a.get("pinnedSources"),c=(0,yi.c)(e.machineIdentifier,t.identifier,r.id);if(!ni._u(t.identifier,[ni.Sg,ni.$9,ni.Im])||s.includes(c))return;if(n.set({autoPinnedProviders:[...s,c]}),this._debouncedSaveExperienceSettings(),!a.get("hasCompletedSetup")||ni._u(t.identifier,ni.Im)&&r.id===hi.qU&&i["fd9f56d8-8858-490d-aede-05c29b06d584"])return;const l=(0,pd.c)(t,r),d=(0,ud.c)(l?l.key:null,e.machineIdentifier,t.identifier,r.id);if(l&&!o.get(d)){const n=(0,ld.c)({sourceType:l?l.key:null,sourceServer:e,sourceProvider:t,sourceDirectory:r});ni._u(t.identifier,ni.Im)?(0,g.WI)("appStore").dispatch((0,pa.cF)({sources:[(0,dd.c)(n)]})):(0,g.WI)("appStore").dispatch((0,pa.Nl)({sources:[(0,dd.c)(n)],interaction:!1}))}},_processSources(e,t){var r;if(!t.isPopulated)return;const n=null==(r=t.features.find((e=>e.type===Ot.c.CONTENT)))?void 0:r.directories;null==n||n.forEach((r=>{this._updateStoredPinnedSources(e,t,r),this._autoPinSources(e,t,r)}))},_debouncedSaveExperienceSettings(){const e=this.appModel.get("user").get("experienceSettings");e.set({isDirty:!0}),this.debouncedSaveTimeout&&window.clearTimeout(this.debouncedSaveTimeout),this.debouncedSaveTimeout=window.setTimeout((()=>{e.get("isDirty")&&(0,g.WI)("appStore").dispatch((0,ll.SI)())}),1e3)},_processCloudProviderChange(e){const t=this.appModel.get("cloudServer").toJSON(),r=e.toJSON();this._processSources(t,r)},_processServerChange(e){if(!e.get("isConnected")||!e.get("isProvidersPopulated"))return;const t=e.toJSON();t.providers.forEach((e=>this._processSources(t,e)))},_migrateToHybrid(e){const t=this._getPinnedSources(),r=t.filter((e=>ni._u(e.get("providerIdentifier"),ni._0)||ni._u(e.get("providerIdentifier"),ni.$9)&&!ni.QJ(e.get("providerIdentifier")))),n=t.some((e=>ni._u(e.get("providerIdentifier"),ni.$9)&&ni.QJ(e.get("providerIdentifier"))));if(r.length){const i=t.indexOf(r.at(0));if(t.remove(r),!n){const r=(0,yd.c)(e,hi.qU),n=(0,dd.c)((0,ld.c)({sourceType:md.uO,sourceServer:this.appModel.get("cloudServer").toJSON(),sourceProvider:e,sourceDirectory:r}));t.add(n,{at:i})}this._debouncedSaveExperienceSettings()}},onCloudProviderAdd(e){this._processCloudProviderChange(e)},onCloudProviderIsPendingChange(e,t){t||(this._processCloudProviderChange(e),ni._u(e.get("identifier"),ni.$9)&&ni.QJ(e.get("identifier"))&&this._migrateToHybrid(e.toJSON()))},onCloudProvidersIsPendingChange(e,t){t||this._hideCloudSourcesWithNoProvider(e)},onUserOptOutsChange(){this._toggleShouldExcludeDiscoverSources()},onServerAttrChanged(e){this._processServerChange(e)},onServerIsConnectedChange(e,t){t||this._processServerChange(e)},onServerIsProvidersPendingChange(e,t){t||(this._hideServerSourcesWithNoProvider(e),this._processServerChange(e))},onServerAdd(e){this._processServerChange(e)},onCloudReadyChange(e){e.get("isResourcesPending")||e.get("hasFailedResources")||this._hideSourcesWithNoServer()},onShouldExcludeDiscoverSourcesChange(){if(this.shouldExcludeDiscoverSources){const e=this._getPinnedSources().filter((e=>ni._u(e.get("providerIdentifier"),ni.Im)&&e.get("directoryID")===hi.qU));this._hidePinnedSources(e)}this.appModel.get("user").get("providers").filter((e=>ni._u(e.get("identifier"),ni.Im))).forEach((e=>{e.get("features").clear(),(0,g.WI)("appStore").dispatch((0,ca.WO)({providerEntityID:e.entityID(),options:{merge:!0}})),(0,cd.c)(e).then((()=>{this._processCloudProviderChange(e)}))}))}});function vd(e,t){const r=e.get("user"),n=()=>{i&&(i=window.clearTimeout(i)),t(r,r.get("isSignedIn"))};let i=window.setTimeout(n,0);return r.on("change:isSignedIn",n),()=>{i&&(i=window.clearTimeout(i)),r.off("change:isSignedIn",n)}}var bd=r(74003),Sd=r(87644),Pd=Object.defineProperty;const Id=window.console.error.bind(window.console,"[Events]");class Ed{constructor(){var e,t;((e,t,r)=>{t in e?Pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="listeners")?e+"":e,t),this.listeners=new Map}destroy(){this.removeAllListeners()}addListener(e,t){const r=this.listeners.get(e)||new Set;this.listeners.has(e)||this.listeners.set(e,r),r.add(t)}emit(e,...t){var r;null==(r=this.listeners.get(e))||r.forEach((e=>{try{e(...t)}catch(e){Id(e)}}))}removeListener(e,t){var r;null==(r=this.listeners.get(e))||r.delete(t)}removeAllListeners(){this.listeners.forEach((e=>e.clear()))}}var wd=Object.defineProperty,Cd=(e,t,r)=>(((e,t,r)=>{t in e?wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Od{constructor(e,t,r,n){Cd(this,"breakPositionSeconds"),Cd(this,"displayIndex"),Cd(this,"displayTotal"),Cd(this,"isPlaying"),this.breakPositionSeconds=null!=n?n:null,this.displayIndex=null!=t?t:null,this.displayTotal=null!=r?r:null,this.isPlaying=e}static fromJSON(e){const{playing:t,index:r,count:n,breakPosition:i}=e;return new Od(t,r,n,i)}toJSON(){const e={playing:this.isPlaying};return null!=this.breakPositionSeconds&&(e.breakPosition=this.breakPositionSeconds),null!=this.displayIndex&&(e.index=this.displayIndex),null!=this.displayTotal&&(e.count=this.displayTotal),e}toString(){return JSON.stringify(this.toJSON())}}var Md=Object.defineProperty,Td=(e,t,r)=>(((e,t,r)=>{t in e?Md(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Dd{constructor(e,t){Td(this,"ad"),Td(this,"sourceUri"),this.ad=t||new Od(!1),this.sourceUri=e}static fromJSON(e){if(!e.name)return;const t=JSON.parse(e.name);return new Dd(t.uri,Od.fromJSON(t.ads))}toJSON(){const e={ads:this.ad.toJSON(),uri:this.sourceUri};return{name:JSON.stringify(e)}}}var kd=Object.defineProperty,xd=(e,t,r)=>(((e,t,r)=>{t in e?kd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const Ad=/_+$/;class Rd{constructor(e,t,r){xd(this,"deviceIdentifier"),xd(this,"deviceName"),xd(this,"id"),this.id="number"==typeof e?e:parseInt(e,10),this.deviceIdentifier=t,this.deviceName=r}static fromJSON(e){const{deviceIdentifier:t,deviceName:r,userID:n}=e;return new Rd(n,t,r)}static fromString(e){const t=e.replace(Ad,"");return Rd.fromJSON(JSON.parse(t))}toJSON(){const{deviceIdentifier:e,deviceName:t,id:r}=this;return{deviceIdentifier:e,deviceName:t,userID:String(r)}}toString(){return JSON.stringify(this.toJSON())}}var Nd=Object.defineProperty,Ld=(e,t,r)=>(((e,t,r)=>{t in e?Nd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class jd{constructor(e,t){Ld(this,"roomID"),Ld(this,"type","Hello"),Ld(this,"user"),this.roomID=t,this.user=e}static fromJSON(e){return new jd(Rd.fromString(e.username),e.room.name)}toJSON(){return{[this.type]:{room:{name:this.roomID},username:this.user.toString(),version:"1.6.4"}}}}var Ud=Object.defineProperty,Fd=(e,t,r)=>(((e,t,r)=>{t in e?Ud(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Vd{constructor(e,t,r,n){Fd(this,"user"),Fd(this,"isReady"),Fd(this,"position"),Fd(this,"file"),this.file=n||null,this.isReady=t,this.position=r,this.user=e}static fromJSON(e,t){return new Vd(Rd.fromString(e),t.isReady||!1,t.position,Dd.fromJSON(t.file))}}class _d{constructor(e){Fd(this,"type","List"),Fd(this,"users"),this.users=e||[]}static fromJSON(e,t){const r=e[t],n=[];for(const e in r){const t=Vd.fromJSON(e,r[e]);n.push(t)}return new _d(n)}toJSON(){return{[this.type]:{}}}}var Wd=Object.defineProperty,Bd=(e,t,r)=>(((e,t,r)=>{t in e?Wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Hd{constructor(e,t,r,n){Bd(this,"type","Set"),Bd(this,"file",null),Bd(this,"hasJoined",null),Bd(this,"hasLeft",null),Bd(this,"isReady",null),Bd(this,"user"),this.user=e,"boolean"==typeof t||null===t?this.isReady=t:(this.file=null!=t?t:null,this.hasJoined=null!=r?r:this.hasJoined,this.hasLeft=null!=n?n:this.hasLeft)}static fromJSON(e,t){if(e.ready){const{isReady:t,username:r}=e.ready,n=Rd.fromString(r);return new Hd(n,t)}if(e.user){const[r,n]=Object.entries(e.user)[0];if(n.room.name===t){const e=Rd.fromString(r),t=n.file&&Dd.fromJSON(n.file),{joined:i=!1,left:s=!1}=n.event||{};return new Hd(e,t,i,s)}}}toJSON(){const{file:e,isReady:t}=this;return e?{[this.type]:{file:e.toJSON()}}:null!=t?{[this.type]:{ready:{isReady:t}}}:void 0}}var zd=Object.defineProperty,Gd=(e,t,r)=>(((e,t,r)=>{t in e?zd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class qd{constructor(e,t,r){Gd(this,"ignoringOnTheFly"),Gd(this,"ping"),Gd(this,"playstate"),Gd(this,"setBy"),Gd(this,"type","State"),this.ignoringOnTheFly=r,this.ping=e,this.playstate=t,this.setBy=t.setBy?Rd.fromString(t.setBy):null}static fromJSON(e){const{ping:t,playstate:r,ignoringOnTheFly:n}=e;return new qd(t,r,n)}toJSON(){const{ignoringOnTheFly:e,ping:t,playstate:r}=this,n={ping:t,playstate:r};return null!=(null==e?void 0:e.client)&&null!=(null==e?void 0:e.server)?n.ignoringOnTheFly={client:e.client,server:e.server}:null!=(null==e?void 0:e.client)?n.ignoringOnTheFly={client:e.client}:null!=(null==e?void 0:e.server)&&(n.ignoringOnTheFly={server:e.server}),{[this.type]:n}}}var Kd=r(20688),Qd=r.n(Kd),$d=Object.defineProperty,Yd=(e,t,r)=>(((e,t,r)=>{t in e?$d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const Xd=window.console.error.bind(window.console,"[WebSocketConnection]");class Jd extends Ed{destroy(){super.destroy()}}class Zd extends Jd{constructor(e){super(),Yd(this,"isPingEnabled"),Yd(this,"pingIntervalID"),Yd(this,"url"),Yd(this,"socket"),Yd(this,"onHelloInterval",(()=>{try{this.isOpen&&this.send("hello")}catch(e){Xd(`WebSocketConnection hello exception: ${e.message}`)}})),this.isPingEnabled=!1!==e.isPingEnabled,this.url=e.url}get isConnecting(){var e;return 0===(null==(e=this.socket)?void 0:e.readyState)}get isOpen(){var e;return 1===(null==(e=this.socket)?void 0:e.readyState)}open(){return new Promise(((e,t)=>{if(this.isConnecting||this.isOpen)return void t(new Error("Refusing to open multiple connections"));const r=new window.WebSocket(this.url);this.socket=r,r.onerror=()=>{t(new Error("Connection error"))},r.onopen=()=>{this.isPingEnabled&&(this.pingIntervalID=window.setInterval(this.onHelloInterval,3e4)),r.onerror=null,r.onclose=e=>{this.pingIntervalID&&(window.clearInterval(this.pingIntervalID),delete this.pingIntervalID),this.emit("close",e)},r.onmessage=e=>{try{this.emit("message",this.parseMessage(e.data))}catch(e){Xd("Parse failure",e)}},this.emit("open"),e()}}))}close(e=1e3){if((this.isOpen||this.isConnecting)&&this.socket){const{socket:t}=this;delete this.socket,t.close(e),t.onopen=null,t.onclose=null,t.onerror=null,t.onmessage=null}}destroy(){super.destroy(),this.close()}send(e){var t,r;if(!this.isOpen)throw new Error(`Cannot send to socket in state ${null==(r=this.socket)?void 0:r.readyState}`);null==(t=this.socket)||t.send(e)}parseMessage(e){return JSON.parse(e)}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,new(Qd())({attributePrefix:"",ignoreRoot:!0});var eu=Object.defineProperty,tu=(e,t,r)=>(((e,t,r)=>{t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const ru="[SyncplaySession]",nu=window.console.debug.bind(window.console,ru),iu=window.console.warn.bind(window.console,ru);class su extends Ed{constructor(e){super(),tu(this,"connection"),tu(this,"roomID"),tu(this,"onSocketClose",(e=>{this.emit("close",e)})),tu(this,"onSocketMessage",(e=>{let t;nu(`Message (${Date.now()}) <<`,e),e.Error?this.close(1011):e.Hello?t=jd.fromJSON(e.Hello):e.List?t=_d.fromJSON(e.List,this.roomID):e.Set?t=Hd.fromJSON(e.Set,this.roomID):e.State&&(t=qd.fromJSON(e.State)),t&&this.emit("message",t)}));const{roomID:t,roomSyncplayHost:r,roomSyncplayPort:n}=e,i=`wss://${r}:${n}/ws`;this.connection=new Zd({url:i,isPingEnabled:!1}),this.connection.addListener("close",this.onSocketClose),this.connection.addListener("message",this.onSocketMessage),this.roomID=t}destroy(){super.destroy(),this.connection.destroy()}open(){return e=this,null,t=function*(){yield this.connection.open()},new Promise(((r,n)=>{var i=e=>{try{a(t.next(e))}catch(e){n(e)}},s=e=>{try{a(t.throw(e))}catch(e){n(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);a((t=t.apply(e,null)).next())}));var e,t}close(e=1e3){this.connection.close(e)}send(e){const t=e.toJSON();t&&this.connection.send(JSON.stringify(t)),(t?nu:iu)(`Message (${Date.now()}) >>`,t||e)}}var au=Object.defineProperty,ou=(e,t,r)=>(((e,t,r)=>{t in e?au(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function cu(){return window.performance.now()/1e3}class lu{constructor(){ou(this,"_lastForwardDelay",0),ou(this,"averageRtt",0),ou(this,"clientRtt",0),ou(this,"lastPing")}get lastForwardDelaySeconds(){return this._lastForwardDelay}get state(){var e,t;return{clientLatencyCalculation:cu(),clientRtt:this.clientRtt,serverRtt:(null==(e=this.lastPing)?void 0:e.serverRtt)||0,latencyCalculation:(null==(t=this.lastPing)?void 0:t.latencyCalculation)||0}}update(e){const{clientLatencyCalculation:t,serverRtt:r}=e;this.lastPing=e,null!=t&&(this.clientRtt=cu()-t,this.clientRtt<0||r<0||(0===this.averageRtt&&(this.averageRtt=r),this.averageRtt=.85*this.averageRtt+this.clientRtt*(1-.85),this._lastForwardDelay=this.averageRtt/2,r<this.clientRtt&&(this._lastForwardDelay+=this.clientRtt-r)))}}var du=Object.defineProperty,uu=Object.defineProperties,pu=Object.getOwnPropertyDescriptors,mu=Object.getOwnPropertySymbols,hu=Object.prototype.hasOwnProperty,yu=Object.prototype.propertyIsEnumerable,gu=(e,t,r)=>t in e?du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fu=(e,t)=>{for(var r in t||(t={}))hu.call(t,r)&&gu(e,r,t[r]);if(mu)for(var r of mu(t))yu.call(t,r)&&gu(e,r,t[r]);return e},vu=(e,t)=>uu(e,pu(t)),bu=(e,t,r)=>(gu(e,"symbol"!=typeof t?t+"":t,r),r);const Su=window.console.debug.bind(window.console,"[SyncplayClient]");function Pu(e){return["User",e.id,`(${e.deviceName})`]}class Iu extends Ed{constructor(e){super(),bu(this,"eventFields"),bu(this,"file"),bu(this,"ignoringOnTheFly"),bu(this,"lastIsReady"),bu(this,"lastSentFile"),bu(this,"pingHelper"),bu(this,"roomID"),bu(this,"roomSourceUri"),bu(this,"session"),bu(this,"user"),bu(this,"playerBridge"),bu(this,"onSessionClose",(e=>{this.emit("close",e)})),bu(this,"onSessionMessage",(e=>{e instanceof jd?this.onHelloMessage(e):e instanceof _d?this.onListMessage(e):e instanceof Hd?this.onSetMessage(e):e instanceof qd&&this.onStateMessage(e)})),bu(this,"onHelloMessage",(e=>{this.session.send(new _d)})),bu(this,"onListMessage",(e=>{e.users.forEach((e=>{this.tryEmitUserState(!0,e.isReady,e.user)})),e.users.forEach((e=>{this.tryEmitAdState(e.file,e.user)}))})),bu(this,"onSetMessage",(e=>{const{user:t}=e,r=null!=e.hasJoined||null!=e.hasLeft?e.hasJoined||!e.hasLeft:null;this.tryEmitUserState(r,e.isReady,t),this.tryEmitAdState(e.file,t)})),bu(this,"onStateMessage",(e=>{const t=this.lastSentFile!==this.file;this.pingHelper.update(e.ping),this.tryUpdateIgnoringOnTheFly(e),this.tryEmitPlaybackState(e);const r=this.shouldEchoSessionState()?{doSeek:!1,paused:e.playstate.paused,position:e.playstate.position,setBy:null}:{doSeek:this.playerBridge.hasPendingSeek,paused:this.playerBridge.isPaused,position:this.playerBridge.positionSeconds,setBy:null};t&&this.playerBridge.hasPendingSeek&&(r.doSeek=this.playerBridge.hasPendingSeek,r.position=this.playerBridge.positionSeconds);const n=this.isReady;this.playerBridge.hasPendingPlayPause=!1,this.playerBridge.hasPendingSeek=!1,this.session.send(new qd(this.pingHelper.state,r,this.ignoringOnTheFly)),t&&(this.lastSentFile=this.file,this.session.send(new Hd(this.user,this.lastSentFile))),this.lastIsReady!==n&&(Su("Setting isReady",{isReady:n,isAdPlaying:this.file.ad.isPlaying,hasInitialBuffer:this.playerBridge.hasInitialBuffer}),this.lastIsReady=n,this.session.send(new Hd(this.user,this.lastIsReady)))}));const{deviceIdentifier:t,deviceName:r,userID:n,playerBridge:i,roomID:s,roomSourceUri:a,roomSyncplayHost:o,roomSyncplayPort:c}=e;this.eventFields={roomID:s},this.file=new Dd(a),this.ignoringOnTheFly={client:0,server:0},this.pingHelper=new lu,this.playerBridge=i,this.roomID=s,this.roomSourceUri=a,this.user=new Rd(n,t,r),this.session=new su({roomID:s,roomSyncplayHost:o,roomSyncplayPort:c}),this.session.addListener("close",this.onSessionClose),this.session.addListener("message",this.onSessionMessage)}get isReady(){return!this.file.ad.isPlaying&&this.playerBridge.hasInitialBuffer}destroy(){super.destroy(),this.leave(),this.session.destroy()}join(){return e=this,null,t=function*(){yield this.session.open(),this.session.send(new jd(this.user,this.roomID))},new Promise(((r,n)=>{var i=e=>{try{a(t.next(e))}catch(e){n(e)}},s=e=>{try{a(t.throw(e))}catch(e){n(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);a((t=t.apply(e,null)).next())}));var e,t}leave(){this.session.close(),this.file=new Dd(this.roomSourceUri)}setAdState(e,t,r){var n;const i=null==(n=this.file)?void 0:n.ad;(null==i?void 0:i.isPlaying)!==e||(null==i?void 0:i.displayIndex)!==t||(null==i?void 0:i.displayTotal)!==r?this.file=new Dd(this.roomSourceUri,e?new Od(e,t,r):void 0):Su("Will not Set redundant session ad state",{isPlaying:e,displayIndex:t,displayTotal:r})}tryEmitAdState(e,t){if(!e)return;const{ad:r}=e,n=vu(fu({},this.eventFields),{ad:r,user:t});Su(...Pu(t),"ad state",r),this.emit("session",n)}tryEmitUserState(e,t,r){const n=vu(fu({},this.eventFields),{user:r});null!=e&&(Su(...Pu(r),"present?",e),n.isPresent=e),null!=t?(Su(...Pu(r),"ready?",t),n.isReady=t):!1===e&&(n.isReady=!1),null==e&&null==t||this.emit("session",n)}tryEmitPlaybackState(e){var t;if((null==(t=e.setBy)?void 0:t.deviceIdentifier)===this.user.deviceIdentifier||this.ignoringOnTheFly.client>0)return;const{playstate:r,setBy:n}=e,i=r.position+(r.paused?0:this.pingHelper.lastForwardDelaySeconds),s={isPaused:r.paused,positionSeconds:i,shouldSeek:r.doSeek},a=fu(fu({},this.eventFields),s);n?(Su(...Pu(n),"playback state",s),a.user=n):Su("Server playback state",s),this.emit("session",a)}tryUpdateIgnoringOnTheFly(e){var t,r;const{ignoringOnTheFly:n}=this,i=null!=(null==(t=e.ignoringOnTheFly)?void 0:t.client)&&e.ignoringOnTheFly.client>0?e.ignoringOnTheFly.client:0;n.server=null!=(null==(r=e.ignoringOnTheFly)?void 0:r.server)&&e.ignoringOnTheFly.server>0?e.ignoringOnTheFly.server:0,(this.shouldEchoSessionState()||i===n.client)&&(n.client=0),this.shouldEchoSessionState()||!this.playerBridge.hasPendingPlayPause&&!this.playerBridge.hasPendingSeek||n.client++}shouldEchoSessionState(){return!this.playerBridge.isPlayerForeground||this.file.ad.isPlaying||this.ignoringOnTheFly.server>0}}var Eu=Object.defineProperty,wu=(e,t,r)=>(((e,t,r)=>{t in e?Eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let Cu;function Ou(){const e=!!Cu;return e||b.c.warn("[Watch Together] Syncplay client is unavailable"),e}const Mu=class{constructor({appModel:e,appStore:t}){wu(this,"appModel"),wu(this,"appStore"),this.appModel=e,this.appStore=t}start(){const{appModel:e,appStore:t}=this,r=t.dispatch;vd(e,((e,t)=>{!t&&Cu&&r(bd.wK())}))}update({hasPendingSeek:e,hasPendingPlayPause:t,isAdPlaying:r,adDisplayIndex:n,adDisplayTotal:i}){Ou()&&(void 0!==r&&Cu.setAdState(r,null!=n?n:void 0,null!=i?i:void 0),void 0!==t&&(Cu.playerBridge.hasPendingPlayPause=t),void 0!==e&&(Cu.playerBridge.hasPendingSeek=e))}leave(){Ou()&&(Cu.destroy(),Cu=void 0)}join({roomID:e,roomSourceUri:t,roomSyncplayHost:r,roomSyncplayPort:n}){const{appModel:i,appStore:s}=this;Cu=new Iu({deviceIdentifier:A.c.prop("X-Plex-Client-Identifier"),deviceName:A.c.prop("X-Plex-Device-Name"),playerBridge:{get hasInitialBuffer(){const e=(0,g.WI)("appModel"),t=(0,Sd.OG)(e,to.k9);if(t.get("canPlayThrough"))return!0;const r=t.get("bufferedRanges"),n=t.get("positionSeconds")+5;for(let e=0;e<r.length;e++){const t=r[e];if(n>=t.startSeconds&&n<=t.endSeconds)return!0}return!1},hasPendingPlayPause:!1,hasPendingSeek:!1,get isPaused(){const e=(0,g.WI)("appModel");return(0,Sd.OG)(e,to.k9).get("isPaused")},get isPlayerForeground(){const e=(0,g.WI)("appModel");return!1===(0,Sd.OG)(e,to.k9).get("isWatchTogetherLobbyVisible")},get positionSeconds(){const e=(0,g.WI)("appModel"),t=(0,Sd.OG)(e,to.k9);return null!=t.get("lastSeekPositionSeconds")?t.get("lastSeekPositionSeconds"):t.get("positionSeconds")}},roomID:e,roomSourceUri:t,roomSyncplayHost:r,roomSyncplayPort:n,userID:i.get("user").id}),(0,b.c)("[Watch Together] Joining session for room:",e),Cu.join().then((()=>{(0,b.c)("[Watch Together] Joined session for room:",e),(0,g.WI)("metrics").trackEvent({event:sn.Ip,interaction:!0,properties:{playbackSessionId:e}}),Cu.addListener("session",(t=>{const r={roomID:e,event:t};b.c.groupCollapsed("[Watch Together] Session event"),b.c.debug("[Watch Together] Event:",t),s.dispatch(bd.I2(r)),s.dispatch(bd.wF(r)),s.dispatch(bd.HW(r)),b.c.groupEnd()})),Cu.addListener("close",(t=>{b.c.warn("[Watch Together] Session closed unexpectedly:",t),s.dispatch(bd.yy({roomID:e,sessionError:(0,He.c)("Lost connection to the Watch Together session.")}))}))})).catch((t=>{b.c.error("[Watch Together] Error joining session for room:",e,t),s.dispatch(bd.yy({roomID:e,sessionError:(0,He.c)("Could not join at this time.")}))}))}};var Tu=r(26312),Du=Object.defineProperty,ku=(e,t,r)=>(((e,t,r)=>{t in e?Du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class xu extends Jd{constructor(){super(),ku(this,"cloudServerModel"),ku(this,"onDispatcherMessage",(e=>{this.emit("message",e)})),ku(this,"onHasEventConnectionChange",(()=>{this.cloudServerModel.get("hasEventConnection")?this.emit("open"):this.emit("close")}));const e=(0,g.WI)("appModel");this.cloudServerModel=e.get("cloudServer"),this.cloudServerModel.on({"change:hasEventConnection":this.onHasEventConnectionChange}),le.c.on({[`cloudServer:${la.s7}`]:this.onDispatcherMessage,[`cloudServer:${la.Hq}`]:this.onDispatcherMessage}),this.cloudServerModel.get("hasEventConnection")&&this.onHasEventConnectionChange()}get isConnecting(){return!1}get isOpen(){return this.cloudServerModel.get("hasEventConnection")}open(){return Promise.reject(new Error("Cannot open directly"))}close(){throw new Error("Cannot close directly")}send(){throw new Error("Cannot send directly")}destroy(){super.destroy(),le.c.off({[`cloudServer:${la.s7}`]:this.onDispatcherMessage,[`cloudServer:${la.Hq}`]:this.onDispatcherMessage}),this.cloudServerModel.off({"change:hasEventConnection":this.onHasEventConnectionChange})}}var Au=r(89899),Ru=r.n(Au),Nu=Object.defineProperty,Lu=Object.defineProperties,ju=Object.getOwnPropertyDescriptors,Uu=Object.getOwnPropertySymbols,Fu=Object.prototype.hasOwnProperty,Vu=Object.prototype.propertyIsEnumerable,_u=(e,t,r)=>t in e?Nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wu=(e,t)=>{for(var r in t||(t={}))Fu.call(t,r)&&_u(e,r,t[r]);if(Uu)for(var r of Uu(t))Vu.call(t,r)&&_u(e,r,t[r]);return e},Bu=(e,t,r)=>(_u(e,"symbol"!=typeof t?t+"":t,r),r),Hu=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function zu(e){return e}function Gu(...e){return e.filter((e=>!!(null==e?void 0:e.trim()))).map((e=>null==e?void 0:e.replace(/^\/+|\/+$/g,""))).join("/")}const qu="json";class Ku{constructor(e){Bu(this,"endpoint","https://together.plex.tv/rooms"),Bu(this,"accessToken"),this.accessToken=e.accessToken}create(e,t,r){return Hu(this,null,(function*(){return(yield Ru().post(this.endpoint,{sourceUri:e,title:t,users:r||null},{params:{"X-Plex-Token":this.accessToken},responseType:qu})).data}))}createInvites(e,t){return Hu(this,null,(function*(){return(yield Ru().post(Gu(this.endpoint,e,"invite"),{users:t},{params:{"X-Plex-Token":this.accessToken},responseType:qu})).data}))}delete(e){return Hu(this,null,(function*(){yield Ru().delete(Gu(this.endpoint,e),{params:{"X-Plex-Token":this.accessToken},responseType:qu})}))}get(e){return Hu(this,null,(function*(){const t=yield Ru().get(Gu(this.endpoint,e),{params:{"X-Plex-Token":this.accessToken},responseType:qu});return e?t.data:function(e){return e.rooms.map(zu)}(t.data)}))}patch(e,t){return Hu(this,null,(function*(){var r,n;return(yield Ru().patch(Gu(this.endpoint,e),{params:(r=Wu({},t),n={"X-Plex-Token":this.accessToken},Lu(r,ju(n))),responseType:qu})).data}))}}var Qu=Object.defineProperty,$u=(e,t,r)=>(((e,t,r)=>{t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),Yu=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));class Xu extends Ed{constructor(e){super(),$u(this,"pubsub"),$u(this,"service"),$u(this,"onPubSubMessage",(e=>{const{command:t}=e;"notifyWatchTogetherInvite"!==t&&"notifyWatchTogetherExpire"!==t||this.rooms()})),$u(this,"onPubSubClose",(e=>{this.emit("close",e)}));const{accessToken:t,pubsub:r}=e;this.pubsub=r,this.pubsub.addListener("close",this.onPubSubClose),this.pubsub.addListener("message",this.onPubSubMessage),this.service=new Ku({accessToken:t})}get isOpen(){return this.pubsub.isOpen}open(){return this.pubsub.open()}destroy(){super.destroy(),this.pubsub.destroy()}rooms(){return Yu(this,null,(function*(){const e=yield this.service.get();return this.emit("rooms",e),e}))}createRoom(e,t,r){return Yu(this,null,(function*(){const n=yield this.service.create(e,t,r);return yield this.rooms(),n.id}))}deleteRoom(e){return Yu(this,null,(function*(){var t;try{yield this.service.delete(e)}catch(e){if(404!==(null==(t=null==e?void 0:e.response)?void 0:t.status))throw e}yield this.rooms()}))}inviteUsers(e,t){return Yu(this,null,(function*(){yield this.service.createInvites(e,t),yield this.rooms()}))}}var Ju=r(29320),Zu=Object.defineProperty,ep=(e,t,r)=>(((e,t,r)=>{t in e?Zu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let tp;const rp=class{constructor({appModel:e,appStore:t}){ep(this,"appModel"),ep(this,"appStore"),this.appModel=e,this.appStore=t}start(){const{appModel:e,appStore:t}=this;vd(e,((r,n)=>{if(tp&&(tp.destroy(),tp=null,(0,b.c)("[Watch Together] stopped rooms client")),n){const n=r.id;(0,Ju.c)(r.get("features").populate({timeout:5e3})).then((()=>{if(e.get("user").id!==n)return Promise.reject(new Error("User has changed"));if(!(0,Ha.c)(e,za.s5))return Promise.reject(new Error("User missing feature access"));const i=r.get("authToken");tp=new Xu({accessToken:i,pubsub:new xu}),tp.addListener("rooms",(e=>{t.dispatch(Tu.cj({rooms:e}))})),t.dispatch(Tu.sN())})).catch((e=>{b.c.warn("[Watch Together] cannot start",e)}))}}))}getRoomsClient(){return tp}},np="speaker";var ip=r(54756);const sp="stopped",ap="paused",op="buffering",cp="error";var lp=r(95760),dp=r(760),up=r(64824),pp=r(1800),mp=r(98352),hp=r(77015),yp=r(69524),gp=r(1072);function fp(e,t){const r=function(e,t){const r=e.get("connections").filter((e=>e.get("isConnected")&&!e.get("isLoopback"))),n=r.length?r.reduce(gp.U):null;if(n)return{machineIdentifier:e.get("machineIdentifier"),protocol:n.get("scheme"),address:n.getAddressFromUri(),port:n.get("port")}}(e);return r?(r.transcoderVideo=e.get("transcoderVideo")||!1,r.transcoderVideoRemuxOnly=e.get("transcoderVideoRemuxOnly")||!1,r.transcoderAudio=e.get("transcoderAudio")||!1,r.version=e.get("shortVersion"),r.myPlexSubscription=e.get("myPlexSubscription"),r.isVerifiedHostname="https"===r.protocol&&!(0,_.Up)(r.address),function(e,t={}){const r=e.get("accessToken");return!e.supports("transientToken")||e.get("isCloud")||/^transient-/.test(r)?c().Deferred().resolve(r).promise():c().ajax(e.getXHROptions("/security/token",{data:{type:t.type||"delegation",scope:t.scope||"all"}})).promise().then((e=>(0,hp.c)(e).token||c().Deferred().reject().promise()))}(e).then((e=>(r.accessToken=e,r)))):c().Deferred().reject().promise()}var vp=r(45564),bp=Object.defineProperty,Sp=Object.defineProperties,Pp=Object.getOwnPropertyDescriptors,Ip=Object.getOwnPropertySymbols,Ep=Object.prototype.hasOwnProperty,wp=Object.prototype.propertyIsEnumerable,Cp=(e,t,r)=>t in e?bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Op=(e,t)=>{for(var r in t||(t={}))Ep.call(t,r)&&Cp(e,r,t[r]);if(Ip)for(var r of Ip(t))wp.call(t,r)&&Cp(e,r,t[r]);return e},Mp=(e,t)=>Sp(e,Pp(t));const Tp=3,Dp=2e4,kp=200,xp=200,Ap="remoteCastPlayerManager",Rp=/^[0-9]+$/;function Np(e,t){const r=t.dispatch;let n,i,s,a,o,l=0,d=0,u=!1,p={},m={};function h(e,t={},r={}){if(!n)return c().Deferred().reject().promise();const i=S.c.join([n.baseURL,e],Mp(Op({},t),{commandID:l})),s=n.server.getXHROptions(i,Mp(Op({},r),{scope:Ap,headers:{"X-Plex-Target-Client-Identifier":n.get("machineIdentifier")}}));return c().ajax(s)}function y(e={}){n&&h("/player/timeline/poll",e,{timeout:Dp}).done(((t,i,s)=>{d=0;const a=(0,hp.c)(t);if((0,mp.c)(a.disconnected)&&e.wait)return void r(yp.sA());const o=n.get("machineIdentifier"),c=s.getResponseHeader("X-Plex-Client-Identifier"),p=(0,Ci.c)(a.commandID),m=o===c||n.baseURL;if(!u&&m&&p>=l){const e=(0,pp.c)(a.Timeline),t=v().findWhere(e,{type:"video"}),r=v().findWhere(e,{type:"music"}),n=v().findWhere(e,{type:"photo"});!t||r&&r.state&&r.state!==sp?r&&f(r):f(t),n&&f(n),l=p}y({wait:1})})).fail(((t,n)=>{t&&t.aborting||("error"===n?(d++,e.wait&&d<=Tp?(b.c.warn("[Companion] Poll request failed; retrying..."),y({wait:1})):(b.c.warn("[Companion] Poll request failed 3 times in a row; giving up"),r(yp.sA()))):y({wait:1}))}))}function g(e){return e?Rp.test(e)?(0,Ci.c)(e):e:null}function f(e){const{type:t,state:n,providerIdentifier:i,machineIdentifier:s,containerKey:a,key:o}=e,c=e.playQueueItemID||e.playQueueItemId,l=lp.MX(t),d=(0,mp.c)(e.continuing);if(n===sp&&!d)return p[t]=null,m[t]=null,void r(yp.uw({playQueueType:l}));const u=(0,Ci.c)(e.playQueueVersion),h=(0,Ci.c)(e.time),y=(0,Ci.c)(e.duration),f=(0,Ci.c)(e.mediaIndex),v=(0,Ci.c)(e.partIndex),b=g(e.audioStreamID),S=g(e.subtitleStreamID),P=(0,Ci.c)(e.volume),I=(0,Ci.c)(e.repeat),E=(e.controllable||"").split(","),w={positionSeconds:Math.floor(h/1e3),durationSeconds:Math.floor(y/1e3),mediaIndex:f,partIndex:v,isPaused:n===ap,isBuffering:n===op,hasError:n===cp,controllable:E.reduce(((e,t)=>(e[t]=!0,e)),{})},C=p[t],O=m[t],M=c!==C||u!==O;p[t]=c,m[t]=u,r(yp.I6({playQueueType:l,options:{providerIdentifier:i,machineIdentifier:s,containerKey:a,key:o,playQueueItemID:c,shouldRefreshPlayQueue:M,initialState:w}})),r(yp.tf({playQueueType:l,playerState:w,providerIdentifier:i,machineIdentifier:s})),function(e){const t={};null!=e.autoPlay&&(t.autoPlay="1"===e.autoPlay),null!=e.subtitleColor&&(t.subtitleColor=e.subtitleColor),null!=e.subtitlePosition&&(t.subtitlePosition=e.subtitlePosition),null!=e.subtitleSize&&(t.subtitleSize=(0,Ci.c)(e.subtitleSize)),r(yp.sN(t))}(e),r(yp.oF({playQueueType:l,playQueueVersion:u,repeatAll:I===dp.y2||I===dp.x,repeatOne:I===dp.x})),r(yp.cR({playQueueType:l,key:o,mediaIndex:f,partIndex:v,audioStreamID:b,subtitleStreamID:S})),null!=e.volume&&r(yp.u6(P))}function P(){i=null,null!=s&&(w(s),s=null)}function I(){a=null,null!=o&&(C(o),o=null)}function E(e,t){return n?(l++,h(e,t)):(b.c.warn(`[Companion] Command for ${e} ignored; no current player`),c().Deferred().reject().promise())}function w(e){i?(window.clearTimeout(i),s=e):E("/player/playback/seekTo",e),i=window.setTimeout(P,kp)}function C(e){a?(window.clearTimeout(a),o=e):E("/player/playback/setParameters",e),a=window.setTimeout(I,xp)}return{requestSession:function(t){n=(0,vp.gZ)(e,{playerIdentifier:t}),n?(r(yp.Uk(t)),l=0,d=0,y()):b.c.warn(`[Companion] Request session ignored; no player with identifier "${t}"`)},endSession:function(){n?(i&&(window.clearTimeout(i),i=null),a&&(window.clearTimeout(a),a=null),M.c.abortAll(Ap),h("/player/timeline/unsubscribe"),n=null,s=null,o=null,p={},m={}):b.c.warn("[Companion] End session ignored; no current player")},startPlayback:function(e){if(!n)return void b.c.warn("[Companion] Start playback ignored; no current player");const t=e.get("playQueue"),i=t.get("type"),s=t.get("playQueueItems").get(t.get("playQueueSelectedItemID")).get("metadataItem"),a=t.server,o=t.provider;if(n.get("deviceClass")===np&&t.get("type")!==up.KI)return void r(yp.GI({playQueueType:i,errorMessage:(0,He.c)("The connected player only supports audio playback.")}));const c=1e3*e.get("positionSeconds")||Math.floor((0,ip.c)(e,s));u=!0,fp(a).done((e=>{const n=e.machineIdentifier,a=o.get("identifier"),l={type:lp.C8(t.get("type")),providerIdentifier:a,containerKey:S.c.join([v().result(t,"url")],{own:1}),key:s.get("key"),offset:c,machineIdentifier:n,protocol:e.protocol,address:e.address,port:e.port,token:e.accessToken};(0,b.c)("[Companion] Sending play media request"),E("/player/playback/playMedia",l).done((()=>{u=!1,(0,b.c)("[Companion] Play media success"),r(yp.tf({playQueueType:i,playerState:{isMediaLoading:!1},providerIdentifier:a,machineIdentifier:n}))})).fail((e=>{u=!1,b.c.warn(`[Companion] Failed to play media with error "${e.status}"`),r(yp.GI({playQueueType:i}))}))})).fail((()=>{u=!1,r(yp.GI({playQueueType:i,errorMessage:(0,He.c)('The server "{serverName}" does not have a valid connection for casting. Check that the server is claimed in server settings.',{serverName:a.get("friendlyName")})}))}))},mirrorDetails:function(e){if(!n)return void b.c.warn("[Companion] Mirror details ignored; no current player");const t=n.get("protocolCapabilities");if(!t||-1===t.indexOf("mirror"))return void b.c.warn("[Companion] Mirror details ignored; player does not advertise support for the `mirror` capability");const r=e.server,i=e.provider;fp(r).done((t=>{h("/player/mirror/details",{key:e.get("key"),providerIdentifier:i.get("identifier"),machineIdentifier:t.machineIdentifier,protocol:t.protocol,address:t.address,port:t.port,token:t.accessToken})}))},sendCommand:E,seek:w,changeVolume:C}}var Lp=r(22316);const jp=Lp.cp.Model.extend({initialize:function(e,t){this.set("time",new Date)}});var Up=r(8844);const Fp=new(Lp.cp.Model.extend({initialize:function(e,t){this.set("host",window.location.host),this.set("userAgent",window.navigator.userAgent),this.set("browser",Up.c)},toJSON:function(){const e=this.parent,t=e.get("primaryServer"),r=e.get("user");return this.set("version","4.125.1"),t&&(t.get("activeConnection")&&this.set("primaryServerUrl",t.url()),this.set("primaryServerAuthToken",!!t.get("accessToken")),this.set("primaryServerVersion",t.get("versionFull"))),this.set("username",r.get("username")),this.set("cloudUrl",r.server.get("connections")),Lp.cp.Model.prototype.toJSON.apply(this,arguments)}})),Vp=/("?(auth_token|accessToken|X-Plex-Token|authToken|token)"?[:=].*?)("?[-\w]+"?)/g,_p=/("?(email)"?[:=]([\s]+)?)("(.*)")/g,Wp=/("?(address|host|uri)"?[:=].*?)(".*")/g;function Bp(e){if(e)return e.replace(Vp,'$1"TOKEN"').replace(_p,'$1"EMAIL"').replace(Wp,'$1"IP ADDRESS"')}const Hp=/(password=)([^&]+)/;function zp(e){return e.replace(Vp,"$1TOKEN").replace(Hp,"$1PASSWORD")}const Gp=Lp.cp.Collection.extend({model:jp,initialize:function(e,t){v().bindAll(this,"onAjaxComplete","onAppModelRegistered"),this.parent=t.parent,Fp.parent=t.parent,(0,g.Y2)("appModel").done(this.onAppModelRegistered)},reconfigure(){(0,g.WI)("appModel").get("deviceSettings").get("debugLevel")?this.start():this.stop()},start:function(){this.enabled||(this.enabled=!0,this.reset(),this.listenTo(le.c,"log:message",this.onLogMessage),Lp.cp.history.on("route",this.onRoute,this),c()(document).on("ajaxComplete",this.onAjaxComplete))},stop:function(){this.enabled&&(this.enabled=!1,this.reset(),this.stopListening(le.c),Lp.cp.history.off("route",this.onRoute,this),c()(document).off("ajaxComplete",this.onAjaxComplete))},destroy:function(){this.stop(),this.stopListening()},add:function(){this.length>1e3&&this.shift(),Lp.cp.Collection.prototype.add.apply(this,arguments)},toJSON:function(){const e=Lp.cp.Collection.prototype.toJSON.apply(this,arguments);return e.unshift(v().extend({type:"info"},Fp.toJSON())),e},toJSONString:function(){return JSON.stringify(this.toJSON(),null,2)},onAppModelRegistered:function(e){const t=e.get("deviceSettings");this.listenTo(t,"change:debugLevel",this.reconfigure),this.reconfigure()},onLogMessage:function(e){this.add(e)},onRoute:function(e,t,r){const n={type:"navigation",route:t,args:r,fragment:window.location.hash};this.add(n)},onAjaxComplete:function(e,t,r){const n=(0,g.WI)("appModel").get("deviceSettings").get("debugLevel"),i={type:"ajax",url:zp(r.url),status:t.status};var s;v().isEmpty(r.headers)||(i.headers=((s=r.headers)&&s.hasOwnProperty("X-Plex-Token")&&(s["X-Plex-Token"]="TOKEN"),s&&s.hasOwnProperty("Authorization")&&(s.Authorization="BASIC AUTHORIZATION"),s)),v().isEmpty(r.data)||(i.params=zp(r.data)),200===t.status?2===n?i.response=Bp(t.responseText):i.responseLength=t.responseText?t.responseText.length:0:(i.statusText=t.statusText,i.response=Bp(t.responseText)),this.add(i)}});var qp=r(32516);const Kp=(0,Ga.M3)(qp.c,(e=>e.remoteQuality)),Qp=(0,Ga.M3)(ol.c,(e=>e.restorePlayQueue)),$p=(0,Ga.M3)(qp.c,(e=>({color:e.subtitleColor,position:e.subtitlePosition,size:e.subtitleSize})));var Yp=r(84360),Xp=r(57639);const Jp=0,Zp=5,em=9;var tm=r(85976),rm=r(17312);const nm=v().reduce(rm.o,((e,t)=>(e[t]="Metadata",e)),{}),im=function e(t){if(!t||!t._children)return t;const r=v().clone(t),n=r._children;return Array.isArray(n)&&(n.forEach((t=>{const n=t._elementType;if(t._elementType=null,t.elementName=n,n){const i=nm[n]||n,s=r[i],a=e(t);s?Array.isArray(s)?s.push(a):r[i]=[s,a]:r[i]=a}})),r._children=null),r};var sm=r(64036),am=r(18168),om=r(6084),cm=r(90854),lm=r(54672),dm=Object.defineProperty,um=Object.getOwnPropertySymbols,pm=Object.prototype.hasOwnProperty,mm=Object.prototype.propertyIsEnumerable,hm=(e,t,r)=>t in e?dm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ym=(e,t)=>{for(var r in t||(t={}))pm.call(t,r)&&hm(e,r,t[r]);if(um)for(var r of um(t))mm.call(t,r)&&hm(e,r,t[r]);return e};const gm=xi.c.extend({context:["server"],url:"/updater/status",sessionAttrs:{isChecking:Jn.c.boolean.isRequired},syncedAttrs:{status:Jn.c.integer,canInstall:Jn.c.boolean,downloadURL:Jn.c.string,state:Jn.c.string,progress:Jn.c.integer,version:Jn.c.string,error:Jn.c.string,added:Jn.c.string,fixed:Jn.c.string},defaults:{state:Xp.NONE,status:0,progress:0,version:null,error:"",added:null,fixed:null,isChecking:!1},augmentResponse(e){const t=e,{Release:r}=t,n=((e,t)=>{var r={};for(var n in e)pm.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&um)for(var n of um(e))t.indexOf(n)<0&&mm.call(e,n)&&(r[n]=e[n]);return r})(t,["Release"]);return r&&(e=ym(ym({},n),r)),"0"!==e.status&&(e.state=Xp.ERROR),e}});var fm=r(30388),vm=r(99516),bm=Object.defineProperty,Sm=Object.defineProperties,Pm=Object.getOwnPropertyDescriptors,Im=Object.getOwnPropertySymbols,Em=Object.prototype.hasOwnProperty,wm=Object.prototype.propertyIsEnumerable,Cm=(e,t,r)=>t in e?bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Om={started:_l.qO,updated:_l.Av,ended:_l._Q},Mm={started:mr.c.actions.activityStarted,updated:mr.c.actions.activityUpdated,ended:mr.c.actions.activityFinished},Tm=[la.EN,la.Cc,la.gJ,la.Sm,la.IB,la.U$,la.Ip,la.Ou,la.GA,la.ZX,la.NT,la.El,la.bL,la.i0,la.ug,la.yq,la.um,la.At,la.mW],Dm=5e3;function km(e){const t=g.WI("appStore");t.dispatch(Yp.sf({serverEntityID:e,playerType:to.k9})),ni._u(window.location.hash,ni._0)&&t.dispatch((0,ct.SK)({serverEntityID:e}))}const xm=sm.c.extend({initialize(e){sm.c.prototype.initialize.apply(this,arguments),this.throttledRepopulates={}},repopulateNow(e,t){this.throttledRepopulates[e]={timestamp:Date.now()},t()},repopulateWithThrottle(e,t,r){const n=this.throttledRepopulates[e];if(n)if(n.hasTimeout);else{const i=Date.now()-n.timestamp;i<r?(window.setTimeout((()=>{this.repopulateNow(e,t)}),r-i),this.throttledRepopulates[e]={hasTimeout:!0}):this.repopulateNow(e,t)}else this.repopulateNow(e,t)},getMessageTypes:()=>Tm,[la.Ip](e){e.key=e.id,e.server=this.server,this.server.trigger("socket:setting",e),(0,g.WI("appStore").dispatch)((0,Yl.Gu)({serverEntityID:this.server.entityID(),setting:e}))},[la.i0](e){if(ni._u(e.identifier,ni._0))return;const{state:t,mediaProviderID:r,sectionID:n,rootItemID:i,parentItemID:s,itemID:a,metadataState:o,mediaState:c,type:l}=e,d=g.WI("appStore").dispatch,u=this.server.entityID(),p=Ze.GG(l),m=null==p?void 0:p.typeString,h=`${function(e){switch(e){case Ze.yy:return"/playlists";case Ze.sl:return"/library/collections";default:return"/library/metadata"}}(m)}/${a}`,y=s?`/library/metadata/${s}`:null,f=i?`/library/metadata/${i}`:null,v=(0,am.c)(om.Qv,h,u),b=(0,tm.c)({serverIdentifier:this.server.get("machineIdentifier"),providerIdentifier:ni.Qh,key:h}),S=y?(0,tm.c)({serverIdentifier:this.server.get("machineIdentifier"),providerIdentifier:ni.Qh,key:y}):void 0,P=f?(0,tm.c)({serverIdentifier:this.server.get("machineIdentifier"),providerIdentifier:ni.Qh,key:f}):void 0;d(ur.c.actions.timelineStatesChanged({sourceURI:b,metadataState:o,mediaState:c})),d((0,fm.mU)({serverEntityID:u,metadataItemEntityID:v,metadataState:o,mediaState:c})),t===Zp&&(d(lr.c.actions.metadataProcessed({sourceURI:b,parentSourceURI:S,rootSourceURI:P})),d((0,qa.qG)({serverEntityID:u,metadataItemEntityID:v})),m===Ze.ec&&d((0,vm.mo)({serverEntityID:u,albumMetadataItemEntityID:v}))),t===em&&(d(lr.c.actions.deleted({mediaProviderID:r,sourceURI:b,parentSourceURI:S,rootSourceURI:P})),d((0,qa.IH)({serverEntityID:u,metadataItemEntityID:v}))),t===Jp&&d(lr.c.actions.created({mediaProviderID:r,sourceURI:b,parentSourceURI:S,rootSourceURI:P})),t!==Jp&&t!==em||(n>0&&this.repopulateWithThrottle("section-"+n,(()=>{d((0,ct.SK)({serverEntityID:u,containerKeyPattern:new RegExp("^"+(0,R.c)(`/library/sections/${n}`)+"\\b")}))}),Dm),i>0&&this.repopulateWithThrottle("metadata-"+i,(()=>{const e=`/library/metadata/${i}`,t=(0,am.c)(om.Qv,e,u);d((0,ct.SK)({serverEntityID:u,metadataItemEntityID:t,rootMetadataKey:e}))}),Dm),s>0&&this.repopulateWithThrottle("metadata-"+s,(()=>{const e=`/library/metadata/${s}`,t=(0,am.c)(om.Qv,e,u);d((0,ct.SK)({serverEntityID:u,metadataItemEntityID:t,parentMetadataKey:e}))}),Dm),m===Ze.yy&&d((0,ct.SK)({serverEntityID:u,containerKeyPattern:new RegExp("^/playlists")}))),e.server=this.server,this.server.trigger("socket:timeline",e),le.c.trigger("timeline",e)},[la.bL](e){if(this.server.trigger("socket:status",e),"LIBRARY_UPDATE"===e.notificationName){const e=g.WI("appStore").dispatch,t=this.server.entityID();t&&(e(vr.c.actions.libraryScanUpdated({server:nd(this.server)})),e((0,_l.KN)({serverEntityID:t})),e((0,_l.EH)({serverEntityID:t})),e((0,ct.SK)({serverEntityID:t})))}},[la.Ou](e){this.server.trigger("socket:status",e)},[la.U$](e){if(!e.sessionKey||!this.server.get("isFullOwnedServer"))return;const t=g.WI("appStore").dispatch;e.state===tc.c.states.STOPPED?(t(gr.c.actions.sessionStopped({server:nd(this.server),sessionKey:e.sessionKey})),t((0,ct.SK)({serverEntityID:this.server.entityID()}))):t(gr.c.actions.sessionChanged({server:nd(this.server),message:e}))},[la.gJ](e){const t={server:this.server,onlyIfCached:!0},r=new lm.c({id:e.generatorID},t);v().isEmpty(r)||r.fetch()},[la.mW](e){const t={server:this.server,onlyIfCached:!0},r=new lm.c({id:e.generatorID},t);if(!v().isEmpty(r)){const t=r.get("children").getCollection().get(e.metadataItemID);t&&t.set({processingState:e.state,processingStateContext:e.stateContext})}},[la.Sm](e){const t=new cm.c([],{server:this.server,allowInCache:!0,onlyIfCached:!0});if(!v().isEmpty(t)){const e=t.first();e&&e.fetch()}},[la.yq](e){const t=g.WI("appStore").dispatch;this.server.get("isShared")||("static"===e.context?this.server.get("desktop").get("backgroundTranscodeJobs").fetch():t(gr.c.actions.fetchRequested({server:nd(this.server)})))},[la.um](e){if(!this.server.get("isShared")&&"static"===e.context){const t=this.server.get("desktop").get("backgroundTranscodeJobs"),r=t.get(e.key);r?r.set(r.parse(e)):t.fetch()}},[la.ug](e){this.server.get("isShared")||this["transcodeSession.start"].apply(this,arguments)},[la.At](e){const t=this.server.get("desktop").get("update"),r=v().pick(e,Object.keys(gm.prototype.syncedAttrs));var n;v().defaults(r,v().result(t,"defaults")),t.get("state")===Xp.DOWNLOADING&&r.state===Xp.AVAILABLE&&(r.state=Xp.DOWNLOADING),t.set((n=((e,t)=>{for(var r in t||(t={}))Em.call(t,r)&&Cm(e,r,t[r]);if(Im)for(var r of Im(t))wm.call(t,r)&&Cm(e,r,t[r]);return e})({},r),Sm(n,Pm({isChecking:!1}))))},[la.El](e){this.server.get("desktop").get("cloudAccount").fetch()},[la.EN](e){this.server.set("myPlexSubscription",e.hasPlexPass),g.WI("appModel").get("user").get("isSignedIn")&&le.c.trigger("discover:servers")},[la.Cc](e){const t=im(e),r=g.WI("appStore"),n=this.server.entityID(),i=t.Activity||t;if(i.Context=i.Context||{},i.Response=i.Response||{},n){const e=Om[t.event],s=Mm[t.event];e&&r.dispatch(e({serverEntityID:n,activity:i})),s&&r.dispatch(s({server:nd(this.server),activity:i}))}},[la.IB](e){const t=g.WI("appStore"),r=this.server.entityID();r&&"appeared"===e.event&&t.dispatch((0,Yl.U7)({serverEntityID:r,device:e.Device}))},[la.ZX](){km(this.server.entityID())},[la.NT](){km(this.server.entityID())},[la.GA](){g.WI("appStore").dispatch((0,_l.vH)({serverEntityID:this.server.entityID()}))}}),Am=xm,Rm=xi.c.extend({name:"BaseAppModel",isStateTreeRoot:!0,constructor:function(){this._pendingEntities=[],this.listenTo(le.c,"change:entity",this.onEntityChange),xi.c.prototype.constructor.apply(this,arguments)},initialize(){this._pendingEntities.forEach(this._addEntity.bind(this))},_addEntity({type:e,id:t,model:r}){this.get("entities").get(e).add({id:t,model:r},{merge:!0})},onEntityChange(e){this.has("entities")?this._addEntity(e):this._pendingEntities.push(e)}});var Nm=r(37920),Lm=r(20844);function jm(e){return e.length?v().map(e,(e=>e.get("debugName"))).join(", "):"(none)"}const Um=ki.c.extend({mixins:[Lm.c],name:"ServerCollection",model:Zt.default,initialize(){this._resetPopulate()},comparator(e){const t=e.get("isShared"),r=e.get("friendlyName")||"",n=e.get("sourceTitle")||"",i=t?n+r:r;return e.get("isCloud")?"9":(t?"1":"0")+i.toLowerCase()},shouldWaitForInitialServers(){const e=this.filter((e=>(!e.id||!!e.get("resources"))&&e.isPopulating()));return!!e.length&&((0,b.c)("[Servers] Waiting for initial servers =",jm(e)),!0)},shouldWaitForResources(){const e=this.reduce(((e,t)=>{const r=t.get("isResolved"),n=t.get("resources"),i=n&&n.isPopulating();return r&&i&&e.push(t),e}),[]);return!!e.length&&((0,b.c)("[Servers] Waiting for additional resources from",jm(e)),!0)},shouldWaitForPendingServers(){if(this.findWhere({isConnected:!0}))return!1;const e=this.filter((e=>e.isPopulating()));return!!e.length&&((0,b.c)("[Servers] Waiting for pending servers =",jm(e)),!0)},waitForServers(){this._resetPopulate()},foundAllServers(){const e=this.where({isConnected:!0}),t=jm(e);(0,b.c)("[Servers] Found all servers =",t),e.length?this._resolvePopulate():this._rejectPopulate()},populateAnyServer(e=this.models){const t=c().Deferred(),r=e.slice(0),n=v().find(r,(e=>e.get("isCloud")?e.get("isResolved"):e.get("isConnected")));if(n)return(0,b.c)("[Servers] Populate any server chose %s where servers = %s",n.get("debugName"),jm(r)),t.resolve(n).promise();if(this.hasOnlyRejectedServers(r))return t.reject().promise();function i(e,n){v().contains(r,e)&&n&&t.resolve(e)}function s(e,n){v().contains(r,e)&&n&&this.hasOnlyRejectedServers(r)&&t.reject()}return this.on({remove:function(e){const n=r.indexOf(e);n>-1&&(r.splice(n,1),this.hasOnlyRejectedServers(r)&&t.reject())},"change:isResolved":i,"change:isRejected":s},this),t.always((()=>{this.off("change:isResolved",i,this),this.off("change:isRejected",s,this)})),t.promise()},populateServer(e){return this.findServer(e,!0).then((e=>e.get("isConnected")&&!e.get("isCloud")?c().Deferred().resolve(e):e.populate()))},findServer(e,t){const r=v().isString(e),n=r?{machineIdentifier:e}:e,i=c().Deferred();if(r){const e=this.get(n.machineIdentifier);if(e&&e.get("isResolved"))return window.setTimeout(i.resolve.bind(i,e),0),i.promise()}const s=v().has(n,"machineIdentifier"),a="add "+v().map(v().keys(n),(e=>"change:"+e)).join(" ");let o;function l(){const e=this.filterServers(n,t);e?(o=e,e.done((t=>{o===e&&i.resolve(t)})),e.fail((()=>{o===e&&(s||!this.isPopulating()?i.reject():this.populate().always(l.bind(this)))}))):this.isPopulating()||i.reject()}return l.call(this),this.on(a,l,this),this.populate().always((()=>{o||i.reject()})),i.always((()=>{this.off(a,l,this)})),i.promise()},filterServers(e,t){const r=this.where(e);if(r.length)return t?this.populateAnyServer(r):c().Deferred().resolve(r[0]).promise()},hasOnlyRejectedServers(e=this.models){return v().every(e,(e=>e.get("isRejected")))},hasLoopbackServer(e=this.models){return!!v().find(e,(e=>{const t=e.get("activeConnection");return!!t&&t.get("isLoopback")}))}});var Fm=r(81688),Vm=r(89064),_m=Object.defineProperty,Wm=Object.getOwnPropertySymbols,Bm=Object.prototype.hasOwnProperty,Hm=Object.prototype.propertyIsEnumerable,zm=(e,t,r)=>t in e?_m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Gm=xi.c.extend({name:"EntityModel",sessionAttrs:{id:Jn.c.string.isRequired},sessionRelations:{model:{relationClass:xi.c,deferred:!0}},toState(){const e=this.get("model"),t=((e,t)=>{for(var r in t||(t={}))Bm.call(t,r)&&zm(e,r,t[r]);if(Wm)for(var r of Wm(t))Hm.call(t,r)&&zm(e,r,t[r]);return e})({entityID:this.id},e.state);return Object.defineProperty(t,"possibleEntityContainers",{value:e.state.possibleEntityContainers,enumerable:!1}),t},shouldUpdateRelationState:function(){return!0}}),qm=Gm,Km=ki.c.extend({name:"EntityCollection",model:qm,toState(){const e=this.reduce(this.reduceState,{possibleEntityContainers:[]});return Object.defineProperty(e,"possibleEntityContainers",{enumerable:!1}),e},reduceState:(e,t)=>(e.possibleEntityContainers.push(t.id),e[t.id]=t.getState(),e)});var Qm=r(34756),$m=r(42016),Ym=r(63772),Xm=r(51100),Jm=r(96732);function Zm(e,t,r,...n){return(0,Ym.eG)((function*(){const i={};yield(0,Ym.UT)(e,(function*(e){const s=r(e);i[s]&&(yield(0,Ym.qG)(i[s])),i[s]=yield(0,Ym.eG)(t,e,...n),yield(0,Ym.kn)(i[s]),i[s]&&!i[s].isRunning()&&delete i[s]}))}))}const eh=(e,t)=>(0,Ym.eG)(((e,t)=>function*(){yield(0,Ym.y0)(e,t)})(e,t)),th=(e,t,r)=>(0,Ym.eG)(((e,t,r)=>function*(){yield Zm(e,t,(({payload:e})=>e[r]))})(e,t,r));var rh=r(35348),nh=r(11528),ih=Object.defineProperty,sh=Object.defineProperties,ah=Object.getOwnPropertyDescriptors,oh=Object.getOwnPropertySymbols,ch=Object.prototype.hasOwnProperty,lh=Object.prototype.propertyIsEnumerable,dh=(e,t,r)=>t in e?ih(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uh=(e,t)=>{for(var r in t||(t={}))ch.call(t,r)&&dh(e,r,t[r]);if(oh)for(var r of oh(t))lh.call(t,r)&&dh(e,r,t[r]);return e},ph=(e,t)=>sh(e,ah(t));function*mh(e){const{isFullUser:t}=yield(0,rh.c)(ge.c);if(!t)return void(yield(0,Ym.Aj)(or.c.actions.fetchCommunityFriendsSucceeded({friends:[]})));const r=new AbortController;try{const{allFriendsV2:e}=yield(0,Ym.MN)(Jm.CM,nh.wv,void 0,r.signal),t=e.map((e=>ph(uh({},e.user),{createdAt:e.createdAt})));yield(0,Ym.Aj)(or.c.actions.fetchCommunityFriendsSucceeded({friends:t}))}catch(e){yield(0,Ym.Aj)(or.c.actions.fetchCommunityFriendsFailed({error:Ts.c.toPlainErrorObject(e)}))}finally{(yield(0,Ym.yU)())&&r.abort()}}function*hh({payload:e}){var t;const{server:r,invitedEmail:n,skipFriendship:i}=e;try{yield(0,Ym.MN)(Ts.c.post,"/api/home/users",{server:r,params:{invitedEmail:n,skipFriendship:Number(i)}}),yield(0,Ym.Aj)(or.c.actions.sendHomeUserInviteSucceeded())}catch(e){const r=ph(uh({},e.response),{responseText:null==(t=e.response)?void 0:t.data}),n=(0,Xm.c)(r,null,"status")||(0,He.c)("Failed to create home user.");e.message=n,yield(0,Ym.Aj)(or.c.actions.sendHomeUserInviteFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*yh(){yield(0,Ym.Q7)([eh(or.c.actions.fetchCommunityFriends,mh),eh(or.c.actions.sendHomeUserInvite,hh)])}var gh=r(6384),fh=Object.getOwnPropertySymbols,vh=Object.prototype.hasOwnProperty,bh=Object.prototype.propertyIsEnumerable,Sh=(e,t)=>{var r={};for(var n in e)vh.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fh)for(var n of fh(e))t.indexOf(n)<0&&bh.call(e,n)&&(r[n]=e[n]);return r};function*Ph({payload:e}){const{server:t,provider:r,key:n}=e;try{const e=(yield(0,Ym.MN)(Ts.c.get,n,{server:t,provider:r})).data.MediaContainer,{Metadata:i=[]}=e,s=Sh(e,["Metadata"]),[a]=i,o=(0,gh.c)({server:t,provider:r,data:a,container:s});yield(0,Ym.Q7)([yield(0,Ym.Aj)(cr.c.actions.fetchMetadataItemSucceeded({metadataItem:o.metadataItem,key:n})),yield(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:o.metadataItemStates}))])}catch(e){yield(0,Ym.Aj)(cr.c.actions.fetchMetadataItemFailed({error:Ts.c.toPlainErrorObject(e),key:n}))}}function*Ih({payload:e}){const{trackers:t}=e;try{yield(0,Ym.Q7)(t.map((e=>(0,Ym.MN)(Ru().get,e))))}catch(e){}}function*Eh(){yield(0,Ym.Q7)([th(cr.c.actions.fetchMetadataItem,Ph,"key"),eh(cr.c.actions.adTileTrackerRequests,Ih)])}var wh=r(43908),Ch=r(86244),Oh=r(49792),Mh=r(85712),Th=r(33204),Dh=r(19796),kh=Object.defineProperty,xh=Object.getOwnPropertySymbols,Ah=Object.prototype.hasOwnProperty,Rh=Object.prototype.propertyIsEnumerable,Nh=(e,t,r)=>t in e?kh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lh=(e,t)=>{for(var r in t||(t={}))Ah.call(t,r)&&Nh(e,r,t[r]);if(xh)for(var r of xh(t))Rh.call(t,r)&&Nh(e,r,t[r]);return e},jh=r(14316);function Uh(e,t,r,...n){return(0,Ym.eG)((function*(){const i={};yield(0,Ym.UT)(e,(function*(e){var s;const a=r(e);(null==(s=i[a])?void 0:s.isRunning())||(i[a]=yield(0,Ym.eG)(t,e,...n),yield(0,Ym.kn)(i[a]),i[a]&&!i[a].isRunning()&&delete i[a])}))}))}var Fh=Object.defineProperty,Vh=Object.defineProperties,_h=Object.getOwnPropertyDescriptors,Wh=Object.getOwnPropertySymbols,Bh=Object.prototype.hasOwnProperty,Hh=Object.prototype.propertyIsEnumerable,zh=(e,t,r)=>t in e?Fh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gh=(e,t)=>{for(var r in t||(t={}))Bh.call(t,r)&&zh(e,r,t[r]);if(Wh)for(var r of Wh(t))Hh.call(t,r)&&zh(e,r,t[r]);return e},qh=(e,t)=>Vh(e,_h(t));function*Kh({payload:e}){const{server:t,provider:r,metadataItem:n}=e,i=yield(0,Ym.eG)(Qh,t,r,n),{taskCancelled:s}=yield(0,Ym.ue)({taskCancelled:(0,Ym.UH)((e=>{var t;return e.type===lr.c.actions.fetchCancelled.type&&(null==(t=e.payload)?void 0:t.sourceURI)===n.sourceURI})),taskEnded:(0,Ym.kn)(i)});s&&(yield(0,Ym.qG)(i))}function*Qh(e,t,r){var n,i;try{const s=yield(0,Ym.MN)(Ts.c.get,S.c.join(["/library/metadata",(0,Oh.c)(r),"userState"]),{server:e,provider:t}),a=(0,Dh.c)({metadataItemStateResponse:null!=(i=null==(n=s.data.MediaContainer.UserState)?void 0:n[0])?i:{},metadataItem:r}),o=qh(Gh({},a),{tempState:{}});yield(0,Ym.Aj)(lr.c.actions.fetchSucceeded({sourceURI:r.sourceURI,metadataItemState:o,guid:r.guid,providerIdentifier:t.identifier}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.fetchFailed({sourceURI:r.sourceURI,error:Ts.c.toPlainErrorObject(e)}))}}function*$h({payload:e}){const{server:t,provider:r,metadataItems:n}=e,i=yield(0,Ym.eG)(Yh,t,r,n),{taskCancelled:s}=yield(0,Ym.ue)({taskCancelled:(0,Ym.UH)((e=>e.type===lr.c.actions.batchFetchCancelled.type)),taskEnded:(0,Ym.kn)(i)});s&&(yield(0,Ym.qG)(i))}function*Yh(e,t,r){var n;const i=`/library/metadata/${r.map((e=>e.ratingKey)).join(",")}/userState`;try{const s=function({metadataItemStatesResponse:e,metadataItems:t}){return e.reduce(((e,r,n)=>{const i=t[n],s=(0,Dh.c)({metadataItemStateResponse:r,metadataItem:i});return e[i.sourceURI]=Lh({},s),e}),{})}({metadataItemStatesResponse:null!=(n=(yield(0,Ym.MN)(Ts.c.get,i,{server:e,provider:t})).data.MediaContainer.UserState)?n:[],metadataItems:r});yield(0,Ym.Aj)(lr.c.actions.batchFetchSucceeded({metadataItemStatePerSourceResponse:s}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.batchFetchFailed({metadataItemStatePerSourceError:Object.fromEntries(r.map((t=>[t.sourceURI,Ts.c.toPlainErrorObject(e)])))}))}}function*Xh({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,played:a,guid:o}=e;try{const e=(0,Th.c)(r,Mh.IL.Scrobble,n);if(!e)throw new Error("No scrobble action found on provider");const c=a?e.key:e.reverseKey;if(!c)throw new Error("The scrobble action is missing a `key` or `reverseKey`");yield(0,Ym.MN)(Ts.c.get,c,{server:t,provider:r,params:{identifier:r.identifier,key:s}}),yield(0,Ym.Aj)(lr.c.actions.playedStatusUpdateSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,played:a,guid:o}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.playedStatusUpdateFailed({sourceURI:i,error:Ts.c.toPlainErrorObject(e)}))}}function*Jh({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,rating:a,type:o}=e;try{const e=(0,Th.c)(r,Mh.IL.Rate,n);if(!e)throw new Error("No rate action found on provider");if(!e.key)throw new Error("The rate action is missing a `key`");yield(0,Ym.MN)(Ts.c.put,e.key,{server:t,provider:r,params:{identifier:r.identifier,key:s,rating:a}}),yield(0,Ym.Aj)(lr.c.actions.rateSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,rating:a,type:o}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.rateFailed({sourceURI:i,error:Ts.c.toPlainErrorObject(e)}))}}function*Zh({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,childSourceURI:s,grandchildSourceURI:a,ratingKey:o,added:c,showToastOnAdded:l}=e;try{const e=(0,Th.c)(r,Mh.IL.AddToWatchlist,n);if(!e)throw new Error("No watchlist action found on provider");const d=c?e.key:e.reverseKey;if(!d)throw new Error("The watchlist action is missing a `key` or `reverseKey`");yield(0,Ym.MN)(Ts.c.put,d,{server:t,provider:r,params:{ratingKey:o}}),yield(0,Ym.Aj)(lr.c.actions.toggleWatchlistSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,childSourceURI:s,grandchildSourceURI:a,ratingKey:o,added:c})),l&&(yield(0,jh.c)((0,ct._K)({type:wh.I,message:c?(0,He.c)("Added to Watchlist"):(0,He.c)("Removed from Watchlist")})))}catch(e){yield(0,Ym.Aj)(lr.c.actions.toggleWatchlistFailed({sourceURI:i,childSourceURI:s,grandchildSourceURI:a,error:Ts.c.toPlainErrorObject(e)}))}}function*ey({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,saved:a}=e;try{const e=(0,Th.c)(r,Mh.IL.Save,n);if(!e)throw new Error("No save action found on provider");const o=a?e.key:e.reverseKey;if(!o)throw new Error("The save action is missing a `key` or `reverseKey`");yield(0,Ym.MN)(Ts.c.put,o,{server:t,provider:r,params:{ratingKey:s}}),yield(0,Ym.Aj)(lr.c.actions.toggleSavedSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,saved:a}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.toggleSavedFailed({sourceURI:i,error:Ts.c.toPlainErrorObject(e)}))}}function*ty({payload:e}){const{server:t,provider:r,sourceURI:n,part:i,streamIDParam:s,streamID:a,allParts:o}=e;try{const e=i.key.match(new RegExp(`^(.*/parts/${i.id})/`)),c=S.c.join(e?e[1]:["/library/parts",i.id]);yield(0,Ym.MN)(Ts.c.put,c,{server:t,provider:r,params:{[s]:a,allParts:o?1:0}}),yield(0,Ym.Aj)(lr.c.actions.streamSelectSucceeded({sourceURI:n}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.streamSelectFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*ry({payload:e}){const{server:t,provider:r,sourceURI:n,streamKey:i}=e;try{yield(0,Ym.MN)(Ts.c.del,i,{server:t,provider:r}),yield(0,Ym.Aj)(lr.c.actions.streamDeleteSucceeded({sourceURI:n}))}catch(e){yield(0,Ym.Aj)(lr.c.actions.streamDeleteFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*ny({payload:e}){const{targetServer:t,targetProvider:r,targetLibrarySectionID:n,targetLibraryType:i,server:s,provider:a,metadataItem:o}=e;try{yield(0,Ym.MN)(Ts.c.post,"/media/subscriptions",{server:t,provider:r,params:{providers:(0,tm.c)({serverIdentifier:s.machineIdentifier,providerIdentifier:a.identifier}),prefs:{oneShot:1,remoteMedia:1},params:{libraryType:(0,Ch.c)(i)},targetLibrarySectionID:n,hints:{guid:o.guid,ratingKey:o.ratingKey,title:o.title,parentTitle:o.parentTitle},type:(0,Ch.c)(o.type)}})}catch(e){}}function*iy({payload:e}){const{ratingKey:t,server:r,provider:n,stableUser:i,sourceURI:s}=e;try{const e=(0,Th.c)(n,Mh.IL.RemoveFromContinueWatching,i);if(!(null==e?void 0:e.key))throw new Error(`removeFromContinueWatching action not found on ${n.identifier}`);yield(0,Ym.MN)(Ts.c.put,e.key,{server:r,provider:n,params:{ratingKey:t}}),yield(0,Ym.Aj)(lr.c.actions.removeFromContinueWatchingSucceeded({sourceURI:s}))}catch(e){}}function*sy(){yield Zm(lr.c.actions.fetchRequested,Kh,(({payload:e})=>e.metadataItem.sourceURI))}function*ay(){yield Zm(lr.c.actions.playedStatusUpdateRequested,Xh,(({payload:e})=>e.sourceURI))}function*oy(){yield Zm(lr.c.actions.rateRequested,Jh,(({payload:e})=>e.sourceURI))}function*cy(){yield Zm(lr.c.actions.toggleWatchlistRequested,Zh,(({payload:e})=>e.sourceURI))}function*ly(){yield Zm(lr.c.actions.toggleSavedRequested,ey,(({payload:e})=>e.sourceURI))}function*dy(){yield Zm(lr.c.actions.streamSelectRequested,ty,(({payload:e})=>e.sourceURI))}function*uy(){yield Uh(lr.c.actions.streamDeleteRequested,ry,(({payload:e})=>e.streamKey))}function*py(){yield Uh(lr.c.actions.addToLibraryRequested,ny,(({payload:e})=>e.metadataItem.sourceURI))}function*my(){yield Uh(lr.c.actions.removeFromContinueWatchingRequested,iy,(({payload:e})=>e.sourceURI))}function*hy(){yield(0,Ym.Q7)([(0,Ym.eG)(sy),eh(lr.c.actions.batchFetchRequested,$h),(0,Ym.eG)(my),(0,Ym.eG)(ay),(0,Ym.eG)(oy),(0,Ym.eG)(cy),(0,Ym.eG)(ly),(0,Ym.eG)(dy),(0,Ym.eG)(uy),(0,Ym.eG)(py)])}var yy=r(69956),gy=r(93808),fy=r(2708),vy=r(5632),by=Object.defineProperty,Sy=Object.defineProperties,Py=Object.getOwnPropertyDescriptors,Iy=Object.getOwnPropertySymbols,Ey=Object.prototype.hasOwnProperty,wy=Object.prototype.propertyIsEnumerable,Cy=(e,t,r)=>t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oy=(e,t)=>{for(var r in t||(t={}))Ey.call(t,r)&&Cy(e,r,t[r]);if(Iy)for(var r of Iy(t))wy.call(t,r)&&Cy(e,r,t[r]);return e},My=(e,t)=>Sy(e,Py(t)),Ty=(e,t)=>{var r={};for(var n in e)Ey.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Iy)for(var n of Iy(e))t.indexOf(n)<0&&wy.call(e,n)&&(r[n]=e[n]);return r};function*Dy(e,t,r){if(!r)return null;try{const n=(yield(0,Ym.MN)(Ts.c.get,r,{server:e,provider:t})).data.MediaContainer,{Metadata:i=[]}=n,s=Ty(n,["Metadata"]),[a]=i,o=(0,gh.c)({server:e,provider:t,data:a,container:s}),c=yield(0,rh.c)(vy.c),{providerIdentifier:l}=(0,yy.c)(o.metadataItem.sourceURI);return c.includes(l)?(yield(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:o.metadataItemStates})),o.metadataItem):null}catch(e){return null}}function*ky(e,t,r){const{placeholderItems:n,placeholderItemIndices:i}=e.items.reduce(((e,t,r)=>(t.type===gy.WW.Placeholder&&(e.placeholderItems.push(t),e.placeholderItemIndices.push(r)),e)),{placeholderItems:[],placeholderItemIndices:[]});return n&&(yield(0,Ym.Q7)(n.map((e=>(0,Ym.MN)(Dy,t,r,e.url))))).forEach(((t,r)=>{const n=i[r];t?e.items[n]=t:e.items[n].type=gy.WW.UnresolvedAd})),e}function*xy({payload:e}){const{server:t,provider:r,sourceURI:n,params:i,providerVersionOverride:s,includePaginationHeaders:a}=e;try{const{key:e}=(0,yy.c)(n),o=yield(0,Ym.MN)(dr.y.fetchAll,e,{server:t,provider:r,params:i,providerVersionOverride:s,includePaginationHeaders:a}),c=yield(0,Ym.MN)(ky,o,t,r);yield(0,Ym.Aj)(dr.c.actions.fetchAllSucceeded({sourceURI:n,data:c}))}catch(e){yield(0,Ym.Aj)(dr.c.actions.fetchAllFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*Ay({payload:e}){const{server:t,provider:r,sourceURI:n,params:i,startIndex:s,size:a,isPrepend:o,providerVersionOverride:c}=e;try{const{key:e}=(0,yy.c)(n),l=yield(0,Ym.MN)(dr.y.fetchRange,e,{server:t,provider:r,params:i,startIndex:s,size:a,isPrepend:o,providerVersionOverride:c}),d=yield(0,Ym.MN)(ky,l,t,r);yield(0,Ym.Aj)(dr.c.actions.fetchRangeSucceeded({sourceURI:n,data:d}))}catch(e){yield(0,Ym.Aj)(dr.c.actions.fetchRangeFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*Ry({payload:e}){const{server:t,provider:r,sourceURI:n,params:i,providerVersionOverride:s}=e;try{const e=yield(0,Ym.Ml)((0,fy.c)(n)),a=dr.y.getRepopulateRangeOptions((null==e?void 0:e.items)||[]),{key:o}=(0,yy.c)(n),c=yield(0,Ym.MN)(dr.y.fetchRange,o,My(Oy({},a),{server:t,provider:r,params:i,providerVersionOverride:s})),l=yield(0,Ym.MN)(ky,c,t,r);yield(0,Ym.Aj)(dr.c.actions.repopulateRangeSucceeded({sourceURI:n,data:l}))}catch(e){yield(0,Ym.Aj)(dr.c.actions.repopulateRangeFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*Ny(e){const{sourceURI:t}=e.payload,r=yield(0,Ym.Ml)((0,fy.c)(t));(null==r?void 0:r.isPaginated)?yield(0,Ym.MN)(Ry,e):yield(0,Ym.MN)(xy,e)}function*Ly(){yield Uh(dr.c.actions.fetchAllRequested,xy,(({payload:e})=>e.sourceURI))}function*jy(){yield Zm(dr.c.actions.fetchRangeRequested,Ay,(({payload:e})=>e.sourceURI))}function*Uy(){yield Zm(dr.c.actions.repopulateRangeRequested,Ry,(({payload:e})=>e.sourceURI))}function*Fy(){yield function(e,t,r,n,i={leading:!0,trailing:!0},...s){return(0,Ym.eG)((function*(){const a={};function*o(e,t,r){a[e]={timestamp:Date.now()},yield(0,Ym.oL)(r),yield(0,Ym.MN)(c,e,t)}function*c(e,t){a[e]={timestamp:Date.now(),task:yield(0,Ym.eG)(r,t,...s)}}yield(0,Ym.UT)(t,(function*(t){const r=n(t),s=a[r];if(s){if((null==i?void 0:i.trailing)&&s.task&&!s.task.isRunning()){const n=e-(Date.now()-s.timestamp);yield(0,Ym.MN)(o,r,t,n)}}else(null==i?void 0:i.leading)?yield(0,Ym.MN)(c,r,t):(null==i?void 0:i.trailing)&&(yield(0,Ym.MN)(o,r,t,e));const l=a[r];yield(0,Ym.oL)(e),l===a[r]&&delete a[r]}))}))}(5e3,dr.c.actions.throttledRepopulateRequested,Ny,(({payload:e})=>e.sourceURI))}function*Vy(){yield(0,Ym.Q7)([(0,Ym.eG)(Ly),(0,Ym.eG)(jy),(0,Ym.eG)(Uy),(0,Ym.eG)(Fy)])}function*_y({payload:e}){const{server:t,provider:r,sourceURI:n}=e;try{const{key:e}=(0,yy.c)(n);yield(0,Ym.MN)(Ts.c.put,S.c.join([e,"refresh"]),{server:t,provider:r})}catch(e){yield(0,Ym.Aj)(ur.c.actions.metadataRefreshFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*Wy({payload:e}){const{server:t,provider:r,sourceURI:n}=e;try{const{key:e}=(0,yy.c)(n);yield(0,Ym.MN)(Ts.c.put,S.c.join([e,"analyze"]),{server:t,provider:r})}catch(e){yield(0,Ym.Aj)(ur.c.actions.mediaAnalysisFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*By(){yield(0,Ym.UT)(ur.c.actions.metadataRefreshRequested,_y)}function*Hy(){yield(0,Ym.UT)(ur.c.actions.mediaAnalysisRequested,Wy)}function*zy(){yield(0,Ym.Q7)([(0,Ym.eG)(By),(0,Ym.eG)(Hy)])}var Gy=r(41267);function*qy({payload:e}){const{server:t}=e;try{(yield(0,Ym.Ml)((0,Gy.c)(t.machineIdentifier))).isPopulated||(yield(0,Ym.Aj)(pr.c.actions.fetchRequested(e)))}catch(e){yield(0,Ym.Aj)(pr.c.actions.fetchFailed({server:t,error:Ts.c.toPlainErrorObject(e)}))}}function*Ky({payload:e}){var t,r;const{server:n}=e;try{const e=null!=(r=null==(t=(yield(0,Ym.MN)(Ts.c.get,"/accounts",{server:n})).data.MediaContainer)?void 0:t.Account)?r:[];yield(0,Ym.Aj)(pr.c.actions.fetchSucceeded({server:n,data:e.filter((e=>e.name))}))}catch(e){yield(0,Ym.Aj)(pr.c.actions.fetchFailed({server:n,error:Ts.c.toPlainErrorObject(e)}))}}function*Qy(){yield Uh(pr.c.actions.populateRequested,qy,(({payload:e})=>e.server.machineIdentifier))}function*$y(){yield Uh(pr.c.actions.fetchRequested,Ky,(({payload:e})=>e.server.machineIdentifier))}function*Yy(){yield(0,Ym.Q7)([(0,Ym.eG)(Qy),(0,Ym.eG)($y)])}function*Xy({payload:e}){const{server:t,machineIdentifier:r}=e;try{const{data:e}=yield(0,Ym.MN)(Ts.c.get,`/api/v2/servers/${r}`,{server:t,headers:{accept:"application/json"}});yield(0,Ym.Aj)(hr.c.actions.fetchServerDetailsSucceeded({details:e,machineIdentifier:r}))}catch(e){yield(0,Ym.Aj)(hr.c.actions.fetchServerDetailsFailed({error:Ts.c.toPlainErrorObject(e),machineIdentifier:r}))}}function*Jy({payload:e}){const{server:t,machineIdentifier:r,sharingSettings:n,invitedEmail:i,invitedId:s,librarySectionIds:a,skipFriendship:o}=e;try{const{data:e}=yield(0,Ym.MN)(Ts.c.post,"/api/v2/shared_servers",{server:t,headers:{accept:"application/json"}},{invitedId:s,invitedEmail:i,settings:n,skipFriendship:o,librarySectionIds:a,machineIdentifier:r});!e.invitedEmail&&e.invited&&(yield(0,Ym.Aj)(Er.cp.actions.fetchSharingSettingsSucceeded({sharingSettings:n,user:e.invited}))),yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedOwnedInvites({server:t})),yield(0,Ym.Aj)(Sr.c.actions.fetchOwnedInvites({server:t})),yield(0,Ym.Aj)(hr.c.actions.shareLibrariesSucceeded({machineIdentifier:r,inviteToken:e.accepted?void 0:e.inviteToken}))}catch(e){yield(0,Ym.Aj)(hr.c.actions.shareLibrariesFailed({error:Ts.c.toPlainErrorObject(e),machineIdentifier:r}))}}function*Zy({payload:e}){const{server:t,machineIdentifier:r,sharingSettings:n,id:i,librarySectionIds:s,user:a}=e;try{yield(0,Ym.MN)(Ts.c.post,`/api/v2/shared_servers/${i}`,{server:t,headers:{accept:"application/json"}},{settings:n,librarySectionIds:s}),yield(0,Ym.Aj)(Er.cp.actions.fetchSharingSettingsSucceeded({sharingSettings:n,user:a})),yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedOwnedInvites({server:t})),yield(0,Ym.Aj)(hr.c.actions.updateLibrariesSucceeded({machineIdentifier:r}))}catch(e){yield(0,Ym.Aj)(hr.c.actions.updateLibrariesFailed({error:Ts.c.toPlainErrorObject(e),machineIdentifier:r}))}}function*eg({payload:e}){const{server:t,machineIdentifier:r,id:n}=e;try{yield(0,Ym.MN)(Ts.c.del,`/api/v2/shared_servers/${n}`,{server:t,headers:{accept:"application/json"}}),yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedOwnedInvites({server:t})),yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedReceivedInvites({server:t})),yield(0,Ym.Aj)(hr.c.actions.deleteSharedServerSucceeded({machineIdentifier:r}))}catch(e){yield(0,Ym.Aj)(hr.c.actions.deleteSharedServerFailed({error:Ts.c.toPlainErrorObject(e),machineIdentifier:r}))}}function*tg({payload:e}){var t;const{server:r,machineIdentifier:n,invitedEmail:i,invitedId:s,items:a,skipFriendship:o}=e;try{const{data:e}=yield(0,Ym.MN)(Ts.c.post,"/api/v2/shared_items",{server:r,headers:{accept:"application/json"}},{invitedEmail:i,invitedId:s,items:a,skipFriendship:o});yield(0,Ym.Aj)(br.c.actions.fetchOwnedInvites({server:r})),yield(0,Ym.Aj)(br.c.actions.fetchOwnedSources({server:r}));const c=yield(0,Ym.MN)(rg,r,e[0].sharedSourceId);yield(0,Ym.Aj)(hr.c.actions.shareItemSourceSucceeded({machineIdentifier:n,inviteToken:null!=(t=c.inviteToken)?t:""}))}catch(e){yield(0,Ym.Aj)(hr.c.actions.shareItemSourceFailed({error:Ts.c.toPlainErrorObject(e),machineIdentifier:n}))}}function*rg(e,t){const{data:r}=yield(0,Ym.MN)(Ts.c.get,`/api/v2/shared_sources/${t}`,{server:e,headers:{accept:"application/json"}});return r}function*ng(){yield(0,Ym.Q7)([th(hr.c.actions.fetchServerDetails,Xy,"machineIdentifier"),th(hr.c.actions.shareLibraries,Jy,"machineIdentifier"),th(hr.c.actions.updateLibraries,Zy,"machineIdentifier"),th(hr.c.actions.deleteSharedServer,eg,"machineIdentifier"),th(hr.c.actions.shareItemSource,tg,"machineIdentifier")])}var ig=r(66844);function*sg({payload:e}){const{server:t}=e;try{(yield(0,Ym.Ml)((0,ig.c)(t.machineIdentifier))).isPopulated||(yield(0,Ym.Aj)(yr.c.actions.fetchRequested(e)))}catch(e){yield(0,Ym.Aj)(yr.c.actions.fetchFailed({server:t,error:Ts.c.toPlainErrorObject(e)}))}}function*ag({payload:e}){var t,r;const{server:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/devices",{server:n});yield(0,Ym.Aj)(yr.c.actions.fetchSucceeded({server:n,data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Device)?r:[]}))}catch(e){yield(0,Ym.Aj)(yr.c.actions.fetchFailed({server:n,error:Ts.c.toPlainErrorObject(e)}))}}function*og(){yield Uh(yr.c.actions.populateRequested,sg,(({payload:e})=>e.server.machineIdentifier))}function*cg(){yield Uh(yr.c.actions.fetchRequested,ag,(({payload:e})=>e.server.machineIdentifier))}function*lg(){yield(0,Ym.Q7)([(0,Ym.eG)(og),(0,Ym.eG)(cg)])}var dg=r(90368),ug=r(38316),pg=r.n(ug),mg=r(30456);function hg(e){var t,r;const{data:n}=e;return(null!=(r=null==(t=n.MediaContainer)?void 0:t.Metadata)?r:[]).map((e=>{var t;const r=pg()(e);return(0,mg.cX)(r,"viewOffset"),(0,mg.cX)(r,"duration"),null==(t=r.Media)||t.forEach((e=>{var t;null==(t=e.Part)||t.forEach((e=>{var t;null==(t=e.Stream)||t.forEach((e=>{(0,mg.op)(e,"selected"),(0,mg.cX)(e,"streamType")}))}))})),r}))}function*yg({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/status/sessions",{server:t});yield(0,Ym.Aj)(gr.c.actions.fetchSucceeded({server:t,data:hg(e)}))}catch(e){yield(0,Ym.Aj)(gr.c.actions.fetchFailed({server:t,error:Ts.c.toPlainErrorObject(e)}))}}function*gg({payload:e}){const{server:t,message:r}=e;try{const e=(yield(0,Ym.Ml)((0,dg.c)(t.machineIdentifier))).sessionsByKey[r.sessionKey];e&&e.key===r.key||(yield(0,Ym.Aj)(gr.c.actions.fetchRequested({server:t})))}catch(e){yield(0,Ym.Aj)(gr.c.actions.stopFailed({server:t,error:Ts.c.toPlainErrorObject(e)}))}}function*fg({payload:e}){const{server:t,session:r,reason:n}=e;try{yield(0,Ym.MN)(Ts.c.get,"/status/sessions/terminate",{server:t,params:{sessionId:r.Session.id,reason:n}})}catch(e){yield(0,Ym.Aj)(gr.c.actions.stopFailed({server:t,error:Ts.c.toPlainErrorObject(e)}))}}function*vg(){yield Uh(gr.c.actions.fetchRequested,yg,(({payload:e})=>e.server.machineIdentifier))}function*bg(){yield Uh(gr.c.actions.sessionChanged,gg,(({payload:e})=>e.server.machineIdentifier))}function*Sg(){yield(0,Ym.UT)(gr.c.actions.stopRequested,fg)}function*Pg(){yield(0,Ym.Q7)([(0,Ym.eG)(vg),(0,Ym.eG)(bg),(0,Ym.eG)(Sg)])}var Ig=r(73980),Eg=r(58896),wg=Object.getOwnPropertySymbols,Cg=Object.prototype.hasOwnProperty,Og=Object.prototype.propertyIsEnumerable,Mg=(e,t)=>{var r={};for(var n in e)Cg.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&wg)for(var n of wg(e))t.indexOf(n)<0&&Og.call(e,n)&&(r[n]=e[n]);return r};const Tg="|";function Dg(e,t){switch(e){case Eg.gT.Int:case Eg.gT.Enum:return Ie.c.parseInteger(t);case Eg.gT.Bool:return Ie.c.parseBoolean(t);case Eg.gT.Double:return Ie.c.parseFloat(t);default:return t}}function kg({data:e}){var t;return(null!=(t=e.Setting)?t:[]).map((e=>{const t=e,{enumValues:r}=t,n=Mg(t,["enumValues"]);return n.default&&(n.default=Dg(n.type,n.default)),n.value=Dg(n.type,n.value),(0,mg.op)(n,"advanced"),(0,mg.op)(n,"hidden"),r&&(n.enumValues=r.split(Tg).map((e=>{const[t,r=t]=e.split(":");return{label:decodeURIComponent(r),value:Dg(n.type,t)}}))),n}))}function*xg({payload:e}){const{server:t,librarySectionID:r}=e;try{const e=kg({server:t,data:(yield(0,Ym.MN)(Ts.c.get,`/library/sections/${r}/prefs`,{server:t})).data.MediaContainer});yield(0,Ym.Aj)(fr.cp.actions.fetchServerSectionSettingsSucceeded({machineIdentifier:t.machineIdentifier,librarySectionID:r,settings:e}))}catch(e){yield(0,Ym.Aj)(fr.cp.actions.fetchServerSectionSettingsFailed({machineIdentifier:t.machineIdentifier,librarySectionID:r,error:Ts.c.toPlainErrorObject(e)}))}}function*Ag(){yield Uh(fr.cp.actions.fetchServerSectionSettings,xg,(({payload:e})=>(0,Ig.c)(e.server.machineIdentifier,e.librarySectionID)))}function*Rg(){yield(0,Ym.Q7)([(0,Ym.eG)(Ag)])}var Ng=Object.defineProperty,Lg=Object.defineProperties,jg=Object.getOwnPropertyDescriptors,Ug=Object.getOwnPropertySymbols,Fg=Object.prototype.hasOwnProperty,Vg=Object.prototype.propertyIsEnumerable,_g=(e,t,r)=>t in e?Ng(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wg=(e,t)=>{for(var r in t||(t={}))Fg.call(t,r)&&_g(e,r,t[r]);if(Ug)for(var r of Ug(t))Vg.call(t,r)&&_g(e,r,t[r]);return e},Bg=(e,t)=>Lg(e,jg(t));function*Hg({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(Jg,t);yield(0,Ym.Aj)(br.c.actions.fetchReceivedInvitesSucceeded({invites:e}))}catch(e){yield(0,Ym.Aj)(br.c.actions.fetchReceivedInvitesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*zg({payload:e}){const{server:t,sourceIds:r,action:n}=e;return"accept"===n?yield(0,Ym.MN)(Gg,t,r):"reject"===n?yield(0,Ym.MN)(qg,t,r):yield(0,Ym.MN)(Qg,t,r)}function*Gg(e,t){let r=null;const n=t.map((t=>(0,Ym.MN)((function*(){try{yield(0,Ym.MN)(Ts.c.post,`/api/v2/shared_sources/${t}/accept`,{server:e,headers:{accept:"application/json"}})}catch(e){r=e}}))));if(yield(0,Ym.Q7)(n),r)yield(0,Ym.Aj)(br.c.actions.respondToInviteFailed({error:Ts.c.toPlainErrorObject(r),action:"accept"}));else{const t=yield(0,Ym.MN)(Jg,e);yield(0,Ym.Aj)(br.c.actions.fetchReceivedSources({server:e})),yield(0,Ym.Aj)(br.c.actions.respondToInviteSucceeded({invites:t,action:"accept"}))}}function*qg(e,t){let r=null;const n=t.map((t=>(0,Ym.MN)((function*(){try{yield(0,Ym.MN)(Ts.c.del,`/api/v2/shared_sources/${t}`,{server:e,headers:{accept:"application/json"}})}catch(e){r=e}}))));if(yield(0,Ym.Q7)(n),r)yield(0,Ym.Aj)(br.c.actions.respondToInviteFailed({error:Ts.c.toPlainErrorObject(r),action:"reject"}));else{const t=yield(0,Ym.MN)(Jg,e);yield(0,Ym.Aj)(br.c.actions.fetchSources({server:e})),yield(0,Ym.Aj)(br.c.actions.respondToInviteSucceeded({invites:t,action:"reject"}))}}function*Kg({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(Zg,t);yield(0,Ym.Aj)(br.c.actions.fetchOwnedInvitesSucceeded({invites:e}))}catch(e){yield(0,Ym.Aj)(br.c.actions.fetchOwnedInvitesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Qg(e,t){let r=null;const n=t.map((t=>(0,Ym.MN)((function*(){try{yield(0,Ym.MN)(Ts.c.del,`/api/v2/shared_sources/${t}`,{server:e,headers:{accept:"application/json"}})}catch(e){r=e}}))));if(yield(0,Ym.Q7)(n),r)yield(0,Ym.Aj)(br.c.actions.respondToInviteFailed({error:Ts.c.toPlainErrorObject(r),action:"cancel"}));else{const t=yield(0,Ym.MN)(Zg,e);yield(0,Ym.Aj)(br.c.actions.respondToInviteSucceeded({invites:t,action:"cancel"}))}}function*$g({payload:e}){const{server:t}=e;yield(0,Ym.Aj)(br.c.actions.fetchReceivedSources({server:t})),yield(0,Ym.Aj)(br.c.actions.fetchOwnedSources({server:t}))}function*Yg({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(ef,t);yield(0,Ym.Aj)(br.c.actions.fetchReceivedSourcesSucceeded({sources:e}))}catch(e){yield(0,Ym.Aj)(br.c.actions.fetchReceivedSourcesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Xg({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(tf,t);yield(0,Ym.Aj)(br.c.actions.fetchOwnedSourcesSucceeded({sources:e}))}catch(e){yield(0,Ym.Aj)(br.c.actions.fetchOwnedSourcesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Jg(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_sources/invites/received/pending",{server:e,headers:{accept:"application/json"}});return t}function*Zg(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_sources/invites/owned/pending",{server:e,headers:{accept:"application/json"}});return t}function*ef(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_sources/received",{server:e,headers:{accept:"application/json"}});return t.filter((e=>"accepted"===e.status))}function*tf(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_sources/owned",{server:e,headers:{accept:"application/json"}});return t.filter((e=>"accepted"===e.status)).map((e=>Bg(Wg({},e),{owned:!0})))}function*rf(){yield(0,Ym.Q7)([eh(br.c.actions.fetchReceivedInvites,Hg),eh(br.c.actions.fetchOwnedInvites,Kg),eh(br.c.actions.fetchReceivedSources,Yg),eh(br.c.actions.fetchOwnedSources,Xg),eh(br.c.actions.respondToInvite,zg),eh(br.c.actions.fetchSources,$g)])}function*nf({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(mf,t);yield(0,Ym.Aj)(Sr.c.actions.fetchReceivedInvitesSucceeded({invites:e}))}catch(e){yield(0,Ym.Aj)(Sr.c.actions.fetchReceivedInvitesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*sf({payload:e}){const{server:t,serverIds:r,action:n}=e;return"accept"===n?yield(0,Ym.MN)(af,t,r):"reject"===n?yield(0,Ym.MN)(of,t,r):yield(0,Ym.MN)(lf,t,r)}function*af(e,t){let r=null;const n=t.map((t=>(0,Ym.MN)((function*(){try{yield(0,Ym.MN)(Ts.c.post,`/api/v2/shared_servers/${t}/accept`,{server:e,headers:{accept:"application/json"}})}catch(e){r=e}}))));if(yield(0,Ym.Q7)(n),r)yield(0,Ym.Aj)(Sr.c.actions.respondToInviteFailed({error:Ts.c.toPlainErrorObject(r),action:"accept"}));else{yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedReceivedInvites({server:e}));const t=yield(0,Ym.MN)(mf,e);yield(0,Ym.Aj)(Sr.c.actions.respondToInviteSucceeded({invites:t,action:"accept"}))}}function*of(e,t){let r=null;const n=t.map((t=>(0,Ym.MN)((function*(){try{yield(0,Ym.MN)(Ts.c.del,`/api/v2/shared_servers/${t}`,{server:e,headers:{accept:"application/json"}})}catch(e){r=e}}))));if(yield(0,Ym.Q7)(n),r)yield(0,Ym.Aj)(Sr.c.actions.respondToInviteFailed({error:Ts.c.toPlainErrorObject(r),action:"reject"}));else{const t=yield(0,Ym.MN)(mf,e);yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedInvites({server:e})),yield(0,Ym.Aj)(Sr.c.actions.respondToInviteSucceeded({invites:t,action:"reject"}))}}function*cf({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(hf,t);yield(0,Ym.Aj)(Sr.c.actions.fetchOwnedInvitesSucceeded({invites:e}))}catch(e){yield(0,Ym.Aj)(Sr.c.actions.fetchOwnedInvitesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*lf(e,t){let r=null;const n=t.map((t=>(0,Ym.MN)((function*(){try{yield(0,Ym.MN)(Ts.c.del,`/api/v2/shared_servers/${t}`,{server:e,headers:{accept:"application/json"}})}catch(e){r=e}}))));if(yield(0,Ym.Q7)(n),r)yield(0,Ym.Aj)(Sr.c.actions.respondToInviteFailed({error:Ts.c.toPlainErrorObject(r),action:"cancel"}));else{const t=yield(0,Ym.MN)(hf,e);yield(0,Ym.Aj)(Sr.c.actions.fetchOwnedInvites({server:e})),yield(0,Ym.Aj)(br.c.actions.fetchOwnedInvites({server:e})),yield(0,Ym.Aj)(Sr.c.actions.respondToInviteSucceeded({invites:t,action:"cancel"}))}}function*df({payload:e}){const{server:t}=e;yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedOwnedInvites({server:t})),yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedReceivedInvites({server:t}))}function*uf({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(yf,t);yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedReceivedInvitesSucceeded({servers:e}))}catch(e){yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedReceivedInvitesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*pf({payload:e}){const{server:t}=e;try{const e=yield(0,Ym.MN)(gf,t);yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedOwnedInvitesSucceeded({servers:e}))}catch(e){yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedOwnedInvitesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*mf(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_servers/invites/received/pending",{server:e,headers:{accept:"application/json"}});return t}function*hf(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_servers/invites/owned/pending",{server:e,headers:{accept:"application/json"}});return t}function*yf(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_servers/received/accepted",{server:e,headers:{accept:"application/json"}});return t}function*gf(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/shared_servers/owned/accepted",{server:e,headers:{accept:"application/json"}});return t}function*ff(){yield(0,Ym.Q7)([eh(Sr.c.actions.fetchReceivedInvites,nf),eh(Sr.c.actions.fetchOwnedInvites,cf),eh(Sr.c.actions.fetchAcceptedInvites,df),eh(Sr.c.actions.fetchAcceptedReceivedInvites,uf),eh(Sr.c.actions.fetchAcceptedOwnedInvites,pf),eh(Sr.c.actions.respondToInvite,sf)])}var vf=r(69972),bf=r(24372),Sf=r(50988),Pf=r.n(Sf),If=Object.defineProperty,Ef=Object.defineProperties,wf=Object.getOwnPropertyDescriptors,Cf=Object.getOwnPropertySymbols,Of=Object.prototype.hasOwnProperty,Mf=Object.prototype.propertyIsEnumerable,Tf=(e,t,r)=>t in e?If(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Df=(e,t)=>{for(var r in t||(t={}))Of.call(t,r)&&Tf(e,r,t[r]);if(Cf)for(var r of Cf(t))Mf.call(t,r)&&Tf(e,r,t[r]);return e},kf=(e,t)=>Ef(e,wf(t));const xf="\n    mutation generateInviteUrl {\n  generateInviteURL\n}\n    ",Af=ir.m.injectEndpoints({endpoints:e=>({generateInviteUrl:e.mutation({query:e=>({document:xf,variables:e})})})}),{useGenerateInviteUrlMutation:Rf}=Af;function*Nf({payload:e}){var t;const{server:r}=e;try{const e=yield(0,Ym.MN)(_f,r);yield(0,Ym.Aj)(Pr.c.actions.fetchUserDetailsSucceeded({details:{id:e.id,uuid:e.uuid,thumb:e.thumb||"",friendlyName:e.friendlyName||"",email:e.email,username:e.username,anonymous:e.anonymous,isFullUser:!!e.username||!!e.anonymous,plexPass:null==(t=e.roles)?void 0:t.includes(vf._m)}}))}catch(e){yield(0,Ym.Aj)(Pr.c.actions.fetchUserDetailsFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Lf({payload:e}){const{server:t}=e;try{const{data:{consent:e}}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/user/view_state_sync",{server:t,headers:{accept:"application/json"}});yield(0,Ym.Aj)(Pr.c.actions.fetchViewStateSucceeded({consent:e}))}catch(e){yield(0,Ym.Aj)(Pr.c.actions.fetchViewStateSyncFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*jf({payload:e}){const{server:t,update:r}=e;let n;r.avatar&&(n=new FormData,n.append("avatar",(0,bf.c)(r.avatar)));const i=Object.entries(r).filter((([e])=>"avatar"!==e));try{yield(0,Ym.MN)(Ts.c.put,`/api/v2/user?${new URLSearchParams(i)}`,{server:t,headers:{accept:"application/json"}},n);const e=yield(0,Ym.MN)(_f,t);yield(0,Ym.Q7)([(0,jh.c)((0,pa.u6)()),(0,Ym.Aj)(Pr.c.actions.updateUserDetailsSucceeded({details:{friendlyName:e.friendlyName||"",thumb:e.thumb||""}}))])}catch(e){yield(0,Ym.Aj)(Pr.c.actions.updateUserDetailsFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Uf({payload:e}){const{server:t,userId:r}=e,n=new URL("/api/v2/user/avatar",t.uri);r&&n.searchParams.set("userId",r);try{yield(0,Ym.MN)(Ts.c.del,n.href,{server:t,headers:{accept:"application/json"}});const e=yield(0,Ym.MN)(_f,t);yield(0,Ym.Q7)([(0,jh.c)((0,pa.u6)()),(0,Ym.Aj)(Pr.c.actions.updateUserDetailsSucceeded({details:{friendlyName:e.friendlyName||"",thumb:e.thumb||""}}))]),r&&(yield(0,jh.c)((0,pa.QD)())),yield(0,Ym.Aj)(Pr.c.actions.deleteUserAvatarSucceeded())}catch(e){yield(0,Ym.Aj)(Pr.c.actions.deleteUserAvatarFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Ff({payload:e}){const{server:t,consent:r}=e;try{yield(0,Ym.MN)(Ts.c.put,"/api/v2/user/view_state_sync",{server:t,headers:{accept:"application/json"},params:{consent:"given"===r}}),yield(0,Ym.Aj)(Pr.c.actions.updateViewStateSyncSucceeded({consent:"given"===r}))}catch(e){yield(0,Ym.Aj)(Pr.c.actions.updateUserDetailsFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Vf(){try{const{generateInviteURL:e}=yield(0,Ym.MN)(Jm.CM,xf);yield(0,Ym.Aj)(Pr.c.actions.getInviteUrlSucceeded({url:e}))}catch(e){yield(0,Ym.Aj)(Pr.c.actions.getInviteUrlFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*_f(e){const{data:t}=yield(0,Ym.MN)(Ts.c.get,"/api/v2/user",{server:e,headers:{accept:"application/json"}});return kf(Df({},r=t),{friendlyName:r.friendlyName&&Pf()(r.friendlyName),title:r.title&&Pf()(r.title)});var r}function*Wf(){yield(0,Ym.Q7)([eh(Pr.c.actions.updateUserDetails,jf),eh(Pr.c.actions.fetchUserDetails,Nf),eh(Pr.c.actions.updateViewStateSyncConsent,Ff),eh(Pr.c.actions.fetchViewStateSync,Lf),eh(Pr.c.actions.getInviteUrl,Vf),eh(Pr.c.actions.deleteUserAvatar,Uf)])}function*Bf({payload:e}){const{server:t,provider:r,stableUser:n}=e;try{const e=(0,Th.c)(r,Mh.IL.RemoveViews,n);if(!e)throw new Error("No remove views action found on provider");if(!e.key)throw new Error("The remove views action is missing a `key`");yield(0,Ym.MN)(Ts.c.put,e.key,{server:t,provider:r}),yield(0,Ym.Aj)(Ir.c.actions.removeViewsSucceeded())}catch(e){yield(0,Ym.Aj)(Ir.c.actions.removeViewsFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Hf(){yield(0,Ym.Q7)([eh(Ir.c.actions.removeViews,Bf)])}function*zf({payload:e}){const t=e.server;try{yield(0,Ym.Aj)(Sr.c.actions.fetchAcceptedInvites({server:t})),yield(0,Ym.Aj)(br.c.actions.fetchSources({server:t}))}catch(e){}}function*Gf({payload:e}){const{server:t,invitedId:r,user:n,invitedEmail:i}=e,s=new URLSearchParams;if(r&&r>=0)s.append("invitedId",r.toString());else{if(!i)return;s.append("invitedEmail",i)}try{const{data:e}=yield(0,Ym.MN)(Ts.c.get,`/api/v2/sharing_settings?${s}`,{server:t,headers:{accept:"application/json"}});yield(0,Ym.Aj)(Er.cp.actions.fetchSharingSettingsSucceeded({sharingSettings:e,user:n}))}catch(e){yield(0,Ym.Aj)(Er.cp.actions.fetchSharingSettingsFailed({error:Ts.c.toPlainErrorObject(e),user:n}))}}function*qf({payload:e}){const{server:t,sharingSettings:r,user:n,invitedId:i}=e;try{yield(0,Ym.MN)(Ts.c.post,"/api/v2/sharing_settings",{server:t,headers:{accept:"application/json"}},{settings:r,invitedEmail:i?void 0:n.username,invitedId:i}),yield(0,Ym.Aj)(Er.cp.actions.saveSharingSettingsSucceeded({sharingSettings:r,user:n}))}catch(e){yield(0,Ym.Aj)(Er.cp.actions.saveSharingSettingsFailed({error:Ts.c.toPlainErrorObject(e),user:n}))}}function*Kf(){yield(0,Ym.Q7)([eh(Er.cp.actions.fetchAllLibraryAccess,zf),eh(Er.cp.actions.fetchSharingSettings,Gf),eh(Er.cp.actions.saveSharingSettingsRequested,qf)])}function*Qf(){yield(0,Ym.Q7)([(0,Ym.eG)(yh),(0,Ym.eG)(Eh),(0,Ym.eG)(hy),(0,Ym.eG)(Vy),(0,Ym.eG)(zy),(0,Ym.eG)(Wf),(0,Ym.eG)(Yy),(0,Ym.eG)(ng),(0,Ym.eG)(Rg),(0,Ym.eG)(lg),(0,Ym.eG)(Pg),(0,Ym.eG)(rf),(0,Ym.eG)(ff),(0,Ym.eG)(Kf),(0,Ym.eG)(Hf)])}var $f=r(71928);const Yf=function(e,t){return t?t.map((t=>{var r;let n;return n="field"in t?{key:t.key,field:t.field,value:String(t.value),type:t.type,title:String(t.title)}:"fastKey"in t?{key:t.fastKey,field:null!=(r=t.type)?r:e.filter,value:t.key,title:String(t.title)}:{field:e.filter,key:t.key,value:t.key,title:String(t.title)},n})):[]};function Xf(e,t){const r=function(e){switch(e){case gy.k3.Movie:return gy.WW.Movie;case gy.k3.Show:return gy.WW.Show;case gy.k3.Season:return gy.WW.Season;case gy.k3.Episode:return gy.WW.Episode;case gy.k3.Person:return gy.WW.Person;case gy.k3.Artist:return gy.WW.Artist;case gy.k3.Album:return gy.WW.Album;case gy.k3.Track:return gy.WW.Track;case gy.k3.Clip:return gy.WW.Clip;case gy.k3.Photo:return gy.WW.Photo;case gy.k3.PhotoAlbum:return gy.WW.PhotoAlbum;case gy.k3.Playlist:return gy.WW.Playlist;case gy.k3.Collection:return gy.WW.Collection;case gy.k3.Author:return gy.WW.Author;case gy.k3.Audiobook:return gy.WW.Audiobook;case gy.k3.Chapter:return gy.WW.Chapter}}(t);if(!e)return e;"composite"===e.type?e.Rule.forEach((e=>{Xf(e,t)})):e.type&&!e.field.includes(".")?(e.field=`${e.type}.${e.field}`,delete e.type):e.type||e.field.includes(".")||r===gy.WW.Movie||r===gy.WW.Photo||(e.field=`${r}.${e.field}`),e.type||!e.value||e.valueTitle||(e.valueTitle=e.value,e.value=encodeURIComponent(e.value))}function*Jf({payload:e}){const{server:t,provider:r,key:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,n,{server:t,provider:r});Xf((i=e.data.Query).Rule,i.type),yield(0,Ym.Aj)(Or.c.actions.fetchQuerySucceeded({query:e.data.Query}))}catch(e){yield(0,Ym.Aj)(Or.c.actions.fetchQueryFailed({error:Ts.c.toPlainErrorObject(e)}))}var i}function*Zf({payload:e}){const{server:t,provider:r,filter:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,n.key,{server:t,provider:r}),i=Yf(n,e.data.MediaContainer.Directory);yield(0,Ym.Aj)(Or.c.actions.fetchFilterOptionsSucceeded({filter:n,filterOptions:i}))}catch(e){yield(0,Ym.Aj)(Or.c.actions.fetchFilterOptionsFailed({filter:n,error:Ts.c.toPlainErrorObject(e)}))}}function*ev({payload:e}){var t;const{server:r,provider:n,key:i}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,i,{server:r,provider:n}),s=null==(t=e.data.MediaContainer.Metadata)?void 0:t[0];if(!s)throw new Error("Could not find metadata item in response");yield(0,Ym.Aj)(Or.c.actions.fetchCuratedSucceeded({curatedItem:(0,gh.c)({server:r,provider:n,data:s,container:e.data.MediaContainer}).metadataItem}))}catch(e){yield(0,Ym.Aj)(Or.c.actions.fetchCuratedFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*tv({payload:e}){var t;try{const{server:r,provider:n,key:i}=e,s=yield(0,Ym.MN)(Ts.c.get,i,{server:r,provider:n}),a=null==(t=s.data.MediaContainer.Metadata)?void 0:t[0];if(!a)throw new Error("Could not find metadata item in response");const{metadataItem:o}=(0,gh.c)({server:r,provider:n,container:s.data.MediaContainer,data:a}),c=(0,$f.c)(r,n,o);if(!c)throw new Error("Could not find route to edit filters");(0,Qt.c)(...c)}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem editing the filters for this item.")))}}function*rv(){for(;;){const e=yield(0,Ym.t9)(Or.c.actions.fetchQueryRequested,Jf);yield(0,Ym.UH)(Or.c.actions.reset),yield(0,Ym.qG)(e)}}function*nv(){for(;;){const e=yield(0,Ym.t9)(Or.c.actions.fetchFilterOptionsRequested,Zf);yield(0,Ym.UH)(Or.c.actions.reset),yield(0,Ym.qG)(e)}}function*iv(){for(;;){const e=yield(0,Ym.t9)(Or.c.actions.fetchCuratedRequested,ev);yield(0,Ym.UH)(Or.c.actions.reset),yield(0,Ym.qG)(e)}}function*sv(){yield(0,Ym.y0)(Or.c.actions.editFiltersRequested,tv)}function*av(){yield(0,Ym.Q7)([(0,Ym.eG)(rv),(0,Ym.eG)(nv),(0,Ym.eG)(iv),(0,Ym.eG)(sv)])}var ov=r(4644);function*cv({payload:e}){var t;const{server:r,provider:n,sourceURI:i,isSmart:s}=e;try{const a=(0,ov.c)(n,Mh.Aj.Playlist),o=(0,ov.c)(n,Mh.Aj.Collection);let c,l,d=Ts.c.post;if("key"in e?(d=Ts.c.put,c=S.c.join([e.key,"items"]),l={uri:i}):"mediaType"in e?(c=null==a?void 0:a.key,l={type:e.mediaType,title:e.title,smart:s?1:0,uri:i}):(c=null==o?void 0:o.key,l={type:(0,Ch.c)(e.metadataType),title:e.title,smart:s?1:0,uri:i,sectionId:e.contentDirectoryID}),!c)throw new Error("No key available to update curated item");const u=yield(0,Ym.MN)(d,c,{server:r,provider:n,params:l}),p=null==(t=u.data.MediaContainer.Metadata)?void 0:t[0];if(!p)throw new Error("Unable to find Metadata in playlist save response");const{metadataItem:m}=(0,gh.c)({server:r,provider:n,data:p,container:u.data.MediaContainer});yield(0,Ym.Aj)(Mr.c.actions.saveSucceeded({sourceURI:i,metadataItem:m}))}catch(t){yield(0,Ym.Aj)(Mr.c.actions.saveFailed({sourceURI:i,error:Ts.c.toPlainErrorObject(t)})),"key"in e&&(yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem updating this item."))))}}function*lv({payload:e}){const{server:t,provider:r,sourceURI:n,containerKey:i,ratingKey:s}=e;try{yield(0,Ym.MN)(Ts.c.del,S.c.join([i,s]),{server:t,provider:r}),yield(0,Ym.Aj)(lr.c.actions.repopulateRequested({sourceURI:n}))}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem removing this item.")))}}function*dv({payload:e}){const{server:t,provider:r,sourceURI:n,containerKey:i,ratingKey:s,afterID:a}=e;try{yield(0,Ym.MN)(Ts.c.put,S.c.join([i,"items",s,"move"]),{server:t,provider:r,params:{after:a}})}catch(e){yield(0,Ym.Aj)(lr.c.actions.repopulateRequested({sourceURI:n})),yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem moving this item.")))}}function*uv(){yield(0,Ym.y0)(Mr.c.actions.saveRequested,cv)}function*pv(){yield(0,Ym.UT)(Mr.c.actions.removeItemRequested,lv)}function*mv(){yield(0,Ym.UT)(Mr.c.actions.moveItemRequested,dv)}function*hv(){yield(0,Ym.Q7)([(0,Ym.eG)(uv),(0,Ym.eG)(pv),(0,Ym.eG)(mv)])}var yv=Object.defineProperty,gv=Object.defineProperties,fv=Object.getOwnPropertyDescriptors,vv=Object.getOwnPropertySymbols,bv=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,Pv=(e,t,r)=>t in e?yv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Iv=(e,t)=>{for(var r in t||(t={}))bv.call(t,r)&&Pv(e,r,t[r]);if(vv)for(var r of vv(t))Sv.call(t,r)&&Pv(e,r,t[r]);return e},Ev=(e,t)=>gv(e,fv(t));function wv(e){return(null!=e?e:[]).map((e=>Ev(Iv({},e),{displayedOn:JSON.parse(e.displayedOn)})))}function*Cv({payload:e}){const{server:t}=e;try{const e=wv((yield(0,Ym.MN)(Ts.c.get,"/customChannels",{server:t})).data.MediaContainer.CustomChannel);yield(0,Ym.Aj)(Tr.c.actions.customChannelsFetchSucceeded({data:e}))}catch(e){yield(0,Ym.Aj)(Tr.c.actions.customChannelsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Ov({payload:e}){const{backgroundUrl:t,contentRating:r,description:n,displayedOn:i,logoUrl:s,name:a,server:o,visibility:c}=e;try{const e=wv((yield(0,Ym.MN)(Ts.c.post,"/customChannels",{server:o,params:{backgroundUrl:t,contentRating:r,description:n,displayedOn:JSON.stringify(i),logoUrl:s,name:a,visibility:c}})).data.MediaContainer.CustomChannel);yield(0,Ym.Aj)(Tr.c.actions.customChannelCreateSucceeded({data:e[0]}))}catch(e){yield(0,Ym.Aj)(Tr.c.actions.customChannelCreateFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Mv({payload:e}){const{channelId:t,server:r}=e;try{yield(0,Ym.MN)(Ts.c.del,`/customChannels/${t}`,{server:r}),yield(0,Ym.Aj)(Tr.c.actions.customChannelDeleteSucceeded({channelId:t}))}catch(e){yield(0,Ym.Aj)(Tr.c.actions.customChannelDeleteFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Tv(){for(;;){const e=yield(0,Ym.t9)(Tr.c.actions.customChannelsFetchRequested,Cv);yield(0,Ym.UH)(Tr.c.actions.reset),yield(0,Ym.qG)(e)}}function*Dv(){for(;;){const e=yield(0,Ym.t9)(Tr.c.actions.customChannelCreateRequested,Ov);yield(0,Ym.UH)(Tr.c.actions.reset),yield(0,Ym.qG)(e)}}function*kv(){for(;;){const e=yield(0,Ym.t9)(Tr.c.actions.customChannelDeleteRequested,Mv);yield(0,Ym.UH)(Tr.c.actions.reset),yield(0,Ym.qG)(e)}}function*xv(){yield(0,Ym.Q7)([(0,Ym.eG)(Tv),(0,Ym.eG)(Dv),(0,Ym.eG)(kv)])}var Av=r(67272),Rv=r(39700);const Nv="EEE, dd MMM yyyy HH:mm:ss 'GMT'";var Lv=r(16768),jv=r(49956);function*Uv({payload:e}){var t;try{const r=Date.now(),n=yield(0,Ym.MN)(Ts.c.get,"/statistics/bandwidth",{server:e.server,params:{timespan:e.timespan,"at>":e.after}}),i=n.data.MediaContainer,s=n.headers.Date,a=s?function(e){const t=(0,Av.c)(e,Nv,new Date);return(0,Rv.c)(t).getTime()}(s):r;yield(0,Ym.Aj)(Dr.c.actions.bandwidthFetchSucceeded({data:null!=(t=null==i?void 0:i.StatisticsBandwidth)?t:[],requestTimestampMilliseconds:r,responseTimestampMilliseconds:a}))}catch(e){yield(0,Ym.Aj)(Dr.c.actions.bandwidthFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Fv({payload:e}){var t;try{const r=Date.now(),n=(yield(0,Ym.MN)(Ts.c.get,"/statistics/resources",{server:e.server,params:{timespan:(0,jv.cr)(jv.qo.RealTime)}})).data.MediaContainer;yield(0,Ym.Aj)(xr.c.actions.resourcesFetchSucceeded({data:null!=(t=null==n?void 0:n.StatisticsResources)?t:[],requestTimestampMilliseconds:r}))}catch(e){yield(0,Ym.Aj)(xr.c.actions.resourcesFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Vv({payload:e}){var t,r;try{const n=(yield(0,Ym.MN)(Bv,e)).data.MediaContainer;yield(0,Ym.Aj)(Rr.c.actions.topUsersFetchSucceeded({data:{statistics:null!=(t=null==n?void 0:n.StatisticsMedia)?t:[],accounts:null!=(r=null==n?void 0:n.Account)?r:[]}}))}catch(e){yield(0,Ym.Aj)(Rr.c.actions.topUsersFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*_v({payload:e}){var t,r;try{const n=(yield(0,Ym.MN)(Bv,e)).data.MediaContainer;yield(0,Ym.Aj)(kr.c.actions.playHistoryFetchSucceeded({data:{statistics:null!=(t=null==n?void 0:n.StatisticsMedia)?t:[],accounts:null!=(r=null==n?void 0:n.Account)?r:[]}}))}catch(e){yield(0,Ym.Aj)(kr.c.actions.playHistoryFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Wv({payload:e}){try{const[t,r,n]=yield(0,Ym.Q7)([(0,Ym.MN)(Hv,e,gy.WW.Movie),(0,Ym.MN)(Hv,e,gy.WW.Show),(0,Ym.MN)(Hv,e,gy.WW.Artist)]);yield(0,Ym.Aj)(Ar.c.actions.topPlayedFetchSucceeded({moviesStatistics:t,tvStatistics:r,musicStatistics:n}))}catch(e){yield(0,Ym.Aj)(Ar.c.actions.topPlayedFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Bv(e){return yield(0,Ym.MN)(Ts.c.get,"/statistics/media",{server:e.server,params:{timespan:e.timespan,"at>":e.after}})}function*Hv(e,t){var r;const n=yield(0,Ym.MN)(Ts.c.get,"/library/all/top",{server:e.server,params:{accountID:e.accountID,type:Ze.GG(t).id,"viewedAt>":e.viewedAt,limit:e.limit}}),{metadataItems:i}=(0,Lv.c)({server:e.server,data:null!=(r=n.data.MediaContainer.Metadata)?r:[],container:n.data.MediaContainer});return i}function*zv(){for(;;){const e=yield(0,Ym.y0)(Dr.c.actions.bandwidthFetchRequested,Uv);yield(0,Ym.UH)([Dr.c.actions.reset,Dr.c.actions.bandwidthAbortRequested]),yield(0,Ym.qG)(e)}}function*Gv(){for(;;){const e=yield(0,Ym.y0)(xr.c.actions.resourcesFetchRequested,Fv);yield(0,Ym.UH)(xr.c.actions.reset),yield(0,Ym.qG)(e)}}function*qv(){for(;;){const e=yield(0,Ym.t9)(Rr.c.actions.topUsersFetchRequested,Vv);yield(0,Ym.UH)(Rr.c.actions.reset),yield(0,Ym.qG)(e)}}function*Kv(){for(;;){const e=yield(0,Ym.t9)(kr.c.actions.playHistoryFetchRequested,_v);yield(0,Ym.UH)(kr.c.actions.reset),yield(0,Ym.qG)(e)}}function*Qv(){for(;;){const e=yield(0,Ym.t9)(Ar.c.actions.topPlayedFetchRequested,Wv);yield(0,Ym.UH)(Ar.c.actions.reset),yield(0,Ym.qG)(e)}}function*$v(){yield(0,Ym.Q7)([(0,Ym.eG)(zv),(0,Ym.eG)(Gv),(0,Ym.eG)(qv),(0,Ym.eG)(Kv),(0,Ym.eG)(Qv)])}var Yv=r(70068),Xv=r(41260),Jv=r(26780),Zv=r(34328),eb=r(11096),tb=r(67532),rb=r(5396),nb=r(99356),ib=Object.defineProperty,sb=Object.defineProperties,ab=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,cb=Object.prototype.hasOwnProperty,lb=Object.prototype.propertyIsEnumerable,db=(e,t,r)=>t in e?ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ub=(e,t)=>{for(var r in t||(t={}))cb.call(t,r)&&db(e,r,t[r]);if(ob)for(var r of ob(t))lb.call(t,r)&&db(e,r,t[r]);return e},pb=(e,t)=>sb(e,ab(t)),mb=(e,t)=>{var r={};for(var n in e)cb.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ob)for(var n of ob(e))t.indexOf(n)<0&&lb.call(e,n)&&(r[n]=e[n]);return r};function hb(e){return"relatedAlbums"===e.hubIdentifier&&e.size>1?tb.y.WideShelf:e.style}function yb({server:e,provider:t,user:r,contentDirectoryID:n,pinnedContentDirectoryID:i,excludedHubIdentifiers:s,data:a}){var o;const c=null!=(o=null==a?void 0:a.MediaContainer)?o:{},l=c,{Hub:d=[]}=l,u=mb(l,["Hub"]),p=function({hubResponse:e,contentDirectoryID:t,provider:r,user:n}){var i;const s=-1!==(null==(i=null==n?void 0:n.features)?void 0:i.findIndex((e=>e.uuid===za.eK)));return ni._u(null==r?void 0:r.identifier,ni.Im)&&(null==t?void 0:t.includes(hi.qU))&&s&&e.splice(1,0,{hubIdentifier:Xv.G.StreamingServicesUpsell,style:tb.y.Upsell,size:0,more:!1,random:!0,title:"",type:tb.a.Mixed}),e}({hubResponse:d,contentDirectoryID:n,provider:t,user:r});return p.reduce(((r,a)=>{var o,l,d;if((null==s?void 0:s.length)&&(null==s?void 0:s.some((e=>e===a.hubIdentifier))))return r;const p=a.key?S.c.join(a.key,{contentDirectoryID:null==n?void 0:n.join(","),pinnedContentDirectoryID:null==i?void 0:i.join(",")}):void 0,m=null!=(o=a.source)?o:(0,tm.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:null==t?void 0:t.identifier}),h=p?`${m}${p}`:`${m}/${a.hubIdentifier}`;let y=a.totalSize;null==y&&(y=a.more?void 0:a.size);const g=function(e,t){if(null==t?void 0:t.DisplayFields)return t;const r=(0,rb.c)(e.type);if(!r)return t;const n=(0,nb.Q)(e.type);return e.style===tb.y.Shelf&&e.hubIdentifier&&e.hubIdentifier.startsWith("external.")&&n.push(eb.Mv.SourceTitle),pb(ub({},t),{DisplayFields:[{type:r,subtype:e.subtype,fields:n}]})}(a,a.Meta||c.Meta);r.hubs.push({source:m,sourceURI:h,key:p,isStale:!1,initialSize:a.size,style:hb(a),attribution:a.attribution,autoAdvanceDelayMs:a.autoAdvanceDelayMs,badgeTitle:a.badgeTitle,context:a.context,hubIdentifier:a.hubIdentifier,Meta:g,more:a.more,placeholder:a.placeholder,placeholderIndexes:a.placeholderIndexes,random:a.random,subtype:a.subtype,title:a.title,type:a.type});const f=null!=(d=null!=(l=a.Metadata)?l:a.Directory)?d:[],{metadataItems:v,metadataItemStates:b}=(0,Lv.c)({server:e,provider:t,data:f,container:u});return r.metadataLists.push({sourceURI:h,items:v,totalSize:y,offset:0,isPending:!1,isPopulated:!0,error:null,title:a.title,meta:g,isPaginated:!0}),Object.assign(r.metadataItemStates,b),r}),{slug:u.slug,title:u.title,meta:u.Meta,hubs:[],metadataLists:[],metadataItemStates:{}})}var gb=Object.defineProperty,fb=Object.defineProperties,vb=Object.getOwnPropertyDescriptors,bb=Object.getOwnPropertySymbols,Sb=Object.prototype.hasOwnProperty,Pb=Object.prototype.propertyIsEnumerable,Ib=(e,t,r)=>t in e?gb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Eb=(e,t)=>{for(var r in t||(t={}))Sb.call(t,r)&&Ib(e,r,t[r]);if(bb)for(var r of bb(t))Pb.call(t,r)&&Ib(e,r,t[r]);return e},wb=(e,t)=>fb(e,vb(t));function*Cb({payload:e}){const{server:t,provider:r,sourceURI:n,metadataListSourceURI:i,params:s}=e;n!==i&&(yield(0,Ym.Aj)(dr.c.actions.added({metadataLists:[{sourceURI:n,items:[],offset:0}],metadataItemStates:{}}))),yield(0,Ym.Aj)(dr.c.actions.fetchRangeRequested({server:t,provider:r,sourceURI:n,params:wb(Eb({},s),{includeAdvanced:1,includeMeta:1}),startIndex:0,size:50}))}function*Ob({payload:e}){const{server:t,provider:r,contentDirectory:n,sourceURI:i}=e,{key:s}=(0,yy.c)(i);try{const e=yield(0,rh.c)((0,Zv.c)(za.gP)),a=yield(0,rh.c)((0,Zv.c)(za.Go)),o=ni._u(r.identifier,ni.Im)&&e||ni._u(r.identifier,[ni.$9,ni._0])&&a,c=yield(0,Ym.MN)(Ts.c.get,s,{server:t,provider:r,params:{count:Jv.kH,includeLibraryPlaylists:1,includeStations:1,includeRecentChannels:1,includeMeta:1,includeExternalMetadata:1,excludeFields:"summary"},providerVersionOverride:o?"7.0":void 0}),l=yb({server:t,provider:r,user:yield(0,rh.c)(Yv.c),contentDirectoryID:n?[n.id]:void 0,data:c.data,excludedHubIdentifiers:"/hubs/sections/home"===s&&ni._u(r.identifier,ni.Im)?[]:[Xv.G.StreamingServicesUpsell]});yield(0,Ym.Q7)([(0,Ym.Aj)(dr.c.actions.added({metadataLists:l.metadataLists,metadataItemStates:l.metadataItemStates})),(0,Ym.Aj)(Lr.c.actions.fetchHubsSucceeded({sourceURI:i,data:l}))])}catch(e){yield(0,Ym.Aj)(Lr.c.actions.fetchHubsFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*Mb(){yield(0,Ym.oL)(6e4),yield(0,Ym.Aj)(Lr.c.actions.markHubsStale())}function*Tb({payload:e}){const{server:t,provider:r,filter:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,n.key,{server:t,provider:r}),i=Yf(n,e.data.MediaContainer.Directory);yield(0,Ym.Aj)(Lr.c.actions.fetchFilterOptionsSucceeded({filter:n,filterOptions:i}))}catch(e){yield(0,Ym.Aj)(Lr.c.actions.fetchFilterOptionsFailed({filter:n,error:Ts.c.toPlainErrorObject(e)}))}}function*Db({payload:e}){var t;const{server:r,provider:n,key:i}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,i,{server:r,provider:n});yield(0,Ym.Aj)(Lr.c.actions.fetchFirstCharactersSucceeded({key:i,firstCharacters:null!=(t=e.data.MediaContainer.Directory)?t:[]}))}catch(e){yield(0,Ym.Aj)(Lr.c.actions.fetchFirstCharactersFailed({key:i,error:Ts.c.toPlainErrorObject(e)}))}}function*kb(){for(;;){const e=yield(0,Ym.t9)(Lr.c.actions.initializeListRequested,Cb);yield(0,Ym.UH)(Lr.c.actions.reset),yield(0,Ym.qG)(e)}}function*xb(){for(;;){const e=yield(0,Ym.y0)(Lr.c.actions.fetchHubsRequested,Ob);yield(0,Ym.UH)([Lr.c.actions.reset,Lr.c.actions.resetHubs,Lr.c.actions.markHubsStaleRequested]),yield(0,Ym.qG)(e)}}function*Ab(){for(;;){yield(0,Ym.UH)(Lr.c.actions.markHubsStaleRequested);const e=yield(0,Ym.MN)(Mb);yield(0,Ym.UH)(Lr.c.actions.markHubsStaleCanceled),yield(0,Ym.qG)(e)}}function*Rb(){for(;;){const e=yield(0,Ym.t9)(Lr.c.actions.fetchFilterOptionsRequested,Tb);yield(0,Ym.UH)(Lr.c.actions.reset),yield(0,Ym.qG)(e)}}function*Nb(){for(;;){const e=yield(0,Ym.t9)(Lr.c.actions.fetchFirstCharactersRequested,Db);yield(0,Ym.UH)(Lr.c.actions.reset),yield(0,Ym.qG)(e)}}function*Lb(){yield(0,Ym.Q7)([(0,Ym.eG)(kb),(0,Ym.eG)(xb),(0,Ym.eG)(Ab),(0,Ym.eG)(Rb),(0,Ym.eG)(Nb)])}var jb=r(66308),Ub=r(12488),Fb=r(33808);const Vb=(0,Ub.c)((0,Ga.M3)(Fb.c,(e=>e.embeddedServer),((e,t)=>{const r=e[t];return(0,Xl.c)(r)})),(e=>e));var _b=r(1156),Wb=Object.defineProperty,Bb=Object.defineProperties,Hb=Object.getOwnPropertyDescriptors,zb=Object.getOwnPropertySymbols,Gb=Object.prototype.hasOwnProperty,qb=Object.prototype.propertyIsEnumerable,Kb=(e,t,r)=>t in e?Wb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qb=(e,t)=>{for(var r in t||(t={}))Gb.call(t,r)&&Kb(e,r,t[r]);if(zb)for(var r of zb(t))qb.call(t,r)&&Kb(e,r,t[r]);return e},$b=(e,t)=>Bb(e,Hb(t));function*Yb({payload:e}){yield(0,Ym.MN)(nS,[e.metadataItem])}function*Xb({payload:e}){const t=e.metadataLists.reduce(((e,{items:t})=>e.concat(t)),[]);yield(0,Ym.MN)(nS,t)}function*Jb({payload:e}){yield(0,Ym.MN)(nS,e.data.items)}function*Zb({payload:e}){var t,r;const{sourceURI:n,guid:i,useSelected:s}=e;try{const e=yield(0,rh.c)(Vb),{providerIdentifier:a,serverIdentifier:o,ratingKey:c}=(0,yy.c)(n),l=(0,tm.c)({serverIdentifier:o,providerIdentifier:a});if(!c||!l)throw new Error("Unable to create a subscription for this item");yield(0,Ym.MN)(Ts.c.post,"media/providers",{server:e,params:{url:l}});const d=(null==(r=null==(t=(yield(0,Ym.MN)(Ts.c.get,"media/subscriptions/template",{server:e,params:{source:l,ratingKey:c,guid:i}})).data.MediaContainer.SubscriptionTemplate)?void 0:t[0])?void 0:r.MediaSubscription)||[],u=s?d.find((({selected:e})=>e)):d[0];if(!u)throw new Error("Unable to create a subscription for this item");u.Setting.some((({hidden:e})=>!e))?yield(0,Ym.Aj)(jr.c.actions.subscriptionTemplateChanged({sourceURI:n,template:u})):yield(0,Ym.Aj)(jr.c.actions.subscriptionCreateRequested({sourceURI:n,template:u}))}catch(e){yield(0,Ym.Aj)(jr.c.actions.subscriptionCreateFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*eS({payload:e}){var t,r,n;const{sourceURI:i,template:{type:s,targetLibrarySectionID:a,parameters:o,Setting:c},settings:l={}}=e;try{const e=yield(0,rh.c)(Vb),d={};for(const{id:e,value:r}of c)d[e]="oneShot"===e?"false":null!=(t=l[e])?t:r;const u=S.c.parseParams(o),p=null==(n=null==(r=(yield(0,Ym.MN)(Ts.c.post,"media/subscriptions",{server:e,params:$b(Qb({},u),{type:s,targetLibrarySectionID:a,prefs:d})})).data.MediaContainer)?void 0:r.MediaSubscription)?void 0:n[0].key;if(!p)throw new Error("The new subscription did not contain an identifier");yield(0,Ym.Aj)(jr.c.actions.subscriptionCreateSucceeded({id:p,sourceURI:i,type:s}))}catch(e){yield(0,Ym.Aj)(jr.c.actions.subscriptionCreateFailed({sourceURI:i,error:Ts.c.toPlainErrorObject(e)}))}}function*tS({payload:e}){const{id:t,sourceURI:r}=e;try{const e=yield(0,rh.c)(Vb);yield(0,Ym.MN)(Ts.c.del,S.c.join(["media/subscriptions",t]),{server:e}),yield(0,Ym.Aj)(jr.c.actions.subscriptionDeleteSucceeded({sourceURI:r}))}catch(e){yield(0,Ym.Aj)(jr.c.actions.subscriptionDeleteFailed({sourceURI:r,error:Ts.c.toPlainErrorObject(e)}))}}function*rS({payload:e}){const{type:t,Context:r}=e.activity;if(!(null==r?void 0:r.source)||t!==jb.ay)return;const{ratingKey:n,source:i}=r,{serverIdentifier:s,providerIdentifier:a}=(0,yy.c)(i),o=(0,tm.c)({serverIdentifier:s,providerIdentifier:a,key:`/library/metadata/${n}`});try{yield(0,Ym.Aj)(lr.c.actions.repopulateRequested({sourceURI:o}))}catch(e){yield(0,Ym.Aj)(jr.c.actions.subscriptionCreateFailed({sourceURI:o,error:Ts.c.toPlainErrorObject(e)}))}}function*nS(e){try{const n=yield(0,rh.c)(Vb),i=((yield(0,Ym.MN)(Ts.c.get,"media/providers",{server:n,params:{includeStorage:1}})).data.MediaContainer.MediaProvider||[]).map((e=>({id:String(e.id),source:e.source})));yield(0,Ym.Aj)(jr.c.actions.providersFetchSucceeded({providerSections:i}));const s={};for(const{source:e,id:t}of i)e&&(s[e]=t);const a={};e.forEach((e=>{a[e.source]?a[e.source].push(e):a[e.source]=[e]}));const o=[];for(const[e,i]of Object.entries(a)){const a=s[e];if(!a)break;const c={},l=[];for(const e of i)l.push(e.ratingKey),c[e.ratingKey]=e;const d=l.join(","),u=S.c.join(["media/providers",a,"media/subscriptions/mapping",d]),p=(yield(0,Ym.MN)(Ts.c.get,u,{server:n,params:{includeStorage:1}})).data.MediaContainer.MediaSubscription||[];for(const{id:e,itemRatingKey:n,type:i}of p){const s=c[n];o.push({id:e,sourceURI:s.sourceURI,subscription:_b.c.Saved,type:i,relation:(t=i,r=(0,Ch.c)(s.type),t===r?_b.C.Self:t<r?_b.C.Ancestors:_b.C.Descendants),progress:100})}}yield(0,Ym.Aj)(jr.c.actions.downloadsFetchSucceeded({items:e,downloads:o}))}catch(e){yield(0,Ym.Aj)(jr.c.actions.downloadsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}var t,r}function*iS(){yield(0,Ym.UT)(Qr.c.actions.metadataItemFetchSucceeded,Yb)}function*sS(){yield(0,Ym.UT)(dr.c.actions.added,Xb)}function*aS(){yield(0,Ym.UT)(dr.c.actions.repopulateRangeSucceeded,Jb)}function*oS(){yield(0,Ym.UT)(dr.c.actions.fetchRangeSucceeded,Jb)}function*cS(){yield(0,Ym.UT)(dr.c.actions.fetchAllSucceeded,Jb)}function*lS(){yield(0,Ym.y0)(jr.c.actions.subscriptionTemplatesFetchRequested,Zb)}function*dS(){yield(0,Ym.y0)(jr.c.actions.subscriptionCreateRequested,eS)}function*uS(){yield(0,Ym.y0)(jr.c.actions.subscriptionDeleteRequested,tS)}function*pS(){yield(0,Ym.UT)(mr.c.actions.activityFinished,rS)}function*mS(){yield(0,Ym.Q7)(se.c.allowSyncDownload?[(0,Ym.eG)(iS),(0,Ym.eG)(sS),(0,Ym.eG)(oS),(0,Ym.eG)(cS),(0,Ym.eG)(aS),(0,Ym.eG)(lS),(0,Ym.eG)(dS),(0,Ym.eG)(uS),(0,Ym.eG)(pS)]:[])}var hS=r(44100),yS=r(13519),gS=r(54436),fS=r(67732),vS=r(14132),bS=r(93172),SS=Object.defineProperty,PS=Object.defineProperties,IS=Object.getOwnPropertyDescriptors,ES=Object.getOwnPropertySymbols,wS=Object.prototype.hasOwnProperty,CS=Object.prototype.propertyIsEnumerable,OS=(e,t,r)=>t in e?SS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,MS=(e,t)=>{for(var r in t||(t={}))wS.call(t,r)&&OS(e,r,t[r]);if(ES)for(var r of ES(t))CS.call(t,r)&&OS(e,r,t[r]);return e},TS=(e,t)=>PS(e,IS(t));function DS(e){return(null!=e?e:[]).map((e=>e.enabled?((0,mg.op)(e,"enabled"),e):TS(MS({},e),{enabled:!!e.lineupIdentifier})))}var kS=r(40376),xS=r(3852);function AS(e){var t,r;const n=pg()(e);return(0,mg.aq)(n,"key"),(0,mg.aq)(n,"source"),(0,mg.cX)(n,"tuners"),n.sources=null==(r=null==(t=e.sources)?void 0:t.split(","))?void 0:r.map((e=>{const t=(0,kS.es)(bS.Gw).find((t=>t===e));return(0,xS.c)(t,`Unknown Media Grabber Device Source Type ${e}`),t})),n.ChannelMapping=DS(n.ChannelMapping),n}function RS({data:e}){var t;return(null!=(t=e.Device)?t:[]).map(AS)}function NS({data:e}){var t,r;const n=null==(t=e.Dvr)?void 0:t[0];if(!n)return;const i=pg()(n);return(0,mg.aq)(i,"key"),i.Device=null==(r=null==n?void 0:n.Device)?void 0:r.map(AS),i}var LS=Object.defineProperty,jS=Object.getOwnPropertySymbols,US=Object.prototype.hasOwnProperty,FS=Object.prototype.propertyIsEnumerable,VS=(e,t,r)=>t in e?LS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_S=(e,t)=>{for(var r in t||(t={}))US.call(t,r)&&VS(e,r,t[r]);if(jS)for(var r of jS(t))FS.call(t,r)&&VS(e,r,t[r]);return e};function*WS({payload:e}){var t;const{server:r}=e;try{const e=yield(0,Ym.MN)(Ts.c.post,"/media/grabbers/devices/discover",{server:r,timeout:0});yield(0,Ym.Aj)(Ur.cp.actions.devicesDiscoverSucceeded({server:r,data:RS({server:r,data:null==(t=e.data)?void 0:t.MediaContainer})}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(0,He.c)("There was a problem discovering devices")})),yield(0,Ym.Aj)(Ur.cp.actions.devicesDiscoverFailed({server:r,error:Ts.c.toPlainErrorObject(e)}))}}function*BS({payload:e}){var t;const{server:r}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/media/grabbers/devices",{server:r});yield(0,Ym.Aj)(Ur.cp.actions.devicesFetchSucceeded({server:r,data:RS({server:r,data:null==(t=e.data)?void 0:t.MediaContainer})}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.devicesFetchFailed({server:r,error:Ts.c.toPlainErrorObject(e)}))}}function*HS({payload:e}){var t,r;const{server:n,deviceKey:i}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,S.c.join(["/media/grabbers/devices",i,"channels"]),{server:n});yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelsFetchSucceeded({server:n,deviceKey:i,data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.DeviceChannel)?r:[]}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(0,He.c)("There was a problem getting the channels for your device")})),yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelsFetchFailed({deviceKey:i,error:Ts.c.toPlainErrorObject(e)}))}}function*zS({payload:e}){var t,r;const{server:n,deviceKey:i,source:s,prefs:a,network:o,country:c}=e;try{const e=yield(0,Ym.MN)(Ts.c.post,S.c.join(["/media/grabbers/devices",i,"scan"]),{server:n,params:{source:s,prefs:a,network:o,country:c}});if(e.headers["x-plex-activity"])yield(0,Ym.Aj)(Ur.cp.actions.scanPrefsAndNetworksReset());else{const r=kg({server:n,data:null==(t=e.data)?void 0:t.MediaContainer});(null==r?void 0:r.length)&&(yield(0,Ym.Aj)(Ur.cp.actions.scanPrefsAdded({settings:r})))}}catch(e){const t=Ts.c.toPlainErrorObject(e);yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:null!=(r=null==t?void 0:t.message)?r:(0,He.c)("There was a problem scanning channels")})),yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelsScanFailed())}}function*GS({payload:e}){const{server:t,deviceKey:r}=e;try{yield(0,Ym.MN)(Ts.c.del,S.c.join(["/media/grabbers/devices",r,"scan"]),{server:t})}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(0,He.c)("There was a problem canceling the current channel scan")})),yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelsCancelScanFailed())}}function*qS({payload:e}){var t,r,n;const{server:i,deviceKey:s,mappings:a}=e;try{const e=yield(0,Ym.Ml)((0,yS.c)(s)),t=[],r={};Object.values(a).forEach((({key:n,channelKey:i,lineupIdentifier:s,enabled:a})=>{const o=e.channels.find((e=>e.identifier===n)),c=null==o?void 0:o.drm;a&&i&&s&&!c&&(t.push(n),r[`channelMappingByKey[${n}]`]=i,r[`channelMapping[${n}]`]=s)})),yield(0,Ym.MN)(Ts.c.put,S.c.join(["/media/grabbers/devices",s,"channelmap"]),{server:i,params:_S({channelsEnabled:t.toString()},r)}),yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelMappingsSaveSucceeded())}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelMappingsSaveFailed({error:Ts.c.toPlainErrorObject(e)})),yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(null==(n=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.MediaContainer)?void 0:n.message)||(0,He.c)("There was a problem saving channel mappings. Please try again.")}))}}function*KS({payload:e}){const{server:t,deviceKey:r,enabled:n,title:i}=e;try{yield(0,Ym.MN)(Ts.c.put,S.c.join(["/media/grabbers/devices",r]),{server:t,params:{title:i,enabled:n?1:0}}),yield(0,Ym.Aj)(Ur.cp.actions.deviceEnableSucceeded({deviceKey:r,enabled:n}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.deviceEnableFailed())}}function*QS({payload:e}){var t;const{server:r,uri:n}=e;let i=(0,He.c)("There was a problem adding the device: {1}",n);try{const e=RS({server:r,data:null==(t=(yield(0,Ym.MN)(Ts.c.post,"/media/grabbers/tv.plex.grabbers.hdhomerun/devices",{server:r,params:{uri:n}})).data)?void 0:t.MediaContainer});if(0===e.length)throw i=(0,He.c)("No device found at {1}",n),new Error;yield(0,Ym.Aj)(Ur.cp.actions.deviceAddSucceeded({server:r,data:e[0]}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:i})),yield(0,Ym.Aj)(Ur.cp.actions.deviceAddFailed({server:r,error:Ts.c.toPlainErrorObject(e)}))}}function*$S({payload:e}){var t;const{server:r,dvrID:n}=e;try{const e=n?S.c.join(["/livetv/dvrs",n]):"/livetv/dvrs",i=yield(0,Ym.MN)(Ts.c.get,e,{server:r});yield(0,Ym.Aj)(Ur.cp.actions.dvrFetchSucceeded({dvr:NS({server:r,data:null==(t=i.data)?void 0:t.MediaContainer})}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.dvrFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*YS({payload:e}){var t;const{server:r,device:n,channelMappings:i}=e,s=yield(0,Ym.Ml)(vS.c);try{const{success:e,failure:a}=yield(0,Ym.MN)(tP,r,n.key,i,s);if(a)throw new Error;if(e){const{selectedCountry:e,selectedLanguage:i,postalCode:a=""}=yield(0,Ym.Ml)(fS.c),o=yield(0,Ym.MN)(Ts.c.post,"/livetv/dvrs",{server:r,params:{device:n.uuid,lineup:null==s?void 0:s.map((e=>e.uuid)),language:null==i?void 0:i.code,country:null==e?void 0:e.code,postalCode:a}});yield(0,Ym.Aj)(Ur.cp.actions.dvrSaveSucceeded({activityUUID:o.headers["x-plex-activity"],dvr:NS({server:r,data:null==(t=o.data)?void 0:t.MediaContainer})})),yield(0,Ym.Aj)(Ur.cp.actions.devicesFetchRequested({server:r})),yield(0,jh.c)((0,hS.Ax)({serverEntityID:r.entityID}))}}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(0,He.c)("There was a problem saving your DVR. Please try again.")})),yield(0,Ym.Aj)(Ur.cp.actions.dvrSaveFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*XS({payload:e}){const{server:t,dvrID:r}=e;try{yield(0,Ym.MN)(Ts.c.del,S.c.join(["/livetv/dvrs",r]),{server:t,timeout:0}),yield(0,Ym.Aj)(Ur.cp.actions.dvrDeleteSucceeded())}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem removing your DVR")))}}function*JS({payload:e}){var t,r,n,i;const{server:s,dvrID:a,deviceKey:o,channelMappings:c}=e,l=yield(0,Ym.Ml)(vS.c);try{const{success:e,failure:r}=yield(0,Ym.MN)(tP,s,o,c,l);if(r)throw new Error;if(e){yield(0,Ym.MN)(eP,s,a,l);const e=yield(0,Ym.MN)(Ts.c.put,S.c.join(["/livetv/dvrs",a,"devices",o]),{server:s});yield(0,Ym.Aj)(Ur.cp.actions.addDVRDeviceSucceeded({activityUUID:e.headers["x-plex-activity"],dvr:NS({server:s,data:null==(t=e.data)?void 0:t.MediaContainer})})),yield(0,Ym.Aj)(Ur.cp.actions.devicesFetchRequested({server:s})),yield(0,jh.c)((0,hS.Ax)({serverEntityID:s.entityID}))}}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(null==(i=null==(n=null==(r=e.response)?void 0:r.data)?void 0:n.MediaContainer)?void 0:i.message)||(0,He.c)("There was a problem adding a new device to your DVR. Please try again.")})),yield(0,Ym.Aj)(Ur.cp.actions.addDVRDeviceFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*ZS({payload:e}){const{server:t,dvrID:r,deviceKey:n}=e;try{yield(0,Ym.MN)(Ts.c.del,S.c.join(["/livetv/dvrs",r,"devices",n]),{server:t}),yield(0,Ym.Aj)(Ur.cp.actions.removeDVRDeviceSucceeded({deviceKey:n}))}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem removing a DVR device"))),yield(0,Ym.Aj)(Ur.cp.actions.removeDVRDeviceFailed())}}function*eP(e,t,r){var n;const{selectedDVR:i}=yield(0,Ym.Ml)(gS.c);let s=r;(null==(n=i.dvr)?void 0:n.Lineup)&&(s=s.filter((e=>{var t,r;return!(null==(r=null==(t=i.dvr)?void 0:t.Lineup)?void 0:r.find((t=>t.id===e.uuid)))}))),yield(0,Ym.Q7)(s.map((r=>(0,Ym.MN)(Ts.c.put,S.c.join(["/livetv/dvrs",t,"lineups"]),{server:e,params:{lineup:r.uuid}}))))}function*tP(e,t,r,n){var i;return yield(0,Ym.Aj)(Ur.cp.actions.deviceChannelMappingsSaveRequested({server:e,deviceKey:t,mappings:r})),yield(0,Ym.Aj)(Ur.cp.actions.deviceEnableRequested({server:e,deviceKey:t,enabled:!0,title:null==(i=null==n?void 0:n[0])?void 0:i.title})),yield(0,Ym.ue)({success:(0,Ym.Q7)([(0,Ym.UH)(Ur.cp.actions.deviceChannelMappingsSaveSucceeded),(0,Ym.UH)(Ur.cp.actions.deviceEnableSucceeded)]),failure:(0,Ym.ue)([(0,Ym.UH)(Ur.cp.actions.deviceChannelMappingsSaveFailed),(0,Ym.UH)(Ur.cp.actions.deviceEnableFailed)])})}function*rP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.devicesDiscoverRequested,WS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*nP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.devicesFetchRequested,BS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*iP(){for(;;){const e=yield Uh(Ur.cp.actions.deviceChannelsFetchRequested,HS,(({payload:e})=>e.deviceKey));yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*sP(){for(;;){const e=yield Uh(Ur.cp.actions.deviceChannelsScanRequested,zS,(({payload:e})=>e.deviceKey));yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*aP(){for(;;){const e=yield Uh(Ur.cp.actions.deviceChannelsCancelScanRequested,GS,(({payload:e})=>e.deviceKey));yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*oP(){for(;;){const e=yield Uh(Ur.cp.actions.deviceChannelMappingsSaveRequested,qS,(({payload:e})=>e.deviceKey));yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*cP(){for(;;){const e=yield Uh(Ur.cp.actions.deviceEnableRequested,KS,(({payload:e})=>e.deviceKey));yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*lP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.dvrFetchRequested,$S);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*dP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.deviceAddRequested,QS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*uP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.dvrSaveRequested,YS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*pP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.dvrDeleteRequested,XS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*mP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.addDVRDeviceRequested,JS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*hP(){for(;;){const e=yield(0,Ym.t9)(Ur.cp.actions.removeDVRDeviceRequested,ZS);yield(0,Ym.UH)(Ur.cp.actions.reset),yield(0,Ym.qG)(e)}}function*yP(){yield(0,Ym.Q7)([(0,Ym.eG)(rP),(0,Ym.eG)(nP),(0,Ym.eG)(iP),(0,Ym.eG)(sP),(0,Ym.eG)(aP),(0,Ym.eG)(oP),(0,Ym.eG)(cP),(0,Ym.eG)(dP),(0,Ym.eG)(lP),(0,Ym.eG)(uP),(0,Ym.eG)(pP),(0,Ym.eG)(mP),(0,Ym.eG)(hP)])}var gP=Object.defineProperty,fP=Object.defineProperties,vP=Object.getOwnPropertyDescriptors,bP=Object.getOwnPropertySymbols,SP=Object.prototype.hasOwnProperty,PP=Object.prototype.propertyIsEnumerable,IP=(e,t,r)=>t in e?gP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EP=(e,t)=>{for(var r in t||(t={}))SP.call(t,r)&&IP(e,r,t[r]);if(bP)for(var r of bP(t))PP.call(t,r)&&IP(e,r,t[r]);return e},wP=(e,t)=>fP(e,vP(t));function*CP({payload:e}){var t,r,n;const{server:i,device:s,lineups:a}=e,o=a.map((e=>e.uuid));try{const e=yield(0,Ym.MN)(RP,i,o),t=DS((yield(0,Ym.MN)(Ts.c.get,"/livetv/epg/channelmap",{server:i,params:{device:s.uuid,lineup:o}})).data.MediaContainer.ChannelMapping);yield(0,Ym.Aj)(Fr.cp.actions.channelMappingsFetchSucceeded({channelMappings:t,lineupChannels:e}))}catch(e){yield(0,Ym.Aj)(Fr.cp.actions.channelMappingsFetchFailed({error:Ts.c.toPlainErrorObject(e)}));let i=(0,He.c)("There was a problem fetching channel mappings. Please try again later.");(null==(n=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.MediaContainer)?void 0:n.message)&&(i=e.response.data.MediaContainer.message),yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:i}))}}function*OP({payload:e}){const{server:t,device:r,lineupGroup:n}=e;try{yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageRemoved());const e=yield(0,Ym.MN)(Ts.c.get,S.c.join("/livetv/epg/lineup",{device:r.uuid,lineupGroup:n.uuid}),{server:t});yield(0,Ym.Aj)(Fr.cp.actions.bestEPGLineupSearchSucceeded({lineupGroup:n,data:e.headers["x-plex-activity"]}))}catch(e){yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(0,He.c)("There was a problem mapping channels")}))}}function*MP({payload:e}){var t,r;const{server:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/livetv/epg/countries",{server:n});yield(0,Ym.Aj)(Fr.cp.actions.epgCountriesFetchSucceeded({server:n,data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Country)?r:[]}))}catch(e){yield(0,Ym.Aj)(Fr.cp.actions.epgCountriesFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*TP({payload:e}){var t,r;const{server:n,country:i}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,S.c.join(["/livetv/epg/countries",i.key,"regions"]),{server:n});yield(0,Ym.Aj)(Fr.cp.actions.epgCountryRegionsFetchSucceeded({data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Region)?r:[]}))}catch(e){yield(0,Ym.Aj)(Fr.cp.actions.epgCountryRegionsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*DP({payload:e}){var t,r;const{server:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/livetv/epg/languages",{server:n});yield(0,Ym.Aj)(Fr.cp.actions.epgLanguagesFetchSucceeded({data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Language)?r:[]}))}catch(e){yield(0,Ym.Aj)(Fr.cp.actions.epgLanguagesFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*kP({payload:e}){var t,r;const{server:n,country:i,region:s,postalCode:a}=e,o=["/livetv/epg/countries",i.key],c={};i.flavor===bS.mB.Regions&&s?o.push(s.key):c.postalCode=a;const l=S.c.join(o,c);try{const e=yield(0,Ym.MN)(Ts.c.get,l,{server:n}),{MediaContainer:i}=e.data;yield(0,Ym.Aj)(Fr.cp.actions.epgLineupGroupFetchSucceeded({data:{uuid:null!=(t=null==i?void 0:i.uuid)?t:"",epgLineups:null!=(r=null==i?void 0:i.Lineup)?r:[]}}))}catch(e){yield(0,Ym.Aj)(Fr.cp.actions.epgLineupGroupFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*xP({payload:e}){(yield(0,Ym.Ml)(fS.c)).selectedLineupGroups.find((t=>t.uuid===e.lineupGroup.uuid))?yield(0,Ym.Aj)(Ur.cp.actions.setupErrorMessageAdded({message:(0,He.c)("It looks like you have already set up a lineup for this location.")})):yield(0,Ym.Aj)(Fr.cp.actions.selectedEPGLineupGroupAddSucceeded({lineupGroup:e.lineupGroup}))}function*AP({payload:e}){var t;const{server:r}=e;try{const{selectedDVR:e}=yield(0,Ym.Ml)(gS.c);if(!(null==(t=null==e?void 0:e.dvr)?void 0:t.Lineup))throw new Error("No available DVR lineups to fetch");const n=e.dvr.Lineup.map((e=>e.id)),i=yield(0,Ym.MN)(RP,r,n);yield(0,Ym.Aj)(Fr.cp.actions.selectedDVRLineupChannelsFetchSucceeded({lineupChannels:i}))}catch(e){yield(0,Ym.Aj)(Fr.cp.actions.selectedDVRLineupChannelsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*RP(e,t){return function({data:e}){var t;const r=null!=(t=e.Lineup)?t:[];return r.forEach((e=>{var t;e.Channel=null==(t=e.Channel)?void 0:t.map((t=>wP(EP({},t),{lineupUUID:e.uuid})))})),r}({server:e,data:(yield(0,Ym.MN)(Ts.c.get,"/livetv/epg/lineupchannels",{server:e,params:{lineup:t}})).data.MediaContainer})}function*NP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.channelMappingsFetchRequested,CP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*LP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.bestEPGLineupSearchRequested,OP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*jP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.epgCountriesFetchRequested,MP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*UP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.epgCountryRegionsFetchRequested,TP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*FP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.epgLanguagesFetchRequested,DP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*VP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.epgLineupGroupFetchRequested,kP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*_P(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.selectedEPGLineupGroupAddRequested,xP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*WP(){for(;;){const e=yield(0,Ym.t9)(Fr.cp.actions.selectedDVRLineupChannelsFetchRequested,AP);yield(0,Ym.UH)(Fr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*BP(){yield(0,Ym.Q7)([(0,Ym.eG)(NP),(0,Ym.eG)(LP),(0,Ym.eG)(jP),(0,Ym.eG)(UP),(0,Ym.eG)(FP),(0,Ym.eG)(VP),(0,Ym.eG)(_P),(0,Ym.eG)(WP)])}function*HP(){yield(0,Ym.Q7)([(0,Ym.eG)(yP),(0,Ym.eG)(BP)])}var zP=r(6156);function*GP({payload:e}){const{hubsSources:t,hubsStates:r,userServices:n}=e;yield(0,Ym.Q7)(t.reduce(((e,t)=>{const i=r.find((e=>e.key===t.key));return i&&e.push((0,Ym.MN)(QP,t,i,n)),e}),[]))}function*qP({payload:e}){const{hubsSource:t,userServices:r}=e,{key:n,source:i,contentDirectoryID:s,pinnedContentDirectoryID:a,server:o,provider:c,feature:l}=t;try{if(!o||!c||!(null==l?void 0:l.key))throw new Error("Missing server, provider, or a provider feature with a key that can be used to fetch hubs");if((0,zP.c)(r,l.requires)){const e={contentDirectoryID:s.join(","),pinnedContentDirectoryID:null==a?void 0:a.join(","),includeMeta:1,excludeFields:"summary"};l.type===Mh.Aj.Promoted&&Object.assign(e,{count:Jv.kH,includeStations:1,includeLibraryPlaylists:1,includeRecentChannels:1,excludeContinueWatching:1});const t=yield(0,rh.c)((0,Ja.c)(za.Af)),r=yield(0,rh.c)((0,Ja.c)(za.Go)),i=ni._u(c.identifier,ni.Im)&&t||ni._u(c.identifier,[ni.$9,ni._0])&&r,d=yield(0,Ym.MN)(Ts.c.get,l.key,{server:o,provider:c,params:e,providerVersionOverride:i?"7.0":void 0}),u=[Xv.G.StreamingServicesUpsell];l.type===Mh.Aj.Promoted&&u.push(Xv.G.ContinueWatching,Xv.G.OnDeck);const p=yb({server:o,provider:c,contentDirectoryID:s,pinnedContentDirectoryID:a,excludedHubIdentifiers:u,data:d.data});yield(0,Ym.Q7)([(0,Ym.Aj)(dr.c.actions.added({metadataLists:p.metadataLists,metadataItemStates:p.metadataItemStates})),(0,Ym.Aj)(_r.c.actions.fetchSucceeded({key:n,data:p.hubs}))])}else yield(0,Ym.Aj)(_r.c.actions.fetchSucceeded({key:n,data:[]}))}catch(e){yield(0,Ym.Aj)(_r.c.actions.fetchFailed({key:n,source:i,contentDirectoryID:s,error:Ts.c.toPlainErrorObject(e)}))}}function*KP(){yield(0,Ym.oL)(6e4),yield(0,Ym.Aj)(_r.c.actions.markStale())}function*QP(e,t,r){var n;const{key:i,source:s,contentDirectoryID:a,pinnedContentDirectoryID:o}=e;try{const i=t.isSourceReady&&!t.isListPending&&!t.isListPopulated&&!t.isListError,s=!!t.contentDirectoryID.length&&!(0,gd.c)(t.contentDirectoryID,a),c=!!(null==(n=t.pinnedContentDirectoryID)?void 0:n.length)&&o&&!(0,gd.c)(t.pinnedContentDirectoryID,o);(i||s||c)&&(yield(0,Ym.Aj)(_r.c.actions.fetchRequested({hubsSource:e,userServices:r})))}catch(e){yield(0,Ym.Aj)(_r.c.actions.fetchFailed({key:i,source:s,contentDirectoryID:a,error:Ts.c.toPlainErrorObject(e)}))}}function*$P(){yield(0,Ym.UT)(_r.c.actions.populateAllRequested,GP)}function*YP(){for(;;){const e=yield Zm(_r.c.actions.fetchRequested,qP,(({payload:e})=>e.hubsSource.key));yield(0,Ym.UH)(_r.c.actions.markStaleRequested),yield(0,Ym.qG)(e)}}function*XP(){for(;;)yield(0,Ym.UH)(_r.c.actions.markStaleRequested),yield(0,Ym.ue)({task:(0,Ym.MN)(KP),cancel:(0,Ym.UH)(_r.c.actions.populateAllRequested)})}function*JP(){yield(0,Ym.Q7)([(0,Ym.eG)($P),(0,Ym.eG)(YP),(0,Ym.eG)(XP)])}function*ZP({payload:e}){const{server:t,importAll:r,sectionID:n}=e;try{yield(0,Ym.MN)(Ts.c.put,"/playlists/import/itunes",{server:t,params:{sectionID:n,force:r?1:0}}),yield(0,Ym.Aj)(Wr.c.actions.importSucceeded())}catch(e){yield(0,Ym.Aj)(Wr.c.actions.importFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*eI(){yield(0,Ym.y0)(Wr.c.actions.importRequested.type,ZP)}function*tI(){yield(0,Ym.Q7)([(0,Ym.eG)(eI)])}var rI=r(54560),nI=r(71108),iI=Object.defineProperty,sI=Object.getOwnPropertySymbols,aI=Object.prototype.hasOwnProperty,oI=Object.prototype.propertyIsEnumerable,cI=(e,t,r)=>t in e?iI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lI=(e,t)=>{for(var r in t||(t={}))aI.call(t,r)&&cI(e,r,t[r]);if(sI)for(var r of sI(t))oI.call(t,r)&&cI(e,r,t[r]);return e};const dI="MergedRecentlyAdded";function*uI({payload:e}){var t,r;const{server:n}=e;try{const e=null==(r=null==(t=(yield(0,Ym.MN)(Ts.c.get,":/prefs/get",{server:n,params:{id:dI}})).data.MediaContainer.Setting)?void 0:t[0])?void 0:r.value;yield(0,Ym.Aj)(Br.c.actions.settingsFetchSucceeded({server:n,isMergeRecentlyAddedEnabled:e}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.settingsFetchFailed({server:n,error:Ts.c.toPlainErrorObject(e)}))}}function*pI({payload:e}){const{server:t,sourceURI:r,isMergeRecentlyAddedEnabled:n}=e;try{yield(0,Ym.MN)(Ts.c.put,":/prefs",{server:t,params:{[dI]:n}}),yield(0,Ym.Aj)(Br.c.actions.settingsUpdateSucceeded({server:t,isMergeRecentlyAddedEnabled:n})),yield(0,Ym.Aj)(Br.c.actions.resetHubs({sourceURI:r}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.settingsUpdateFailed({server:t,error:Ts.c.toPlainErrorObject(e)}))}}function*mI({payload:e}){yield(0,Ym.Aj)(_r.c.actions.reset()),yield(0,Ym.Aj)(Lr.c.actions.resetHubs({sourceURI:e.sourceURI}))}function*hI({payload:e}){const{server:t,sourceURI:r}=e;try{const e=yield(0,Ym.MN)(PI,t,r);yield(0,Ym.Aj)(Br.c.actions.hubsFetchSucceeded({sourceURI:r,options:e}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.hubsFetchFailed({sourceURI:r,error:Ts.c.toPlainErrorObject(e)}))}}function*yI({payload:e}){var t;const{server:r,sourceURI:n,options:i,fromIndex:s,toIndex:a}=e;try{const e=i[a].identifier,s=null==(t=i.find(((e,t)=>t===a-1)))?void 0:t.identifier,{key:o}=(0,yy.c)(n);yield(0,Ym.MN)(Ts.c.put,S.c.join([o,e,"move"]),{server:r,params:{after:s}}),yield(0,Ym.Aj)(Br.c.actions.reorderSucceeded({sourceURI:n})),yield(0,Ym.Aj)(Br.c.actions.resetHubs({sourceURI:n}))}catch(e){const t=Array.from(i),[r]=t.splice(a,1);t.splice(s,0,r),yield(0,Ym.Aj)(Br.c.actions.reorderFailed({sourceURI:n,options:t,error:Ts.c.toPlainErrorObject(e)}))}}function*gI({payload:e}){const{server:t,sourceURI:r,options:n,removed:i,index:s}=e;try{const e=i.identifier,{key:n}=(0,yy.c)(r);yield(0,Ym.MN)(Ts.c.del,S.c.join([n,e]),{server:t}),yield(0,Ym.Aj)(Br.c.actions.removeSucceeded({sourceURI:r})),yield(0,Ym.Aj)(Br.c.actions.resetHubs({sourceURI:r}))}catch(e){const t=Array.from(n);t.splice(s,0,i),yield(0,Ym.Aj)(Br.c.actions.removeFailed({sourceURI:r,options:t,error:Ts.c.toPlainErrorObject(e)}))}}function*fI({payload:e}){const{server:t,sourceURI:r}=e;try{const{key:e}=(0,yy.c)(r);yield(0,Ym.MN)(Ts.c.del,e,{server:t});const n=yield(0,Ym.MN)(PI,t,r);yield(0,Ym.Aj)(Br.c.actions.resetSucceeded({sourceURI:r,options:n})),yield(0,Ym.Aj)(Br.c.actions.resetHubs({sourceURI:r}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.resetFailed({sourceURI:r,error:Ts.c.toPlainErrorObject(e)}))}}function*vI({payload:e}){const{server:t,sourceURI:r,options:n,promoted:i}=e;try{const e=lI(lI({},n),i);yield(0,Ym.Aj)(Br.c.actions.promoteChanged({sourceURI:r,options:e}));const{key:s}=(0,yy.c)(r);yield(0,Ym.MN)(Ts.c.put,S.c.join([s,e.identifier]),{server:t,params:{promotedToRecommended:(0,rI.c)(e.promotedToRecommended),promotedToOwnHome:(0,rI.c)(e.promotedToOwnHome),promotedToSharedHome:(0,rI.c)(e.promotedToSharedHome)}}),yield(0,Ym.Aj)(Br.c.actions.resetHubs({sourceURI:r}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.promoteChanged({sourceURI:r,options:n}))}}function*bI({payload:e}){var t;const{server:r,sourceURI:n,contentDirectoryID:i}=e;try{const{ratingKey:e}=(0,yy.c)(n),s=yield(0,Ym.MN)(Ts.c.get,(0,nI.c)(i),{server:r,params:{metadataItemId:e}});yield(0,Ym.Aj)(Br.c.actions.publishedFetchSucceeded({sourceURI:n,hub:null==(t=s.data.MediaContainer.Hub)?void 0:t[0]}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.publishedFetchFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*SI({payload:e}){var t;const{server:r,sourceURI:n,contentDirectoryID:i,hub:s}=e;try{const{ratingKey:e}=(0,yy.c)(n),a=yield(0,Ym.MN)(Ts.c.post,(0,nI.c)(i),{server:r,params:{metadataItemId:e,promotedToRecommended:(0,rI.c)(s.promotedToRecommended),promotedToOwnHome:(0,rI.c)(s.promotedToOwnHome),promotedToSharedHome:(0,rI.c)(s.promotedToSharedHome)}});yield(0,Ym.Aj)(Br.c.actions.publishedUpdateSucceeded({sourceURI:n,hub:null==(t=a.data.MediaContainer.Hub)?void 0:t[0]})),yield(0,Ym.Aj)(Br.c.actions.resetHubs({sourceURI:n}))}catch(e){yield(0,Ym.Aj)(Br.c.actions.publishedUpdateFailed({sourceURI:n,error:Ts.c.toPlainErrorObject(e)}))}}function*PI(e,t){const{key:r}=(0,yy.c)(t);return(yield(0,Ym.MN)(Ts.c.get,r,{server:e})).data.MediaContainer.Hub}function*II(){yield(0,Ym.y0)(Br.c.actions.settingsFetchRequested,uI)}function*EI(){yield(0,Ym.y0)(Br.c.actions.settingsUpdateRequested,pI)}function*wI(){yield(0,Ym.y0)(Br.c.actions.resetHubs,mI)}function*CI(){yield(0,Ym.y0)(Br.c.actions.hubsFetchRequested,hI)}function*OI(){yield(0,Ym.UT)(Br.c.actions.reorderRequested,yI)}function*MI(){yield(0,Ym.UT)(Br.c.actions.removeRequested,gI)}function*TI(){yield(0,Ym.y0)(Br.c.actions.resetRequested,fI)}function*DI(){yield(0,Ym.UT)(Br.c.actions.promoteRequested,vI)}function*kI(){yield(0,Ym.y0)(Br.c.actions.publishedFetchRequested,bI)}function*xI(){yield(0,Ym.UT)(Br.c.actions.publishedUpdateRequested,SI)}function*AI(){yield(0,Ym.Q7)([(0,Ym.eG)(II),(0,Ym.eG)(EI),(0,Ym.eG)(wI),(0,Ym.eG)(CI),(0,Ym.eG)(OI),(0,Ym.eG)(MI),(0,Ym.eG)(TI),(0,Ym.eG)(DI),(0,Ym.eG)(kI),(0,Ym.eG)(xI)])}var RI=r(672),NI=r(54060),LI=Object.defineProperty,jI=Object.getOwnPropertySymbols,UI=Object.prototype.hasOwnProperty,FI=Object.prototype.propertyIsEnumerable,VI=(e,t,r)=>t in e?LI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_I=(e,t)=>{for(var r in t||(t={}))UI.call(t,r)&&VI(e,r,t[r]);if(jI)for(var r of jI(t))FI.call(t,r)&&VI(e,r,t[r]);return e};function WI({server:e,provider:t,data:r}){const n=(0,tm.c)({serverIdentifier:e.machineIdentifier,providerIdentifier:null==t?void 0:t.identifier});return(r||[]).map((e=>_I({source:n,uid:(0,NI.c)(e,n)},e)))}const BI="https://epg.provider.plex.tv/settings/favoriteChannels";function*HI(e,t,r){var n;const i=r||(e.isCloud?"/lineups/plex/channels":S.c.join([t.identifier,"/lineups/dvr/channels"]));try{return WI({server:e,provider:t,data:null==(n=(yield(0,Ym.MN)(Ts.c.get,i,{server:e,provider:t})).data)?void 0:n.MediaContainer.Channel})}catch(e){return[]}}function*zI({payload:e}){var t;const{cloudServer:r}=e;try{const e=WI({server:r,data:null==(t=(yield(0,Ym.MN)(Ts.c.get,BI,{server:r,headers:{"X-Plex-Provider-Version":"5.1"}})).data)?void 0:t.MediaContainer.FavoriteChannel});yield(0,Ym.Aj)(Hr.cp.actions.favoriteChannelsFetchSucceeded({channels:e}))}catch(e){yield(0,Ym.Aj)(Hr.cp.actions.favoriteChannelsFetchSucceeded({channels:[]}))}}function*GI({payload:e}){const{serverProviders:t}=e,r=t.map((({server:e,provider:t})=>(0,Ym.MN)(HI,e,t))),n=yield(0,Ym.Q7)(r);yield(0,Ym.Aj)(Hr.cp.actions.favoriteChannelsPopulateRequestSucceeded({channels:n.flat()}))}function*qI({payload:e}){const{cloudServer:t,channels:r,updatedChannels:n}=e,i=n.map((({source:e,id:t,title:r,thumb:n,vcn:i})=>({source:e,id:t,title:r,thumb:n,vcn:i})));try{yield(0,Ym.MN)(Ts.c.put,BI,{server:t,headers:{"X-Plex-Provider-Version":"5.1"}},i),yield(0,Ym.Aj)(Hr.cp.actions.favoriteChannelsUpdateSucceeded())}catch(e){yield(0,Ym.Aj)(Hr.cp.actions.favoriteChannelsUpdateFailed({error:Ts.c.toPlainErrorObject(e),channels:r}))}}function*KI({payload:e}){const{sourceKeys:t}=e,r=t.map((({server:e,provider:t,key:r})=>(0,Ym.MN)(HI,e,t,r))),n=yield(0,Ym.Q7)(r);yield(0,Ym.Aj)(Hr.cp.actions.guideChannelsFetchSucceeded({channels:n.flat()}))}function*QI({payload:e}){var t;const{server:r,provider:n,channelGridKey:i,date:s}=e;try{const e=yield(0,rh.c)((0,Zv.c)(za.Go)),a=new Date(s),o=yield(0,Ym.MN)(Ts.c.get,r.isCloud?"/grid":S.c.join([n.identifier,"/grid"]),{server:r,provider:n,allowHeadersInUrl:!1,params:{channelGridKey:i,date:(0,RI.c)(a,"yyyy-MM-dd")},providerVersionOverride:e?"7.0":void 0}),{metadataItems:c,metadataItemStates:l}=(0,Lv.c)({server:r,provider:n,data:null!=(t=o.data.MediaContainer.Metadata)?t:[],container:o.data.MediaContainer});yield(0,Ym.Q7)([(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:l})),(0,Ym.Aj)(Hr.cp.actions.channelAiringsFetchSucceeded({channelGridKey:i,airings:c}))])}catch(e){yield(0,Ym.Aj)(Hr.cp.actions.channelAiringsFetchFailed({channelGridKey:i,error:Ts.c.toPlainErrorObject(e)}))}}function*$I(){yield Zm(Hr.cp.actions.channelAiringsFetchRequested,QI,(({payload:e})=>e.channelGridKey))}function*YI(){yield(0,Ym.Q7)([(0,Ym.eG)($I),eh(Hr.cp.actions.guideChannelsFetchRequested,KI),eh(Hr.cp.actions.favoriteChannelsFetchRequested,zI),eh(Hr.cp.actions.favoriteChannelsPopulateRequested,GI),eh(Hr.cp.actions.favoriteChannelsUpdateRequested,qI)])}var XI=r(29164);function*JI(){try{const e=yield(0,rh.c)(XI.c),t=yield(0,Ym.MN)(Ts.c.get,"/api/v2/user/settings/opt_outs",{server:e});yield(0,Ym.Aj)(Gr.c.actions.fetchOptOutsSucceeded({optOuts:t.data}))}catch(e){yield(0,Ym.Aj)(Gr.c.actions.fetchOptOutsFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*ZI({payload:e}){try{const t=yield(0,rh.c)(Yv.c),r=yield(0,rh.c)(XI.c);if(!(null==t?void 0:t.uuid))throw new Error("User is not logged in");const n=yield(0,Ym.MN)(Ts.c.post,`/api/v2/user/${t.uuid}/settings/opt_outs`,{server:r,params:{key:e.optOut.key,value:e.optOut.value}});yield(0,Ym.Aj)(Gr.c.actions.updateOptOutSucceeded({optOut:n.data}))}catch(e){yield(0,Ym.Aj)(Gr.c.actions.updateOptOutFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*eE(){yield(0,Ym.Q7)([eh(Gr.c.actions.fetchOptOuts,JI),eh(Gr.c.actions.updateOptOut,ZI)])}var tE=r(23564),rE=Object.defineProperty,nE=Object.getOwnPropertySymbols,iE=Object.prototype.hasOwnProperty,sE=Object.prototype.propertyIsEnumerable,aE=(e,t,r)=>t in e?rE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oE=(e,t)=>{for(var r in t||(t={}))iE.call(t,r)&&aE(e,r,t[r]);if(nE)for(var r of nE(t))sE.call(t,r)&&aE(e,r,t[r]);return e};function cE(e=[]){return e.reduce(((e,t)=>(t.key===tE.I.ViewedAt?e["viewedAt>"]=t.value:e[t.key]=t.value,e)),{})}function*lE({payload:e}){try{const{server:t,provider:r,sort:n,filters:i,startIndex:s,size:a,isPrepend:o}=e,c=yield(0,Ym.MN)(qr.y.fetchRange,"/status/sessions/history/all",{server:t,provider:r,params:oE({sort:n},cE(i)),startIndex:s,size:a,isPrepend:o});yield(0,Ym.Aj)(qr.c.actions.fetchRangeSucceeded({data:c}))}catch(e){yield(0,Ym.Aj)(qr.c.actions.fetchRangeFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*dE(){for(;;){const e=yield(0,Ym.y0)(qr.c.actions.fetchRangeRequested,lE);yield(0,Ym.UH)(qr.c.actions.reset),yield(0,Ym.qG)(e)}}function*uE(){yield(0,Ym.Q7)([(0,Ym.eG)(dE)])}var pE=r(95420),mE=r(65723),hE=r(52513),yE=r(81436);function*gE(e,t){const r=yield(0,Ym.Ml)((0,hE.c)(e.machineIdentifier,t));let n=r.settings,i=r.isPopulated||r.error;for(;!i;){yield(0,Ym.Aj)(fr.cp.actions.fetchServerSectionSettings({server:e,librarySectionID:t}));const{success:r,error:s}=yield(0,Ym.ue)({success:(0,Ym.UH)(fr.cp.actions.fetchServerSectionSettingsSucceeded),error:(0,Ym.UH)(fr.cp.actions.fetchServerSectionSettingsFailed)});(r||s).payload.librarySectionID===t&&(i=!0,n=s?[]:r.payload.settings)}return{librarySectionID:t,settings:n}}function*fE(e,t){const r=(0,yE.c)(t.map((({librarySectionID:e})=>e)).filter((e=>Boolean(e)))),n=yield(0,Ym.Q7)(r.map((t=>(0,Ym.MN)(gE,e,t))));return t.filter((e=>{if(!e.librarySectionID||e.source)return!1;const t=n.find((({librarySectionID:t})=>t===e.librarySectionID));if(!t)return!0;const r=t.settings.find((e=>e.id===Eg.aM.Hidden));return!r||r.value!==Eg.W8.ExcludeFromHomeAndSearch}))}var vE=r(26647),bE=r(7060),SE=r(78168),PE=r(34908),IE=r(15892),EE=r(68684),wE=r(60872),CE=r(36364),OE=Object.defineProperty,ME=Object.defineProperties,TE=Object.getOwnPropertyDescriptors,DE=Object.getOwnPropertySymbols,kE=Object.prototype.hasOwnProperty,xE=Object.prototype.propertyIsEnumerable,AE=(e,t,r)=>t in e?OE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RE=(e,t)=>{for(var r in t||(t={}))kE.call(t,r)&&AE(e,r,t[r]);if(DE)for(var r of DE(t))xE.call(t,r)&&AE(e,r,t[r]);return e};const NE=function(e,t,r){return(0,CE.U1)(e)?e.map((e=>{const{metadataItem:n}=(0,gh.c)({server:t,provider:r,data:(i=RE({},e.Metadata),s={userState:!1},ME(i,TE(s))),container:{}});var i,s;return{role:e.role,order:e.order,item:n}})).filter((e=>{var t;return!(null==(t=e.item)?void 0:t.isAdult)})):e},LE=function(e,t,r){return e.map((e=>{var n;const{title:i,type:s,metadataType:a,Credit:o,Role:c}=e;return{title:i,type:s,metadataType:a,credits:NE(null!=(n=null!=o?o:c)?n:[],t,r)}}))};var jE=Object.getOwnPropertySymbols,UE=Object.prototype.hasOwnProperty,FE=Object.prototype.propertyIsEnumerable,VE=(e,t)=>{var r={};for(var n in e)UE.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&jE)for(var n of jE(e))t.indexOf(n)<0&&FE.call(e,n)&&(r[n]=e[n]);return r};function _E(e){return!(0,bE.c)(e)}function*WE({payload:e}){const t=yield(0,Ym.Ml)(wE.c);try{const r=yield(0,Ym.MN)(QE,e.server,e.provider,e.metadataKey);yield(0,Ym.MN)($E,e.server,e.provider,r,t)}catch(e){yield(0,Ym.Aj)(Qr.c.actions.metadataItemFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*BE({payload:e}){var t;try{const r=yield(0,Ym.Ml)(wE.c),n=null==(t=r.metadata.metadataItem)?void 0:t.key;if(!n)return;const i=yield(0,Ym.MN)(QE,e.server,e.provider,n);yield(0,Ym.MN)($E,e.server,e.provider,i,r)}catch(e){}}function*HE({payload:e}){const{server:t,provider:r,metadataKey:n}=e,i=!t.version||(0,mE.c)(t.version,pE.default.simpleRelatedKey)?S.c.join([n,"related"]):S.c.join([n.replace(/(\/library)?\/metadata/,"/hubs/metadata"),"related"]);try{const e=yield(0,Ym.MN)(Ts.c.get,i,{server:t,provider:r,params:{includeAugmentations:!t.version||(0,mE.c)(t.version,pE.default.augmentedHubsInRelatedHubs)?1:0,includeExternalMetadata:1,includeMeta:1}}),n=[Xv.G.StreamingServicesUpsell];(yield(0,rh.c)(EE.c))&&n.push(Xv.G.PersonKnownFor);const s=yb({server:t,provider:r,data:e.data,excludedHubIdentifiers:n});yield(0,Ym.Q7)([(0,Ym.Aj)(dr.c.actions.added({metadataLists:s.metadataLists,metadataItemStates:s.metadataItemStates})),(0,Ym.Aj)(Qr.c.actions.relatedHubsFetchSucceeded({hubs:s.hubs}))])}catch(e){yield(0,Ym.Aj)(Qr.c.actions.relatedHubsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*zE({payload:e}){const{server:t,provider:r,augmentationKey:n}=e;try{const e=yb({server:t,provider:r,data:(yield(0,Ym.MN)(Ts.c.get,n,{server:t,provider:r,params:{wait:1}})).data,excludedHubIdentifiers:[Xv.G.StreamingServicesUpsell]});yield(0,Ym.Q7)([(0,Ym.Aj)(dr.c.actions.added({metadataLists:e.metadataLists,metadataItemStates:e.metadataItemStates})),(0,Ym.Aj)(Qr.c.actions.augmentedHubsFetchSucceeded({hubs:e.hubs}))])}catch(e){yield(0,Ym.Aj)(Qr.c.actions.augmentedHubsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*GE({payload:e}){var t;const{server:r,provider:n,metadataKey:i}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,S.c.join([i,"credits"]),{server:r,provider:n}),s=LE(null!=(t=e.data.MediaContainer.CreditGroup)?t:[],r,n);yield(0,Ym.Aj)(Qr.c.actions.creditsFetchSucceeded({groups:s}))}catch(e){yield(0,Ym.Aj)(Qr.c.actions.creditsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*qE(e,t){if(e.connectionTestResult===IE.a.Unavailable||e.connectionTestResult===IE.a.Unauthorized)return;let r=e,n=e.connectionTestResult===IE.a.Connected;for(;!n;){const t=yield(0,Ym.UH)(vr.c.actions.connectionChanged);t.payload.server.entityID===e.entityID&&(r=t.payload.server,n=!0)}const i=`/library/metadata/${t.map(encodeURIComponent).join(",")}`;try{const e=(yield(0,Ym.MN)(Ts.c.get,i,{server:r,params:{skipRefresh:1}})).data.MediaContainer,{Metadata:t=[]}=e,n=VE(e,["Metadata"]),s=yield(0,Ym.MN)(fE,r,t);return(0,Lv.c)({server:r,data:s,container:n})}catch(e){return{metadataItems:[],metadataItemStates:{}}}}function*KE({payload:e}){const{guids:t}=e,r=yield(0,rh.c)(PE.c),n=(yield(0,Ym.Q7)(r.map((e=>(0,Ym.ue)({response:(0,Ym.MN)(qE,e,t),timeout:(0,Ym.oL)(5e3)}))))).flatMap((e=>e.response)).filter(Boolean),{metadataItems:i,metadataItemStates:s}=n.reduce(((e,t)=>(e.metadataItems.push(...t.metadataItems),Object.assign(e.metadataItemStates,t.metadataItemStates),e)),{metadataItems:[],metadataItemStates:{}}),a=i.reduce(((e,t)=>{const r=t.guid||(0,vE.c)(t);return e[r]?e[r].push(t):e[r]=[t],e}),{});yield(0,Ym.Q7)([(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:s})),(0,Ym.Aj)(Qr.c.actions.creditSourcesFetchSucceeded({sourcesByGUID:a}))])}function*QE(e,t,r){const n=(yield(0,Ym.MN)(Ts.c.get,r,{server:e,provider:t,params:{includeConcerts:1,includeExtras:1,includeOnDeck:1,includePopularLeaves:1,includePreferences:1,includeReviews:1,includeChapters:1,includeStations:1,includeExternalMedia:1,asyncAugmentMetadata:1,asyncCheckFiles:1,asyncRefreshAnalysis:1,asyncRefreshLocalMediaAgent:1}})).data.MediaContainer,{Metadata:i=[]}=n,s=VE(n,["Metadata"]),[a]=i;if(!a)throw new Error("The response did not contain a metadata item");const o=(0,gh.c)({server:e,provider:t,data:a,container:s}),{descendantListSourceURI:c,siblingListSourceURI:l,popularLeavesSourceURI:d,extrasSourceURI:u}=function(e){const{source:t,childrenKey:r,popularLeaves:n,extras:i}=e,s=function(e){const{skipParent:t,parentKey:r,grandparentKey:n}=e,i=t?n:r,s=t?"grandchildren":"children";if(i)return S.c.join([i,s],{excludeAllLeaves:1})}(e),a=null==n?void 0:n.key,o=i?S.c.join([e.key,"extras"]):void 0;return{descendantListSourceURI:r?S.c.join([t,r]):void 0,siblingListSourceURI:_E(e)&&s?S.c.join([t,s]):void 0,popularLeavesSourceURI:a?S.c.join([t,a]):void 0,extrasSourceURI:o?S.c.join([t,o]):void 0}}(o.metadataItem),p={metadataItem:o.metadataItem,metadataItemStates:o.metadataItemStates,descendantListSourceURI:c,siblingListSourceURI:l,popularLeavesSourceURI:d,extrasSourceURI:u};return yield(0,Ym.Aj)(Qr.c.actions.metadataItemFetchSucceeded(p)),yield(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:o.metadataItemStates})),p}function*$E(e,t,r,n){var i,s;const{descendantListSourceURI:a,siblingListSourceURI:o,popularLeavesSourceURI:c,extrasSourceURI:l}=n,{metadataItem:d,descendantListSourceURI:u,siblingListSourceURI:p,popularLeavesSourceURI:m,extrasSourceURI:h}=r,y=[];u&&(u===a?yield(0,Ym.Aj)(dr.c.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:u})):y.push((0,Ym.MN)(YE,{server:e,provider:t,sourceURI:u,fetchAll:d.type===gy.WW.Album||(0,SE.c)(t)}))),p&&(p===o?yield(0,Ym.Aj)(dr.c.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:p})):y.push((0,Ym.MN)(YE,{server:e,provider:t,sourceURI:p,fetchAll:!0}))),m&&(m===c?yield(0,Ym.Aj)(dr.c.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:m})):y.push((0,Ym.MN)(YE,{server:e,provider:t,sourceURI:m,items:null==(i=d.popularLeaves)?void 0:i.items}))),h&&(h===l?yield(0,Ym.Aj)(dr.c.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:h})):y.push((0,Ym.MN)(YE,{server:e,provider:t,sourceURI:h,items:d.extras,totalSize:null==(s=d.extras)?void 0:s.length}))),yield(0,Ym.Q7)(y)}function*YE({server:e,provider:t,sourceURI:r,items:n=[],totalSize:i,fetchAll:s}){if(yield(0,Ym.Aj)(dr.c.actions.added({metadataLists:[{sourceURI:r,items:n,totalSize:i,offset:0}],metadataItemStates:{}})),null==i)if(s)try{yield(0,Ym.Aj)(dr.c.actions.fetchAllRequested({server:e,provider:t,sourceURI:r,includePaginationHeaders:(0,SE.c)(t)}))}catch(e){yield(0,Ym.Aj)(dr.c.actions.fetchAllFailed({error:Ts.c.toPlainErrorObject(e),sourceURI:r}))}else try{yield(0,Ym.Aj)(dr.c.actions.fetchRangeRequested({server:e,provider:t,sourceURI:r,startIndex:0,size:20}))}catch(e){yield(0,Ym.Aj)(dr.c.actions.fetchRangeFailed({error:Ts.c.toPlainErrorObject(e),sourceURI:r}))}}function*XE(){for(;;){const e=yield(0,Ym.t9)(Qr.c.actions.metadataItemFetchRequested,WE);yield(0,Ym.UH)(Qr.c.actions.reset),yield(0,Ym.qG)(e)}}function*JE(){for(;;){const e=yield(0,Ym.t9)(Qr.c.actions.relatedHubsFetchRequested,HE);yield(0,Ym.UH)(Qr.c.actions.reset),yield(0,Ym.qG)(e)}}function*ZE(){for(;;){const e=yield(0,Ym.t9)(Qr.c.actions.augmentedHubsFetchRequested,zE);yield(0,Ym.UH)(Qr.c.actions.reset),yield(0,Ym.qG)(e)}}function*ew(){for(;;){const e=yield(0,Ym.t9)(Qr.c.actions.creditsFetchRequested,GE);yield(0,Ym.UH)(Qr.c.actions.reset),yield(0,Ym.qG)(e)}}function*tw(){for(;;){const e=yield(0,Ym.t9)(Qr.c.actions.creditSourcesFetchRequested,KE);yield(0,Ym.UH)(Qr.c.actions.reset),yield(0,Ym.qG)(e)}}function*rw(){for(;;){const e=yield(0,Ym.t9)(Qr.c.actions.metadataItemRepopulateRequested,BE),t=yield(0,Ym.UH)([Qr.c.actions.reset,lr.c.actions.playedStatusUpdateRequested,lr.c.actions.toggleWatchlistRequested,lr.c.actions.toggleSavedRequested,lr.c.actions.streamSelectRequested,lr.c.actions.streamDeleteRequested,lr.c.actions.preferenceChanged]);t.type!==Qr.c.actions.reset&&(yield(0,Ym.Ml)(wE.c)).metadata.isPending&&(yield(0,Ym.Aj)(lr.c.actions.repopulateCanceled({sourceURI:t.payload.sourceURI}))),yield(0,Ym.qG)(e)}}function*nw(){yield(0,Ym.Q7)([(0,Ym.eG)(XE),(0,Ym.eG)(rw),(0,Ym.eG)(JE),(0,Ym.eG)(ZE),(0,Ym.eG)(ew),(0,Ym.eG)(tw)])}var iw=Object.getOwnPropertySymbols,sw=Object.prototype.hasOwnProperty,aw=Object.prototype.propertyIsEnumerable,ow=(e,t)=>{var r={};for(var n in e)sw.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&iw)for(var n of iw(e))t.indexOf(n)<0&&aw.call(e,n)&&(r[n]=e[n]);return r};function*cw({payload:e}){try{const t=yield(0,Ym.MN)(dw,e.server,e.provider,e.metadataKey);yield(0,Ym.Aj)($r.c.actions.seasonsFetchSucceeded({seasons:t})),yield(0,Ym.Aj)(lr.c.actions.batchFetchRequested({server:e.server,provider:e.provider,metadataItems:t}))}catch(e){yield(0,Ym.Aj)($r.c.actions.seasonsFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*lw({payload:e}){try{const t=yield(0,Ym.MN)(dw,e.server,e.provider,e.metadataKey);yield(0,Ym.Aj)($r.c.actions.seasonEpisodesFetchSucceeded({seasonIndex:e.seasonIndex,episodes:t})),yield(0,Ym.Aj)(lr.c.actions.batchFetchRequested({server:e.server,provider:e.provider,metadataItems:t}))}catch(t){yield(0,Ym.Aj)($r.c.actions.seasonEpisodesFetchFailed({seasonIndex:e.seasonIndex,error:Ts.c.toPlainErrorObject(t)}))}}function*dw(e,t,r){const n=(yield(0,Ym.MN)(Ts.c.get,r,{server:e,provider:t,params:{excludeElements:"Role,Director,Producer,Writer,Genre,Rating,Studio,Guid",excludeFields:"summary",includeChildren:1}})).data.MediaContainer,{Metadata:i=[]}=n,s=ow(n,["Metadata"]),[a]=i;if(!a||!a.Children)throw new Error("The response did not contain a metadata item");const o=(0,Lv.c)({server:e,provider:t,data:a.Children.Metadata,container:s});return yield(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:o.metadataItemStates})),o.metadataItems}function*uw(){yield(0,Ym.Q7)([eh($r.c.actions.seasonsFetchRequested,cw),th($r.c.actions.seasonEpisodesFetchRequested,lw,"seasonIndex")])}function*pw({payload:e}){const{password:t}=e,r=yield(0,rh.c)(XI.c);try{const e=yield(0,Ym.MN)(Ts.c.post,"/api/v2/user/two_factor",{server:r},{password:t});yield(0,Ym.Aj)(Yr.c.actions.createSecretSucceeded({provisioningUri:e.data.provisioningUri,secret:e.data.secret}))}catch(e){yield(0,Ym.Aj)(Yr.c.actions.createSecretFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*mw({payload:e}){const{enabled:t,resetDevices:r,verificationCode:n}=e,i=yield(0,rh.c)(XI.c);try{if(t){const e=yield(0,Ym.MN)(Ts.c.put,"/api/v2/user/two_factor",{server:i},{resetDevices:r,verificationCode:n});yield(0,Ym.Aj)(Yr.c.actions.toggleSucceeded({enabled:!0,codes:e.data.codes}))}else yield(0,Ym.MN)(Ts.c.del,"/api/v2/user/two_factor",{server:i,params:{verificationCode:n}}),yield(0,Ym.Aj)(Yr.c.actions.toggleSucceeded({enabled:!1}));yield(0,jh.c)((0,pa.Ix)({twoFactorEnabled:t}))}catch(e){yield(0,Ym.Aj)(Yr.c.actions.toggleFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*hw({payload:e}){const{password:t,verificationCode:r}=e,n=yield(0,rh.c)(XI.c);try{const e=yield(0,Ym.MN)(Ts.c.post,"/api/v2/user/two_factor/backup_codes",{server:n},{password:t,verificationCode:r});yield(0,Ym.Aj)(Yr.c.actions.generateRecoveryCodesSucceeded({codes:e.data.codes}))}catch(e){yield(0,Ym.Aj)(Yr.c.actions.generateRecoveryCodesFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*yw(){const e=yield(0,rh.c)(XI.c);try{yield(0,Ym.MN)(Ts.c.post,"/api/v2/user/two_factor/send_recovery_code",{server:e}),yield(0,Ym.Aj)(Yr.c.actions.sendRecoveryCodeSucceeded())}catch(e){yield(0,Ym.Aj)(Yr.c.actions.sendRecoveryCodeFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*gw(){for(;;){const e=yield(0,Ym.y0)(Yr.c.actions.createSecretRequested,pw);yield(0,Ym.UH)(Yr.c.actions.reset),yield(0,Ym.qG)(e)}}function*fw(){for(;;){const e=yield(0,Ym.y0)(Yr.c.actions.toggleRequested,mw);yield(0,Ym.UH)(Yr.c.actions.reset),yield(0,Ym.qG)(e)}}function*vw(){for(;;){const e=yield(0,Ym.y0)(Yr.c.actions.generateRecoveryCodesRequested,hw);yield(0,Ym.UH)(Yr.c.actions.reset),yield(0,Ym.qG)(e)}}function*bw(){for(;;){const e=yield(0,Ym.y0)(Yr.c.actions.sendRecoveryCodeRequested,yw);yield(0,Ym.UH)(Yr.c.actions.reset),yield(0,Ym.qG)(e)}}function*Sw(){yield(0,Ym.Q7)([(0,Ym.eG)(gw),(0,Ym.eG)(fw),(0,Ym.eG)(vw),(0,Ym.eG)(bw)])}var Pw=r(40901),Iw=r(96636),Ew=r(37048),ww=r(63160),Cw=r(16124),Ow=r(69484),Mw=r(68624),Tw=r(63524),Dw=r(89220),kw=r(83828),xw=r(57932),Aw=r(6032),Rw=r(49412);const Nw=[gy.ys.Actor,gy.ys.Director,gy.ys.Producer,gy.ys.Writer,gy.ys.Genre,gy.ys.AvailabilityPlatform];var Lw=Object.defineProperty,jw=Object.defineProperties,Uw=Object.getOwnPropertyDescriptors,Fw=Object.getOwnPropertySymbols,Vw=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable,Ww=(e,t,r)=>t in e?Lw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bw=(e,t)=>{for(var r in t||(t={}))Vw.call(t,r)&&Ww(e,r,t[r]);if(Fw)for(var r of Fw(t))_w.call(t,r)&&Ww(e,r,t[r]);return e},Hw=(e,t)=>jw(e,Uw(t));function zw(e,t,r,n,i){var s;const{metadataItem:a,metadataItemStates:o}=(0,gh.c)({server:e,provider:t,data:Hw(Bw({},r.Metadata),{userState:!e.isCloud&&void 0}),container:{}});n.results.push(Bw({searchType:Tw.Sw.Metadata,source:a.source,sourceURI:a.sourceURI,item:a,score:Number(r.score),groupID:i},(null==(s=r.availabilityPlatforms)?void 0:s.length)?{availabilityPlatforms:r.availabilityPlatforms}:void 0)),Object.assign(n.itemStates,o)}const Gw=function({response:e,searchPivot:t,searchTypes:r,server:n,provider:i,group:s,hasExpandedPivots:a}){var o;const c={results:[],itemStates:{}},l=function({provider:e,response:t,searchPivot:r,searchTypes:n,server:i,hasExpandedPivots:s}){return t.filter((t=>{var a,o;if(s&&(0,Rw.MJ)(t))switch(r){case Tw.Gk.Movies:return t.Metadata.type===gy.WW.Movie;case Tw.Gk.Shows:return t.Metadata.type===gy.WW.Show;case Tw.Gk.Episodes:return t.Metadata.type===gy.WW.Episode;case Tw.Gk.Artists:return t.Metadata.type===gy.WW.Artist;case Tw.Gk.Albums:return t.Metadata.type===gy.WW.Album;case Tw.Gk.Tracks:return t.Metadata.type===gy.WW.Track}const c=(0,Rw.MJ)(t)?function(e,t){if((0,SE.c)(t)||ni._u(e.source,[ni.$9]))return Tw.EB.LiveTV;if(e.playlistType)switch(e.playlistType){case gy.QT.Video:return Tw.EB.Movies;case gy.QT.Audio:return Tw.EB.Music;case gy.QT.Photo:return Tw.EB.Photos;default:return void b.c.warn(`[Search] playlistType ${e.playlistType} not supported`)}const r=(0,Aw.c)(e.type,e.subtype);if(r)return r;b.c.warn(`[Search] Could not map ${e.type},${e.subtype} to SearchType`)}(t.Metadata,e):void 0;if((0,Rw.MJ)(t)&&(!c||!n.includes(c)))return!1;if(i.isCloud&&(0,Rw.MJ)(t)&&t.Metadata.isAdult)return!1;if((0,Rw.MJ)(t)&&ni._u(e.identifier,[ni._0,ni.$9]))return t.Metadata.type===gy.WW.Show||(t.Metadata.Media=null==(a=t.Metadata.Media)?void 0:a.filter((e=>e.endsAt&&e.endsAt>Date.now()/1e3)),null==(o=t.Metadata.Media)?void 0:o.length);if((0,Rw.eE)(t)&&r===Tw.Gk.TopResults&&!Nw.includes(t.Directory.tagType))return!1;const l=(0,Rw.eE)(t)?function(e,t){let r;switch(e.tagType){case gy.ys.Actor:case gy.ys.Director:case gy.ys.Producer:case gy.ys.Writer:r=Tw.EB.People;break;case gy.ys.Generic:case gy.ys.Place:case gy.ys.PhotoAutotag:r=Tw.EB.Photos;break;case gy.ys.AvailabilityPlatform:r=Tw.EB.AvailabilityPlatforms;break;case gy.ys.Genre:(0,SE.c)(t)&&(r=Tw.EB.LiveTV)}if(!r)switch(e.librarySectionType){case Tw.aS.Movies:r=Tw.EB.Movies;break;case Tw.aS.TV:r=Tw.EB.TV;break;case Tw.aS.Music:r=Tw.EB.Music;break;case Tw.aS.Photos:r=Tw.EB.Photos}return r}(t.Directory,e):void 0;return!(!(!(0,Rw.eE)(t)||r===Tw.Gk.TopResults||l&&n.includes(l))||t.reason&&"section"!==t.reason)}))}({provider:i,response:e,searchPivot:t,searchTypes:r,server:n,hasExpandedPivots:a}),d=n.isCloud&&(null==s?void 0:s.id)?s.id:void 0;for(let e=0;e<l.length;e++){const t=l[e];if((0,Rw.MJ)(t)&&((null==(o=t.Metadata.Media)?void 0:o.length)&&t.Metadata.Media.length>1?t.Metadata.Media.forEach((e=>{zw(n,i,Hw(Bw({},t),{Metadata:Hw(Bw({},t.Metadata),{Media:[e]})}),c,d)})):zw(n,i,t,c,d)),"Channel"in t){const e=`${t.Channel.source}/${t.Channel.id}`;c.results.push({searchType:Tw.Sw.Channel,source:t.Channel.source,sourceURI:e,item:t.Channel,score:Number(t.score),groupID:d})}if((0,Rw.eE)(t)){const e=t.Directory.source||(0,tm.c)({serverIdentifier:n.machineIdentifier,providerIdentifier:i.identifier}),r=`${e}${t.Directory.key}`;c.results.push({searchType:Tw.Sw.Tag,source:e,sourceURI:r,item:Hw(Bw({},t.Directory),{tag:t.Directory.title||t.Directory.tag}),score:Number(t.score),groupID:d})}if("Directory"in t&&!("tagType"in t.Directory)&&"title"in t.Directory){const{metadataItem:e,metadataItemStates:r}=(0,gh.c)({server:n,provider:i,data:Hw(Bw({},t.Directory),{userState:!n.isCloud&&void 0}),container:{}});c.results.push({searchType:Tw.Sw.Directory,source:e.source,sourceURI:e.sourceURI,item:e,score:Number(t.score),groupID:d}),Object.assign(c.itemStates,r)}}return c},qw=function({hubs:e,searchPivot:t,searchTypes:r,server:n,provider:i,hasExpandedPivots:s}){const a=e.reduce(((e,t)=>(t.Metadata?e.push(...t.Metadata.map((e=>({score:e.score,Metadata:e})))):t.Directory&&e.push(...t.Directory.map((e=>({score:e.score,Directory:e})))),e)),[]);return Gw({response:a,searchPivot:t,searchTypes:r,server:n,provider:i,hasExpandedPivots:s})},Kw=function({response:e,searchPivot:t,searchTypes:r,server:n,provider:i,hasExpandedPivots:s}){const a={results:[],itemStates:{}};return e.forEach((e=>{const{id:o,title:c,SearchResult:l}=e,d=Gw({response:null!=l?l:[],searchPivot:t,searchTypes:r,server:n,provider:i,group:e,hasExpandedPivots:s});a.results.push({id:o,title:c,results:d.results}),Object.assign(a.itemStates,d.itemStates)})),a},Qw=250;function $w(e,t){return(0,kw.c)(e).some((e=>t.includes(e)))}function*Yw({query:e,server:t,provider:r,searchPivot:n,searchTypes:i,searchFeature:s,searchProviders:a,limit:o,hasExpandedPivots:c}){if(!s.key)throw new Error("No key found on search feature");const l=yield(0,rh.c)(Yv.c),d=-1!==l.features.findIndex((e=>e.uuid===za.eK)),u=-1!==l.features.findIndex((e=>e.uuid===za.Go)),p=d?1:0,m=i.reduce(((e,t)=>(e[t===Tw.EB.LiveTV?0:1].push(t),e)),[[],[]]).map((e=>e.join(","))).filter(Boolean).map((n=>{const i=n.includes(Tw.EB.LiveTV)?Tw.S2.PlexFAST:null==a?void 0:a.filter((e=>e!==Tw.S2.PlexFAST)).join(",");return{server:t,provider:r,providerVersionOverride:u?"7.0":void 0,params:{query:e,limit:o,searchTypes:n,searchProviders:i,includeMetadata:p,filterPeople:1}}})),h=yield(0,Pw.Q7)(m.map((e=>(0,Pw.MN)(Ts.c.get,s.key,e)))),y={results:[],itemStates:{}};return h.forEach((e=>{var s;const{results:a,itemStates:o}=Kw({response:null!=(s=e.data.MediaContainer.SearchResults)?s:[],searchPivot:n,searchTypes:i,server:t,provider:r,hasExpandedPivots:c});y.results.push(...a),Object.assign(y.itemStates,o)})),y}function*Xw({query:e,server:t,provider:r,searchPivot:n,searchTypes:i,searchFeature:s,limit:a,hasExpandedPivots:o}){var c,l;if(!s.key)throw new Error("No key found on search feature");const d=(0,SE.c)(r)?[Tw.EB.LiveTV]:i.filter((e=>e!==Tw.EB.LiveTV));if(t.connectionTestResult===IE.a.Unavailable||t.connectionTestResult===IE.a.Unauthorized)return{results:[],itemStates:{}};let u=t,p=t.connectionTestResult===IE.a.Connected;for(;!p;){const{action:e,timeout:r}=yield(0,Ym.ue)({action:(0,Pw.UH)(vr.c.actions.connectionChanged),timeout:(0,Ym.oL)(5e3)});if(r)break;if(e.payload.server.entityID===t.entityID)return e.payload.server.connectionTestResult===IE.a.Connected&&(u=e.payload.server,p=!0),{results:[],itemStates:{}}}const m=(yield(0,Pw.MN)(Ts.c.get,s.key,{server:u,provider:r,params:{query:e,limit:a,searchTypes:s.type===Mh.Aj.UniversalSearch?d.join(","):void 0,includeCollections:1,includeExternalMedia:1}})).data.MediaContainer;return"Hub"in m?qw({hubs:m.Hub,searchPivot:n,searchTypes:i,server:u,provider:r,hasExpandedPivots:o}):"SearchResults"in m?Kw({response:null!=(c=null==m?void 0:m.SearchResults)?c:[],searchPivot:n,searchTypes:i,server:u,provider:r,hasExpandedPivots:o}):Gw({response:null!=(l=null==m?void 0:m.SearchResult)?l:[],searchPivot:n,searchTypes:i,server:u,provider:r,hasExpandedPivots:o})}function*Jw({query:e,server:t,provider:r,searchPivot:n,searchTypes:i,searchFeature:s,searchProviders:a,hasExpandedPivots:o}){const c=(0,tm.c)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier});try{const{results:l,itemStates:d}=t.isCloud?yield(0,Pw.MN)(Yw,{query:e,server:t,provider:r,searchPivot:n,searchTypes:i,searchFeature:s,searchProviders:a,limit:Ew.kv,hasExpandedPivots:o}):yield(0,Pw.MN)(Xw,{query:e,server:t,provider:r,searchPivot:n,searchTypes:i,searchFeature:s,limit:100,hasExpandedPivots:o});yield(0,Pw.Q7)([(0,Pw.Aj)(Xr.c.actions.receiveResults({source:c,searchResults:l,status:Tw.me.Succeeded})),(0,Pw.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:d}))])}catch(e){yield(0,Pw.Aj)(Xr.c.actions.receiveResults({source:c,searchResults:[],status:Tw.me.Failed}))}}function*Zw({payload:e}){const{query:t,searchProviders:r,cloudSearchTypes:n,searchPivot:i}=e,s=[],a=yield(0,rh.c)(Cw.c),o=he.Statsig.checkGate(ww.iQ.SearchExpandFilterOptions),c=(0,Dw.c)(i),l=(0,xw.c)(a),d=c.filter((e=>l.includes(e)));let u;for(let e=0;e<a.length;e++){const[c,l]=a[e];for(let e=0;e<l.length;e++){const a=l[e],p=ni._u(a.identifier,ni.Im);if(c.isCloud&&!p)continue;p||(u=!!(0,ov.c)(a,Mh.Aj.UniversalSearch));const m=u?Mh.Aj.UniversalSearch:Mh.Aj.Search,h=(0,ov.c)(a,p?Mh.Aj.UniversalSearch:m);if(!h)continue;const y=p?n:d;if(!$w(a,y)||1===t.length&&c.isCloud){const e=(0,tm.c)({serverIdentifier:c.machineIdentifier,providerIdentifier:a.identifier});yield(0,Pw.Aj)(Xr.c.actions.receiveResults({source:e,searchResults:[],status:Tw.me.Succeeded}));continue}const g=yield(0,Pw.eG)(Jw,{query:t,server:c,provider:a,searchPivot:i,searchTypes:y,searchFeature:h,searchProviders:r,hasExpandedPivots:o});s.push(g)}}s.map((e=>(0,Pw.kn)(e)));let p=s.some((e=>e.isRunning()));for(;p;){yield(0,Ym.oL)(Qw);const e=s.filter((e=>!e.isRunning()));e.length===s.length&&(p=!1),e.length/s.length>=.5&&(yield(0,Pw.Aj)(Xr.c.actions.markPopulated()))}}function*eC({payload:e}){const{includeMetadataInSearch:t}=e;try{const e=yield(0,rh.c)(XI.c),r=yield(0,rh.c)(Ow.c),n=function(e){var t;const r=(0,ov.c)(e,Mh.Aj.Settings);return null==(t=null==r?void 0:r.settings)?void 0:t.find((({id:e})=>e===Mh.M$.IncludeMetadataInSearch))}(r);if(!n)throw new Error("Setting not found");yield(0,Pw.MN)(Ts.c.put,n.key,{server:e,provider:r,params:{prefs:{includeMetadataInSearch:t?1:0}}}),yield(0,Pw.Aj)(Xr.c.actions.includeMetadataInSearchSaveSucceeded()),yield(0,jh.c)((0,Iw.q0)({providerEntityID:r.entityID}))}catch(e){yield(0,Pw.Aj)(Xr.c.actions.includeMetadataInSearchSaveFailed()),yield(0,jh.c)((0,ct._K)((0,He.c)("Failed to save More Ways to Watch setting. Please try again later.")))}}function*tC({payload:e}){var t,r;const{server:n,provider:i}=e;try{const e=yield(0,Pw.MN)(Ts.c.get,"/settings/searchProviders",{server:n,provider:i});yield(0,Pw.Aj)(Xr.c.actions.searchProvidersFetchSucceeded({providers:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.SearchProvider)?r:[]}))}catch(e){yield(0,Pw.Aj)(Xr.c.actions.searchProvidersFetchFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*rC({payload:e}){const{server:t,provider:r}=e;try{const{providers:e}=yield(0,rh.c)(Mw.c),n=e.reduce(((e,t)=>(t.enabled||e.push(t.id),e)),[]);yield(0,Pw.MN)(Ts.c.put,"/settings/searchProviders",{server:t,provider:r},{disabledIdentifiers:n}),yield(0,Pw.Aj)(Xr.c.actions.searchProvidersUpdateSucceeded())}catch(e){yield(0,Pw.Aj)(Xr.c.actions.searchProvidersUpdateFailed())}}function*nC(){for(;;){const e=yield(0,Pw.y0)(Xr.c.actions.searchRequested,Zw);yield(0,Pw.UH)([Xr.c.actions.reset,Xr.c.actions.clearResults]),yield(0,Pw.qG)(e)}}function*iC(){for(;;){const e=yield(0,Pw.y0)(Xr.c.actions.includeMetadataInSearchSaveRequested,eC);yield(0,Pw.UH)(Xr.c.actions.reset),yield(0,Pw.qG)(e)}}function*sC(){for(;;){const e=yield(0,Pw.y0)(Xr.c.actions.searchProvidersFetchRequested,tC);yield(0,Pw.UH)(Xr.c.actions.reset),yield(0,Pw.qG)(e)}}function*aC(){for(;;){const e=yield(0,Pw.y0)(Xr.c.actions.searchProvidersUpdateRequested,rC);yield(0,Pw.UH)(Xr.c.actions.reset),yield(0,Pw.qG)(e)}}function*oC(){yield(0,Pw.Q7)([(0,Pw.eG)(nC),(0,Pw.eG)(iC),(0,Pw.eG)(sC),(0,Pw.eG)(aC)])}function*cC(){const e=yield(0,rh.c)(XI.c);try{yield(0,Ym.MN)(Ts.c.post,"/api/v2/user/send_confirmation",{server:e}),yield(0,Ym.Aj)(Zr.c.actions.sendVerificationEmailSucceeded())}catch(e){yield(0,Ym.Aj)(Zr.c.actions.sendVerificationEmailFailed({error:Ts.c.toPlainErrorObject(e)}))}}function*lC(){for(;;){const e=yield(0,Ym.y0)(Zr.c.actions.sendVerificationEmailRequested,cC);yield(0,Ym.UH)(Zr.c.actions.reset),yield(0,Ym.qG)(e)}}function*dC(){yield(0,Ym.Q7)([(0,Ym.eG)(lC)])}var uC=r(92600),pC=r(87616),mC=r(25760),hC=r(92440),yC=r(46872),gC=Object.defineProperty,fC=Object.defineProperties,vC=Object.getOwnPropertyDescriptors,bC=Object.getOwnPropertySymbols,SC=Object.prototype.hasOwnProperty,PC=Object.prototype.propertyIsEnumerable,IC=(e,t,r)=>t in e?gC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EC=(e,t)=>{for(var r in t||(t={}))SC.call(t,r)&&IC(e,r,t[r]);if(bC)for(var r of bC(t))PC.call(t,r)&&IC(e,r,t[r]);return e},wC=(e,t)=>fC(e,vC(t)),CC=(e,t)=>{var r={};for(var n in e)SC.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&bC)for(var n of bC(e))t.indexOf(n)<0&&PC.call(e,n)&&(r[n]=e[n]);return r};function OC(e){return e.offerType===hC.mu.Buy?"buyPrice":"rentPrice"}function MC(e){return e.offerType===hC.mu.Buy?"buyPriceDescription":"rentPriceDescription"}function TC(e){if(e.platform===hC.yy&&e.playableKey){const{serverIdentifier:t,providerIdentifier:r,key:n}=(0,yy.c)(e.playableKey);return wC(EC({},e),{serverIdentifier:t,providerIdentifier:r,key:n})}if(!(0,yC.c)(e))return e;const t=OC(e),r=MC(e),n=e,{price:i,priceDescription:s}=n,a=CC(n,["price","priceDescription"]);return wC(EC({},a),{[t]:i,[r]:s})}var DC=Object.defineProperty,kC=Object.getOwnPropertySymbols,xC=Object.prototype.hasOwnProperty,AC=Object.prototype.propertyIsEnumerable,RC=(e,t,r)=>t in e?DC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,NC=(e,t)=>{for(var r in t||(t={}))xC.call(t,r)&&RC(e,r,t[r]);if(kC)for(var r of kC(t))AC.call(t,r)&&RC(e,r,t[r]);return e},LC=(e,t)=>{var r={};for(var n in e)xC.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&kC)for(var n of kC(e))t.indexOf(n)<0&&AC.call(e,n)&&(r[n]=e[n]);return r};function*jC(e,t){try{const r={type:(0,Ch.c)(t.type)};if(t.type===gy.WW.Season?(r["show.guid"]=t.parentGuid,r["season.index"]=t.index):r.guid=t.guid,!r.guid&&!r["show.guid"])throw new Error("No GUIDs found for metadata item.");const n=(yield(0,Ym.MN)(Ts.c.get,"/library/all",{server:e,params:r})).data.MediaContainer,{Metadata:i=[]}=n,s=LC(n,["Metadata"]),a=yield(0,Ym.MN)(fE,e,i),{metadataItems:o,metadataItemStates:c}=(0,Lv.c)({server:e,data:a,container:s}),l=o.filter((e=>!!e.librarySectionID)).map((e=>({type:hC.AB.Server,availability:e})));return Object.keys(c).forEach((e=>{o.find((t=>t.sourceURI===e))||delete c[e]})),{items:l,itemStates:c}}catch(e){return{items:[],itemStates:{}}}}function*UC(e,t){if(e.connectionTestResult===IE.a.Unavailable||e.connectionTestResult===IE.a.Unauthorized)return;let r=e,n=e.connectionTestResult===IE.a.Connected;for(;!n;){const t=yield(0,Ym.UH)(vr.c.actions.connectionChanged);t.payload.server.entityID===e.entityID&&(r=t.payload.server,n=!0)}return yield(0,Ym.MN)(jC,r,t)}function*FC(e,t){const r=yield(0,Ym.Q7)(e.map((e=>(0,Ym.ue)({response:(0,Ym.MN)(UC,e,t),timeout:(0,Ym.oL)(5e3)}))));return{items:r.flatMap((({response:e})=>{var t;return null!=(t=null==e?void 0:e.items)?t:[]})),itemStates:r.reduce(((e,{response:t})=>NC(NC({},e),null==t?void 0:t.itemStates)),{})}}function*VC({payload:e}){var t,r;const{server:n,provider:i}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/availability-platforms",{server:n,provider:i,params:{includeGroups:1}});yield(0,Ym.Aj)(Jr.cp.actions.availabilityPlatformsFetchSucceeded({provider:i,availabilityPlatforms:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.AvailabilityPlatform)?r:[]}))}catch(e){yield(0,Ym.Aj)(Jr.cp.actions.availabilityPlatformsFetchFailed({provider:i,error:Ts.c.toPlainErrorObject(e)}))}}function*_C({payload:e}){var t,r,n;const{server:i,provider:s,metadataItem:a}=e;let o={items:[],itemStates:{}};try{if(a.guid){const e=yield(0,rh.c)(PE.c);o=yield(0,Ym.MN)(FC,e,a)}let e=[];if(!a.isUnreleased){const o=yield(0,rh.c)((0,Zv.c)(za.Go));e=null!=(n=(null!=(r=null==(t=(yield(0,Ym.MN)(Ts.c.get,S.c.join([a.key,"availabilities"]),{server:i,provider:s,params:{includeAirings:Number(o)}})).data.MediaContainer)?void 0:t.Availability)?r:[]).reduce(((e,t)=>{if(t.Media)return e.push(TC(t)),e;const r=e.find((e=>e.platform===t.platform&&!e.Media&&(e.offerType===t.offerType||(0,yC.c)(e)&&(0,yC.c)(t))));if(r){if((0,yC.c)(t)){const e=OC(t),n=MC(t),i=r[e];(!i||t.price&&i>t.price)&&(r[e]=t.price,r[n]=t.priceDescription)}}else e.push(TC(t));return e}),[]).map((e=>({type:hC.AB.Provider,platform:e.platform,title:e.title,thumb:e.platformColorThumb,availability:e}))))?n:[]}yield(0,Ym.Q7)([(0,Ym.Aj)(Jr.cp.actions.metadataItemAvailabilitiesFetchSucceeded({provider:s,sourceURI:a.sourceURI,availabilities:{serverAvailabilities:o.items,providerAvailabilities:e}})),(0,Ym.Aj)(lr.c.actions.metadataItemStatesNormalized({metadataItemStates:o.itemStates}))])}catch(e){}}function*WC({payload:e}){var t,r,n,i;const{server:s,provider:a}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/settings/preferredServices",{server:s,provider:a}),o=null!=(i=null==(n=null==(r=null==(t=e.data)?void 0:t.MediaContainer)?void 0:r.AvailabilityPlatform)?void 0:n.map((({platform:e})=>e)))?i:[];204===e.status&&(yield(0,Ym.Aj)(Pr.c.actions.setIsNewUser())),yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesFetchSucceeded({provider:a,preferredServices:o}))}catch(e){yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesFetchFailed({provider:a,error:Ts.c.toPlainErrorObject(e)}))}}function*BC({payload:e}){const{server:t,provider:r,platforms:n}=e;try{const e=yield(0,rh.c)((0,mC.c)(r)),i=n.reduce(((e,t)=>e.includes(t.platform)?e.filter((e=>e!==t.platform)):[...e,t.platform]),e.services);yield(0,Ym.MN)(Ts.c.put,"/settings/preferredServices",{server:t,provider:r},{preferredServices:i}),yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesSaveSucceeded({provider:r,preferredServices:i})),yield(0,Ym.Q7)(n.map((e=>(0,jh.c)((0,ct._K)({type:wh.I,message:i.includes(e.platform)?(0,He.c)("Added {service} to My Services.",{service:e.title}):(0,He.c)("Removed {service} from My Services",{service:e.title})})))))}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem saving your preferences. Please try again later."))),yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesSaveFailed({provider:r}))}}function*HC({payload:e}){const{server:t,provider:r,preferredServices:n}=e;try{yield(0,Ym.MN)(Ts.c.put,"/settings/preferredServices",{server:t,provider:r},{preferredServices:n}),yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesSaveSucceeded({provider:r,preferredServices:e.preferredServices}))}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem saving your preferences. Please try again later."))),yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesSaveFailed({provider:r}))}}function*zC(){try{const e=yield(0,rh.c)(XI.c),t=yield(0,rh.c)(pC.c);yield(0,Ym.MN)(Ts.c.del,"/settings/preferredServices",{server:e,provider:t}),yield(0,Ym.Aj)(Jr.cp.actions.preferredServicesSaveSucceeded({provider:t,preferredServices:[]}))}catch(e){}}function*GC({payload:e}){var t;const{server:r,provider:n}=e;try{const e=yield(0,Ym.MN)(Ts.c.get,"/rss",{server:r,provider:n,params:{includeAllFeeds:1}});yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSFetchSucceeded({feeds:e.data.RSSInfo,provider:n}))}catch(e){404===(null==(t=e.response)?void 0:t.status)?yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSFetchSucceeded({feeds:[],provider:n})):yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSFetchFailed({provider:n,error:Ts.c.toPlainErrorObject(e)}))}}function*qC({payload:e}){const{server:t,provider:r,feedType:n}=e;try{const e=(yield(0,Ym.MN)(Ts.c.post,"/rss",{server:t,provider:r},{feedType:n})).data.RSSInfo;yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSCreateSucceeded({feeds:e,provider:r}))}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem generating your URL. Please try again later."))),yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSCreateFailed({provider:r,error:Ts.c.toPlainErrorObject(e)}))}}function*KC({payload:e}){const{server:t,provider:r,uuid:n}=e;try{yield(0,Ym.MN)(Ts.c.del,`/rss/${n}`,{server:t,provider:r}),yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSDeleteSucceeded({provider:r,uuid:n}))}catch(e){yield(0,jh.c)((0,ct._K)((0,He.c)("There was a problem deleting your URL. Please try again later."))),yield(0,Ym.Aj)(Jr.cp.actions.watchlistRSSDeleteFailed({provider:r}))}}function*QC(){for(;;){const e=yield(0,Ym.y0)(Jr.cp.actions.availabilityPlatformsFetchRequested,VC);yield(0,Ym.UH)([Jr.cp.actions.reset,Jr.cp.actions.availabilityPlatformsFetchCancelled]),yield(0,Ym.qG)(e)}}function*$C(){yield Zm(Jr.cp.actions.metadataItemAvailabilitiesFetchRequested,_C,(({payload:e})=>e.metadataItem.sourceURI))}function*YC(){for(;;){const e=yield(0,Ym.y0)(Jr.cp.actions.preferredServicesFetchRequested,WC);yield(0,Ym.UH)([Jr.cp.actions.reset,Jr.cp.actions.preferredServicesFetchCancelled]),yield(0,Ym.qG)(e)}}function*XC(){for(;;){const e=yield(0,Ym.y0)(Jr.cp.actions.togglePreferredServicesRequested,BC);yield(0,Ym.UH)(Jr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*JC(){for(;;){const e=yield(0,Ym.y0)(Jr.cp.actions.preferredServicesSaveRequested,HC);yield(0,Ym.UH)(Jr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*ZC(){for(;;){const e=yield(0,Ym.y0)(Jr.cp.actions.resetPreferredServices,zC);yield(0,Ym.UH)(Jr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*eO(){for(;;){const e=yield(0,Ym.y0)(Jr.cp.actions.watchlistRSSFetchRequested,GC);yield(0,Ym.UH)(Jr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*tO(){for(;;){const e=yield(0,Ym.UT)(Jr.cp.actions.watchlistRSSCreateRequested,qC);yield(0,Ym.UH)(Jr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*rO(){for(;;){const e=yield(0,Ym.UT)(Jr.cp.actions.watchlistRSSDeleteRequested,KC);yield(0,Ym.UH)(Jr.cp.actions.reset),yield(0,Ym.qG)(e)}}function*nO(){yield(0,Ym.Q7)([(0,Ym.eG)(QC),(0,Ym.eG)($C),(0,Ym.eG)(YC),(0,Ym.eG)(XC),(0,Ym.eG)(JC),(0,Ym.eG)(ZC),(0,Ym.eG)(eO),(0,Ym.eG)(tO),(0,Ym.eG)(rO)])}function*iO(){yield(0,Ym.Q7)([(0,Ym.eG)(av),(0,Ym.eG)(hv),(0,Ym.eG)(xv),(0,Ym.eG)($v),(0,Ym.eG)(Lb),(0,Ym.eG)(mS),(0,Ym.eG)(HP),(0,Ym.eG)(JP),(0,Ym.eG)(tI),(0,Ym.eG)(AI),(0,Ym.eG)(YI),(0,Ym.eG)(eE),(0,Ym.eG)(uE),(0,Ym.eG)(nw),(0,Ym.eG)(uw),(0,Ym.eG)(Sw),(0,Ym.eG)(oC),(0,Ym.eG)(dC),(0,Ym.eG)(uC.cp),(0,Ym.eG)(nO)])}const sO=(0,Qm.cp)(),aO=(0,nr.eS)({reducer:{root:(e,t)=>(t.type===rn.type&&(e=void 0),tn(e,t)),[ir.m.reducerPath]:(e,t)=>(t.type===sr.type&&(e=void 0),ir.m.reducer(e,t))},middleware:e=>e().concat(sO,ir.m.middleware)});sO.run((function*(){yield(0,Ym.Q7)([(0,Ym.eG)(Qf),(0,Ym.eG)(iO)])})),(0,$m.eE)(aO.dispatch);const oO=aO,cO=xi.c.extend({name:"QueryModel",initialize(){this._currentState=oO.getState().query,oO.subscribe((()=>{const e=oO.getState();this.trigger("statechange",this,e,this._currentState),this._currentState=e}))},getState:()=>oO.getState().query,toJSON:()=>oO.getState().query});var lO=r(60784);const dO=xi.c.extend({name:"SubtitlesModalModel",sessionAttrs:{serverEntityID:Jn.c.string,metadataItemEntityID:Jn.c.string,isSubtitlesPending:Jn.c.boolean,isSubtitlesPopulated:Jn.c.boolean,subtitlesError:Jn.c.string,subtitlesDownloadActivityID:Jn.c.string,subtitlesDownloadKey:Jn.c.string,subtitlesDownloadStartTime:Jn.c.integer,isSubtitlesDownloaded:Jn.c.boolean,subtitlesDownloadError:Jn.c.string},sessionRelations:{subtitles:{relationClass:lO.c,deferred:!0}},defaults:{serverEntityID:null,metadataItemEntityID:null,isSubtitlesPending:!1,isSubtitlesPopulated:!1,subtitlesError:null,subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null,isSubtitlesDownloaded:!1,subtitlesDownloadError:null}});var uO=r(76400);const pO=xi.c.extend({name:"ProviderIntegrationModel",context:["server","provider"],rootPropertyName:"Integration",syncedAttrs:{id:Jn.c.string.isRequired,status:Jn.c.string.isRequired}}),mO=ki.c.extend({name:"ProviderIntegrationCollection",context:["server","provider"],url:"/integrations",responseType:uO.qS,model:pO}),hO=xi.c.extend({name:"ProviderIntegrationsModel",sessionAttrs:{isIntegrationsOnboarding:Jn.c.boolean.isRequired,isIntegrationsPending:Jn.c.boolean.isRequired,isIntegrationsPopulated:Jn.c.boolean.isRequired,integrationsError:Jn.c.object},sessionRelations:{integrations:{relationClass:mO,deferred:!0}},defaults:{isIntegrationsOnboarding:!1,isIntegrationsPending:!0,isIntegrationsPopulated:!1}});var yO=r(25100);const gO=xi.c.extend({name:"AdvertisingNoticeModalModel",sessionAttrs:{isSaving:Jn.c.boolean,isSaved:Jn.c.boolean,isVendorsPopulated:Jn.c.boolean,isVendorsPending:Jn.c.boolean,vendorsError:Jn.c.object},sessionRelations:{vendors:{relationClass:yO.c,deferred:!0}},defaults:{isSaving:!1,isSaved:!1,isVendorsPopulated:!1,isVendorsPending:!0,vendorsError:null}});var fO=r(96420),vO=Object.defineProperty,bO=Object.defineProperties,SO=Object.getOwnPropertyDescriptors,PO=Object.getOwnPropertySymbols,IO=Object.prototype.hasOwnProperty,EO=Object.prototype.propertyIsEnumerable,wO=(e,t,r)=>t in e?vO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,CO=(e,t)=>{for(var r in t||(t={}))IO.call(t,r)&&wO(e,r,t[r]);if(PO)for(var r of PO(t))EO.call(t,r)&&wO(e,r,t[r]);return e},OO=(e,t)=>bO(e,SO(t));const MO=OO(CO({},fO.c),{getPaginatedUrl(e){const t=this.get("beginsAt"),r=this.get("endsAt");if(null!=t||null!=r){const n={"endsAt>":t,"beginsAt<":r};return S.c.join(e,n)}return e},fetchRange(e){const t=OO(CO({},e),{remove:!1});return e.prepend&&(t.at=0),this.set({beginsAt:e.start,endsAt:e.end}),this.fetch(t).promise()},repopulateRange(e=0){const t=this.get("populatedRange"),r=t.start,n=t.end;return this.set({beginsAt:r,endsAt:n}),this.abortPendingPopulate(),this.fetch()},updatePopulatedRange(){const e=this.get("beginsAt"),t=this.get("endsAt"),r=this.get("populatedRange"),n=r.start,i=r.end;let s,a;this.getCollection().length?n?(s=Math.min(n,null==e?1/0:e),a=Math.max(i,null==t?-1/0:t)):(s=e||n,a=t||i):(s=0,a=0),this.set("populatedRange",{start:s,end:a,size:a-s}),this.set("isPopulated",a-s>0)}}),TO=wt.c.extend({mixins:[MO],name:"ChannelGridMetadataListModel",sessionAttrs:{isMetadataList:Jn.c.boolean,containerKey:Jn.c.string,entityKey:Jn.c.string,containerTitle:Jn.c.string,beginsAt:Jn.c.integer,endsAt:Jn.c.integer,populatedRange:Jn.c.object,isPending:Jn.c.boolean,isPopulated:Jn.c.boolean,error:Jn.c.object},defaults:()=>({isMetadataList:!0,populatedRange:{start:0,end:0,size:0},isPending:!0,isPopulated:!1,error:null})});var DO=r(13836);const kO=xi.c.extend({name:"ProviderTagModel",context:["server","provider"],idAttribute:"id",rootPropertyName:"Directory",syncedAttrs:{id:Jn.c.integer,filter:Jn.c.string,tag:Jn.c.string,tagType:Jn.c.integer,tagValue:Jn.c.integer,thumb:Jn.c.string,channelCallSign:Jn.c.string,channelIdentifier:Jn.c.string,channelVcn:Jn.c.string}}),xO=ki.c.extend({name:"ProviderTagCollection",context:["server","provider","type"],model:kO,cache:new DO.c,url(){const e={type:this.type};return S.c.join([this.provider.get("identifier"),"tags"],e)}}),AO=xi.c.extend({name:"ChannelGridPageModel",sessionAttrs:{serverEntityID:Jn.c.string,providerEntityID:Jn.c.string,containerKey:Jn.c.string,directoryKey:Jn.c.string,startTime:Jn.c.integer,visibleColumns:Jn.c.integer,columnTimes:Jn.c.array,columnWidth:Jn.c.float,viewportWidth:Jn.c.integer,viewportHeight:Jn.c.integer,airedProgress:Jn.c.float,isChannelsListPending:Jn.c.boolean,isChannelsListPopulated:Jn.c.boolean,channelsListError:Jn.c.object},sessionRelations:{metadataList:{relationClass:TO,deferred:!0},channelsList:{relationClass:xO,deferred:!0}},defaults:()=>({startTime:0,visibleColumns:1,columnTimes:[],columnWidth:0,viewportWidth:0,viewportHeight:0,airedProgress:0,isChannelsListPending:!0,isChannelsListPopulated:!1,channelsListError:null})});var RO=r(64504),NO=r(44412);const LO=xi.c.extend({name:"MediaSubscriptionModalModel",sessionAttrs:{isMediaSubscriptionPending:Jn.c.boolean,isMediaSubscriptionPopulated:Jn.c.boolean,mediaSubscriptionError:Jn.c.string,isMediaSubscriptionSaving:Jn.c.boolean,mediaSubscriptionSaveError:Jn.c.string,isMediaSubscriptionMoving:Jn.c.boolean,mediaSubscriptionMoveError:Jn.c.string,isMediaSubscriptionDeleting:Jn.c.boolean,mediaSubscriptionDeleteError:Jn.c.string},sessionRelations:{templates:{relationClass:NO.c,deferred:!0},mediaSubscription:{relationClass:RO.c,deferred:!0}},defaults:{isMediaSubscriptionPending:!0,isMediaSubscriptionPopulated:!1,mediaSubscriptionError:null,isMediaSubscriptionSaving:!1,mediaSubscriptionSaveError:null,isMediaSubscriptionMoving:!1,mediaSubscriptionMoveError:null,isMediaSubscriptionDeleting:!1,mediaSubscriptionDeleteError:null}});var jO=r(17900),UO=r(46748),FO=r(61412),VO=r(78292);const _O=(0,Oe.c)(),WO=xi.c.extend({name:"PlayerModel",sessionAttrs:{serverEntityID:Jn.c.string,providerEntityID:Jn.c.string,playbackSessionID:Jn.c.string,syncplaySessionRoomID:Jn.c.string,isOpen:Jn.c.boolean,previousOpenState:Jn.c.oneOf(dl.m,dl.C),openState:Jn.c.oneOf(dl.m,dl.C),isPlayQueueVisible:Jn.c.boolean,isLyricsVisible:Jn.c.boolean,isPostPlayVisible:Jn.c.boolean,isSettingsVisible:Jn.c.boolean,isChaptersVisible:Jn.c.boolean,isSubtitlesOffsetSettingsVisible:Jn.c.boolean,isWatchTogetherLobbyVisible:Jn.c.boolean,isWatchTogetherParticipantsVisible:Jn.c.boolean,confirmPlayerUpsellPayload:Jn.c.object,confirmPlaybackPayload:Jn.c.object,confirmOffsetPayload:Jn.c.object,confirmRemoteToLocal:Jn.c.boolean,confirmLocalToRemote:Jn.c.oneOf(VO.Gc,VO.qK,VO.SB).isRequired,decisions:Jn.c.object.isRequired,currentDecision:Jn.c.object,startMetadataItemEntityID:Jn.c.string,startOffsetMilliseconds:Jn.c.integer,startMediaIndex:Jn.c.integer,positionSeconds:Jn.c.integer,nextPositionSeconds:Jn.c.integer,lastSeekPositionSeconds:Jn.c.integer,durationSeconds:Jn.c.integer,seekStartSeconds:Jn.c.integer,seekEndSeconds:Jn.c.integer,bandwidthTimeline:Jn.c.object,lastInteractedAt:Jn.c.integer,itemPlaybackTime:Jn.c.integer,sessionPlaybackTime:Jn.c.integer,playbackSpeed:Jn.c.float,isPlayQueueLoading:Jn.c.boolean.isRequired,isLiveTVTuning:Jn.c.boolean.isRequired,isMediaLoading:Jn.c.boolean.isRequired,isPostPlayLoading:Jn.c.boolean.isRequired,isPaused:Jn.c.boolean.isRequired,isBuffering:Jn.c.boolean.isRequired,repeatAll:Jn.c.boolean.isRequired,repeatOne:Jn.c.boolean.isRequired,mediaIndex:Jn.c.integer,partIndex:Jn.c.integer,qualityIndex:Jn.c.integer,availableQualities:Jn.c.array.isRequired,controllable:Jn.c.object,metricsPage:Jn.c.string,metricsContextTuple:Jn.c.array,metricsSetting:Jn.c.string,metricsAutoPlay:Jn.c.boolean,metricsPlayer:Jn.c.oneOf(...FO.y2),hasError:Jn.c.boolean.isRequired,errorMessage:Jn.c.string,errorCode:Jn.c.string,errorCategory:Jn.c.string,playbackStartTime:Jn.c.integer,hasConflicts:Jn.c.boolean.isRequired,isConflictCancelling:Jn.c.boolean,cancelConflictError:Jn.c.object,confirmLiveTVPlayback:Jn.c.boolean.isRequired,adState:Jn.c.string,adPositionSeconds:Jn.c.integer,adDurationSeconds:Jn.c.integer,adDisplayIndex:Jn.c.integer,adDisplayTotal:Jn.c.integer,adTimeOffsetSeconds:Jn.c.oneOfType(Jn.c.integer,Jn.c.float),advertisingNoticePayload:Jn.c.object,bufferedRanges:Jn.c.array,canPlayThrough:Jn.c.boolean,mediaWidth:Jn.c.integer,mediaHeight:Jn.c.integer},derivedAttrs:{isWatchTogether(){return!!this.get("syncplaySessionRoomID")}},sessionRelations:{playQueue:{relationClass:xi.c,deferred:!0},relatedHubs:{relationClass:jO.c,deferred:!0},liveTVSession:{relationClass:UO.c,deferred:!0}},defaults:()=>({playbackSessionID:_O,playbackSpeed:1,isOpen:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isPostPlayVisible:!1,isSettingsVisible:!1,isChaptersVisible:!1,isSubtitlesOffsetSettingsVisible:!1,isWatchTogetherLobbyVisible:!1,isWatchTogetherParticipantsVisible:!1,confirmPlaybackPayload:null,confirmOffsetPayload:null,confirmRemoteToLocal:!1,confirmLocalToRemote:VO.Gc,decisions:{},startMetadataItemEntityID:null,startOffsetMilliseconds:null,startMediaIndex:null,positionSeconds:0,nextPositionSeconds:null,lastSeekPositionSeconds:null,durationSeconds:0,seekStartSeconds:0,seekEndSeconds:0,itemPlaybackTime:0,sessionPlaybackTime:0,isPlayQueueLoading:!1,isLiveTVTuning:!1,isMediaLoading:!1,isPostPlayLoading:!1,isPaused:!1,isBuffering:!1,repeatAll:!1,repeatOne:!1,availableQualities:[],metricsAutoPlay:!1,hasError:!1,errorMessage:null,errorCode:null,errorCategory:null,playbackStartTime:null,hasConflicts:!1,isConflictCancelling:!1,cancelConflictError:null,confirmLiveTVPlayback:!1,adState:null,adPositionSeconds:null,adDurationSeconds:null,adDisplayIndex:null,adDisplayTotal:null,adTimeOffsetSeconds:null,advertisingNoticePayload:null,bufferedRanges:[],canPlayThrough:!1,mediaWidth:null,mediaHeight:null})}),BO=xi.c.extend({name:"ProviderSettingsPageModel",context:["server","provider"],sessionAttrs:{isUpdatePending:Jn.c.boolean,updateError:Jn.c.object},defaults:{isUpdatePending:!1,updateError:null}});var HO=r(87168),zO=r(90358);const GO=xi.c.extend({name:"RecordingSchedulePageModel",sessionAttrs:{isPagePopulated:Jn.c.boolean,isMediaSubscriptionsPending:Jn.c.boolean,isMediaSubscriptionsPopulated:Jn.c.boolean,mediaSubscriptionsError:Jn.c.object,isCalendarPending:Jn.c.boolean,isCalendarPopulated:Jn.c.boolean,calendarError:Jn.c.object,mediaSubscriptionMoveError:Jn.c.string},sessionRelations:{mediaSubscriptions:{relationClass:zO.c,deferred:!0},calendar:{relationClass:HO.c,deferred:!0}},defaults:{isPagePopulated:!1,isMediaSubscriptionsPending:!1,isMediaSubscriptionsPopulated:!1,mediaSubscriptionsError:null,isCalendarPending:!1,isCalendarPopulated:!1,calendarError:null,mediaSubscriptionMoveError:null}});var qO=r(89118),KO=r(25116);const QO=xi.c.extend({name:"WatchTogetherRoomUserModel",syncedAttrs:{id:Jn.c.integer.isRequired,subscription:Jn.c.boolean.isRequired,thumb:Jn.c.string.isRequired,title:Jn.c.string.isRequired,uuid:Jn.c.string.isRequired}}),$O=ki.c.extend({name:"WatchTogetherRoomUserCollection",model:QO}),YO=xi.c.extend({name:"WatchTogetherRoomModel",entityType:om.Af,entityID(e=this.state){return(0,am.c)(this.entityType,e.id)},mergeStrategy:KO.c,sessionAttrs:{isMetadataItemPending:Jn.c.boolean,isMetadataItemPopulated:Jn.c.boolean,metadataItemError:Jn.c.string},syncedAttrs:{id:Jn.c.string.isRequired,title:Jn.c.string.isRequired,sourceUri:Jn.c.string.isRequired,startsAt:Jn.c.integer.isRequired,endsAt:Jn.c.integer.isRequired,updatedAt:Jn.c.integer.isRequired,syncplayHost:Jn.c.string.isRequired,syncplayPort:Jn.c.integer.isRequired},syncedRelations:{metadataItem:{relationClass:Ct.c,deferred:!0},users:{relationClass:$O}},defaults:{isMetadataItemPending:!0,isMetadataItemPopulated:!1,metadataItemError:null}}),XO=ki.c.extend({name:"WatchTogetherRoomCollection",model:YO}),JO=xi.c.extend({name:"WatchTogetherModel",sessionAttrs:{isRoomsPending:Jn.c.boolean,isRoomsPopulated:Jn.c.boolean,roomsError:Jn.c.string,isInvitePending:Jn.c.boolean,isInviteCompleted:Jn.c.boolean,inviteError:Jn.c.string,sessionError:Jn.c.string},sessionRelations:{session:{relationClass:qO.c,deferred:!0},rooms:{relationClass:XO}},defaults:()=>({isRoomsPending:!0,isRoomsPopulated:!1,roomsError:void 0,isInvitePending:!1,isInviteCompleted:!1,inviteError:void 0,sessionError:void 0})}),ZO=xi.c.extend({name:"MultiSelectItemModel",sessionAttrs:{id:Jn.c.any.isRequired,type:Jn.c.string.isRequired},sessionRelations:{model:{relationClass:xi.c,deferred:!0}}}),eM=ki.c.extend({name:"MultiSelectItemCollection",model:ZO}),tM=xi.c.extend({name:"MultiSelectModel",sessionAttrs:{activeSelectionRange:Jn.c.object},sessionRelations:{activeSelectionItems:{relationClass:eM}},derivedAttrs:{activeSelectionType(){const e=this.get("activeSelectionItems").first();if(e)return e.get("type")}},initialize(){this.listenTo(this.get("activeSelectionItems"),{remove:this.resetSelectionRange,reset:this.resetSelectionRange})},listenToCollection(e){this.stopListening(e),this.listenTo(e,{reset:this.onCollectionReset,remove:this.onCollectionRemove})},resetSelectionRange(){this.set("activeSelectionRange",null)},onCollectionReset(e,t){const r=this.get("activeSelectionItems"),n=t.previousModels;v().each(n,(t=>{e.contains(t)||r.remove(t.id)}))},onCollectionRemove(e){this.get("activeSelectionItems").remove(e.id)}}),rM=xi.c.extend({name:"AddToPlaylistMenuModel",sessionAttrs:{uri:Jn.c.string},sessionRelations:{recentPlaylists:{relationClass:wt.c,deferred:!0}}});var nM=r(13396),iM=r(99028);const sM=xi.c.extend({name:"AddToPlaylistModalModel",sessionAttrs:{providerEntityID:Jn.c.string,containerKey:Jn.c.string,type:Jn.c.string,title:Jn.c.string,uri:Jn.c.string,smart:Jn.c.boolean,readOnly:Jn.c.boolean,isUpdating:Jn.c.boolean,error:Jn.c.object},sessionRelations:{server:{relationClass:Zt.default,deferred:!0},provider:{relationClass:iM.c,deferred:!0},metadataItem:{relationClass:Ct.c,deferred:!0},metadataList:{relationClass:wt.c,deferred:!0},multiSelect:{relationClass:tM,deferred:!0},playQueue:{relationClass:nM.c,deferred:!0},playlists:{relationClass:wt.c,deferred:!0}},defaults:{title:"",smart:!1,readOnly:!1,isUpdating:!1}}),aM=xi.c.extend({name:"SubtitlesUploadModalModel",sessionAttrs:{isUploading:Jn.c.boolean,isUploaded:Jn.c.boolean,error:Jn.c.string},defaults:{isUploading:!1,isUploaded:!1,error:null}}),oM=xi.c.extend({name:"ServerLogPageModel",sessionAttrs:{logLines:Jn.c.array.isRequired,unfilteredLogLinesCount:Jn.c.integer.isRequired,filter:Jn.c.string.isRequired,logLevels:Jn.c.array.isRequired,highlightedLineIndex:Jn.c.integer,timeFilterStart:Jn.c.string.isRequired,timeFilterEnd:Jn.c.string.isRequired,isTimeFilterStartValid:Jn.c.boolean.isRequired,isTimeFilterEndValid:Jn.c.boolean.isRequired,showTimeFilter:Jn.c.boolean.isRequired,showRawText:Jn.c.boolean.isRequired},defaults:()=>({logLines:[],unfilteredLogLinesCount:0,filter:"",logLevels:[],timeFilterStart:"",timeFilterEnd:"",isTimeFilterStartValid:!0,isTimeFilterEndValid:!0,showRawText:!1,showTimeFilter:!1})}),cM=xi.c.extend({name:"AccountSettingsPageModel",sessionAttrs:{isUpdatingUserProfile:Jn.c.boolean.isRequired,updateUserProfileError:Jn.c.string},defaults:{isUpdatingUserProfile:!1,updateUserProfileError:null}}),lM=xi.c.extend({name:"AuthCodeExchangeModel",sessionAttrs:{code:Jn.c.string,pinID:Jn.c.integer,pinIDInitial:Jn.c.integer,pinTimeout:Jn.c.integer,authToken:Jn.c.string,isBusy:Jn.c.boolean.isRequired,errorMessage:Jn.c.string,fatalErrorMessage:Jn.c.string},defaults:{code:null,pinID:null,pinIDInitial:null,pinTimeout:null,authToken:null,isBusy:!1,errorMessage:null,fatalErrorMessage:null}}),dM=xi.c.extend({name:"BackgroundModel",sessionAttrs:{imageUrl:Jn.c.string,themeMusicUrl:Jn.c.string,allowBlur:Jn.c.boolean,isBackgroundPending:Jn.c.boolean},sessionRelations:{server:{relationClass:Zt.default,deferred:!0},provider:{relationClass:iM.c,deferred:!0}},defaults:{allowBlur:!0,isBackgroundPending:!1}});var uM=r(21683);const pM=xi.c.extend({name:"DVRSettingsUIModel",sessionAttrs:{isDvrsPending:Jn.c.boolean,isDvrsPopulated:Jn.c.boolean,dvrsError:Jn.c.object,isUIPopulated:Jn.c.boolean},sessionRelations:{dvrs:{relationClass:uM.c,deferred:!0}},defaults:{isDvrsPending:!1,isDvrsPopulated:!1,dvrsError:null,isUIPopulated:!1}}),mM=xi.c.extend({name:"DiscoverPageModel",sessionAttrs:{providerEntityID:Jn.c.string,hubKey:Jn.c.string,isHubsPending:Jn.c.boolean.isRequired,isHubsPopulated:Jn.c.boolean.isRequired,hubsError:Jn.c.object,hubsTitle:Jn.c.string,isPromotedHubsPending:Jn.c.boolean.isRequired,isPromotedHubsPopulated:Jn.c.boolean.isRequired,promotedHubsError:Jn.c.object,knownPromotedHubCloudProviderIDs:Jn.c.array.isRequired},sessionRelations:{hubs:{relationClass:jO.c,deferred:!0},promotedHubs:{relationClass:jO.c,deferred:!0}},defaults:()=>({isHubsPending:!0,isHubsPopulated:!1,hubsError:null,hubsTitle:null,isPromotedHubsPending:!0,isPromotedHubsPopulated:!1,promotedHubsError:null,knownPromotedHubCloudProviderIDs:[]})});var hM=r(78328);const yM=xi.c.extend({name:"OnlineMediaSourcesPageModel",sessionAttrs:{optOutStatuses:Jn.c.object,isOptOutStatusesPending:Jn.c.boolean,optOutStatusesError:Jn.c.object,isAvailableProvidersPending:Jn.c.boolean,isAvailableProvidersPopulated:Jn.c.boolean,availableProvidersError:Jn.c.object,isUpdatePending:Jn.c.boolean,updateError:Jn.c.object},sessionRelations:{availableProviders:{relationClass:hM.c,deferred:!0}},defaults:{isOptOutStatusesPending:!0,optOutStatusesError:null,isAvailableProvidersPending:!0,isAvailableProvidersPopulated:!1,availableProvidersError:null,isUpdatePending:!1,updateError:null}});var gM=r(85916);const fM=xi.c.extend({name:"PlaylistPageModel",sessionAttrs:{serverEntityID:Jn.c.string,providerEntityID:Jn.c.string,metadataKey:Jn.c.string,isPlaylistPending:Jn.c.boolean.isRequired,isPlaylistPopulated:Jn.c.boolean.isRequired,playlistError:Jn.c.object,isPlaylistItemListPending:Jn.c.boolean.isRequired,isPlaylistItemListPopulated:Jn.c.boolean.isRequired,playlistItemListError:Jn.c.object},sessionRelations:{playlist:{relationClass:Ct.c,deferred:!0},playlistItemList:{relationClass:gM.c,deferred:!0}},defaults:{isPlaylistPending:!0,isPlaylistPopulated:!1,playlistError:null,isPlaylistItemListPending:!0,isPlaylistItemListPopulated:!1,playlistItemListError:null}});var vM=r(38238),bM=r(31824);const SM=xi.c.extend({name:"PlaylistsPageModel",sessionAttrs:{serverEntityID:Jn.c.string,libraryKey:Jn.c.string,containerKey:Jn.c.string,isLibraryDetailsPending:Jn.c.boolean.isRequired,isLibraryDetailsPopulated:Jn.c.boolean.isRequired,libraryDetailsError:Jn.c.object,isSortsPending:Jn.c.boolean.isRequired,isSortsPopulated:Jn.c.boolean.isRequired,sortsError:Jn.c.object},sessionRelations:{libraryDetails:{relationClass:vM.c,deferred:!0},playlists:{relationClass:wt.c,deferred:!0},sorts:{relationClass:bM.c,deferred:!0}},defaults:{isLibraryDetailsPending:!0,isLibraryDetailsPopulated:!1,libraryDetailsError:null,isSortsPending:!0,isSortsPopulated:!1,sortsError:null}}),PM=xi.c.extend({name:"PrePlayPageModel",sessionAttrs:{providerEntityID:Jn.c.string,metadataKey:Jn.c.string,descendantKey:Jn.c.string,siblingKey:Jn.c.string,isMetadataItemPending:Jn.c.boolean.isRequired,isMetadataItemPopulated:Jn.c.boolean.isRequired,metadataItemError:Jn.c.object,isRelatedHubsPending:Jn.c.boolean.isRequired,isRelatedHubsPopulated:Jn.c.boolean.isRequired,relatedHubsError:Jn.c.object,isAugmentedHubsPending:Jn.c.boolean.isRequired,isAugmentedHubsPopulated:Jn.c.boolean.isRequired,augmentedHubsError:Jn.c.object,isFileUnavailable:Jn.c.boolean,decisionMediaItem:Jn.c.object},sessionRelations:{metadataItem:{relationClass:Ct.c,deferred:!0},descendantList:{relationClass:wt.c,deferred:!0},siblingList:{relationClass:wt.c,deferred:!0},relatedHubs:{relationClass:jO.c,deferred:!0},augmentedHubs:{relationClass:jO.c,deferred:!0}},defaults:{isMetadataItemPending:!0,isMetadataItemPopulated:!1,metadataItemError:null,isRelatedHubsPending:!0,isRelatedHubsPopulated:!1,relatedHubsError:null,isAugmentedHubsPending:!0,isAugmentedHubsPopulated:!1,augmentedHubsError:null,isFileUnavailable:!1}});var IM=r(45128);const EM=xi.c.extend({name:"MomentModel",context:["server","provider"],idAttribute:"id",rootPropertyName:"Directory",syncedAttrs:{id:Jn.c.string,title:Jn.c.string,size:Jn.c.integer,avgAR:Jn.c.float,startsAt:Jn.c.integer,endsAt:Jn.c.integer}}),wM=ki.c.extend({name:"MomentCollection",context:["server","provider"],model:EM}),CM=xi.c.extend({name:"MomentListModel",context:["server","provider"],url(){return this.get("momentKey")},sessionAttrs:{momentKey:Jn.c.string},syncedAttrs:{key:Jn.c.string},syncedRelations:{moments:{relationClass:wM,rootPropertyName:"Directory"}}}),OM=xi.c.extend({name:"TimelinePageModel",sessionAttrs:{serverEntityID:Jn.c.string,providerEntityID:Jn.c.string,momentKey:Jn.c.string,isDetailsPending:Jn.c.boolean.isRequired,isDetailsPopulated:Jn.c.boolean.isRequired,detailsError:Jn.c.object,isMomentListPending:Jn.c.boolean.isRequired,isMomentListPopulated:Jn.c.boolean.isRequired,momentListError:Jn.c.object},sessionRelations:{metadataList:{relationClass:wt.c,deferred:!0},details:{relationClass:vM.c,deferred:!0},momentList:{relationClass:CM,deferred:!0}},defaults:{isDetailsPending:!0,isDetailsPopulated:!1,detailsError:null,isMomentListPending:!0,isMomentListPopulated:!1,momentListError:null}});var MM=r(52482);const TM=xi.c.extend({name:"UserSharingSettingsPageModel",sessionAttrs:{filterOptionsTags:Jn.c.object,isFilterOptionsTagsPopulating:Jn.c.boolean,isFilterOptionsTagsPopulated:Jn.c.boolean,isUpdatingFriend:Jn.c.boolean,updateFriendError:Jn.c.string,ownedSharedSources:Jn.c.array,receivedSharedSources:Jn.c.array,isSharedSourcesPopulating:Jn.c.boolean,isSharedSourcesPopulated:Jn.c.boolean,sharedSourcesError:Jn.c.string,deleteSharedItemID:Jn.c.integer,isServerOverviewsPopulating:Jn.c.boolean,isServerOverviewsPopulated:Jn.c.boolean,isServerSharesPopulating:Jn.c.boolean,isServerSharesPopulated:Jn.c.boolean,serverSharesError:Jn.c.string,isSharingPending:Jn.c.boolean,isSharingCompleted:Jn.c.boolean,sharingError:Jn.c.string,isRemoveServerSharePending:Jn.c.boolean,isRemoveServerShareCompleted:Jn.c.boolean,removeServerShareError:Jn.c.string},sessionRelations:{serverOverviews:{relationClass:MM.c,deferred:!0}},defaults:()=>({filterOptionsTags:{},isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!1,isUpdatingFriend:!1,updateFriendError:null,ownedSharedSources:[],receivedSharedSources:[],isSharedSourcesPopulating:!1,isSharedSourcesPopulated:!1,sharedSourcesError:null,deleteSharedItemID:null,isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!1,isServerSharesPopulating:!1,isServerSharesPopulated:!1,serverSharesError:null,isSharingPending:!1,isSharingCompleted:!1,sharingError:null,isRemoveServerSharePending:!1,isRemoveServerShareCompleted:!1,removeServerShareError:null})}),DM=xi.c.extend({name:"DesktopUIModel",sessionRelations:{background:{relationClass:dM},authCodeExchange:{relationClass:lM},discoverPage:{relationClass:mM},prePlayPage:{relationClass:PM},timelinePage:{relationClass:OM},playlistsPage:{relationClass:SM},dvrSettingsUI:{relationClass:pM},recordingSchedulePage:{relationClass:GO},channelGridPage:{relationClass:AO},mediaSubscriptionModal:{relationClass:LO},photoPlayer:{relationClass:WO},audioVideoPlayer:{relationClass:WO},onlineMediaSourcesPage:{relationClass:yM},accountSettingsPage:{relationClass:cM},playlistPage:{relationClass:fM},providerSettingsPage:{relationClass:BO},multiSelect:{relationClass:tM},serverLogPage:{relationClass:oM},subtitlesModal:{relationClass:dO},subtitlesUploadModal:{relationClass:aM},addToPlaylistMenu:{relationClass:rM},addToPlaylistModal:{relationClass:sM},shareModal:{relationClass:IM.c},userSharingSettingsPage:{relationClass:TM},providerIntegrations:{relationClass:hO},advertisingNoticeModal:{relationClass:gO},watchTogether:{relationClass:JO}}});var kM=r(2704),xM=r.n(kM),AM=r(78332),RM=r(16608),NM=r(58744),LM=r(50292),jM=r(64984),UM=Object.defineProperty,FM=Object.getOwnPropertySymbols,VM=Object.prototype.hasOwnProperty,_M=Object.prototype.propertyIsEnumerable,WM=(e,t,r)=>t in e?UM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,BM=(e,t)=>{for(var r in t||(t={}))VM.call(t,r)&&WM(e,r,t[r]);if(FM)for(var r of FM(t))_M.call(t,r)&&WM(e,r,t[r]);return e};const HM=xi.c.extend({name:"AdConsentModel",context:["server"],url:"/api/v2/user/consent",responseType:uO.qS,syncedAttrs:{language:Jn.c.string,remindAt:Jn.c.integer,updatedAt:Jn.c.integer,vendorListVersion:Jn.c.integer,vendors:Jn.c.array}}),zM=xi.c.extend({name:"GeoIPModel",context:["server"],url:"/api/v2/geoip",responseType:uO.qS,syncedAttrs:{code:Jn.c.string,in_privacy_restricted_country:Jn.c.boolean,subdivisions:Jn.c.string}});var GM=r(91740);const qM=ki.c.extend({name:"FriendCollection2",context:["server"],model:GM.c,url:"/api/users"}),KM=xi.c.extend({name:"HomeDetailsModel",context:["server"],url:"/api/v2/home",responseType:uO.qS,sessionAttrs:{isTogglingGuestUser:Jn.c.boolean},syncedAttrs:{id:Jn.c.integer,guestUserID:Jn.c.integer,guestEnabled:Jn.c.boolean,subscription:Jn.c.boolean,name:Jn.c.string},defaults:{isTogglingGuestUser:!1}});var QM=r(8296),$M=r(54488);const YM=xi.c.extend({name:"UserOptOutModel",IdAttribute:"key",syncedAttrs:{key:Jn.c.string,value:Jn.c.string}}),XM=ki.c.extend({name:"UserOptOutCollection",context:["server"],model:YM,url:"/api/v2/user/settings/opt_outs",responseType(){return(0,Wc.c)(this.server)},augmentResponse:e=>Object.keys(e).map((t=>({key:t,value:e[t]})))}),JM=xi.c.extend({name:"UserProfileModel",context:["server"],url:"/api/v2/user/profile",syncedAttrs:{autoSelectAudio:Jn.c.boolean,autoSelectSubtitle:Jn.c.integer,defaultAudioLanguage:Jn.c.string,defaultSubtitleLanguage:Jn.c.string,defaultSubtitleAccessibility:Jn.c.integer,defaultSubtitleForced:Jn.c.integer}});var ZM=r(12372),eT=r(82108),tT=r(45524);const rT=ki.c.extend({name:"UserSettingCollection",context:["server"],model:tT.c});var nT=r(45791),iT=Object.defineProperty,sT=Object.defineProperties,aT=Object.getOwnPropertyDescriptors,oT=Object.getOwnPropertySymbols,cT=Object.prototype.hasOwnProperty,lT=Object.prototype.propertyIsEnumerable,dT=(e,t,r)=>t in e?iT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uT=(e,t)=>{for(var r in t||(t={}))cT.call(t,r)&&dT(e,r,t[r]);if(oT)for(var r of oT(t))lT.call(t,r)&&dT(e,r,t[r]);return e},pT=(e,t)=>sT(e,aT(t));const mT=xi.c.extend({mixins:[Lm.c],name:"UserModel",context:["server"],url(){return S.c.join("/api/v2/user",yn(this))},sessionAttrs:{isSignedIn:Jn.c.boolean.isRequired,hasAttemptedSignIn:Jn.c.boolean.isRequired,hasInvalidToken:Jn.c.boolean.isRequired,hasInvalidAnonymousUserToken:Jn.c.boolean.isRequired,lastPrimaryServerID:Jn.c.string,lockState:Jn.c.oneOf(on.Z9.Pending,on.Z9.Locked,on.Z9.Unlocked).isRequired,homeUsers:Jn.c.instanceOf(QM.c).isRequired,isFeaturesPending:Jn.c.boolean.isRequired,isFeaturesPopulated:Jn.c.boolean.isRequired,featuresError:Jn.c.object,isAllFriendsPending:Jn.c.boolean.isRequired,isAllFriendsPopulated:Jn.c.boolean.isRequired,allFriendsError:Jn.c.object,isProvidersPending:Jn.c.boolean.isRequired,isProvidersPopulated:Jn.c.boolean.isRequired,providersError:Jn.c.object,isOptOutsPending:Jn.c.boolean.isRequired,isOptOutsPopulated:Jn.c.boolean.isRequired,optOutsError:Jn.c.object},syncedAttrs:{id:Jn.c.integer,uuid:Jn.c.string,authToken:Jn.c.string,anonymous:Jn.c.boolean,username:Jn.c.string,friendlyName:Jn.c.string,email:Jn.c.string,confirmed:Jn.c.boolean,emailOnlyAuth:Jn.c.boolean,title:Jn.c.string,subscriptionDescription:Jn.c.string,locale:Jn.c.string,country:Jn.c.string,thumb:Jn.c.string,pin:Jn.c.string,home:Jn.c.boolean,restricted:Jn.c.boolean,restrictionProfile:Jn.c.string,guest:Jn.c.boolean,homeSize:Jn.c.integer,maxHomeSize:Jn.c.integer,queueUid:Jn.c.string,queueEmail:Jn.c.string,hasAllEntitlements:Jn.c.boolean,mailingListActive:Jn.c.boolean,experimentalFeatures:Jn.c.boolean,hasPassword:Jn.c.boolean,twoFactorEnabled:Jn.c.boolean,mailingListStatus:Jn.c.oneOf(on.gd.Empty,on.gd.Unsubscribed,on.gd.Active,on.gd.Error,on.gd.Removed),adsConsent:Jn.c.boolean,adsConsentSetAt:Jn.c.integer,adsConsentReminderAt:Jn.c.integer},sessionRelations:{features:{relationClass:NM.c},allFriends:{relationClass:qM},providers:{relationClass:RM.c},homeDetails:{relationClass:KM},optOuts:{relationClass:XM}},syncedRelations:{subscriptions:{relationClass:nT.c},pastSubscriptions:{relationClass:nT.c},roles:{relationClass:ZM.c},entitlements:{relationClass:$M.c},settings:{relationClass:rT},consent:{relationClass:HM},geo:{relationClass:zM},experienceSettings:()=>({relationClass:(0,g.WI)("UserExperienceSettingsModel")}),services:{relationClass:eT.c},profile:{relationClass:JM}},derivedAttrs:{isLocked(){return this.get("lockState")===on.Z9.Locked},isUnlocked(){return this.get("lockState")===on.Z9.Unlocked},isFullUser(){return!!this.get("username")||!!this.get("anonymous")},isEmployee(){return!!this.get("roles").get("employee")},isNinja(){return this.get("isEmployee")||!!this.get("roles").get("ninja")},hasPlexSubscription(){return this.get("subscriptions").some((e=>{const t=e.get("state");return t===LM.YX||t===LM.C6}))},hasPlexPass(){return this.get("subscriptions").some((e=>{const t=e.get("type"),r=e.get("state");return t===vf._m&&(r===LM.YX||r===LM.C6)}))},canGoPremium(){const e=this.get("homeSize")>1,t=!1===this.get("homeDetails").get("subscription");return this.get("signedIn")&&!this.get("anonymous")&&!this.get("restricted")&&!this.get("hasPlexSubscription")&&(!e||t)},signedIn(){return this.get("isSignedIn")},locked(){const e=this.get("lockState");return e===on.Z9.Locked||e!==on.Z9.Unlocked&&null}},defaults(){const e={server:this.server,parent:this};return{id:0,isSignedIn:!1,hasAttemptedSignIn:!1,hasInvalidToken:!1,hasInvalidAnonymousUserToken:!1,hasPassword:!0,lockState:on.Z9.Pending,homeUsers:new QM.c([],e),twoFactorEnabled:!1,isFeaturesPending:!0,isFeaturesPopulated:!1,featuresError:null,isAllFriendsPending:!0,isAllFriendsPopulated:!1,allFriendsError:null,isProvidersPending:!0,isProvidersPopulated:!1,providersError:null,isOptOutsPending:!0,isOptOutsPopulated:!1,optOutsError:null}},initialize(e,t){this._resetPopulate(),this.onHomeUsersChange(this,this.get("homeUsers")),this.on("change:homeUsers",this.onHomeUsersChange,this),this.listenTo(this.server,{"change:isConnected":this.onServerConnectedChange,"change:isUnavailable":this.onServerUnavailableChange})},uninitialize(){this.off("change:homeUsers",this.onHomeUsersChange,this),this.stopListening()},fetch(){return Lp.cp.Model.prototype.fetch.apply(this,arguments)},augmentResponse(e={}){const t=e,{roles:r,entitlements:n,settings:i,providers:s,subscriptions:a,pastSubscriptions:o}=t,c=((e,t)=>{var r={};for(var n in e)cT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oT)for(var n of oT(e))t.indexOf(n)<0&&lT.call(e,n)&&(r[n]=e[n]);return r})(t,["roles","entitlements","settings","providers","subscriptions","pastSubscriptions"]);let l=i&&i.setting?i.setting:[];l=Array.isArray(l)?l:[l];const d=this.get("experienceSettings");let u=!1;const p=l.reduce(((e,t)=>(t.id===Ni.M?(u=!0,e.experienceSettings=pT(uT({},(0,Nn.c)(t.value)),{updatedAt:t.updatedAt})):e.settings.push(t),e)),{settings:[],experienceSettings:{}});return!u&&d&&(p.experienceSettings=d.toJSON({syncedOnly:!0})),c.gdprConsent&&(c.adsConsent=c.gdprConsent),c.gdprSetAt&&(c.adsConsentSetAt=c.gdprSetAt),c.gdprReminderAt&&(c.adsConsentReminderAt=c.gdprReminderAt),pT(uT(uT({},c),p),{roles:r&&r.role,hasAllEntitlements:n&&n.all,entitlements:n&&n.entitlement,services:s&&s.provider,subscriptions:a&&a.subscription,pastSubscriptions:o&&o.pastSubscription})},_getTokenPromise(){var e,t;return null==(t=null==(e=(0,g.WI)("appModel").get("ui"))?void 0:e.get("authCodeExchange"))||t.get("pinIDInitial"),(se.c.allowSSO?this._getSSOThenStorageTokenPromise():this._getStorageTokenPromise()).then(null,(()=>(this.get("hasInvalidAnonymousUserToken"),this._getSkipAnonymousTokenPromise())))},_getSSOThenStorageTokenPromise(){const e=this._getStorageTokenPromise(),t=this._getSSOTokenPromise(),r=()=>this.get("anonymous")?((0,b.c)("[User] SSO status is not available, try stored anonymous token"),e):((0,b.c)("[User] SSO status is signed-out"),e.then((()=>(0,z.c)(this.signOutDueToInvalidToken()))));return t.then((t=>t?(t=>e.then((e=>t===e?((0,b.c)("[User] SSO status is signed-in, storage token matches SSO token"),t):((0,b.c)(`[User] SSO status is signed-in, storage accessToken=${e} and SSO accessToken=${t} differ`),Ve.c.execute("resetUser").then((()=>{window.location.reload()})))),(()=>((0,b.c)("[User] SSO status is signed-in, storage token is not present"),c().Deferred().resolve(t).promise()))))(t):r()),(()=>((0,b.c)("[User] SSO status is not available"),e)))},_getStorageTokenPromise:()=>we.c.get("myPlexAccessToken"),_getSSOTokenPromise(){return In(this.server.getXHROptions("/api/v2/users/signin",{method:"POST",xhrFields:{withCredentials:!0},data:{skipAuthentication:!0},dataType:"json"})).then((e=>e.authToken),(e=>e&&400===e.status?c().Deferred().resolve(null).promise():c().Deferred().reject().promise()))},_getSkipAnonymousTokenPromise:()=>((0,b.c)("[User] Not attempting to create an anonymous token."),c().Deferred().reject().promise()),_getAnonymousTokenPromise(){const e=function(e,t){if(!t||!t.campaign)return e;return function(e,t){const{base:r,searchParams:n,hashPath:i,hashParams:s}=(0,G.c)(e),a=(0,H.c)(n);return`${r}?${(0,jM.c)(BM(BM({},a),t))}${(i||s?"#":"")+i+s}`}(e,Object.keys(t.campaign).reduce(((e,r)=>(e[`utm_${r}`]=t.campaign[r],e)),{}))}("/api/v2/users/anonymous",(0,g.WI)("metrics").toJSON().context);return In(this.server.getXHROptions(e,{method:"POST",dataType:"json"})).then((({authToken:e})=>((0,b.c)("[User] Anonymous token promise succeeded, accessToken="+e),e)))},_getManualUserPromise(e){return c().ajax(this.server.getXHROptions(v().result(this,"url"),{headers:{"X-Plex-Token":e}}))},signInUnsupervised(){if(this._isSigningIn)return;this._isSigningIn=!0;const e=this._getTokenPromise();e.done((e=>{(0,b.c)("[User] Token promise succeeded, accessToken="+e);const t=e?this._getManualUserPromise(e):c().Deferred().reject().promise();t.done((t=>{(0,b.c)("[User] userPromise succeeded");const r=this.get("homeDetails");r.fetch({headers:{"X-Plex-Token":e}}).always((()=>{const e=this.parse(t);let n=this.get("lockState");if(n!==on.Z9.Unlocked){const t=(0,g.WI)("settingFinder").find("autoLogin"),i=!!e.guest&&!r.get("guestEnabled");n=!e.home||t&&!i?on.Z9.Unlocked:on.Z9.Locked}this.signIn(e,{lockState:n}),this._isSigningIn=!1}))})),t.fail((e=>{if((0,b.c)("[User] userPromise failed"),e&&e.aborting)return this.set({hasAttemptedSignIn:!0}),void(this._isSigningIn=!1);!e||401!==e.status&&422!==e.status?this.signOut({hasAttemptedSignIn:!0,hasInvalidToken:!1,features:this.get("features"),allFriends:this.get("allFriends"),settings:this.get("settings"),experienceSettings:this.get("experienceSettings")}):this.get("anonymous")?((0,b.c)("[User] userPromise failed for anonymous user due to invalid token."),this.signOutAnonymousUser()):((0,b.c)("[User] userPromise failed due to invalid token."),this.signOutDueToInvalidToken()),this.server.testAllConnections(),this._isSigningIn=!1}))})),e.fail((()=>{(0,b.c)("[User] tokenPromise failed"),this.signOut({hasAttemptedSignIn:!0,hasInvalidAnonymousUserToken:this.get("hasInvalidAnonymousUserToken"),features:this.get("features"),allFriends:this.get("allFriends"),settings:this.get("settings"),experienceSettings:this.get("experienceSettings")}),this._isSigningIn=!1}))},signIn(e,t={},r={}){const n=v().isString(e)?this.parse(e):e,i=n.authToken,s=uT(uT({hasAttemptedSignIn:!0,isSignedIn:!0},n),t);return this._resolve(s,r),we.c.set("myPlexAccessToken",i)},signOut(e={}){return this._reject(e),c().Deferred().resolve().promise()},signOutAnonymousUser(){return(0,Ce.c)([this.signOut({hasAttemptedSignIn:!0,hasInvalidAnonymousUserToken:!0}),this.clearAccessToken()])},signOutDueToInvalidToken(){return(0,Ce.c)([this.signOut({hasAttemptedSignIn:!0,hasInvalidToken:!0}),this.clearAccessToken()])},activateStoredUser(e){an.c.set("activeUserID",e)},clearAccessToken(){window.PLEXWEB&&window.PLEXWEB.myPlexAccessToken&&delete window.PLEXWEB.myPlexAccessToken;let e=we.c.remove("myPlexAccessToken");return e=e.then((()=>an.c.clearActiveUser())),e},hashPIN(e,t=this.get("authToken")){return xM().SHA256_hash(e+t)},hasEntitlement(e){const t=this.get("hasAllEntitlements"),r=this.get("entitlements");return!(!t&&!r.get(e))},hasHome(){return!!this.get("pin")||this.get("homeUsers").length>1},isFullUser(){return this.get("isFullUser")},isEmployee(){return this.get("isEmployee")},isNinja(){return this.get("isNinja")},_resolve(e,t={}){this.startCapturingChangeEvents(),this.activateStoredUser(e.id),this.set(e),this._resolvePopulate(),this.server.authenticate(e.authToken),t.silent?this.discardCapturedChangeEvents():this.releaseCapturedChangeEvents()},_reject(e,t={}){this.startCapturingChangeEvents(),this.restoreDefaults(e),this._rejectPopulate(),this.server.deauthenticate(),t.silent?this.discardCapturedChangeEvents():this.releaseCapturedChangeEvents()},onHomeUsersChange(e,t){const r=e.previous("homeUsers");r&&this.stopListening(r),this.listenTo(this.get("homeUsers"),"reset add remove",this.onHomeUsersUpdate)},onHomeUsersUpdate(){this.set("homeSize",this.get("homeUsers").length),this.get("homeDetails").fetch()},onServerConnectedChange(e,t){t&&this.signInUnsupervised()},onServerUnavailableChange(e,t){t&&this.signOut({lockState:this.get("lockState"),features:this.get("features"),allFriends:this.get("allFriends"),settings:this.get("settings"),experienceSettings:this.get("experienceSettings")})}});(0,AM.c)(mT,(function(){return{relationClass:(0,g.WI)("UserFlexModel")}}));const hT=mT,yT="backgroundTranscodeJobs",gT=xi.c.extend({name:"StoreModel",initialize(){this._currentState=oO.getState(),oO.subscribe((()=>{const e=oO.getState();this.trigger("statechange",this,e,this._currentState),this._currentState=e}))},getState:()=>oO.getState(),toJSON:()=>oO.getState(),dispatch(e){oO.dispatch(e)},getStatePromise:e=>e(oO.dispatch,oO.getState)}),fT=Rm.extend({name:"DesktopAppModel",sessionAttrs:{clientID:Jn.c.string,anonymousClientID:Jn.c.string,authorized:Jn.c.boolean.isRequired,skipSignIn:Jn.c.boolean.isRequired,isWaitingForServers:Jn.c.boolean.isRequired,isWaitingForPrimaryServer:Jn.c.boolean.isRequired,history:Jn.c.array.isRequired,drmType:Jn.c.oneOf(...Object.values(Ps)),isFullscreen:Jn.c.boolean.isRequired,isUpdateAvailable:Jn.c.boolean.isRequired,castApiAvailability:Fm.qj.isRequired,settings:Jn.c.instanceOf(os)},sessionRelations:{entities:{relationClass:function(e){const t={};for(const r in e)t[e[r]]={relationClass:Km};return xi.c.extend({name:"EntitiesModel",sessionRelations:t})}(i)},servers:{relationClass:Um},cloudServer:{relationClass:Nm.c,deferred:!0},primaryServer:{relationClass:Zt.default,deferred:!0},companionServer:{relationClass:Zt.default,deferred:!0},user:{relationClass:hT,deferred:!0},remotePlayer:{relationClass:xi.c,deferred:!0},deviceSettings:{relationClass:si},ui:{relationClass:DM},v4:{relationClass:gT},query:{relationClass:cO}},defaults(){const e=new Nm.c({machineIdentifier:Vm.A},{parent:this});return{authorized:!1,skipSignIn:!1,isWaitingForServers:!1,isWaitingForPrimaryServer:!1,isUpdateAvailable:!1,history:[],cloudServer:e,user:new hT({},{server:e,parent:this}),isFullscreen:!1,castApiAvailability:Fm.Eq,settings:new os}},dispatch(e){this.get("v4").dispatch(e)},getStatePromise(e){return this.get("v4").getStatePromise(e)}}),vT=fT,bT=xi.c.extend({name:"OauthProviderUsageModel",syncedAttrs:{federatedAuth:Jn.c.boolean,other:Jn.c.boolean}}),ST=xi.c.extend({name:"OauthProviderModel",rootPropertyName:"provider",sessionAttrs:{isUnlinking:Jn.c.boolean.isRequired,unlinkError:Jn.c.object},syncedAttrs:{authName:Jn.c.string,image:Jn.c.string,label:Jn.c.string.isRequired,linked:Jn.c.boolean.isRequired,nickname:Jn.c.string,url:Jn.c.string.isRequired},syncedRelations:{usage:{relationClass:bT}},defaults:{isUnlinking:!1}}),PT=ki.c.extend({name:"OauthProviderCollection",model:ST,context:["server"],url:"/api/v2/authentications/providers",responseType:uO.qS}),IT=xi.c.extend({name:"CloudServerFlexModel",context:["server"],sessionAttrs:{isOauthProvidersPending:Jn.c.boolean,isOauthProvidersPopulated:Jn.c.boolean,oauthProvidersError:Jn.c.object},sessionRelations:{oauthProviders:{relationClass:PT}},defaults:{isOauthProvidersPending:!1,isOauthProvidersPopulated:!1,oauthProvidersError:null}});var ET=r(94944);const wT=xi.c.extend({name:"PlexPlayerModel",context:["server","baseURL"],rootPropertyName:"Server",sessionAttrs:{volume:Jn.c.integer},syncedAttrs:{machineIdentifier:Jn.c.string,name:Jn.c.string,title:Jn.c.string,address:Jn.c.string,port:Jn.c.string,deviceClass:Jn.c.string,version:Jn.c.string,product:Jn.c.string,protocol:Jn.c.string,protocolVersion:Jn.c.string,protocolCapabilities:Jn.c.list},derivedAttrs:{friendlyName(){return this.get("title")||this.get("name")||this.get("product")},playerIdentifier(){return`${this.baseURL}:${this.get("machineIdentifier")}`}},defaults:{volume:100}}),CT=ki.c.extend({name:"PlexPlayerCollection",context:["server"],model:wT,url:"/clients",augmentResponse(e){const t=(0,g.WI)("appModel").get("clientID"),r=parseInt(e.size,10);return 1===r&&e.Server.machineIdentifier===t?(delete e.Server,e.size="0"):r>1&&(e.Server=e.Server.filter((e=>e.machineIdentifier!==t)),e.size=e.Server.length.toString()),e}}),OT=xi.c.extend({name:"ActivityModel",context:["server"],idAttribute:"uuid",rootPropertyName:"Activity",responseType(){return(0,Wc.c)(this.server)},sessionAttrs:{synthetic:Jn.c.boolean},syncedAttrs:{uuid:Jn.c.string,userID:Jn.c.integer,title:Jn.c.string,subtitle:Jn.c.string,progress:Jn.c.integer,event:Jn.c.string,cancellable:Jn.c.boolean,type:Jn.c.string,Context:Jn.c.object,Response:Jn.c.object},defaults:()=>({Context:{},Response:{}})}),MT=ki.c.extend({name:"ActivityCollection",context:["server"],model:OT,url:"/activities",responseType(){return(0,Wc.c)(this.server)}});var TT=r(74844);const DT=TT.c.extend({pageSize:10,pages:function(){return Math.max(Math.ceil(this.length/this.pageSize),1)},page:function(e,t){t||(t={});let r,n=0;return r=t.reverse?this.length-e*this.pageSize:e*this.pageSize-this.pageSize,r<0&&(n=r,r=0),this.models.slice(r,r+this.pageSize+n)}});var kT=r(71832);let xT=0;const AT=kT.c.extend({idAttribute:"id",parse:function(e){const t=e;return t.time=new Date,t.id="evt"+xT++,"preference"===t._type&&(t.value=String(t.value)),t}}),RT=DT.extend({model:AT,url:"/servers",pageSize:20,limit:1e3,initialize:function(){this.startTime=new Date,this.listenTo(this.server,"socket:setting",this.onSettingChange),this.listenTo(this.server,"socket:timeline",this.onTimeline),this.listenTo(this.server,"socket:status",this.onStatus),this.listenTo(this.server,"socket:playing",this.onPlaying),this.listenTo(this.server,"socket:websocket",this.onWebSocket)},add:function(e){this.length+1>this.limit&&this.remove(this.at(0)),DT.prototype.add.apply(this,arguments)},onSettingChange:function(e){e.label&&this.add(v().extend({_type:"setting"},e),{parse:!0})},onTimeline:function(e){1===e.state||e.sectionID<0||this.add(v().extend({_type:"timeline"},e),{parse:!0})},onStatus:function(e){"ProgressNotification"!==e._elementType&&this.add(v().extend({_type:"status"},e),{parse:!0})},onPlaying:function(e){this.add(v().extend({_type:"playing"},e),{parse:!0})},onWebSocket:function(e){this.add(v().extend({_type:"websocket"},e),{parse:!0})}});var NT=r(97036);const LT=xi.c.extend({name:"TranscodeJobModel",context:["server"],entityType:om.oV,entityID(e=this.state){return(0,am.c)(this.entityType,e.syncItemId,this.server.entityID())},idAttribute:"syncItemId",rootPropertyName:"TranscodeJob",syncedAttrs:{syncItemId:Jn.c.integer,syncItemTitle:Jn.c.string,key:Jn.c.string,type:Jn.c.string,progress:Jn.c.float,speed:Jn.c.float,remaining:Jn.c.string,size:Jn.c.string,title:Jn.c.string,thumb:Jn.c.string},responseType(){return(0,Wc.c)(this.server)}}),jT=ki.c.extend({name:"TranscodeJobCollection",context:["server"],model:LT,cache:new DO.c,url:"/sync/transcodeQueue"}),UT=xi.c.extend({name:"BackgroundTranscodeJobModel",context:["server"],entityType:yT,entityID(e=this.state){return(0,am.c)(this.entityType,e.key,this.server.entityID())},idAttribute:"key",rootPropertyName:"TranscodeJob",syncedAttrs:{queueItemID:Jn.c.integer,generatorID:Jn.c.integer,targetTagID:Jn.c.integer,syncItemId:Jn.c.integer,syncItemTitle:Jn.c.string,key:Jn.c.string,type:Jn.c.string,progress:Jn.c.float,speed:Jn.c.float,remaining:Jn.c.integer,size:Jn.c.integer,ratingKey:Jn.c.string,title:Jn.c.string,thumb:Jn.c.string}}),FT=ki.c.extend({name:"BackgroundTranscodeJobCollection",model:UT,context:["server"],url:"/status/sessions/background"}),VT=xi.c.extend({name:"NeighborhoodDeviceModel",context:["server"],idAttribute:"uuid",rootPropertyName:"Device",syncedAttrs:{uuid:Jn.c.string.isRequired,address:Jn.c.string.isRequired,title:Jn.c.string,manufacturer:Jn.c.string,model:Jn.c.string,modelNumber:Jn.c.string,serialNumber:Jn.c.string}}),_T=ki.c.extend({name:"NeighborhoodDeviceCollection",context:["server"],model:VT,url:"neighborhood/devices"}),WT=xi.c.extend({name:"ServerFlexModel",context:["server"],sessionAttrs:{alerts:Jn.c.instanceOf(RT).isRequired,hasiTunes:Jn.c.boolean,isHasiTunesPopulated:Jn.c.boolean,isSettingsPending:Jn.c.boolean,isSettingsPopulated:Jn.c.boolean,settingsError:Jn.c.object,isLibrariesPending:Jn.c.boolean.isRequired,isLibrariesPopulated:Jn.c.boolean.isRequired,librariesError:Jn.c.object,cleanBundlesError:Jn.c.string,optimizeDatabaseError:Jn.c.string},sessionRelations:{settings:{relationClass:NT.c,rootPropertyName:"Setting"},cloudAccount:{relationClass:Yt.cp},libraries:{relationClass:ET.c},activities:{relationClass:MT},transcodeJobs:{relationClass:jT},backgroundTranscodeJobs:{relationClass:FT},players:{relationClass:CT},neighborhoodDevices:{relationClass:_T},update:{relationClass:gm}},defaults(){return{alerts:new RT([],{server:this.server}),hasiTunes:!1,isHasiTunesPopulated:!1,isSettingsPending:!0,isSettingsPopulated:!1,settingsError:null,isLibrariesPending:!0,isLibrariesPopulated:!1,librariesError:null,cleanBundlesError:null,optimizeDatabaseError:null}}});var BT,HT,zT=Object.defineProperty,GT=Object.defineProperties,qT=Object.getOwnPropertyDescriptors,KT=Object.getOwnPropertySymbols,QT=Object.prototype.hasOwnProperty,$T=Object.prototype.propertyIsEnumerable,YT=(e,t,r)=>t in e?zT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,XT=(e,t)=>{for(var r in t||(t={}))QT.call(t,r)&&YT(e,r,t[r]);if(KT)for(var r of KT(t))$T.call(t,r)&&YT(e,r,t[r]);return e};const JT=Zn.c.extend({name:"StoredUserExperienceSettingsModel",syncedAttrs:(BT=XT({},qi.prototype.syncedAttrs),HT={isDirty:Jn.c.boolean},GT(BT,qT(HT))),syncedRelations:XT({},qi.prototype.syncedRelations)}),ZT=ki.c.extend({name:"CloudPlayerCollection",context:["server","baseURL"],model:wT,augmentResponse:e=>(e.Server||(e.Server=e.Player,delete e.Player),e)});var eD=r(23408);const tD=xi.c.extend({name:"CloudCompanionModel",context:["server"],idAttribute:"identifier",rootPropertyName:"Companion",syncedAttrs:{identifier:Jn.c.string,title:Jn.c.string,baseURL:Jn.c.string,linkURL:Jn.c.string,provides:Jn.c.list},sessionAttrs:{linkState:Jn.c.string},sessionRelations:{cloudPlayers:{relationClass:ZT,options(){return{url:`${this.get("baseURL")}/resources`,baseURL:this.get("baseURL")}}}},defaults:{linkState:eD._g}}),rD=ki.c.extend({name:"CloudCompanionCollection",context:["server"],model:tD,url:"/api/v2/companions",responseType:uO.qS,augmentResponse(e){const t=e,r=(0,g.WI)("appModel"),n=(r&&r.get("deviceSettings")).get("sonosCustomBaseURL");if(n&&t&&t.length){const e=t.find((({identifier:e})=>"tv.plex.sonos"===e));e&&t.push({identifier:"tv.plex.sonos-custom",title:"Sonos (Custom)",baseURL:n,linkURL:S.c.join([n,"link"]),provides:e.provides,token:e.token})}return e}}),nD=xi.c.extend({name:"AnnouncementModel",context:["server"],rootPropertyName:"Announcement",syncedAttrs:{id:Jn.c.integer,title:Jn.c.string,content:Jn.c.string,imageUrl:Jn.c.string,style:Jn.c.string,url:Jn.c.string,expireAt:Jn.c.string,notifyAt:Jn.c.string,read:{type:Jn.c.boolean,save:!0}},markAsRead(){this.get("read")||this.save("read",!0)}}),iD=ki.c.extend({name:"AnnouncementCollection",model:nD,context:["server"],url:"api/announcements"}),sD=xi.c.extend({name:"DeviceModel",context:["server"],rootPropertyName:"Device",url(){return"/devices/"+this.id+".xml"},syncedAttrs:{id:Jn.c.string,clientIdentifier:Jn.c.string,name:Jn.c.string,product:Jn.c.string,productVersion:Jn.c.string,platform:Jn.c.string,platformVersion:Jn.c.string,device:Jn.c.string,model:Jn.c.string,provides:Jn.c.list,screenResolution:Jn.c.string,screenDensity:Jn.c.string,lastSeenAt:Jn.c.integer},supports(e){return-1!==this.get("provides").indexOf(e)}}),aD=ki.c.extend({name:"DeviceCollection",context:["server"],model:sD,url:"/devices.xml",filterByProducts(e){const t=this.filter((t=>v().contains(e,t.get("product"))));return this.clone(t)},filterByPlatforms(e){const t=this.filter((t=>v().contains(e,t.get("platform"))));return this.clone(t)},products(){const e=this.map((e=>e.get("product")));return v().uniq(e)}}),oD=aD;var cD=r(49768);const lD=ki.c.extend({name:"HomeUserCollection2",context:["server"],model:cD.c,url:"/api/home/users",parse(e){return this.convert(e,"User")}});var dD=r(26344),uD=r.n(dD);const pD=xi.c.extend({name:"InviteModel",context:["server"],rootPropertyName:"Invite",sessionAttrs:{isAccepting:Jn.c.boolean,isRemoving:Jn.c.boolean},syncedAttrs:{id:{type:Jn.c.string,save:!0},friend:Jn.c.boolean,home:Jn.c.boolean,server:Jn.c.boolean,friendlyName:Jn.c.string,username:Jn.c.string,email:Jn.c.string,thumb:Jn.c.string,createdAt:Jn.c.integer,Server:Jn.c.array},urlRoot:"/api/invites/requests",url(){let e;if(this.isNew())e=v().result(this,"urlRoot");else{const t=this.pick("friend","server","home");v().each(v().keys(t),(function(e){t[e]=t[e]?"1":"0"})),e=this.collection?v().result(this.collection,"url"):v().result(this,"urlRoot"),e=e.replace(/([^/])$/,"$1/")+encodeURIComponent(this.get("id")),e=S.c.join(e,t)}return e},augmentResponse:e=>e.Server?((Array.isArray(e.Server)?e.Server:[e.Server]).forEach((e=>{e.numLibraries=(0,Ci.c)(e.numLibraries)})),e):e,defaults:{isAccepting:!1,isRemoving:!1}}),mD=ki.c.extend({name:"InviteCollection",context:["server","subset"],model:pD,url(){return"/api/invites/"+this.subset},initialize(e,t){t||(t={}),this.subset=t.subset||"requests"},filterByHome(){const e=new(uD())(this);return e.filterBy((e=>e.get("home"))),e},filterByFriends(){const e=new(uD())(this);return e.filterBy((e=>!e.get("home"))),e}}),hD=kT.c.extend({idAttribute:"key",whitelistedAttrs:["key","title","linked","maxLength"],convert:function(e){const t=v().isObject(e)?e:Re.c.parseXML(e);return Re.c.parseBoolean(t,["linked","maxLength"]),t},parse:function(e){let t=this.convert(e);return t=v().pick(t,this.whitelistedAttrs),t}}),yD=TT.c.extend({model:hD,url:"/pms/social/networks",parse:function(e){return this.convert(e,"Directory")}}),gD=xi.c.extend({name:"SubscriptionPlanModel",context:["server"],rootPropertyName:"plan",syncedAttrs:{id:Jn.c.string,name:Jn.c.string,price:Jn.c.float,formattedPrice:Jn.c.string,currency:Jn.c.string}}),fD=ki.c.extend({name:"SubscriptionPlanCollection",context:["server"],model:gD,url:"/api/subscriptions/plans"}),vD=xi.c.extend({name:"WebhookModel",syncedAttrs:{url:Jn.c.string},defaults:{url:""}}),bD=ki.c.extend({name:"WebhookCollection",context:["server"],model:vD,url:"/api/v2/user/webhooks",responseType:uO.qS}),SD=xi.c.extend({name:"UserFlexModel",context:["server"],sessionAttrs:{isHomeUsersPending:Jn.c.boolean.isRequired,isHomeUsersPopulated:Jn.c.boolean.isRequired,homeUsersError:Jn.c.object,socialNetworks:Jn.c.instanceOf(yD).isRequired,isPlansPending:Jn.c.boolean.isRequired,isPlansPopulated:Jn.c.boolean.isRequired,plansError:Jn.c.object,isUpdatingUser:Jn.c.boolean.isRequired,updateUserError:Jn.c.object,isHomeDetailsPending:Jn.c.boolean,isHomeDetailsPopulated:Jn.c.boolean,homeDetailsError:Jn.c.object,isInvitesPending:Jn.c.boolean,isInvitesPopulated:Jn.c.boolean,invitesError:Jn.c.object,isSentInvitesPending:Jn.c.boolean,isSentInvitesPopulated:Jn.c.boolean,sentInvitesError:Jn.c.object,isWebhooksPending:Jn.c.boolean,isWebhooksPopulated:Jn.c.boolean,webhooksError:Jn.c.object,isUpdatingWebhooks:Jn.c.boolean,isRemovingWebhooks:Jn.c.boolean,updateWebhooksError:Jn.c.object},sessionRelations:{homeUsers:{relationClass:lD},devices:{relationClass:oD},cloudCompanions:{relationClass:rD},announcements:{relationClass:iD},homeDetails:{relationClass:KM},invites:{relationClass:mD},sentInvites:{relationClass:mD,options:{subset:"requested"}},plans:{relationClass:fD},webhooks:{relationClass:bD}},defaults(){const e={server:this.server,parent:this};return{isHomeUsersPending:!1,isHomeUsersPopulated:!1,homeUsersError:null,socialNetworks:new yD([],e),isPlansPending:!0,isPlansPopulated:!1,plansError:null,isUpdatingUser:!1,updateUserError:null,isHomeDetailsPending:!1,isHomeDetailsPopulated:!1,homeDetailsError:null,isInvitesPending:!1,isInvitesPopulated:!1,invitesError:null,isSentInvitesPending:!1,isSentInvitesPopulated:!1,sentInvitesError:null,isWebhooksPending:!1,isWebhooksPopulated:!1,webhooksError:null,isUpdatingWebhooks:!1,isRemovingWebhooks:!1,updateWebhooksError:null}}});var PD=r(29377);var ID=r(55340),ED=r(60352);var wD=r(58036);const CD="provider/providerIntegrations/initProviderIntegrations",OD="provider/providerIntegrations/fetchProviderIntegrations",MD="provider/providerIntegrations/pollProviderIntegrations",TD="provider/providerIntegrations/integrationsOnboardingComplete",DD="provider/providerIntegrations/createLocastAccount",kD=((0,ID.c)(CD),(0,ID.c)(OD)),xD=(0,ID.c)(MD);function AD(e){return e.get("ui").get("providerIntegrations")}(0,ID.c)(TD),(0,ID.c)(DD);const RD={[CD](e,t,r){AD(e).set({isIntegrationsOnboarding:!1,isIntegrationsPending:!1,isIntegrationsPopulated:!1,integrationsError:null,integrations:new mO([],{server:(0,wD.Ww)(e,t),provider:(0,wD.IB)(e,t)})}),r(kD())},[OD]:(0,ED.c)({key:"integrations",getModel:AD}),[MD](e,t,r){AD(e).set("isIntegrationsOnboarding",!0),window.setTimeout((()=>{(0,As.SS)((()=>{r(kD())}))}),3e3)},[TD](e){AD(e).set("isIntegrationsOnboarding",!1)},[DD](e,t,r){AD(e).set("isIntegrationsOnboarding",!0),function(){const e=c().Deferred();return window.setTimeout((()=>{e.resolve()}),3e3),e}().then((()=>{r(xD())}))}};var ND=r(42540),LD=r(11852),jD=r(76800),UD=r(52108);const FD=310,VD=1800,_D="ui/channelGridPage/initChannelsGridPage",WD="ui/channelGridPage/initMetadataList",BD="ui/channelGridPage/setStartTime",HD="ui/channelGridPage/resetStartTime",zD="ui/channelGridPage/navigateTimeForward",GD="ui/channelGridPage/navigateTimeBack",qD="ui/channelGridPage/setViewportSize",KD="ui/channelGridPage/updateAiredProgress",QD="ui/channelGridPage/populateChannelPrograms",$D="ui/channelGridPage/repopulateChannelPrograms",YD="ui/channelGridPage/populateChannelsList",XD="ui/channelGridPage/fetchChannelsList",JD=((0,ID.c)(_D),(0,ID.c)(WD),(0,ID.c)(BD)),ZD=(0,ID.c)(HD),ek=((0,ID.c)(zD),(0,ID.c)(GD),(0,ID.c)(qD),(0,ID.c)(KD),(0,ID.c)(QD),(0,ID.c)($D)),tk=((0,ID.c)(YD),(0,ID.c)(XD));function rk(e){return e.get("ui").get("channelGridPage")}function nk(e,t){const r=Math.floor(e/VD)*VD,n=[];for(let e=0;e<=t;e++)n.push(r+e*VD);return n}const ik=(0,jD.c)({[_D](e,t,r){const n=rk(e),{serverEntityID:i,providerEntityID:s,directoryKey:a}=t,o=(0,wD.Ww)(e,{serverEntityID:i}),c=(0,wD.IB)(e,{providerEntityID:s}),l={serverEntityID:i,providerEntityID:s,directoryKey:a,channelsList:new xO(null,{server:o,provider:c,type:FD})};n.set(l),r(ZD())},[WD](e,t,r){const{containerKey:n,serverEntityID:i,providerEntityID:s}=t,a=rk(e),o=(0,wD.Ww)(e,{serverEntityID:i}),c=(0,wD.IB)(e,{providerEntityID:s}),l=a.get("metadataList");a.get("containerKey")===n&&(null==l?void 0:l.server.get("machineIdentifier"))===o.get("machineIdentifier")&&(null==l?void 0:l.provider.get("identifier"))===c.get("identifier")||a.set({containerKey:n,metadataList:new TO({containerKey:n},{server:o,provider:c})})},[HD](e,t,r){const n=Math.floor(Date.now()/1e3);r(JD(n))},[BD](e,t,r){const n=rk(e),i=n.get("visibleColumns"),s=nk(t,i);(0,As.SS)((()=>{n.set({startTime:t,columnTimes:s})}))},[zD](e,t,r){const n=rk(e).get("columnTimes")[0]+VD;r(JD(n))},[GD](e,t,r){const n=rk(e).get("columnTimes")[0]-VD,i=Math.floor(Date.now()/1e3)-10800;n+VD>i&&r(JD(n))},[qD](e,t={},r){const{width:n=1,height:i=1,overflowWidth:s=0,channelWidth:a=1,channelTitleWidth:o=0}=t,c=rk(e),l=Math.floor(n+s),d=Math.max(Math.floor((n-o)/a),1)+1,u=Math.floor((l-o)/d),p=nk(c.get("startTime"),d);(0,As.SS)((()=>{c.set({visibleColumns:d,columnTimes:p,columnWidth:u,viewportWidth:l,viewportHeight:Math.floor(i)})}))},[KD](e){const t=rk(e),r=t.get("columnTimes"),n=r[0],i=r[r.length-1]-n,s=Math.floor(Date.now()/1e3),a=Math.min(100,Math.max(0,(s-n)/i*100));(0,As.SS)((()=>{t.set({airedProgress:a})}))},[QD](e){const t=rk(e),r=t.get("metadataList"),n=t.get("columnTimes"),i=t.get("viewportWidth");r&&i>0&&(r.set({isPending:!0,error:null}),r.populateRange({start:n[0],end:n[n.length-1],reloadThreshold:43200}).then((()=>{r.set({isPending:!1,isPopulated:!0,error:null})}),((e,t)=>{t.aborting||r.set({isPending:!1,error:(0,ua.c)(t)})})))},[$D](e){const t=rk(e).get("metadataList");t.set({isPending:!0}),t.repopulateRange().then((()=>{t.set({isPending:!1,isPopulated:!0,error:null})}),((e,r)=>{r.aborting||t.set({isPending:!1,error:(0,ua.c)(r)})}))},[ct.oZ](e,t,r){if(t.metadataItemEntityID||t.containerKeyPattern)return;const n=(0,wD.Ww)(e,t),i=rk(e),s=i.get("metadataList"),a=i.get("channelsList");a&&s&&a.server===n&&s.server===n&&(r(ek()),r(tk()))},[YD]:(0,UD.c)({key:"channelsList",fetchActionCreator:tk,getModel:rk}),[XD]:(0,ED.c)({key:"channelsList",getModel:rk})});var sk=r(80324),ak=r(96944),ok=r(95140),ck=r(93592),lk=r(29572),dk=r(19960),uk=r(68940),pk=r(42716),mk=r(62988),hk=r(66840),yk=r(29432),gk=r(84852),fk=r(58388),vk=r(28436),bk=r(85008),Sk=r(7960),Pk=r(14824),Ik=r(10540),Ek=r(58756),wk=r(18720),Ck=r(96488),Ok=r(16044),Mk=r(64139),Tk=r(44500),Dk=r(57652),kk=r(30496),xk=r(80096),Ak=Object.defineProperty,Rk=Object.defineProperties,Nk=Object.getOwnPropertyDescriptors,Lk=Object.getOwnPropertySymbols,jk=Object.prototype.hasOwnProperty,Uk=Object.prototype.propertyIsEnumerable,Fk=(e,t,r)=>t in e?Ak(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vk=(e,t)=>{for(var r in t||(t={}))jk.call(t,r)&&Fk(e,r,t[r]);if(Lk)for(var r of Lk(t))Uk.call(t,r)&&Fk(e,r,t[r]);return e},_k=(e,t)=>Rk(e,Nk(t));const Wk={[Ka.ob]:Ka.sP[Ka.ob],[Ka.M1]:Ka.sP[Ka.M1],[Ka.kl]:Ka.sP[Ka.kl],[Ka.KE]:Ka.sP[Ka.KE],[Ka.Ul]:Ka.sP[Ka.Ul],[Ka.q2]:Ka.sP[Ka.q2],[Ka.cI]:Ka.sP[Ka.cI],[Ka.AU]:Ka.sP[Ka.AU],[Ka.K]:Ka.sP[Ka.K],[Ka.OM]:Ka.sP[Ka.OM],[Ka.mM](e,t,r){const n=(0,Ok.c)(e,t),i=(0,Ck.c)(n),s=t.playerType||to.Qb(i),a=(0,Sd.OG)(e,s),o=(0,wD.oH)(e,t),c=e.get("user").get("experienceSettings"),l=(0,kk.c)(n.providerModel.get("identifier"),n.providerModel.get("providerIdentifier")),d=e.get("remotePlayer");if(d&&!(0,xk.c)({protocol:d.get("protocol"),protocolCapabilities:d.get("protocolCapabilities"),providerIdentifier:l,userFeaturesByUUID:(0,Mk.c)(e),isWatchTogether:!!t.syncplaySessionRoomID})){const e=(0,He.c)("This content is not currently supported when connected to this remote player.");return void(0,As.SS)((()=>{a.set({hasError:!0,errorMessage:e})}))}let u;u=a.get("isOpen")?a.get("openState"):i===up.KI?dl.C:dl.m,(0,Dk.c)()&&ni._u(l,[ni.Sg])&&(u=dl.m);let p=!1;i===up.Ww&&t.metadataItemEntityID&&(p=o.get("type")===Ze.Ww);let m=t.metricsProperties||{};(function(e){const t=(0,g.WI)("appModel").get("embeddedServer");return!!e&&!!t&&e.get("machineIdentifier")===t.get("machineIdentifier")})(n.serverModel)&&(m=_k(Vk({},m),{origin:Tk.kP})),m.identifier||(m.identifier=n.providerModel.get("metricsIdentifier")),Ka.sP[Ka.mM](e,_k(Vk({extrasPrefixCount:c.get("extrasPrefixCount"),openState:u,isPaused:p},t),{metricsProperties:m}),r)},[Ka.gh](e,t,r){Ka.sP[Ka.gh](e,Vk({openState:dl.C},t),r)},[Ka.YX](e,t,r){const n=(0,Sd.OG)(e,t.playerType),i=n.get("serverEntityID"),s=n.get("providerEntityID"),a=(0,wD.Ww)(e,{serverEntityID:i}),o=(0,wD.IB)(e,{providerEntityID:s});Ka.sP[Ka.YX](e,t,r),a&&o&&r(Kr.c.actions.ended({source:(0,tm.c)({serverIdentifier:a.get("machineIdentifier"),providerIdentifier:o.get("identifier")}),metadataType:t.metadataType}))}};var Bk=r(31900),Hk=r(29296),zk=r(12380),Gk=r(79084),qk=r(31564),Kk=r(59212);function Qk(e){return e.get("ui").get("playlistPage")}const $k=(0,jD.c)({[Kk.Go](e,t){const r=Qk(e),n=(0,vp.Ww)(e,t),i=(0,wD.IB)(e,t),{serverEntityID:s,providerEntityID:a,metadataKey:o}=t;if(s===r.get("serverEntityID")&&a===r.get("providerEntityID")&&o===r.get("metadataKey"))return;const c=new Ct.c({key:o,type:Ze.yy},{server:n,provider:i});r.restoreDefaults({serverEntityID:s,providerEntityID:a,metadataKey:o,playlist:c})},[Kk.y4](e,t){const r=Qk(e),n=(0,vp.Ww)(e,t),i=(0,wD.IB)(e,t),s=r.get("playlist"),{serverEntityID:a,metadataKey:o}=t;if(a===r.get("serverEntityID")&&o===r.get("metadataKey")&&r.get("playlistItemList"))return;const c=(0,Ha.c)(e,za.sv),l=s.get("childrenKey"),d=new gM.c({containerKey:l},{server:n,provider:i,includeExternalMedia:c});r.set({playlistItemList:d})},[Kk.ye](e,t){const r=Qk(e),n=r.get("playlistItemList");n&&(n.restoreDefaults(),r.unset("playlistItemList"))},[Kk.CI]:(0,ED.c)({key:"playlist",getModel:Qk}),[Kk.y9]:(0,Hk.c)({key:"playlistItemList",getModel:Qk}),[Kk.m0]:(0,zk.c)({key:"playlistItemList",getModel:Qk}),[Kk.sT](e,t,r){const{id:n,type:i,isRangeSelect:s=!1}=t,a=(0,vp.Gu)(e,{playlistItemEntityID:n}),o=Qk(e).get("playlistItemList").getCollection();a&&r((0,gk.Ep)({type:i,model:a,collection:o,isRangeSelect:s}))},[Kk.a0](e,t,r){const n=(0,vp.Gu)(e,{playlistItemEntityID:t.id});n&&r((0,gk.eo)([n.id]))},[Kk.Q5](e,t){const r=(0,vp.Gu)(e,t),n=Qk(e).get("playlistItemList"),i=n.getCollection(),s=i.indexOf(r),a=t.moveIndex,o=a-1;if(s===a||s===o)return;const l=a>s?a-1:a,d=S.c.join([n.get("containerKey"),r.get("playlistItemID"),"move"],o>=0?`after=${i.at(o).id}`:void 0),u=r.provider.getXHROptions(d,{type:"PUT"});(0,As.SS)((()=>{i.remove(r),i.add(r,{at:l}),c().ajax(u).fail((()=>{i.indexOf(r)===l&&(i.remove(r),i.add(r,{at:s}))}))}))},[Kk.wD](e,t,r){const n=(0,vp.Gu)(e,t),i=Qk(e).get("playlistItemList"),s=S.c.join([i.get("containerKey"),n.get("playlistItemID")]);n.destroy({url:s}).fail((()=>{r((0,ct._K)((0,He.c)("There was an unexpected error removing this item.")))}))},[Kk.Mh](e,t,r){const n=Qk(e).get("playlistItemList"),i=n.get("containerKey"),s=n.getCollection(),a=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("id");let o=c().Deferred().resolve().promise();a.forEach((e=>{const t=s.get(e),r=S.c.join([i,e]);o=o.then((()=>t.destroy({url:r,wait:!0})))})),o.fail((()=>{r((0,ct._K)((0,He.c)("There was an unexpected error removing an item.")))}))},[fm.EJ](e,t,r){const{providerEntityID:n,rating:i}=t,s=Qk(e),a=s.get("playlist");if(!a)return;const o=s.get("playlistItemList");"favorites"===a.get("specialPlaylistType")&&n===s.get("providerEntityID")&&(i!==Gk.ec&&i!==Gk.KG||r((0,qk.y6)({count:o.get("currentPageSize")})))}}),Yk="ui/playlistsPage/initPlaylistPage",Xk="ui/playlistsPage/fetchSorts",Jk="ui/playlistsPage/populateSorts",Zk="ui/playlistsPage/fetchLibraryDetails",ex="ui/playlistsPage/populateLibraryDetails",tx=((0,ID.c)(Yk),(0,ID.c)(Xk)),rx=((0,ID.c)(Jk),(0,ID.c)(Zk));function nx(e){return e.get("ui").get("playlistsPage")}(0,ID.c)(ex);const ix={[Yk](e,t){const r=nx(e),n=(0,vp.Ww)(e,t),i=(0,wD.IB)(e,t),{serverEntityID:s,libraryKey:a,containerKey:o}=t,c=s===r.get("serverEntityID"),l=a===r.get("libraryKey"),d=o===r.get("containerKey");if(c&&l&&d)return;const u=new wt.c({containerKey:o},{server:n,provider:i});let p=r.get("libraryDetails"),m=r.get("sorts");c&&l||(p=a&&new vM.c({key:a},{server:n,provider:i}),m=new bM.c([],{url:"/playlists/sorts",server:n})),r.restoreDefaults({serverEntityID:s,libraryKey:a,containerKey:o,playlists:u,libraryDetails:p,sorts:m})},[Zk]:(0,ED.c)({key:"libraryDetails",getModel:nx}),[ex]:(0,UD.c)({key:"libraryDetails",fetchActionCreator:rx,getModel:nx}),[Xk]:(0,ED.c)({key:"sorts",getModel:nx}),[Jk]:(0,UD.c)({key:"sorts",fetchActionCreator:tx,getModel:nx}),[ct.oZ](e,t,r){const{metadataItemEntityID:n,containerKeyPattern:i}=t,s=(0,vp.Ww)(e,t),a=nx(e).get("playlists");n||a&&a.server===s&&i&&a.get("containerKey").match(i)&&r((0,yk.Ih)({metadataListEntityID:a.entityID()}))}};var sx=r(74764),ax=r(16396);function ox(e){return e.get("ui").get("timelinePage")}function cx(e,t){const r=ox(e),n=(0,vp.Ww)(e,t),i=(0,vp.IB)(e,t),s=r.get("momentList");s.fetch().done((()=>{const e=s.get("key")||"empty",t=r.get("metadataList");let a;a=t&&t.server===n&&t.get("containerKey")===e?t:new wt.c({containerKey:e},{server:n,provider:i}),r.set({isMomentListPending:!1,isMomentListPopulated:!0,momentListError:null,metadataList:a})})).fail(((e,t)=>{r.set({isMomentListPending:!1,momentListError:t})}))}const lx=(0,jD.c)({[Kk.oH](e,t){const r=ox(e),n=(0,vp.Ww)(e,t),i=(0,vp.IB)(e,t),{serverEntityID:s,providerEntityID:a,libraryKey:o,momentKey:c}=t;if(s===r.get("serverEntityID")&&a===r.get("providerEntityID")&&c===r.get("momentKey"))return;const l=new vM.c({key:o},{server:n,provider:i}),d=new CM({momentKey:c},{server:n,provider:i});r.restoreDefaults({serverEntityID:s,providerEntityID:a,details:l,momentKey:c,momentList:d}),cx(e,t)},[Kk.Rt](e){ox(e).set({momentKey:""})},[Kk.Ck]:(0,ED.c)({key:"details",getModel:ox}),[Kk.e$]:(0,UD.c)({key:"details",fetchActionCreator:ax.eo,getModel:ox}),[ct.oZ](e,t){const{metadataItemEntityID:r,containerKeyPattern:n}=t,i=(0,vp.AZ)(e,t),s=(0,vp.kj)(e,t),a=ox(e),o=a.get("metadataList"),c=a.get("momentKey");if(r)return;if(!c||!o||o.server!==i||o.provider!==s)return;const l=o.get("containerKey");l&&(n&&!l.match(n)||cx(e,t))}});var dx=Object.defineProperty,ux=Object.defineProperties,px=Object.getOwnPropertyDescriptors,mx=Object.getOwnPropertySymbols,hx=Object.prototype.hasOwnProperty,yx=Object.prototype.propertyIsEnumerable,gx=(e,t,r)=>t in e?dx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const fx=((e,t)=>ux(e,px(t)))(((e,t)=>{for(var r in t||(t={}))hx.call(t,r)&&gx(e,r,t[r]);if(mx)for(var r of mx(t))yx.call(t,r)&&gx(e,r,t[r]);return e})({},ct.aS),{[ct._7](e,t){le.c.trigger("show:alert",t)}});var vx=r(71908),bx=r(19572);const Sx=[r(22716).QN,bk.UN,bx.VU,js.i2,pa.Qn,Yl.am,ad.MR,fm.It,yk.Wo,gk.wb,fk.wR,vk.qW,RD,Iw.uu,pk.iM,Tu.O8,bd.wH,fx,Pk.Ou,vm.Up,lx,ix,Sk.gx,$k,ik,mk.cp,uk.aq,ND.Mp,sk._Q,hk.Ul,sx.q6,vx.a6,Ek.EH,hS.cX,Ik.i4,dk.recordingSchedulePageActionHandlers,ak.xw,ck.Ml,lk.gB,Qa.sz,Yp.KI,Wk,wk.YT,ok.cT,yp.a4,Bk.Ar,LD.Ed],Px=xn.extend({name:"PersistentWebStorage",getStorage:()=>window.localStorage}),Ix=xn.extend({name:"VolatileWebStorage",getStorage:()=>window.sessionStorage});var Ex=r(67884);const wx={};function Cx(e){return null==e?"":String(e)}function Ox(e,...t){let r,n=1;const i=t.length;for(;n<=i;)r=wx[n],r||(r=new RegExp((0,R.c)(`{${n}}`),"g"),wx[n]=r),e=e.replace(r,Cx(t[n-1])),n++;return e}function Mx(e,...t){return v().isObject(t[0])?function(e,t){return e.replace(/\{([a-z0-9]+?)\}/gi,((e,r)=>t.hasOwnProperty(r)?Cx(t[r]):e))}(e,t[0]):v().isObject(t[t.length-1])?(t.pop(),Ox(e,...t)):Ox(e,...t)}function Tx(e,t){return t?e?v().escape(t):t:""}var Dx;const kx={languages:{en:"en.json","en-GB":"en-GB.json",af:"af.json",my:"my.json",ca:"ca.json",cs:"cs.json",sr:"sr.json",da:"da.json",de:"de.json",et:"et.json",es:"es.json","es-419":"es-419.json",el:"el.json",fr:"fr.json","fr-CA":"fr-CA.json",hr:"hr.json",is:"is.json",it:"it.json",lt:"lt.json",hu:"hu.json",nl:"nl.json",no:"no.json",pl:"pl.json",pt:"pt.json","pt-BR":"pt-BR.json",ru:"ru.json",ro:"ro.json",sk:"sk.json",sl:"sl.json",fi:"fi.json",sv:"sv.json",vi:"vi.json",tr:"tr.json",uk:"uk.json",bg:"bg.json",zh:"zh.json","zh-TW":"zh-TW.json",ja:"ja.json",ko:"ko.json",th:"th.json",fa:"fa.json",ar:"ar.json",he:"he.json"},loadingPromise:null,loadingLanguage:null,getLanguages:function(){return this.languages},getTranslation:function(e){if(this.translations[this.language])return this.translations[this.language][e]},t:function(e){return function(t,...r){return Mx(Tx(!1,e.call(this,t)||t),...r)}}((function(e,...t){return this.getTranslation(e,...t)})),tEscape:(Dx=function(e,...t){return this.getTranslation(e,...t)},function(e,...t){return Mx(Tx(!0,Dx.call(this,e)||e),...t)}),load:function(e){if(this.loadingLanguage&&this.loadingLanguage===e)return this.loadingPromise;const t=this.getLanguages();let r;return r=v().has(t,e)?v().has(this.translations,e)?c().Deferred().resolve().promise():c().ajax({dataType:"json",url:S.c.join([this.basePath,t[e]])}):c().Deferred().reject().promise(),this.loadingLanguage=e,this.loadingPromise=r,r.done(v().bind(this.onLoadSuccess,this,r)),r.fail(v().bind(this.onLoadError,this,r)),r},onLoadSuccess:function(e,t){const r=this.loadingLanguage;e===this.loadingPromise&&(this.loadingPromise=null,this.loadingLanguage=null,this.language=r,t&&(this.translations[r]=t),le.c.trigger("languageLoaded",r))},onLoadError:function(e){e===this.loadingPromise&&(le.c.trigger("languageLoaded",this.loadingLanguage),this.loadingPromise=null,this.loadingLanguage=null)}},xx=ce.c.extend({mixins:kx,constructor:function(){this.basePath=S.c.join(["/web/","translations"]),this.translations={},(0,g.Y2)("appModel").done(this.onAppModelRegistered.bind(this))},_repopulateProviders(){const e=(0,g.WI)("appModel"),t=e.get("servers");return(0,Ce.c)(t.map((t=>{if(t.get("isCloud")){const t=e.get("user").get("providers");return(0,Ce.c)(t.map((e=>(e.get("features").clear(),(0,g.WI)("appStore").dispatch((0,ca.WO)({providerEntityID:e.entityID(),options:{merge:!0}})),(0,cd.c)(e)))))}if(t.get("isConnected"))return(0,g.WI)("appStore").dispatch((0,_l.vH)({serverEntityID:t.entityID(),options:{merge:!0}})),(0,cd.c)(t)})).filter(Boolean))},onAppModelRegistered(){}}).extend({onAppModelRegistered(e){e.on("change:user.change:experienceSettings.change:language",((e,t)=>{this.load(t).done((()=>{Ts.c.setOption("language",t),this._repopulateProviders()}))}))}}),Ax=function(){Ws.c.register(new xx)},Rx={init(){const e=(0,g.WI)("appModel"),t=`${window.innerWidth}x${window.innerHeight}`,r=`${window.screen.width}x${window.screen.height}`,n={"X-Plex-Product":"Plex Web","X-Plex-Version":"4.125.1","X-Plex-Client-Identifier":e.get("clientID"),"X-Plex-Platform":Up.c.name,"X-Plex-Platform-Version":Up.c.version,"X-Plex-Features":"external-media,indirect-media,hub-style-list","X-Plex-Model":"bundled","X-Plex-Device":Up.c.platform,"X-Plex-Device-Name":Up.c.name,"X-Plex-Device-Screen-Resolution":`${t},${r}`,"X-Plex-Restriction-Profile":e.get("user").get("restrictionProfile")};return e.on("change:clientID",((e,t)=>{n["X-Plex-Client-Identifier"]=t})),e.on("change:user.change:restrictionProfile",((e,t)=>{n["X-Plex-Restriction-Profile"]=t})),c().Deferred().resolve(n).promise()}};var Nx=r(14240),Lx=r.n(Nx),jx=r(21492),Ux=Object.defineProperty,Fx=Object.defineProperties,Vx=Object.getOwnPropertyDescriptors,_x=Object.getOwnPropertySymbols,Wx=Object.prototype.hasOwnProperty,Bx=Object.prototype.propertyIsEnumerable,Hx=(e,t,r)=>t in e?Ux(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zx=(e,t)=>{for(var r in t||(t={}))Wx.call(t,r)&&Hx(e,r,t[r]);if(_x)for(var r of _x(t))Bx.call(t,r)&&Hx(e,r,t[r]);return e},Gx=(e,t)=>Fx(e,Vx(t));const qx={maxWidth:1920,maxHeight:1080,maxBitDepth:10},Kx={maxWidth:4096,maxHeight:2160,maxBitDepth:10},Qx=`width="${qx.maxWidth}"; height="${qx.maxHeight}"`,$x=`width="${Kx.maxWidth}"; height="${Kx.maxHeight}"`;function Yx(e){if(!jx.c)return!1;const t=(0,zs.i_)("video",!0),r=t.canPlayType(e);return(0,zs.Ah)(t),"probably"===r}function Xx(e){var t,r,n;return!!jx.c&&null!=(n=null==(r=null==(t=window.MediaSource)?void 0:t.isTypeSupported)?void 0:r.call(t,e))&&n}function Jx(e,t){if(Array.isArray(e))return Array.from(new Set(e.concat(t)))}function Zx(e,t){return(r,n)=>{e(r)&&Lx()(t,n,Jx)}}function eA({canDirectPlay:e,canDirectStream:t}={canDirectPlay:Yx,canDirectStream:Xx}){const r={video:{directPlay:{},directStream:{}}},n=Zx(e,r),i=Zx(t,r);return n(`video/mp4; codecs="hvc1"; ${Qx}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:Gx(zx({},qx),{codecID:["hvc1"]})}}}}}}),n(`video/mp4; codecs="hev1"; ${Qx}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:Gx(zx({},qx),{codecID:["hev1"]})}}}}}}),n(`video/mp4; codecs="hev1.2.6.L150.B0"; ${Qx}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:Gx(zx({},qx),{codecID:["hev1"]})}}}}}}),n(`video/mp4; codecs="hvc1"; ${$x}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:Gx(zx({},Kx),{codecID:["hvc1"]})}}}}}}),n(`video/mp4; codecs="hev1"; ${$x}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:Gx(zx({},Kx),{codecID:["hev1"]})}}}}}}),n(`video/mp4; codecs="hev1.2.6.L150.B0"; ${$x}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:Gx(zx({},Kx),{codecID:["hev1"]})}}}}}}),i(`video/mp4; codecs="hvc1"; ${Qx}`,{video:{directStream:{video:{codecs:{hevc:qx}}}}}),i(`video/mp4; codecs="hev1"; ${Qx}`,{video:{directStream:{video:{codecs:{hevc:qx}}}}}),i(`video/mp4; codecs="dvhe"; ${Qx}`,{video:{directStream:{video:{codecs:{hevc:qx}}}}}),i(`video/mp4; codecs="hev1.2.6.L150.B0"; ${Qx}`,{video:{directStream:{video:{codecs:{hevc:qx}}}}}),i(`video/mp4; codecs="hvc1"; ${$x}`,{video:{directStream:{video:{codecs:{hevc:Kx}}}}}),i(`video/mp4; codecs="hev1"; ${$x}`,{video:{directStream:{video:{codecs:{hevc:Kx}}}}}),i(`video/mp4; codecs="dvhe"; ${$x}`,{video:{directStream:{video:{codecs:{hevc:Kx}}}}}),i(`video/mp4; codecs="hev1.2.6.L150.B0"; ${$x}`,{video:{directStream:{video:{codecs:{hevc:Kx}}}}}),r}var tA=Object.defineProperty,rA=Object.defineProperties,nA=Object.getOwnPropertyDescriptors,iA=Object.getOwnPropertySymbols,sA=Object.prototype.hasOwnProperty,aA=Object.prototype.propertyIsEnumerable,oA=(e,t,r)=>t in e?tA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cA=(e,t)=>{for(var r in t||(t={}))sA.call(t,r)&&oA(e,r,t[r]);if(iA)for(var r of iA(t))aA.call(t,r)&&oA(e,r,t[r]);return e},lA=(e,t)=>rA(e,nA(t));const dA={registerAll(){const e=Rx.init();e.done((e=>A.c.register(e)));const t=new Px;we.c.register(t),Rn.register(new Ix),Ax();const r=function(){const e={maxWidth:1920,maxHeight:1280},t={maxWidth:4096,maxHeight:2160},r=`width="${e.maxWidth}"; height="${e.maxHeight}"`,n=`width="${t.maxWidth}"; height="${t.maxHeight}"`,i=lA(cA({},e),{maxFrameRate:60}),s={capabilities:{embed:!0,redirect:!0},video:{lowestQualityIndex:2,protocols:{hls:{mimeType:"application/x-mpegURL"}},directPlay:{generic:{video:cA({},i)},mp4:{mimeType:'video/mp4; codecs="avc1.42E01E"',video:{codecs:{h264:{}}},audio:{codecs:{aac:{}}}},ogg:{mimeType:"video/ogg"},mpegts:{protocol:"hls"},flv:{}},directStream:{video:lA(cA({},i),{maxBitDepth:8,codecs:{h264:{}}}),audio:{codecs:{aac:{}},maxBitrate:192,maxChannels:2}}},music:{directPlay:{mp4:{mimeType:'audio/mp4; codecs="mp4a.40.5"',audio:{codecs:{aac:{}}}},mp3:{audio:{codecs:{mp3:{}}}},ogg:{mimeType:'audio/ogg; codecs="vorbis"',audio:{codecs:{vorbis:{}}}},wav:{mimeType:"audio/wav",audio:{codecs:{pcm:{}}}},flac:{mimeType:"audio/flac",audio:{codecs:{flac:{}}}}},directStream:{audio:{codecs:{aac:{}},maxBitrate:320,maxChannels:2}}}},a=[{types:[`video/mp4; codecs="avc1.42E01E"; ${n}`],fragment:{video:{directPlay:{mp4:{video:{codecs:{h264:t}}}},directStream:{video:{codecs:{h264:t}}}}}},{types:[`video/webm; codecs="vp8, opus"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:e}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp8, vorbis"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:e}},audio:{codecs:{vorbis:{}}}}}}}},{types:[`video/webm; codecs="vp9, opus"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:e}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp9, vorbis"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:e}},audio:{codecs:{vorbis:{}}}}}}}},{types:[`video/webm; codecs="vp8, opus"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:t}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp8, vorbis"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:t}},audio:{codecs:{vorbis:{}}}}}}}},{types:[`video/webm; codecs="vp9, opus"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:t}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp9, vorbis"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:t}},audio:{codecs:{vorbis:{}}}}}}}},{types:['audio/mp4; codecs="alac"'],predicate:o,fragment:{music:{directPlay:{mp4:{audio:{codecs:{alac:{}}}}}}}}];function o(e){const t=(0,zs.i_)("video",!0),r=t.canPlayType(e);return(0,zs.Ah)(t),"probably"===r}const l=window.MediaSource&&window.MediaSource.isTypeSupported?window.MediaSource.isTypeSupported:o;if(a.forEach((e=>{const t=e.predicate||l;e.types.some(t)?(b.c.debug("[Player] Types %o provided %o",e.types,e.fragment),c().extend(!0,s,e.fragment)):b.c.debug("[Player] Types %o are unsupported",e.types)})),"safari"===Up.c.id&&(0,mE.c)(Up.c.platformVersion,"10.11")){const e={codecs:{ac3:{},eac3:{}}};c().extend(!0,s.video,{directPlay:{mp4:{audio:e}},directStream:{audio:e}})}return c().extend(!0,s,eA()),b.c.debug("[Player] Final player profile %o",s),s}(),n={audioCapabilities:[{contentType:'audio/mp4; codecs="flac"'}]},i=Ms().then((e=>{const t=Ex.c[e];return Os(n,[t])})).then((()=>{ec.c.register(c().extend(!0,{},r,{music:{directPlay:{mp4:{audio:{codecs:{flac:{}}}}}}}))}),(()=>{ec.c.register(r)}));return(0,Ce.c)([e,i])}};function uA(){const e=document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen,r=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,n=!(!t||!r);return{hasFullscreen:n,shouldExitOnPlayerClose:!0,initialize(e){const{dispatchEnterFullscreen:t,dispatchExitFullscreen:r}=e;function n(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?t():r()}return n(),document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),c().Deferred().resolve().promise()},enter(){n&&t.call(e)},exit(){n&&r.call(document)}}}var pA=r(84228),mA=r(51337),hA=r(10532),yA=r(51923),gA=Object.defineProperty,fA=Object.defineProperties,vA=Object.getOwnPropertyDescriptors,bA=Object.getOwnPropertySymbols,SA=Object.prototype.hasOwnProperty,PA=Object.prototype.propertyIsEnumerable,IA=(e,t,r)=>t in e?gA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EA=(e,t)=>{for(var r in t||(t={}))SA.call(t,r)&&IA(e,r,t[r]);if(bA)for(var r of bA(t))PA.call(t,r)&&IA(e,r,t[r]);return e},wA=(e,t)=>fA(e,vA(t));const CA="urn:x-cast:plex",OA=1e3,MA={volume:!0,shuffle:!0,quality:!0,audioStream:!0,videoStream:!0,subtitleStream:!0,subtitleColor:!0,subtitlePosition:!0,subtitleSize:!0,subtitleOffset:!0,skipPrevious:!0,skipNext:!0,autoPlay:!0,seekTo:!0,stepBack:!0,stepForward:!0,stop:!0,playPause:!0,repeat:!0},TA=wA(EA({},MA),{seekTo:!1});function DA(e,t){const r=t.dispatch;let n,i,s,a=!1,o=0,c=0,l=null,d={},u={};window.__onGCastApiAvailable=function(e){const t=!!(e&&window.cast&&window.chrome&&window.chrome.cast);if(r(Bk.wf(t&&Fm.qE||(0,yA.c)()&&Fm.sR||Fm.Eq)),!t)return void b.c.warn("[Cast] API is not available");const n=window.cast.framework,i=h();i.setOptions({receiverApplicationId:m(),autoJoinPolicy:window.chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),i.addEventListener(n.CastContextEventType.SESSION_STATE_CHANGED,C)},(0,yA.c)()&&r(Bk.wf(Fm.sR));const p=document.createElement("script");function m(){const t=e.get("deviceSettings"),r=t.get("chromecastAppID"),n=t.get("chromecastCustomAppID");return r===ii.c.CUSTOM&&n?n:r||ii.c.PRODUCTION}function h(){if(e.get("castApiAvailability")===Fm.qE)return window.cast.framework.CastContext.getInstance()}function y(){if(i)return i.customData}function g(e){return e.isMute()?0:Math.round(100*e.getVolume())}function f(e){if(!e)return;const{customData:t,media:r}=e;if(t&&t.playQueueType)return t.playQueueType;if(r&&r.metadata&&r.metadata.metadataType){const e=window.chrome.cast.media.MetadataType;switch(r.metadata.metadataType){case e.MOVIE:case e.TV_SHOW:return up.im;case e.MUSIC_TRACK:return up.KI;case e.PHOTO:return up.Ww}}}function P(e){if(!e)return;const{customData:t}=e;return t.playbackSessionID}function I(e){const t=y();if(t){const{mediaIndex:n,partIndex:s,adState:a,adTime:o,adDuration:c,liveTVSessionSubscriptionKey:l,liveTVSessionStartedAt:d,liveTVSessionSeekRangeStartedAt:u,liveTVSessionSeekStartSeconds:p,liveTVSessionSeekEndSeconds:m,liveTVSessionCurrentPosition:h,liveTVSessionChannelIdentifier:y,server:g,providerIdentifier:v,isPostPlay:b}=t,S=EA({},b?TA:MA);g.machineIdentifier===Vm.A&&delete S.quality,v&&ni._u(v,[ni._0,ni.$9])&&(delete S.autoPlay,delete S.subtitleColor,delete S.subtitlePosition,delete S.subtitleSize,delete S.subtitleOffset),r(yp.tf({playQueueType:f(i),playerState:wA(EA({},e),{mediaIndex:n,partIndex:s,adState:a,adPositionSeconds:Math.round(o/1e3||0),adDurationSeconds:Math.round(c/1e3||0),controllable:S}),liveTVSessionSubscriptionKey:l,liveTVSessionStartedAt:d,liveTVSessionSeekRangeStartedAt:u,liveTVSessionSeekStartSeconds:p,liveTVSessionSeekEndSeconds:m,liveTVSessionCurrentPosition:h,liveTVSessionChannelIdentifier:y,providerIdentifier:v,machineIdentifier:g.machineIdentifier}))}}function E(){c&&c--}function w(){o&&o--}function C(e){const t=window.cast.framework,{session:i,sessionState:s,errorCode:a}=e;switch(s){case t.SessionState.NO_SESSION:(0,b.c)("[Cast] Session is not established");break;case t.SessionState.SESSION_STARTED:(0,b.c)("[Cast] Session is established");break;case t.SessionState.SESSION_START_FAILED:(0,b.c)(`[Cast] Session failed to start with code "${a}"`);break;case t.SessionState.SESSION_RESUMED:(0,b.c)("[Cast] Connection to an already existing session is established");break;case t.SessionState.SESSION_ENDED:b.c.warn("[Cast] Session has disconnected")}switch(n&&(n.removeEventListener(t.SessionEventType.MEDIA_SESSION,O),i.removeEventListener(t.SessionEventType.VOLUME_CHANGED,D)),d={},u={},s){case t.SessionState.NO_SESSION:case t.SessionState.SESSION_START_FAILED:case t.SessionState.SESSION_ENDED:M(!1),n=null,r(yp.sA());break;case t.SessionState.SESSION_STARTED:case t.SessionState.SESSION_RESUMED:{n=i,i.addEventListener(t.SessionEventType.MEDIA_SESSION,O),i.addEventListener(t.SessionEventType.VOLUME_CHANGED,D),r(Bk.aq(wA(EA({},i.getCastDevice()),{volume:g(i)})));const e=i.getMediaSession();e&&O({mediaSession:e});break}}}function O({mediaSession:e}){i&&i.removeUpdateListener(M),i=e,e.addUpdateListener(M),d={},u={}}function M(e){const t=window.chrome.cast.media.PlayerState,n=f(i);if(n!==l&&l&&((0,b.c)("[Cast] play queue type changed from %o to %o, idling old player",l,n),d[l]=null,u[l]=null,r(yp.uw({playQueueType:l}))),l=n,i&&e&&!a){const{playerState:e,currentTime:n,media:a}=i;I({isPaused:e===t.PAUSED,isBuffering:e===t.BUFFERING,positionSeconds:Math.round(n||0),durationSeconds:Math.round(a.duration||0),playbackSessionID:P(i)}),function(){const e=window.chrome.cast.media.PlayerState,t=y();if(!t)return;const{containerKey:n,key:s,playQueueItemID:a,playQueueVersion:o,mediaIndex:c,partIndex:l,bitrate:p,server:m,providerIdentifier:h}=t,g=f(i),v=d[g],b=u[g],S=a!==v||o!==b;d[g]=a,u[g]=o,r(yp.I6({playQueueType:f(i),options:{machineIdentifier:m.machineIdentifier,providerIdentifier:h,containerKey:n,key:s,mediaIndex:c,shouldRefreshPlayQueue:S,playQueueItemID:a,bitrate:p,initialState:{isPaused:i.playerState===e.PAUSED,isBuffering:i.playerState===e.BUFFERING,positionSeconds:Math.round(i.currentTime||0),durationSeconds:Math.round(i.media.duration||0),mediaIndex:c,partIndex:l}}}))}(),function(){const e=y();if(!e)return;const{mediaIndex:t,bitrate:n}=e;r(yp.gH({playQueueType:f(i),mediaIndex:t,bitrate:n}))}(),function(){const e=y();if(!e)return;const{playQueueType:t,playQueueVersion:n,repeat:i}=e;r(yp.oF({playQueueType:t,playQueueVersion:n,repeatAll:i===dp.y2||i===dp.x,repeatOne:i===dp.x}))}(),function(){const e=y();if(!e)return;const{key:t,mediaIndex:n,partIndex:s,audioStreamID:a,subtitleStreamID:o}=e;null==a&&null==o||r(yp.cR({playQueueType:f(i),key:t,mediaIndex:n,partIndex:s,audioStreamID:a,subtitleStreamID:o}))}(),e===t.PLAYING?s||(s=window.setTimeout(T,OA)):s&&(window.clearTimeout(s),s=null)}else b.c.warn("[Cast] Update ignored; no alive media session"),s&&(window.clearTimeout(s),s=null),i&&n&&i.playerState===t.IDLE&&!a&&(d[n]=null,u[n]=null,r(yp.uw({playQueueType:n})))}function T(){if(i){const e=Math.round(i.getEstimatedTime()||0);e&&I({positionSeconds:e}),s=window.setTimeout(T,OA)}else b.c.warn("[Cast] Position update ignored; no media session")}function D(){c||o||n&&r(yp.u6(g(n)))}function k(e){n?((0,b.c)(`[Cast] Sending custom message with type "${e.type}"`),n.sendMessage(CA,e,null,(e=>{b.c.warn(`[Cast] Failed to send custom message with error "${e}"`)}))):b.c.warn(`[Cast] Custom message "${e.type}" ignored; no cast session`)}return p.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.head.appendChild(p),{requestSession:function(){const e=h();e?((0,b.c)("[Cast] Requesting session"),e.requestSession()):b.c.warn("[Cast] Request session ignored; no cast context")},endSession:function(){const e=h();e?((0,b.c)("[Cast] Ending session"),e.endCurrentSession()):b.c.warn("[Cast] End session ignored; no cast context"),d={},u={}},startPlayback:function(t){if(!n)return void b.c.warn("[Cast] Start playback ignored; no cast session");const i=e.get("user"),s=e.get("deviceSettings"),o=i.get("experienceSettings"),c=t.get("playQueue"),l=c.get("type"),d=c.get("playQueueItems").get(c.get("playQueueSelectedItemID")),u=d.get("metadataItem"),p=t.get("startMediaIndex"),m=c.server,h=t.get("providerEntityID"),y=(0,vp.IB)(e,{providerEntityID:h}),g=(0,Ze.GG)(d.get("type"));let f;if((g&&g.mediaType===Po.KI?Po.KI:Po.im)===Po.im){const e=function(e,t,r){const n=t.get("qualityIndex");if(null!=n)return n;const i=e.server.get("isPrivateConnection");if(i&&r.get("useHomeStreamingRecommendedSettings"))return r.defaults().localQuality;const s=(0,bc.c)(e,i);return r.get(s)}(u,t,o),r=Sc.c.getQualityByIndex(e);f=r.bitrate}a=!0,fp(m).done((e=>{const d=t.get("liveTVSession"),m=d?(0,pA.I3)(d):Math.floor((0,ip.c)(t,u)/1e3),h={playQueueType:l,providerIdentifier:y.get("identifier"),containerKey:S.c.join([v().result(c,"url")],{own:1}),offset:m,directPlay:s.get("directPlay"),directStream:s.get("directStream"),mediaIndex:p,bitrate:f,playbackSessionID:t.get("playbackSessionID"),audioBoost:o.get("audioBoost"),subtitleColor:o.get("subtitleColor"),subtitlePosition:o.get("subtitlePosition"),subtitleSize:o.get("subtitleSize"),autoPlay:o.get("autoPlay"),repeat:(0,hA.c)({repeatOne:t.get("repeatOne"),repeatAll:t.get("repeatAll")}),audioForceMultiChannel:o.get("audioForceMultiChannel"),server:e,user:{username:i.get("username")},liveTVSessionSubscriptionKey:d?d.get("key"):null,liveTVSessionChannelIdentifier:d?d.get("channelIdentifier"):null,debugAdKind:s.get("debugAdKind")||ti.c.NONE},g=window.chrome.cast.media,P=new g.MediaInfo(u.get("key"));P.customData=h;const E=new g.LoadRequest(P);E.currentTime=m,E.autoplay=!0,(0,b.c)("[Cast] Sending load media request"),n.loadMedia(E).then((()=>{(0,b.c)("[Cast] Load media success"),a=!1,I({isMediaLoading:!1})}),(e=>{b.c.warn(`[Cast] Failed to load media with error "${e}"`),a=!1,r(yp.GI({playQueueType:l}))}))})).fail((()=>{a=!1,r(yp.GI({playQueueType:l,errorMessage:(0,He.c)('The server "{serverName}" does not have a valid connection for casting. Check that the server is claimed in server settings.',{serverName:m.get("friendlyName")})}))}))},mirrorDetails:function(t){if(!n)return void b.c.warn("[Cast] Mirror details ignored; no cast session");const r=e.get("user"),i=t.server,s=t.provider;fp(i).done((e=>{const n={server:e,providerIdentifier:s.get("identifier"),user:{username:r.get("username")}},i=new window.chrome.cast.media.MediaInfo(t.get("key"));i.customData=n,k({type:mA.CU,media:i})}))},sendMessage:k,setVolume:function(e){n?((0,b.c)(`[Cast] Setting volume to "${e}"`),r(yp.u6(e)),e?(n.isMute()&&(o++,n.setMute(!1).then(w,w)),c++,n.setVolume(e/100).then(E,E)):(o++,n.setMute(!0).then(w,w))):b.c.warn("[Cast] Set volume ignored; no cast session")}}}function kA(){(0,g.G0)({CloudServerFlexModel:IT,ServerFlexModel:WT,UserFlexModel:SD}),(0,g.G0)({UserExperienceSettingsModel:qi,StoredUserExperienceSettingsModel:JT});const e=new vT,t=function(e){return function(e,t){let r,n=[],i=n;function s(){i===n&&(i=n.slice())}function a(e){r=function(e){const t={};for(let r=0,n=e.length;r<n;r++){const n=e[r];for(const e in n){const r=t[e],i=n[e];r?Array.isArray(r)?r.push(i):t[e]=[r,i]:t[e]=i}}return t}(e)}return a(e),t.on("statechange",(function(){const e=n=i;for(let t=0,r=e.length;t<r;t++)e[t]()})),{dispatch:function e(n){const{payload:i,type:s}=n,a=s&&r[s],o=(0,PD.c)(n);if(Array.isArray(a))for(let r=0,n=a.length;r<n;r++)a[r](t,i,e);else if(a)a(t,i,e);else{if(!o&&t.getStatePromise)return t.getStatePromise(n);t.dispatch(n)}return n},subscribe:function(e){let t=!0;return s(),i.push(e),function(){if(!t)return;t=!1,s();const r=i.indexOf(e);i.splice(r,1)}},getState:function(){return t.getState()},replaceActionHandlers:a}}(Sx,e)}(e);return(0,g.G0)({appModel:e,appStore:t}),(0,g.G0)({adPlayerComponent:Qo,fullscreenManager:uA(),remoteCastPlayerManager:DA(e,t),getDecisionOptions:Lc,mediaComponent:Zo,sessionStats:new Ba}),function(){const e=(0,g.WI)("appModel"),t=(0,g.WI)("appStore");return(0,g.G0)({settingFinder:hl(e),selectRemoteQuality:Kp,selectRestorePlayQueue:Qp,selectSubtitleSettings:$p,selectLocalVolume:cl}),(0,g.G0)({metricsReporter:[Uc(),Vc],logs:new Gp([],{parent:e}),testServerConnection:nl}),(0,g.G0)({companionServerManager:new fl({appModel:e}),keyboardShortcuts:ml(e),mediaServerEventConnection:Am,metrics:[new Vl({isPlaybackActive:al}),Fc],primaryServerManager:new Bl({appModel:e}),providerManager:new Hl({appModel:e}),remotePlexPlayerManager:Np(e,t),serverConnectionManager:new bl({appModel:e}),serverConnectionTestManager:new ql({appModel:e}),serverManager:new sd({appModel:e}),serverUpdateManager:new od({appModel:e}),sourceManager:new fd({appModel:e}),syncplaySessionManager:new Mu({appModel:e,appStore:t}),watchTogetherRoomsManager:new rp({appModel:e,appStore:t})}),c().Deferred().resolve().promise()}().then(dA.registerAll)}const xA=new a.c.Application;xA.addInitializer((()=>kA().then(Ca))),xA.start()},2704:e=>{function t(e){for(var t=e.length,r=new Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function r(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0}function n(e){SHA256_buf="string"==typeof e?SHA256_buf.concat(t(e)):SHA256_buf.concat(e);for(var r=0;r+64<=SHA256_buf.length;r+=64)p(SHA256_H,SHA256_buf.slice(r,r+64));SHA256_buf=SHA256_buf.slice(r),SHA256_len+=e.length}function i(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var e=SHA256_buf.length;e<64;e++)SHA256_buf[e]=0;p(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(e=SHA256_buf.length;e<59;e++)SHA256_buf[e]=0;SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,p(SHA256_H,SHA256_buf);var t=new Array(32);for(e=0;e<8;e++)t[4*e+0]=SHA256_H[e]>>>24,t[4*e+1]=SHA256_H[e]>>16&255,t[4*e+2]=SHA256_H[e]>>8&255,t[4*e+3]=255&SHA256_H[e];return SHA256_H=null,SHA256_buf=null,SHA256_len=null,t}var s=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),a=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);function o(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function c(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function l(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function d(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t^r&(e^t)}function p(e,t){for(var r=new Array(16),n=0;n<16;n++)r[n]=t[4*n+0]<<24|t[4*n+1]<<16|t[4*n+2]<<8|t[4*n+3];!function(e,t){for(var r=16;r<64;r++)t[r]=4294967295&(((n=t[r-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10)+t[r-7]+o(t[r-15])+t[r-16];var n,i=(new Array).concat(e);for(r=0;r<64;r++){var s=i[7]+l(i[4])+d(i[4],i[5],i[6])+a[r]+t[r],p=c(i[0])+u(i[0],i[1],i[2]);i.pop(),i.unshift(s+p&4294967295),i[4]=i[4]+s&4294967295}for(r=0;r<8;r++)e[r]=e[r]+i[r]&4294967295}(e,r)}e.exports={SHA256_hash:function(e){return r(),n(e),function(e){for(var t="",r=0;r<e.length;r++)t+=s[e[r]>>4]+s[15&e[r]];return t}(i())},HMAC_SHA256_init:function(e){HMAC_SHA256_key="string"==typeof e?t(e):(new Array).concat(e),HMAC_SHA256_key.length>64&&(r(),n(HMAC_SHA256_key),HMAC_SHA256_key=i());for(var s=HMAC_SHA256_key.length;s<64;s++)HMAC_SHA256_key[s]=0;for(s=0;s<64;s++)HMAC_SHA256_key[s]^=54;r(),n(HMAC_SHA256_key)},HMAC_SHA256_write:function(e){n(e)},HMAC_SHA256_finalize:function(){for(var e=i(),t=0;t<64;t++)HMAC_SHA256_key[t]^=106;for(r(),n(HMAC_SHA256_key),n(e),t=0;t<64;t++)HMAC_SHA256_key[t]=0;return HMAC_SHA256_key=null,i()}}},38104:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<ul class="js-file-list-items list browse-directory-list"></ul> <div class="js-file-list-truncated-message css-file-list-truncated-message"></div> '}))},71652:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="",o=this;function c(e,t){return"star"}function l(e,t){return"dislikes"}return s=r.each.call(t,t&&t.stars,{hash:{},inverse:o.noop,fn:o.program(1,(function(e,t){var n,i="";return i+='<span class="star"><i class="star-icon glyphicon ',((n=r.if.call(e,e,{hash:{},inverse:o.program(4,l,t),fn:o.program(2,c,t),data:t}))||0===n)&&(i+=n),i+'"></i><span class="empty-icon"></span></span>'}),i),data:i}),(s||0===s)&&(a+=s),a+" "}))},73552:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<button type="button" class="close-btn btn-link"><i class="glyphicon remove-2"></i></button> <span class="message">')+((0,this.escapeExpression)((s=r.message)||"function"==typeof(s=t&&t.message)?s.call(t,{hash:{},data:i}):s)+"</span> ")}))},45228:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<button type="button" class="close-btn btn-link"><i class="glyphicon remove-2"></i></button> <span class="message">'+l(i(r(27412)).call(t,"A new TV tuner ({tunerMake} {tunerModel}) has been found! Plex DVR is the easiest way to record your favorite shows!",{hash:{tunerModel:t&&t.model,tunerMake:t&&t.make},data:a}))+'</span> <a class="setup-link link" href="'+l("function"==typeof(o=t&&t.dvrSettingsRoute)?o.apply(t):o)+'">'+l(i(r(27412)).call(t,"Learn more",{hash:{},data:a}))+"</a> "}))},20720:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l="function",d=this.escapeExpression;return c+='<a class="automatch-dropdown-toggle">'+d((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,"Auto Match",{hash:{},data:s}))+' <i class="caret-icon caret-icon-sm"></i></a> <ul class="automatch-dropdown-menu"> ',a=n.each.call(t,t&&t.agents,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var r;return""+' <li><a class="auto-match-agent" href="#" data-id="'+d(typeof(r=e&&e.identifier)===l?r.apply(e):r)+'">'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+"</a></li> "}),s),data:s}),(a||0===a)&&(c+=a),c+" </ul> "}))},62144:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o="",c=this.escapeExpression;return o+='<form class="edit-metadata-form"> ',a=n.each.call(t,t,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var n;return""+" "+c((n=r(8276),n&&(n.__esModule?n.default:n)).call(e,"setting",{hash:{idSuffix:"_c"},data:t}))+" "}),s),data:s}),(a||0===a)&&(o+=a),o+" </form> "}))},436:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<form class="edit-metadata-form"> ',o=n.if.call(t,t&&t.canReparent,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(e,"autocompleteTextInput",{hash:{label:"Artist",name:"parentTitle",placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.parentTitle),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.parentRatingKey),title:(n=e&&e.item,null==n||!1===n?n:n.parentTitle)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Album",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey),scopeToAttr:"parentRatingKey",scopeToParam:"artist.id"},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Album",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-3"> <label>'+l(i(r(27412)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> ',o=n.unless.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="col-md-4"> '+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Year",name:"year",value:(n=e&&e.item,null==n||!1===n?n:n.year),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.year),locked:(n=e&&e.locked,null==n||!1===n?n:n.year),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.ratingKey)},data:t}))+" </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="col-md-',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(7,(function(e,t){return"5"}),a),fn:d.program(5,(function(e,t){return"9"}),a),data:a}))||0===o)&&(c+=o),c+' "> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(o=t&&t.item,null==o||!1===o?o:o.originallyAvailableAt),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originallyAvailableAt),locked:(o=t&&t.locked,null==o||!1===o?o:o.originallyAvailableAt)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Record Label",name:"studio",value:(o=t&&t.item,null==o||!1===o?o:o.studio),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.studio),locked:(o=t&&t.locked,null==o||!1===o?o:o.studio),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Review",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> </div> </form> "}))},26416:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+" </div> </div> ",o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["album.style"],{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Styles",name:"style",attribute:"styles",locked:(n=e&&e.locked,null==n||!1===n?n:n.style)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["album.mood"],{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Moods",name:"mood",attribute:"moods",locked:(n=e&&e.locked,null==n||!1===n?n:n.mood)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> </form> "}))},6832:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Artist",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Artist",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Biography",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},80887:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+" </div> </div> ",o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["artist.style"],{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Styles",name:"style",attribute:"styles",locked:(n=e&&e.locked,null==n||!1===n?n:n.style)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["artist.mood"],{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Moods",name:"mood",attribute:"moods",locked:(n=e&&e.locked,null==n||!1===n?n:n.mood)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Country",name:"country",attribute:"countries",locked:(o=t&&t.locked,null==o||!1===o?o:o.country)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> ",o=n.if.call(t,t&&t.canEditSimilarArtists,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Similar Artists",name:"similar",attribute:"similar",query:"title",locked:(n=e&&e.locked,null==n||!1===n?n:n.similar)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </form> "}))},41e3:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return""+' <span class="artwork-file-container"> <input type="file" class="artwork-file-control" multiple> <a href="#">'+l(i(r(27412)).call(e,"choose an image",{hash:{},data:t}))+'</a> </span> <span class="upload-prompt-divider">&middot;</span> '+l(i(r(27412)).call(e,"drag and drop",{hash:{},data:t}))+' <span class="upload-prompt-divider">&middot;</span> '}return o=n.if.call(t,t&&t.showUpload,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var s,a="";return a+=' <div class="upload-artwork-container"> <div class="upload-prompt"> ',((s=n.if.call(e,e&&e.showFileUpload,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===s)&&(a+=s),a+' <a class="upload-url-btn" href="#">'+l(i(r(27412)).call(e,"enter a url",{hash:{},data:t}))+'</a> </div> <div class="upload-progress"> '+l(i(r(27412)).call(e,"Uploading artwork...",{hash:{},data:t}))+' </div> <div class="upload-success"> '+l(i(r(27412)).call(e,"this artwork was uploaded successfully",{hash:{},data:t}))+' <span class="upload-prompt-divider">&middot;</span> '+l(i(r(27412)).call(e,"{1}upload another{2}",'<a class="upload-back-btn" href="#">',"</a>",{hash:{},data:t}))+' </div> <div class="upload-error"> '+l(i(r(27412)).call(e,"there was an error uploading this artwork",{hash:{},data:t}))+' <span class="upload-prompt-divider">&middot;</span> '+l(i(r(27412)).call(e,"{1}try again{2}",'<a class="upload-back-btn" href="#">',"</a>",{hash:{},data:t}))+' </div> <form id="upload-form" class="upload-form"> <input type="text" class="form-control" name="url" placeholder="'+l(i(r(27412)).call(e,"Enter a url to upload an image from the web",{hash:{},data:t}))+'"> <div class="upload-form-help"> <div class="pull-right">'+l(i(r(27412)).call(e,"enter to {1}upload{2}",'<a class="submit-url-btn" href="#">',"</a>",{hash:{},data:t}))+'</div> <div class="pull-left">'+l(i(r(27412)).call(e,"esc to {1}cancel{2}",'<a class="cancel-url-btn" href="#">',"</a>",{hash:{},data:t}))+"</div> </div> </form> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <div class="artwork-list-container"></div> '}))},77328:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-8 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},74892:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-4"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(o=t&&t.item,null==o||!1===o?o:o.originallyAvailableAt),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originallyAvailableAt),locked:(o=t&&t.locked,null==o||!1===o?o:o.originallyAvailableAt)},data:a}))+' </div> <div class="col-md-4 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4"> <label>'+l(i(r(27412)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},76976:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Writers",name:"writer",attribute:"writers",locked:(o=t&&t.locked,null==o||!1===o?o:o.writer)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Directors",name:"director",attribute:"directors",locked:(o=t&&t.locked,null==o||!1===o?o:o.director)},data:a}))+" </div> </div> </form> "}))},43312:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+"<h4>"+(0,this.escapeExpression)((a=r(27412),a&&(a.__esModule?a.default:a)).call(t,"Files",{hash:{},data:s}))+'</h4> <ul class="media-info-file-list"></ul> <div class="loading-container"><div class="loading"></div></div> '}))},41508:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){var n;return""+" "+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Labels",name:"label",attribute:"labels",locked:(n=e&&e.locked,null==n||!1===n?n:n.label)},data:t}))+" "}function p(e,t){return""+' <div class="form-group"> <label>'+l(i(r(27412)).call(e,"Labels",{hash:{},data:t}))+"</label> <p>"+l(i(r(27412)).call(e,"Labels require Plex Media Server {1} or later.",e&&e.escapedLabelsMinVersion,{hash:{},data:t}))+"</p> </div> "}return o=n.if.call(t,t&&t.hasContentFilterFeature,{hash:{},inverse:d.program(6,(function(e,t){var n;return""+' <div class="row row-padded"> <h4 class="text-muted text-center">'+l(i(r(27412)).call(e,"You need a Plex Pass to use restrictions.",{hash:{},data:t}))+'</h4> <p class="text-center"> <a class="btn btn-sm btn-primary" href="'+l("function"==typeof(n=e&&e.plexPassUrl)?n.apply(e):n)+'" target="_blank">'+l(i(r(27412)).call(e,"Learn More",{hash:{},data:t}))+"</a> </p> </div> "}),a),fn:d.program(1,(function(e,t){var r,i="";return i+=' <form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> ',((r=n.if.call(e,e&&e.showLabels,{hash:{},inverse:d.program(4,p,t),fn:d.program(2,u,t),data:t}))||0===r)&&(i+=r),i+" </div> </div> </form> "}),a),data:a}),(o||0===o)&&(c+=o),c+" "}))},78964:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){var s;return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},""+((0,this.escapeExpression)((s=r.file)||"function"==typeof(s=t&&t.file)?s.call(t,{hash:{},data:i}):s)+" ")}))},29928:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return""+'<p class="help-block">'+l(i(r(27412)).call(e,"Editing this field requires a Plex Pass. Learn more {1}here{2}.",'<a href="https://www.plex.tv/plex-pass/" target="_blank">',"</a>",{hash:{},data:t}))+"</p>"}return c+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Original Title",name:"originalTitle",value:(o=t&&t.item,null==o||!1===o?o:o.originalTitle),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originalTitle),locked:(o=t&&t.locked,null==o||!1===o?o:o.originalTitle),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> </div> ",o=n.if.call(t,t&&t.supportsMultipleEditions,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var s,a="";return a+=' <div class="row"> <div class="col-md-12 selectize field-with-info"> '+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Edition",name:"editionTitle",value:(s=e&&e.item,null==s||!1===s?s:s.editionTitle),placeholder:(s=e&&e.placeholders,null==s||!1===s?s:s.editionTitle),locked:(s=e&&e.locked,null==s||!1===s?s:s.editionTitle),ratingKey:(s=e&&e.item,null==s||!1===s?s:s.ratingKey),disabled:e&&e.disabledMultipleEditionsEditing},data:t}))+" ",((s=n.if.call(e,e&&e.disabledMultipleEditionsEditing,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===s)&&(a+=s),a+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="row"> <div class="col-md-4"> ',o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(6,(function(e,t){var n;return""+" "+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Year",name:"year",value:(n=e&&e.item,null==n||!1===n?n:n.year),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.year),locked:(n=e&&e.locked,null==n||!1===n?n:n.year)},data:t}))+" "}),a),fn:d.program(4,(function(e,t){var n;return""+" "+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </div> <div class="col-md-4 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4"> <label>'+l(i(r(27412)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> </div> <div class="row"> <div class="col-md-',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(10,(function(e,t){return"6"}),a),fn:d.program(8,(function(e,t){return"12"}),a),data:a}))||0===o)&&(c+=o),c+=' selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Studio",name:"studio",value:(o=t&&t.item,null==o||!1===o?o:o.studio),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.studio),locked:(o=t&&t.locked,null==o||!1===o?o:o.studio),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> ",o=n.unless.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.noop,fn:d.program(12,(function(e,t){var n;return""+' <div class="col-md-6"> '+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+' </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Tagline",name:"tagline",value:(o=t&&t.item,null==o||!1===o?o:o.tagline),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.tagline),locked:(o=t&&t.locked,null==o||!1===o?o:o.tagline)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},31256:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-6"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Directors",name:"director",attribute:"directors",locked:(o=t&&t.locked,null==o||!1===o?o:o.director)},data:a}))+' </div> <div class="col-md-6"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Country",name:"country",attribute:"countries",locked:(o=t&&t.locked,null==o||!1===o?o:o.country)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Writers",name:"writer",attribute:"writers",locked:(o=t&&t.locked,null==o||!1===o?o:o.writer)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Producers",name:"producer",attribute:"producers",locked:(o=t&&t.locked,null==o||!1===o?o:o.producer)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> </form> "}))},51716:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-6"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> <div class="col-md-6"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},79218:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-9"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Captured Time",name:"originallyAvailableAt",value:(o=t&&t.item,null==o||!1===o?o:o.originallyAvailableAt),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.capturedTime),locked:(o=t&&t.locked,null==o||!1===o?o:o.originallyAvailableAt)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},67292:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Tags",name:"tag",attribute:"tags",locked:(o=t&&t.locked,null==o||!1===o?o:o.tag)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{onlyDelete:!0,label:"Autotags",name:"autotag",attribute:"autotags",locked:(o=t&&t.locked,null==o||!1===o?o:o.autotag)},data:a}))+" </div> </div> </form> "}))},98988:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"textInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"textInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5"},data:a}))+" </div> </div> </form> "}))},80980:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},50498:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Original Title",name:"originalTitle",value:(o=t&&t.item,null==o||!1===o?o:o.originalTitle),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originalTitle),locked:(o=t&&t.locked,null==o||!1===o?o:o.originalTitle),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-4"> ',o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(3,(function(e,t){var n;return""+" "+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Year",name:"year",value:(n=e&&e.item,null==n||!1===n?n:n.year),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.year),locked:(n=e&&e.locked,null==n||!1===n?n:n.year)},data:t}))+" "}),a),fn:d.program(1,(function(e,t){var n;return""+" "+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </div> <div class="col-md-4 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4"> <label>'+l(i(r(27412)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> </div> <div class="row"> <div class="col-md-',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(7,(function(e,t){return"6"}),a),fn:d.program(5,(function(e,t){return"12"}),a),data:a}))||0===o)&&(c+=o),c+=' selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Studio",name:"studio",value:(o=t&&t.item,null==o||!1===o?o:o.studio),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.studio),locked:(o=t&&t.locked,null==o||!1===o?o:o.studio),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> ",o=n.unless.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.noop,fn:d.program(9,(function(e,t){var n;return""+' <div class="col-md-6"> '+l(i(r(8276)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+' </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Tagline",name:"tagline",value:(o=t&&t.item,null==o||!1===o?o:o.tagline),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.tagline),locked:(o=t&&t.locked,null==o||!1===o?o:o.tagline)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},5720:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> </form> "}))},70164:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+='<form class="edit-metadata-form"> ',o=n.if.call(t,t&&t.canReparent,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(e,"autocompleteTextInput",{hash:{label:"Album Artist",name:"grandparentTitle",placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.grandparentTitle),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.grandparentRatingKey),title:(n=e&&e.item,null==n||!1===n?n:n.grandparentTitle)},data:t}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(e,"autocompleteTextInput",{hash:{label:"Album",name:"parentTitle",placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.parentTitle),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.parentRatingKey),title:(n=e&&e.item,null==n||!1===n?n:n.parentTitle),scopeToAttr:"grandparentRatingKey",scopeToParam:"artist.id"},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-4"> <label>'+l(i(r(27412)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> <div class="col-md-4"> '+l(i(r(8276)).call(t,"lockableNumericInput",{hash:{label:"Track",name:"index",value:(o=t&&t.item,null==o||!1===o?o:o.index),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.index),locked:(o=t&&t.locked,null==o||!1===o?o:o.index),disabled:t&&t.disableIndices},data:a}))+' </div> <div class="col-md-4"> '+l(i(r(8276)).call(t,"lockableNumericInput",{hash:{label:"Disc",name:"parentIndex",value:(o=t&&t.item,null==o||!1===o?o:o.parentIndex),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.parentIndex),locked:(o=t&&t.locked,null==o||!1===o?o:o.parentIndex),disabled:t&&t.disableIndices},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+l(i(r(8276)).call(t,"lockableTextInput",{hash:{label:"Artist",name:"originalTitle",value:(o=t&&t.item,null==o||!1===o?o:o.originalTitle),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originalTitle),locked:(o=t&&t.locked,null==o||!1===o?o:o.originalTitle),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> </div> </form> "}))},41424:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<form class="edit-metadata-form"> ',o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["track.style"],{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Styles",name:"style",attribute:"styles",locked:(n=e&&e.locked,null==n||!1===n?n:n.style)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["track.mood"],{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+l(i(r(8276)).call(e,"lockableTagInput",{hash:{label:"Moods",name:"mood",attribute:"moods",locked:(n=e&&e.locked,null==n||!1===n?n:n.mood)},data:t}))+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </form> "}))},72364:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return""+" "+l(i(r(8276)).call(e,"setting",{hash:{idSuffix:"_c"},data:t}))+" "}return o=n.if.call(t,t&&t.settings,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var s,a="";return a+=' <div class="setup-agent-section"> <div class="setup-agent-title">'+l(i(r(27412)).call(e,"{1} Settings",e&&e.escapedAgentName,{hash:{},data:t}))+'</div> <p class="setup-agent-disclaimer">'+l(i(r(27412)).call(e,"Note: These settings will take effect for all libraries using the {1} agent.",e&&e.escapedAgentName,{hash:{},data:t}))+'</p> <div class="setup-agent-settings"> ',((s=n.each.call(e,e&&e.settings,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===s)&&(a+=s),a+" </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+" "}))},76104:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",c=this.escapeExpression;return o+'<form class="edit-section-type-form settings-container"> <p>'+c(i(r(27412)).call(t,"There was an error adding this library.",{hash:{},data:a}))+"</p> <p>"+c(i(r(27412)).call(t,"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.",'<a href="https://forums.plex.tv" target="_blank">',"</a>",'<a href="http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:a}))+"</p> </form> "}))},43532:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<a class="artwork-option media-poster-container" data-rating-key="')+((0,this.escapeExpression)((s=r.ratingKey)||"function"==typeof(s=t&&t.ratingKey)?s.call(t,{hash:{},data:i}):s)+'" href="#"> <div class="media-poster"></div> </a> ')}))},86184:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l=this.escapeExpression,d="function";return c+='<div class="row disc-number hidden"> '+l((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,"Disc {1}",t&&t.escapedParentIndex,{hash:{},data:s}))+' </div> <div class="row striped-list-inner-item"> <span class="col-xs-1 match-index"> '+l(typeof(a=t&&t.index)===d?a.apply(t):a)+'. </span> <span class="col-xs-11 match-track-name ',((a=n.unless.call(t,t&&t.matched,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){return"missing"}),s),data:s}))||0===a)&&(c+=a),c+'"> '+l(typeof(a=t&&t.name)===d?a.apply(t):a)+" </span> </div> "}))},60296:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="match-empty-message">'+(0,this.escapeExpression)((a=r(27412),a&&(a.__esModule?a.default:a)).call(t,"No matches found.",{hash:{},data:s}))+"</div> "}))},14348:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o="",c="function",l=this.escapeExpression,d=this;function u(e,t){var r;return""+' <span class="match-year">'+l(typeof(r=e&&e.year)===c?r.apply(e):r)+'</span> <span class="match-separator">&middot;</span> '}return o+='<a class="match-result col-xs-12" href="#"> <div class="row"> <div class="col-xs-9 match-title-info"> ',a=n.if.call(t,t&&t.parentName,{hash:{},inverse:d.program(3,(function(e,t){var r;return""+' <span class="match-name">'+l(typeof(r=e&&e.name)===c?r.apply(e):r)+"</span> "}),s),fn:d.program(1,(function(e,t){var r;return""+' <span class="match-name">'+l(typeof(r=e&&e.parentName)===c?r.apply(e):r)+'</span> &ndash; <span class="match-name">'+l(typeof(r=e&&e.name)===c?r.apply(e):r)+"</span> "}),s),data:s}),(a||0===a)&&(o+=a),o+=" ",a=n.if.call(t,t&&t.disambiguationInfo,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){var r;return""+'  <span class="match-disambiguation-info">'+l(typeof(r=e&&e.disambiguationInfo)===c?r.apply(e):r)+"</span> "}),s),data:s}),(a||0===a)&&(o+=a),o+=" </div> ",a=n.if.call(t,t&&t.normalizedScore,{hash:{},inverse:d.program(10,(function(e,t){var r;return""+' <div class="col-xs-3 match-score-info"> <span class="match-year">'+l(typeof(r=e&&e.year)===c?r.apply(e):r)+"</span> </div> "}),s),fn:d.program(7,(function(e,t){var i,s,a="";return a+=' <div class="col-xs-3 match-score-info" title="'+l((s=r(27412),s&&(s.__esModule?s.default:s)).call(e,"Score {1}",e&&e.escapedNormalizedScore,{hash:{},data:t}))+'"> ',((i=n.if.call(e,e&&e.year,{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===i)&&(a+=i),a+' <span class="match-score"><i class="match-score-icon glyphicon certificate"></i>'+l(typeof(i=e&&e.normalizedScore)===c?i.apply(e):i)+"</span> </div> "}),s),data:s}),(a||0===a)&&(o+=a),o+=' </div> <div class="row match-extended-info hidden"> ',a=n.if.call(t,t&&t.summary,{hash:{},inverse:d.program(14,(function(e,t){return' <div class="col-xs-9 children-region"></div> '}),s),fn:d.program(12,(function(e,t){var r;return""+' <div class="col-xs-9 match-summary">'+l(typeof(r=e&&e.summary)===c?r.apply(e):r)+"</div> "}),s),data:s}),(a||0===a)&&(o+=a),o+' <div class="col-xs-3"> <img class="match-art" src="'+l(typeof(a=t&&t.thumb)===c?a.apply(t):a)+'"/> </div> </div> </a> '}))},27772:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="",o="function",c=this.escapeExpression;return a+'<a class="striped-list-item" href="#" data-key="'+c(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.key)===o?s.apply(t):s)+'"> <i class="glyphicon file"></i> '+c(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===o?s.apply(t):s)+" </a> "}))},60648:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="",o=this,c="function",l=this.escapeExpression;function d(e,t){return"home"}function u(e,t){var n;return(n=r.if.call(e,null==(n=e&&e.filePath)||!1===n?n:n.network,{hash:{},inverse:o.program(9,m,t),fn:o.program(7,p,t),data:t}))||0===n?n:""}function p(e,t){return"globe"}function m(e,t){var n;return(n=r.if.call(e,e&&e.isRoot,{hash:{},inverse:o.program(12,y,t),fn:o.program(10,h,t),data:t}))||0===n?n:""}function h(e,t){return"hdd"}function y(e,t){return"folder-open"}return a+='<a class="striped-list-item" href="#" data-key="'+l(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.key)===c?s.apply(t):s)+'" title="'+l(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===c?s.apply(t):s)+'" aria-label="'+l(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===c?s.apply(t):s)+'"> <i class="folder-icon glyphicon ',s=r.if.call(t,null==(s=t&&t.filePath)||!1===s?s:s.isBackShortcut,{hash:{},inverse:o.program(3,(function(e,t){var n;return(n=r.if.call(e,null==(n=e&&e.filePath)||!1===n?n:n.home,{hash:{},inverse:o.program(6,u,t),fn:o.program(4,d,t),data:t}))||0===n?n:""}),i),fn:o.program(1,(function(e,t){return"left-arrow"}),i),data:i}),(s||0===s)&&(a+=s),a+'"></i>&nbsp;'+l(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===c?s.apply(t):s)+' <div class="loading loading-sm loading-inline hidden"></div> </a> '}))},52256:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o="",c="function",l=this.escapeExpression,d=this;return o+='<div class="card card-section"> <div class="card-actions"> <button class="edit-section-btn card-action-btn"><i class="glyphicon pencil"></i></button> <button class="delete-section-btn card-action-btn btn-danger"><i class="glyphicon remove-2"></i></button> </div> <i class="section-icon glyphicon '+l(typeof(a=t&&t.icon)===c?a.apply(t):a)+'"></i> <span class="section-title"></span> ',a=n.if.call(t,t&&t.path,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var r;return""+'<span class="section-path">'+l(typeof(r=e&&e.path)===c?r.apply(e):r)+"</span>"}),s),data:s}),(a||0===a)&&(o+=a),o+=" ",a=n.if.call(t,t&&t.more,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+'<span class="section-count">'+l((n=r(27412),n&&(n.__esModule?n.default:n)).call(e,"and {count} more",{hash:{count:e&&e.more},data:t}))+"</span>"}),s),data:s}),(a||0===a)&&(o+=a),o+" </div> "}))},93708:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",c=this.escapeExpression;return o+'<div class="modal-dialog"> <div class="modal-content"> <form name="add-folder-form"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon folder-plus"></i> '+c(i(r(27412)).call(t,"Add Folder",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <div class="row"> <div class="col-md-12"> <input type="text" name="path" class="form-control" value=""> </div> </div> <div class="row directory-container-row"> <div class="home-directory-container col-md-5"></div> <div class="col-md-7"> <div class="path-container"></div> <div class="file-container"></div> </div> </div> </div> <div class="modal-footer"> <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">'+c(i(r(27412)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="submit" class="add-btn btn btn-primary">'+c(i(r(27412)).call(t,"Add",{hash:{},data:a}))+"</button> </div> </form> </div> </div> "}))},38334:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d="function",u=this;return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon circle-exclamation-mark"></i> '+l(typeof(o=t&&t.title)===d?o.apply(t):o)+'</h4> </div> <div class="modal-body"> <p class="confirm-message">'+l(typeof(o=t&&t.message)===d?o.apply(t):o)+'</p> <p class="double-confirm-message text-warning">'+l(typeof(o=t&&t.warningMessage)===d?o.apply(t):o)+'</p> </div> <div class="modal-footer"> ',o=n.unless.call(t,t&&t.hideCancel,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return""+' <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">'+l(i(r(27412)).call(e,e&&e.cancelLabel,{hash:{},data:t}))+"</button> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <button type="button" class="confirm-btn btn btn-lg ',((o=n.if.call(t,t&&t.hasDanger,{hash:{},inverse:u.program(5,(function(e,t){return"btn-primary"}),a),fn:u.program(3,(function(e,t){return"btn-danger"}),a),data:a}))||0===o)&&(c+=o),c+' btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">'+l(i(r(27412)).call(t,t&&t.confirmLabel,{hash:{},data:a}))+"</span> </button> </div> </div> </div> "}))},68864:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){var r;return""+'download="'+d(typeof(r=e&&e.downloadName)===l?r.apply(e):r)+'"'}function m(e,t){var r;return""+" "+d(typeof(r=e&&e.title)===l?r.apply(e):r)+' <span class="title-separator"></span> '}function h(e,t){var s,a="";return a+=" "+d(i(r(18664)).call(e,e&&e.videoResolution,{hash:{},data:t})),((s=n.if.call(e,e&&e.bitrate,{hash:{},inverse:u.noop,fn:u.program(7,y,t),data:t}))||0===s)&&(a+=s),a+" "}function y(e,t){return","}function g(e,t){return""+" "+d(i(r(2396)).call(e,e&&e.bitrate,{hash:{},data:t}))+" "}return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon download-alt"></i> '+d(i(r(27412)).call(t,"Download a Version",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <ul class="list select-list download-list"> ',o=n.each.call(t,t&&t.mediaItems,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,(function(e,t,s){var a,o="";return o+=' <li class="striped-list-item select-list-item download-list-item"> <a class="media" data-value="'+d(typeof(a=null==t||!1===t?t:t.index)===l?a.apply(e):a)+'" href="'+d(typeof(a=e&&e.downloadUrl)===l?a.apply(e):a)+'" target="'+d(typeof(a=s&&s.defaultLinkTarget)===l?a.apply(e):a)+'" ',((a=i(r(22251)).call(e,s&&s.defaultLinkTarget,"_blank",{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===a)&&(o+=a),o+="> ",((a=n.if.call(e,e&&e.title,{hash:{},inverse:u.noop,fn:u.program(4,m,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(e,e&&e.videoResolution,{hash:{},inverse:u.noop,fn:u.program(6,h,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(e,e&&e.bitrate,{hash:{},inverse:u.noop,fn:u.program(9,g,t),data:t}))||0===a)&&(o+=a),o+" </a> </li> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+" </ul> </div> </div> </div> "}))},77208:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon pencil"></i> '+l("function"==typeof(o=t&&t.paneTitle)?o.apply(t):o)+'</h4> </div> <div class="modal-body modal-body-scroll modal-body-with-panes"> <div class="modal-nav-pane dark-scrollbar hidden"> <ul class="list modal-nav-list"> ',o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.general,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn general-btn" data-pane="general" href="#"> <i class="modal-nav-icon glyphicon align-center"></i> '+l(i(r(27412)).call(e,"General",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.tags,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn tags-btn" data-pane="tags" href="#"> <i class="modal-nav-icon glyphicon tags"></i> '+l(i(r(27412)).call(e,"Tags",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.labels,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn labels-btn" data-pane="labels" href="#"> <i class="modal-nav-icon glyphicon parents"></i> '+l(i(r(27412)).call(e,"Labels",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.poster,{hash:{},inverse:d.noop,fn:d.program(7,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn poster-btn" data-pane="poster" href="#"> <i class="modal-nav-icon glyphicon picture"></i> '+l(i(r(27412)).call(e,"Poster",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.art,{hash:{},inverse:d.noop,fn:d.program(9,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn art-btn" data-pane="art" href="#"> <i class="modal-nav-icon glyphicon picture"></i> '+l(i(r(27412)).call(e,"Background",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.info,{hash:{},inverse:d.noop,fn:d.program(11,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn info-btn" data-pane="info" href="#"> <i class="modal-nav-icon glyphicon circle-info"></i> '+l(i(r(27412)).call(e,"Info",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.advanced,{hash:{},inverse:d.noop,fn:d.program(13,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn advanced-btn" data-pane="advanced" href="#"> <i class="modal-nav-icon glyphicon cogwheel"></i> '+l(i(r(27412)).call(e,"Advanced",{hash:{},data:t}))+" </a></li> "}),a),data:a}),(o||0===o)&&(c+=o),c+' </ul> </div> <div class="modal-body-pane pane-region dark-scrollbar"> <div class="loading loading-inline"></div> </div> </div> <div class="modal-footer"> <span class="form-message"></span> <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">'+l(i(r(27412)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="button" class="save-btn btn btn-primary btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">'+l(i(r(27412)).call(t,"Save Changes",{hash:{},data:a}))+"</span> </button> </div> </div> </div> "}))},52072:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return" selected"}function p(e,t){return""+" "+l(i(r(27412)).call(e,"Select type",{hash:{},data:t}))+" "}function m(e,t){return""+" "+l(i(r(27412)).call(e,"General",{hash:{},data:t}))+" "}function h(e,t){return"disabled"}function y(e,t){return"hidden"}return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> ',o=n.if.call(t,t&&t.add,{hash:{},inverse:d.program(3,(function(e,t){var r;return""+' <i class="modal-icon glyphicon pencil"></i> '+l("function"==typeof(r=e&&e.paneTitle)?r.apply(e):r)+" "}),a),fn:d.program(1,(function(e,t){return""+' <i class="modal-icon glyphicon plus"></i> '+l(i(r(27412)).call(e,"Add {1} Library",'<span class="section-type-title"></span>',{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </h4> </div> <div class="modal-body modal-body-scroll modal-body-with-panes"> ',o=n.if.call(t,t&&t.isLoading,{hash:{},inverse:d.program(7,(function(e,t){var s,a="";return a+=' <div class="modal-nav-pane dark-scrollbar"> <ul class="list modal-nav-list"> <li> <a class="btn-gray change-pane-btn type-btn',((s=i(r(45508)).call(e,e&&e.selectedPane,"type",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+='" data-pane="type" href="#"> <i class="modal-nav-icon glyphicon align-center"></i> ',((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.program(12,m,t),fn:d.program(10,p,t),data:t}))||0===s)&&(a+=s),a+=' </a> </li> <li> <a class="btn-gray change-pane-btn folders-btn',((s=i(r(45508)).call(e,e&&e.selectedPane,"folders",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.noop,fn:d.program(14,h,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.unless.call(e,e&&e.showFolders,{hash:{},inverse:d.noop,fn:d.program(16,y,t),data:t}))||0===s)&&(a+=s),a+='" data-pane="folders" href="#"> <i class="modal-nav-icon glyphicon folder-open"></i> '+l(i(r(27412)).call(e,"Add folders",{hash:{},data:t}))+' </a> </li> <li> <a class="btn-gray change-pane-btn options-btn',((s=i(r(45508)).call(e,e&&e.selectedPane,"options",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.noop,fn:d.program(14,h,t),data:t}))||0===s)&&(a+=s),a+=' hidden" data-pane="options" href="#"> <i class="modal-nav-icon glyphicon magic"></i> '+l(i(r(27412)).call(e,"Options",{hash:{},data:t}))+' </a> </li> <li> <a class="btn-gray change-pane-btn advanced-btn',((s=i(r(45508)).call(e,e&&e.selectedPane,"advanced",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.noop,fn:d.program(14,h,t),data:t}))||0===s)&&(a+=s),a+'" data-pane="advanced" href="#"> <i class="modal-nav-icon glyphicon cogwheel"></i> '+l(i(r(27412)).call(e,"Advanced",{hash:{},data:t}))+' </a> </li> </ul> </div> <div class="modal-body-pane pane-region dark-scrollbar"> </div> '}),a),fn:d.program(5,(function(e,t){return' <div class="modal-body-pane pane-region dark-scrollbar"> <div class="loading loading-inline"></div> </div> '}),a),data:a}),(o||0===o)&&(c+=o),c+=' </div> <div class="modal-footer"> <span class="form-message"></span> <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">'+l(i(r(27412)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="button" class="save-btn btn btn-primary btn-loading ',((o=n.if.call(t,t&&t.add,{hash:{},inverse:d.noop,fn:d.program(14,h,a),data:a}))||0===o)&&(c+=o),c+='"> <div class="loading loading-sm"></div> <span class="btn-label"> <span class="save-btn-label-next">'+l(i(r(27412)).call(t,"Next",{hash:{},data:a}))+'</span> <span class="save-btn-label-save"> ',o=n.if.call(t,t&&t.add,{hash:{},inverse:d.program(20,(function(e,t){return""+" "+l(i(r(27412)).call(e,"Save Changes",{hash:{},data:t}))+" "}),a),fn:d.program(18,(function(e,t){return""+" "+l(i(r(27412)).call(e,"Add Library",{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+" </span> </span> </button> </div> </div> </div> "}))},99852:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<div class="modal-dialog"> <div class="modal-content"> <form id="fix-incorrect-match-form"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon nameplate"></i> <span class="modal-title-text"></span></h4> ',o=n.if.call(t,t&&t.location,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return""+' <div class="match-location"> '+l(i(r(27412)).call(e,"Location",{hash:{},data:t}))+": "+l(i(r(28764)).call(e,e&&e.location,60,12,{hash:{},data:t}))+" </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </div> <div class="modal-body modal-body-scroll dark-scrollbar"> ',o=n.if.call(t,t&&t.showNavigation,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return""+' <ul class="list modal-list"> <li class="modal-list-item"><a class="search-options-btn" href="#">'+l(i(r(27412)).call(e,"Search Options",{hash:{},data:t}))+'</a></li> <li class="auto-match-dropdown-region modal-list-item"></li> </ul> '}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="pane-region"></div> </div> <div class="modal-footer"> <div class="match-search-actions"> <button type="button" class="cancel-btn btn btn-default">'+l(i(r(27412)).call(t,"Cancel",{hash:{},data:a}))+"</button> ",o=n.if.call(t,t&&t.showNavigation,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){return""+' <button type="submit" class="search-btn btn btn-primary btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">'+l(i(r(27412)).call(e,"Search",{hash:{},data:t}))+"</span> </button> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </div> </div> </form> </div> </div> "}))},71312:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){var r,i="";return i+=' <li> <span class="keyboard-shortcuts-keys"> ',((r=n.each.call(e,e&&e.keys,{hash:{},inverse:u.noop,fn:u.program(3,m,t),data:t}))||0===r)&&(i+=r),i+' </span> <span class="keyboard-shortcuts-label text-muted">'+d(typeof(r=e&&e.label)===l?r.apply(e):r)+"</span> </li> "}function m(e,t){var r,i="";return i+=" ",((r=n.if.call(e,e&&e.plain,{hash:{},inverse:u.noop,fn:u.program(4,h,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.unless.call(e,e&&e.plain,{hash:{},inverse:u.noop,fn:u.program(6,y,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.split,{hash:{},inverse:u.noop,fn:u.program(8,g,t),data:t}))||0===r)&&(i+=r),i+" "}function h(e,t){var r;return""+' <span class="keyboard-shortcuts-keys-plain">'+d(typeof(r=e&&e.s)===l?r.apply(e):r)+"</span> "}function y(e,t){var r;return""+' <span class="keyboard-shortcuts-keys-key">'+d(typeof(r=e&&e.s)===l?r.apply(e):r)+"</span> "}function g(e,t){return" <br> "}return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-title-icon">',((a=typeof(a=t&&t.keyboardIcon)===l?a.apply(t):a)||0===a)&&(c+=a),c+="</i> "+d((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,"Keyboard Shortcuts",{hash:{},data:s}))+' </h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> ',a=n.each.call(t,t&&t.groups,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){var r,i="";return i+=' <h5 class="keyboard-shortcuts-header">'+d(typeof(r=e&&e.label)===l?r.apply(e):r)+'</h5> <ul class="list keyboard-shortcuts-list"> ',((r=n.each.call(e,e&&e.shortcuts,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+" </ul> "}),s),data:s}),(a||0===a)&&(c+=a),c+" </div> </div> </div> "}))},28664:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return""+" "+l(i(r(27412)).call(e,"Settings",{hash:{},data:t}))+" "}function p(e,t){return""+" "+l(i(r(27412)).call(e,"Sign In",{hash:{},data:t}))+" "}return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon circle-exclamation-mark"></i> ',o=n.if.call(t,t&&t.hasPlexSubscription,{hash:{},inverse:d.program(3,(function(e,t){return""+" "+l(i(r(27412)).call(e,"Plex Pass Required",{hash:{},data:t}))+" "}),a),fn:d.program(1,(function(e,t){return""+" "+l(i(r(27412)).call(e,"Internet Required",{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </h4> </div> <div class="modal-body"> <p class="confirm-message"> ',o=n.if.call(t,t&&t.hasPlexSubscription,{hash:{},inverse:d.program(7,(function(e,t){return""+" "+l(i(r(27412)).call(e,"This library requires your server be signed in to a Plex Pass account.",{hash:{},data:t}))+" "}),a),fn:d.program(5,(function(e,t){return""+" "+l(i(r(27412)).call(e,"This server cannot reach the Internet. Please verify connectivity and try again.",{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </p> </div> <div class="modal-footer"> <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">'+l(i(r(27412)).call(t,"Ignore",{hash:{},data:a}))+"</button> ",o=n.if.call(t,t&&t.hasPlexSubscription,{hash:{},inverse:d.program(11,(function(e,t){var r,i="";return i+=' <a class="confirm-btn btn btn-lg btn-primary" href="'+l("function"==typeof(r=e&&e.serverSettingsRoute)?r.apply(e):r)+'"> ',((r=n.if.call(e,e&&e.isSignedIn,{hash:{},inverse:d.program(14,p,t),fn:d.program(12,u,t),data:t}))||0===r)&&(i+=r),i+" </a> "}),a),fn:d.program(9,(function(e,t){return""+' <button type="button" class="confirm-btn btn btn-lg btn-primary">'+l(i(r(27412)).call(e,"OK",{hash:{},data:t}))+"</button> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </div> </div> </div> "}))},12796:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d="function",u=this;function p(e,t,r){var i,s="";return s+=' <ul class="media-info-file-list well"> ',((i=n.if.call(e,r&&r.showDeleteFile,{hash:{},inverse:u.noop,fn:u.program(5,m,t),data:t}))||0===i)&&(s+=i),s+=" ",((i=n.each.call(e,e&&e.Part,{hash:{},inverse:u.noop,fn:u.programWithDepth(10,g,t,r),data:t}))||0===i)&&(s+=i),s+" </ul> "}function m(e,t){var n,s="";return s+=' <a href="#" data-media-item="'+l(typeof(n=null==t||!1===t?t:t.index)===d?n.apply(e):n)+'" class="delete-btn text-danger pull-right"> <i class="glyphicon bin"></i> ',((n=i(r(45508)).call(e,null==(n=e&&e.Part)||!1===n?n:n.length,"1",{hash:{},inverse:u.program(8,y,t),fn:u.program(6,h,t),data:t}))||0===n)&&(s+=n),s+" </a> "}function h(e,t){return""+" "+l(i(r(27412)).call(e,"Delete File",{hash:{},data:t}))+" "}function y(e,t){return""+" "+l(i(r(27412)).call(e,"Delete Files",{hash:{},data:t}))+" "}function g(e,t,r){var i,s="";return s+=" <li> ",((i=n.if.call(e,r&&r.showFilepath,{hash:{},inverse:u.program(13,v,t),fn:u.program(11,f,t),data:t}))||0===i)&&(s+=i),s+=" ",((i=n.unless.call(e,e&&e.accessible,{hash:{},inverse:u.noop,fn:u.program(15,b,t),data:t}))||0===i)&&(s+=i),s+" </li> "}function f(e,t){var r;return""+" "+l(typeof(r=e&&e.file)===d?r.apply(e):r)+" "}function v(e,t){return""+" "+l(i(r(26844)).call(e,e&&e.file,{hash:{},data:t}))+" "}function b(e,t){var r,i="";return i+=" ",((r=n.if.call(e,e&&e.exists,{hash:{},inverse:u.program(18,P,t),fn:u.program(16,S,t),data:t}))||0===r)&&(i+=r),i+" "}function S(e,t){return""+' <span class="label label-danger" data-toggle="tooltip" title="'+l(i(r(27412)).call(e,"Please check the permissions for this file.",{hash:{},data:t}))+'">'+l(i(r(27412)).call(e,"Inaccessible",{hash:{},data:t}))+"</span> "}function P(e,t){return""+' <span class="label label-danger" data-toggle="tooltip" title="'+l(i(r(27412)).call(e,"Please check that this file exists and the necessary drive is mounted.",{hash:{},data:t}))+'">'+l(i(r(27412)).call(e,"Unavailable",{hash:{},data:t}))+"</span> "}function I(e,t){var n;return""+' <li> <span class="detail-label">'+l(i(r(27412)).call(e,e&&e.name,{hash:{},data:t}))+'</span> <span class="detail">'+l(typeof(n=e&&e.value)===d?n.apply(e):n)+"</span> </li> "}function E(e,t,s){var a,o="";return o+=' <div class="part"> <div class="props"> <h4>'+l(i(r(27412)).call(e,"Part",{hash:{},data:t}))+"</h4> <ul> ",((a=n.each.call(e,e&&e.properties,{hash:{},inverse:u.noop,fn:u.program(21,I,t),data:t}))||0===a)&&(o+=a),o+=' </ul> </div> <div class="streams"> ',((a=n.each.call(e,e&&e.Stream,{hash:{},inverse:u.noop,fn:u.program(24,w,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(e,s&&s.loading,{hash:{},inverse:u.noop,fn:u.program(33,k,t),data:t}))||0===a)&&(o+=a),o+" </div> </div> "}function w(e,t){var s,a="";return a+=' <div class="props"> ',((s=i(r(45508)).call(e,e&&e.streamType,"1",{hash:{},inverse:u.program(27,O,t),fn:u.program(25,C,t),data:t}))||0===s)&&(a+=s),a+=" <ul> ",((s=n.each.call(e,e&&e.properties,{hash:{},inverse:u.noop,fn:u.program(21,I,t),data:t}))||0===s)&&(a+=s),a+" </ul> </div> "}function C(e,t){return""+" <h4>"+l(i(r(27412)).call(e,"Video",{hash:{},data:t}))+"</h4> "}function O(e,t){var n;return(n=i(r(45508)).call(e,e&&e.streamType,"2",{hash:{},inverse:u.program(30,T,t),fn:u.program(28,M,t),data:t}))||0===n?n:""}function M(e,t){return""+" <h4>"+l(i(r(27412)).call(e,"Audio",{hash:{},data:t}))+"</h4> "}function T(e,t){var n;return(n=i(r(45508)).call(e,e&&e.streamType,"3",{hash:{},inverse:u.noop,fn:u.program(31,D,t),data:t}))||0===n?n:""}function D(e,t){return""+" <h4>"+l(i(r(27412)).call(e,"Subtitles",{hash:{},data:t}))+"</h4> "}function k(e,t){return""+' <div class="props"> <h4>'+l(i(r(27412)).call(e,"Loading",{hash:{},data:t}))+"...</h4> </div> "}function x(e,t){var n;return""+' <div class="modal-footer"> <div class="pull-left"> <a href="'+l(typeof(n=e&&e.url)===d?n.apply(e):n)+'" target="_blank">'+l(i(r(27412)).call(e,"View XML",{hash:{},data:t}))+"</a> </div> </div> "}return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon circle-info"></i> '+l(i(r(27412)).call(t,"Media Info",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <div class="position-ref ',((o=n.unless.call(t,t&&t.hasStreams,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"hide-streams-column"}),a),data:a}))||0===o)&&(c+=o),c+='"> ',o=n.if.call(t,t&&t.hasFiles,{hash:{},inverse:u.noop,fn:u.program(3,(function(e,t){var s,a="";return a+=' <div class="files"> <h4>'+l(i(r(27412)).call(e,"Files",{hash:{},data:t}))+"</h4> ",((s=n.each.call(e,e&&e.media,{hash:{},inverse:u.noop,fn:u.programWithDepth(4,p,t,e),data:t}))||0===s)&&(a+=s),a+" </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.each.call(t,t&&t.media,{hash:{},inverse:u.noop,fn:u.programWithDepth(20,(function(e,t,s){var a,o="";return o+=' <div class="media"> <div class="props"> <h4>'+l(i(r(27412)).call(e,"Media",{hash:{},data:t}))+"</h4> <ul> ",((a=n.each.call(e,e&&e.properties,{hash:{},inverse:u.noop,fn:u.program(21,I,t),data:t}))||0===a)&&(o+=a),o+=" </ul> </div> ",((a=n.each.call(e,e&&e.Part,{hash:{},inverse:u.noop,fn:u.programWithDepth(23,E,t,s),data:t}))||0===a)&&(o+=a),o+" </div> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+=" </div> </div> ",((o=n.if.call(t,t&&t.key,{hash:{},inverse:u.noop,fn:u.programWithDepth(35,(function(e,t,r){var i;return(i=n.if.call(e,r&&r.showFilepath,{hash:{},inverse:u.noop,fn:u.program(36,x,t),data:t}))||0===i?i:""}),a,t),data:a}))||0===o)&&(c+=o),c+" </div> </div> "}))},85148:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon circle-arrow-right"></i> '+l(i(r(27412)).call(t,"Go Premium",{hash:{},data:a}))+' </h4> </div> <div class="modal-body"> <p class="text-center"><i class="plex-image plex-pass"></i></p> <h4 class="text-center">'+l(i(r(27412)).call(t,"This feature requires a Plex Pass subscription.",{hash:{},data:a}))+"</h4> ",o=n.if.call(t,t&&t.isClaimed,{hash:{},inverse:this.program(3,(function(e,t){return""+' <p class="text-muted">'+l(i(r(27412)).call(e,'The server "{1}" has not been claimed. This server must be claimed by an account with a Plex Pass subscription.',e&&e.escapedFriendlyName,{hash:{},data:t}))+"</p> "}),a),fn:this.program(1,(function(e,t){return""+' <p class="text-muted">'+l(i(r(27412)).call(e,"Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.",{hash:{},data:t}))+"</p> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <p class="text-center"> <a class="btn btn-sm btn-primary" href="'+l("function"==typeof(o=t&&t.plexPassUrl)?o.apply(t):o)+'" target="_blank">'+l(i(r(27412)).call(t,"Learn More",{hash:{},data:a}))+"</a> </p> </div> </div> </div> "}))},81140:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon circle-exclamation-mark"></i> '+l(i(r(27412)).call(t,"Limited Connection",{hash:{},data:a}))+" - "+l("function"==typeof(o=t&&t.serverName)?o.apply(t):o)+' </h4> </div> <div class="modal-body"> <p> '+l(i(r(27412)).call(t,"You are not connected directly to {1} so streaming quality may be limited. You may be able to connect directly to this server by changing your home network settings. {2}Learn more{3}",t&&t.escapedServerName,'<a href="https://help.plex.tv/relay" target="_blank" class="learn-more">',"</a>",{hash:{},data:a}))+' </p> </div> <div class="modal-footer"> <button type="button" class="confirm-btn btn btn-lg btn-primary">'+l(i(r(27412)).call(t,"OK",{hash:{},data:a}))+"</button> </div> </div> </div> "}))},22624:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon file"></i> '+l(i(r(27412)).call(t,"Select a File",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <ul class="list select-list"> ',o=n.each.call(t,t&&t.medias,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var n,s="";return s+=' <li class="striped-list-item select-list-item"> <a class="media" data-value="'+l("function"==typeof(n=null==t||!1===t?t:t.index)?n.apply(e):n)+'" href="#"> ',((n=i(r(30700)).call(e,null==(n=null==(n=e&&e.Part)||!1===n?n:n[0])||!1===n?n:n.file,35,{hash:{},data:t}))||0===n)&&(s+=n),s+" </a> </li> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </ul> </div> </div> </div> "}))},8e4:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+='<div class="convert-message-container row"> <div class="col-sm-3 text-center"> <p class="convert-error-icon"><i class="glyphicon circle-exclamation-mark"></i></p> </div> <div class="col-sm-8"> <h4> ',o=n.if.call(t,t&&t.status,{hash:{},inverse:this.program(3,(function(e,t){return""+" "+l(i(r(27412)).call(e,"There was a problem preparing for optimization.",{hash:{},data:t}))+" "}),a),fn:this.program(1,(function(e,t){var r;return""+" "+l("function"==typeof(r=e&&e.status)?r.apply(e):r)+" "}),a),data:a}),(o||0===o)&&(c+=o),c+' </h4> <h4><a class="try-again-link" href="#">'+l(i(r(27412)).call(t,"Try again",{hash:{},data:a}))+"</a></h4> </div> </div> "}))},41304:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return"selected"}return c+='<label class="control-label" for="convert-storage-location">'+l(i(r(27412)).call(t,"Version storage location",{hash:{},data:a}))+'</label> <select id="convert-storage-location" class="storage-location-select" name="storageLocation" ',((o=n.if.call(t,t&&t.disableLocation,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return"disabled"}),a),data:a}))||0===o)&&(c+=o),c+='> <option value="-1" ',((o=i(r(45508)).call(t,t&&t.selectedLocationID,-1,{hash:{},inverse:d.noop,fn:d.program(3,u,a),data:a}))||0===o)&&(c+=o),c+=">"+l(i(r(27412)).call(t,"In folders with original items",{hash:{},data:a}))+"</option> ",o=n.each.call(t,t&&t.locations,{hash:{},inverse:d.noop,fn:d.programWithDepth(5,(function(e,t,n){var s,a="";return a+=' <option value="'+l("function"==typeof(s=e&&e.id)?s.apply(e):s)+'" ',((s=i(r(45508)).call(e,n&&n.selectedLocationID,e&&e.id,{hash:{},inverse:d.noop,fn:d.program(3,u,t),data:t}))||0===s)&&(a+=s),a+">"+l(i(r(28764)).call(e,e&&e.path,50,20,{hash:{},data:t}))+"</option> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+' </select> <p class="help-block">'+l(i(r(27412)).call(t,'A "Plex Versions" folder will be created in your chosen location.',{hash:{},data:a}))+"</p> "}))},75432:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return"hidden"}function p(e,t){return"checked"}return c+='<div class="form-group ',((o=n.unless.call(t,t&&t.showUnwatched,{hash:{},inverse:d.noop,fn:d.program(1,u,a),data:a}))||0===o)&&(c+=o),c+='"> <label class="control-label"> <input type="checkbox" id="convert-policy-unwatched" name="policyUnwatched" ',((o=n.if.call(t,null==(o=t&&t.policy)||!1===o?o:o.unwatched,{hash:{},inverse:d.noop,fn:d.program(3,p,a),data:a}))||0===o)&&(c+=o),c+="> "+l(i(r(27412)).call(t,"Unwatched only",{hash:{},data:a}))+' </label> </div> <div class="form-group ',((o=n.unless.call(t,t&&t.isDirectory,{hash:{},inverse:d.noop,fn:d.program(1,u,a),data:a}))||0===o)&&(c+=o),c+='"> <label class="control-label"> <input type="checkbox" id="convert-policy-scope" name="policyScope" value="count" ',((o=i(r(45508)).call(t,null==(o=t&&t.policy)||!1===o?o:o.scope,"count",{hash:{},inverse:d.noop,fn:d.program(3,p,a),data:a}))||0===o)&&(c+=o),c+="> "+l(i(r(27412)).call(t,"Limit to",{hash:{},data:a}))+' <input type="number" id="convert-policy-value" name="policyValue" class="policy-value-control form-control" ',o=n.if.call(t,null==(o=t&&t.policy)||!1===o?o:o.value,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){var r;return""+'value="'+l("function"==typeof(r=null==(r=e&&e.policy)||!1===r?r:r.value)?r.apply(e):r)+'"'}),a),data:a}),(o||0===o)&&(c+=o),c+="> "+l(i(r(27412)).call(t,"items",{hash:{},data:a}))+' </label> <p class="convert-warning help-block ',((o=n.unless.call(t,t&&t.showLimitWarning,{hash:{},inverse:d.noop,fn:d.program(1,u,a),data:a}))||0===o)&&(c+=o),c+='"> <i class="convert-warning-icon glyphicon circle-exclamation-mark"></i> <span class="convert-warning-text"> ',o=n.if.call(t,t&&t.isSync,{hash:{},inverse:d.program(9,(function(e,t){return""+" "+l(i(r(27412)).call(e,"A large number of items may be time-consuming to convert. If you have trouble, try reducing the number of items.",{hash:{},data:t}))+" "}),a),fn:d.program(7,(function(e,t){return""+" "+l(i(r(27412)).call(e,"A large number of sync items may be time-consuming to convert and transfer to your device. If you have trouble, try reducing the number of items.",{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+" </span> </p> </div> "}))},57284:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d="function",u=this;function p(e,t){return"selected"}function m(e,t){return""+" - "+l(i(r(74540)).call(e,e&&e.mediaSettings,{hash:{},data:t}))}return c+='<select class="convert-target-select" name="target" ',((o=n.if.call(t,t&&t.disableTarget,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"disabled"}),a),data:a}))||0===o)&&(c+=o),c+="> ",o=n.each.call(t,t&&t.targets,{hash:{},inverse:u.noop,fn:u.programWithDepth(3,(function(e,t,s){var a,o="";return o+=' <option value="'+l(typeof(a=e&&e.id)===d?a.apply(e):a)+'" ',((a=i(r(45508)).call(e,null==(a=s&&s.item)||!1===a?a:a.targetTagID,e&&e.id,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===a)&&(o+=a),o+="> "+l(typeof(a=e&&e.tag)===d?a.apply(e):a),((a=n.if.call(e,null==(a=e&&e.mediaSettings)||!1===a?a:a.videoResolution,{hash:{},inverse:u.noop,fn:u.program(6,m,t),data:t}))||0===a)&&(o+=a),o+" </option> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+=' <option value="-1" ',((o=n.unless.call(t,null==(o=t&&t.item)||!1===o?o:o.targetTagID,{hash:{},inverse:u.noop,fn:u.program(4,p,a),data:a}))||0===o)&&(c+=o),c+=">"+l(i(r(27412)).call(t,"Custom",{hash:{},data:a}))+'</option> </select> <div class="convert-custom-target-container"> <input type="text" class="convert-target-title form-control" name="targetTitle" class="form-control" value="'+l(typeof(o=null==(o=t&&t.item)||!1===o?o:o.target)===d?o.apply(t):o)+'" placeholder="'+l(i(r(27412)).call(t,"Quality Name",{hash:{},data:a}))+'"> <select class="convert-target-profile-select" name="targetProfile"> ',o=n.each.call(t,t&&t.profiles,{hash:{},inverse:u.noop,fn:u.programWithDepth(8,(function(e,t,n){var s,a="";return a+=' <option value="'+l(typeof(s=e&&e.title)===d?s.apply(e):s)+'" ',((s=i(r(45508)).call(e,null==(s=n&&n.selectedProfile)||!1===s?s:s.title,e&&e.title,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===s)&&(a+=s),a+"> "+l(typeof(s=e&&e.title)===d?s.apply(e):s)+" </option> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+=' </select> <select class="convert-target-quality-select" name="targetQuality"> ',o=n.each.call(t,t&&t.availableCustomQualities,{hash:{},inverse:u.noop,fn:u.programWithDepth(10,(function(e,t,n){var s,a="";return a+=' <option value="'+l(typeof(s=e&&e.index)===d?s.apply(e):s)+'" ',((s=i(r(45508)).call(e,null==(s=n&&n.selectedCustomQuality)||!1===s?s:s.index,e&&e.index,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===s)&&(a+=s),a+"> "+l(i(r(74540)).call(e,e,{hash:{},data:t}))+" </option> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+' </select> </div> <p class="help-block">'+l(i(r(27412)).call(t,"Plex will convert your media to this quality. Each version will be stored in a separate file.",{hash:{},data:a}))+"</p> "}))},34072:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this,u="function";return c+='<form id="convert-form" class="settings-container"> <div class="modal-body"> <div class="form-group ',((o=n.unless.call(t,t&&t.showRemuxOnlyWarning,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return"hidden"}),a),data:a}))||0===o)&&(c+=o),c+='"> <p class="convert-warning help-block"> <i class="convert-warning-icon glyphicon circle-exclamation-mark"></i> <span class="convert-warning-text"> '+l(i(r(27412)).call(t,"Video optimization may take a long time to complete on this server. You'll be able to use Plex normally while you wait.",{hash:{},data:a}))+' </span> </p> </div> <div class="form-group"> <label class="control-label" for="convert-title">'+l(i(r(27412)).call(t,"Title",{hash:{},data:a}))+'</label> <input type="text" id="convert-title" name="title" class="form-control" value="'+l(typeof(o=null==(o=t&&t.conversionItem)||!1===o?o:o.title)===u?o.apply(t):o)+'" placeholder="'+l(typeof(o=null==(o=t&&t.conversionItem)||!1===o?o:o.title)===u?o.apply(t):o)+'"> </div> <div class="policy-region"></div> <div class="targets-region"></div> <div class="location-region"></div> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">'+l(i(r(27412)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="submit" class="submit-btn btn btn-primary btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">',o=n.if.call(t,t&&t.isNew,{hash:{},inverse:d.program(5,(function(e,t){return l(i(r(27412)).call(e,"Save",{hash:{},data:t}))}),a),fn:d.program(3,(function(e,t){return l(i(r(27412)).call(e,"Optimize",{hash:{},data:t}))}),a),data:a}),(o||0===o)&&(c+=o),c+"</span> </button> </div> </form> "}))},74092:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="loading loading-inline"></div> '}))},22352:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon restart"></i> '+(0,this.escapeExpression)((a=r(27412),a&&(a.__esModule?a.default:a)).call(t,"Optimize",{hash:{},data:s}))+'</h4> </div> <div class="modal-body-region"></div> </div> </div> '}))},35852:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",c=this.escapeExpression;return o+'<div class="convert-message-container row"> <div class="col-sm-3 text-center"> <p class="convert-success-icon"><i class="glyphicon ok-2"></i></p> </div> <div class="col-sm-8"> <h4>'+c(i(r(27412)).call(t,"This media is being converted.",{hash:{},data:a}))+"</h4> <h4>"+c(i(r(27412)).call(t,"Watch the status of the conversion {1}here{2}.",'<a class="status-link" href="#">',"</a>",{hash:{},data:a}))+"</h4> </div> </div> "}))},95056:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="modal-dialog"> <div class="modal-alert"></div> <div class="modal-content"></div> </div> '}))},29392:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l=this,d=this.escapeExpression;return((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:l.program(3,(function(e,t){return' <a class="user-select-container" href="#"> '}),s),fn:l.program(1,(function(e,t){return' <div class="user-select-container"> '}),s),data:s}))||0===a)&&(c+=a),c+=' <div class="user-select-top"> <div class="user-poster img-circle"> <span class="add-icon">',((a="function"==typeof(a=t&&t.iconAdd)?a.apply(t):a)||0===a)&&(c+=a),c+='</span> </div> </div> <div class="caption"> <div class="username">'+d((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,"Add User",{hash:{},data:s}))+"</div> </div> ",((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:l.program(7,(function(e,t){return" </a> "}),s),fn:l.program(5,(function(e,t){return" </div> "}),s),data:s}))||0===a)&&(c+=a),c+" "}))},12080:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<span class="message">')+((0,this.escapeExpression)((s=r.message)||"function"==typeof(s=t&&t.message)?s.call(t,{hash:{},data:i}):s)+"</span> ")}))},76916:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return""+" "+l(i(r(27412)).call(e,"Confirm Current PIN",{hash:{},data:t}))+" "}function p(e,t){var r;return(r=n.if.call(e,e&&e.isOpeningAddManagedUser,{hash:{},inverse:d.program(11,h,t),fn:d.program(9,m,t),data:t}))||0===r?r:""}function m(e,t){return""+" "+l(i(r(27412)).call(e,"Enter Admin PIN",{hash:{},data:t}))+" "}function h(e,t){return""+" "+l(i(r(27412)).call(e,"Enter PIN",{hash:{},data:t}))+" "}function y(e,t){return""+' <button type="button" class="remove-btn btn-gray pull-left">'+l(i(r(27412)).call(e,"Remove",{hash:{},data:t}))+"</button> "}function g(e,t){return""+' <button type="button" class="skip-btn btn-gray" data-dismiss="modal">'+l(i(r(27412)).call(e,"Skip",{hash:{},data:t}))+"</button> "}function f(e,t){return""+' <button type="button" class="cancel-btn btn-gray" data-dismiss="modal">'+l(i(r(27412)).call(e,"Cancel",{hash:{},data:t}))+"</button> "}return c+='<div class="modal-header"> <div class="home-user-dropdown-container pull-right"></div> <h4 class="modal-title"> ',((o=n.if.call(t,t&&t.showBackButton,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return' <a class="back-btn btn-gray" href="#"><i class="glyphicon chevron-left"></i></a> '}),a),data:a}))||0===o)&&(c+=o),c+=" ",o=n.if.call(t,t&&t.isEditing,{hash:{},inverse:d.program(5,(function(e,t){var r;return(r=n.if.call(e,e&&e.isEditConfirmation,{hash:{},inverse:d.program(8,p,t),fn:d.program(6,u,t),data:t}))||0===r?r:""}),a),fn:d.program(3,(function(e,t){return""+' <i class="modal-icon glyphicon pencil"></i> '+l(i(r(27412)).call(e,"Edit PIN",{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <span class="loading loading-sm hidden"></span> </h4> </div> <form id="pin-form"> <div class="modal-body"> <ul class="tile-list user-select-list disabled"></ul> <input type="number" pattern="[0-9]*" class="pin-input"> <a class="pin-forgot-link btn-gray hidden" href="https://www.plex.tv/pin-reset/" target="_blank">'+l(i(r(27412)).call(t,"Forgot?",{hash:{},data:a}))+'</a> <div class="pin-digit-container" aria-hidden="true"> <div class="pin-digit"></div> <div class="pin-digit"></div> <div class="pin-digit"></div> <div class="pin-digit"></div> </div> ',o=n.if.call(t,t&&t.isEditWarning,{hash:{},inverse:d.noop,fn:d.program(13,(function(e,t){return""+' <p class="help-block"> '+l(i(r(27412)).call(e,"You do not currently have a PIN. This will allow any users in this home to switch to your account.",{hash:{},data:t}))+" </p> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" </div> ",o=n.if.call(t,t&&t.isEditing,{hash:{},inverse:d.noop,fn:d.program(15,(function(e,t){var s,a="";return a+=' <div class="modal-footer"> ',((s=n.if.call(e,e&&e.hasCurrentPIN,{hash:{},inverse:d.noop,fn:d.program(16,y,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.isEditWarning,{hash:{},inverse:d.program(20,f,t),fn:d.program(18,g,t),data:t}))||0===s)&&(a+=s),a+' <button type="submit" class="save-btn btn-link">'+l(i(r(27412)).call(e,"Save",{hash:{},data:t}))+"</button> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </form> "}))},2088:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],i=i||{};var s,a="",o=this;return((s=(r=this.merge(r,e.helpers)).if.call(t,t&&t.disabled,{hash:{},inverse:o.program(3,(function(e,t){return' <a class="user-select-container" href="#"> '}),i),fn:o.program(1,(function(e,t){return' <div class="user-select-container"> '}),i),data:i}))||0===s)&&(a+=s),a+=' <div class="user-select-top"> <div class="user-poster img-circle"></div> <i class="protected-icon user-icon glyphicon lock"></i> <i class="admin-icon user-icon glyphicon crown"></i> </div> <div class="caption"> <div class="username"></div> <div class="managed-title"></div> </div> ',((s=r.if.call(t,t&&t.disabled,{hash:{},inverse:o.program(7,(function(e,t){return" </a> "}),i),fn:o.program(5,(function(e,t){return" </div> "}),i),data:i}))||0===s)&&(a+=s),a+" "}))},45052:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="modal-header"> <h4 class="modal-title"> '+(0,this.escapeExpression)((a=r(27412),a&&(a.__esModule?a.default:a)).call(t,"Select User",{hash:{},data:s}))+' <span class="loading loading-sm"></span> </h4> </div> <div class="modal-body"></div> '}))},85192:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l="function",d=this.escapeExpression;return c+='<div class="form-group" data-attr="'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'"> <label for="text-'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" class="control-label">'+d((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,t&&t.label,{hash:{},data:s}))+'<span class="control-error"></span></label> <div class="input-group selectize-group"> <input type="text" id="text-'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" class="form-control text-field" name="'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" placeholder="'+d(typeof(a=t&&t.placeholder)===l?a.apply(t):a)+'" data-rating-key="'+d(typeof(a=t&&t.ratingKey)===l?a.apply(t):a)+'" data-title="'+d(typeof(a=t&&t.title)===l?a.apply(t):a)+'" ',a=n.if.call(t,t&&t.scopeToAttr,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var r;return""+'data-scope-to-attr="'+d(typeof(r=e&&e.scopeToAttr)===l?r.apply(e):r)+'" data-scope-to-param="'+d(typeof(r=e&&e.scopeToParam)===l?r.apply(e):r)+'"'}),s),data:s}),(a||0===a)&&(c+=a),c+"> </div> </div> "}))},39724:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){return""+' <h4 class="server-connect-error-header">'+l(i(r(27412)).call(e,"Problem Connecting to Plex",{hash:{},data:t}))+'</h4> <p class="text-muted">'+l(i(r(27412)).call(e,"Your server was unable to reach Plex. Please ensure that the computer or device running your server can access the internet.",{hash:{},data:t}))+"</p> "}function p(e,t){return""+' <h4 class="server-connect-error-header">'+l(i(r(27412)).call(e,"Signed in to Plex",{hash:{},data:t}))+'</h4> <p class="text-muted">'+l(i(r(27412)).call(e,"You have successfully signed your server in to Plex, but we were unable to reach it from outside your network.",{hash:{},data:t}))+"</p> "}return o=i(r(45508)).call(t,t&&t.mappingError,"badauth",{hash:{},inverse:d.program(3,(function(e,t){var n,s="";return((n=i(r(45508)).call(e,e&&e.mappingError,"myplexgone",{hash:{},inverse:d.program(6,p,t),fn:d.program(4,u,t),data:t}))||0===n)&&(s+=n),s+" "}),a),fn:d.program(1,(function(e,t){return""+' <h4 class="server-connect-error-header">'+l(i(r(27412)).call(e,"Problem Connecting to Plex",{hash:{},data:t}))+'</h4> <p class="text-muted">'+l(i(r(27412)).call(e,"Plex was unable to authenticate your server. Please sign your server out and try again.",{hash:{},data:t}))+"</p> "}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=i(r(22251)).call(t,t&&t.context,"settings",{hash:{},inverse:d.noop,fn:d.program(8,(function(e,t){return""+' <p class="text-muted">'+l(i(r(27412)).call(e,"If you skip this step you will not be able to share or stream media outside your home. If you change your mind later, you can adjust this in Settings.",{hash:{},data:t}))+"</p> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <p class="text-muted">'+l(i(r(27412)).call(t,"If you would like to enable this now, you will need to configure your router or firewall to allow Plex to contact your server. Please refer to our {1}Connecting a Server{2} article for more information.",'<a href="http://support.plex.tv/hc/en-us/articles/200484543-Connecting-a-Server/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:a}))+"</p> "}))},94504:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){return"disabled"}return c+='<div class="form-group"> <label for="lockable-'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'">'+d((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,t&&t.label,{hash:{},data:s}))+'</label> <div class="input-group"> <a href="#" data-field="'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" class="input-group-addon edit-lock-addon ',((a=n.if.call(t,t&&t.locked,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"locked"}),s),data:s}))||0===a)&&(c+=a),c+=" ",((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s}))||0===a)&&(c+=a),c+='" tabindex="-1"><i class="glyphicon lock"></i></a> <input type="number" id="lockable-'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" class="form-control lockable-field" name="'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" value="'+d(typeof(a=t&&t.value)===l?a.apply(t):a)+'" placeholder="'+d(typeof(a=t&&t.placeholder)===l?a.apply(t):a)+'" ',((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s}))||0===a)&&(c+=a),c+"> </div> </div> "}))},38880:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,c="",l="function",d=this.escapeExpression,u=this;return c+='<div class="form-group"> <label for="lockable-'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'">'+d((o=r(27412),o&&(o.__esModule?o.default:o)).call(t,t&&t.label,{hash:{},data:s}))+'</label> <div class="input-group selectize-group"> <a href="#" data-field="'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" class="input-group-addon edit-lock-addon',((a=n.if.call(t,t&&t.locked,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return" locked"}),s),data:s}))||0===a)&&(c+=a),c+='"><i class="glyphicon lock"></i></a> <input type="text" id="lockable-'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" class="form-control lockable-field tag-input-hidden" data-name="'+d(typeof(a=t&&t.name)===l?a.apply(t):a)+'" data-attr="'+d(typeof(a=t&&t.attribute)===l?a.apply(t):a)+'" data-only-delete="'+d(typeof(a=t&&t.onlyDelete)===l?a.apply(t):a)+'" ',a=n.if.call(t,t&&t.query,{hash:{},inverse:u.noop,fn:u.program(3,(function(e,t){var r;return""+'data-query="'+d(typeof(r=e&&e.query)===l?r.apply(e):r)+'"'}),s),data:s}),(a||0===a)&&(c+=a),c+"> </div> </div> "}))},36480:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){var r;return""+' rows="'+d(typeof(r=e&&e.rows)===l?r.apply(e):r)+'"'}function m(e,t){return"disabled"}function h(e,t){var r;return""+'data-scope-to-attr="'+d(typeof(r=e&&e.scopeToAttr)===l?r.apply(e):r)+'" data-scope-to-param="'+d(typeof(r=e&&e.scopeToParam)===l?r.apply(e):r)+'"'}function y(e,t){var r;return""+'data-rating-key="'+d(typeof(r=e&&e.ratingKey)===l?r.apply(e):r)+'"'}return c+='<div class="form-group selectize-group" data-attr="'+d(typeof(o=t&&t.name)===l?o.apply(t):o)+'"> <label for="lockable-'+d(typeof(o=t&&t.name)===l?o.apply(t):o)+'">'+d(i(r(27412)).call(t,t&&t.label,{hash:{},data:a}))+'</label> <div class="input-group"> <a href="#" data-field="'+d(typeof(o=t&&t.name)===l?o.apply(t):o)+'" class="input-group-addon edit-lock-addon',((o=n.if.call(t,t&&t.locked,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return" locked"}),a),data:a}))||0===o)&&(c+=o),c+=" ",((o=n.if.call(t,t&&t.disabled,{hash:{},inverse:u.noop,fn:u.program(3,(function(e,t){return" disabled"}),a),data:a}))||0===o)&&(c+=o),c+='" tabindex="-1"><i class="glyphicon lock"></i></a> ',o=i(r(45508)).call(t,t&&t.type,"textarea",{hash:{},inverse:u.program(10,(function(e,t){var r,i="";return i+=' <input type="text" id="lockable-'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'" class="form-control lockable-field" name="'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'" value="'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+'" placeholder="'+d(typeof(r=e&&e.placeholder)===l?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.disabled,{hash:{},inverse:u.noop,fn:u.program(8,m,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.scopeToAttr,{hash:{},inverse:u.noop,fn:u.program(11,h,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.ratingKey,{hash:{},inverse:u.noop,fn:u.program(13,y,t),data:t}))||0===r)&&(i+=r),i+"> "}),a),fn:u.program(5,(function(e,t){var r,i="";return i+=' <textarea class="form-control lockable-field" id="lockable-'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'"',((r=n.if.call(e,e&&e.rows,{hash:{},inverse:u.noop,fn:u.program(6,p,t),data:t}))||0===r)&&(i+=r),i+=' placeholder="'+d(typeof(r=e&&e.placeholder)===l?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.disabled,{hash:{},inverse:u.noop,fn:u.program(8,m,t),data:t}))||0===r)&&(i+=r),i+">"+d(typeof(r=e&&e.value)===l?r.apply(e):r)+"</textarea> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </div> </div> "}))},43956:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){return"checked"}function m(e,t){var r;return""+' <p class="help-block">'+d(typeof(r=e&&e.summary)===l?r.apply(e):r)+"</p> "}function h(e,t){var r,i="";return i+=' <select id="input_'+d(typeof(r=e&&e.id)===l?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===l?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.id)===l?r.apply(e):r)+'"> ',((r=n.each.call(e,e&&e.enumValues,{hash:{},inverse:u.noop,fn:u.programWithDepth(10,y,t,e),data:t}))||0===r)&&(i+=r),i+" </select> "}function y(e,t,n){var s,a="";return a+=' <option value="'+d(typeof(s=e&&e.value)===l?s.apply(e):s)+'" ',((s=i(r(45508)).call(e,e&&e.value,n&&n.value,{hash:{},inverse:u.noop,fn:u.program(11,g,t),data:t}))||0===s)&&(a+=s),a+">"+d(typeof(s=e&&e.label)===l?s.apply(e):s)+"</option> "}function g(e,t){return'selected="selected"'}function f(e,t){var s,a="";return a+=' <input type="',((s=i(r(45508)).call(e,e&&e.option,"hidden",{hash:{},inverse:u.program(16,b,t),fn:u.program(14,v,t),data:t}))||0===s)&&(a+=s),a+='" id="input_'+d(typeof(s=e&&e.id)===l?s.apply(e):s)+d(typeof(s=e&&e.idSuffix)===l?s.apply(e):s)+'" class="form-control" name="'+d(typeof(s=e&&e.id)===l?s.apply(e):s)+'" value="'+d(typeof(s=e&&e.value)===l?s.apply(e):s)+'" ',((s=n.if.call(e,e&&e.placeholder,{hash:{},inverse:u.noop,fn:u.program(18,S,t),data:t}))||0===s)&&(a+=s),a+"> "}function v(e,t){return"password"}function b(e,t){return"text"}function S(e,t){var r;return""+'placeholder="'+d(typeof(r=e&&e.placeholder)===l?r.apply(e):r)+'"'}return c+='<div class="form-group ',((o=n.if.call(t,t&&t.advanced,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"advanced-setting"}),a),data:a}))||0===o)&&(c+=o),c+='"> ',o=i(r(45508)).call(t,t&&t.type,"bool",{hash:{},inverse:u.program(8,(function(e,t){var r,i="";return i+=' <label class="control-label" for="input_'+d(typeof(r=e&&e.id)===l?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===l?r.apply(e):r)+'">'+d(typeof(r=e&&e.label)===l?r.apply(e):r)+"</label> ",((r=n.if.call(e,e&&e.enumValues,{hash:{},inverse:u.program(13,f,t),fn:u.program(9,h,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.summary,{hash:{},inverse:u.noop,fn:u.program(6,m,t),data:t}))||0===r)&&(i+=r),i+" "}),a),fn:u.program(3,(function(e,t){var r,i="";return i+=' <label class="control-label" for="input_'+d(typeof(r=e&&e.id)===l?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===l?r.apply(e):r)+'"> <input type="checkbox" id="input_'+d(typeof(r=e&&e.id)===l?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===l?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.id)===l?r.apply(e):r)+'" value="1" ',((r=n.if.call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===r)&&(i+=r),i+="> "+d(typeof(r=e&&e.label)===l?r.apply(e):r)+" </label> ",((r=n.if.call(e,e&&e.summary,{hash:{},inverse:u.noop,fn:u.program(6,m,t),data:t}))||0===r)&&(i+=r),i+" "}),a),data:a}),(o||0===o)&&(c+=o),c+" </div> "}))},14032:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){var r;return""+' rows="'+d(typeof(r=e&&e.rows)===l?r.apply(e):r)+'"'}function m(e,t){var r;return""+'data-exclude-param="'+d(typeof(r=e&&e.excludeParam)===l?r.apply(e):r)+'" data-exclude-value="'+d(typeof(r=e&&e.excludeValue)===l?r.apply(e):r)+'"'}return c+='<div class="form-group"> <label for="text-'+d(typeof(o=t&&t.name)===l?o.apply(t):o)+'">'+d(i(r(27412)).call(t,t&&t.label,{hash:{},data:a}))+"</label> ",o=i(r(45508)).call(t,t&&t.type,"textarea",{hash:{},inverse:u.program(4,(function(e,t){var r,i="";return i+=' <input type="text" id="text-'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'" class="form-control text-field" name="'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'" value="'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+'" placeholder="'+d(typeof(r=e&&e.placeholder)===l?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.excludeParam,{hash:{},inverse:u.noop,fn:u.program(5,m,t),data:t}))||0===r)&&(i+=r),i+"> "}),a),fn:u.program(1,(function(e,t){var r,i="";return i+=' <textarea class="form-control text-field" id="text-'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.name)===l?r.apply(e):r)+'"',((r=n.if.call(e,e&&e.rows,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+' placeholder="'+d(typeof(r=e&&e.placeholder)===l?r.apply(e):r)+'">'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+"</textarea> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </div> "}))},57680:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="player-slider-track"> <div class="player-slider-progress"></div> </div> <div class="player-slider-thumb"></div> '}))},99332:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+'<form class="edit-section-advanced-form settings-container"> <div class="language-group"> <input type="hidden" name="language" value="'+l("function"==typeof(o=null==(o=t&&t.section)||!1===o?o:o.language)?o.apply(t):o)+'"> </div> <div class="row"> <div class="col-md-12"> <div class="form-group scanner-group hidden"> <label for="edit-section-scanner" class="control-label"> '+l(i(r(27412)).call(t,"Scanner",{hash:{},data:a}))+' <span class="control-error">'+l(i(r(27412)).call(t,"A scanner is required.",{hash:{},data:a}))+'</span> </label> <select id="edit-section-scanner" name="scanner"></select> </div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="form-group agent-group hidden"> <label for="edit-section-agent" class="control-label"> '+l(i(r(27412)).call(t,"Agent",{hash:{},data:a}))+' <span class="control-error">'+l(i(r(27412)).call(t,"An agent is required.",{hash:{},data:a}))+'</span> </label> <select id="edit-section-agent" name="agent"></select> </div> </div> </div> <div class="row"> <div class="col-md-12 section-agent-settings-region"></div> </div> <div class="row"> <div class="col-md-12 section-settings-region"></div> </div> </form> '}))},1356:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",c=this.escapeExpression;return o+'<form class="edit-section-folders-form settings-container"> <p>'+c(i(r(27412)).call(t,"Add folders to your library",{hash:{},data:a}))+'</p> <div class="form-group Location-group"> <div class="paths-region"></div> <p class="button-container"> <button type="button" class="add-folder-btn btn btn-icon-label btn-default"> <i class="glyphicon folder-plus"></i> '+c(i(r(27412)).call(t,"Browse for media folder",{hash:{},data:a}))+' </button> </p> <p class="control-error">'+c(i(r(27412)).call(t,"At least one folder is required.",{hash:{},data:a}))+'</p> </div> <p class="help-block">'+c(i(r(27412)).call(t,"Help us out by following {1}our guide{2} to naming and organizing your media.",'<a href="https://support.plex.tv/articles/naming-and-organizing-your-movie-media-files/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:a}))+"</p> </form> "}))},70516:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<div class="col-md-12"> <div class="form-group path-group"> <input type="text" name="path" class="form-control" value="')+((0,this.escapeExpression)((s=r.path)||"function"==typeof(s=t&&t.path)?s.call(t,{hash:{},data:i}):s)+'"> <div class="path-actions"> <a href="#" class="remove-path-btn btn-link btn-gray"><i class="glyphicon remove-2"></i></a> </div> </div> </div> ')}))},27160:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;return c+='<div class="choose-library use-premium-library" data-agent="com.plexapp.agents.plexmusic" data-scanner="Plex Premium Music Scanner"> <div class="row"> <div class="col-xs-12"> <div class="row use-library-header"> <div class="col-xs-12"> <input type="radio"> <span class="header-text"> '+l(i(r(27412)).call(t,"Create a premium Plex music library!",{hash:{},data:a}))+' </span> </div> </div> <div class="row use-premium-library-body"> <div class="col-xs-8"> <ul> <li>'+l(i(r(27412)).call(t,"Access to the best artwork, artist bios, album reviews, and more",{hash:{},data:a}))+"</li> <li>"+l(i(r(27412)).call(t,"Smart mixes based on track or mood",{hash:{},data:a}))+"</li> <li>"+l(i(r(27412)).call(t,"Improved music recognition and matching",{hash:{},data:a}))+"</li> </ul> ",o=n.unless.call(t,t&&t.hasPremiumMusic,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return""+' <p class="help-block"> '+l(i(r(27412)).call(e,"Note: An active Plex Pass is required for this service. Don't have a Plex Pass? {1}Subscribe here{2}",'<a href="{3}" target="_blank">',"</a>",e&&e.plexPassUrl,{hash:{},data:t}))+" </p> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </div> <div class="col-xs-4 vendor-logos"> ',((o=n.if.call(t,t&&t.hasLyrics,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return'<div class="vendor-logo vendor-logo-lyricfind"></div>'}),a),data:a}))||0===o)&&(c+=o),c+' <div class="vendor-logo vendor-logo-gracenote"></div> <div class="vendor-logo vendor-logo-plex-pass"></div> </div> </div> </div> </div> </div> <div class="choose-library use-basic-library"> <div class="row use-library-header"> <div class="col-xs-12"> <input type="radio"> '+l(i(r(27412)).call(t,"Create a basic music library",{hash:{},data:a}))+" </div> </div> </div> "}))},73496:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this;function u(e,t){var n,s="";return s+=" ",((n=i(r(45508)).call(e,e&&e.id,"enableBIFGeneration",{hash:{},inverse:d.noop,fn:d.program(3,p,t),data:t}))||0===n)&&(s+=n),s+" "}function p(e,t){return""+' <div class="form-group"> <button type="button" class="delete-thumbnails-btn btn btn-sm btn-danger">'+l(i(r(27412)).call(e,"Delete Preview Thumbnails",{hash:{},data:t}))+"</button> </div> "}return o=n.each.call(t,t&&t.settings,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,(function(e,t,s){var a,o="";return o+=" "+l(i(r(8276)).call(e,"setting",{hash:{idSuffix:"_c"},data:t}))+" ",((a=n.if.call(e,s&&s.edit,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===a)&&(o+=a),o+" "}),a,t),data:a}),(o||0===o)&&(c+=o),c+" "}))},9644:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d=this,u="function";function p(e,t){return"selectable"}function m(e,t){return"selected"}return c+='<form class="edit-section-type-form settings-container ',((o=n.if.call(t,null==(o=t&&t.section)||!1===o?o:o.type,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return"section-type-chosen"}),a),data:a}))||0===o)&&(c+=o),c+=" ",((o=n.unless.call(t,t&&t.isInitialTypeSupported,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return"is-type-unsupported"}),a),data:a}))||0===o)&&(c+=o),c+='"> ',o=n.if.call(t,t&&t.add,{hash:{},inverse:d.program(7,(function(e,t){return""+" <label>"+l(i(r(27412)).call(e,"Library type",{hash:{},data:t}))+"</label> "}),a),fn:d.program(5,(function(e,t){return""+' <p class="prompt">'+l(i(r(27412)).call(e,"Select your library type",{hash:{},data:t}))+"</p> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="wizard-blocks-group form-group type-group"> ',o=n.each.call(t,t&&t.sectionTypes,{hash:{},inverse:d.noop,fn:d.programWithDepth(9,(function(e,t,s){var a,o="";return o+=' <a class="wizard-block section-type ',((a=n.if.call(e,s&&s.canChangeType,{hash:{},inverse:d.noop,fn:d.program(10,p,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=i(r(45508)).call(e,s&&s.currentSectionKey,e&&e.key,{hash:{},inverse:d.noop,fn:d.program(12,m,t),data:t}))||0===a)&&(o+=a),o+='" data-key="'+l(typeof(a=e&&e.key)===u?a.apply(e):a)+'" href="#"> <div class="wizard-block-icon">',((a=typeof(a=e&&e.typeIcon)===u?a.apply(e):a)||0===a)&&(o+=a),o+"</div> "+l(typeof(a=e&&e.title)===u?a.apply(e):a)+" </a> "}),a,t),data:a}),(o||0===o)&&(c+=o),c+=' <label class="control-label"> <span class="control-error">'+l(i(r(27412)).call(t,"You must select a media type.",{hash:{},data:a}))+'</span> </label> </div> <div class="visible-once-section-type-chosen"> ',o=n.if.call(t,t&&t.hasType,{hash:{},inverse:d.noop,fn:d.program(14,(function(e,t){return""+' <div class="row"> <div class="col-xs-12"> <p class="prompt">'+l(i(r(27412)).call(e,"Name your library and choose language.",{hash:{},data:t}))+"</p> </div> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' <div class="row section-type-unsupported"> <div class="col-md-7"> <label>'+l(i(r(27412)).call(t,"Sorry, this library type is unsupported by this server.",{hash:{},data:a}))+'</label> </div> </div> <div class="row section-type-supported"> <div class="col-md-7"> <div class="form-group title-group"> <div> <label for="edit-section-title" class="control-label"> '+l(i(r(27412)).call(t,"Name",{hash:{},data:a}))+' <span class="control-error">'+l(i(r(27412)).call(t,"A library name is required.",{hash:{},data:a}))+'</span> </label> </div> <input type="text" id="edit-section-title" name="title" class="form-control" value="'+l(typeof(o=null==(o=t&&t.section)||!1===o?o:o.title)===u?o.apply(t):o)+'"> </div> </div> <div class="col-md-5"> <div class="form-group language-group"> <div> <label for="edit-section-language" class="control-label"> '+l(i(r(27412)).call(t,"Language",{hash:{},data:a}))+' <span class="control-error">'+l(i(r(27412)).call(t,"A language is required.",{hash:{},data:a}))+'</span> </label> </div> <select id="edit-section-language" name="language"></select> </div> </div> </div> <div class="row section-type-supported"> <div class="col-md-12"> <span class="text-muted"> ',o=n.if.call(t,t&&t.updatedAt,{hash:{},inverse:d.noop,fn:d.program(16,(function(e,t){return""+" "+l(i(r(27412)).call(e,"Last updated {1}",e&&e.escapedUpdatedAt,{hash:{},data:t}))+" "}),a),data:a}),(o||0===o)&&(c+=o),c+" </span> </div> </div> </div> </form> "}))},59344:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){return"selected"}function m(e,t){return""+' <option value="">'+d(i(r(27412)).call(e,"Loading...",{hash:{},data:t}))+"</option> "}return c+='<div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-title">'+d(i(r(27412)).call(t,"Artist",{hash:{},data:a}))+'</label> <input type="text" id="match-search-parentTitle" name="parentTitle" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.parentTitle)===l?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-agent">'+d(i(r(27412)).call(t,"Agent",{hash:{},data:a}))+'</label> <select id="match-search-agent" name="agent"> ',o=n.each.call(t,t&&t.agents,{hash:{},inverse:u.program(4,m,a),fn:u.program(1,(function(e,t){var r,i="";return i+=' <option value="'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+">"+d(typeof(r=e&&e.label)===l?r.apply(e):r)+"</option> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </select> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-title">'+d(i(r(27412)).call(t,"Album",{hash:{},data:a}))+'</label> <input type="text" id="match-search-title" name="title" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.title)===l?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-language">'+d(i(r(27412)).call(t,"Language",{hash:{},data:a}))+'</label> <select id="match-search-language" name="language"> ',o=n.each.call(t,t&&t.languages,{hash:{},inverse:u.program(4,m,a),fn:u.program(6,(function(e,t){var r;return""+' <option value="'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+'">'+d(typeof(r=e&&e.label)===l?r.apply(e):r)+"</option> "}),a),data:a}),(o||0===o)&&(c+=o),c+' </select> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-year">'+d(i(r(27412)).call(t,"Year",{hash:{},data:a}))+'</label> <input type="text" id="match-search-year" name="year" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.year)===l?o.apply(t):o)+'"> </div> </div> </div> '}))},89744:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){return"selected"}function m(e,t){return""+' <option value="">'+d(i(r(27412)).call(e,"Loading...",{hash:{},data:t}))+"</option> "}return c+='<div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-title">'+d(i(r(27412)).call(t,"Title",{hash:{},data:a}))+'</label> <input type="text" id="match-search-title" name="title" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.title)===l?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-agent">'+d(i(r(27412)).call(t,"Agent",{hash:{},data:a}))+'</label> <select id="match-search-agent" name="agent"> ',o=n.each.call(t,t&&t.agents,{hash:{},inverse:u.program(4,m,a),fn:u.program(1,(function(e,t){var r,i="";return i+=' <option value="'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+">"+d(typeof(r=e&&e.label)===l?r.apply(e):r)+"</option> "}),a),data:a}),(o||0===o)&&(c+=o),c+=' </select> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-year">'+d(i(r(27412)).call(t,"Year",{hash:{},data:a}))+'</label> <input type="text" id="match-search-year" name="year" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.year)===l?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-language">'+d(i(r(27412)).call(t,"Language",{hash:{},data:a}))+'</label> <select id="match-search-language" name="language"> ',o=n.each.call(t,t&&t.languages,{hash:{},inverse:u.program(4,m,a),fn:u.program(6,(function(e,t){var r;return""+' <option value="'+d(typeof(r=e&&e.value)===l?r.apply(e):r)+'">'+d(typeof(r=e&&e.label)===l?r.apply(e):r)+"</option> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </select> </div> </div> </div> "}))},10624:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="result-region"> <div class="loading loading-inline"></div> </div> '}))},22636:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){var r;return d(typeof(r=null==(r=e&&e.friendlyNameSetting)||!1===r?r:r.value)===l?r.apply(e):r)}function m(e,t){var r;return d(typeof(r=null==(r=e&&e.server)||!1===r?r:r.friendlyName)===l?r.apply(e):r)}return c+='<div class="row"> <div class="col-sm-6 col-sm-offset-3"> <form id="setup-basic-form" class="settings-container"> ',o=n.if.call(t,t&&t.friendlyNameSetting,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){var s,a="";return a+=' <div class="setup-basic-form-group form-group"> <p class="text-muted"> '+d(i(r(27412)).call(e,"Give your server a friendly name to help identify it in Plex apps and on your network.",{hash:{},data:t}))+' </p> <input type="text" id="'+d(typeof(s=null==(s=e&&e.friendlyNameSetting)||!1===s?s:s.id)===l?s.apply(e):s)+'" class="form-control" value="',((s=n.if.call(e,null==(s=e&&e.friendlyNameSetting)||!1===s?s:s.value,{hash:{},inverse:u.program(4,m,t),fn:u.program(2,p,t),data:t}))||0===s)&&(a+=s),a+'" placeholder="'+d(typeof(s=null==(s=e&&e.server)||!1===s?s:s.friendlyName)===l?s.apply(e):s)+'"> </div> '}),a),data:a}),(o||0===o)&&(c+=o),c+=" ",o=n.if.call(t,t&&t.publishSetting,{hash:{},inverse:u.noop,fn:u.program(6,(function(e,t){var n;return""+' <div class="setup-basic-form-group form-group"> <div class="publish-checkbox checkbox"> <label for="'+d(typeof(n=null==(n=e&&e.publishSetting)||!1===n?n:n.id)===l?n.apply(e):n)+'"> <input type="checkbox" id="'+d(typeof(n=null==(n=e&&e.publishSetting)||!1===n?n:n.id)===l?n.apply(e):n)+'" checked> '+d(i(r(27412)).call(e,"Allow me to access my media outside my home",{hash:{},data:t}))+' </label> </div> <p class="text-muted"> '+d(i(r(27412)).call(e,"Plex will attempt to automatically configure your network to allow Plex apps outside your home to access Plex Media Server on this computer. Remember this computer will need to be turned on to access your media.",{hash:{},data:t}))+" </p> </div> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <div class="setup-footer"> <button type="submit" class="submit-btn btn btn-primary btn-loading btn-lg"> <div class="loading loading-sm"></div> <span class="btn-label">'+d(i(r(27412)).call(t,"Next",{hash:{},data:a}))+'</span> </button> <button class="next-btn hidden" data-subset="setupLibrary"></button> </div> </form> </div> </div> <div class="modal-container"></div> '}))},73528:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l="function",d=this.escapeExpression,u=this;function p(e,t){return"checked"}return c+='<div class="row"> <div class="col-sm-6 col-sm-offset-3"> <div class="setup-apps-container"> <img class="setup-apps-image" src="'+d(typeof(o=t&&t.devicesImg)===l?o.apply(t):o)+'"> <a href="https://plex.tv/downloads" target="_blank" class="btn btn-default btn-lg">'+d(i(r(27412)).call(t,"Get Plex Apps",{hash:{},data:a}))+'</a> </div> <p class="text-muted">'+d(i(r(27412)).call(t,"All set! Your Plex Media Server is working hard to find your media and make it beautiful. Grab the Plex app for all your favorite devices to get the most out of Plex and start streaming everywhere!",{hash:{},data:a}))+'</p> <form id="setup-complete-form" class="settings-container"> ',o=n.if.call(t,t&&t.collectUsageDataSetting,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){var s,a="";return a+=' <div class="checkbox"> <label for="'+d(typeof(s=null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.id)===l?s.apply(e):s)+'"> <input type="checkbox" id="'+d(typeof(s=null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.id)===l?s.apply(e):s)+'" name="'+d(typeof(s=null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.id)===l?s.apply(e):s)+'" value="1" ',((s=n.if.call(e,null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.value,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===s)&&(a+=s),a+"> "+d(i(r(27412)).call(e,"Send anonymous usage data to Plex",{hash:{},data:t}))+' </label> </div> <p class="setup-complete-help text-muted"> '+d(i(r(27412)).call(e,"Help us improve everyone's Plex experience by sending anonymous usage data.",{hash:{},data:t}))+" </p> "}),a),data:a}),(o||0===o)&&(c+=o),c+' <div class="setup-footer setup-done-footer"> <button class="next-btn btn btn-default btn-lg" data-subset="setupLibrary">'+d(i(r(27412)).call(t,"Back",{hash:{},data:a}))+'</button> <button type="submit" class="submit-btn btn btn-primary btn-loading btn-lg active"> <div class="loading loading-sm"></div> <span class="btn-label">'+d(i(r(27412)).call(t,"Done",{hash:{},data:a}))+'</span> </button> <button class="done-btn btn btn-primary btn-lg hidden"></button> </div> </form> </div> </div> <div class="modal-container"></div> '}))},29300:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression;return c+='<div class="row row-padded"> <div class="col-md-8 col-md-offset-2"> ',o=n.if.call(t,t&&t.shared,{hash:{},inverse:this.program(3,(function(e,t){return""+" <h1>"+l(i(r(27412)).call(e,"A problem has been detected with a core component of Plex Media Server.",{hash:{},data:t}))+'</h1> <h2 class="text-muted">'+l(i(r(27412)).call(e,"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.",'<a href="https://forums.plex.tv" target="_blank">',"</a>",'<a href="http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:t}))+"</h2> "}),a),fn:this.program(1,(function(e,t){return""+" <h1>"+l(i(r(27412)).call(e,"Setup is not allowed for shared servers.",{hash:{},data:t}))+"</h1> "}),a),data:a}),(o||0===o)&&(c+=o),c+" </div> </div> "}))},5528:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,c="",l=this.escapeExpression,d="function";return c+'<h2 class="setup-intro-header">'+l(i(r(27412)).call(t,"How Plex Works",{hash:{},data:a}))+"</h2> <h4>"+l(i(r(27412)).call(t,"Plex Media Server runs on the computer where you keep your media",{hash:{},data:a}))+'</h4> <img class="setup-intro-img setup-intro-computer-img" src="'+l(typeof(o=t&&t.computerImg)===d?o.apply(t):o)+'"> <h4>'+l(i(r(27412)).call(t,"Plex scans your media, automatically organizes it, and makes it beautiful",{hash:{},data:a}))+'</h4> <img class="setup-intro-img setup-intro-media-img" src="'+l(typeof(o=t&&t.mediaImg)===d?o.apply(t):o)+'"> <h4>'+l(i(r(27412)).call(t,"Play your media on any screen with your favorite Plex app",{hash:{},data:a}))+'</h4> <img class="setup-intro-img setup-intro-play-img" src="'+l(typeof(o=t&&t.playImg)===d?o.apply(t):o)+'"> <p> <button class="next-btn btn btn-primary btn-lg" data-subset="setupLoading">'+l(i(r(27412)).call(t,"Got it!",{hash:{},data:a}))+"</button> </p> "}))},34212:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",c=this.escapeExpression;return o+'<div class="row"> <div class="col-sm-6 col-sm-offset-3"> <h4>'+c(i(r(27412)).call(t,"Organize Your Media",{hash:{},data:a}))+'</h4> <p class="text-muted">'+c(i(r(27412)).call(t,"Plex organizes your media into libraries. You can add as many libraries as you want, and you can have multiple libraries with the same type.",{hash:{},data:a}))+'</p> <p class="setup-add-section-container"> <button class="add-section-btn btn btn-default">'+c(i(r(27412)).call(t,"Add Library",{hash:{},data:a}))+'</button> </p> <div class="setup-section-list-container"></div> <div class="setup-footer"> <button class="next-btn btn btn-default btn-lg" data-subset="setupBasic">'+c(i(r(27412)).call(t,"Back",{hash:{},data:a}))+'</button> <button class="next-btn btn btn-primary btn-lg" data-subset="setupComplete">'+c(i(r(27412)).call(t,"Next",{hash:{},data:a}))+"</button> </div> </div> </div> "}))},2568:(e,t,r)=>{var n=r(13624);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="loading loading-inline"></div> <p class="loading-title">'+(0,this.escapeExpression)((a=r(27412),a&&(a.__esModule?a.default:a)).call(t,"Please wait a moment while Plex starts.",{hash:{},data:s}))+"</p> "}))},26548:(e,t,r)=>{var n=r(13624);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",c=this.escapeExpression;return o+'<div class="setup-header row hidden"> <div class="col-sm-6 col-sm-offset-3"> <div class="sign-in-logo text-center"> <i class="plex-image plex-logo"></i> </div> <h2>'+c(i(r(27412)).call(t,"Server Setup",{hash:{},data:a}))+'</h2> <div class="setup-progress"> <div class="basic-segment setup-progress-segment"> <a class="segment-btn btn-gray" data-subset="setupBasic" href="#">'+c(i(r(27412)).call(t,"Name",{hash:{},data:a}))+'</a> </div> <div class="library-segment setup-progress-segment"> <a class="segment-btn btn-gray" data-subset="setupLibrary" href="#">'+c(i(r(27412)).call(t,"Media Library",{hash:{},data:a}))+'</a> </div> <div class="complete-segment setup-progress-segment"> <a class="segment-btn btn-gray" data-subset="setupComplete" href="#">'+c(i(r(27412)).call(t,"Finish",{hash:{},data:a}))+'</a> </div> </div> </div> </div> <div class="setup-container"></div> '}))},52908:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={plexIcon:"PlexIcon-plexIcon-a5zCNX"}},73560:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={form:"AddToCuratedListModal-form-uOEeW4",input:"AddToCuratedListModal-input-jrUgla TextInput-input-vbygwE",button:"AddToCuratedListModal-button-tVTXOm SpinnerButton-button-brFEgo Button-button-Eu0WcX Link-link-vSsQW1",filter:"AddToCuratedListModal-filter-qvnx08 TextInput-input-vbygwE"}},13072:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={header:"Hub-header-e9sVK9 VirtualHubScroller-hubHeader-vSW06t",hub:"Hub-hub-LVoiQu",title:"Hub-title-QASvxx"}},61488:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={menu:"PrePlayActionBar-menu-xDrJti Menu-menu-OCzudL",userRating:"PrePlayActionBar-userRating-Qm5wY7"}},45416:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={page:"Page-page-s23BVW"}},91712:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={description:"AccountPage-description-d_gISn",sectionDetails:"AccountPage-sectionDetails-wyPGTu SettingsFormSectionDetails-sectionDetails-YYUcAA",twoFactorAuthInactiveClosedNode:"AccountPage-twoFactorAuthInactiveClosedNode-zwMxCs"}},41420:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n={innerEmptyPage:"InnerEmptyPage-innerEmptyPage-x_xcpN EmptyPage-emptyPage-WAo6pH",innerEmptyPageContent:"InnerEmptyPage-innerEmptyPageContent-RVL_8g EmptyPage-content-r4ks5a"}},65800:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-add-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m320 320l0 200-80 0 0-200-200 0 0-80 200 0 0-200 80 0 0 200 200 0 0 80-200 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},26084:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 1040 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-dvr-series-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m692.44 113.13c20.864-8.465 43.67-13.13 67.56-13.13 99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-23.887 0-46.693-4.663-67.56-13.13 8.427-8.706 16.197-18.05 23.22-27.921 7.981-11.218 14.995-23.12 20.937-35.54 5.493-11.483 10.07-23.405 13.662-35.616 3.45-11.718 5.996-23.7 7.615-35.808 3.366-25.18 2.733-50.894-1.896-75.872-2.033-10.968-4.835-21.794-8.381-32.37-3.723-11.11-8.266-21.937-13.577-32.378-6.233-12.253-13.523-23.967-21.757-34.975-6.107-8.164-12.733-15.939-19.823-23.264m-412.44-13.13c99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-99.34 0-180-80.65-180-180 0-99.34 80.66-180 180-180m172.44 13.13c20.864-8.465 43.67-13.13 67.56-13.13 99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-23.887 0-46.693-4.663-67.56-13.13 8.26-8.534 15.889-17.677 22.802-27.334 8.154-11.39 15.31-23.492 21.355-36.13 5.494-11.482 10.07-23.403 13.662-35.614 3.45-11.718 5.997-23.701 7.615-35.809 3.366-25.18 2.732-50.893-1.896-75.871-2.033-10.968-4.835-21.793-8.38-32.369-3.724-11.11-8.267-21.937-13.578-32.379-6.233-12.253-13.523-23.967-21.757-34.975-6.107-8.164-12.733-15.939-19.823-23.264"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},46764:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-dvr-single-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 100c99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-99.34 0-180-80.65-180-180 0-99.34 80.66-180 180-180"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},44488:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-watch-together"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{clipRule:"evenodd",d:"M32 21c3.32 0 5.98-2.68 5.98-6S35.32 9 32 9c-3.32 0-6 2.68-6 6s2.68 6 6 6zm-15.999 0c3.32 0 5.979-2.68 5.979-6s-2.659-6-5.979-6c-3.32 0-6 2.68-6 6s2.68 6 6 6zm0 4C11.341 25 2 27.73 2 33.167V39h28v-5.833C30 27.73 20.66 25 16.001 25zM32 25c-.58 0-1.24.047-1.94.117 2.32 1.96 3.94 4.596 3.94 8.05V39h12v-5.833C46 27.73 36.66 25 32 25z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},52612:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-alert-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 0l-280 520 560 0-280-520m0 400c22.077 0 40 17.923 40 40 0 22.077-17.923 40-40 40-22.077 0-40-17.923-40-40 0-22.077 17.923-40 40-40m-30-40l0-220 60 0 0 220-60 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},22944:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-alert-round-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 0c154.536 0 280 125.464 280 280 0 154.536-125.464 280-280 280-154.536 0-280-125.464-280-280 0-154.536 125.464-280 280-280m-40 420c0 22.077 17.923 40 40 40 22.077 0 40-17.923 40-40 0-22.077-17.923-40-40-40-22.077 0-40 17.923-40 40m60-320l-40 0c-11.038 0-20 8.962-20 20l0 200c0 11.038 8.962 20 20 20l40 0c11.038 0 20-8.962 20-20l0-200c0-11.038-8.962-20-20-20"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},89960:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-analyzing-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m336 364l15.027 67.524c.858 3.854 2.685 7.18 5.477 9.972 2.792 2.792 6.118 4.619 9.972 5.477l67.524 15.027-67.524 15.027c-3.854.858-7.18 2.685-9.972 5.477-2.792 2.792-4.619 6.118-5.477 9.972l-15.027 67.524-15.027-67.524c-.858-3.854-2.685-7.18-5.477-9.972-2.792-2.792-6.118-4.619-9.972-5.477l-67.524-15.027 67.524-15.027c3.854-.858 7.18-2.685 9.972-5.477 2.792-2.792 4.619-6.118 5.477-9.972l15.027-67.524m-315 140l343-343 35 35-343 343-35-35m441-266l15.027 67.523c.858 3.855 2.685 7.181 5.477 9.973 2.792 2.792 6.118 4.619 9.972 5.476l67.524 15.028-67.524 15.027c-3.854.858-7.18 2.685-9.972 5.477-2.792 2.792-4.619 6.118-5.477 9.972l-15.027 67.524-15.027-67.524c-.858-3.854-2.685-7.18-5.477-9.972-2.792-2.792-6.118-4.619-9.972-5.477l-67.524-15.027 67.524-15.028c3.854-.857 7.18-2.684 9.972-5.476 2.792-2.792 4.619-6.118 5.477-9.973l15.027-67.523m-322-238l21.468 96.462c1.2 5.396 3.914 10.338 7.823 14.247 3.909 3.909 8.851 6.623 14.247 7.823l96.462 21.468-96.462 21.468c-5.396 1.2-10.338 3.914-14.247 7.823-3.909 3.909-6.623 8.851-7.823 14.247l-21.468 96.462-21.468-96.462c-1.2-5.396-3.914-10.338-7.823-14.247-3.909-3.909-8.851-6.623-14.247-7.823l-96.462-21.468 96.462-21.468c5.396-1.2 10.338-3.914 14.247-7.823 3.909-3.909 6.623-8.851 7.823-14.247l21.468-96.462m252 133l35 35 112-112-35-35-112 112"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},66472:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-edit-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m0 560l40-120 80 80-120 40m480-560l-400 400 80 80 400-400-80-80"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},61554:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-favorite-empty-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M280.409154,516 L40.4101704,278.317013 C-13.4700568,224.772577 -13.4700568,137.681549 40.4101704,84.1371127 C94.2619347,30.6209624 181.927598,30.6209624 235.807825,84.1371127 L280.010674,128.064481 L324.18506,84.1371127 C378.065287,30.6209624 465.73095,30.6209624 519.611177,84.1371127 C573.462941,137.681549 573.462941,224.772577 519.611177,278.317013 L280.409154,516 Z M279.611348,451.652619 L479.792832,260.692492 C518.735723,223.398694 525.522119,157.229004 486.579229,119.960019 C448.828204,83.7828011 390.389111,76.569777 338.530931,131.136016 L280,187.188371 L221.443159,131.136016 C165.95959,82.5852498 112.168614,83.7828011 74.4175887,119.960019 C35.4746985,157.229004 41.2642774,223.398694 80.2071677,260.692492 L279.611348,451.652619 Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},97628:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-favorite-full-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M280.409154,516 L40.4101704,278.317013 C-13.4700568,224.772577 -13.4700568,137.681549 40.4101704,84.1371127 C94.2619347,30.6209624 181.927598,30.6209624 235.807825,84.1371127 L280.010674,128.064481 L324.18506,84.1371127 C378.065287,30.6209624 465.73095,30.6209624 519.611177,84.1371127 C573.462941,137.681549 573.462941,224.772577 519.611177,278.317013 L280.409154,516 Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},54505:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-more-vertical-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M350 280c0 38.634-31.366 70-70 70s-70-31.366-70-70 31.366-70 70-70 70 31.366 70 70m0-210c0 38.634-31.366 70-70 70s-70-31.366-70-70 31.366-70 70-70 70 31.366 70 70m0 420c0 38.634-31.366 70-70 70s-70-31.366-70-70 31.366-70 70-70 70 31.366 70 70"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},44588:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-page-next-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m0 320l0-80 360 0 0-160 200 200-200 200 0-160-360 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},75156:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-page-prev-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m200 80l-200 200 200 200 0-160 360 0 0-80-360 0 0-160"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},13172:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-remove-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m120 70l-50 50 160 160-160 160 50 50 160-160 160 160 50-50-160-160 160-160-50-50-160 160-160-160"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},90424:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-reorder-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m560 380v60h-560v-60h560m-560-130h560v60h-560v-60m0-130h560v60h-560v-60"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},77740:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-search-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M351.883,407.883C315.613,433.168 271.525,448 224,448C100.371,448 0,347.629 0,224C0,100.371 100.371,0 224,0C347.629,0 448,100.371 448,224C448,271.525 433.168,315.613 407.883,351.883L560,504L504,560L351.883,407.883ZM56,224C56,316.722 131.278,392 224,392C316.722,392 392,316.722 392,224C392,131.278 316.722,56 224,56C131.278,56 56,131.278 56,224Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},74672:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-selected-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m78.756 298.564l-40 69.282 242.488 140 240-415.692-69.282-40-200 346.41-173.206-100"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},90936:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-settings-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m200 280c0 44.153 35.847 80 80 80 44.153 0 80-35.847 80-80 0-44.153-35.847-80-80-80-44.153 0-80 35.847-80 80m-115.992-40c5.189-25.52 15.244-49.281 29.153-70.271l-61.151-61.15 56.569-56.569 61.15 61.151c20.99-13.909 44.751-23.964 70.271-29.153l0-84.008 80 0 0 84.008c25.52 5.189 49.281 15.244 70.271 29.153l61.15-61.151 56.569 56.569-61.151 61.15c13.909 20.99 23.964 44.751 29.153 70.271l84.008 0 0 80-84.008 0c-5.189 25.52-15.244 49.282-29.153 70.271l61.151 61.15-56.569 56.569-61.15-61.151c-20.99 13.909-44.751 23.964-70.271 29.153l0 84.008-80 0 0-84.008c-25.52-5.189-49.281-15.244-70.271-29.153l-61.15 61.151-56.569-56.569 61.151-61.15c-13.909-20.989-23.964-44.751-29.153-70.271l-84.008 0 0-80 84.008 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},44916:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(3268),i=r.n(n),s=r(11504),a=r(52908);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-tagging-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.c.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m252 56l308 308-196 196-308-308 0-196 196 0m-21 42l-133 0 0 133 266 266 133-133-266-266m-49 42c23.18 0 42 18.82 42 42 0 23.18-18.82 42-42 42-23.18 0-42-18.82-42-42 0-23.18 18.82-42 42-42"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const c=o},76952:(e,t,r)=>{"use strict";e.exports=r.p+"static/eeeaf2f8d7ce1c646d6d.png"},84512:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg viewBox='0 0 100 100' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' style='stroke-miterlimit:1.41421%3bclip-rule:evenodd%3bfill-rule:evenodd%3bstroke-linejoin:round'%3e %3ccircle id='0' cx='50' cy='50' r='50' style='fill:url(%233)'/%3e %3ccircle id='1' cx='50' cy='50' r='47' style='fill:url(%234)'/%3e %3cpath id='2' d='m32.9 18.8l18.161 0 20.039 31.25-20.039 31.25-18.161 0 20.039-31.25-20.039-31.25' style='fill:url(%235)'/%3e %3cdefs%3e %3clinearGradient id='3' x1='100' x2='0' gradientUnits='userSpaceOnUse'%3e %3cstop offset='0%25' style='stop-color:%23f9be03'/%3e %3cstop offset='100%25' style='stop-color:%23cc7b19'/%3e %3c/linearGradient%3e %3clinearGradient id='4' x1='97' x2='3' gradientUnits='userSpaceOnUse'%3e %3cstop offset='0%25' style='stop-color:%23282828'/%3e %3cstop offset='100%25' style='stop-color:%231f1f1f'/%3e %3c/linearGradient%3e %3cradialGradient id='5' cx='67' cy='49.9' r='57.8123' gradientUnits='userSpaceOnUse' xlink:href='%233'/%3e %3c/defs%3e %3c/svg%3e"}},e=>{e.O(0,[1590],(()=>{[5364,3424,6128,7896,3584,3884,7132,160,8192,7700,7808,3824,824,2496,5800,9544,5944,1912,840,7592,460,7568,5824,7252].map(e.E)}),5);var t=t=>e(e.s=t);e.O(0,[3064],(()=>(t(51341),t(16236)))),e.O()}]);