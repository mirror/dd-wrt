"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[147],{35343:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(22222),a=r(89186);function o(){return(0,n.P1)(((e,{mediaSubscriptionEntityID:t})=>t),a.Z,((e,t)=>t[e]))}},99912:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(45697),a=r.n(n),o=r(67294);class s extends o.Component{constructor(e,t){super(e,t),this.metricsContext=e.metricsContext}getChildContext(){return{metricsContext:this.metricsContext}}render(){return this.props.children?o.Children.only(this.props.children):null}}s.propTypes={children:a().node,metricsContext:a().string},s.childContextTypes={metricsContext:a().string};const i=s},24930:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(22222),a=r(49510);function o(e,t){const{playQueueItems:r,currentIndex:n}=e,a=t[r[n]];return a&&a.metadataItem}function s(){return(0,n.P1)((({ui:e})=>e.audioVideoPlayer&&e.audioVideoPlayer.playQueue),(({ui:e})=>e.photoPlayer&&e.photoPlayer.playQueue),((e,{metadataItemEntityID:t})=>t),a.Z,((e,t,r,n)=>{if(!r)return!1;let a,s;return e&&(a=o(e,n)),t&&(s=o(t,n)),a===r||s===r}))}},63147:(e,t,r)=>{r.r(t),r.d(t,{default:()=>un});var n=r(67294),a=r(99912),o=r(72310),s=r(7659),i=r(79115),l=r(28216),c=r(22222),d=r(13469),u=r.n(d),p=r(20917),m=r(15579),y=r(71681),v=r(62291),b=r(70777),g=r(37258),f=r(32527),P=r(19755),h=r.n(P),S=r(71273),w=r(15451),E=r(2380),Z=r(80011),D=r(84503),C=r(26180),O=r(86832),I=r(12559),x=r(87442),j=r(20683),T=r(73703),N=Object.defineProperty,k=Object.prototype.hasOwnProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&L(e,r,t[r]);if(M)for(var r of M(t))R.call(t,r)&&L(e,r,t[r]);return e};const H="ui/downloadsPage/initDownloadsPage",W="ui/downloadsPage/resetDownloadsPage",U="ui/downloadsPage/fetchProvidersWithStorage",B="ui/downloadsPage/saveDownloadsParams",z=(0,w.Z)(H),$=(0,w.Z)(W),K=(0,w.Z)(U),V=(0,w.Z)(B);(0,E.Z)({[H](e,t){},[W](e,t){},[U](e,t,r){const n=function(e){return e.get("ui").get("downloadsPage")}(e),a=e.get("embeddedServer");(0,x.c9)((()=>{n.set({isProvidersPending:!0,providersError:null})}));const o=a.getXHROptions(j.Z.join("/media/providers",{includeStorage:1}),{headers:{Accept:S.AV.accept}});(0,O.Z)("[Downloads] Updating offline file size"),h().ajax(o).then((e=>{a.get("providers").add(e,{parse:!0,merge:!0}),n.set({isProvidersPending:!1,isProvidersPopulated:!0})}),(e=>{n.set({isProvidersPending:!1,providersError:(0,T.Z)(e)})}))},[B](e,t,r){const n=e.get("user").get("experienceSettings").get("savedPivotParams");r((0,D.LN)({savedPivotParams:A(A({},n),{downloads:t})}))},[Z.Cs](e,t,r){const{activity:n}=t;(function(e,t){const r=e.get("embeddedServer");return!!r&&r.entityID()===t.serverEntityID})(e,t)&&n.type===I.sC&&n.Response.status===C.ly&&r(K())}});var Q=r(89186);function _(){return(0,c.P1)((e=>e.downloads.subscriptions),Q.Z,((e=[],t)=>e.map((e=>t[e]))))}var G=r(73788);const{ASCENDING:q,DESCENDING:X}=p.Z.directions,F="title",Y="createdAt",J="storageTotal";var ee=r(50232),te=r(71470);const re=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",height:a="1em",testID:o},s){const i={width:"auto",height:`max(${"number"==typeof a?`${a}px`:a}, 1rem)`};return n.createElement("svg",{ref:s,"aria-hidden":!t,"aria-label":t,className:(0,te.J)({align:e,color:r}),"data-testid":o,fill:"currentColor",height:48,style:i,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M6.53914 12.333C4.23163 15.7865 3 19.8466 3 24C3.00627 29.5676 5.22078 34.9054 9.15768 38.8423C13.0946 42.7792 18.4324 44.9937 24 45C28.1534 45 32.2135 43.7684 35.667 41.4609C39.1204 39.1534 41.812 35.8736 43.4015 32.0364C44.9909 28.1991 45.4068 23.9767 44.5965 19.9031C43.7862 15.8295 41.7861 12.0877 38.8492 9.15077C35.9123 6.21386 32.1705 4.21381 28.0969 3.40352C24.0233 2.59323 19.8009 3.0091 15.9636 4.59854C12.1264 6.18798 8.84665 8.8796 6.53914 12.333ZM24 36.7071L36.7025 24.0046L33.916 21.1441L26 29.022V11.5L22 11.5V29.0168L14.1404 21.1473L11.2933 24.0004L24 36.7071Z",fill:"currentColor",fillRule:"evenodd"}))}));var ne=r(29012),ae=r(85448),oe=r(25555),se=r(37920),ie=r(79279),le=r(42985),ce=r(97257),de=r(63776),ue=r(58176),pe=r(10067),me=r(27254),ye=r(53635),ve=r(17633),be=r(59258),ge=r(96859),fe=r(24107);const Pe=parseInt(fe.Z.downloadCellHeight,10),he=(0,ge.Z)(Pe,5);var Se=r(45697),we=r.n(Se),Ee=r(17939),Ze=r(97797),De=r(46898),Ce=r(73701),Oe=r(62934),Ie=r(35343),xe=r(26316),je=r(85209),Te=r(17949),Ne=r(57634),ke=r(97593);var Me=r(14069),Re=r(57635),Le=r(30547),Ae=r(35172),He=r(3510),We=r(40645),Ue=r(98116),Be=r(84419),ze=r(84520),$e=r(86979),Ke=r(47435),Ve=r(56887),Qe=r(98463),_e=r(23226),Ge=r(24930),qe=Object.defineProperty,Xe=Object.prototype.hasOwnProperty,Fe=Object.getOwnPropertySymbols,Ye=Object.prototype.propertyIsEnumerable,Je=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const et=(0,l.$j)((function(){return(0,c.P1)(((e,{isDisabled:t})=>t),(0,Ge.Z)(),((e,t)=>({isDisabled:e||t})))}))((e=>{const t=e,{metadataItemEntityID:r,buttonComponent:a,dispatch:o}=t,s=((e,t)=>{var r={};for(var n in e)Xe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Fe)for(var n of Fe(e))t.indexOf(n)<0&&Ye.call(e,n)&&(r[n]=e[n]);return r})(t,["metadataItemEntityID","buttonComponent","dispatch"]);return n.createElement(a,((e,t)=>{for(var r in t||(t={}))Xe.call(t,r)&&Je(e,r,t[r]);if(Fe)for(var r of Fe(t))Ye.call(t,r)&&Je(e,r,t[r]);return e})({},s))}));var tt=r(41229);const rt=function(e){return(0,tt.Z)(e||0,e>=1e9?2:0)};var nt=r(79167),at=r(51017),ot=r(26397),st=r(37059),it=r(37338),lt=r(51861);const ct="DownloadSubscriptionSummaryCell-button-uSdRvn MetadataSummaryCell-button-AqSDnR";var dt=Object.defineProperty,ut=Object.prototype.hasOwnProperty,pt=Object.getOwnPropertySymbols,mt=Object.prototype.propertyIsEnumerable,yt=(e,t,r)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vt=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&yt(e,r,t[r]);if(pt)for(var r of pt(t))mt.call(t,r)&&yt(e,r,t[r]);return e};const bt=(0,c.P1)(ke.Z,(e=>(0,Oe.h)(e))),gt=(0,c.P1)(ke.Z,De.Z,((e,t)=>e&&e.providers.map((e=>t[e])))),ft=new RegExp(Y),Pt=new RegExp(J),ht=(0,l.$j)((function(){return(0,c.P1)(((e,{activeSort:t})=>t),((e,{listContext:t})=>t),bt,(0,Ee.Z)((0,c.P1)((0,Ie.Z)(),gt,((e,t)=>{const{source:r}=e.hint,n=t.find((e=>e.source===r));return(0,Ce.R)(n)})),(e=>e)),(0,Ie.Z)(),(0,c.P1)(Ze.Z,(0,Ie.Z)(),((e,t)=>t.target?e[t.target.metadata]:null)),(e=I.EW,(0,c.P1)((0,Ie.Z)(),(0,Ne.Z)(e),((e,t)=>t.find((({Context:t})=>t.subscriptionID===e.key))))),((e,t,r,n,a,o,s)=>{const{grabOperations:i,hint:l}=a,{subtype:c,type:d}=l,u=function(e,t,r){const{type:n,subtype:a}=e,o=(0,Me.Z)(n,a,t);return(0,Re.Z)(o,null,n,a,r||{},t)}(l,t,o),p=d!==je.TRACK||c===xe.PODCAST,m=o&&p?(0,Le.Z)(r,n,o.key,void 0,o.playlistType):void 0,y=i&&i.find((e=>e.status===C.pn));return{grabError:y&&(y.error||(0,G.Z)("An unexpected error occurred")),isRefreshing:!!s,isDownloadPending:!o&&!!s&&null==s.Context.completed,isDownloading:!!s&&null!=s.Context.total&&null!=s.progress,mediaSubscription:a,imageWidth:u.width,imageHeight:u.height,imageUrl:u.url,metadataItemEntityID:o?o.entityID:null,providerEntityID:n.entityID,route:m,progress:s?s.progress:null,completed:s?s.Context.completed:null,total:s?s.Context.total:null,showEdit:(v=d,v===je.SHOW),showCreatedAt:ft.test(e),showStorageTotal:!!o&&Pt.test(e)};var v}));var e}),(function(e,t){const{mediaSubscriptionEntityID:r,metricsPage:n,metricsProperties:a}=t,o={mediaSubscriptionEntityID:r,metricsPage:n,metricsProperties:a};return{onEditItem(){e((0,Te.nY)(o))},onDeleteItem(){e((0,f.L7)(o))},onRetryItem(){e((0,f.OS)(o))}}}))((function(e){const{cellIndex:t,grabError:r,imageHeight:a,imageUrl:o,imageWidth:s,mediaSubscription:i,metadataItemEntityID:l,providerEntityID:c,route:d,progress:u,completed:p,total:m,showStorageTotal:y,showCreatedAt:b,showEdit:g,serverEntityID:f,isDownloadPending:P,isDownloading:h,isRefreshing:S,onEditItem:w,onRetryItem:E,onDeleteItem:Z}=e,D=(0,Ke.Z)(e),[C,O]=(0,n.useState)(!1),I=(0,n.useCallback)((()=>{O(!0)}),[]),x=(0,n.useCallback)((()=>{O(!1),Z()}),[Z]),j=(0,n.useCallback)((()=>{O(!1)}),[]),{hint:T,target:N}=i,{title:k,type:M,subtype:R}=T;let L,A;P?L=(0,G.Z)("Waiting to download"):h&&(L=m>1?(0,G.Z)("Downloading {completed} of {total}",{completed:p+1,total:m}):(0,G.Z)("Downloading")),y?A=rt(i.storageTotal):b&&(A=(0,Ae.Z)(i.createdAt)),A=A?` ${Be.U} ${A}`:A;const H=!1,W=!S&&r,U=function(e){const{parentTitle:t,grandparentTitle:r,type:n,subtype:a,index:o}=e,s=n===je.TRACK;let i;return n===je.SEASON?i=(0,We.Z)({seasonIndex:o,noLeadingZero:!0,useLongName:!0}):n===je.EPISODE||s&&a===xe.PODCAST?i=r:s&&r&&t?i=`${r} ${Be.U} ${t}`:s&&r&&(i=r),i}(T);return n.createElement("div",{className:t%2?"DownloadSubscriptionSummaryCell-alternateItem-yWeXKH MetadataSummaryCell-alternateItem-qJRho9 MetadataSummaryCell-item-zizwY0":"DownloadSubscriptionSummaryCell-item-PN24EO MetadataSummaryCell-item-zizwY0",style:D.style},d?n.createElement(ae.Z,{"aria-label":k,className:"DownloadSubscriptionSummaryCell-underlay-AQEjGK MetadataSummaryCell-underlay-lVQ3U2",tabIndex:"0",to:d}):null,n.createElement("div",{className:"DownloadSubscriptionSummaryCell-overlay-dgruv9 MetadataSummaryCell-overlay-pNGHay"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-posterContainer-kdVgru MetadataSummaryCell-posterContainer-agLI_B"},D.isPlaceholder?n.createElement(_e.Z,{imageHeight:a,imageWidth:s}):n.createElement(Qe.Z,{imageHeight:a,imageUrl:o,imageWidth:s,isOffscreen:!1,metadataItemEntityID:l,metadataKey:i.hint.source,providerEntityID:c,route:d,serverEntityID:f,showEdit:H,showLink:H,showMore:H,showOverlay:!!N,showSelect:H,subtype:R,title:k,type:M})),n.createElement("div",{className:"DownloadSubscriptionSummaryCell-summaryContainer-BIjOtH MetadataSummaryCell-summaryContainer-vKIYSr"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-titleContainer-dDHjDA MetadataSummaryCell-titleContainer-iJUBIV"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-title-n1itJC MetadataSummaryCell-title-oz7jL8"},function(e){const{title:t,parentTitle:r,grandparentTitle:n,type:a,index:o,parentIndex:s,originallyAvailableAt:i}=e;let l=n||r||t;return a===je.EPISODE?l=`${(0,He.Z)({episodeIndex:o,seasonIndex:s,date:i,noLeadingZero:!0,separator:" Â· "})} ${Be.U} ${t}`:a===je.TRACK&&(l=t),l}(T))),n.createElement("div",{className:"DownloadSubscriptionSummaryCell-summary-HplPrA MetadataSummaryCell-summary-tXxX2g"},U?n.createElement("div",null,U):null,W?n.createElement("div",null,n.createElement(ot.Z,{className:"DownloadSubscriptionSummaryCell-errorIcon-3Uc3DO"}),r):n.createElement("div",null,function(e){const{guid:t,subtype:r,type:n}=e,{MOVIE:a,SHOW:o,SEASON:s,EPISODE:i,TRACK:l}=je,{PODCAST:c,WEBSHOW:d}=xe;return n===o&&r===c?(0,G.Z)("Podcast"):n===l&&r===c?(0,G.Z)("Podcast Episode"):n===o&&r===d?(0,G.Z)("Web Show"):n===i&&r===d?(0,G.Z)("Web Show Episode"):n===a&&t.includes(nt.Hn)?(0,G.Z)("Video"):n===s?(0,G.Z)("TV Show Season"):n===i?(0,G.Z)("TV Show Episode"):je.getMetadataType(n).title}(T),A))),P||h?n.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusContainer-kZsCwk"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusText-Uhpnlt"},L),n.createElement(Ue.Z,{lineWidth:2,progress:u,showIndeterminate:P,showProgressText:!1,size:20,strokeColor:at.Z.selectedColor,trackColor:at.Z.defaultLinkDisabledLinkColor})):null,n.createElement("div",{className:"DownloadSubscriptionSummaryCell-actions-niNn1E MetadataSummaryCell-actions-HnEQtT"},W?n.createElement($e.Z,{ariaLabel:(0,G.Z)("Retry {title}",{title:k}),className:ct,component:ze.Z,iconComponent:it.Z,tooltip:(0,G.Z)("Retry"),onPress:E}):null,g?n.createElement($e.Z,{ariaLabel:(0,G.Z)("Edit download details for {title}",{title:k}),className:ct,component:ze.Z,iconComponent:st.Z,tooltip:(0,G.Z)("Edit"),onPress:w}):null,n.createElement(et,{ariaLabel:(0,G.Z)("Delete {title}",{title:k}),buttonComponent:$e.Z,className:ct,component:ze.Z,"data-testid":"downloadSubscriptionRemoveButton",iconComponent:lt.Z,kind:oe.T,metadataItemEntityID:l,tooltip:(0,G.Z)("Delete"),onPress:I}),n.createElement(Ve.Z,{isOpen:C,message:(0,G.Z)("Are you sure you want to delete this download?"),metricsPage:v.Ke,title:(0,G.Z)("Delete Download"),onCancel:j,onConfirm:x}))))}));ht.propTypes=vt(vt({},ht.propTypes),{mediaSubscriptionEntityID:we().string.isRequired,metricsPage:we().string.isRequired,metricsProperties:we().object.isRequired});const St=ht;var wt=Object.defineProperty,Et=Object.prototype.hasOwnProperty,Zt=Object.getOwnPropertySymbols,Dt=Object.prototype.propertyIsEnumerable,Ct=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ot=(e,t)=>{for(var r in t||(t={}))Et.call(t,r)&&Ct(e,r,t[r]);if(Zt)for(var r of Zt(t))Dt.call(t,r)&&Ct(e,r,t[r]);return e};const It=function(e){const t=e,{activeSort:r,metricsPage:a,metricsProperties:o,serverEntityID:s}=t,i=((e,t)=>{var r={};for(var n in e)Et.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Zt)for(var n of Zt(e))t.indexOf(n)<0&&Dt.call(e,n)&&(r[n]=e[n]);return r})(t,["activeSort","metricsPage","metricsProperties","serverEntityID"]),l=(0,n.useMemo)((()=>e=>n.createElement(St,Ot(Ot({},e),{activeSort:r,listContext:ve.jF,listType:be.t1,metricsPage:a,metricsProperties:o,serverEntityID:s}))),[r,a,o,s]);return n.createElement(ye.Z,Ot(Ot({},i),{cellRenderer:l,className:"DownloadSubscriptionSummaryList-content-XZHPvL",keyPropName:"mediaSubscriptionEntityID",layout:he,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",scrollerClassName:"DownloadSubscriptionSummaryList-scroller-Aq9cpn VirtualListScroller-scroller-eDZkq_"}))};var xt=r(86418),jt=Object.defineProperty,Tt=Object.prototype.hasOwnProperty,Nt=Object.getOwnPropertySymbols,kt=Object.prototype.propertyIsEnumerable,Mt=(e,t,r)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rt=(e,t)=>{for(var r in t||(t={}))Tt.call(t,r)&&Mt(e,r,t[r]);if(Nt)for(var r of Nt(t))kt.call(t,r)&&Mt(e,r,t[r]);return e};let Lt,At;function Ht(e,t=window.location.hash){const r=function(e){if(Lt===e)return At;const t=e.split("?"),r=t.length>1?t[1]:void 0,n=r?j.Z.parseParams(r):{};return Lt=e,At={url:t[0],params:n},At}(t);return j.Z.join(r.url,Rt(Rt({},r.params),{type:e.type,subtype:e.subtype,sort:e.sort,save:1}))}function Wt(e,t,r){return t?function(e,t){switch(e){case xe.PODCAST:return t?(0,G.Z)("Podcasts"):(0,G.Z)("Podcast");case xe.WEBSHOW:return t?(0,G.Z)("Web Shows"):(0,G.Z)("Web Show")}}(t,r):e?function(e,t){const r=je.getMetadataType(e);return t?r.plural:r.title}(e,r):(0,G.Z)("All")}function Ut({type:e,subtype:t,sort:r}){const n={save:1};return e&&(n.type=e),t&&(n.subtype=t),r&&(n.sort=r),{type:e,subtype:t,title:Wt(e,t,!0),route:Ht(n)}}var Bt=r(42313),zt=r(17282),$t=r(54768),Kt=r(83782),Vt=r(1522),Qt=r(35567),_t=r(54098),Gt=r(84332),qt=r(89377),Xt=r(89146),Ft=Object.defineProperty,Yt=Object.prototype.hasOwnProperty,Jt=Object.getOwnPropertySymbols,er=Object.prototype.propertyIsEnumerable,tr=(e,t,r)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rr=(e,t)=>{for(var r in t||(t={}))Yt.call(t,r)&&tr(e,r,t[r]);if(Jt)for(var r of Jt(t))er.call(t,r)&&tr(e,r,t[r]);return e};const{ASCENDING:nr,DESCENDING:ar}=p.Z.directions,or=function(e){const t=e,{activeType:r,activeSubtype:a,activeSort:o,sorts:s,selectedSort:i,onMenuClose:l}=t,c=((e,t)=>{var r={};for(var n in e)Yt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Jt)for(var n of Jt(e))t.indexOf(n)<0&&er.call(e,n)&&(r[n]=e[n]);return r})(t,["activeType","activeSubtype","activeSort","sorts","selectedSort","onMenuClose"]);return n.createElement(_t.Z,rr(rr({},c),{onMenuClose:l}),s.map((({key:e,descKey:t,defaultDirection:s,title:c})=>{const d=i.key===e;let u=s;d&&(u=o?o===t?nr:ar:s===nr?ar:nr);const p=u===ar;return n.createElement(Gt.Z,{key:e,iconComponent:p?qt.Z:Xt.Z,isSelected:d,selectedIconAriaLabel:p?(0,G.Z)("Ascending"):(0,G.Z)("Descending"),to:Ht({type:r,subtype:a,sort:p?t:e}),onPress:l},c)})))};var sr=Object.defineProperty,ir=Object.prototype.hasOwnProperty,lr=Object.getOwnPropertySymbols,cr=Object.prototype.propertyIsEnumerable,dr=(e,t,r)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ur=(e,t)=>{for(var r in t||(t={}))ir.call(t,r)&&dr(e,r,t[r]);if(lr)for(var r of lr(t))cr.call(t,r)&&dr(e,r,t[r]);return e};const pr=function(e){const t=e,{activeType:r,activeSubtype:a,types:o,onMenuClose:s}=t,i=((e,t)=>{var r={};for(var n in e)ir.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&lr)for(var n of lr(e))t.indexOf(n)<0&&cr.call(e,n)&&(r[n]=e[n]);return r})(t,["activeType","activeSubtype","types","onMenuClose"]);return n.createElement(_t.Z,ur(ur({},i),{onMenuClose:s}),o.map((({type:e,subtype:t,title:o,route:i})=>{let l;return l=t?t===a:e?e===r&&!a:!r&&!a,n.createElement(Gt.Z,{key:t||e||"all",isSelected:l,to:i,onMenuClose:s},o)})))};var mr=r(22688),yr=r(86192),vr=r(5103),br=r(62208),gr=r(31722),fr=r(17408),Pr=r(54647),hr=r(90558);function Sr(e){const t=e["aria-label"],r=e.className,a=e.style,o={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};o["aria-hidden"]=!t,o.style=a,o.className=hr.Z.plexIcon+(r?" "+r:"");const s=[n.createElement.apply(n,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&s.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",o].concat(s))}Sr.propTypes={"aria-label":we().string,className:we().string,style:we().object};const wr=Sr;var Er=Object.defineProperty,Zr=Object.prototype.hasOwnProperty,Dr=Object.getOwnPropertySymbols,Cr=Object.prototype.propertyIsEnumerable,Or=(e,t,r)=>t in e?Er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ir=(e,t)=>{for(var r in t||(t={}))Zr.call(t,r)&&Or(e,r,t[r]);if(Dr)for(var r of Dr(t))Cr.call(t,r)&&Or(e,r,t[r]);return e};const xr=2*(0,br.Z)(Pr.Z.slowSpeed),jr=function(e){const t=e,{isProcessingSubscriptions:r,onPress:a}=t,o=((e,t)=>{var r={};for(var n in e)Zr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Dr)for(var n of Dr(e))t.indexOf(n)<0&&Cr.call(e,n)&&(r[n]=e[n]);return r})(t,["isProcessingSubscriptions","onPress"]),s=(0,fr.Z)(r,!0,xr)||r;return n.createElement(vr.Z,Ir(Ir({},o),{"data-testid":"toolbarProcessSubscriptions",isDisabled:r,tooltip:(0,G.Z)("Check for new downloads"),tooltipAttachment:gr.OI,onPress:s?null:a}),s?n.createElement(yr.Z,{className:"ToolbarProcessSubscriptionsButton-spinner-ymigGA Spinner-spinner-XTaskc spin-spin-H8VRGl"}):n.createElement(wr,{className:"ToolbarProcessSubscriptionsButton-icon-PTiM3B PlexIcon-plexIcon-a5zCNX"}))},Tr={onRefreshDownloads:f.GX},Nr=(0,l.$j)((function(){return(0,c.P1)(_(),(0,mr.ZP)(I.l1),((e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t})))}),Tr)((function(e){const{className:t,canShowProcessSubscriptions:r,isProcessingSubscriptions:a,onRefreshDownloads:o}=e;return n.createElement("div",{className:t},r?n.createElement(jr,{isProcessingSubscriptions:a,onPress:o}):null)})),kr=(0,c.P1)(ke.Z,De.Z,((e,t)=>{const{providers:r}=e;return r.reduce(((e,r)=>{const n=t[r].features.find((e=>e.type===xt.Z.CONTENT));return n&&null!=n.storageTotal&&(e+=n.storageTotal),e}),0)})),Mr=(0,l.$j)((function(){return(0,c.P1)(((e,{activeSort:t})=>t),kr,_(),(0,c.P1)((0,Ne.Z)(I.sC),(e=>e.reduce(((e,t)=>e+t.Context.currentSize||0),0))),((e,t,r,n)=>{const a=Ut({sort:e});return{downloadTypes:r.reduce(((t,r)=>{const{type:n,subtype:a}=r.hint;if(!(a?t.find((e=>e.subtype===a)):t.find((e=>e.type===n)))){const r=Ut({type:n,subtype:a,sort:e});t.push(r)}return t}),[a]),storageTotal:t+n}}))}))((function(e){const{serverEntityID:t,activeType:r,activeSubtype:a,activeSort:o,selectedSort:s,downloadTypes:i,storageTotal:l,sorts:c,size:d}=e,u=(0,Kt.Z)(),p=(0,Kt.Z)(),[m,y]=(0,n.useState)(l),[v,b]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),P=(0,n.useCallback)((()=>{b(!v)}),[v]),h=(0,n.useCallback)((()=>{b(!1)}),[]),S=(0,n.useCallback)((()=>{f(!g)}),[g]),w=(0,n.useCallback)((()=>{f(!1)}),[]);(0,n.useEffect)((()=>{let e=window.setTimeout((()=>{y(l)}),100);return()=>{e=window.clearTimeout(e)}}),[l]);const E=r||a?(0,G.Z)("All {typeTitle} Downloads",{typeTitle:Wt(r,a,!1)}):(0,G.Z)("All Downloads");return n.createElement(Vt.Z,{className:"DownloadsPageHeader-pageHeader-ZXDUnB PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},n.createElement($t.Z,null,n.createElement(zt.Z,{"data-testid":"downloadsTypesMenuButton",hasMenu:i.length>2,id:u,isMenuOpen:v,onPress:P},E),n.createElement(pr,{activeSubtype:a,activeType:r,isOpen:v,target:u,types:i,onMenuClose:h}),d>1?n.createElement(zt.Z,{"data-testid":"downloadsSortsMenuButton",hasMenu:!0,id:p,isMenuOpen:g,onPress:S},(0,G.Z)("By {sortTitle}",{sortTitle:s.title})):null,d>1?n.createElement(or,{activeSort:o,activeSubtype:a,activeType:r,isOpen:g,selectedSort:s,sorts:c,target:p,onMenuClose:w}):null,n.createElement(Bt.Z,null,d)),n.createElement(Qt.Z,null,n.createElement("div",{className:"DownloadsPageHeader-storageTotal-zA1dwc"},(0,G.Z)("{storageTotal} Downloaded",{storageTotal:rt(m)})),n.createElement(Nr,{serverEntityID:t})))})),Rr="DownloadsPage-upsell-joAmi8",Lr=function(e){const{serverEntityID:t,activeType:r,activeSubtype:a,activeSort:o,selectedSort:s,sorts:i,mediaSubscriptions:l,metricsPage:c,metricsProperties:d,isProvidersPending:u,isProvidersPopulated:p,isMediaSubscriptionsPending:m,canShowUpsell:y,providersError:v,mediaSubscriptionsError:b}=e,[g,f]=(0,n.useState)(!1),P=(0,n.useCallback)((()=>{f(!0)}),[]),h=(0,n.useCallback)((()=>{f(!1)}),[]);if(u&&!p||m&&!l.length)return n.createElement(de.Z,null,n.createElement(le.Z,null));const S=v||b,w=l.length>0;return n.createElement(ce.Z,{metricsPage:c,metricsProperties:d,scrollDirection:se.Hn},w?n.createElement(Mr,{activeSort:o,activeSubtype:a,activeType:r,selectedSort:s,serverEntityID:t,size:l.length,sorts:i}):null,n.createElement("div",{className:"DownloadsPage-downloadsPageContent-kcFCsY PageContent-pageContent-rk0p0C"},S?n.createElement(pe.Z,null):null,S||w?null:n.createElement(ue.Z,{description:n.createElement(ne.Z,{className:Rr,message:(0,G.Z)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:n.createElement(ee.D,{key:"downloadIcon",align:"baseline"})}]}),iconClassName:"DownloadsPage-iconDownloadUpsell-OCqLgi",iconComponent:re,kind:oe._8,title:(0,G.Z)("You have no items downloaded")},y?n.createElement(ne.Z,{className:Rr,message:(0,G.Z)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:ae.Z,kind:oe._8,onPress:P}]}):null),!S&&w?n.createElement(It,{activeSort:o,items:l,metricsPage:c,metricsProperties:d,serverEntityID:t,size:l.length}):null,y?n.createElement(me.Z,{isOpen:g,origin:ie.Yz,onModalClose:h}):null))};var Ar=Object.defineProperty,Hr=Object.prototype.hasOwnProperty,Wr=Object.getOwnPropertySymbols,Ur=Object.prototype.propertyIsEnumerable,Br=(e,t,r)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zr=(e,t)=>{for(var r in t||(t={}))Hr.call(t,r)&&Br(e,r,t[r]);if(Wr)for(var r of Wr(t))Ur.call(t,r)&&Br(e,r,t[r]);return e},$r=(e,t)=>{var r={};for(var n in e)Hr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Wr)for(var n of Wr(e))t.indexOf(n)<0&&Ur.call(e,n)&&(r[n]=e[n]);return r};const Kr={pane:"sync"};function Vr(e,t){return!e&&!t||u().isEqual(e,t)}const Qr=(0,g.Z)((e=>{const{key:t,direction:r}=e,{DESCENDING:n}=p.Z.directions;return(e,a)=>{let o,s;return t===F?(o=e.hint[t].toUpperCase(),s=a.hint[t].toUpperCase()):(o=e[t],s=a[t]),o>s?r===n?-1:1:o<s?r===n?1:-1:0}})),_r={dispatchFetchProvidersWithStorage:K,dispatchInitDownloadsPage:z,dispatchRefreshDownloads:f.GX,dispatchResetDownloadsPage:$,dispatchSaveDownloadsParams:V};class Gr extends n.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!Vr(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){Vr(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const e=this.props,{params:t,savedDownloadsParams:r,dispatchFetchProvidersWithStorage:a,dispatchRefreshDownloads:o,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:i,dispatchSaveDownloadsParams:l}=e,c=$r(e,["params","savedDownloadsParams","dispatchFetchProvidersWithStorage","dispatchRefreshDownloads","dispatchInitDownloadsPage","dispatchResetDownloadsPage","dispatchSaveDownloadsParams"]);return n.createElement(Lr,zr(zr({},c),{metricsPage:v.Q_,metricsProperties:Kr}))}}const qr=(0,l.$j)((function(){return(0,c.P1)(((e,{params:t})=>t),(e=>e.ui.downloadsPage),(e=>e.downloads),y.Z,_(),(0,m.Z)(b.iU),(0,m.Z)(b.Ed),((e,t,r,n,a,o,s)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:d,isProvidersPopulated:u,providersError:p}=t,{isSubscriptionsPending:m,subscriptionsError:y}=r,v=[{key:F,descKey:"title:desc",defaultDirection:q,title:(0,G.Z)("Title")},{key:Y,descKey:"createdAt:desc",defaultDirection:X,title:(0,G.Z)("Date Downloaded"),isDefault:!0},{key:J,descKey:"storageTotal:desc",defaultDirection:X,title:(0,G.Z)("Size on Disk")}],b=i.split(":");let g=b[0];const f=b[1];let P=v.find((e=>e.key===g));P||(P=v.find((e=>e.isDefault))),g||(g=P.key),f&&(P.direction=f);let h=[...a];if((l||c)&&(h=a.reduce(((e,t)=>{const r=t.hint.subtype===c,n=t.hint.type===l;let a=!1;return c?r&&(a=!0):n&&!t.hint.subtype&&(a=!0),a&&e.push(t),e}),[]),a.length&&!h.length)){const t=e,{type:r,subtype:n}=t;h=a,e=$r(t,["type","subtype"]),l=null,c=null}const S=Qr(P);return h.sort(S),{selectedSort:P,sorts:v,mediaSubscriptions:h.map((e=>e.entityID)),isProvidersPending:d,isProvidersPopulated:u,isMediaSubscriptionsPending:m,canShowUpsell:!o&&!s,providersError:p,mediaSubscriptionsError:y,savedDownloadsParams:n.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}}))}),_r)(Gr);var Xr=r(93090),Fr=r(42674),Yr=r(56791);const Jr=function(e){const{children:t,isWaitingForEmbeddedServer:r,embeddedServerEntityID:a}=e;return r?n.createElement(de.Z,null,n.createElement(le.Z,null)):a?n.createElement(Fr.Z,{serverEntityID:a},t(a)):n.createElement(Yr.Z,null)};var en=Object.defineProperty,tn=Object.prototype.hasOwnProperty,rn=Object.getOwnPropertySymbols,nn=Object.prototype.propertyIsEnumerable,an=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,on=(e,t)=>{for(var r in t||(t={}))tn.call(t,r)&&an(e,r,t[r]);if(rn)for(var r of rn(t))nn.call(t,r)&&an(e,r,t[r]);return e};const sn=(0,c.P1)(ke.Z,((e={})=>{const{entityID:t,isProvidersPopulated:r=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:r}})),ln={dispatchChangeQuickSearchSettings:Xr.changeQuickSearchSettings};class cn extends n.Component{componentDidMount(){this.props.dispatchChangeQuickSearchSettings({providerEntityID:null,providerIdentifier:null,serverEntityID:null,directoryID:null})}render(){const e=this.props,{isProvidersPopulated:t,dispatchChangeQuickSearchSettings:r}=e,a=((e,t)=>{var r={};for(var n in e)tn.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&rn)for(var n of rn(e))t.indexOf(n)<0&&nn.call(e,n)&&(r[n]=e[n]);return r})(e,["isProvidersPopulated","dispatchChangeQuickSearchSettings"]);return n.createElement(Jr,on(on({},a),{isWaitingForEmbeddedServer:!t}))}}const dn=(0,l.$j)(sn,ln)(cn);function un(){const e=(0,o.Z)(),t=(0,n.useMemo)((()=>({context:(0,i.Z)(e.context),type:(0,i.Z)(e.type),subtype:(0,i.Z)(e.subtype),sort:(0,i.Z)(e.sort),save:(0,s.Z)(e.save)})),[e]);return n.createElement(a.Z,{metricsContext:t.context},n.createElement(dn,null,(e=>n.createElement(qr,{params:t,serverEntityID:e,shouldSaveParams:t.save}))))}},7659:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(e){return 1===Number(e)||"true"===e}},1522:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(67294),a=Object.defineProperty,o=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{children:r}=t,a=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&i.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))i.call(t,r)&&l(e,r,t[r]);return e})({},a),r)}c.defaultProps={className:"PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"};const d=c},35567:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(67294),a=r(70513);const o=function({children:e}){return n.createElement(a.Z,{className:"PrimaryPageHeaderRight-pageHeaderRight-PLi1N6 PageHeaderRight-pageHeaderRight-hBWIio"},e)}},10067:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(67294),a=r(37920),o=r(56791),s=r(24141),i=Object.defineProperty,l=Object.prototype.hasOwnProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({className:s.Z.innerEmptyPage,contentClassName:s.Z.innerEmptyPageContent,scrollDirection:a.Hn},i),r)}},14069:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(99027);function a(e,t,r){switch((0,n.n3)(e,t,r)){case n.oz:return 114;case n.s4:return 64;case n.Zp:return 74}}},37338:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(45697),a=r.n(n),o=r(67294),s=r(90558);function i(e){const t=e["aria-label"],r=e.className,n=e.style,a={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-reload-560"};a["aria-hidden"]=!t,a.style=n,a.className=s.Z.plexIcon+(r?" "+r:"");const i=[o.createElement.apply(o,["path",{d:"m280 560c-1.807-.003-3.614-.017-5.421-.052-3.292-.062-6.584-.182-9.873-.359-9.731-.525-19.435-1.554-29.059-3.089-11.735-1.871-23.35-4.493-34.75-7.849-11.774-3.466-23.317-7.714-34.53-12.705-13.924-6.197-27.338-13.54-40.067-21.922-13.116-8.636-25.504-18.374-36.998-29.074-11.686-10.88-22.446-22.753-32.124-35.451-9.55-12.53-18.044-25.862-25.357-39.816-6.195-11.822-11.541-24.088-15.978-36.676-4.407-12.5-7.916-25.316-10.495-38.317-3.569-17.998-5.348-36.343-5.348-54.69 0-12.5.823-25 2.48-37.39 1.885-14.104 4.851-28.063 8.869-41.713 4.106-13.949 9.311-27.574 15.547-40.711 7.129-15.019 15.603-29.397 25.281-42.915 9.786-13.67 20.8-26.46 32.864-38.17 12.674-12.302 26.506-23.411 41.259-33.125 14.39-9.476 29.653-17.622 45.541-24.289 17.483-7.337 35.716-12.877 54.325-16.507 17.427-3.4 35.175-5.122 52.929-5.179 17.775-.056 35.554 1.556 53.023 4.85 18.646 3.516 36.926 8.946 54.466 16.181 15.934 6.572 31.253 14.628 45.705 24.02 14.578 9.474 28.271 20.305 40.854 32.302 1.622 1.546 3.224 3.111 4.808 4.695l82.049-82.049 0 220-220 0 81.382-81.382c-.709-.71-1.423-1.413-2.142-2.112-9.074-8.807-18.975-16.76-29.536-23.715-10.101-6.651-20.804-12.386-31.942-17.1-12.43-5.261-25.396-9.245-38.635-11.871-12.45-2.469-25.133-3.735-37.825-3.816-12.729-.08-25.466 1.027-37.984 3.347-13.29 2.463-26.324 6.29-38.836 11.406-11.386 4.656-22.336 10.374-32.671 17.047-10.456 6.75-20.28 14.475-29.313 23.036-8.883 8.419-17 17.646-24.213 27.534-6.997 9.59-13.143 19.801-18.331 30.479-4.523 9.309-8.318 18.972-11.333 28.873-2.889 9.484-5.061 19.185-6.498 28.995-1.42 9.691-2.123 19.485-2.123 29.279 0 13.333 1.307 26.665 3.942 39.736 1.824 9.049 4.281 17.969 7.35 26.674 3.163 8.971 6.973 17.713 11.389 26.139 5.226 9.973 11.299 19.501 18.124 28.456 6.932 9.096 14.639 17.599 23.009 25.392 7.933 7.385 16.461 14.131 25.477 20.146 8.881 5.924 18.236 11.138 27.949 15.569 7.946 3.624 16.131 6.723 24.485 9.267 8.087 2.463 16.331 4.405 24.666 5.815 6.853 1.159 13.767 1.958 20.704 2.398 2.353.149 4.708.257 7.065.325 1.296.037 2.592.059 3.889.074.65.005 1.301.008 1.951.009l.259 79.999-.259.001"}].concat([]))];return t&&i.unshift(o.createElement("title",null,t)),o.createElement.apply(o,["svg",a].concat(i))}i.propTypes={"aria-label":a().string,className:a().string,style:a().object};const l=i}}]);