"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[146],{6577:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(94184),o=r.n(n),a=r(67294),i=r(28216),s=r(64495),d=r(96840),g=r(16143),l=r(93554),u=r(22222),A=r(73762);const c=(0,u.P1)(A.Z,(e=>e.remotePlayer),((e,t)=>t?t.volume:e.volume));var E=r(26021),f=r(24974),m=r(84571);const p=["af","am","ar","ar_eg","ar_sa","eu","be","bn","bg","ca","zh","zh_cn","zh_hk","zh_tw","hr","cs","da","nl","en","en_au","en_ca","en_gb","en_ie","en_in","en_sg","en_za","et","fa","fil","fi","fr","fr_ca","fr_ch","gl","de","de_at","el","gu","he","hi","hu","is","id","it","ja","kn","ko","lo","lv","ln","lt","ms","ml","mr","no","pl","pt","pt_br","pt_pt","ro","ru","sr","sk","sl","es","es_419","es_ar","es_cl","es_co","es_cr","es_do","es_ec","es_sv","es_gt","es_hn","es_mx","es_ni","es_pa","es_pe","es_pr","es_py","es_us","es_uy","es_ve","sw","sv","gsw","tl","ta","te","th","tr","uk","ur","vi","zu"],v=(0,u.P1)(m.Z,(e=>function(e){const t=e.toLowerCase().replace(/-/g,"_");return p.includes(t)?t:"en"}(e)));var w=r(31298),y=r(14540),T=r(84936);function M(e){const t=Math.round(e%3600),r=Math.floor(e/3600),n=Math.floor(t/60),o=t%60;return`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")} (${e}s)`}function S(e){return t=>{var r,n;const o=t,a=t;try{const e=null==(r=o.getAdData)?void 0:r.call(o),t=(null==e?void 0:e.adError)||(null==(n=a.getError)?void 0:n.call(a));if(t){const e={message:t.getMessage(),errorCode:t.getErrorCode(),vastErrorCode:t.getVastErrorCode()};d.Z.error("[IMA SDK] Error: %s from event %s: %o",t.getType(),o.type,e)}else(0,y.Z)()&&function(e){var t,r;const n=null==(t=e.getAd)?void 0:t.call(e),o=null==(r=e.getAdData)?void 0:r.call(e),a=null==n?void 0:n.getAdPodInfo();if(a)try{const t={adPosition:a.getAdPosition(),isBumper:a.getIsBumper(),maxDuration:a.getMaxDuration(),podIndex:a.getPodIndex(),timeOffset:a.getTimeOffset(),totalAds:a.getTotalAds()};(0,d.Z)("[IMA SDK] Event %s (adPodInfo): %o",e.type,t)}catch(e){d.Z.warn("[IMA SDK] Cannot log adPodInfo",null==e?void 0:e.message)}if(o&&(0,d.Z)("[IMA SDK] Event %s (adData): %o",e.type,o),n)try{const t={adSystem:n.getAdSystem(),advertiserName:n.getAdvertiserName(),apiFramework:n.getApiFramework(),contentType:n.getContentType(),creativeAdId:n.getCreativeAdId(),creativeId:n.getCreativeId(),dealId:n.getDealId(),description:n.getDescription(),duration:n.getDuration(),height:n.getHeight(),mediaUrl:n.getMediaUrl(),minSuggestedDuration:n.getMinSuggestedDuration(),skipTimeOffset:n.getSkipTimeOffset(),surveyUrl:n.getSurveyUrl(),title:n.getTitle(),traffickingParameters:n.getTraffickingParameters(),traffickingParametersString:n.getTraffickingParametersString(),uiElements:n.getUiElements(),universalAdIdRegistry:n.getUniversalAdIdRegistry(),universalAdIdValue:n.getUniversalAdIdValue(),vastMediaHeight:n.getVastMediaHeight(),vastMediaWidth:n.getVastMediaWidth(),width:n.getWidth(),wrapperAdIds:n.getWrapperAdIds(),wrapperAdSystems:n.getWrapperAdSystems(),wrapperCreativeIds:n.getWrapperCreativeIds(),isLinear:n.isLinear()};(0,d.Z)("[IMA SDK] Event %s (ad):",e.type,t)}catch(e){d.Z.warn("[IMA SDK] Cannot log ad info",null==e?void 0:e.message)}}(o)}catch(e){d.Z.warn("[IMA SDK] Event:",null==o?void 0:o.type,null==e?void 0:e.message)}e(t)}}const I=void 0,_=null;function D({edgeGutterX:e,edgeGutterY:t,height:r,isFullscreen:n,isIdle:u,isMiniPlayer:A,isStackedAbove:m,placement:p,playerType:D,statusOverlayClassName:h,url:Z,width:C,onAdChange:L,onPositionMillisecondsChange:P}){const R=(0,i.I0)(),[O,k]=(0,a.useState)(I),[N,b]=(0,a.useState)(),[U,V]=(0,a.useState)(null),[x,F]=(0,E.Z)(),[G,W]=(0,a.useState)(g.Ho),[z,H]=(0,a.useState)(g.Mf),[K,B]=(0,a.useState)(g.pN),$=(0,i.v9)((0,f.Z)(D,"durationSeconds")),j=(0,i.v9)((0,f.Z)(D,"isPaused")),Q=(0,i.v9)(v),q=(0,i.v9)((0,f.Z)(D,"positionSeconds")),Y=(0,i.v9)(c),X=function(e,t,r=!0){const n=(0,a.useRef)({currentTime:e,duration:t});return(0,a.useEffect)((()=>{r&&e>=0&&(n.current.currentTime=e)}),[r,e]),(0,a.useEffect)((()=>{r&&t>=0&&(n.current.duration=t)}),[r,t]),n.current}(q,$,!u),J=function(e){const[t,r]=(0,a.useState)();return(0,a.useEffect)((()=>{e&&((0,y.Z)()&&(0,d.Z)("[IMA] Creating AdDisplayContainer"),r(new window.google.ima.AdDisplayContainer(e)))}),[e]),(0,a.useEffect)((()=>(t&&((0,y.Z)()&&(0,d.Z)("[IMA] Initializing AdDisplayContainer"),t.initialize()),()=>{t&&((0,y.Z)()&&(0,d.Z)("[IMA] Destroying AdDisplayContainer"),t.destroy())})),[t]),t}(U),ee=function(e){const[t,r]=(0,a.useState)();return(0,a.useEffect)((()=>{e&&((0,y.Z)()&&(0,d.Z)("[IMA] Creating AdsLoader"),r(new window.google.ima.AdsLoader(e)))}),[e]),(0,a.useEffect)((()=>()=>{t&&((0,y.Z)()&&(0,d.Z)("[IMA] Destroying AdsLoader"),t.destroy())}),[t]),t}(J),te=function(e,t,r,n){const[o,i]=(0,a.useState)();return(0,a.useEffect)((()=>{if(!t)return;const o=S((e=>{const t=e.getError();n(new Error(t.getMessage()))})),a=S((e=>{(0,y.Z)()&&(0,d.Z)("[IMA] Creating AdsManager"),i(e.getAdsManager(r))})),s=new window.google.ima.AdsRequest;return s.adTagUrl=T.Z.join(e,{vpaid:1}),s.forceNonLinearFullSlot=!0,s.linearAdSlotWidth=1280,s.linearAdSlotHeight=720,s.setAdWillAutoPlay(!0),s.setAdWillPlayMuted(!1),t.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,o),t.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,a),(0,y.Z)()&&(0,d.Z)("[IMA] Loading ads:",s.adTagUrl),t.requestAds(s),()=>{t.removeEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,o),t.removeEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,a)}}),[t,r,e,n]),(0,a.useEffect)((()=>{if(!o)return;const e=S((t=>{o.removeEventListener(t.type,e),(0,y.Z)()&&(0,d.Z)("[IMA] Enabling preloading");const r=new window.google.ima.AdsRenderingSettings;r.enablePreloading=!0,o.updateAdsRenderingSettings(r)}));return(0,y.Z)()&&(0,d.Z)("[IMA] Starting AdsManager"),(0,y.Z)()&&(0,d.Z)("[IMA] CuePoints:",o.getCuePoints().map(M).join(", ")),o.addEventListener(window.google.ima.AdEvent.Type.LOADED,e),o.init(1280,720,window.google.ima.ViewMode.NORMAL),o.start(),()=>{o.removeEventListener(window.google.ima.AdEvent.Type.LOADED,e),(0,y.Z)()&&(0,d.Z)("[IMA] Destroying AdsManager"),o.destroy()}}),[o]),o}(Z,ee,X,b),re=(0,a.useCallback)((e=>{V(e)}),[]);(0,a.useEffect)((()=>{(0,y.Z)()&&(0,d.Z)("[IMA] Setting locale",Q),window.google.ima.settings.setLocale(Q)}),[Q]),(0,a.useEffect)((()=>{O!==I&&(O===_?(W(g.Ho),H(g.Mf),b(void 0),B(g.pN)):(W(O.displayIndex),H(O.displayTotal)),(0,y.Z)()&&(0,d.Z)("[IMA] Changing ad to",O),L(O))}),[O,L]),(0,a.useEffect)((()=>{N&&(d.Z.error("[IMA] Error",...function(e){if(function(e){const t=e;return!!(t.getMessage||t.getErrorCode||t.getVastErrorCode)}(e)){const t=e;let r,n,o;try{n=t.getMessage()}catch(e){d.Z.error("[IMA] error getting message from AdError",e.message)}try{r=t.getErrorCode()}catch(e){d.Z.error("[IMA] error getting error code from AdError",e.message)}try{o=t.getVastErrorCode()}catch(e){d.Z.error("[IMA] error getting VAST error code from AdError",e.message)}return[n||"Unknown error",`(IMA:${r}, VAST:${o})`]}return[e.message]}(N)),O===_?L(_):k(_))}),[O,N,L]),(0,a.useEffect)((()=>{null==te||te.setVolume(Y/100)}),[te,Y]),(0,a.useEffect)((()=>{null==te||te.resize(F.width||1280,F.height||720,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),[te,n,F]),(0,a.useEffect)((()=>{j?null==te||te.pause():null==te||te.resume()}),[te,j]),(0,a.useEffect)((()=>{const e=S((e=>{var t;const r=e.getAd(),n=null==r?void 0:r.getAdPodInfo();switch(e.type){case window.google.ima.AdEvent.Type.AD_BUFFERING:R((0,s.n9)({playerType:D,isBuffering:!0}));break;case window.google.ima.AdEvent.Type.AD_PROGRESS:R((0,s.n9)({playerType:D,isBuffering:!1})),P(1e3*e.getAdData().currentTime);break;case window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED:case window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:k(_);break;case window.google.ima.AdEvent.Type.LOADED:B(null!=(t=null==n?void 0:n.getTimeOffset())?t:-1);break;case window.google.ima.AdEvent.Type.STARTED:j&&(null==te||te.pause()),k(function(e){if(!e)return null;const t=e.getAdPodInfo();return{clicksThrough:!0,displayIndex:t.getAdPosition(),displayTotal:t.getTotalAds(),duration:e.getDuration(),height:e.getHeight(),mimeType:e.getContentType(),timeOffset:t.getTimeOffset(),width:e.getWidth()}}(r));break;case window.google.ima.AdEvent.Type.LOG:{const t=e.getAdData().adError;t&&1009===t.getErrorCode()&&(d.Z.warn("[IMA] Manually handling empty VAST"),b(t));break}}})),t=[window.google.ima.AdEvent.Type.AD_BUFFERING,window.google.ima.AdEvent.Type.AD_PROGRESS,window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,window.google.ima.AdEvent.Type.LOADED,window.google.ima.AdEvent.Type.LOG,window.google.ima.AdEvent.Type.STARTED,window.google.ima.AdEvent.Type.COMPLETE,window.google.ima.AdEvent.Type.IMPRESSION];return t.forEach((t=>{null==te||te.addEventListener(t,e)})),()=>{t.forEach((t=>{null==te||te.removeEventListener(t,e)}))}}),[te,R,j,P,D]),(0,a.useEffect)((()=>{const e=S((e=>{b(e.getError())}));return null==te||te.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,e),()=>{null==te||te.removeEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,e)}}),[te]);const ne=(0,l.Z)(r,C,p,e,t,m);return a.createElement("div",{style:ne},a.createElement("div",{ref:(0,w.Z)(re,x),className:o()("ImaPlayer-adContainer-pyxPYF",O===_?"ImaPlayer-hasNoAd-PDk1sC":"ImaPlayer-hasAd-kF60Qd")}),A?null:a.createElement(g.ZP,{className:h,displayIndex:G,displayTotal:z,isAdCountdownTimerEnabled:!1,secondsUntilAd:K-q}))}}}]);