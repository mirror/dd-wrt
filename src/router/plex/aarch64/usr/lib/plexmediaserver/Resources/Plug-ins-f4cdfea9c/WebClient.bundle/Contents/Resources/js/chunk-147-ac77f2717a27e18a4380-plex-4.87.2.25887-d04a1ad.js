"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[147],{35343:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(22222),o=r(89186);function a(){return(0,n.P1)(((e,{mediaSubscriptionEntityID:t})=>t),o.Z,((e,t)=>t[e]))}},99912:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(45697),o=r.n(n),a=r(67294);class s extends a.Component{constructor(e,t){super(e,t),this.metricsContext=e.metricsContext}getChildContext(){return{metricsContext:this.metricsContext}}render(){return this.props.children?a.Children.only(this.props.children):null}}s.propTypes={children:o().node,metricsContext:o().string},s.childContextTypes={metricsContext:o().string};const i=s},24930:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(22222),o=r(49510);function a(e,t){const{playQueueItems:r,currentIndex:n}=e,o=t[r[n]];return o&&o.metadataItem}function s(){return(0,n.P1)((({ui:e})=>e.audioVideoPlayer&&e.audioVideoPlayer.playQueue),(({ui:e})=>e.photoPlayer&&e.photoPlayer.playQueue),((e,{metadataItemEntityID:t})=>t),o.Z,((e,t,r,n)=>{if(!r)return!1;let o,s;return e&&(o=a(e,n)),t&&(s=a(t,n)),o===r||s===r}))}},63147:(e,t,r)=>{r.r(t),r.d(t,{default:()=>gn});var n=r(67294),o=r(99912),a=r(72310),s=r(7659),i=r(79115),l=r(28216),c=r(22222),d=r(13469),p=r.n(d),u=r(20917),m=r(15579),y=r(71681),b=r(62291),f=r(70777),v=r(37258),P=r(32527),g=r(19755),w=r.n(g),h=r(71273),S=r(15451),E=r(2380),Z=r(80011),D=r(84503),O=r(26180),C=r(86832),I=r(12559),j=r(87442),x=r(20683),T=r(73703),N=Object.defineProperty,k=Object.defineProperties,M=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&H(e,r,t[r]);if(R)for(var r of R(t))A.call(t,r)&&H(e,r,t[r]);return e};const z="ui/downloadsPage/initDownloadsPage",W="ui/downloadsPage/resetDownloadsPage",B="ui/downloadsPage/fetchProvidersWithStorage",V="ui/downloadsPage/saveDownloadsParams",$=(0,S.Z)(z),K=(0,S.Z)(W),_=(0,S.Z)(B),G=(0,S.Z)(V);(0,E.Z)({[z](e,t){},[W](e,t){},[B](e,t,r){const n=function(e){return e.get("ui").get("downloadsPage")}(e),o=e.get("embeddedServer");(0,j.c9)((()=>{n.set({isProvidersPending:!0,providersError:null})}));const a=o.getXHROptions(x.Z.join("/media/providers",{includeStorage:1}),{headers:{Accept:h.AV.accept}});(0,C.Z)("[Downloads] Updating offline file size"),w().ajax(a).then((e=>{o.get("providers").add(e,{parse:!0,merge:!0}),n.set({isProvidersPending:!1,isProvidersPopulated:!0})}),(e=>{n.set({isProvidersPending:!1,providersError:(0,T.Z)(e)})}))},[V](e,t,r){const n=e.get("user").get("experienceSettings").get("savedPivotParams");var o,a;r((0,D.LN)({savedPivotParams:(o=U({},n),a={downloads:t},k(o,M(a)))}))},[Z.Cs](e,t,r){const{activity:n}=t;(function(e,t){const r=e.get("embeddedServer");return!!r&&r.entityID()===t.serverEntityID})(e,t)&&n.type===I.sC&&n.Response.status===O.ly&&r(_())}});var q=r(89186);function X(){return(0,c.P1)((e=>e.downloads.subscriptions),q.Z,((e=[],t)=>e.map((e=>t[e]))))}var F=r(73788);const{ASCENDING:Q,DESCENDING:Y}=u.Z.directions,J="title",ee="createdAt",te="storageTotal";var re=r(50232),ne=r(13688);const oe=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:o="inherit",testID:a},s){return n.createElement("svg",{ref:s,"aria-hidden":!t,"aria-label":t,className:(0,ne.J)({align:e,color:r,size:o}),"data-testid":a,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M6.53914 12.333C4.23163 15.7865 3 19.8466 3 24C3.00627 29.5676 5.22078 34.9054 9.15768 38.8423C13.0946 42.7792 18.4324 44.9937 24 45C28.1534 45 32.2135 43.7684 35.667 41.4609C39.1204 39.1534 41.812 35.8736 43.4015 32.0364C44.9909 28.1991 45.4068 23.9767 44.5965 19.9031C43.7862 15.8295 41.7861 12.0877 38.8492 9.15077C35.9123 6.21386 32.1705 4.21381 28.0969 3.40352C24.0233 2.59323 19.8009 3.0091 15.9636 4.59854C12.1264 6.18798 8.84665 8.8796 6.53914 12.333ZM24 36.7071L36.7025 24.0046L33.916 21.1441L26 29.022V11.5L22 11.5V29.0168L14.1404 21.1473L11.2933 24.0004L24 36.7071Z",fill:"currentColor",fillRule:"evenodd"}))}));var ae=r(29012),se=r(85448),ie=r(25555),le=r(37920),ce=r(79279),de=r(42985),pe=r(97257),ue=r(63776),me=r(58176),ye=r(10067),be=r(27254),fe=r(53635),ve=r(17633),Pe=r(59258),ge=r(96859),we=r(24107);const he=parseInt(we.Z.downloadCellHeight,10),Se=(0,ge.Z)(he,5);var Ee=r(45697),Ze=r.n(Ee),De=r(17939),Oe=r(97797),Ce=r(46898),Ie=r(73701),je=r(62934),xe=r(35343),Te=r(85209),Ne=r(17949),ke=r(57634),Me=r(97593);var Re=r(14069),Le=r(57635),Ae=r(30547),He=r(35172),Ue=r(3510),ze=r(40645),We=r(98116),Be=r(84419),Ve=r(84520),$e=r(86979),Ke=r(47435),_e=r(56887),Ge=r(98463),qe=r(23226),Xe=r(24930),Fe=Object.defineProperty,Qe=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tt=(0,l.$j)((function(){return(0,c.P1)(((e,{isDisabled:t})=>t),(0,Xe.Z)(),((e,t)=>({isDisabled:e||t})))}))((e=>{const t=e,{metadataItemEntityID:r,buttonComponent:o,dispatch:a}=t,s=((e,t)=>{var r={};for(var n in e)Ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Qe)for(var n of Qe(e))t.indexOf(n)<0&&Je.call(e,n)&&(r[n]=e[n]);return r})(t,["metadataItemEntityID","buttonComponent","dispatch"]);return n.createElement(o,((e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&et(e,r,t[r]);if(Qe)for(var r of Qe(t))Je.call(t,r)&&et(e,r,t[r]);return e})({},s))}));var rt=r(41229);const nt=function(e){return(0,rt.Z)(e||0,e>=1e9?2:0)};var ot=r(79167),at=r(51017),st=r(26397),it=r(37059),lt=r(37338),ct=r(51861);const dt="DownloadSubscriptionSummaryCell-button-uSdRvn MetadataSummaryCell-button-AqSDnR";var pt=Object.defineProperty,ut=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,vt=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Pt=(0,c.P1)(Me.Z,(e=>(0,je.h)(e))),gt=(0,c.P1)(Me.Z,Ce.Z,((e,t)=>e&&e.providers.map((e=>t[e])))),wt=new RegExp(ee),ht=new RegExp(te),St=(0,l.$j)((function(){return(0,c.P1)(((e,{activeSort:t})=>t),((e,{listContext:t})=>t),Pt,(0,De.Z)((0,c.P1)((0,xe.Z)(),gt,((e,t)=>{const{source:r}=e.hint,n=t.find((e=>e.source===r));return(0,Ie.R)(n)})),(e=>e)),(0,xe.Z)(),(0,c.P1)(Oe.Z,(0,xe.Z)(),((e,t)=>t.target?e[t.target.metadata]:null)),(e=I.EW,(0,c.P1)((0,xe.Z)(),(0,ke.Z)(e),((e,t)=>t.find((({Context:t})=>t.subscriptionID===e.key))))),((e,t,r,n,o,a,s)=>{const{grabOperations:i,hint:l}=o,{type:c}=l,d=function(e,t,r){const{type:n}=e,o=(0,Re.Z)(n,t);return(0,Le.Z)(o,null,n,r||{},t)}(l,t,a),p=c!==Te.TRACK,u=a&&p?(0,Ae.Z)(r,n,a.key,void 0,a.playlistType):void 0,m=i&&i.find((e=>e.status===O.pn));return{grabError:m&&(m.error||(0,F.Z)("An unexpected error occurred")),isRefreshing:!!s,isDownloadPending:!a&&!!s&&null==s.Context.completed,isDownloading:!!s&&null!=s.Context.total&&null!=s.progress,mediaSubscription:o,imageWidth:d.width,imageHeight:d.height,imageUrl:d.url,metadataItemEntityID:a?a.entityID:null,providerEntityID:n.entityID,route:u,progress:s?s.progress:null,completed:s?s.Context.completed:null,total:s?s.Context.total:null,showEdit:(y=c,y===Te.SHOW),showCreatedAt:wt.test(e),showStorageTotal:!!a&&ht.test(e)};var y}));var e}),(function(e,t){const{mediaSubscriptionEntityID:r,metricsPage:n,metricsProperties:o}=t,a={mediaSubscriptionEntityID:r,metricsPage:n,metricsProperties:o};return{onEditItem(){e((0,Ne.nY)(a))},onDeleteItem(){e((0,P.L7)(a))},onRetryItem(){e((0,P.OS)(a))}}}))((function(e){const{cellIndex:t,grabError:r,imageHeight:o,imageUrl:a,imageWidth:s,mediaSubscription:i,metadataItemEntityID:l,providerEntityID:c,route:d,progress:p,completed:u,total:m,showStorageTotal:y,showCreatedAt:f,showEdit:v,serverEntityID:P,isDownloadPending:g,isDownloading:w,isRefreshing:h,onEditItem:S,onRetryItem:E,onDeleteItem:Z}=e,D=(0,Ke.Z)(e),[O,C]=(0,n.useState)(!1),I=(0,n.useCallback)((()=>{C(!0)}),[]),j=(0,n.useCallback)((()=>{C(!1),Z()}),[Z]),x=(0,n.useCallback)((()=>{C(!1)}),[]),{hint:T,target:N}=i,{title:k,type:M,subtype:R}=T;let L,A;g?L=(0,F.Z)("Waiting to download"):w&&(L=m>1?(0,F.Z)("Downloading {completed} of {total}",{completed:u+1,total:m}):(0,F.Z)("Downloading")),y?A=nt(i.storageTotal):f&&(A=(0,He.Z)(i.createdAt)),A=A?` ${Be.U} ${A}`:A;const H=!1,U=!h&&r,z=function(e){const{parentTitle:t,grandparentTitle:r,type:n,index:o}=e,a=n===Te.TRACK;let s;return n===Te.SEASON?s=(0,ze.Z)({seasonIndex:o,noLeadingZero:!0,useLongName:!0}):n===Te.EPISODE?s=r:a&&r&&t?s=`${r} ${Be.U} ${t}`:a&&r&&(s=r),s}(T);return n.createElement("div",{className:t%2?"DownloadSubscriptionSummaryCell-alternateItem-yWeXKH MetadataSummaryCell-alternateItem-qJRho9 MetadataSummaryCell-item-zizwY0":"DownloadSubscriptionSummaryCell-item-PN24EO MetadataSummaryCell-item-zizwY0",style:D.style},d?n.createElement(se.Z,{"aria-label":k,className:"DownloadSubscriptionSummaryCell-underlay-AQEjGK MetadataSummaryCell-underlay-lVQ3U2",tabIndex:"0",to:d}):null,n.createElement("div",{className:"DownloadSubscriptionSummaryCell-overlay-dgruv9 MetadataSummaryCell-overlay-pNGHay"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-posterContainer-kdVgru MetadataSummaryCell-posterContainer-agLI_B"},D.isPlaceholder?n.createElement(qe.Z,{imageHeight:o,imageWidth:s}):n.createElement(Ge.Z,{imageHeight:o,imageUrl:a,imageWidth:s,isOffscreen:!1,metadataItemEntityID:l,metadataKey:i.hint.source,providerEntityID:c,route:d,serverEntityID:P,showEdit:H,showLink:H,showMore:H,showOverlay:!!N,showSelect:H,subtype:R,title:k,type:M})),n.createElement("div",{className:"DownloadSubscriptionSummaryCell-summaryContainer-BIjOtH MetadataSummaryCell-summaryContainer-vKIYSr"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-titleContainer-dDHjDA MetadataSummaryCell-titleContainer-iJUBIV"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-title-n1itJC MetadataSummaryCell-title-oz7jL8"},function(e){const{title:t,parentTitle:r,grandparentTitle:n,type:o,index:a,parentIndex:s,originallyAvailableAt:i}=e;let l=n||r||t;return o===Te.EPISODE?l=`${(0,Ue.Z)({episodeIndex:a,seasonIndex:s,date:i,noLeadingZero:!0,separator:" Â· "})} ${Be.U} ${t}`:o===Te.TRACK&&(l=t),l}(T))),n.createElement("div",{className:"DownloadSubscriptionSummaryCell-summary-HplPrA MetadataSummaryCell-summary-tXxX2g"},z?n.createElement("div",null,z):null,U?n.createElement("div",null,n.createElement(st.Z,{className:"DownloadSubscriptionSummaryCell-errorIcon-3Uc3DO"}),r):n.createElement("div",null,function(e){const{guid:t,type:r}=e,{MOVIE:n,SEASON:o,EPISODE:a}=Te;return r===n&&t.includes(ot.Hn)?(0,F.Z)("Video"):r===o?(0,F.Z)("TV Show Season"):r===a?(0,F.Z)("TV Show Episode"):Te.getMetadataType(r).title}(T),A))),g||w?n.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusContainer-kZsCwk"},n.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusText-Uhpnlt"},L),n.createElement(We.Z,{lineWidth:2,progress:p,showIndeterminate:g,showProgressText:!1,size:20,strokeColor:at.Z.selectedColor,trackColor:at.Z.defaultLinkDisabledLinkColor})):null,n.createElement("div",{className:"DownloadSubscriptionSummaryCell-actions-niNn1E MetadataSummaryCell-actions-HnEQtT"},U?n.createElement($e.Z,{ariaLabel:(0,F.Z)("Retry {title}",{title:k}),className:dt,component:Ve.Z,iconComponent:lt.Z,tooltip:(0,F.Z)("Retry"),onPress:E}):null,v?n.createElement($e.Z,{ariaLabel:(0,F.Z)("Edit download details for {title}",{title:k}),className:dt,component:Ve.Z,iconComponent:it.Z,tooltip:(0,F.Z)("Edit"),onPress:S}):null,n.createElement(tt,{ariaLabel:(0,F.Z)("Delete {title}",{title:k}),buttonComponent:$e.Z,className:dt,component:Ve.Z,"data-testid":"downloadSubscriptionRemoveButton",iconComponent:ct.Z,kind:ie.T,metadataItemEntityID:l,tooltip:(0,F.Z)("Delete"),onPress:I}),n.createElement(_e.Z,{isOpen:O,message:(0,F.Z)("Are you sure you want to delete this download?"),metricsPage:b.Ke,title:(0,F.Z)("Delete Download"),onCancel:x,onConfirm:j}))))}));St.propTypes=ut(((e,t)=>{for(var r in t||(t={}))bt.call(t,r)&&vt(e,r,t[r]);if(yt)for(var r of yt(t))ft.call(t,r)&&vt(e,r,t[r]);return e})({},St.propTypes),mt({mediaSubscriptionEntityID:Ze().string.isRequired,metricsPage:Ze().string.isRequired,metricsProperties:Ze().object.isRequired}));const Et=St;var Zt=Object.defineProperty,Dt=Object.defineProperties,Ot=Object.getOwnPropertyDescriptors,Ct=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,xt=(e,t,r)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Tt=(e,t)=>{for(var r in t||(t={}))It.call(t,r)&&xt(e,r,t[r]);if(Ct)for(var r of Ct(t))jt.call(t,r)&&xt(e,r,t[r]);return e},Nt=(e,t)=>Dt(e,Ot(t));const kt=function(e){const t=e,{activeSort:r,metricsPage:o,metricsProperties:a,serverEntityID:s}=t,i=((e,t)=>{var r={};for(var n in e)It.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ct)for(var n of Ct(e))t.indexOf(n)<0&&jt.call(e,n)&&(r[n]=e[n]);return r})(t,["activeSort","metricsPage","metricsProperties","serverEntityID"]),l=(0,n.useMemo)((()=>e=>n.createElement(Et,Nt(Tt({},e),{activeSort:r,listContext:ve.jF,listType:Pe.t1,metricsPage:o,metricsProperties:a,serverEntityID:s}))),[r,o,a,s]);return n.createElement(fe.Z,Nt(Tt({},i),{cellRenderer:l,className:"DownloadSubscriptionSummaryList-content-XZHPvL",keyPropName:"mediaSubscriptionEntityID",layout:Se,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",scrollerClassName:"DownloadSubscriptionSummaryList-scroller-Aq9cpn VirtualListScroller-scroller-eDZkq_"}))};var Mt=r(86418),Rt=Object.defineProperty,Lt=Object.defineProperties,At=Object.getOwnPropertyDescriptors,Ht=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let Bt,Vt;function $t(e,t=window.location.hash){const r=function(e){if(Bt===e)return Vt;const t=e.split("?"),r=t.length>1?t[1]:void 0,n=r?x.Z.parseParams(r):{};return Bt=e,Vt={url:t[0],params:n},Vt}(t);return x.Z.join(r.url,((e,t)=>Lt(e,At(t)))(((e,t)=>{for(var r in t||(t={}))Ut.call(t,r)&&Wt(e,r,t[r]);if(Ht)for(var r of Ht(t))zt.call(t,r)&&Wt(e,r,t[r]);return e})({},r.params),{type:e.type,sort:e.sort,save:1}))}function Kt(e,t){return e?function(e,t){const r=Te.getMetadataType(e);return t?r.plural:r.title}(e,t):(0,F.Z)("All")}function _t({type:e,sort:t}){const r={save:1};return e&&(r.type=e),t&&(r.sort=t),{type:e,title:Kt(e,!0),route:$t(r)}}var Gt=r(42313),qt=r(17282),Xt=r(54768),Ft=r(83782),Qt=r(1522),Yt=r(35567),Jt=r(10125),er=r(84332),tr=r(89377),rr=r(89146),nr=Object.defineProperty,or=Object.defineProperties,ar=Object.getOwnPropertyDescriptors,sr=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,cr=(e,t,r)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const{ASCENDING:dr,DESCENDING:pr}=u.Z.directions,ur=function(e){const t=e,{activeType:r,activeSubtype:o,activeSort:a,sorts:s,selectedSort:i,onMenuClose:l}=t,c=((e,t)=>{var r={};for(var n in e)ir.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&sr)for(var n of sr(e))t.indexOf(n)<0&&lr.call(e,n)&&(r[n]=e[n]);return r})(t,["activeType","activeSubtype","activeSort","sorts","selectedSort","onMenuClose"]);return n.createElement(Jt.Z,((e,t)=>or(e,ar(t)))(((e,t)=>{for(var r in t||(t={}))ir.call(t,r)&&cr(e,r,t[r]);if(sr)for(var r of sr(t))lr.call(t,r)&&cr(e,r,t[r]);return e})({},c),{onMenuClose:l}),s.map((({key:e,descKey:t,defaultDirection:s,title:c})=>{const d=i.key===e;let p=s;d&&(p=a?a===t?dr:pr:s===dr?pr:dr);const u=p===pr;return n.createElement(er.Z,{key:e,iconComponent:u?tr.Z:rr.Z,isSelected:d,selectedIconAriaLabel:u?(0,F.Z)("Ascending"):(0,F.Z)("Descending"),to:$t({type:r,subtype:o,sort:u?t:e}),onPress:l},c)})))};var mr=Object.defineProperty,yr=Object.defineProperties,br=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,gr=(e,t,r)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const wr=function(e){const t=e,{activeType:r,types:o,onMenuClose:a}=t,s=((e,t)=>{var r={};for(var n in e)vr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fr)for(var n of fr(e))t.indexOf(n)<0&&Pr.call(e,n)&&(r[n]=e[n]);return r})(t,["activeType","types","onMenuClose"]);return n.createElement(Jt.Z,((e,t)=>yr(e,br(t)))(((e,t)=>{for(var r in t||(t={}))vr.call(t,r)&&gr(e,r,t[r]);if(fr)for(var r of fr(t))Pr.call(t,r)&&gr(e,r,t[r]);return e})({},s),{onMenuClose:a}),o.map((({type:e,title:t,route:o})=>{let s;return s=e?e===r:!r,n.createElement(er.Z,{key:e||"all",isSelected:s,to:o,onMenuClose:a},t)})))};var hr=r(22688),Sr=r(86192),Er=r(5103),Zr=r(62208),Dr=r(31722),Or=r(17408),Cr=r(54647),Ir=r(90558);function jr(e){const t=e["aria-label"],r=e.className,o=e.style,a={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};a["aria-hidden"]=!t,a.style=o,a.className=Ir.Z.plexIcon+(r?" "+r:"");const s=[n.createElement.apply(n,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&s.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",a].concat(s))}jr.propTypes={"aria-label":Ze().string,className:Ze().string,style:Ze().object};const xr=jr;var Tr=Object.defineProperty,Nr=Object.defineProperties,kr=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Ar=(e,t,r)=>t in e?Tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Hr=2*(0,Zr.Z)(Cr.Z.slowSpeed),Ur=function(e){const t=e,{isProcessingSubscriptions:r,onPress:o}=t,a=((e,t)=>{var r={};for(var n in e)Rr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Mr)for(var n of Mr(e))t.indexOf(n)<0&&Lr.call(e,n)&&(r[n]=e[n]);return r})(t,["isProcessingSubscriptions","onPress"]),s=(0,Or.Z)(r,!0,Hr)||r;return n.createElement(Er.Z,((e,t)=>Nr(e,kr(t)))(((e,t)=>{for(var r in t||(t={}))Rr.call(t,r)&&Ar(e,r,t[r]);if(Mr)for(var r of Mr(t))Lr.call(t,r)&&Ar(e,r,t[r]);return e})({},a),{"data-testid":"toolbarProcessSubscriptions",isDisabled:r,tooltip:(0,F.Z)("Check for new downloads"),tooltipAttachment:Dr.OI,onPress:s?null:o}),s?n.createElement(Sr.Z,{className:"ToolbarProcessSubscriptionsButton-spinner-ymigGA Spinner-spinner-XTaskc spin-spin-H8VRGl"}):n.createElement(xr,{className:"ToolbarProcessSubscriptionsButton-icon-PTiM3B PlexIcon-plexIcon-a5zCNX"}))},zr={onRefreshDownloads:P.GX},Wr=(0,l.$j)((function(){return(0,c.P1)(X(),(0,hr.ZP)(I.l1),((e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t})))}),zr)((function(e){const{className:t,canShowProcessSubscriptions:r,isProcessingSubscriptions:o,onRefreshDownloads:a}=e;return n.createElement("div",{className:t},r?n.createElement(Ur,{isProcessingSubscriptions:o,onPress:a}):null)})),Br=(0,c.P1)(Me.Z,Ce.Z,((e,t)=>{const{providers:r}=e;return r.reduce(((e,r)=>{const n=t[r].features.find((e=>e.type===Mt.Z.CONTENT));return n&&null!=n.storageTotal&&(e+=n.storageTotal),e}),0)})),Vr=(0,l.$j)((function(){return(0,c.P1)(((e,{activeSort:t})=>t),Br,X(),(0,c.P1)((0,ke.Z)(I.sC),(e=>e.reduce(((e,t)=>e+t.Context.currentSize||0),0))),((e,t,r,n)=>{const o=_t({sort:e});return{downloadTypes:r.reduce(((t,r)=>{const{type:n,subtype:o}=r.hint;if(!(o?t.find((e=>e.subtype===o)):t.find((e=>e.type===n)))){const r=_t({type:n,subtype:o,sort:e});t.push(r)}return t}),[o]),storageTotal:t+n}}))}))((function(e){const{serverEntityID:t,activeType:r,activeSort:o,selectedSort:a,downloadTypes:s,storageTotal:i,sorts:l,size:c}=e,d=(0,Ft.Z)(),p=(0,Ft.Z)(),[u,m]=(0,n.useState)(i),[y,b]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),P=(0,n.useCallback)((()=>{b(!y)}),[y]),g=(0,n.useCallback)((()=>{b(!1)}),[]),w=(0,n.useCallback)((()=>{v(!f)}),[f]),h=(0,n.useCallback)((()=>{v(!1)}),[]);(0,n.useEffect)((()=>{let e=window.setTimeout((()=>{m(i)}),100);return()=>{e=window.clearTimeout(e)}}),[i]);const S=r?(0,F.Z)("All {typeTitle} Downloads",{typeTitle:Kt(r,!1)}):(0,F.Z)("All Downloads");return n.createElement(Qt.Z,{className:"DownloadsPageHeader-pageHeader-ZXDUnB PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},n.createElement(Xt.Z,null,n.createElement(qt.Z,{"data-testid":"downloadsTypesMenuButton",hasMenu:s.length>2,id:d,isMenuOpen:y,onPress:P},S),n.createElement(wr,{activeType:r,isOpen:y,target:d,types:s,onMenuClose:g}),c>1?n.createElement(qt.Z,{"data-testid":"downloadsSortsMenuButton",hasMenu:!0,id:p,isMenuOpen:f,onPress:w},(0,F.Z)("By {sortTitle}",{sortTitle:a.title})):null,c>1?n.createElement(ur,{activeSort:o,activeType:r,isOpen:f,selectedSort:a,sorts:l,target:p,onMenuClose:h}):null,n.createElement(Gt.Z,null,c)),n.createElement(Yt.Z,null,n.createElement("div",{className:"DownloadsPageHeader-storageTotal-zA1dwc"},(0,F.Z)("{storageTotal} Downloaded",{storageTotal:nt(u)})),n.createElement(Wr,{serverEntityID:t})))})),$r="DownloadsPage-upsell-joAmi8",Kr=function(e){const{serverEntityID:t,activeType:r,activeSort:o,selectedSort:a,sorts:s,mediaSubscriptions:i,metricsPage:l,metricsProperties:c,isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:u,canShowUpsell:m,providersError:y,mediaSubscriptionsError:b}=e,[f,v]=(0,n.useState)(!1),P=(0,n.useCallback)((()=>{v(!0)}),[]),g=(0,n.useCallback)((()=>{v(!1)}),[]);if(d&&!p||u&&!i.length)return n.createElement(ue.Z,null,n.createElement(de.Z,null));const w=y||b,h=i.length>0;return n.createElement(pe.Z,{metricsPage:l,metricsProperties:c,scrollDirection:le.Hn},h?n.createElement(Vr,{activeSort:o,activeType:r,selectedSort:a,serverEntityID:t,size:i.length,sorts:s}):null,n.createElement("div",{className:"DownloadsPage-downloadsPageContent-kcFCsY PageContent-pageContent-rk0p0C"},w?n.createElement(ye.Z,null):null,w||h?null:n.createElement(me.Z,{description:n.createElement(ae.Z,{className:$r,message:(0,F.Z)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:n.createElement(re.D,{key:"downloadIcon",align:"baseline"})}]}),iconClassName:"DownloadsPage-iconDownloadUpsell-OCqLgi",iconComponent:oe,kind:ie._8,title:(0,F.Z)("You have no items downloaded")},m?n.createElement(ae.Z,{className:$r,message:(0,F.Z)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:se.Z,kind:ie._8,onPress:P}]}):null),!w&&h?n.createElement(kt,{activeSort:o,items:i,metricsPage:l,metricsProperties:c,serverEntityID:t,size:i.length}):null,m?n.createElement(be.Z,{isOpen:f,origin:ce.Yz,onModalClose:g}):null))};var _r=Object.defineProperty,Gr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,Xr=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,Qr=Object.prototype.propertyIsEnumerable,Yr=(e,t,r)=>t in e?_r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jr=(e,t)=>{var r={};for(var n in e)Fr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Xr)for(var n of Xr(e))t.indexOf(n)<0&&Qr.call(e,n)&&(r[n]=e[n]);return r};const en={pane:"sync"};function tn(e,t){return!e&&!t||p().isEqual(e,t)}const rn=(0,v.Z)((e=>{const{key:t,direction:r}=e,{DESCENDING:n}=u.Z.directions;return(e,o)=>{let a,s;return t===J?(a=e.hint[t].toUpperCase(),s=o.hint[t].toUpperCase()):(a=e[t],s=o[t]),a>s?r===n?-1:1:a<s?r===n?1:-1:0}})),nn={dispatchFetchProvidersWithStorage:_,dispatchInitDownloadsPage:$,dispatchRefreshDownloads:P.GX,dispatchResetDownloadsPage:K,dispatchSaveDownloadsParams:G};class on extends n.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!tn(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){tn(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const e=this.props,{params:t,savedDownloadsParams:r,dispatchFetchProvidersWithStorage:o,dispatchRefreshDownloads:a,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:i,dispatchSaveDownloadsParams:l}=e,c=Jr(e,["params","savedDownloadsParams","dispatchFetchProvidersWithStorage","dispatchRefreshDownloads","dispatchInitDownloadsPage","dispatchResetDownloadsPage","dispatchSaveDownloadsParams"]);return n.createElement(Kr,((e,t)=>Gr(e,qr(t)))(((e,t)=>{for(var r in t||(t={}))Fr.call(t,r)&&Yr(e,r,t[r]);if(Xr)for(var r of Xr(t))Qr.call(t,r)&&Yr(e,r,t[r]);return e})({},c),{metricsPage:b.Q_,metricsProperties:en}))}}const an=(0,l.$j)((function(){return(0,c.P1)(((e,{params:t})=>t),(e=>e.ui.downloadsPage),(e=>e.downloads),y.Z,X(),(0,m.Z)(f.iU),(0,m.Z)(f.Ed),((e,t,r,n,o,a,s)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:d,isProvidersPopulated:p,providersError:u}=t,{isSubscriptionsPending:m,subscriptionsError:y}=r,b=[{key:J,descKey:"title:desc",defaultDirection:Q,title:(0,F.Z)("Title")},{key:ee,descKey:"createdAt:desc",defaultDirection:Y,title:(0,F.Z)("Date Downloaded"),isDefault:!0},{key:te,descKey:"storageTotal:desc",defaultDirection:Y,title:(0,F.Z)("Size on Disk")}],f=i.split(":");let v=f[0];const P=f[1];let g=b.find((e=>e.key===v));g||(g=b.find((e=>e.isDefault))),v||(v=g.key),P&&(g.direction=P);let w=[...o];if((l||c)&&(w=o.reduce(((e,t)=>{const r=t.hint.subtype===c,n=t.hint.type===l;let o=!1;return c?r&&(o=!0):n&&!t.hint.subtype&&(o=!0),o&&e.push(t),e}),[]),o.length&&!w.length)){const t=e,{type:r,subtype:n}=t;w=o,e=Jr(t,["type","subtype"]),l=null,c=null}const h=rn(g);return w.sort(h),{selectedSort:g,sorts:b,mediaSubscriptions:w.map((e=>e.entityID)),isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:m,canShowUpsell:!a&&!s,providersError:u,mediaSubscriptionsError:y,savedDownloadsParams:n.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}}))}),nn)(on);var sn=r(42674),ln=r(56791);const cn=function(e){const{children:t,isWaitingForEmbeddedServer:r,embeddedServerEntityID:o}=e;return r?n.createElement(ue.Z,null,n.createElement(de.Z,null)):o?n.createElement(sn.Z,{serverEntityID:o},t(o)):n.createElement(ln.Z,null)};var dn=Object.defineProperty,pn=Object.defineProperties,un=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,fn=(e,t,r)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const vn=(0,c.P1)(Me.Z,((e={})=>{const{entityID:t,isProvidersPopulated:r=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:r}})),Pn=(0,l.$j)(vn)((function(e){const t=e,{isProvidersPopulated:r}=t,o=((e,t)=>{var r={};for(var n in e)yn.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&mn)for(var n of mn(e))t.indexOf(n)<0&&bn.call(e,n)&&(r[n]=e[n]);return r})(t,["isProvidersPopulated"]);return n.createElement(cn,((e,t)=>pn(e,un(t)))(((e,t)=>{for(var r in t||(t={}))yn.call(t,r)&&fn(e,r,t[r]);if(mn)for(var r of mn(t))bn.call(t,r)&&fn(e,r,t[r]);return e})({},o),{isWaitingForEmbeddedServer:!r}))}));function gn(){const e=(0,a.Z)(),t=(0,n.useMemo)((()=>({context:(0,i.Z)(e.context),type:(0,i.Z)(e.type),sort:(0,i.Z)(e.sort),save:(0,s.Z)(e.save)})),[e]);return n.createElement(o.Z,{metricsContext:t.context},n.createElement(Pn,null,(e=>n.createElement(an,{params:t,serverEntityID:e,shouldSaveParams:t.save}))))}},1522:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(67294),o=Object.defineProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{children:r}=t,o=((e,t)=>{var r={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&i.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))i.call(t,r)&&l(e,r,t[r]);return e})({},o),r)}c.defaultProps={className:"PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"};const d=c},35567:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(67294),o=r(70513);const a=function({children:e}){return n.createElement(o.Z,{className:"PrimaryPageHeaderRight-pageHeaderRight-PLi1N6 PageHeaderRight-pageHeaderRight-hBWIio"},e)}},10067:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(67294),o=r(37920),a=r(56791),s=r(24141),i=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&p(e,r,t[r]);return e})({className:s.Z.innerEmptyPage,contentClassName:s.Z.innerEmptyPageContent,scrollDirection:o.Hn},i),r)}},14069:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(99027);function o(e,t){switch((0,n.n3)(e,t)){case n.oz:return 114;case n.s4:return 64;case n.Zp:return 74}}},37338:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(45697),o=r.n(n),a=r(67294),s=r(90558);function i(e){const t=e["aria-label"],r=e.className,n=e.style,o={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-reload-560"};o["aria-hidden"]=!t,o.style=n,o.className=s.Z.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m280 560c-1.807-.003-3.614-.017-5.421-.052-3.292-.062-6.584-.182-9.873-.359-9.731-.525-19.435-1.554-29.059-3.089-11.735-1.871-23.35-4.493-34.75-7.849-11.774-3.466-23.317-7.714-34.53-12.705-13.924-6.197-27.338-13.54-40.067-21.922-13.116-8.636-25.504-18.374-36.998-29.074-11.686-10.88-22.446-22.753-32.124-35.451-9.55-12.53-18.044-25.862-25.357-39.816-6.195-11.822-11.541-24.088-15.978-36.676-4.407-12.5-7.916-25.316-10.495-38.317-3.569-17.998-5.348-36.343-5.348-54.69 0-12.5.823-25 2.48-37.39 1.885-14.104 4.851-28.063 8.869-41.713 4.106-13.949 9.311-27.574 15.547-40.711 7.129-15.019 15.603-29.397 25.281-42.915 9.786-13.67 20.8-26.46 32.864-38.17 12.674-12.302 26.506-23.411 41.259-33.125 14.39-9.476 29.653-17.622 45.541-24.289 17.483-7.337 35.716-12.877 54.325-16.507 17.427-3.4 35.175-5.122 52.929-5.179 17.775-.056 35.554 1.556 53.023 4.85 18.646 3.516 36.926 8.946 54.466 16.181 15.934 6.572 31.253 14.628 45.705 24.02 14.578 9.474 28.271 20.305 40.854 32.302 1.622 1.546 3.224 3.111 4.808 4.695l82.049-82.049 0 220-220 0 81.382-81.382c-.709-.71-1.423-1.413-2.142-2.112-9.074-8.807-18.975-16.76-29.536-23.715-10.101-6.651-20.804-12.386-31.942-17.1-12.43-5.261-25.396-9.245-38.635-11.871-12.45-2.469-25.133-3.735-37.825-3.816-12.729-.08-25.466 1.027-37.984 3.347-13.29 2.463-26.324 6.29-38.836 11.406-11.386 4.656-22.336 10.374-32.671 17.047-10.456 6.75-20.28 14.475-29.313 23.036-8.883 8.419-17 17.646-24.213 27.534-6.997 9.59-13.143 19.801-18.331 30.479-4.523 9.309-8.318 18.972-11.333 28.873-2.889 9.484-5.061 19.185-6.498 28.995-1.42 9.691-2.123 19.485-2.123 29.279 0 13.333 1.307 26.665 3.942 39.736 1.824 9.049 4.281 17.969 7.35 26.674 3.163 8.971 6.973 17.713 11.389 26.139 5.226 9.973 11.299 19.501 18.124 28.456 6.932 9.096 14.639 17.599 23.009 25.392 7.933 7.385 16.461 14.131 25.477 20.146 8.881 5.924 18.236 11.138 27.949 15.569 7.946 3.624 16.131 6.723 24.485 9.267 8.087 2.463 16.331 4.405 24.666 5.815 6.853 1.159 13.767 1.958 20.704 2.398 2.353.149 4.708.257 7.065.325 1.296.037 2.592.059 3.889.074.65.005 1.301.008 1.951.009l.259 79.999-.259.001"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",o].concat(i))}i.propTypes={"aria-label":o().string,className:o().string,style:o().object};const l=i}}]);